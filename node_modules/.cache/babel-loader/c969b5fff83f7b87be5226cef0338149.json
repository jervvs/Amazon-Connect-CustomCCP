{"ast":null,"code":"// AWS SDK for JavaScript v2.553.0\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// License at https://sdk.amazonaws.com/js/BUNDLE_LICENSE.txt\n(function () {\n  function r(e, n, t) {\n    function o(i, f) {\n      if (!n[i]) {\n        if (!e[i]) {\n          var c = \"function\" == typeof require && require;\n          if (!f && c) return c(i, !0);\n          if (u) return u(i, !0);\n          var a = new Error(\"Cannot find module '\" + i + \"'\");\n          throw a.code = \"MODULE_NOT_FOUND\", a;\n        }\n\n        var p = n[i] = {\n          exports: {}\n        };\n        e[i][0].call(p.exports, function (r) {\n          var n = e[i][1][r];\n          return o(n || r);\n        }, p, p.exports, r, e, n, t);\n      }\n\n      return n[i].exports;\n    }\n\n    for (var u = \"function\" == typeof require && require, i = 0; i < t.length; i++) o(t[i]);\n\n    return o;\n  }\n\n  return r;\n})()({\n  1: [function (require, module, exports) {\n    module.exports = {\n      \"version\": \"2.0\",\n      \"metadata\": {\n        \"apiVersion\": \"2014-06-30\",\n        \"endpointPrefix\": \"cognito-identity\",\n        \"jsonVersion\": \"1.1\",\n        \"protocol\": \"json\",\n        \"serviceFullName\": \"Amazon Cognito Identity\",\n        \"serviceId\": \"Cognito Identity\",\n        \"signatureVersion\": \"v4\",\n        \"targetPrefix\": \"AWSCognitoIdentityService\",\n        \"uid\": \"cognito-identity-2014-06-30\"\n      },\n      \"operations\": {\n        \"CreateIdentityPool\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"IdentityPoolName\", \"AllowUnauthenticatedIdentities\"],\n            \"members\": {\n              \"IdentityPoolName\": {},\n              \"AllowUnauthenticatedIdentities\": {\n                \"type\": \"boolean\"\n              },\n              \"SupportedLoginProviders\": {\n                \"shape\": \"S4\"\n              },\n              \"DeveloperProviderName\": {},\n              \"OpenIdConnectProviderARNs\": {\n                \"shape\": \"S8\"\n              },\n              \"CognitoIdentityProviders\": {\n                \"shape\": \"Sa\"\n              },\n              \"SamlProviderARNs\": {\n                \"shape\": \"Sf\"\n              },\n              \"IdentityPoolTags\": {\n                \"shape\": \"Sg\"\n              }\n            }\n          },\n          \"output\": {\n            \"shape\": \"Sj\"\n          }\n        },\n        \"DeleteIdentities\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"IdentityIdsToDelete\"],\n            \"members\": {\n              \"IdentityIdsToDelete\": {\n                \"type\": \"list\",\n                \"member\": {}\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"UnprocessedIdentityIds\": {\n                \"type\": \"list\",\n                \"member\": {\n                  \"type\": \"structure\",\n                  \"members\": {\n                    \"IdentityId\": {},\n                    \"ErrorCode\": {}\n                  }\n                }\n              }\n            }\n          }\n        },\n        \"DeleteIdentityPool\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"IdentityPoolId\"],\n            \"members\": {\n              \"IdentityPoolId\": {}\n            }\n          }\n        },\n        \"DescribeIdentity\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"IdentityId\"],\n            \"members\": {\n              \"IdentityId\": {}\n            }\n          },\n          \"output\": {\n            \"shape\": \"Su\"\n          }\n        },\n        \"DescribeIdentityPool\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"IdentityPoolId\"],\n            \"members\": {\n              \"IdentityPoolId\": {}\n            }\n          },\n          \"output\": {\n            \"shape\": \"Sj\"\n          }\n        },\n        \"GetCredentialsForIdentity\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"IdentityId\"],\n            \"members\": {\n              \"IdentityId\": {},\n              \"Logins\": {\n                \"shape\": \"Sz\"\n              },\n              \"CustomRoleArn\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"IdentityId\": {},\n              \"Credentials\": {\n                \"type\": \"structure\",\n                \"members\": {\n                  \"AccessKeyId\": {},\n                  \"SecretKey\": {},\n                  \"SessionToken\": {},\n                  \"Expiration\": {\n                    \"type\": \"timestamp\"\n                  }\n                }\n              }\n            }\n          }\n        },\n        \"GetId\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"IdentityPoolId\"],\n            \"members\": {\n              \"AccountId\": {},\n              \"IdentityPoolId\": {},\n              \"Logins\": {\n                \"shape\": \"Sz\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"IdentityId\": {}\n            }\n          }\n        },\n        \"GetIdentityPoolRoles\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"IdentityPoolId\"],\n            \"members\": {\n              \"IdentityPoolId\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"IdentityPoolId\": {},\n              \"Roles\": {\n                \"shape\": \"S1b\"\n              },\n              \"RoleMappings\": {\n                \"shape\": \"S1d\"\n              }\n            }\n          }\n        },\n        \"GetOpenIdToken\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"IdentityId\"],\n            \"members\": {\n              \"IdentityId\": {},\n              \"Logins\": {\n                \"shape\": \"Sz\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"IdentityId\": {},\n              \"Token\": {}\n            }\n          }\n        },\n        \"GetOpenIdTokenForDeveloperIdentity\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"IdentityPoolId\", \"Logins\"],\n            \"members\": {\n              \"IdentityPoolId\": {},\n              \"IdentityId\": {},\n              \"Logins\": {\n                \"shape\": \"Sz\"\n              },\n              \"TokenDuration\": {\n                \"type\": \"long\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"IdentityId\": {},\n              \"Token\": {}\n            }\n          }\n        },\n        \"ListIdentities\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"IdentityPoolId\", \"MaxResults\"],\n            \"members\": {\n              \"IdentityPoolId\": {},\n              \"MaxResults\": {\n                \"type\": \"integer\"\n              },\n              \"NextToken\": {},\n              \"HideDisabled\": {\n                \"type\": \"boolean\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"IdentityPoolId\": {},\n              \"Identities\": {\n                \"type\": \"list\",\n                \"member\": {\n                  \"shape\": \"Su\"\n                }\n              },\n              \"NextToken\": {}\n            }\n          }\n        },\n        \"ListIdentityPools\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"MaxResults\"],\n            \"members\": {\n              \"MaxResults\": {\n                \"type\": \"integer\"\n              },\n              \"NextToken\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"IdentityPools\": {\n                \"type\": \"list\",\n                \"member\": {\n                  \"type\": \"structure\",\n                  \"members\": {\n                    \"IdentityPoolId\": {},\n                    \"IdentityPoolName\": {}\n                  }\n                }\n              },\n              \"NextToken\": {}\n            }\n          }\n        },\n        \"ListTagsForResource\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"ResourceArn\"],\n            \"members\": {\n              \"ResourceArn\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"Tags\": {\n                \"shape\": \"Sg\"\n              }\n            }\n          }\n        },\n        \"LookupDeveloperIdentity\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"IdentityPoolId\"],\n            \"members\": {\n              \"IdentityPoolId\": {},\n              \"IdentityId\": {},\n              \"DeveloperUserIdentifier\": {},\n              \"MaxResults\": {\n                \"type\": \"integer\"\n              },\n              \"NextToken\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"IdentityId\": {},\n              \"DeveloperUserIdentifierList\": {\n                \"type\": \"list\",\n                \"member\": {}\n              },\n              \"NextToken\": {}\n            }\n          }\n        },\n        \"MergeDeveloperIdentities\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"SourceUserIdentifier\", \"DestinationUserIdentifier\", \"DeveloperProviderName\", \"IdentityPoolId\"],\n            \"members\": {\n              \"SourceUserIdentifier\": {},\n              \"DestinationUserIdentifier\": {},\n              \"DeveloperProviderName\": {},\n              \"IdentityPoolId\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"IdentityId\": {}\n            }\n          }\n        },\n        \"SetIdentityPoolRoles\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"IdentityPoolId\", \"Roles\"],\n            \"members\": {\n              \"IdentityPoolId\": {},\n              \"Roles\": {\n                \"shape\": \"S1b\"\n              },\n              \"RoleMappings\": {\n                \"shape\": \"S1d\"\n              }\n            }\n          }\n        },\n        \"TagResource\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"ResourceArn\"],\n            \"members\": {\n              \"ResourceArn\": {},\n              \"Tags\": {\n                \"shape\": \"Sg\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"UnlinkDeveloperIdentity\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"IdentityId\", \"IdentityPoolId\", \"DeveloperProviderName\", \"DeveloperUserIdentifier\"],\n            \"members\": {\n              \"IdentityId\": {},\n              \"IdentityPoolId\": {},\n              \"DeveloperProviderName\": {},\n              \"DeveloperUserIdentifier\": {}\n            }\n          }\n        },\n        \"UnlinkIdentity\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"IdentityId\", \"Logins\", \"LoginsToRemove\"],\n            \"members\": {\n              \"IdentityId\": {},\n              \"Logins\": {\n                \"shape\": \"Sz\"\n              },\n              \"LoginsToRemove\": {\n                \"shape\": \"Sv\"\n              }\n            }\n          }\n        },\n        \"UntagResource\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"ResourceArn\"],\n            \"members\": {\n              \"ResourceArn\": {},\n              \"TagKeys\": {\n                \"type\": \"list\",\n                \"member\": {}\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"UpdateIdentityPool\": {\n          \"input\": {\n            \"shape\": \"Sj\"\n          },\n          \"output\": {\n            \"shape\": \"Sj\"\n          }\n        }\n      },\n      \"shapes\": {\n        \"S4\": {\n          \"type\": \"map\",\n          \"key\": {},\n          \"value\": {}\n        },\n        \"S8\": {\n          \"type\": \"list\",\n          \"member\": {}\n        },\n        \"Sa\": {\n          \"type\": \"list\",\n          \"member\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"ProviderName\": {},\n              \"ClientId\": {},\n              \"ServerSideTokenCheck\": {\n                \"type\": \"boolean\"\n              }\n            }\n          }\n        },\n        \"Sf\": {\n          \"type\": \"list\",\n          \"member\": {}\n        },\n        \"Sg\": {\n          \"type\": \"map\",\n          \"key\": {},\n          \"value\": {}\n        },\n        \"Sj\": {\n          \"type\": \"structure\",\n          \"required\": [\"IdentityPoolId\", \"IdentityPoolName\", \"AllowUnauthenticatedIdentities\"],\n          \"members\": {\n            \"IdentityPoolId\": {},\n            \"IdentityPoolName\": {},\n            \"AllowUnauthenticatedIdentities\": {\n              \"type\": \"boolean\"\n            },\n            \"SupportedLoginProviders\": {\n              \"shape\": \"S4\"\n            },\n            \"DeveloperProviderName\": {},\n            \"OpenIdConnectProviderARNs\": {\n              \"shape\": \"S8\"\n            },\n            \"CognitoIdentityProviders\": {\n              \"shape\": \"Sa\"\n            },\n            \"SamlProviderARNs\": {\n              \"shape\": \"Sf\"\n            },\n            \"IdentityPoolTags\": {\n              \"shape\": \"Sg\"\n            }\n          }\n        },\n        \"Su\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"IdentityId\": {},\n            \"Logins\": {\n              \"shape\": \"Sv\"\n            },\n            \"CreationDate\": {\n              \"type\": \"timestamp\"\n            },\n            \"LastModifiedDate\": {\n              \"type\": \"timestamp\"\n            }\n          }\n        },\n        \"Sv\": {\n          \"type\": \"list\",\n          \"member\": {}\n        },\n        \"Sz\": {\n          \"type\": \"map\",\n          \"key\": {},\n          \"value\": {}\n        },\n        \"S1b\": {\n          \"type\": \"map\",\n          \"key\": {},\n          \"value\": {}\n        },\n        \"S1d\": {\n          \"type\": \"map\",\n          \"key\": {},\n          \"value\": {\n            \"type\": \"structure\",\n            \"required\": [\"Type\"],\n            \"members\": {\n              \"Type\": {},\n              \"AmbiguousRoleResolution\": {},\n              \"RulesConfiguration\": {\n                \"type\": \"structure\",\n                \"required\": [\"Rules\"],\n                \"members\": {\n                  \"Rules\": {\n                    \"type\": \"list\",\n                    \"member\": {\n                      \"type\": \"structure\",\n                      \"required\": [\"Claim\", \"MatchType\", \"Value\", \"RoleARN\"],\n                      \"members\": {\n                        \"Claim\": {},\n                        \"MatchType\": {},\n                        \"Value\": {},\n                        \"RoleARN\": {}\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    };\n  }, {}],\n  2: [function (require, module, exports) {\n    module.exports = {\n      \"pagination\": {}\n    };\n  }, {}],\n  3: [function (require, module, exports) {\n    module.exports = {\n      \"version\": \"2.0\",\n      \"metadata\": {\n        \"apiVersion\": \"2017-02-15\",\n        \"endpointPrefix\": \"connect\",\n        \"jsonVersion\": \"1.0\",\n        \"protocol\": \"json\",\n        \"serviceAbbreviation\": \"Connect\",\n        \"serviceFullName\": \"AmazonConnectCTIService\",\n        \"signatureVersion\": \"\",\n        \"targetPrefix\": \"AmazonConnectCTIService\",\n        \"uid\": \"connect-2017-02-15\"\n      },\n      \"operations\": {\n        \"AcceptContact\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"contactId\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"contactId\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"ClearContact\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"contactId\"],\n            \"members\": {\n              \"contactId\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"CompleteContact\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"contactId\"],\n            \"members\": {\n              \"contactId\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"ConferenceConnections\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"contactId\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"contactId\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"CreateAdditionalConnection\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"contactId\", \"endpoint\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"contactId\": {},\n              \"endpoint\": {\n                \"shape\": \"Se\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"CreateOutboundContact\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"endpoint\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"endpoint\": {\n                \"shape\": \"Se\"\n              },\n              \"queueARN\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"CreateTaskContact\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"endpoint\", \"name\"],\n            \"members\": {\n              \"endpoint\": {\n                \"shape\": \"Se\"\n              },\n              \"previousContactId\": {},\n              \"name\": {},\n              \"description\": {},\n              \"references\": {\n                \"shape\": \"Sr\"\n              },\n              \"idempotencyToken\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"contactId\": {}\n            }\n          }\n        },\n        \"CreateTransport\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"transportType\", \"authentication\"],\n            \"members\": {\n              \"transportType\": {},\n              \"participantId\": {},\n              \"contactId\": {},\n              \"softphoneClientId\": {},\n              \"authentication\": {\n                \"shape\": \"S2\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"webSocketTransport\": {\n                \"type\": \"structure\",\n                \"required\": [\"url\", \"transportLifeTimeInSeconds\"],\n                \"members\": {\n                  \"url\": {},\n                  \"transportLifeTimeInSeconds\": {\n                    \"type\": \"long\"\n                  },\n                  \"expiry\": {}\n                }\n              },\n              \"chatTokenTransport\": {\n                \"type\": \"structure\",\n                \"required\": [\"participantToken\", \"expiry\"],\n                \"members\": {\n                  \"participantToken\": {},\n                  \"expiry\": {}\n                }\n              },\n              \"softphoneTransport\": {\n                \"type\": \"structure\",\n                \"required\": [\"softphoneMediaConnections\"],\n                \"members\": {\n                  \"softphoneMediaConnections\": {\n                    \"type\": \"list\",\n                    \"member\": {\n                      \"type\": \"structure\",\n                      \"required\": [\"username\", \"credential\", \"urls\"],\n                      \"members\": {\n                        \"username\": {},\n                        \"credential\": {},\n                        \"urls\": {\n                          \"type\": \"list\",\n                          \"member\": {}\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        \"DestroyConnection\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"contactId\", \"connectionId\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"contactId\": {},\n              \"connectionId\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"GetAgentConfiguration\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"required\": [\"configuration\"],\n            \"members\": {\n              \"configuration\": {\n                \"shape\": \"S1h\"\n              }\n            }\n          }\n        },\n        \"GetAgentPermissions\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"nextToken\": {},\n              \"maxResults\": {\n                \"type\": \"integer\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"required\": [\"permissions\"],\n            \"members\": {\n              \"permissions\": {\n                \"type\": \"list\",\n                \"member\": {}\n              },\n              \"nextToken\": {}\n            }\n          }\n        },\n        \"GetAgentSnapshot\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"nextToken\": {},\n              \"timeout\": {\n                \"type\": \"long\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"required\": [\"snapshot\", \"nextToken\"],\n            \"members\": {\n              \"snapshot\": {\n                \"type\": \"structure\",\n                \"required\": [\"state\", \"contacts\", \"snapshotTimestamp\"],\n                \"members\": {\n                  \"state\": {\n                    \"shape\": \"S1z\"\n                  },\n                  \"nextState\": {\n                    \"shape\": \"S1z\"\n                  },\n                  \"agentAvailabilityState\": {\n                    \"type\": \"structure\",\n                    \"members\": {\n                      \"state\": {},\n                      \"timeStamp\": {\n                        \"type\": \"timestamp\"\n                      }\n                    }\n                  },\n                  \"contacts\": {\n                    \"type\": \"list\",\n                    \"member\": {\n                      \"type\": \"structure\",\n                      \"required\": [\"contactId\", \"type\", \"state\", \"connections\", \"attributes\"],\n                      \"members\": {\n                        \"contactId\": {},\n                        \"initialContactId\": {},\n                        \"contactFeatures\": {\n                          \"type\": \"structure\",\n                          \"members\": {\n                            \"attachmentsEnabled\": {\n                              \"type\": \"boolean\"\n                            }\n                          }\n                        },\n                        \"type\": {},\n                        \"state\": {\n                          \"type\": \"structure\",\n                          \"required\": [\"type\", \"timestamp\"],\n                          \"members\": {\n                            \"type\": {},\n                            \"timestamp\": {\n                              \"type\": \"timestamp\"\n                            }\n                          }\n                        },\n                        \"queue\": {\n                          \"shape\": \"Sk\"\n                        },\n                        \"queueTimestamp\": {\n                          \"type\": \"timestamp\"\n                        },\n                        \"connections\": {\n                          \"type\": \"list\",\n                          \"member\": {\n                            \"type\": \"structure\",\n                            \"required\": [\"connectionId\", \"state\", \"type\", \"initial\"],\n                            \"members\": {\n                              \"connectionId\": {},\n                              \"endpoint\": {\n                                \"shape\": \"Se\"\n                              },\n                              \"state\": {\n                                \"type\": \"structure\",\n                                \"required\": [\"type\", \"timestamp\"],\n                                \"members\": {\n                                  \"type\": {},\n                                  \"timestamp\": {\n                                    \"type\": \"timestamp\"\n                                  }\n                                }\n                              },\n                              \"type\": {},\n                              \"initial\": {\n                                \"type\": \"boolean\"\n                              },\n                              \"softphoneMediaInfo\": {\n                                \"type\": \"structure\",\n                                \"members\": {\n                                  \"callType\": {},\n                                  \"autoAccept\": {\n                                    \"type\": \"boolean\"\n                                  },\n                                  \"mediaLegContextToken\": {},\n                                  \"callContextToken\": {},\n                                  \"callConfigJson\": {}\n                                }\n                              },\n                              \"chatMediaInfo\": {\n                                \"type\": \"structure\",\n                                \"members\": {\n                                  \"chatAutoAccept\": {\n                                    \"type\": \"boolean\"\n                                  },\n                                  \"connectionData\": {},\n                                  \"customerName\": {}\n                                }\n                              },\n                              \"monitoringInfo\": {\n                                \"type\": \"structure\",\n                                \"members\": {\n                                  \"agent\": {\n                                    \"type\": \"structure\",\n                                    \"members\": {\n                                      \"agentName\": {}\n                                    }\n                                  },\n                                  \"joinTimeStamp\": {\n                                    \"type\": \"timestamp\"\n                                  }\n                                }\n                              }\n                            }\n                          }\n                        },\n                        \"attributes\": {\n                          \"type\": \"map\",\n                          \"key\": {},\n                          \"value\": {\n                            \"type\": \"structure\",\n                            \"required\": [\"name\"],\n                            \"members\": {\n                              \"name\": {},\n                              \"value\": {}\n                            }\n                          }\n                        },\n                        \"contactDuration\": {},\n                        \"name\": {},\n                        \"description\": {},\n                        \"references\": {\n                          \"shape\": \"Sr\"\n                        },\n                        \"initiationMethod\": {}\n                      }\n                    }\n                  },\n                  \"snapshotTimestamp\": {\n                    \"type\": \"timestamp\"\n                  }\n                }\n              },\n              \"nextToken\": {}\n            }\n          }\n        },\n        \"GetAgentStates\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"nextToken\": {},\n              \"maxResults\": {\n                \"type\": \"integer\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"required\": [\"states\"],\n            \"members\": {\n              \"states\": {\n                \"type\": \"list\",\n                \"member\": {\n                  \"shape\": \"S1z\"\n                }\n              },\n              \"nextToken\": {}\n            }\n          }\n        },\n        \"GetDialableCountryCodes\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"nextToken\": {},\n              \"maxResults\": {\n                \"type\": \"integer\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"required\": [\"countryCodes\"],\n            \"members\": {\n              \"countryCodes\": {\n                \"type\": \"list\",\n                \"member\": {}\n              },\n              \"nextToken\": {}\n            }\n          }\n        },\n        \"GetEndpoints\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"queueARNs\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"queueARNs\": {\n                \"type\": \"list\",\n                \"member\": {}\n              },\n              \"nextToken\": {},\n              \"maxResults\": {\n                \"type\": \"integer\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"endpoints\": {\n                \"type\": \"list\",\n                \"member\": {\n                  \"shape\": \"Se\"\n                }\n              },\n              \"nextToken\": {}\n            }\n          }\n        },\n        \"GetNewAuthToken\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"refreshToken\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"refreshToken\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"newAuthToken\": {},\n              \"expirationDateTime\": {\n                \"type\": \"timestamp\"\n              }\n            }\n          }\n        },\n        \"GetRoutingProfileQueues\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"routingProfileARN\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"routingProfileARN\": {},\n              \"nextToken\": {},\n              \"maxResults\": {\n                \"type\": \"integer\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"required\": [\"queues\"],\n            \"members\": {\n              \"queues\": {\n                \"type\": \"list\",\n                \"member\": {\n                  \"shape\": \"Sk\"\n                }\n              },\n              \"nextToken\": {}\n            }\n          }\n        },\n        \"HoldConnection\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"contactId\", \"connectionId\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"contactId\": {},\n              \"connectionId\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"NotifyContactIssue\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"contactId\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"contactId\": {},\n              \"issueCode\": {},\n              \"description\": {},\n              \"clientLogs\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"PutAgentState\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"state\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"state\": {\n                \"shape\": \"S1z\"\n              },\n              \"enqueueNextState\": {\n                \"type\": \"boolean\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"RejectContact\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"contactId\"],\n            \"members\": {\n              \"contactId\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"ResumeConnection\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"contactId\", \"connectionId\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"contactId\": {},\n              \"connectionId\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"SendClientLogs\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"logEvents\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"logEvents\": {\n                \"type\": \"list\",\n                \"member\": {\n                  \"type\": \"structure\",\n                  \"members\": {\n                    \"timestamp\": {\n                      \"type\": \"timestamp\"\n                    },\n                    \"component\": {},\n                    \"message\": {}\n                  }\n                }\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"SendDigits\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"contactId\", \"connectionId\", \"digits\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"contactId\": {},\n              \"connectionId\": {},\n              \"digits\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"SendSoftphoneCallMetrics\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"contactId\", \"softphoneStreamStatistics\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"contactId\": {},\n              \"ccpVersion\": {},\n              \"softphoneStreamStatistics\": {\n                \"shape\": \"S3n\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"SendSoftphoneCallReport\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"contactId\", \"report\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"contactId\": {},\n              \"ccpVersion\": {},\n              \"report\": {\n                \"type\": \"structure\",\n                \"members\": {\n                  \"callStartTime\": {\n                    \"type\": \"timestamp\"\n                  },\n                  \"callEndTime\": {\n                    \"type\": \"timestamp\"\n                  },\n                  \"softphoneStreamStatistics\": {\n                    \"shape\": \"S3n\"\n                  },\n                  \"gumTimeMillis\": {\n                    \"type\": \"long\"\n                  },\n                  \"initializationTimeMillis\": {\n                    \"type\": \"long\"\n                  },\n                  \"iceCollectionTimeMillis\": {\n                    \"type\": \"long\"\n                  },\n                  \"signallingConnectTimeMillis\": {\n                    \"type\": \"long\"\n                  },\n                  \"handshakeTimeMillis\": {\n                    \"type\": \"long\"\n                  },\n                  \"preTalkTimeMillis\": {\n                    \"type\": \"long\"\n                  },\n                  \"talkTimeMillis\": {\n                    \"type\": \"long\"\n                  },\n                  \"cleanupTimeMillis\": {\n                    \"type\": \"long\"\n                  },\n                  \"iceCollectionFailure\": {\n                    \"type\": \"boolean\"\n                  },\n                  \"signallingConnectionFailure\": {\n                    \"type\": \"boolean\"\n                  },\n                  \"handshakeFailure\": {\n                    \"type\": \"boolean\"\n                  },\n                  \"gumOtherFailure\": {\n                    \"type\": \"boolean\"\n                  },\n                  \"gumTimeoutFailure\": {\n                    \"type\": \"boolean\"\n                  },\n                  \"createOfferFailure\": {\n                    \"type\": \"boolean\"\n                  },\n                  \"setLocalDescriptionFailure\": {\n                    \"type\": \"boolean\"\n                  },\n                  \"userBusyFailure\": {\n                    \"type\": \"boolean\"\n                  },\n                  \"invalidRemoteSDPFailure\": {\n                    \"type\": \"boolean\"\n                  },\n                  \"noRemoteIceCandidateFailure\": {\n                    \"type\": \"boolean\"\n                  },\n                  \"setRemoteDescriptionFailure\": {\n                    \"type\": \"boolean\"\n                  }\n                }\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"ToggleActiveConnections\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"contactId\", \"connectionId\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"contactId\": {},\n              \"connectionId\": {}\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        },\n        \"UpdateAgentConfiguration\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"authentication\", \"configuration\"],\n            \"members\": {\n              \"authentication\": {\n                \"shape\": \"S2\"\n              },\n              \"configuration\": {\n                \"shape\": \"S1h\"\n              }\n            }\n          },\n          \"output\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          }\n        }\n      },\n      \"shapes\": {\n        \"S2\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"agentARN\": {},\n            \"authToken\": {}\n          }\n        },\n        \"Se\": {\n          \"type\": \"structure\",\n          \"required\": [\"type\"],\n          \"members\": {\n            \"endpointARN\": {},\n            \"type\": {},\n            \"name\": {},\n            \"phoneNumber\": {},\n            \"agentLogin\": {},\n            \"queue\": {\n              \"shape\": \"Sk\"\n            }\n          }\n        },\n        \"Sk\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"queueARN\": {},\n            \"name\": {}\n          }\n        },\n        \"Sr\": {\n          \"type\": \"map\",\n          \"key\": {},\n          \"value\": {\n            \"type\": \"structure\",\n            \"required\": [\"value\", \"type\"],\n            \"members\": {\n              \"value\": {},\n              \"type\": {}\n            }\n          }\n        },\n        \"S1h\": {\n          \"type\": \"structure\",\n          \"required\": [\"name\", \"softphoneEnabled\", \"softphoneAutoAccept\", \"extension\", \"routingProfile\"],\n          \"members\": {\n            \"name\": {},\n            \"username\": {},\n            \"softphoneEnabled\": {\n              \"type\": \"boolean\"\n            },\n            \"softphoneAutoAccept\": {\n              \"type\": \"boolean\"\n            },\n            \"extension\": {},\n            \"routingProfile\": {\n              \"type\": \"structure\",\n              \"members\": {\n                \"name\": {},\n                \"routingProfileARN\": {},\n                \"defaultOutboundQueue\": {\n                  \"shape\": \"Sk\"\n                },\n                \"channelConcurrencyMap\": {\n                  \"type\": \"map\",\n                  \"key\": {},\n                  \"value\": {\n                    \"type\": \"long\"\n                  }\n                }\n              }\n            },\n            \"agentPreferences\": {\n              \"type\": \"map\",\n              \"key\": {},\n              \"value\": {}\n            }\n          }\n        },\n        \"S1z\": {\n          \"type\": \"structure\",\n          \"required\": [\"type\", \"name\"],\n          \"members\": {\n            \"agentStateARN\": {},\n            \"type\": {},\n            \"name\": {},\n            \"startTimestamp\": {\n              \"type\": \"timestamp\"\n            }\n          }\n        },\n        \"S3n\": {\n          \"type\": \"list\",\n          \"member\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"timestamp\": {\n                \"type\": \"timestamp\"\n              },\n              \"softphoneStreamType\": {},\n              \"packetCount\": {\n                \"type\": \"long\"\n              },\n              \"packetsLost\": {\n                \"type\": \"long\"\n              },\n              \"audioLevel\": {\n                \"type\": \"double\"\n              },\n              \"jitterBufferMillis\": {\n                \"type\": \"long\"\n              },\n              \"roundTripTimeMillis\": {\n                \"type\": \"long\"\n              }\n            }\n          }\n        }\n      }\n    };\n  }, {}],\n  4: [function (require, module, exports) {\n    module.exports = {\n      \"acm\": {\n        \"name\": \"ACM\",\n        \"cors\": true\n      },\n      \"apigateway\": {\n        \"name\": \"APIGateway\",\n        \"cors\": true\n      },\n      \"applicationautoscaling\": {\n        \"prefix\": \"application-autoscaling\",\n        \"name\": \"ApplicationAutoScaling\",\n        \"cors\": true\n      },\n      \"appstream\": {\n        \"name\": \"AppStream\"\n      },\n      \"autoscaling\": {\n        \"name\": \"AutoScaling\",\n        \"cors\": true\n      },\n      \"batch\": {\n        \"name\": \"Batch\"\n      },\n      \"budgets\": {\n        \"name\": \"Budgets\"\n      },\n      \"clouddirectory\": {\n        \"name\": \"CloudDirectory\",\n        \"versions\": [\"2016-05-10*\"]\n      },\n      \"cloudformation\": {\n        \"name\": \"CloudFormation\",\n        \"cors\": true\n      },\n      \"cloudfront\": {\n        \"name\": \"CloudFront\",\n        \"versions\": [\"2013-05-12*\", \"2013-11-11*\", \"2014-05-31*\", \"2014-10-21*\", \"2014-11-06*\", \"2015-04-17*\", \"2015-07-27*\", \"2015-09-17*\", \"2016-01-13*\", \"2016-01-28*\", \"2016-08-01*\", \"2016-08-20*\", \"2016-09-07*\", \"2016-09-29*\", \"2016-11-25*\", \"2017-03-25*\", \"2017-10-30*\", \"2018-06-18*\", \"2018-11-05*\"],\n        \"cors\": true\n      },\n      \"cloudhsm\": {\n        \"name\": \"CloudHSM\",\n        \"cors\": true\n      },\n      \"cloudsearch\": {\n        \"name\": \"CloudSearch\"\n      },\n      \"cloudsearchdomain\": {\n        \"name\": \"CloudSearchDomain\"\n      },\n      \"cloudtrail\": {\n        \"name\": \"CloudTrail\",\n        \"cors\": true\n      },\n      \"cloudwatch\": {\n        \"prefix\": \"monitoring\",\n        \"name\": \"CloudWatch\",\n        \"cors\": true\n      },\n      \"cloudwatchevents\": {\n        \"prefix\": \"events\",\n        \"name\": \"CloudWatchEvents\",\n        \"versions\": [\"2014-02-03*\"],\n        \"cors\": true\n      },\n      \"cloudwatchlogs\": {\n        \"prefix\": \"logs\",\n        \"name\": \"CloudWatchLogs\",\n        \"cors\": true\n      },\n      \"codebuild\": {\n        \"name\": \"CodeBuild\",\n        \"cors\": true\n      },\n      \"codecommit\": {\n        \"name\": \"CodeCommit\",\n        \"cors\": true\n      },\n      \"codedeploy\": {\n        \"name\": \"CodeDeploy\",\n        \"cors\": true\n      },\n      \"codepipeline\": {\n        \"name\": \"CodePipeline\",\n        \"cors\": true\n      },\n      \"cognitoidentity\": {\n        \"prefix\": \"cognito-identity\",\n        \"name\": \"CognitoIdentity\",\n        \"cors\": true\n      },\n      \"cognitoidentityserviceprovider\": {\n        \"prefix\": \"cognito-idp\",\n        \"name\": \"CognitoIdentityServiceProvider\",\n        \"cors\": true\n      },\n      \"cognitosync\": {\n        \"prefix\": \"cognito-sync\",\n        \"name\": \"CognitoSync\",\n        \"cors\": true\n      },\n      \"configservice\": {\n        \"prefix\": \"config\",\n        \"name\": \"ConfigService\",\n        \"cors\": true\n      },\n      \"cur\": {\n        \"name\": \"CUR\",\n        \"cors\": true\n      },\n      \"datapipeline\": {\n        \"name\": \"DataPipeline\"\n      },\n      \"devicefarm\": {\n        \"name\": \"DeviceFarm\",\n        \"cors\": true\n      },\n      \"directconnect\": {\n        \"name\": \"DirectConnect\",\n        \"cors\": true\n      },\n      \"directoryservice\": {\n        \"prefix\": \"ds\",\n        \"name\": \"DirectoryService\"\n      },\n      \"discovery\": {\n        \"name\": \"Discovery\"\n      },\n      \"dms\": {\n        \"name\": \"DMS\"\n      },\n      \"dynamodb\": {\n        \"name\": \"DynamoDB\",\n        \"cors\": true\n      },\n      \"dynamodbstreams\": {\n        \"prefix\": \"streams.dynamodb\",\n        \"name\": \"DynamoDBStreams\",\n        \"cors\": true\n      },\n      \"ec2\": {\n        \"name\": \"EC2\",\n        \"versions\": [\"2013-06-15*\", \"2013-10-15*\", \"2014-02-01*\", \"2014-05-01*\", \"2014-06-15*\", \"2014-09-01*\", \"2014-10-01*\", \"2015-03-01*\", \"2015-04-15*\", \"2015-10-01*\", \"2016-04-01*\", \"2016-09-15*\"],\n        \"cors\": true\n      },\n      \"ecr\": {\n        \"name\": \"ECR\",\n        \"cors\": true\n      },\n      \"ecs\": {\n        \"name\": \"ECS\",\n        \"cors\": true\n      },\n      \"efs\": {\n        \"prefix\": \"elasticfilesystem\",\n        \"name\": \"EFS\",\n        \"cors\": true\n      },\n      \"elasticache\": {\n        \"name\": \"ElastiCache\",\n        \"versions\": [\"2012-11-15*\", \"2014-03-24*\", \"2014-07-15*\", \"2014-09-30*\"],\n        \"cors\": true\n      },\n      \"elasticbeanstalk\": {\n        \"name\": \"ElasticBeanstalk\",\n        \"cors\": true\n      },\n      \"elb\": {\n        \"prefix\": \"elasticloadbalancing\",\n        \"name\": \"ELB\",\n        \"cors\": true\n      },\n      \"elbv2\": {\n        \"prefix\": \"elasticloadbalancingv2\",\n        \"name\": \"ELBv2\",\n        \"cors\": true\n      },\n      \"emr\": {\n        \"prefix\": \"elasticmapreduce\",\n        \"name\": \"EMR\",\n        \"cors\": true\n      },\n      \"es\": {\n        \"name\": \"ES\"\n      },\n      \"elastictranscoder\": {\n        \"name\": \"ElasticTranscoder\",\n        \"cors\": true\n      },\n      \"firehose\": {\n        \"name\": \"Firehose\",\n        \"cors\": true\n      },\n      \"gamelift\": {\n        \"name\": \"GameLift\",\n        \"cors\": true\n      },\n      \"glacier\": {\n        \"name\": \"Glacier\"\n      },\n      \"health\": {\n        \"name\": \"Health\"\n      },\n      \"iam\": {\n        \"name\": \"IAM\",\n        \"cors\": true\n      },\n      \"importexport\": {\n        \"name\": \"ImportExport\"\n      },\n      \"inspector\": {\n        \"name\": \"Inspector\",\n        \"versions\": [\"2015-08-18*\"],\n        \"cors\": true\n      },\n      \"iot\": {\n        \"name\": \"Iot\",\n        \"cors\": true\n      },\n      \"iotdata\": {\n        \"prefix\": \"iot-data\",\n        \"name\": \"IotData\",\n        \"cors\": true\n      },\n      \"kinesis\": {\n        \"name\": \"Kinesis\",\n        \"cors\": true\n      },\n      \"kinesisanalytics\": {\n        \"name\": \"KinesisAnalytics\"\n      },\n      \"kms\": {\n        \"name\": \"KMS\",\n        \"cors\": true\n      },\n      \"lambda\": {\n        \"name\": \"Lambda\",\n        \"cors\": true\n      },\n      \"lexruntime\": {\n        \"prefix\": \"runtime.lex\",\n        \"name\": \"LexRuntime\",\n        \"cors\": true\n      },\n      \"lightsail\": {\n        \"name\": \"Lightsail\"\n      },\n      \"machinelearning\": {\n        \"name\": \"MachineLearning\",\n        \"cors\": true\n      },\n      \"marketplacecommerceanalytics\": {\n        \"name\": \"MarketplaceCommerceAnalytics\",\n        \"cors\": true\n      },\n      \"marketplacemetering\": {\n        \"prefix\": \"meteringmarketplace\",\n        \"name\": \"MarketplaceMetering\"\n      },\n      \"mturk\": {\n        \"prefix\": \"mturk-requester\",\n        \"name\": \"MTurk\",\n        \"cors\": true\n      },\n      \"mobileanalytics\": {\n        \"name\": \"MobileAnalytics\",\n        \"cors\": true\n      },\n      \"opsworks\": {\n        \"name\": \"OpsWorks\",\n        \"cors\": true\n      },\n      \"opsworkscm\": {\n        \"name\": \"OpsWorksCM\"\n      },\n      \"organizations\": {\n        \"name\": \"Organizations\"\n      },\n      \"pinpoint\": {\n        \"name\": \"Pinpoint\"\n      },\n      \"polly\": {\n        \"name\": \"Polly\",\n        \"cors\": true\n      },\n      \"rds\": {\n        \"name\": \"RDS\",\n        \"versions\": [\"2014-09-01*\"],\n        \"cors\": true\n      },\n      \"redshift\": {\n        \"name\": \"Redshift\",\n        \"cors\": true\n      },\n      \"rekognition\": {\n        \"name\": \"Rekognition\",\n        \"cors\": true\n      },\n      \"resourcegroupstaggingapi\": {\n        \"name\": \"ResourceGroupsTaggingAPI\"\n      },\n      \"route53\": {\n        \"name\": \"Route53\",\n        \"cors\": true\n      },\n      \"route53domains\": {\n        \"name\": \"Route53Domains\",\n        \"cors\": true\n      },\n      \"s3\": {\n        \"name\": \"S3\",\n        \"dualstackAvailable\": true,\n        \"cors\": true\n      },\n      \"s3control\": {\n        \"name\": \"S3Control\",\n        \"dualstackAvailable\": true\n      },\n      \"servicecatalog\": {\n        \"name\": \"ServiceCatalog\",\n        \"cors\": true\n      },\n      \"ses\": {\n        \"prefix\": \"email\",\n        \"name\": \"SES\",\n        \"cors\": true\n      },\n      \"shield\": {\n        \"name\": \"Shield\"\n      },\n      \"simpledb\": {\n        \"prefix\": \"sdb\",\n        \"name\": \"SimpleDB\"\n      },\n      \"sms\": {\n        \"name\": \"SMS\"\n      },\n      \"snowball\": {\n        \"name\": \"Snowball\"\n      },\n      \"sns\": {\n        \"name\": \"SNS\",\n        \"cors\": true\n      },\n      \"sqs\": {\n        \"name\": \"SQS\",\n        \"cors\": true\n      },\n      \"ssm\": {\n        \"name\": \"SSM\",\n        \"cors\": true\n      },\n      \"storagegateway\": {\n        \"name\": \"StorageGateway\",\n        \"cors\": true\n      },\n      \"stepfunctions\": {\n        \"prefix\": \"states\",\n        \"name\": \"StepFunctions\"\n      },\n      \"sts\": {\n        \"name\": \"STS\",\n        \"cors\": true\n      },\n      \"support\": {\n        \"name\": \"Support\"\n      },\n      \"swf\": {\n        \"name\": \"SWF\"\n      },\n      \"xray\": {\n        \"name\": \"XRay\",\n        \"cors\": true\n      },\n      \"waf\": {\n        \"name\": \"WAF\",\n        \"cors\": true\n      },\n      \"wafregional\": {\n        \"prefix\": \"waf-regional\",\n        \"name\": \"WAFRegional\"\n      },\n      \"workdocs\": {\n        \"name\": \"WorkDocs\",\n        \"cors\": true\n      },\n      \"workspaces\": {\n        \"name\": \"WorkSpaces\"\n      },\n      \"codestar\": {\n        \"name\": \"CodeStar\"\n      },\n      \"lexmodelbuildingservice\": {\n        \"prefix\": \"lex-models\",\n        \"name\": \"LexModelBuildingService\",\n        \"cors\": true\n      },\n      \"marketplaceentitlementservice\": {\n        \"prefix\": \"entitlement.marketplace\",\n        \"name\": \"MarketplaceEntitlementService\"\n      },\n      \"athena\": {\n        \"name\": \"Athena\"\n      },\n      \"greengrass\": {\n        \"name\": \"Greengrass\"\n      },\n      \"dax\": {\n        \"name\": \"DAX\"\n      },\n      \"migrationhub\": {\n        \"prefix\": \"AWSMigrationHub\",\n        \"name\": \"MigrationHub\"\n      },\n      \"cloudhsmv2\": {\n        \"name\": \"CloudHSMV2\"\n      },\n      \"glue\": {\n        \"name\": \"Glue\"\n      },\n      \"mobile\": {\n        \"name\": \"Mobile\"\n      },\n      \"pricing\": {\n        \"name\": \"Pricing\",\n        \"cors\": true\n      },\n      \"costexplorer\": {\n        \"prefix\": \"ce\",\n        \"name\": \"CostExplorer\",\n        \"cors\": true\n      },\n      \"mediaconvert\": {\n        \"name\": \"MediaConvert\"\n      },\n      \"medialive\": {\n        \"name\": \"MediaLive\"\n      },\n      \"mediapackage\": {\n        \"name\": \"MediaPackage\"\n      },\n      \"mediastore\": {\n        \"name\": \"MediaStore\"\n      },\n      \"mediastoredata\": {\n        \"prefix\": \"mediastore-data\",\n        \"name\": \"MediaStoreData\",\n        \"cors\": true\n      },\n      \"appsync\": {\n        \"name\": \"AppSync\"\n      },\n      \"guardduty\": {\n        \"name\": \"GuardDuty\"\n      },\n      \"mq\": {\n        \"name\": \"MQ\"\n      },\n      \"comprehend\": {\n        \"name\": \"Comprehend\",\n        \"cors\": true\n      },\n      \"iotjobsdataplane\": {\n        \"prefix\": \"iot-jobs-data\",\n        \"name\": \"IoTJobsDataPlane\"\n      },\n      \"kinesisvideoarchivedmedia\": {\n        \"prefix\": \"kinesis-video-archived-media\",\n        \"name\": \"KinesisVideoArchivedMedia\",\n        \"cors\": true\n      },\n      \"kinesisvideomedia\": {\n        \"prefix\": \"kinesis-video-media\",\n        \"name\": \"KinesisVideoMedia\",\n        \"cors\": true\n      },\n      \"kinesisvideo\": {\n        \"name\": \"KinesisVideo\",\n        \"cors\": true\n      },\n      \"sagemakerruntime\": {\n        \"prefix\": \"runtime.sagemaker\",\n        \"name\": \"SageMakerRuntime\"\n      },\n      \"sagemaker\": {\n        \"name\": \"SageMaker\"\n      },\n      \"translate\": {\n        \"name\": \"Translate\",\n        \"cors\": true\n      },\n      \"resourcegroups\": {\n        \"prefix\": \"resource-groups\",\n        \"name\": \"ResourceGroups\",\n        \"cors\": true\n      },\n      \"alexaforbusiness\": {\n        \"name\": \"AlexaForBusiness\"\n      },\n      \"cloud9\": {\n        \"name\": \"Cloud9\"\n      },\n      \"serverlessapplicationrepository\": {\n        \"prefix\": \"serverlessrepo\",\n        \"name\": \"ServerlessApplicationRepository\"\n      },\n      \"servicediscovery\": {\n        \"name\": \"ServiceDiscovery\"\n      },\n      \"workmail\": {\n        \"name\": \"WorkMail\"\n      },\n      \"autoscalingplans\": {\n        \"prefix\": \"autoscaling-plans\",\n        \"name\": \"AutoScalingPlans\"\n      },\n      \"transcribeservice\": {\n        \"prefix\": \"transcribe\",\n        \"name\": \"TranscribeService\"\n      },\n      \"connect\": {\n        \"name\": \"Connect\",\n        \"cors\": true\n      },\n      \"acmpca\": {\n        \"prefix\": \"acm-pca\",\n        \"name\": \"ACMPCA\"\n      },\n      \"fms\": {\n        \"name\": \"FMS\"\n      },\n      \"secretsmanager\": {\n        \"name\": \"SecretsManager\",\n        \"cors\": true\n      },\n      \"iotanalytics\": {\n        \"name\": \"IoTAnalytics\",\n        \"cors\": true\n      },\n      \"iot1clickdevicesservice\": {\n        \"prefix\": \"iot1click-devices\",\n        \"name\": \"IoT1ClickDevicesService\"\n      },\n      \"iot1clickprojects\": {\n        \"prefix\": \"iot1click-projects\",\n        \"name\": \"IoT1ClickProjects\"\n      },\n      \"pi\": {\n        \"name\": \"PI\"\n      },\n      \"neptune\": {\n        \"name\": \"Neptune\"\n      },\n      \"mediatailor\": {\n        \"name\": \"MediaTailor\"\n      },\n      \"eks\": {\n        \"name\": \"EKS\"\n      },\n      \"macie\": {\n        \"name\": \"Macie\"\n      },\n      \"dlm\": {\n        \"name\": \"DLM\"\n      },\n      \"signer\": {\n        \"name\": \"Signer\"\n      },\n      \"chime\": {\n        \"name\": \"Chime\"\n      },\n      \"pinpointemail\": {\n        \"prefix\": \"pinpoint-email\",\n        \"name\": \"PinpointEmail\"\n      },\n      \"ram\": {\n        \"name\": \"RAM\"\n      },\n      \"route53resolver\": {\n        \"name\": \"Route53Resolver\"\n      },\n      \"pinpointsmsvoice\": {\n        \"prefix\": \"sms-voice\",\n        \"name\": \"PinpointSMSVoice\"\n      },\n      \"quicksight\": {\n        \"name\": \"QuickSight\"\n      },\n      \"rdsdataservice\": {\n        \"prefix\": \"rds-data\",\n        \"name\": \"RDSDataService\"\n      },\n      \"amplify\": {\n        \"name\": \"Amplify\"\n      },\n      \"datasync\": {\n        \"name\": \"DataSync\"\n      },\n      \"robomaker\": {\n        \"name\": \"RoboMaker\"\n      },\n      \"transfer\": {\n        \"name\": \"Transfer\"\n      },\n      \"globalaccelerator\": {\n        \"name\": \"GlobalAccelerator\"\n      },\n      \"comprehendmedical\": {\n        \"name\": \"ComprehendMedical\",\n        \"cors\": true\n      },\n      \"kinesisanalyticsv2\": {\n        \"name\": \"KinesisAnalyticsV2\"\n      },\n      \"mediaconnect\": {\n        \"name\": \"MediaConnect\"\n      },\n      \"fsx\": {\n        \"name\": \"FSx\"\n      },\n      \"securityhub\": {\n        \"name\": \"SecurityHub\"\n      },\n      \"appmesh\": {\n        \"name\": \"AppMesh\",\n        \"versions\": [\"2018-10-01*\"]\n      },\n      \"licensemanager\": {\n        \"prefix\": \"license-manager\",\n        \"name\": \"LicenseManager\"\n      },\n      \"kafka\": {\n        \"name\": \"Kafka\"\n      },\n      \"apigatewaymanagementapi\": {\n        \"name\": \"ApiGatewayManagementApi\"\n      },\n      \"apigatewayv2\": {\n        \"name\": \"ApiGatewayV2\"\n      },\n      \"docdb\": {\n        \"name\": \"DocDB\"\n      },\n      \"backup\": {\n        \"name\": \"Backup\"\n      },\n      \"worklink\": {\n        \"name\": \"WorkLink\"\n      },\n      \"textract\": {\n        \"name\": \"Textract\"\n      },\n      \"managedblockchain\": {\n        \"name\": \"ManagedBlockchain\"\n      },\n      \"mediapackagevod\": {\n        \"prefix\": \"mediapackage-vod\",\n        \"name\": \"MediaPackageVod\"\n      },\n      \"groundstation\": {\n        \"name\": \"GroundStation\"\n      },\n      \"iotthingsgraph\": {\n        \"name\": \"IoTThingsGraph\"\n      },\n      \"iotevents\": {\n        \"name\": \"IoTEvents\"\n      },\n      \"ioteventsdata\": {\n        \"prefix\": \"iotevents-data\",\n        \"name\": \"IoTEventsData\"\n      },\n      \"personalize\": {\n        \"name\": \"Personalize\",\n        \"cors\": true\n      },\n      \"personalizeevents\": {\n        \"prefix\": \"personalize-events\",\n        \"name\": \"PersonalizeEvents\",\n        \"cors\": true\n      },\n      \"personalizeruntime\": {\n        \"prefix\": \"personalize-runtime\",\n        \"name\": \"PersonalizeRuntime\",\n        \"cors\": true\n      },\n      \"applicationinsights\": {\n        \"prefix\": \"application-insights\",\n        \"name\": \"ApplicationInsights\"\n      },\n      \"servicequotas\": {\n        \"prefix\": \"service-quotas\",\n        \"name\": \"ServiceQuotas\"\n      },\n      \"ec2instanceconnect\": {\n        \"prefix\": \"ec2-instance-connect\",\n        \"name\": \"EC2InstanceConnect\"\n      },\n      \"eventbridge\": {\n        \"name\": \"EventBridge\"\n      },\n      \"lakeformation\": {\n        \"name\": \"LakeFormation\"\n      },\n      \"forecastservice\": {\n        \"prefix\": \"forecast\",\n        \"name\": \"ForecastService\",\n        \"cors\": true\n      },\n      \"forecastqueryservice\": {\n        \"prefix\": \"forecastquery\",\n        \"name\": \"ForecastQueryService\",\n        \"cors\": true\n      },\n      \"qldb\": {\n        \"name\": \"QLDB\"\n      },\n      \"qldbsession\": {\n        \"prefix\": \"qldb-session\",\n        \"name\": \"QLDBSession\"\n      },\n      \"workmailmessageflow\": {\n        \"name\": \"WorkMailMessageFlow\"\n      }\n    };\n  }, {}],\n  5: [function (require, module, exports) {\n    module.exports = {\n      \"version\": \"2.0\",\n      \"metadata\": {\n        \"apiVersion\": \"2011-06-15\",\n        \"endpointPrefix\": \"sts\",\n        \"globalEndpoint\": \"sts.amazonaws.com\",\n        \"protocol\": \"query\",\n        \"serviceAbbreviation\": \"AWS STS\",\n        \"serviceFullName\": \"AWS Security Token Service\",\n        \"serviceId\": \"STS\",\n        \"signatureVersion\": \"v4\",\n        \"uid\": \"sts-2011-06-15\",\n        \"xmlNamespace\": \"https://sts.amazonaws.com/doc/2011-06-15/\"\n      },\n      \"operations\": {\n        \"AssumeRole\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"RoleArn\", \"RoleSessionName\"],\n            \"members\": {\n              \"RoleArn\": {},\n              \"RoleSessionName\": {},\n              \"PolicyArns\": {\n                \"shape\": \"S4\"\n              },\n              \"Policy\": {},\n              \"DurationSeconds\": {\n                \"type\": \"integer\"\n              },\n              \"ExternalId\": {},\n              \"SerialNumber\": {},\n              \"TokenCode\": {}\n            }\n          },\n          \"output\": {\n            \"resultWrapper\": \"AssumeRoleResult\",\n            \"type\": \"structure\",\n            \"members\": {\n              \"Credentials\": {\n                \"shape\": \"Sc\"\n              },\n              \"AssumedRoleUser\": {\n                \"shape\": \"Sh\"\n              },\n              \"PackedPolicySize\": {\n                \"type\": \"integer\"\n              }\n            }\n          }\n        },\n        \"AssumeRoleWithSAML\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"RoleArn\", \"PrincipalArn\", \"SAMLAssertion\"],\n            \"members\": {\n              \"RoleArn\": {},\n              \"PrincipalArn\": {},\n              \"SAMLAssertion\": {},\n              \"PolicyArns\": {\n                \"shape\": \"S4\"\n              },\n              \"Policy\": {},\n              \"DurationSeconds\": {\n                \"type\": \"integer\"\n              }\n            }\n          },\n          \"output\": {\n            \"resultWrapper\": \"AssumeRoleWithSAMLResult\",\n            \"type\": \"structure\",\n            \"members\": {\n              \"Credentials\": {\n                \"shape\": \"Sc\"\n              },\n              \"AssumedRoleUser\": {\n                \"shape\": \"Sh\"\n              },\n              \"PackedPolicySize\": {\n                \"type\": \"integer\"\n              },\n              \"Subject\": {},\n              \"SubjectType\": {},\n              \"Issuer\": {},\n              \"Audience\": {},\n              \"NameQualifier\": {}\n            }\n          }\n        },\n        \"AssumeRoleWithWebIdentity\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"RoleArn\", \"RoleSessionName\", \"WebIdentityToken\"],\n            \"members\": {\n              \"RoleArn\": {},\n              \"RoleSessionName\": {},\n              \"WebIdentityToken\": {},\n              \"ProviderId\": {},\n              \"PolicyArns\": {\n                \"shape\": \"S4\"\n              },\n              \"Policy\": {},\n              \"DurationSeconds\": {\n                \"type\": \"integer\"\n              }\n            }\n          },\n          \"output\": {\n            \"resultWrapper\": \"AssumeRoleWithWebIdentityResult\",\n            \"type\": \"structure\",\n            \"members\": {\n              \"Credentials\": {\n                \"shape\": \"Sc\"\n              },\n              \"SubjectFromWebIdentityToken\": {},\n              \"AssumedRoleUser\": {\n                \"shape\": \"Sh\"\n              },\n              \"PackedPolicySize\": {\n                \"type\": \"integer\"\n              },\n              \"Provider\": {},\n              \"Audience\": {}\n            }\n          }\n        },\n        \"DecodeAuthorizationMessage\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"EncodedMessage\"],\n            \"members\": {\n              \"EncodedMessage\": {}\n            }\n          },\n          \"output\": {\n            \"resultWrapper\": \"DecodeAuthorizationMessageResult\",\n            \"type\": \"structure\",\n            \"members\": {\n              \"DecodedMessage\": {}\n            }\n          }\n        },\n        \"GetAccessKeyInfo\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"AccessKeyId\"],\n            \"members\": {\n              \"AccessKeyId\": {}\n            }\n          },\n          \"output\": {\n            \"resultWrapper\": \"GetAccessKeyInfoResult\",\n            \"type\": \"structure\",\n            \"members\": {\n              \"Account\": {}\n            }\n          }\n        },\n        \"GetCallerIdentity\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"members\": {}\n          },\n          \"output\": {\n            \"resultWrapper\": \"GetCallerIdentityResult\",\n            \"type\": \"structure\",\n            \"members\": {\n              \"UserId\": {},\n              \"Account\": {},\n              \"Arn\": {}\n            }\n          }\n        },\n        \"GetFederationToken\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"required\": [\"Name\"],\n            \"members\": {\n              \"Name\": {},\n              \"Policy\": {},\n              \"PolicyArns\": {\n                \"shape\": \"S4\"\n              },\n              \"DurationSeconds\": {\n                \"type\": \"integer\"\n              }\n            }\n          },\n          \"output\": {\n            \"resultWrapper\": \"GetFederationTokenResult\",\n            \"type\": \"structure\",\n            \"members\": {\n              \"Credentials\": {\n                \"shape\": \"Sc\"\n              },\n              \"FederatedUser\": {\n                \"type\": \"structure\",\n                \"required\": [\"FederatedUserId\", \"Arn\"],\n                \"members\": {\n                  \"FederatedUserId\": {},\n                  \"Arn\": {}\n                }\n              },\n              \"PackedPolicySize\": {\n                \"type\": \"integer\"\n              }\n            }\n          }\n        },\n        \"GetSessionToken\": {\n          \"input\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"DurationSeconds\": {\n                \"type\": \"integer\"\n              },\n              \"SerialNumber\": {},\n              \"TokenCode\": {}\n            }\n          },\n          \"output\": {\n            \"resultWrapper\": \"GetSessionTokenResult\",\n            \"type\": \"structure\",\n            \"members\": {\n              \"Credentials\": {\n                \"shape\": \"Sc\"\n              }\n            }\n          }\n        }\n      },\n      \"shapes\": {\n        \"S4\": {\n          \"type\": \"list\",\n          \"member\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"arn\": {}\n            }\n          }\n        },\n        \"Sc\": {\n          \"type\": \"structure\",\n          \"required\": [\"AccessKeyId\", \"SecretAccessKey\", \"SessionToken\", \"Expiration\"],\n          \"members\": {\n            \"AccessKeyId\": {},\n            \"SecretAccessKey\": {},\n            \"SessionToken\": {},\n            \"Expiration\": {\n              \"type\": \"timestamp\"\n            }\n          }\n        },\n        \"Sh\": {\n          \"type\": \"structure\",\n          \"required\": [\"AssumedRoleId\", \"Arn\"],\n          \"members\": {\n            \"AssumedRoleId\": {},\n            \"Arn\": {}\n          }\n        }\n      }\n    };\n  }, {}],\n  6: [function (require, module, exports) {\n    arguments[4][2][0].apply(exports, arguments);\n  }, {\n    \"dup\": 2\n  }],\n  7: [function (require, module, exports) {\n    require('../lib/node_loader');\n\n    var AWS = require('../lib/core');\n\n    var Service = AWS.Service;\n    var apiLoader = AWS.apiLoader;\n    apiLoader.services['cognitoidentity'] = {};\n    AWS.CognitoIdentity = Service.defineService('cognitoidentity', ['2014-06-30']);\n\n    require('../lib/services/cognitoidentity');\n\n    Object.defineProperty(apiLoader.services['cognitoidentity'], '2014-06-30', {\n      get: function get() {\n        var model = require('../apis/cognito-identity-2014-06-30.min.json');\n\n        model.paginators = require('../apis/cognito-identity-2014-06-30.paginators.json').pagination;\n        return model;\n      },\n      enumerable: true,\n      configurable: true\n    });\n    module.exports = AWS.CognitoIdentity;\n  }, {\n    \"../apis/cognito-identity-2014-06-30.min.json\": 1,\n    \"../apis/cognito-identity-2014-06-30.paginators.json\": 2,\n    \"../lib/core\": 18,\n    \"../lib/node_loader\": 16,\n    \"../lib/services/cognitoidentity\": 60\n  }],\n  8: [function (require, module, exports) {\n    require('../lib/node_loader');\n\n    var AWS = require('../lib/core');\n\n    var Service = AWS.Service;\n    var apiLoader = AWS.apiLoader;\n    apiLoader.services['sts'] = {};\n    AWS.STS = Service.defineService('sts', ['2011-06-15']);\n\n    require('../lib/services/sts');\n\n    Object.defineProperty(apiLoader.services['sts'], '2011-06-15', {\n      get: function get() {\n        var model = require('../apis/sts-2011-06-15.min.json');\n\n        model.paginators = require('../apis/sts-2011-06-15.paginators.json').pagination;\n        return model;\n      },\n      enumerable: true,\n      configurable: true\n    });\n    module.exports = AWS.STS;\n  }, {\n    \"../apis/sts-2011-06-15.min.json\": 5,\n    \"../apis/sts-2011-06-15.paginators.json\": 6,\n    \"../lib/core\": 18,\n    \"../lib/node_loader\": 16,\n    \"../lib/services/sts\": 61\n  }],\n  9: [function (require, module, exports) {\n    function apiLoader(svc, version) {\n      if (!apiLoader.services.hasOwnProperty(svc)) {\n        throw new Error('InvalidService: Failed to load api for ' + svc);\n      }\n\n      return apiLoader.services[svc][version];\n    }\n    /**\n     * @api private\n     *\n     * This member of AWS.apiLoader is private, but changing it will necessitate a\n     * change to ../scripts/services-table-generator.ts\n     */\n\n\n    apiLoader.services = {};\n    /**\n     * @api private\n     */\n\n    module.exports = apiLoader;\n  }, {}],\n  10: [function (require, module, exports) {\n    var Hmac = require('./browserHmac');\n\n    var Md5 = require('./browserMd5');\n\n    var Sha1 = require('./browserSha1');\n\n    var Sha256 = require('./browserSha256');\n    /**\n     * @api private\n     */\n\n\n    module.exports = exports = {\n      createHash: function createHash(alg) {\n        alg = alg.toLowerCase();\n\n        if (alg === 'md5') {\n          return new Md5();\n        } else if (alg === 'sha256') {\n          return new Sha256();\n        } else if (alg === 'sha1') {\n          return new Sha1();\n        }\n\n        throw new Error('Hash algorithm ' + alg + ' is not supported in the browser SDK');\n      },\n      createHmac: function createHmac(alg, key) {\n        alg = alg.toLowerCase();\n\n        if (alg === 'md5') {\n          return new Hmac(Md5, key);\n        } else if (alg === 'sha256') {\n          return new Hmac(Sha256, key);\n        } else if (alg === 'sha1') {\n          return new Hmac(Sha1, key);\n        }\n\n        throw new Error('HMAC algorithm ' + alg + ' is not supported in the browser SDK');\n      },\n      createSign: function () {\n        throw new Error('createSign is not implemented in the browser');\n      }\n    };\n  }, {\n    \"./browserHmac\": 12,\n    \"./browserMd5\": 13,\n    \"./browserSha1\": 14,\n    \"./browserSha256\": 15\n  }],\n  11: [function (require, module, exports) {\n    var Buffer = require('buffer/').Buffer;\n    /**\n     * This is a polyfill for the static method `isView` of `ArrayBuffer`, which is\n     * e.g. missing in IE 10.\n     *\n     * @api private\n     */\n\n\n    if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'undefined') {\n      ArrayBuffer.isView = function (arg) {\n        return viewStrings.indexOf(Object.prototype.toString.call(arg)) > -1;\n      };\n    }\n    /**\n     * @api private\n     */\n\n\n    var viewStrings = ['[object Int8Array]', '[object Uint8Array]', '[object Uint8ClampedArray]', '[object Int16Array]', '[object Uint16Array]', '[object Int32Array]', '[object Uint32Array]', '[object Float32Array]', '[object Float64Array]', '[object DataView]'];\n    /**\n     * @api private\n     */\n\n    function isEmptyData(data) {\n      if (typeof data === 'string') {\n        return data.length === 0;\n      }\n\n      return data.byteLength === 0;\n    }\n    /**\n     * @api private\n     */\n\n\n    function convertToBuffer(data) {\n      if (typeof data === 'string') {\n        data = new Buffer(data, 'utf8');\n      }\n\n      if (ArrayBuffer.isView(data)) {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);\n      }\n\n      return new Uint8Array(data);\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = exports = {\n      isEmptyData: isEmptyData,\n      convertToBuffer: convertToBuffer\n    };\n  }, {\n    \"buffer/\": 80\n  }],\n  12: [function (require, module, exports) {\n    var hashUtils = require('./browserHashUtils');\n    /**\n     * @api private\n     */\n\n\n    function Hmac(hashCtor, secret) {\n      this.hash = new hashCtor();\n      this.outer = new hashCtor();\n      var inner = bufferFromSecret(hashCtor, secret);\n      var outer = new Uint8Array(hashCtor.BLOCK_SIZE);\n      outer.set(inner);\n\n      for (var i = 0; i < hashCtor.BLOCK_SIZE; i++) {\n        inner[i] ^= 0x36;\n        outer[i] ^= 0x5c;\n      }\n\n      this.hash.update(inner);\n      this.outer.update(outer); // Zero out the copied key buffer.\n\n      for (var i = 0; i < inner.byteLength; i++) {\n        inner[i] = 0;\n      }\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = exports = Hmac;\n\n    Hmac.prototype.update = function (toHash) {\n      if (hashUtils.isEmptyData(toHash) || this.error) {\n        return this;\n      }\n\n      try {\n        this.hash.update(hashUtils.convertToBuffer(toHash));\n      } catch (e) {\n        this.error = e;\n      }\n\n      return this;\n    };\n\n    Hmac.prototype.digest = function (encoding) {\n      if (!this.outer.finished) {\n        this.outer.update(this.hash.digest());\n      }\n\n      return this.outer.digest(encoding);\n    };\n\n    function bufferFromSecret(hashCtor, secret) {\n      var input = hashUtils.convertToBuffer(secret);\n\n      if (input.byteLength > hashCtor.BLOCK_SIZE) {\n        var bufferHash = new hashCtor();\n        bufferHash.update(input);\n        input = bufferHash.digest();\n      }\n\n      var buffer = new Uint8Array(hashCtor.BLOCK_SIZE);\n      buffer.set(input);\n      return buffer;\n    }\n  }, {\n    \"./browserHashUtils\": 11\n  }],\n  13: [function (require, module, exports) {\n    var hashUtils = require('./browserHashUtils');\n\n    var Buffer = require('buffer/').Buffer;\n\n    var BLOCK_SIZE = 64;\n    var DIGEST_LENGTH = 16;\n    var INIT = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476];\n    /**\n     * @api private\n     */\n\n    function Md5() {\n      this.state = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476];\n      this.buffer = new DataView(new ArrayBuffer(BLOCK_SIZE));\n      this.bufferLength = 0;\n      this.bytesHashed = 0;\n      this.finished = false;\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = exports = Md5;\n    Md5.BLOCK_SIZE = BLOCK_SIZE;\n\n    Md5.prototype.update = function (sourceData) {\n      if (hashUtils.isEmptyData(sourceData)) {\n        return this;\n      } else if (this.finished) {\n        throw new Error('Attempted to update an already finished hash.');\n      }\n\n      var data = hashUtils.convertToBuffer(sourceData);\n      var position = 0;\n      var byteLength = data.byteLength;\n      this.bytesHashed += byteLength;\n\n      while (byteLength > 0) {\n        this.buffer.setUint8(this.bufferLength++, data[position++]);\n        byteLength--;\n\n        if (this.bufferLength === BLOCK_SIZE) {\n          this.hashBuffer();\n          this.bufferLength = 0;\n        }\n      }\n\n      return this;\n    };\n\n    Md5.prototype.digest = function (encoding) {\n      if (!this.finished) {\n        var _a = this,\n            buffer = _a.buffer,\n            undecoratedLength = _a.bufferLength,\n            bytesHashed = _a.bytesHashed;\n\n        var bitsHashed = bytesHashed * 8;\n        buffer.setUint8(this.bufferLength++, 128); // Ensure the final block has enough room for the hashed length\n\n        if (undecoratedLength % BLOCK_SIZE >= BLOCK_SIZE - 8) {\n          for (var i = this.bufferLength; i < BLOCK_SIZE; i++) {\n            buffer.setUint8(i, 0);\n          }\n\n          this.hashBuffer();\n          this.bufferLength = 0;\n        }\n\n        for (var i = this.bufferLength; i < BLOCK_SIZE - 8; i++) {\n          buffer.setUint8(i, 0);\n        }\n\n        buffer.setUint32(BLOCK_SIZE - 8, bitsHashed >>> 0, true);\n        buffer.setUint32(BLOCK_SIZE - 4, Math.floor(bitsHashed / 0x100000000), true);\n        this.hashBuffer();\n        this.finished = true;\n      }\n\n      var out = new DataView(new ArrayBuffer(DIGEST_LENGTH));\n\n      for (var i = 0; i < 4; i++) {\n        out.setUint32(i * 4, this.state[i], true);\n      }\n\n      var buff = new Buffer(out.buffer, out.byteOffset, out.byteLength);\n      return encoding ? buff.toString(encoding) : buff;\n    };\n\n    Md5.prototype.hashBuffer = function () {\n      var _a = this,\n          buffer = _a.buffer,\n          state = _a.state;\n\n      var a = state[0],\n          b = state[1],\n          c = state[2],\n          d = state[3];\n      a = ff(a, b, c, d, buffer.getUint32(0, true), 7, 0xd76aa478);\n      d = ff(d, a, b, c, buffer.getUint32(4, true), 12, 0xe8c7b756);\n      c = ff(c, d, a, b, buffer.getUint32(8, true), 17, 0x242070db);\n      b = ff(b, c, d, a, buffer.getUint32(12, true), 22, 0xc1bdceee);\n      a = ff(a, b, c, d, buffer.getUint32(16, true), 7, 0xf57c0faf);\n      d = ff(d, a, b, c, buffer.getUint32(20, true), 12, 0x4787c62a);\n      c = ff(c, d, a, b, buffer.getUint32(24, true), 17, 0xa8304613);\n      b = ff(b, c, d, a, buffer.getUint32(28, true), 22, 0xfd469501);\n      a = ff(a, b, c, d, buffer.getUint32(32, true), 7, 0x698098d8);\n      d = ff(d, a, b, c, buffer.getUint32(36, true), 12, 0x8b44f7af);\n      c = ff(c, d, a, b, buffer.getUint32(40, true), 17, 0xffff5bb1);\n      b = ff(b, c, d, a, buffer.getUint32(44, true), 22, 0x895cd7be);\n      a = ff(a, b, c, d, buffer.getUint32(48, true), 7, 0x6b901122);\n      d = ff(d, a, b, c, buffer.getUint32(52, true), 12, 0xfd987193);\n      c = ff(c, d, a, b, buffer.getUint32(56, true), 17, 0xa679438e);\n      b = ff(b, c, d, a, buffer.getUint32(60, true), 22, 0x49b40821);\n      a = gg(a, b, c, d, buffer.getUint32(4, true), 5, 0xf61e2562);\n      d = gg(d, a, b, c, buffer.getUint32(24, true), 9, 0xc040b340);\n      c = gg(c, d, a, b, buffer.getUint32(44, true), 14, 0x265e5a51);\n      b = gg(b, c, d, a, buffer.getUint32(0, true), 20, 0xe9b6c7aa);\n      a = gg(a, b, c, d, buffer.getUint32(20, true), 5, 0xd62f105d);\n      d = gg(d, a, b, c, buffer.getUint32(40, true), 9, 0x02441453);\n      c = gg(c, d, a, b, buffer.getUint32(60, true), 14, 0xd8a1e681);\n      b = gg(b, c, d, a, buffer.getUint32(16, true), 20, 0xe7d3fbc8);\n      a = gg(a, b, c, d, buffer.getUint32(36, true), 5, 0x21e1cde6);\n      d = gg(d, a, b, c, buffer.getUint32(56, true), 9, 0xc33707d6);\n      c = gg(c, d, a, b, buffer.getUint32(12, true), 14, 0xf4d50d87);\n      b = gg(b, c, d, a, buffer.getUint32(32, true), 20, 0x455a14ed);\n      a = gg(a, b, c, d, buffer.getUint32(52, true), 5, 0xa9e3e905);\n      d = gg(d, a, b, c, buffer.getUint32(8, true), 9, 0xfcefa3f8);\n      c = gg(c, d, a, b, buffer.getUint32(28, true), 14, 0x676f02d9);\n      b = gg(b, c, d, a, buffer.getUint32(48, true), 20, 0x8d2a4c8a);\n      a = hh(a, b, c, d, buffer.getUint32(20, true), 4, 0xfffa3942);\n      d = hh(d, a, b, c, buffer.getUint32(32, true), 11, 0x8771f681);\n      c = hh(c, d, a, b, buffer.getUint32(44, true), 16, 0x6d9d6122);\n      b = hh(b, c, d, a, buffer.getUint32(56, true), 23, 0xfde5380c);\n      a = hh(a, b, c, d, buffer.getUint32(4, true), 4, 0xa4beea44);\n      d = hh(d, a, b, c, buffer.getUint32(16, true), 11, 0x4bdecfa9);\n      c = hh(c, d, a, b, buffer.getUint32(28, true), 16, 0xf6bb4b60);\n      b = hh(b, c, d, a, buffer.getUint32(40, true), 23, 0xbebfbc70);\n      a = hh(a, b, c, d, buffer.getUint32(52, true), 4, 0x289b7ec6);\n      d = hh(d, a, b, c, buffer.getUint32(0, true), 11, 0xeaa127fa);\n      c = hh(c, d, a, b, buffer.getUint32(12, true), 16, 0xd4ef3085);\n      b = hh(b, c, d, a, buffer.getUint32(24, true), 23, 0x04881d05);\n      a = hh(a, b, c, d, buffer.getUint32(36, true), 4, 0xd9d4d039);\n      d = hh(d, a, b, c, buffer.getUint32(48, true), 11, 0xe6db99e5);\n      c = hh(c, d, a, b, buffer.getUint32(60, true), 16, 0x1fa27cf8);\n      b = hh(b, c, d, a, buffer.getUint32(8, true), 23, 0xc4ac5665);\n      a = ii(a, b, c, d, buffer.getUint32(0, true), 6, 0xf4292244);\n      d = ii(d, a, b, c, buffer.getUint32(28, true), 10, 0x432aff97);\n      c = ii(c, d, a, b, buffer.getUint32(56, true), 15, 0xab9423a7);\n      b = ii(b, c, d, a, buffer.getUint32(20, true), 21, 0xfc93a039);\n      a = ii(a, b, c, d, buffer.getUint32(48, true), 6, 0x655b59c3);\n      d = ii(d, a, b, c, buffer.getUint32(12, true), 10, 0x8f0ccc92);\n      c = ii(c, d, a, b, buffer.getUint32(40, true), 15, 0xffeff47d);\n      b = ii(b, c, d, a, buffer.getUint32(4, true), 21, 0x85845dd1);\n      a = ii(a, b, c, d, buffer.getUint32(32, true), 6, 0x6fa87e4f);\n      d = ii(d, a, b, c, buffer.getUint32(60, true), 10, 0xfe2ce6e0);\n      c = ii(c, d, a, b, buffer.getUint32(24, true), 15, 0xa3014314);\n      b = ii(b, c, d, a, buffer.getUint32(52, true), 21, 0x4e0811a1);\n      a = ii(a, b, c, d, buffer.getUint32(16, true), 6, 0xf7537e82);\n      d = ii(d, a, b, c, buffer.getUint32(44, true), 10, 0xbd3af235);\n      c = ii(c, d, a, b, buffer.getUint32(8, true), 15, 0x2ad7d2bb);\n      b = ii(b, c, d, a, buffer.getUint32(36, true), 21, 0xeb86d391);\n      state[0] = a + state[0] & 0xFFFFFFFF;\n      state[1] = b + state[1] & 0xFFFFFFFF;\n      state[2] = c + state[2] & 0xFFFFFFFF;\n      state[3] = d + state[3] & 0xFFFFFFFF;\n    };\n\n    function cmn(q, a, b, x, s, t) {\n      a = (a + q & 0xFFFFFFFF) + (x + t & 0xFFFFFFFF) & 0xFFFFFFFF;\n      return (a << s | a >>> 32 - s) + b & 0xFFFFFFFF;\n    }\n\n    function ff(a, b, c, d, x, s, t) {\n      return cmn(b & c | ~b & d, a, b, x, s, t);\n    }\n\n    function gg(a, b, c, d, x, s, t) {\n      return cmn(b & d | c & ~d, a, b, x, s, t);\n    }\n\n    function hh(a, b, c, d, x, s, t) {\n      return cmn(b ^ c ^ d, a, b, x, s, t);\n    }\n\n    function ii(a, b, c, d, x, s, t) {\n      return cmn(c ^ (b | ~d), a, b, x, s, t);\n    }\n  }, {\n    \"./browserHashUtils\": 11,\n    \"buffer/\": 80\n  }],\n  14: [function (require, module, exports) {\n    var Buffer = require('buffer/').Buffer;\n\n    var hashUtils = require('./browserHashUtils');\n\n    var BLOCK_SIZE = 64;\n    var DIGEST_LENGTH = 20;\n    var KEY = new Uint32Array([0x5a827999, 0x6ed9eba1, 0x8f1bbcdc | 0, 0xca62c1d6 | 0]);\n    var INIT = [0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19];\n    var MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1;\n    /**\n     * @api private\n     */\n\n    function Sha1() {\n      this.h0 = 0x67452301;\n      this.h1 = 0xEFCDAB89;\n      this.h2 = 0x98BADCFE;\n      this.h3 = 0x10325476;\n      this.h4 = 0xC3D2E1F0; // The first 64 bytes (16 words) is the data chunk\n\n      this.block = new Uint32Array(80);\n      this.offset = 0;\n      this.shift = 24;\n      this.totalLength = 0;\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = exports = Sha1;\n    Sha1.BLOCK_SIZE = BLOCK_SIZE;\n\n    Sha1.prototype.update = function (data) {\n      if (this.finished) {\n        throw new Error('Attempted to update an already finished hash.');\n      }\n\n      if (hashUtils.isEmptyData(data)) {\n        return this;\n      }\n\n      data = hashUtils.convertToBuffer(data);\n      var length = data.length;\n      this.totalLength += length * 8;\n\n      for (var i = 0; i < length; i++) {\n        this.write(data[i]);\n      }\n\n      return this;\n    };\n\n    Sha1.prototype.write = function write(byte) {\n      this.block[this.offset] |= (byte & 0xff) << this.shift;\n\n      if (this.shift) {\n        this.shift -= 8;\n      } else {\n        this.offset++;\n        this.shift = 24;\n      }\n\n      if (this.offset === 16) this.processBlock();\n    };\n\n    Sha1.prototype.digest = function (encoding) {\n      // Pad\n      this.write(0x80);\n\n      if (this.offset > 14 || this.offset === 14 && this.shift < 24) {\n        this.processBlock();\n      }\n\n      this.offset = 14;\n      this.shift = 24; // 64-bit length big-endian\n\n      this.write(0x00); // numbers this big aren't accurate in javascript anyway\n\n      this.write(0x00); // ..So just hard-code to zero.\n\n      this.write(this.totalLength > 0xffffffffff ? this.totalLength / 0x10000000000 : 0x00);\n      this.write(this.totalLength > 0xffffffff ? this.totalLength / 0x100000000 : 0x00);\n\n      for (var s = 24; s >= 0; s -= 8) {\n        this.write(this.totalLength >> s);\n      } // The value in state is little-endian rather than big-endian, so flip\n      // each word into a new Uint8Array\n\n\n      var out = new Buffer(DIGEST_LENGTH);\n      var outView = new DataView(out.buffer);\n      outView.setUint32(0, this.h0, false);\n      outView.setUint32(4, this.h1, false);\n      outView.setUint32(8, this.h2, false);\n      outView.setUint32(12, this.h3, false);\n      outView.setUint32(16, this.h4, false);\n      return encoding ? out.toString(encoding) : out;\n    };\n\n    Sha1.prototype.processBlock = function processBlock() {\n      // Extend the sixteen 32-bit words into eighty 32-bit words:\n      for (var i = 16; i < 80; i++) {\n        var w = this.block[i - 3] ^ this.block[i - 8] ^ this.block[i - 14] ^ this.block[i - 16];\n        this.block[i] = w << 1 | w >>> 31;\n      } // Initialize hash value for this chunk:\n\n\n      var a = this.h0;\n      var b = this.h1;\n      var c = this.h2;\n      var d = this.h3;\n      var e = this.h4;\n      var f, k; // Main loop:\n\n      for (i = 0; i < 80; i++) {\n        if (i < 20) {\n          f = d ^ b & (c ^ d);\n          k = 0x5A827999;\n        } else if (i < 40) {\n          f = b ^ c ^ d;\n          k = 0x6ED9EBA1;\n        } else if (i < 60) {\n          f = b & c | d & (b | c);\n          k = 0x8F1BBCDC;\n        } else {\n          f = b ^ c ^ d;\n          k = 0xCA62C1D6;\n        }\n\n        var temp = (a << 5 | a >>> 27) + f + e + k + (this.block[i] | 0);\n        e = d;\n        d = c;\n        c = b << 30 | b >>> 2;\n        b = a;\n        a = temp;\n      } // Add this chunk's hash to result so far:\n\n\n      this.h0 = this.h0 + a | 0;\n      this.h1 = this.h1 + b | 0;\n      this.h2 = this.h2 + c | 0;\n      this.h3 = this.h3 + d | 0;\n      this.h4 = this.h4 + e | 0; // The block is now reusable.\n\n      this.offset = 0;\n\n      for (i = 0; i < 16; i++) {\n        this.block[i] = 0;\n      }\n    };\n  }, {\n    \"./browserHashUtils\": 11,\n    \"buffer/\": 80\n  }],\n  15: [function (require, module, exports) {\n    var Buffer = require('buffer/').Buffer;\n\n    var hashUtils = require('./browserHashUtils');\n\n    var BLOCK_SIZE = 64;\n    var DIGEST_LENGTH = 32;\n    var KEY = new Uint32Array([0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5, 0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174, 0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da, 0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967, 0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85, 0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070, 0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3, 0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2]);\n    var INIT = [0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19];\n    var MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1;\n    /**\n     * @private\n     */\n\n    function Sha256() {\n      this.state = [0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19];\n      this.temp = new Int32Array(64);\n      this.buffer = new Uint8Array(64);\n      this.bufferLength = 0;\n      this.bytesHashed = 0;\n      /**\n       * @private\n       */\n\n      this.finished = false;\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = exports = Sha256;\n    Sha256.BLOCK_SIZE = BLOCK_SIZE;\n\n    Sha256.prototype.update = function (data) {\n      if (this.finished) {\n        throw new Error('Attempted to update an already finished hash.');\n      }\n\n      if (hashUtils.isEmptyData(data)) {\n        return this;\n      }\n\n      data = hashUtils.convertToBuffer(data);\n      var position = 0;\n      var byteLength = data.byteLength;\n      this.bytesHashed += byteLength;\n\n      if (this.bytesHashed * 8 > MAX_HASHABLE_LENGTH) {\n        throw new Error('Cannot hash more than 2^53 - 1 bits');\n      }\n\n      while (byteLength > 0) {\n        this.buffer[this.bufferLength++] = data[position++];\n        byteLength--;\n\n        if (this.bufferLength === BLOCK_SIZE) {\n          this.hashBuffer();\n          this.bufferLength = 0;\n        }\n      }\n\n      return this;\n    };\n\n    Sha256.prototype.digest = function (encoding) {\n      if (!this.finished) {\n        var bitsHashed = this.bytesHashed * 8;\n        var bufferView = new DataView(this.buffer.buffer, this.buffer.byteOffset, this.buffer.byteLength);\n        var undecoratedLength = this.bufferLength;\n        bufferView.setUint8(this.bufferLength++, 0x80); // Ensure the final block has enough room for the hashed length\n\n        if (undecoratedLength % BLOCK_SIZE >= BLOCK_SIZE - 8) {\n          for (var i = this.bufferLength; i < BLOCK_SIZE; i++) {\n            bufferView.setUint8(i, 0);\n          }\n\n          this.hashBuffer();\n          this.bufferLength = 0;\n        }\n\n        for (var i = this.bufferLength; i < BLOCK_SIZE - 8; i++) {\n          bufferView.setUint8(i, 0);\n        }\n\n        bufferView.setUint32(BLOCK_SIZE - 8, Math.floor(bitsHashed / 0x100000000), true);\n        bufferView.setUint32(BLOCK_SIZE - 4, bitsHashed);\n        this.hashBuffer();\n        this.finished = true;\n      } // The value in state is little-endian rather than big-endian, so flip\n      // each word into a new Uint8Array\n\n\n      var out = new Buffer(DIGEST_LENGTH);\n\n      for (var i = 0; i < 8; i++) {\n        out[i * 4] = this.state[i] >>> 24 & 0xff;\n        out[i * 4 + 1] = this.state[i] >>> 16 & 0xff;\n        out[i * 4 + 2] = this.state[i] >>> 8 & 0xff;\n        out[i * 4 + 3] = this.state[i] >>> 0 & 0xff;\n      }\n\n      return encoding ? out.toString(encoding) : out;\n    };\n\n    Sha256.prototype.hashBuffer = function () {\n      var _a = this,\n          buffer = _a.buffer,\n          state = _a.state;\n\n      var state0 = state[0],\n          state1 = state[1],\n          state2 = state[2],\n          state3 = state[3],\n          state4 = state[4],\n          state5 = state[5],\n          state6 = state[6],\n          state7 = state[7];\n\n      for (var i = 0; i < BLOCK_SIZE; i++) {\n        if (i < 16) {\n          this.temp[i] = (buffer[i * 4] & 0xff) << 24 | (buffer[i * 4 + 1] & 0xff) << 16 | (buffer[i * 4 + 2] & 0xff) << 8 | buffer[i * 4 + 3] & 0xff;\n        } else {\n          var u = this.temp[i - 2];\n          var t1_1 = (u >>> 17 | u << 15) ^ (u >>> 19 | u << 13) ^ u >>> 10;\n          u = this.temp[i - 15];\n          var t2_1 = (u >>> 7 | u << 25) ^ (u >>> 18 | u << 14) ^ u >>> 3;\n          this.temp[i] = (t1_1 + this.temp[i - 7] | 0) + (t2_1 + this.temp[i - 16] | 0);\n        }\n\n        var t1 = (((state4 >>> 6 | state4 << 26) ^ (state4 >>> 11 | state4 << 21) ^ (state4 >>> 25 | state4 << 7)) + (state4 & state5 ^ ~state4 & state6) | 0) + (state7 + (KEY[i] + this.temp[i] | 0) | 0) | 0;\n        var t2 = ((state0 >>> 2 | state0 << 30) ^ (state0 >>> 13 | state0 << 19) ^ (state0 >>> 22 | state0 << 10)) + (state0 & state1 ^ state0 & state2 ^ state1 & state2) | 0;\n        state7 = state6;\n        state6 = state5;\n        state5 = state4;\n        state4 = state3 + t1 | 0;\n        state3 = state2;\n        state2 = state1;\n        state1 = state0;\n        state0 = t1 + t2 | 0;\n      }\n\n      state[0] += state0;\n      state[1] += state1;\n      state[2] += state2;\n      state[3] += state3;\n      state[4] += state4;\n      state[5] += state5;\n      state[6] += state6;\n      state[7] += state7;\n    };\n  }, {\n    \"./browserHashUtils\": 11,\n    \"buffer/\": 80\n  }],\n  16: [function (require, module, exports) {\n    (function (process) {\n      var util = require('./util'); // browser specific modules\n\n\n      util.crypto.lib = require('./browserCryptoLib');\n      util.Buffer = require('buffer/').Buffer;\n      util.url = require('url/');\n      util.querystring = require('querystring/');\n      util.realClock = require('./realclock/browserClock');\n      util.environment = 'js';\n      util.createEventStream = require('./event-stream/buffered-create-event-stream').createEventStream;\n\n      util.isBrowser = function () {\n        return true;\n      };\n\n      util.isNode = function () {\n        return false;\n      };\n\n      var AWS = require('./core');\n      /**\n       * @api private\n       */\n\n\n      module.exports = AWS;\n\n      require('./credentials');\n\n      require('./credentials/credential_provider_chain');\n\n      require('./credentials/temporary_credentials');\n\n      require('./credentials/chainable_temporary_credentials');\n\n      require('./credentials/web_identity_credentials');\n\n      require('./credentials/cognito_identity_credentials');\n\n      require('./credentials/saml_credentials'); // Load the DOMParser XML parser\n\n\n      AWS.XML.Parser = require('./xml/browser_parser'); // Load the XHR HttpClient\n\n      require('./http/xhr');\n\n      if (typeof process === 'undefined') {\n        var process = {\n          browser: true\n        };\n      }\n    }).call(this, require('_process'));\n  }, {\n    \"./browserCryptoLib\": 10,\n    \"./core\": 18,\n    \"./credentials\": 19,\n    \"./credentials/chainable_temporary_credentials\": 20,\n    \"./credentials/cognito_identity_credentials\": 21,\n    \"./credentials/credential_provider_chain\": 22,\n    \"./credentials/saml_credentials\": 23,\n    \"./credentials/temporary_credentials\": 24,\n    \"./credentials/web_identity_credentials\": 25,\n    \"./event-stream/buffered-create-event-stream\": 27,\n    \"./http/xhr\": 35,\n    \"./realclock/browserClock\": 52,\n    \"./util\": 71,\n    \"./xml/browser_parser\": 72,\n    \"_process\": 85,\n    \"buffer/\": 80,\n    \"querystring/\": 92,\n    \"url/\": 94\n  }],\n  17: [function (require, module, exports) {\n    var AWS = require('./core');\n\n    require('./credentials');\n\n    require('./credentials/credential_provider_chain');\n\n    var PromisesDependency;\n    /**\n     * The main configuration class used by all service objects to set\n     * the region, credentials, and other options for requests.\n     *\n     * By default, credentials and region settings are left unconfigured.\n     * This should be configured by the application before using any\n     * AWS service APIs.\n     *\n     * In order to set global configuration options, properties should\n     * be assigned to the global {AWS.config} object.\n     *\n     * @see AWS.config\n     *\n     * @!group General Configuration Options\n     *\n     * @!attribute credentials\n     *   @return [AWS.Credentials] the AWS credentials to sign requests with.\n     *\n     * @!attribute region\n     *   @example Set the global region setting to us-west-2\n     *     AWS.config.update({region: 'us-west-2'});\n     *   @return [AWS.Credentials] The region to send service requests to.\n     *   @see http://docs.amazonwebservices.com/general/latest/gr/rande.html\n     *     A list of available endpoints for each AWS service\n     *\n     * @!attribute maxRetries\n     *   @return [Integer] the maximum amount of retries to perform for a\n     *     service request. By default this value is calculated by the specific\n     *     service object that the request is being made to.\n     *\n     * @!attribute maxRedirects\n     *   @return [Integer] the maximum amount of redirects to follow for a\n     *     service request. Defaults to 10.\n     *\n     * @!attribute paramValidation\n     *   @return [Boolean|map] whether input parameters should be validated against\n     *     the operation description before sending the request. Defaults to true.\n     *     Pass a map to enable any of the following specific validation features:\n     *\n     *     * **min** [Boolean] &mdash; Validates that a value meets the min\n     *       constraint. This is enabled by default when paramValidation is set\n     *       to `true`.\n     *     * **max** [Boolean] &mdash; Validates that a value meets the max\n     *       constraint.\n     *     * **pattern** [Boolean] &mdash; Validates that a string value matches a\n     *       regular expression.\n     *     * **enum** [Boolean] &mdash; Validates that a string value matches one\n     *       of the allowable enum values.\n     *\n     * @!attribute computeChecksums\n     *   @return [Boolean] whether to compute checksums for payload bodies when\n     *     the service accepts it (currently supported in S3 only).\n     *\n     * @!attribute convertResponseTypes\n     *   @return [Boolean] whether types are converted when parsing response data.\n     *     Currently only supported for JSON based services. Turning this off may\n     *     improve performance on large response payloads. Defaults to `true`.\n     *\n     * @!attribute correctClockSkew\n     *   @return [Boolean] whether to apply a clock skew correction and retry\n     *     requests that fail because of an skewed client clock. Defaults to\n     *     `false`.\n     *\n     * @!attribute sslEnabled\n     *   @return [Boolean] whether SSL is enabled for requests\n     *\n     * @!attribute s3ForcePathStyle\n     *   @return [Boolean] whether to force path style URLs for S3 objects\n     *\n     * @!attribute s3BucketEndpoint\n     *   @note Setting this configuration option requires an `endpoint` to be\n     *     provided explicitly to the service constructor.\n     *   @return [Boolean] whether the provided endpoint addresses an individual\n     *     bucket (false if it addresses the root API endpoint).\n     *\n     * @!attribute s3DisableBodySigning\n     *   @return [Boolean] whether to disable S3 body signing when using signature version `v4`.\n     *     Body signing can only be disabled when using https. Defaults to `true`.\n     *\n     * @!attribute useAccelerateEndpoint\n     *   @note This configuration option is only compatible with S3 while accessing\n     *     dns-compatible buckets.\n     *   @return [Boolean] Whether to use the Accelerate endpoint with the S3 service.\n     *     Defaults to `false`.\n     *\n     * @!attribute retryDelayOptions\n     *   @example Set the base retry delay for all services to 300 ms\n     *     AWS.config.update({retryDelayOptions: {base: 300}});\n     *     // Delays with maxRetries = 3: 300, 600, 1200\n     *   @example Set a custom backoff function to provide delay values on retries\n     *     AWS.config.update({retryDelayOptions: {customBackoff: function(retryCount) {\n     *       // returns delay in ms\n     *     }}});\n     *   @return [map] A set of options to configure the retry delay on retryable errors.\n     *     Currently supported options are:\n     *\n     *     * **base** [Integer] &mdash; The base number of milliseconds to use in the\n     *       exponential backoff for operation retries. Defaults to 100 ms for all services except\n     *       DynamoDB, where it defaults to 50ms.\n     *     * **customBackoff ** [function] &mdash; A custom function that accepts a retry count\n     *       and returns the amount of time to delay in milliseconds. The `base` option will be\n     *       ignored if this option is supplied.\n     *\n     * @!attribute httpOptions\n     *   @return [map] A set of options to pass to the low-level HTTP request.\n     *     Currently supported options are:\n     *\n     *     * **proxy** [String] &mdash; the URL to proxy requests through\n     *     * **agent** [http.Agent, https.Agent] &mdash; the Agent object to perform\n     *       HTTP requests with. Used for connection pooling. Note that for\n     *       SSL connections, a special Agent object is used in order to enable\n     *       peer certificate verification. This feature is only supported in the\n     *       Node.js environment.\n     *     * **connectTimeout** [Integer] &mdash; Sets the socket to timeout after\n     *       failing to establish a connection with the server after\n     *       `connectTimeout` milliseconds. This timeout has no effect once a socket\n     *       connection has been established.\n     *     * **timeout** [Integer] &mdash; Sets the socket to timeout after timeout\n     *       milliseconds of inactivity on the socket. Defaults to two minutes\n     *       (120000)\n     *     * **xhrAsync** [Boolean] &mdash; Whether the SDK will send asynchronous\n     *       HTTP requests. Used in the browser environment only. Set to false to\n     *       send requests synchronously. Defaults to true (async on).\n     *     * **xhrWithCredentials** [Boolean] &mdash; Sets the \"withCredentials\"\n     *       property of an XMLHttpRequest object. Used in the browser environment\n     *       only. Defaults to false.\n     * @!attribute logger\n     *   @return [#write,#log] an object that responds to .write() (like a stream)\n     *     or .log() (like the console object) in order to log information about\n     *     requests\n     *\n     * @!attribute systemClockOffset\n     *   @return [Number] an offset value in milliseconds to apply to all signing\n     *     times. Use this to compensate for clock skew when your system may be\n     *     out of sync with the service time. Note that this configuration option\n     *     can only be applied to the global `AWS.config` object and cannot be\n     *     overridden in service-specific configuration. Defaults to 0 milliseconds.\n     *\n     * @!attribute signatureVersion\n     *   @return [String] the signature version to sign requests with (overriding\n     *     the API configuration). Possible values are: 'v2', 'v3', 'v4'.\n     *\n     * @!attribute signatureCache\n     *   @return [Boolean] whether the signature to sign requests with (overriding\n     *     the API configuration) is cached. Only applies to the signature version 'v4'.\n     *     Defaults to `true`.\n     *\n     * @!attribute endpointDiscoveryEnabled\n     *   @return [Boolean] whether to enable endpoint discovery for operations that\n     *     allow optionally using an endpoint returned by the service.\n     *     Defaults to 'false'\n     *\n     * @!attribute endpointCacheSize\n     *   @return [Number] the size of the global cache storing endpoints from endpoint\n     *     discovery operations. Once endpoint cache is created, updating this setting\n     *     cannot change existing cache size.\n     *     Defaults to 1000\n     *\n     * @!attribute hostPrefixEnabled\n     *   @return [Boolean] whether to marshal request parameters to the prefix of\n     *     hostname. Defaults to `true`.\n     *\n     * @!attribute stsRegionalEndpoints\n     *   @return ['legacy'|'regional'] whether to send sts request to global endpoints or\n     *     regional endpoints.\n     *     Defaults to 'legacy'\n     */\n\n    AWS.Config = AWS.util.inherit({\n      /**\n       * @!endgroup\n       */\n\n      /**\n       * Creates a new configuration object. This is the object that passes\n       * option data along to service requests, including credentials, security,\n       * region information, and some service specific settings.\n       *\n       * @example Creating a new configuration object with credentials and region\n       *   var config = new AWS.Config({\n       *     accessKeyId: 'AKID', secretAccessKey: 'SECRET', region: 'us-west-2'\n       *   });\n       * @option options accessKeyId [String] your AWS access key ID.\n       * @option options secretAccessKey [String] your AWS secret access key.\n       * @option options sessionToken [AWS.Credentials] the optional AWS\n       *   session token to sign requests with.\n       * @option options credentials [AWS.Credentials] the AWS credentials\n       *   to sign requests with. You can either specify this object, or\n       *   specify the accessKeyId and secretAccessKey options directly.\n       * @option options credentialProvider [AWS.CredentialProviderChain] the\n       *   provider chain used to resolve credentials if no static `credentials`\n       *   property is set.\n       * @option options region [String] the region to send service requests to.\n       *   See {region} for more information.\n       * @option options maxRetries [Integer] the maximum amount of retries to\n       *   attempt with a request. See {maxRetries} for more information.\n       * @option options maxRedirects [Integer] the maximum amount of redirects to\n       *   follow with a request. See {maxRedirects} for more information.\n       * @option options sslEnabled [Boolean] whether to enable SSL for\n       *   requests.\n       * @option options paramValidation [Boolean|map] whether input parameters\n       *   should be validated against the operation description before sending\n       *   the request. Defaults to true. Pass a map to enable any of the\n       *   following specific validation features:\n       *\n       *   * **min** [Boolean] &mdash; Validates that a value meets the min\n       *     constraint. This is enabled by default when paramValidation is set\n       *     to `true`.\n       *   * **max** [Boolean] &mdash; Validates that a value meets the max\n       *     constraint.\n       *   * **pattern** [Boolean] &mdash; Validates that a string value matches a\n       *     regular expression.\n       *   * **enum** [Boolean] &mdash; Validates that a string value matches one\n       *     of the allowable enum values.\n       * @option options computeChecksums [Boolean] whether to compute checksums\n       *   for payload bodies when the service accepts it (currently supported\n       *   in S3 only)\n       * @option options convertResponseTypes [Boolean] whether types are converted\n       *     when parsing response data. Currently only supported for JSON based\n       *     services. Turning this off may improve performance on large response\n       *     payloads. Defaults to `true`.\n       * @option options correctClockSkew [Boolean] whether to apply a clock skew\n       *     correction and retry requests that fail because of an skewed client\n       *     clock. Defaults to `false`.\n       * @option options s3ForcePathStyle [Boolean] whether to force path\n       *   style URLs for S3 objects.\n       * @option options s3BucketEndpoint [Boolean] whether the provided endpoint\n       *   addresses an individual bucket (false if it addresses the root API\n       *   endpoint). Note that setting this configuration option requires an\n       *   `endpoint` to be provided explicitly to the service constructor.\n       * @option options s3DisableBodySigning [Boolean] whether S3 body signing\n       *   should be disabled when using signature version `v4`. Body signing\n       *   can only be disabled when using https. Defaults to `true`.\n       *\n       * @option options retryDelayOptions [map] A set of options to configure\n       *   the retry delay on retryable errors. Currently supported options are:\n       *\n       *   * **base** [Integer] &mdash; The base number of milliseconds to use in the\n       *     exponential backoff for operation retries. Defaults to 100 ms for all\n       *     services except DynamoDB, where it defaults to 50ms.\n       *   * **customBackoff ** [function] &mdash; A custom function that accepts a retry count\n       *     and returns the amount of time to delay in milliseconds. The `base` option will be\n       *     ignored if this option is supplied.\n       * @option options httpOptions [map] A set of options to pass to the low-level\n       *   HTTP request. Currently supported options are:\n       *\n       *   * **proxy** [String] &mdash; the URL to proxy requests through\n       *   * **agent** [http.Agent, https.Agent] &mdash; the Agent object to perform\n       *     HTTP requests with. Used for connection pooling. Defaults to the global\n       *     agent (`http.globalAgent`) for non-SSL connections. Note that for\n       *     SSL connections, a special Agent object is used in order to enable\n       *     peer certificate verification. This feature is only available in the\n       *     Node.js environment.\n       *   * **connectTimeout** [Integer] &mdash; Sets the socket to timeout after\n       *     failing to establish a connection with the server after\n       *     `connectTimeout` milliseconds. This timeout has no effect once a socket\n       *     connection has been established.\n       *   * **timeout** [Integer] &mdash; Sets the socket to timeout after timeout\n       *     milliseconds of inactivity on the socket. Defaults to two minutes\n       *     (120000).\n       *   * **xhrAsync** [Boolean] &mdash; Whether the SDK will send asynchronous\n       *     HTTP requests. Used in the browser environment only. Set to false to\n       *     send requests synchronously. Defaults to true (async on).\n       *   * **xhrWithCredentials** [Boolean] &mdash; Sets the \"withCredentials\"\n       *     property of an XMLHttpRequest object. Used in the browser environment\n       *     only. Defaults to false.\n       * @option options apiVersion [String, Date] a String in YYYY-MM-DD format\n       *   (or a date) that represents the latest possible API version that can be\n       *   used in all services (unless overridden by `apiVersions`). Specify\n       *   'latest' to use the latest possible version.\n       * @option options apiVersions [map<String, String|Date>] a map of service\n       *   identifiers (the lowercase service class name) with the API version to\n       *   use when instantiating a service. Specify 'latest' for each individual\n       *   that can use the latest available version.\n       * @option options logger [#write,#log] an object that responds to .write()\n       *   (like a stream) or .log() (like the console object) in order to log\n       *   information about requests\n       * @option options systemClockOffset [Number] an offset value in milliseconds\n       *   to apply to all signing times. Use this to compensate for clock skew\n       *   when your system may be out of sync with the service time. Note that\n       *   this configuration option can only be applied to the global `AWS.config`\n       *   object and cannot be overridden in service-specific configuration.\n       *   Defaults to 0 milliseconds.\n       * @option options signatureVersion [String] the signature version to sign\n       *   requests with (overriding the API configuration). Possible values are:\n       *   'v2', 'v3', 'v4'.\n       * @option options signatureCache [Boolean] whether the signature to sign\n       *   requests with (overriding the API configuration) is cached. Only applies\n       *   to the signature version 'v4'. Defaults to `true`.\n       * @option options dynamoDbCrc32 [Boolean] whether to validate the CRC32\n       *   checksum of HTTP response bodies returned by DynamoDB. Default: `true`.\n       * @option options useAccelerateEndpoint [Boolean] Whether to use the\n       *   S3 Transfer Acceleration endpoint with the S3 service. Default: `false`.\n       * @option options clientSideMonitoring [Boolean] whether to collect and\n       *   publish this client's performance metrics of all its API requests.\n       * @option options endpointDiscoveryEnabled [Boolean] whether to enable endpoint\n       *   discovery for operations that allow optionally using an endpoint returned by\n       *   the service.\n       *   Defaults to 'false'\n       * @option options endpointCacheSize [Number] the size of the global cache storing\n       *   endpoints from endpoint discovery operations. Once endpoint cache is created,\n       *   updating this setting cannot change existing cache size.\n       *   Defaults to 1000\n       * @option options hostPrefixEnabled [Boolean] whether to marshal request\n       *   parameters to the prefix of hostname.\n       *   Defaults to `true`.\n       * @option options stsRegionalEndpoints ['legacy'|'regional'] whether to send sts request\n       *   to global endpoints or regional endpoints.\n       *   Defaults to 'legacy'.\n       */\n      constructor: function Config(options) {\n        if (options === undefined) options = {};\n        options = this.extractCredentials(options);\n        AWS.util.each.call(this, this.keys, function (key, value) {\n          this.set(key, options[key], value);\n        });\n      },\n\n      /**\n       * @!group Managing Credentials\n       */\n\n      /**\n       * Loads credentials from the configuration object. This is used internally\n       * by the SDK to ensure that refreshable {Credentials} objects are properly\n       * refreshed and loaded when sending a request. If you want to ensure that\n       * your credentials are loaded prior to a request, you can use this method\n       * directly to provide accurate credential data stored in the object.\n       *\n       * @note If you configure the SDK with static or environment credentials,\n       *   the credential data should already be present in {credentials} attribute.\n       *   This method is primarily necessary to load credentials from asynchronous\n       *   sources, or sources that can refresh credentials periodically.\n       * @example Getting your access key\n       *   AWS.config.getCredentials(function(err) {\n       *     if (err) console.log(err.stack); // credentials not loaded\n       *     else console.log(\"Access Key:\", AWS.config.credentials.accessKeyId);\n       *   })\n       * @callback callback function(err)\n       *   Called when the {credentials} have been properly set on the configuration\n       *   object.\n       *\n       *   @param err [Error] if this is set, credentials were not successfully\n       *     loaded and this error provides information why.\n       * @see credentials\n       * @see Credentials\n       */\n      getCredentials: function getCredentials(callback) {\n        var self = this;\n\n        function finish(err) {\n          callback(err, err ? null : self.credentials);\n        }\n\n        function credError(msg, err) {\n          return new AWS.util.error(err || new Error(), {\n            code: 'CredentialsError',\n            message: msg,\n            name: 'CredentialsError'\n          });\n        }\n\n        function getAsyncCredentials() {\n          self.credentials.get(function (err) {\n            if (err) {\n              var msg = 'Could not load credentials from ' + self.credentials.constructor.name;\n              err = credError(msg, err);\n            }\n\n            finish(err);\n          });\n        }\n\n        function getStaticCredentials() {\n          var err = null;\n\n          if (!self.credentials.accessKeyId || !self.credentials.secretAccessKey) {\n            err = credError('Missing credentials');\n          }\n\n          finish(err);\n        }\n\n        if (self.credentials) {\n          if (typeof self.credentials.get === 'function') {\n            getAsyncCredentials();\n          } else {\n            // static credentials\n            getStaticCredentials();\n          }\n        } else if (self.credentialProvider) {\n          self.credentialProvider.resolve(function (err, creds) {\n            if (err) {\n              err = credError('Could not load credentials from any providers', err);\n            }\n\n            self.credentials = creds;\n            finish(err);\n          });\n        } else {\n          finish(credError('No credentials to load'));\n        }\n      },\n\n      /**\n       * @!group Loading and Setting Configuration Options\n       */\n\n      /**\n       * @overload update(options, allowUnknownKeys = false)\n       *   Updates the current configuration object with new options.\n       *\n       *   @example Update maxRetries property of a configuration object\n       *     config.update({maxRetries: 10});\n       *   @param [Object] options a map of option keys and values.\n       *   @param [Boolean] allowUnknownKeys whether unknown keys can be set on\n       *     the configuration object. Defaults to `false`.\n       *   @see constructor\n       */\n      update: function update(options, allowUnknownKeys) {\n        allowUnknownKeys = allowUnknownKeys || false;\n        options = this.extractCredentials(options);\n        AWS.util.each.call(this, options, function (key, value) {\n          if (allowUnknownKeys || Object.prototype.hasOwnProperty.call(this.keys, key) || AWS.Service.hasService(key)) {\n            this.set(key, value);\n          }\n        });\n      },\n\n      /**\n       * Loads configuration data from a JSON file into this config object.\n       * @note Loading configuration will reset all existing configuration\n       *   on the object.\n       * @!macro nobrowser\n       * @param path [String] the path relative to your process's current\n       *    working directory to load configuration from.\n       * @return [AWS.Config] the same configuration object\n       */\n      loadFromPath: function loadFromPath(path) {\n        this.clear();\n        var options = JSON.parse(AWS.util.readFileSync(path));\n        var fileSystemCreds = new AWS.FileSystemCredentials(path);\n        var chain = new AWS.CredentialProviderChain();\n        chain.providers.unshift(fileSystemCreds);\n        chain.resolve(function (err, creds) {\n          if (err) throw err;else options.credentials = creds;\n        });\n        this.constructor(options);\n        return this;\n      },\n\n      /**\n       * Clears configuration data on this object\n       *\n       * @api private\n       */\n      clear: function clear() {\n        /*jshint forin:false */\n        AWS.util.each.call(this, this.keys, function (key) {\n          delete this[key];\n        }); // reset credential provider\n\n        this.set('credentials', undefined);\n        this.set('credentialProvider', undefined);\n      },\n\n      /**\n       * Sets a property on the configuration object, allowing for a\n       * default value\n       * @api private\n       */\n      set: function set(property, value, defaultValue) {\n        if (value === undefined) {\n          if (defaultValue === undefined) {\n            defaultValue = this.keys[property];\n          }\n\n          if (typeof defaultValue === 'function') {\n            this[property] = defaultValue.call(this);\n          } else {\n            this[property] = defaultValue;\n          }\n        } else if (property === 'httpOptions' && this[property]) {\n          // deep merge httpOptions\n          this[property] = AWS.util.merge(this[property], value);\n        } else {\n          this[property] = value;\n        }\n      },\n\n      /**\n       * All of the keys with their default values.\n       *\n       * @constant\n       * @api private\n       */\n      keys: {\n        credentials: null,\n        credentialProvider: null,\n        region: null,\n        logger: null,\n        apiVersions: {},\n        apiVersion: null,\n        endpoint: undefined,\n        httpOptions: {\n          timeout: 120000\n        },\n        maxRetries: undefined,\n        maxRedirects: 10,\n        paramValidation: true,\n        sslEnabled: true,\n        s3ForcePathStyle: false,\n        s3BucketEndpoint: false,\n        s3DisableBodySigning: true,\n        computeChecksums: true,\n        convertResponseTypes: true,\n        correctClockSkew: false,\n        customUserAgent: null,\n        dynamoDbCrc32: true,\n        systemClockOffset: 0,\n        signatureVersion: null,\n        signatureCache: true,\n        retryDelayOptions: {},\n        useAccelerateEndpoint: false,\n        clientSideMonitoring: false,\n        endpointDiscoveryEnabled: false,\n        endpointCacheSize: 1000,\n        hostPrefixEnabled: true,\n        stsRegionalEndpoints: null\n      },\n\n      /**\n       * Extracts accessKeyId, secretAccessKey and sessionToken\n       * from a configuration hash.\n       *\n       * @api private\n       */\n      extractCredentials: function extractCredentials(options) {\n        if (options.accessKeyId && options.secretAccessKey) {\n          options = AWS.util.copy(options);\n          options.credentials = new AWS.Credentials(options);\n        }\n\n        return options;\n      },\n\n      /**\n       * Sets the promise dependency the SDK will use wherever Promises are returned.\n       * Passing `null` will force the SDK to use native Promises if they are available.\n       * If native Promises are not available, passing `null` will have no effect.\n       * @param [Constructor] dep A reference to a Promise constructor\n       */\n      setPromisesDependency: function setPromisesDependency(dep) {\n        PromisesDependency = dep; // if null was passed in, we should try to use native promises\n\n        if (dep === null && typeof Promise === 'function') {\n          PromisesDependency = Promise;\n        }\n\n        var constructors = [AWS.Request, AWS.Credentials, AWS.CredentialProviderChain];\n\n        if (AWS.S3) {\n          constructors.push(AWS.S3);\n\n          if (AWS.S3.ManagedUpload) {\n            constructors.push(AWS.S3.ManagedUpload);\n          }\n        }\n\n        AWS.util.addPromises(constructors, PromisesDependency);\n      },\n\n      /**\n       * Gets the promise dependency set by `AWS.config.setPromisesDependency`.\n       */\n      getPromisesDependency: function getPromisesDependency() {\n        return PromisesDependency;\n      }\n    });\n    /**\n     * @return [AWS.Config] The global configuration object singleton instance\n     * @readonly\n     * @see AWS.Config\n     */\n\n    AWS.config = new AWS.Config();\n  }, {\n    \"./core\": 18,\n    \"./credentials\": 19,\n    \"./credentials/credential_provider_chain\": 22\n  }],\n  18: [function (require, module, exports) {\n    /**\n     * The main AWS namespace\n     */\n    var AWS = {\n      util: require('./util')\n    };\n    /**\n     * @api private\n     * @!macro [new] nobrowser\n     *   @note This feature is not supported in the browser environment of the SDK.\n     */\n\n    var _hidden = {};\n\n    _hidden.toString(); // hack to parse macro\n\n    /**\n     * @api private\n     */\n\n\n    module.exports = AWS;\n    AWS.util.update(AWS, {\n      /**\n       * @constant\n       */\n      VERSION: '2.553.0',\n\n      /**\n       * @api private\n       */\n      Signers: {},\n\n      /**\n       * @api private\n       */\n      Protocol: {\n        Json: require('./protocol/json'),\n        Query: require('./protocol/query'),\n        Rest: require('./protocol/rest'),\n        RestJson: require('./protocol/rest_json'),\n        RestXml: require('./protocol/rest_xml')\n      },\n\n      /**\n       * @api private\n       */\n      XML: {\n        Builder: require('./xml/builder'),\n        Parser: null // conditionally set based on environment\n\n      },\n\n      /**\n       * @api private\n       */\n      JSON: {\n        Builder: require('./json/builder'),\n        Parser: require('./json/parser')\n      },\n\n      /**\n       * @api private\n       */\n      Model: {\n        Api: require('./model/api'),\n        Operation: require('./model/operation'),\n        Shape: require('./model/shape'),\n        Paginator: require('./model/paginator'),\n        ResourceWaiter: require('./model/resource_waiter')\n      },\n\n      /**\n       * @api private\n       */\n      apiLoader: require('./api_loader'),\n\n      /**\n       * @api private\n       */\n      EndpointCache: require('../vendor/endpoint-cache').EndpointCache\n    });\n\n    require('./sequential_executor');\n\n    require('./service');\n\n    require('./config');\n\n    require('./http');\n\n    require('./event_listeners');\n\n    require('./request');\n\n    require('./response');\n\n    require('./resource_waiter');\n\n    require('./signers/request_signer');\n\n    require('./param_validator');\n    /**\n     * @readonly\n     * @return [AWS.SequentialExecutor] a collection of global event listeners that\n     *   are attached to every sent request.\n     * @see AWS.Request AWS.Request for a list of events to listen for\n     * @example Logging the time taken to send a request\n     *   AWS.events.on('send', function startSend(resp) {\n     *     resp.startTime = new Date().getTime();\n     *   }).on('complete', function calculateTime(resp) {\n     *     var time = (new Date().getTime() - resp.startTime) / 1000;\n     *     console.log('Request took ' + time + ' seconds');\n     *   });\n     *\n     *   new AWS.S3().listBuckets(); // prints 'Request took 0.285 seconds'\n     */\n\n\n    AWS.events = new AWS.SequentialExecutor(); //create endpoint cache lazily\n\n    AWS.util.memoizedProperty(AWS, 'endpointCache', function () {\n      return new AWS.EndpointCache(AWS.config.endpointCacheSize);\n    }, true);\n  }, {\n    \"../vendor/endpoint-cache\": 103,\n    \"./api_loader\": 9,\n    \"./config\": 17,\n    \"./event_listeners\": 33,\n    \"./http\": 34,\n    \"./json/builder\": 36,\n    \"./json/parser\": 37,\n    \"./model/api\": 38,\n    \"./model/operation\": 40,\n    \"./model/paginator\": 41,\n    \"./model/resource_waiter\": 42,\n    \"./model/shape\": 43,\n    \"./param_validator\": 44,\n    \"./protocol/json\": 46,\n    \"./protocol/query\": 47,\n    \"./protocol/rest\": 48,\n    \"./protocol/rest_json\": 49,\n    \"./protocol/rest_xml\": 50,\n    \"./request\": 55,\n    \"./resource_waiter\": 56,\n    \"./response\": 57,\n    \"./sequential_executor\": 58,\n    \"./service\": 59,\n    \"./signers/request_signer\": 63,\n    \"./util\": 71,\n    \"./xml/builder\": 73\n  }],\n  19: [function (require, module, exports) {\n    var AWS = require('./core');\n    /**\n     * Represents your AWS security credentials, specifically the\n     * {accessKeyId}, {secretAccessKey}, and optional {sessionToken}.\n     * Creating a `Credentials` object allows you to pass around your\n     * security information to configuration and service objects.\n     *\n     * Note that this class typically does not need to be constructed manually,\n     * as the {AWS.Config} and {AWS.Service} classes both accept simple\n     * options hashes with the three keys. These structures will be converted\n     * into Credentials objects automatically.\n     *\n     * ## Expiring and Refreshing Credentials\n     *\n     * Occasionally credentials can expire in the middle of a long-running\n     * application. In this case, the SDK will automatically attempt to\n     * refresh the credentials from the storage location if the Credentials\n     * class implements the {refresh} method.\n     *\n     * If you are implementing a credential storage location, you\n     * will want to create a subclass of the `Credentials` class and\n     * override the {refresh} method. This method allows credentials to be\n     * retrieved from the backing store, be it a file system, database, or\n     * some network storage. The method should reset the credential attributes\n     * on the object.\n     *\n     * @!attribute expired\n     *   @return [Boolean] whether the credentials have been expired and\n     *     require a refresh. Used in conjunction with {expireTime}.\n     * @!attribute expireTime\n     *   @return [Date] a time when credentials should be considered expired. Used\n     *     in conjunction with {expired}.\n     * @!attribute accessKeyId\n     *   @return [String] the AWS access key ID\n     * @!attribute secretAccessKey\n     *   @return [String] the AWS secret access key\n     * @!attribute sessionToken\n     *   @return [String] an optional AWS session token\n     */\n\n\n    AWS.Credentials = AWS.util.inherit({\n      /**\n       * A credentials object can be created using positional arguments or an options\n       * hash.\n       *\n       * @overload AWS.Credentials(accessKeyId, secretAccessKey, sessionToken=null)\n       *   Creates a Credentials object with a given set of credential information\n       *   as positional arguments.\n       *   @param accessKeyId [String] the AWS access key ID\n       *   @param secretAccessKey [String] the AWS secret access key\n       *   @param sessionToken [String] the optional AWS session token\n       *   @example Create a credentials object with AWS credentials\n       *     var creds = new AWS.Credentials('akid', 'secret', 'session');\n       * @overload AWS.Credentials(options)\n       *   Creates a Credentials object with a given set of credential information\n       *   as an options hash.\n       *   @option options accessKeyId [String] the AWS access key ID\n       *   @option options secretAccessKey [String] the AWS secret access key\n       *   @option options sessionToken [String] the optional AWS session token\n       *   @example Create a credentials object with AWS credentials\n       *     var creds = new AWS.Credentials({\n       *       accessKeyId: 'akid', secretAccessKey: 'secret', sessionToken: 'session'\n       *     });\n       */\n      constructor: function Credentials() {\n        // hide secretAccessKey from being displayed with util.inspect\n        AWS.util.hideProperties(this, ['secretAccessKey']);\n        this.expired = false;\n        this.expireTime = null;\n        this.refreshCallbacks = [];\n\n        if (arguments.length === 1 && typeof arguments[0] === 'object') {\n          var creds = arguments[0].credentials || arguments[0];\n          this.accessKeyId = creds.accessKeyId;\n          this.secretAccessKey = creds.secretAccessKey;\n          this.sessionToken = creds.sessionToken;\n        } else {\n          this.accessKeyId = arguments[0];\n          this.secretAccessKey = arguments[1];\n          this.sessionToken = arguments[2];\n        }\n      },\n\n      /**\n       * @return [Integer] the number of seconds before {expireTime} during which\n       *   the credentials will be considered expired.\n       */\n      expiryWindow: 15,\n\n      /**\n       * @return [Boolean] whether the credentials object should call {refresh}\n       * @note Subclasses should override this method to provide custom refresh\n       *   logic.\n       */\n      needsRefresh: function needsRefresh() {\n        var currentTime = AWS.util.date.getDate().getTime();\n        var adjustedTime = new Date(currentTime + this.expiryWindow * 1000);\n\n        if (this.expireTime && adjustedTime > this.expireTime) {\n          return true;\n        } else {\n          return this.expired || !this.accessKeyId || !this.secretAccessKey;\n        }\n      },\n\n      /**\n       * Gets the existing credentials, refreshing them if they are not yet loaded\n       * or have expired. Users should call this method before using {refresh},\n       * as this will not attempt to reload credentials when they are already\n       * loaded into the object.\n       *\n       * @callback callback function(err)\n       *   When this callback is called with no error, it means either credentials\n       *   do not need to be refreshed or refreshed credentials information has\n       *   been loaded into the object (as the `accessKeyId`, `secretAccessKey`,\n       *   and `sessionToken` properties).\n       *   @param err [Error] if an error occurred, this value will be filled\n       */\n      get: function get(callback) {\n        var self = this;\n\n        if (this.needsRefresh()) {\n          this.refresh(function (err) {\n            if (!err) self.expired = false; // reset expired flag\n\n            if (callback) callback(err);\n          });\n        } else if (callback) {\n          callback();\n        }\n      },\n\n      /**\n       * @!method  getPromise()\n       *   Returns a 'thenable' promise.\n       *   Gets the existing credentials, refreshing them if they are not yet loaded\n       *   or have expired. Users should call this method before using {refresh},\n       *   as this will not attempt to reload credentials when they are already\n       *   loaded into the object.\n       *\n       *   Two callbacks can be provided to the `then` method on the returned promise.\n       *   The first callback will be called if the promise is fulfilled, and the second\n       *   callback will be called if the promise is rejected.\n       *   @callback fulfilledCallback function()\n       *     Called if the promise is fulfilled. When this callback is called, it\n       *     means either credentials do not need to be refreshed or refreshed\n       *     credentials information has been loaded into the object (as the\n       *     `accessKeyId`, `secretAccessKey`, and `sessionToken` properties).\n       *   @callback rejectedCallback function(err)\n       *     Called if the promise is rejected.\n       *     @param err [Error] if an error occurred, this value will be filled\n       *   @return [Promise] A promise that represents the state of the `get` call.\n       *   @example Calling the `getPromise` method.\n       *     var promise = credProvider.getPromise();\n       *     promise.then(function() { ... }, function(err) { ... });\n       */\n\n      /**\n       * @!method  refreshPromise()\n       *   Returns a 'thenable' promise.\n       *   Refreshes the credentials. Users should call {get} before attempting\n       *   to forcibly refresh credentials.\n       *\n       *   Two callbacks can be provided to the `then` method on the returned promise.\n       *   The first callback will be called if the promise is fulfilled, and the second\n       *   callback will be called if the promise is rejected.\n       *   @callback fulfilledCallback function()\n       *     Called if the promise is fulfilled. When this callback is called, it\n       *     means refreshed credentials information has been loaded into the object\n       *     (as the `accessKeyId`, `secretAccessKey`, and `sessionToken` properties).\n       *   @callback rejectedCallback function(err)\n       *     Called if the promise is rejected.\n       *     @param err [Error] if an error occurred, this value will be filled\n       *   @return [Promise] A promise that represents the state of the `refresh` call.\n       *   @example Calling the `refreshPromise` method.\n       *     var promise = credProvider.refreshPromise();\n       *     promise.then(function() { ... }, function(err) { ... });\n       */\n\n      /**\n       * Refreshes the credentials. Users should call {get} before attempting\n       * to forcibly refresh credentials.\n       *\n       * @callback callback function(err)\n       *   When this callback is called with no error, it means refreshed\n       *   credentials information has been loaded into the object (as the\n       *   `accessKeyId`, `secretAccessKey`, and `sessionToken` properties).\n       *   @param err [Error] if an error occurred, this value will be filled\n       * @note Subclasses should override this class to reset the\n       *   {accessKeyId}, {secretAccessKey} and optional {sessionToken}\n       *   on the credentials object and then call the callback with\n       *   any error information.\n       * @see get\n       */\n      refresh: function refresh(callback) {\n        this.expired = false;\n        callback();\n      },\n\n      /**\n       * @api private\n       * @param callback\n       */\n      coalesceRefresh: function coalesceRefresh(callback, sync) {\n        var self = this;\n\n        if (self.refreshCallbacks.push(callback) === 1) {\n          self.load(function onLoad(err) {\n            AWS.util.arrayEach(self.refreshCallbacks, function (callback) {\n              if (sync) {\n                callback(err);\n              } else {\n                // callback could throw, so defer to ensure all callbacks are notified\n                AWS.util.defer(function () {\n                  callback(err);\n                });\n              }\n            });\n            self.refreshCallbacks.length = 0;\n          });\n        }\n      },\n\n      /**\n       * @api private\n       * @param callback\n       */\n      load: function load(callback) {\n        callback();\n      }\n    });\n    /**\n     * @api private\n     */\n\n    AWS.Credentials.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n      this.prototype.getPromise = AWS.util.promisifyMethod('get', PromiseDependency);\n      this.prototype.refreshPromise = AWS.util.promisifyMethod('refresh', PromiseDependency);\n    };\n    /**\n     * @api private\n     */\n\n\n    AWS.Credentials.deletePromisesFromClass = function deletePromisesFromClass() {\n      delete this.prototype.getPromise;\n      delete this.prototype.refreshPromise;\n    };\n\n    AWS.util.addPromises(AWS.Credentials);\n  }, {\n    \"./core\": 18\n  }],\n  20: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    var STS = require('../../clients/sts');\n    /**\n     * Represents temporary credentials retrieved from {AWS.STS}. Without any\n     * extra parameters, credentials will be fetched from the\n     * {AWS.STS.getSessionToken} operation. If an IAM role is provided, the\n     * {AWS.STS.assumeRole} operation will be used to fetch credentials for the\n     * role instead.\n     *\n     * AWS.ChainableTemporaryCredentials differs from AWS.TemporaryCredentials in\n     * the way masterCredentials and refreshes are handled.\n     * AWS.ChainableTemporaryCredentials refreshes expired credentials using the\n     * masterCredentials passed by the user to support chaining of STS credentials.\n     * However, AWS.TemporaryCredentials recursively collapses the masterCredentials\n     * during instantiation, precluding the ability to refresh credentials which\n     * require intermediate, temporary credentials.\n     *\n     * For example, if the application should use RoleA, which must be assumed from\n     * RoleB, and the environment provides credentials which can assume RoleB, then\n     * AWS.ChainableTemporaryCredentials must be used to support refreshing the\n     * temporary credentials for RoleA:\n     *\n     * ```javascript\n     * var roleACreds = new AWS.ChainableTemporaryCredentials({\n     *   params: {RoleArn: 'RoleA'},\n     *   masterCredentials: new AWS.ChainableTemporaryCredentials({\n     *     params: {RoleArn: 'RoleB'},\n     *     masterCredentials: new AWS.EnvironmentCredentials('AWS')\n     *   })\n     * });\n     * ```\n     *\n     * If AWS.TemporaryCredentials had been used in the previous example,\n     * `roleACreds` would fail to refresh because `roleACreds` would\n     * use the environment credentials for the AssumeRole request.\n     *\n     * Another difference is that AWS.ChainableTemporaryCredentials creates the STS\n     * service instance during instantiation while AWS.TemporaryCredentials creates\n     * the STS service instance during the first refresh. Creating the service\n     * instance during instantiation effectively captures the master credentials\n     * from the global config, so that subsequent changes to the global config do\n     * not affect the master credentials used to refresh the temporary credentials.\n     *\n     * This allows an instance of AWS.ChainableTemporaryCredentials to be assigned\n     * to AWS.config.credentials:\n     *\n     * ```javascript\n     * var envCreds = new AWS.EnvironmentCredentials('AWS');\n     * AWS.config.credentials = envCreds;\n     * // masterCredentials will be envCreds\n     * AWS.config.credentials = new AWS.ChainableTemporaryCredentials({\n     *   params: {RoleArn: '...'}\n     * });\n     * ```\n     *\n     * Similarly, to use the CredentialProviderChain's default providers as the\n     * master credentials, simply create a new instance of\n     * AWS.ChainableTemporaryCredentials:\n     *\n     * ```javascript\n     * AWS.config.credentials = new ChainableTemporaryCredentials({\n     *   params: {RoleArn: '...'}\n     * });\n     * ```\n     *\n     * @!attribute service\n     *   @return [AWS.STS] the STS service instance used to\n     *     get and refresh temporary credentials from AWS STS.\n     * @note (see constructor)\n     */\n\n\n    AWS.ChainableTemporaryCredentials = AWS.util.inherit(AWS.Credentials, {\n      /**\n       * Creates a new temporary credentials object.\n       *\n       * @param options [map] a set of options\n       * @option options params [map] ({}) a map of options that are passed to the\n       *   {AWS.STS.assumeRole} or {AWS.STS.getSessionToken} operations.\n       *   If a `RoleArn` parameter is passed in, credentials will be based on the\n       *   IAM role. If a `SerialNumber` parameter is passed in, {tokenCodeFn} must\n       *   also be passed in or an error will be thrown.\n       * @option options masterCredentials [AWS.Credentials] the master credentials\n       *   used to get and refresh temporary credentials from AWS STS. By default,\n       *   AWS.config.credentials or AWS.config.credentialProvider will be used.\n       * @option options tokenCodeFn [Function] (null) Function to provide\n       *   `TokenCode`, if `SerialNumber` is provided for profile in {params}. Function\n       *   is called with value of `SerialNumber` and `callback`, and should provide\n       *   the `TokenCode` or an error to the callback in the format\n       *   `callback(err, token)`.\n       * @example Creating a new credentials object for generic temporary credentials\n       *   AWS.config.credentials = new AWS.ChainableTemporaryCredentials();\n       * @example Creating a new credentials object for an IAM role\n       *   AWS.config.credentials = new AWS.ChainableTemporaryCredentials({\n       *     params: {\n       *       RoleArn: 'arn:aws:iam::1234567890:role/TemporaryCredentials'\n       *     }\n       *   });\n       * @see AWS.STS.assumeRole\n       * @see AWS.STS.getSessionToken\n       */\n      constructor: function ChainableTemporaryCredentials(options) {\n        AWS.Credentials.call(this);\n        options = options || {};\n        this.errorCode = 'ChainableTemporaryCredentialsProviderFailure';\n        this.expired = true;\n        this.tokenCodeFn = null;\n        var params = AWS.util.copy(options.params) || {};\n\n        if (params.RoleArn) {\n          params.RoleSessionName = params.RoleSessionName || 'temporary-credentials';\n        }\n\n        if (params.SerialNumber) {\n          if (!options.tokenCodeFn || typeof options.tokenCodeFn !== 'function') {\n            throw new AWS.util.error(new Error('tokenCodeFn must be a function when params.SerialNumber is given'), {\n              code: this.errorCode\n            });\n          } else {\n            this.tokenCodeFn = options.tokenCodeFn;\n          }\n        }\n\n        var config = AWS.util.merge({\n          params: params,\n          credentials: options.masterCredentials || AWS.config.credentials\n        }, options.stsConfig || {});\n        this.service = new STS(config);\n      },\n\n      /**\n       * Refreshes credentials using {AWS.STS.assumeRole} or\n       * {AWS.STS.getSessionToken}, depending on whether an IAM role ARN was passed\n       * to the credentials {constructor}.\n       *\n       * @callback callback function(err)\n       *   Called when the STS service responds (or fails). When\n       *   this callback is called with no error, it means that the credentials\n       *   information has been loaded into the object (as the `accessKeyId`,\n       *   `secretAccessKey`, and `sessionToken` properties).\n       *   @param err [Error] if an error occurred, this value will be filled\n       * @see AWS.Credentials.get\n       */\n      refresh: function refresh(callback) {\n        this.coalesceRefresh(callback || AWS.util.fn.callback);\n      },\n\n      /**\n       * @api private\n       * @param callback\n       */\n      load: function load(callback) {\n        var self = this;\n        var operation = self.service.config.params.RoleArn ? 'assumeRole' : 'getSessionToken';\n        this.getTokenCode(function (err, tokenCode) {\n          var params = {};\n\n          if (err) {\n            callback(err);\n            return;\n          }\n\n          if (tokenCode) {\n            params.TokenCode = tokenCode;\n          }\n\n          self.service[operation](params, function (err, data) {\n            if (!err) {\n              self.service.credentialsFrom(data, self);\n            }\n\n            callback(err);\n          });\n        });\n      },\n\n      /**\n       * @api private\n       */\n      getTokenCode: function getTokenCode(callback) {\n        var self = this;\n\n        if (this.tokenCodeFn) {\n          this.tokenCodeFn(this.service.config.params.SerialNumber, function (err, token) {\n            if (err) {\n              var message = err;\n\n              if (err instanceof Error) {\n                message = err.message;\n              }\n\n              callback(AWS.util.error(new Error('Error fetching MFA token: ' + message), {\n                code: self.errorCode\n              }));\n              return;\n            }\n\n            callback(null, token);\n          });\n        } else {\n          callback(null);\n        }\n      }\n    });\n  }, {\n    \"../../clients/sts\": 8,\n    \"../core\": 18\n  }],\n  21: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    var CognitoIdentity = require('../../clients/cognitoidentity');\n\n    var STS = require('../../clients/sts');\n    /**\n     * Represents credentials retrieved from STS Web Identity Federation using\n     * the Amazon Cognito Identity service.\n     *\n     * By default this provider gets credentials using the\n     * {AWS.CognitoIdentity.getCredentialsForIdentity} service operation, which\n     * requires either an `IdentityId` or an `IdentityPoolId` (Amazon Cognito\n     * Identity Pool ID), which is used to call {AWS.CognitoIdentity.getId} to\n     * obtain an `IdentityId`. If the identity or identity pool is not configured in\n     * the Amazon Cognito Console to use IAM roles with the appropriate permissions,\n     * then additionally a `RoleArn` is required containing the ARN of the IAM trust\n     * policy for the Amazon Cognito role that the user will log into. If a `RoleArn`\n     * is provided, then this provider gets credentials using the\n     * {AWS.STS.assumeRoleWithWebIdentity} service operation, after first getting an\n     * Open ID token from {AWS.CognitoIdentity.getOpenIdToken}.\n     *\n     * In addition, if this credential provider is used to provide authenticated\n     * login, the `Logins` map may be set to the tokens provided by the respective\n     * identity providers. See {constructor} for an example on creating a credentials\n     * object with proper property values.\n     *\n     * ## Refreshing Credentials from Identity Service\n     *\n     * In addition to AWS credentials expiring after a given amount of time, the\n     * login token from the identity provider will also expire. Once this token\n     * expires, it will not be usable to refresh AWS credentials, and another\n     * token will be needed. The SDK does not manage refreshing of the token value,\n     * but this can be done through a \"refresh token\" supported by most identity\n     * providers. Consult the documentation for the identity provider for refreshing\n     * tokens. Once the refreshed token is acquired, you should make sure to update\n     * this new token in the credentials object's {params} property. The following\n     * code will update the WebIdentityToken, assuming you have retrieved an updated\n     * token from the identity provider:\n     *\n     * ```javascript\n     * AWS.config.credentials.params.Logins['graph.facebook.com'] = updatedToken;\n     * ```\n     *\n     * Future calls to `credentials.refresh()` will now use the new token.\n     *\n     * @!attribute params\n     *   @return [map] the map of params passed to\n     *     {AWS.CognitoIdentity.getId},\n     *     {AWS.CognitoIdentity.getOpenIdToken}, and\n     *     {AWS.STS.assumeRoleWithWebIdentity}. To update the token, set the\n     *     `params.WebIdentityToken` property.\n     * @!attribute data\n     *   @return [map] the raw data response from the call to\n     *     {AWS.CognitoIdentity.getCredentialsForIdentity}, or\n     *     {AWS.STS.assumeRoleWithWebIdentity}. Use this if you want to get\n     *     access to other properties from the response.\n     * @!attribute identityId\n     *   @return [String] the Cognito ID returned by the last call to\n     *     {AWS.CognitoIdentity.getOpenIdToken}. This ID represents the actual\n     *     final resolved identity ID from Amazon Cognito.\n     */\n\n\n    AWS.CognitoIdentityCredentials = AWS.util.inherit(AWS.Credentials, {\n      /**\n       * @api private\n       */\n      localStorageKey: {\n        id: 'aws.cognito.identity-id.',\n        providers: 'aws.cognito.identity-providers.'\n      },\n\n      /**\n       * Creates a new credentials object.\n       * @example Creating a new credentials object\n       *   AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n       *\n       *     // either IdentityPoolId or IdentityId is required\n       *     // See the IdentityPoolId param for AWS.CognitoIdentity.getID (linked below)\n       *     // See the IdentityId param for AWS.CognitoIdentity.getCredentialsForIdentity\n       *     // or AWS.CognitoIdentity.getOpenIdToken (linked below)\n       *     IdentityPoolId: 'us-east-1:1699ebc0-7900-4099-b910-2df94f52a030',\n       *     IdentityId: 'us-east-1:128d0a74-c82f-4553-916d-90053e4a8b0f'\n       *\n       *     // optional, only necessary when the identity pool is not configured\n       *     // to use IAM roles in the Amazon Cognito Console\n       *     // See the RoleArn param for AWS.STS.assumeRoleWithWebIdentity (linked below)\n       *     RoleArn: 'arn:aws:iam::1234567890:role/MYAPP-CognitoIdentity',\n       *\n       *     // optional tokens, used for authenticated login\n       *     // See the Logins param for AWS.CognitoIdentity.getID (linked below)\n       *     Logins: {\n       *       'graph.facebook.com': 'FBTOKEN',\n       *       'www.amazon.com': 'AMAZONTOKEN',\n       *       'accounts.google.com': 'GOOGLETOKEN',\n       *       'api.twitter.com': 'TWITTERTOKEN',\n       *       'www.digits.com': 'DIGITSTOKEN'\n       *     },\n       *\n       *     // optional name, defaults to web-identity\n       *     // See the RoleSessionName param for AWS.STS.assumeRoleWithWebIdentity (linked below)\n       *     RoleSessionName: 'web',\n       *\n       *     // optional, only necessary when application runs in a browser\n       *     // and multiple users are signed in at once, used for caching\n       *     LoginId: 'example@gmail.com'\n       *\n       *   }, {\n       *      // optionally provide configuration to apply to the underlying service clients\n       *      // if configuration is not provided, then configuration will be pulled from AWS.config\n       *\n       *      // region should match the region your identity pool is located in\n       *      region: 'us-east-1',\n       *\n       *      // specify timeout options\n       *      httpOptions: {\n       *        timeout: 100\n       *      }\n       *   });\n       * @see AWS.CognitoIdentity.getId\n       * @see AWS.CognitoIdentity.getCredentialsForIdentity\n       * @see AWS.STS.assumeRoleWithWebIdentity\n       * @see AWS.CognitoIdentity.getOpenIdToken\n       * @see AWS.Config\n       * @note If a region is not provided in the global AWS.config, or\n       *   specified in the `clientConfig` to the CognitoIdentityCredentials\n       *   constructor, you may encounter a 'Missing credentials in config' error\n       *   when calling making a service call.\n       */\n      constructor: function CognitoIdentityCredentials(params, clientConfig) {\n        AWS.Credentials.call(this);\n        this.expired = true;\n        this.params = params;\n        this.data = null;\n        this._identityId = null;\n        this._clientConfig = AWS.util.copy(clientConfig || {});\n        this.loadCachedId();\n        var self = this;\n        Object.defineProperty(this, 'identityId', {\n          get: function () {\n            self.loadCachedId();\n            return self._identityId || self.params.IdentityId;\n          },\n          set: function (identityId) {\n            self._identityId = identityId;\n          }\n        });\n      },\n\n      /**\n       * Refreshes credentials using {AWS.CognitoIdentity.getCredentialsForIdentity},\n       * or {AWS.STS.assumeRoleWithWebIdentity}.\n       *\n       * @callback callback function(err)\n       *   Called when the STS service responds (or fails). When\n       *   this callback is called with no error, it means that the credentials\n       *   information has been loaded into the object (as the `accessKeyId`,\n       *   `secretAccessKey`, and `sessionToken` properties).\n       *   @param err [Error] if an error occurred, this value will be filled\n       * @see AWS.Credentials.get\n       */\n      refresh: function refresh(callback) {\n        this.coalesceRefresh(callback || AWS.util.fn.callback);\n      },\n\n      /**\n       * @api private\n       * @param callback\n       */\n      load: function load(callback) {\n        var self = this;\n        self.createClients();\n        self.data = null;\n        self._identityId = null;\n        self.getId(function (err) {\n          if (!err) {\n            if (!self.params.RoleArn) {\n              self.getCredentialsForIdentity(callback);\n            } else {\n              self.getCredentialsFromSTS(callback);\n            }\n          } else {\n            self.clearIdOnNotAuthorized(err);\n            callback(err);\n          }\n        });\n      },\n\n      /**\n       * Clears the cached Cognito ID associated with the currently configured\n       * identity pool ID. Use this to manually invalidate your cache if\n       * the identity pool ID was deleted.\n       */\n      clearCachedId: function clearCache() {\n        this._identityId = null;\n        delete this.params.IdentityId;\n        var poolId = this.params.IdentityPoolId;\n        var loginId = this.params.LoginId || '';\n        delete this.storage[this.localStorageKey.id + poolId + loginId];\n        delete this.storage[this.localStorageKey.providers + poolId + loginId];\n      },\n\n      /**\n       * @api private\n       */\n      clearIdOnNotAuthorized: function clearIdOnNotAuthorized(err) {\n        var self = this;\n\n        if (err.code == 'NotAuthorizedException') {\n          self.clearCachedId();\n        }\n      },\n\n      /**\n       * Retrieves a Cognito ID, loading from cache if it was already retrieved\n       * on this device.\n       *\n       * @callback callback function(err, identityId)\n       *   @param err [Error, null] an error object if the call failed or null if\n       *     it succeeded.\n       *   @param identityId [String, null] if successful, the callback will return\n       *     the Cognito ID.\n       * @note If not loaded explicitly, the Cognito ID is loaded and stored in\n       *   localStorage in the browser environment of a device.\n       * @api private\n       */\n      getId: function getId(callback) {\n        var self = this;\n\n        if (typeof self.params.IdentityId === 'string') {\n          return callback(null, self.params.IdentityId);\n        }\n\n        self.cognito.getId(function (err, data) {\n          if (!err && data.IdentityId) {\n            self.params.IdentityId = data.IdentityId;\n            callback(null, data.IdentityId);\n          } else {\n            callback(err);\n          }\n        });\n      },\n\n      /**\n       * @api private\n       */\n      loadCredentials: function loadCredentials(data, credentials) {\n        if (!data || !credentials) return;\n        credentials.expired = false;\n        credentials.accessKeyId = data.Credentials.AccessKeyId;\n        credentials.secretAccessKey = data.Credentials.SecretKey;\n        credentials.sessionToken = data.Credentials.SessionToken;\n        credentials.expireTime = data.Credentials.Expiration;\n      },\n\n      /**\n       * @api private\n       */\n      getCredentialsForIdentity: function getCredentialsForIdentity(callback) {\n        var self = this;\n        self.cognito.getCredentialsForIdentity(function (err, data) {\n          if (!err) {\n            self.cacheId(data);\n            self.data = data;\n            self.loadCredentials(self.data, self);\n          } else {\n            self.clearIdOnNotAuthorized(err);\n          }\n\n          callback(err);\n        });\n      },\n\n      /**\n       * @api private\n       */\n      getCredentialsFromSTS: function getCredentialsFromSTS(callback) {\n        var self = this;\n        self.cognito.getOpenIdToken(function (err, data) {\n          if (!err) {\n            self.cacheId(data);\n            self.params.WebIdentityToken = data.Token;\n            self.webIdentityCredentials.refresh(function (webErr) {\n              if (!webErr) {\n                self.data = self.webIdentityCredentials.data;\n                self.sts.credentialsFrom(self.data, self);\n              }\n\n              callback(webErr);\n            });\n          } else {\n            self.clearIdOnNotAuthorized(err);\n            callback(err);\n          }\n        });\n      },\n\n      /**\n       * @api private\n       */\n      loadCachedId: function loadCachedId() {\n        var self = this; // in the browser we source default IdentityId from localStorage\n\n        if (AWS.util.isBrowser() && !self.params.IdentityId) {\n          var id = self.getStorage('id');\n\n          if (id && self.params.Logins) {\n            var actualProviders = Object.keys(self.params.Logins);\n            var cachedProviders = (self.getStorage('providers') || '').split(','); // only load ID if at least one provider used this ID before\n\n            var intersect = cachedProviders.filter(function (n) {\n              return actualProviders.indexOf(n) !== -1;\n            });\n\n            if (intersect.length !== 0) {\n              self.params.IdentityId = id;\n            }\n          } else if (id) {\n            self.params.IdentityId = id;\n          }\n        }\n      },\n\n      /**\n       * @api private\n       */\n      createClients: function () {\n        var clientConfig = this._clientConfig;\n        this.webIdentityCredentials = this.webIdentityCredentials || new AWS.WebIdentityCredentials(this.params, clientConfig);\n\n        if (!this.cognito) {\n          var cognitoConfig = AWS.util.merge({}, clientConfig);\n          cognitoConfig.params = this.params;\n          this.cognito = new CognitoIdentity(cognitoConfig);\n        }\n\n        this.sts = this.sts || new STS(clientConfig);\n      },\n\n      /**\n       * @api private\n       */\n      cacheId: function cacheId(data) {\n        this._identityId = data.IdentityId;\n        this.params.IdentityId = this._identityId; // cache this IdentityId in browser localStorage if possible\n\n        if (AWS.util.isBrowser()) {\n          this.setStorage('id', data.IdentityId);\n\n          if (this.params.Logins) {\n            this.setStorage('providers', Object.keys(this.params.Logins).join(','));\n          }\n        }\n      },\n\n      /**\n       * @api private\n       */\n      getStorage: function getStorage(key) {\n        return this.storage[this.localStorageKey[key] + this.params.IdentityPoolId + (this.params.LoginId || '')];\n      },\n\n      /**\n       * @api private\n       */\n      setStorage: function setStorage(key, val) {\n        try {\n          this.storage[this.localStorageKey[key] + this.params.IdentityPoolId + (this.params.LoginId || '')] = val;\n        } catch (_) {}\n      },\n\n      /**\n       * @api private\n       */\n      storage: function () {\n        try {\n          var storage = AWS.util.isBrowser() && window.localStorage !== null && typeof window.localStorage === 'object' ? window.localStorage : {}; // Test set/remove which would throw an error in Safari's private browsing\n\n          storage['aws.test-storage'] = 'foobar';\n          delete storage['aws.test-storage'];\n          return storage;\n        } catch (_) {\n          return {};\n        }\n      }()\n    });\n  }, {\n    \"../../clients/cognitoidentity\": 7,\n    \"../../clients/sts\": 8,\n    \"../core\": 18\n  }],\n  22: [function (require, module, exports) {\n    var AWS = require('../core');\n    /**\n     * Creates a credential provider chain that searches for AWS credentials\n     * in a list of credential providers specified by the {providers} property.\n     *\n     * By default, the chain will use the {defaultProviders} to resolve credentials.\n     * These providers will look in the environment using the\n     * {AWS.EnvironmentCredentials} class with the 'AWS' and 'AMAZON' prefixes.\n     *\n     * ## Setting Providers\n     *\n     * Each provider in the {providers} list should be a function that returns\n     * a {AWS.Credentials} object, or a hardcoded credentials object. The function\n     * form allows for delayed execution of the credential construction.\n     *\n     * ## Resolving Credentials from a Chain\n     *\n     * Call {resolve} to return the first valid credential object that can be\n     * loaded by the provider chain.\n     *\n     * For example, to resolve a chain with a custom provider that checks a file\n     * on disk after the set of {defaultProviders}:\n     *\n     * ```javascript\n     * var diskProvider = new AWS.FileSystemCredentials('./creds.json');\n     * var chain = new AWS.CredentialProviderChain();\n     * chain.providers.push(diskProvider);\n     * chain.resolve();\n     * ```\n     *\n     * The above code will return the `diskProvider` object if the\n     * file contains credentials and the `defaultProviders` do not contain\n     * any credential settings.\n     *\n     * @!attribute providers\n     *   @return [Array<AWS.Credentials, Function>]\n     *     a list of credentials objects or functions that return credentials\n     *     objects. If the provider is a function, the function will be\n     *     started lazily when the provider needs to be checked for valid\n     *     credentials. By default, this object will be set to the\n     *     {defaultProviders}.\n     *   @see defaultProviders\n     */\n\n\n    AWS.CredentialProviderChain = AWS.util.inherit(AWS.Credentials, {\n      /**\n       * Creates a new CredentialProviderChain with a default set of providers\n       * specified by {defaultProviders}.\n       */\n      constructor: function CredentialProviderChain(providers) {\n        if (providers) {\n          this.providers = providers;\n        } else {\n          this.providers = AWS.CredentialProviderChain.defaultProviders.slice(0);\n        }\n\n        this.resolveCallbacks = [];\n      },\n\n      /**\n       * @!method  resolvePromise()\n       *   Returns a 'thenable' promise.\n       *   Resolves the provider chain by searching for the first set of\n       *   credentials in {providers}.\n       *\n       *   Two callbacks can be provided to the `then` method on the returned promise.\n       *   The first callback will be called if the promise is fulfilled, and the second\n       *   callback will be called if the promise is rejected.\n       *   @callback fulfilledCallback function(credentials)\n       *     Called if the promise is fulfilled and the provider resolves the chain\n       *     to a credentials object\n       *     @param credentials [AWS.Credentials] the credentials object resolved\n       *       by the provider chain.\n       *   @callback rejectedCallback function(error)\n       *     Called if the promise is rejected.\n       *     @param err [Error] the error object returned if no credentials are found.\n       *   @return [Promise] A promise that represents the state of the `resolve` method call.\n       *   @example Calling the `resolvePromise` method.\n       *     var promise = chain.resolvePromise();\n       *     promise.then(function(credentials) { ... }, function(err) { ... });\n       */\n\n      /**\n       * Resolves the provider chain by searching for the first set of\n       * credentials in {providers}.\n       *\n       * @callback callback function(err, credentials)\n       *   Called when the provider resolves the chain to a credentials object\n       *   or null if no credentials can be found.\n       *\n       *   @param err [Error] the error object returned if no credentials are\n       *     found.\n       *   @param credentials [AWS.Credentials] the credentials object resolved\n       *     by the provider chain.\n       * @return [AWS.CredentialProviderChain] the provider, for chaining.\n       */\n      resolve: function resolve(callback) {\n        var self = this;\n\n        if (self.providers.length === 0) {\n          callback(new Error('No providers'));\n          return self;\n        }\n\n        if (self.resolveCallbacks.push(callback) === 1) {\n          var index = 0;\n          var providers = self.providers.slice(0);\n\n          function resolveNext(err, creds) {\n            if (!err && creds || index === providers.length) {\n              AWS.util.arrayEach(self.resolveCallbacks, function (callback) {\n                callback(err, creds);\n              });\n              self.resolveCallbacks.length = 0;\n              return;\n            }\n\n            var provider = providers[index++];\n\n            if (typeof provider === 'function') {\n              creds = provider.call();\n            } else {\n              creds = provider;\n            }\n\n            if (creds.get) {\n              creds.get(function (getErr) {\n                resolveNext(getErr, getErr ? null : creds);\n              });\n            } else {\n              resolveNext(null, creds);\n            }\n          }\n\n          resolveNext();\n        }\n\n        return self;\n      }\n    });\n    /**\n     * The default set of providers used by a vanilla CredentialProviderChain.\n     *\n     * In the browser:\n     *\n     * ```javascript\n     * AWS.CredentialProviderChain.defaultProviders = []\n     * ```\n     *\n     * In Node.js:\n     *\n     * ```javascript\n     * AWS.CredentialProviderChain.defaultProviders = [\n     *   function () { return new AWS.EnvironmentCredentials('AWS'); },\n     *   function () { return new AWS.EnvironmentCredentials('AMAZON'); },\n     *   function () { return new AWS.SharedIniFileCredentials(); },\n     *   function () { return new AWS.ECSCredentials(); },\n     *   function () { return new AWS.ProcessCredentials(); },\n     *   function () { return new AWS.TokenFileWebIdentityCredentials(); },\n     *   function () { return new AWS.EC2MetadataCredentials() }\n     * ]\n     * ```\n     */\n\n    AWS.CredentialProviderChain.defaultProviders = [];\n    /**\n     * @api private\n     */\n\n    AWS.CredentialProviderChain.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n      this.prototype.resolvePromise = AWS.util.promisifyMethod('resolve', PromiseDependency);\n    };\n    /**\n     * @api private\n     */\n\n\n    AWS.CredentialProviderChain.deletePromisesFromClass = function deletePromisesFromClass() {\n      delete this.prototype.resolvePromise;\n    };\n\n    AWS.util.addPromises(AWS.CredentialProviderChain);\n  }, {\n    \"../core\": 18\n  }],\n  23: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    var STS = require('../../clients/sts');\n    /**\n     * Represents credentials retrieved from STS SAML support.\n     *\n     * By default this provider gets credentials using the\n     * {AWS.STS.assumeRoleWithSAML} service operation. This operation\n     * requires a `RoleArn` containing the ARN of the IAM trust policy for the\n     * application for which credentials will be given, as well as a `PrincipalArn`\n     * representing the ARN for the SAML identity provider. In addition, the\n     * `SAMLAssertion` must be set to the token provided by the identity\n     * provider. See {constructor} for an example on creating a credentials\n     * object with proper `RoleArn`, `PrincipalArn`, and `SAMLAssertion` values.\n     *\n     * ## Refreshing Credentials from Identity Service\n     *\n     * In addition to AWS credentials expiring after a given amount of time, the\n     * login token from the identity provider will also expire. Once this token\n     * expires, it will not be usable to refresh AWS credentials, and another\n     * token will be needed. The SDK does not manage refreshing of the token value,\n     * but this can be done through a \"refresh token\" supported by most identity\n     * providers. Consult the documentation for the identity provider for refreshing\n     * tokens. Once the refreshed token is acquired, you should make sure to update\n     * this new token in the credentials object's {params} property. The following\n     * code will update the SAMLAssertion, assuming you have retrieved an updated\n     * token from the identity provider:\n     *\n     * ```javascript\n     * AWS.config.credentials.params.SAMLAssertion = updatedToken;\n     * ```\n     *\n     * Future calls to `credentials.refresh()` will now use the new token.\n     *\n     * @!attribute params\n     *   @return [map] the map of params passed to\n     *     {AWS.STS.assumeRoleWithSAML}. To update the token, set the\n     *     `params.SAMLAssertion` property.\n     */\n\n\n    AWS.SAMLCredentials = AWS.util.inherit(AWS.Credentials, {\n      /**\n       * Creates a new credentials object.\n       * @param (see AWS.STS.assumeRoleWithSAML)\n       * @example Creating a new credentials object\n       *   AWS.config.credentials = new AWS.SAMLCredentials({\n       *     RoleArn: 'arn:aws:iam::1234567890:role/SAMLRole',\n       *     PrincipalArn: 'arn:aws:iam::1234567890:role/SAMLPrincipal',\n       *     SAMLAssertion: 'base64-token', // base64-encoded token from IdP\n       *   });\n       * @see AWS.STS.assumeRoleWithSAML\n       */\n      constructor: function SAMLCredentials(params) {\n        AWS.Credentials.call(this);\n        this.expired = true;\n        this.params = params;\n      },\n\n      /**\n       * Refreshes credentials using {AWS.STS.assumeRoleWithSAML}\n       *\n       * @callback callback function(err)\n       *   Called when the STS service responds (or fails). When\n       *   this callback is called with no error, it means that the credentials\n       *   information has been loaded into the object (as the `accessKeyId`,\n       *   `secretAccessKey`, and `sessionToken` properties).\n       *   @param err [Error] if an error occurred, this value will be filled\n       * @see get\n       */\n      refresh: function refresh(callback) {\n        this.coalesceRefresh(callback || AWS.util.fn.callback);\n      },\n\n      /**\n       * @api private\n       */\n      load: function load(callback) {\n        var self = this;\n        self.createClients();\n        self.service.assumeRoleWithSAML(function (err, data) {\n          if (!err) {\n            self.service.credentialsFrom(data, self);\n          }\n\n          callback(err);\n        });\n      },\n\n      /**\n       * @api private\n       */\n      createClients: function () {\n        this.service = this.service || new STS({\n          params: this.params\n        });\n      }\n    });\n  }, {\n    \"../../clients/sts\": 8,\n    \"../core\": 18\n  }],\n  24: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    var STS = require('../../clients/sts');\n    /**\n     * Represents temporary credentials retrieved from {AWS.STS}. Without any\n     * extra parameters, credentials will be fetched from the\n     * {AWS.STS.getSessionToken} operation. If an IAM role is provided, the\n     * {AWS.STS.assumeRole} operation will be used to fetch credentials for the\n     * role instead.\n     *\n     * @note AWS.TemporaryCredentials is deprecated, but remains available for\n     *   backwards compatibility. {AWS.ChainableTemporaryCredentials} is the\n     *   preferred class for temporary credentials.\n     *\n     * To setup temporary credentials, configure a set of master credentials\n     * using the standard credentials providers (environment, EC2 instance metadata,\n     * or from the filesystem), then set the global credentials to a new\n     * temporary credentials object:\n     *\n     * ```javascript\n     * // Note that environment credentials are loaded by default,\n     * // the following line is shown for clarity:\n     * AWS.config.credentials = new AWS.EnvironmentCredentials('AWS');\n     *\n     * // Now set temporary credentials seeded from the master credentials\n     * AWS.config.credentials = new AWS.TemporaryCredentials();\n     *\n     * // subsequent requests will now use temporary credentials from AWS STS.\n     * new AWS.S3().listBucket(function(err, data) { ... });\n     * ```\n     *\n     * @!attribute masterCredentials\n     *   @return [AWS.Credentials] the master (non-temporary) credentials used to\n     *     get and refresh temporary credentials from AWS STS.\n     * @note (see constructor)\n     */\n\n\n    AWS.TemporaryCredentials = AWS.util.inherit(AWS.Credentials, {\n      /**\n       * Creates a new temporary credentials object.\n       *\n       * @note In order to create temporary credentials, you first need to have\n       *   \"master\" credentials configured in {AWS.Config.credentials}. These\n       *   master credentials are necessary to retrieve the temporary credentials,\n       *   as well as refresh the credentials when they expire.\n       * @param params [map] a map of options that are passed to the\n       *   {AWS.STS.assumeRole} or {AWS.STS.getSessionToken} operations.\n       *   If a `RoleArn` parameter is passed in, credentials will be based on the\n       *   IAM role.\n       * @param masterCredentials [AWS.Credentials] the master (non-temporary) credentials\n       *  used to get and refresh temporary credentials from AWS STS.\n       * @example Creating a new credentials object for generic temporary credentials\n       *   AWS.config.credentials = new AWS.TemporaryCredentials();\n       * @example Creating a new credentials object for an IAM role\n       *   AWS.config.credentials = new AWS.TemporaryCredentials({\n       *     RoleArn: 'arn:aws:iam::1234567890:role/TemporaryCredentials',\n       *   });\n       * @see AWS.STS.assumeRole\n       * @see AWS.STS.getSessionToken\n       */\n      constructor: function TemporaryCredentials(params, masterCredentials) {\n        AWS.Credentials.call(this);\n        this.loadMasterCredentials(masterCredentials);\n        this.expired = true;\n        this.params = params || {};\n\n        if (this.params.RoleArn) {\n          this.params.RoleSessionName = this.params.RoleSessionName || 'temporary-credentials';\n        }\n      },\n\n      /**\n       * Refreshes credentials using {AWS.STS.assumeRole} or\n       * {AWS.STS.getSessionToken}, depending on whether an IAM role ARN was passed\n       * to the credentials {constructor}.\n       *\n       * @callback callback function(err)\n       *   Called when the STS service responds (or fails). When\n       *   this callback is called with no error, it means that the credentials\n       *   information has been loaded into the object (as the `accessKeyId`,\n       *   `secretAccessKey`, and `sessionToken` properties).\n       *   @param err [Error] if an error occurred, this value will be filled\n       * @see get\n       */\n      refresh: function refresh(callback) {\n        this.coalesceRefresh(callback || AWS.util.fn.callback);\n      },\n\n      /**\n       * @api private\n       */\n      load: function load(callback) {\n        var self = this;\n        self.createClients();\n        self.masterCredentials.get(function () {\n          self.service.config.credentials = self.masterCredentials;\n          var operation = self.params.RoleArn ? self.service.assumeRole : self.service.getSessionToken;\n          operation.call(self.service, function (err, data) {\n            if (!err) {\n              self.service.credentialsFrom(data, self);\n            }\n\n            callback(err);\n          });\n        });\n      },\n\n      /**\n       * @api private\n       */\n      loadMasterCredentials: function loadMasterCredentials(masterCredentials) {\n        this.masterCredentials = masterCredentials || AWS.config.credentials;\n\n        while (this.masterCredentials.masterCredentials) {\n          this.masterCredentials = this.masterCredentials.masterCredentials;\n        }\n\n        if (typeof this.masterCredentials.get !== 'function') {\n          this.masterCredentials = new AWS.Credentials(this.masterCredentials);\n        }\n      },\n\n      /**\n       * @api private\n       */\n      createClients: function () {\n        this.service = this.service || new STS({\n          params: this.params\n        });\n      }\n    });\n  }, {\n    \"../../clients/sts\": 8,\n    \"../core\": 18\n  }],\n  25: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    var STS = require('../../clients/sts');\n    /**\n     * Represents credentials retrieved from STS Web Identity Federation support.\n     *\n     * By default this provider gets credentials using the\n     * {AWS.STS.assumeRoleWithWebIdentity} service operation. This operation\n     * requires a `RoleArn` containing the ARN of the IAM trust policy for the\n     * application for which credentials will be given. In addition, the\n     * `WebIdentityToken` must be set to the token provided by the identity\n     * provider. See {constructor} for an example on creating a credentials\n     * object with proper `RoleArn` and `WebIdentityToken` values.\n     *\n     * ## Refreshing Credentials from Identity Service\n     *\n     * In addition to AWS credentials expiring after a given amount of time, the\n     * login token from the identity provider will also expire. Once this token\n     * expires, it will not be usable to refresh AWS credentials, and another\n     * token will be needed. The SDK does not manage refreshing of the token value,\n     * but this can be done through a \"refresh token\" supported by most identity\n     * providers. Consult the documentation for the identity provider for refreshing\n     * tokens. Once the refreshed token is acquired, you should make sure to update\n     * this new token in the credentials object's {params} property. The following\n     * code will update the WebIdentityToken, assuming you have retrieved an updated\n     * token from the identity provider:\n     *\n     * ```javascript\n     * AWS.config.credentials.params.WebIdentityToken = updatedToken;\n     * ```\n     *\n     * Future calls to `credentials.refresh()` will now use the new token.\n     *\n     * @!attribute params\n     *   @return [map] the map of params passed to\n     *     {AWS.STS.assumeRoleWithWebIdentity}. To update the token, set the\n     *     `params.WebIdentityToken` property.\n     * @!attribute data\n     *   @return [map] the raw data response from the call to\n     *     {AWS.STS.assumeRoleWithWebIdentity}. Use this if you want to get\n     *     access to other properties from the response.\n     */\n\n\n    AWS.WebIdentityCredentials = AWS.util.inherit(AWS.Credentials, {\n      /**\n       * Creates a new credentials object.\n       * @param (see AWS.STS.assumeRoleWithWebIdentity)\n       * @example Creating a new credentials object\n       *   AWS.config.credentials = new AWS.WebIdentityCredentials({\n       *     RoleArn: 'arn:aws:iam::1234567890:role/WebIdentity',\n       *     WebIdentityToken: 'ABCDEFGHIJKLMNOP', // token from identity service\n       *     RoleSessionName: 'web' // optional name, defaults to web-identity\n       *   }, {\n       *     // optionally provide configuration to apply to the underlying AWS.STS service client\n       *     // if configuration is not provided, then configuration will be pulled from AWS.config\n       *\n       *     // specify timeout options\n       *     httpOptions: {\n       *       timeout: 100\n       *     }\n       *   });\n       * @see AWS.STS.assumeRoleWithWebIdentity\n       * @see AWS.Config\n       */\n      constructor: function WebIdentityCredentials(params, clientConfig) {\n        AWS.Credentials.call(this);\n        this.expired = true;\n        this.params = params;\n        this.params.RoleSessionName = this.params.RoleSessionName || 'web-identity';\n        this.data = null;\n        this._clientConfig = AWS.util.copy(clientConfig || {});\n      },\n\n      /**\n       * Refreshes credentials using {AWS.STS.assumeRoleWithWebIdentity}\n       *\n       * @callback callback function(err)\n       *   Called when the STS service responds (or fails). When\n       *   this callback is called with no error, it means that the credentials\n       *   information has been loaded into the object (as the `accessKeyId`,\n       *   `secretAccessKey`, and `sessionToken` properties).\n       *   @param err [Error] if an error occurred, this value will be filled\n       * @see get\n       */\n      refresh: function refresh(callback) {\n        this.coalesceRefresh(callback || AWS.util.fn.callback);\n      },\n\n      /**\n       * @api private\n       */\n      load: function load(callback) {\n        var self = this;\n        self.createClients();\n        self.service.assumeRoleWithWebIdentity(function (err, data) {\n          self.data = null;\n\n          if (!err) {\n            self.data = data;\n            self.service.credentialsFrom(data, self);\n          }\n\n          callback(err);\n        });\n      },\n\n      /**\n       * @api private\n       */\n      createClients: function () {\n        if (!this.service) {\n          var stsConfig = AWS.util.merge({}, this._clientConfig);\n          stsConfig.params = this.params;\n          this.service = new STS(stsConfig);\n        }\n      }\n    });\n  }, {\n    \"../../clients/sts\": 8,\n    \"../core\": 18\n  }],\n  26: [function (require, module, exports) {\n    (function (process) {\n      var AWS = require('./core');\n\n      var util = require('./util');\n\n      var endpointDiscoveryEnabledEnvs = ['AWS_ENABLE_ENDPOINT_DISCOVERY', 'AWS_ENDPOINT_DISCOVERY_ENABLED'];\n      /**\n       * Generate key (except resources and operation part) to index the endpoints in the cache\n       * If input shape has endpointdiscoveryid trait then use\n       *   accessKey + operation + resources + region + service as cache key\n       * If input shape doesn't have endpointdiscoveryid trait then use\n       *   accessKey + region + service as cache key\n       * @return [map<String,String>] object with keys to index endpoints.\n       * @api private\n       */\n\n      function getCacheKey(request) {\n        var service = request.service;\n        var api = service.api || {};\n        var operations = api.operations;\n        var identifiers = {};\n\n        if (service.config.region) {\n          identifiers.region = service.config.region;\n        }\n\n        if (api.serviceId) {\n          identifiers.serviceId = api.serviceId;\n        }\n\n        if (service.config.credentials.accessKeyId) {\n          identifiers.accessKeyId = service.config.credentials.accessKeyId;\n        }\n\n        return identifiers;\n      }\n      /**\n       * Recursive helper for marshallCustomIdentifiers().\n       * Looks for required string input members that have 'endpointdiscoveryid' trait.\n       * @api private\n       */\n\n\n      function marshallCustomIdentifiersHelper(result, params, shape) {\n        if (!shape || params === undefined || params === null) return;\n\n        if (shape.type === 'structure' && shape.required && shape.required.length > 0) {\n          util.arrayEach(shape.required, function (name) {\n            var memberShape = shape.members[name];\n\n            if (memberShape.endpointDiscoveryId === true) {\n              var locationName = memberShape.isLocationName ? memberShape.name : name;\n              result[locationName] = String(params[name]);\n            } else {\n              marshallCustomIdentifiersHelper(result, params[name], memberShape);\n            }\n          });\n        }\n      }\n      /**\n       * Get custom identifiers for cache key.\n       * Identifies custom identifiers by checking each shape's `endpointDiscoveryId` trait.\n       * @param [object] request object\n       * @param [object] input shape of the given operation's api\n       * @api private\n       */\n\n\n      function marshallCustomIdentifiers(request, shape) {\n        var identifiers = {};\n        marshallCustomIdentifiersHelper(identifiers, request.params, shape);\n        return identifiers;\n      }\n      /**\n       * Call endpoint discovery operation when it's optional.\n       * When endpoint is available in cache then use the cached endpoints. If endpoints\n       * are unavailable then use regional endpoints and call endpoint discovery operation\n       * asynchronously. This is turned off by default.\n       * @param [object] request object\n       * @api private\n       */\n\n\n      function optionalDiscoverEndpoint(request) {\n        var service = request.service;\n        var api = service.api;\n        var operationModel = api.operations ? api.operations[request.operation] : undefined;\n        var inputShape = operationModel ? operationModel.input : undefined;\n        var identifiers = marshallCustomIdentifiers(request, inputShape);\n        var cacheKey = getCacheKey(request);\n\n        if (Object.keys(identifiers).length > 0) {\n          cacheKey = util.update(cacheKey, identifiers);\n          if (operationModel) cacheKey.operation = operationModel.name;\n        }\n\n        var endpoints = AWS.endpointCache.get(cacheKey);\n\n        if (endpoints && endpoints.length === 1 && endpoints[0].Address === '') {\n          //endpoint operation is being made but response not yet received\n          //or endpoint operation just failed in 1 minute\n          return;\n        } else if (endpoints && endpoints.length > 0) {\n          //found endpoint record from cache\n          request.httpRequest.updateEndpoint(endpoints[0].Address);\n        } else {\n          //endpoint record not in cache or outdated. make discovery operation\n          var endpointRequest = service.makeRequest(api.endpointOperation, {\n            Operation: operationModel.name,\n            Identifiers: identifiers\n          });\n          addApiVersionHeader(endpointRequest);\n          endpointRequest.removeListener('validate', AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n          endpointRequest.removeListener('retry', AWS.EventListeners.Core.RETRY_CHECK); //put in a placeholder for endpoints already requested, prevent\n          //too much in-flight calls\n\n          AWS.endpointCache.put(cacheKey, [{\n            Address: '',\n            CachePeriodInMinutes: 1\n          }]);\n          endpointRequest.send(function (err, data) {\n            if (data && data.Endpoints) {\n              AWS.endpointCache.put(cacheKey, data.Endpoints);\n            } else if (err) {\n              AWS.endpointCache.put(cacheKey, [{\n                Address: '',\n                CachePeriodInMinutes: 1 //not to make more endpoint operation in next 1 minute\n\n              }]);\n            }\n          });\n        }\n      }\n\n      var requestQueue = {};\n      /**\n       * Call endpoint discovery operation when it's required.\n       * When endpoint is available in cache then use cached ones. If endpoints are\n       * unavailable then SDK should call endpoint operation then use returned new\n       * endpoint for the api call. SDK will automatically attempt to do endpoint\n       * discovery. This is turned off by default\n       * @param [object] request object\n       * @api private\n       */\n\n      function requiredDiscoverEndpoint(request, done) {\n        var service = request.service;\n        var api = service.api;\n        var operationModel = api.operations ? api.operations[request.operation] : undefined;\n        var inputShape = operationModel ? operationModel.input : undefined;\n        var identifiers = marshallCustomIdentifiers(request, inputShape);\n        var cacheKey = getCacheKey(request);\n\n        if (Object.keys(identifiers).length > 0) {\n          cacheKey = util.update(cacheKey, identifiers);\n          if (operationModel) cacheKey.operation = operationModel.name;\n        }\n\n        var cacheKeyStr = AWS.EndpointCache.getKeyString(cacheKey);\n        var endpoints = AWS.endpointCache.get(cacheKeyStr); //endpoint cache also accepts string keys\n\n        if (endpoints && endpoints.length === 1 && endpoints[0].Address === '') {\n          //endpoint operation is being made but response not yet received\n          //push request object to a pending queue\n          if (!requestQueue[cacheKeyStr]) requestQueue[cacheKeyStr] = [];\n          requestQueue[cacheKeyStr].push({\n            request: request,\n            callback: done\n          });\n          return;\n        } else if (endpoints && endpoints.length > 0) {\n          request.httpRequest.updateEndpoint(endpoints[0].Address);\n          done();\n        } else {\n          var endpointRequest = service.makeRequest(api.endpointOperation, {\n            Operation: operationModel.name,\n            Identifiers: identifiers\n          });\n          endpointRequest.removeListener('validate', AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n          addApiVersionHeader(endpointRequest); //put in a placeholder for endpoints already requested, prevent\n          //too much in-flight calls\n\n          AWS.endpointCache.put(cacheKeyStr, [{\n            Address: '',\n            CachePeriodInMinutes: 60 //long-live cache\n\n          }]);\n          endpointRequest.send(function (err, data) {\n            if (err) {\n              var errorParams = {\n                code: 'EndpointDiscoveryException',\n                message: 'Request cannot be fulfilled without specifying an endpoint',\n                retryable: false\n              };\n              request.response.error = util.error(err, errorParams);\n              AWS.endpointCache.remove(cacheKey); //fail all the pending requests in batch\n\n              if (requestQueue[cacheKeyStr]) {\n                var pendingRequests = requestQueue[cacheKeyStr];\n                util.arrayEach(pendingRequests, function (requestContext) {\n                  requestContext.request.response.error = util.error(err, errorParams);\n                  requestContext.callback();\n                });\n                delete requestQueue[cacheKeyStr];\n              }\n            } else if (data) {\n              AWS.endpointCache.put(cacheKeyStr, data.Endpoints);\n              request.httpRequest.updateEndpoint(data.Endpoints[0].Address); //update the endpoint for all the pending requests in batch\n\n              if (requestQueue[cacheKeyStr]) {\n                var pendingRequests = requestQueue[cacheKeyStr];\n                util.arrayEach(pendingRequests, function (requestContext) {\n                  requestContext.request.httpRequest.updateEndpoint(data.Endpoints[0].Address);\n                  requestContext.callback();\n                });\n                delete requestQueue[cacheKeyStr];\n              }\n            }\n\n            done();\n          });\n        }\n      }\n      /**\n       * add api version header to endpoint operation\n       * @api private\n       */\n\n\n      function addApiVersionHeader(endpointRequest) {\n        var api = endpointRequest.service.api;\n        var apiVersion = api.apiVersion;\n\n        if (apiVersion && !endpointRequest.httpRequest.headers['x-amz-api-version']) {\n          endpointRequest.httpRequest.headers['x-amz-api-version'] = apiVersion;\n        }\n      }\n      /**\n       * If api call gets invalid endpoint exception, SDK should attempt to remove the invalid\n       * endpoint from cache.\n       * @api private\n       */\n\n\n      function invalidateCachedEndpoints(response) {\n        var error = response.error;\n        var httpResponse = response.httpResponse;\n\n        if (error && (error.code === 'InvalidEndpointException' || httpResponse.statusCode === 421)) {\n          var request = response.request;\n          var operations = request.service.api.operations || {};\n          var inputShape = operations[request.operation] ? operations[request.operation].input : undefined;\n          var identifiers = marshallCustomIdentifiers(request, inputShape);\n          var cacheKey = getCacheKey(request);\n\n          if (Object.keys(identifiers).length > 0) {\n            cacheKey = util.update(cacheKey, identifiers);\n            if (operations[request.operation]) cacheKey.operation = operations[request.operation].name;\n          }\n\n          AWS.endpointCache.remove(cacheKey);\n        }\n      }\n      /**\n       * If endpoint is explicitly configured, SDK should not do endpoint discovery in anytime.\n       * @param [object] client Service client object.\n       * @api private\n       */\n\n\n      function hasCustomEndpoint(client) {\n        //if set endpoint is set for specific client, enable endpoint discovery will raise an error.\n        if (client._originalConfig && client._originalConfig.endpoint && client._originalConfig.endpointDiscoveryEnabled === true) {\n          throw util.error(new Error(), {\n            code: 'ConfigurationException',\n            message: 'Custom endpoint is supplied; endpointDiscoveryEnabled must not be true.'\n          });\n        }\n\n        ;\n        var svcConfig = AWS.config[client.serviceIdentifier] || {};\n        return Boolean(AWS.config.endpoint || svcConfig.endpoint || client._originalConfig && client._originalConfig.endpoint);\n      }\n      /**\n       * @api private\n       */\n\n\n      function isFalsy(value) {\n        return ['false', '0'].indexOf(value) >= 0;\n      }\n      /**\n       * If endpoint discovery should perform for this request when endpoint discovery is optional.\n       * SDK performs config resolution in order like below:\n       * 1. If turned on client configuration(default to off) then turn on endpoint discovery.\n       * 2. If turned on in env AWS_ENABLE_ENDPOINT_DISCOVERY then turn on endpoint discovery.\n       * 3. If turned on in shared ini config file with key 'endpoint_discovery_enabled', then\n       *   turn on endpoint discovery.\n       * @param [object] request request object.\n       * @api private\n       */\n\n\n      function isEndpointDiscoveryApplicable(request) {\n        var service = request.service || {};\n        if (service.config.endpointDiscoveryEnabled === true) return true; //shared ini file is only available in Node\n        //not to check env in browser\n\n        if (util.isBrowser()) return false;\n\n        for (var i = 0; i < endpointDiscoveryEnabledEnvs.length; i++) {\n          var env = endpointDiscoveryEnabledEnvs[i];\n\n          if (Object.prototype.hasOwnProperty.call(process.env, env)) {\n            if (process.env[env] === '' || process.env[env] === undefined) {\n              throw util.error(new Error(), {\n                code: 'ConfigurationException',\n                message: 'environmental variable ' + env + ' cannot be set to nothing'\n              });\n            }\n\n            if (!isFalsy(process.env[env])) return true;\n          }\n        }\n\n        var configFile = {};\n\n        try {\n          configFile = AWS.util.iniLoader ? AWS.util.iniLoader.loadFrom({\n            isConfig: true,\n            filename: process.env[AWS.util.sharedConfigFileEnv]\n          }) : {};\n        } catch (e) {}\n\n        var sharedFileConfig = configFile[process.env.AWS_PROFILE || AWS.util.defaultProfile] || {};\n\n        if (Object.prototype.hasOwnProperty.call(sharedFileConfig, 'endpoint_discovery_enabled')) {\n          if (sharedFileConfig.endpoint_discovery_enabled === undefined) {\n            throw util.error(new Error(), {\n              code: 'ConfigurationException',\n              message: 'config file entry \\'endpoint_discovery_enabled\\' cannot be set to nothing'\n            });\n          }\n\n          if (!isFalsy(sharedFileConfig.endpoint_discovery_enabled)) return true;\n        }\n\n        return false;\n      }\n      /**\n       * attach endpoint discovery logic to request object\n       * @param [object] request\n       * @api private\n       */\n\n\n      function discoverEndpoint(request, done) {\n        var service = request.service || {};\n        if (hasCustomEndpoint(service) || request.isPresigned()) return done();\n        if (!isEndpointDiscoveryApplicable(request)) return done();\n        request.httpRequest.appendToUserAgent('endpoint-discovery');\n        var operations = service.api.operations || {};\n        var operationModel = operations[request.operation];\n        var isEndpointDiscoveryRequired = operationModel ? operationModel.endpointDiscoveryRequired : 'NULL';\n\n        switch (isEndpointDiscoveryRequired) {\n          case 'OPTIONAL':\n            optionalDiscoverEndpoint(request);\n            request.addNamedListener('INVALIDATE_CACHED_ENDPOINTS', 'extractError', invalidateCachedEndpoints);\n            done();\n            break;\n\n          case 'REQUIRED':\n            request.addNamedListener('INVALIDATE_CACHED_ENDPOINTS', 'extractError', invalidateCachedEndpoints);\n            requiredDiscoverEndpoint(request, done);\n            break;\n\n          case 'NULL':\n          default:\n            done();\n            break;\n        }\n      }\n\n      module.exports = {\n        discoverEndpoint: discoverEndpoint,\n        requiredDiscoverEndpoint: requiredDiscoverEndpoint,\n        optionalDiscoverEndpoint: optionalDiscoverEndpoint,\n        marshallCustomIdentifiers: marshallCustomIdentifiers,\n        getCacheKey: getCacheKey,\n        invalidateCachedEndpoint: invalidateCachedEndpoints\n      };\n    }).call(this, require('_process'));\n  }, {\n    \"./core\": 18,\n    \"./util\": 71,\n    \"_process\": 85\n  }],\n  27: [function (require, module, exports) {\n    var eventMessageChunker = require('../event-stream/event-message-chunker').eventMessageChunker;\n\n    var parseEvent = require('./parse-event').parseEvent;\n\n    function createEventStream(body, parser, model) {\n      var eventMessages = eventMessageChunker(body);\n      var events = [];\n\n      for (var i = 0; i < eventMessages.length; i++) {\n        events.push(parseEvent(parser, eventMessages[i], model));\n      }\n\n      return events;\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = {\n      createEventStream: createEventStream\n    };\n  }, {\n    \"../event-stream/event-message-chunker\": 28,\n    \"./parse-event\": 30\n  }],\n  28: [function (require, module, exports) {\n    /**\n     * Takes in a buffer of event messages and splits them into individual messages.\n     * @param {Buffer} buffer\n     * @api private\n     */\n    function eventMessageChunker(buffer) {\n      /** @type Buffer[] */\n      var messages = [];\n      var offset = 0;\n\n      while (offset < buffer.length) {\n        var totalLength = buffer.readInt32BE(offset); // create new buffer for individual message (shares memory with original)\n\n        var message = buffer.slice(offset, totalLength + offset); // increment offset to it starts at the next message\n\n        offset += totalLength;\n        messages.push(message);\n      }\n\n      return messages;\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = {\n      eventMessageChunker: eventMessageChunker\n    };\n  }, {}],\n  29: [function (require, module, exports) {\n    var util = require('../core').util;\n\n    var toBuffer = util.buffer.toBuffer;\n    /**\n     * A lossless representation of a signed, 64-bit integer. Instances of this\n     * class may be used in arithmetic expressions as if they were numeric\n     * primitives, but the binary representation will be preserved unchanged as the\n     * `bytes` property of the object. The bytes should be encoded as big-endian,\n     * two's complement integers.\n     * @param {Buffer} bytes\n     *\n     * @api private\n     */\n\n    function Int64(bytes) {\n      if (bytes.length !== 8) {\n        throw new Error('Int64 buffers must be exactly 8 bytes');\n      }\n\n      if (!util.Buffer.isBuffer(bytes)) bytes = toBuffer(bytes);\n      this.bytes = bytes;\n    }\n    /**\n     * @param {number} number\n     * @returns {Int64}\n     *\n     * @api private\n     */\n\n\n    Int64.fromNumber = function (number) {\n      if (number > 9223372036854775807 || number < -9223372036854775808) {\n        throw new Error(number + ' is too large (or, if negative, too small) to represent as an Int64');\n      }\n\n      var bytes = new Uint8Array(8);\n\n      for (var i = 7, remaining = Math.abs(Math.round(number)); i > -1 && remaining > 0; i--, remaining /= 256) {\n        bytes[i] = remaining;\n      }\n\n      if (number < 0) {\n        negate(bytes);\n      }\n\n      return new Int64(bytes);\n    };\n    /**\n     * @returns {number}\n     *\n     * @api private\n     */\n\n\n    Int64.prototype.valueOf = function () {\n      var bytes = this.bytes.slice(0);\n      var negative = bytes[0] & 128;\n\n      if (negative) {\n        negate(bytes);\n      }\n\n      return parseInt(bytes.toString('hex'), 16) * (negative ? -1 : 1);\n    };\n\n    Int64.prototype.toString = function () {\n      return String(this.valueOf());\n    };\n    /**\n     * @param {Buffer} bytes\n     *\n     * @api private\n     */\n\n\n    function negate(bytes) {\n      for (var i = 0; i < 8; i++) {\n        bytes[i] ^= 0xFF;\n      }\n\n      for (var i = 7; i > -1; i--) {\n        bytes[i]++;\n\n        if (bytes[i] !== 0) {\n          break;\n        }\n      }\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = {\n      Int64: Int64\n    };\n  }, {\n    \"../core\": 18\n  }],\n  30: [function (require, module, exports) {\n    var parseMessage = require('./parse-message').parseMessage;\n    /**\n     *\n     * @param {*} parser\n     * @param {Buffer} message\n     * @param {*} shape\n     * @api private\n     */\n\n\n    function parseEvent(parser, message, shape) {\n      var parsedMessage = parseMessage(message); // check if message is an event or error\n\n      var messageType = parsedMessage.headers[':message-type'];\n\n      if (messageType) {\n        if (messageType.value === 'error') {\n          throw parseError(parsedMessage);\n        } else if (messageType.value !== 'event') {\n          // not sure how to parse non-events/non-errors, ignore for now\n          return;\n        }\n      } // determine event type\n\n\n      var eventType = parsedMessage.headers[':event-type']; // check that the event type is modeled\n\n      var eventModel = shape.members[eventType.value];\n\n      if (!eventModel) {\n        return;\n      }\n\n      var result = {}; // check if an event payload exists\n\n      var eventPayloadMemberName = eventModel.eventPayloadMemberName;\n\n      if (eventPayloadMemberName) {\n        var payloadShape = eventModel.members[eventPayloadMemberName]; // if the shape is binary, return the byte array\n\n        if (payloadShape.type === 'binary') {\n          result[eventPayloadMemberName] = parsedMessage.body;\n        } else {\n          result[eventPayloadMemberName] = parser.parse(parsedMessage.body.toString(), payloadShape);\n        }\n      } // read event headers\n\n\n      var eventHeaderNames = eventModel.eventHeaderMemberNames;\n\n      for (var i = 0; i < eventHeaderNames.length; i++) {\n        var name = eventHeaderNames[i];\n\n        if (parsedMessage.headers[name]) {\n          // parse the header!\n          result[name] = eventModel.members[name].toType(parsedMessage.headers[name].value);\n        }\n      }\n\n      var output = {};\n      output[eventType.value] = result;\n      return output;\n    }\n\n    function parseError(message) {\n      var errorCode = message.headers[':error-code'];\n      var errorMessage = message.headers[':error-message'];\n      var error = new Error(errorMessage.value || errorMessage);\n      error.code = error.name = errorCode.value || errorCode;\n      return error;\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = {\n      parseEvent: parseEvent\n    };\n  }, {\n    \"./parse-message\": 31\n  }],\n  31: [function (require, module, exports) {\n    var Int64 = require('./int64').Int64;\n\n    var splitMessage = require('./split-message').splitMessage;\n\n    var BOOLEAN_TAG = 'boolean';\n    var BYTE_TAG = 'byte';\n    var SHORT_TAG = 'short';\n    var INT_TAG = 'integer';\n    var LONG_TAG = 'long';\n    var BINARY_TAG = 'binary';\n    var STRING_TAG = 'string';\n    var TIMESTAMP_TAG = 'timestamp';\n    var UUID_TAG = 'uuid';\n    /**\n     * @api private\n     *\n     * @param {Buffer} headers\n     */\n\n    function parseHeaders(headers) {\n      var out = {};\n      var position = 0;\n\n      while (position < headers.length) {\n        var nameLength = headers.readUInt8(position++);\n        var name = headers.slice(position, position + nameLength).toString();\n        position += nameLength;\n\n        switch (headers.readUInt8(position++)) {\n          case 0\n          /* boolTrue */\n          :\n            out[name] = {\n              type: BOOLEAN_TAG,\n              value: true\n            };\n            break;\n\n          case 1\n          /* boolFalse */\n          :\n            out[name] = {\n              type: BOOLEAN_TAG,\n              value: false\n            };\n            break;\n\n          case 2\n          /* byte */\n          :\n            out[name] = {\n              type: BYTE_TAG,\n              value: headers.readInt8(position++)\n            };\n            break;\n\n          case 3\n          /* short */\n          :\n            out[name] = {\n              type: SHORT_TAG,\n              value: headers.readInt16BE(position)\n            };\n            position += 2;\n            break;\n\n          case 4\n          /* integer */\n          :\n            out[name] = {\n              type: INT_TAG,\n              value: headers.readInt32BE(position)\n            };\n            position += 4;\n            break;\n\n          case 5\n          /* long */\n          :\n            out[name] = {\n              type: LONG_TAG,\n              value: new Int64(headers.slice(position, position + 8))\n            };\n            position += 8;\n            break;\n\n          case 6\n          /* byteArray */\n          :\n            var binaryLength = headers.readUInt16BE(position);\n            position += 2;\n            out[name] = {\n              type: BINARY_TAG,\n              value: headers.slice(position, position + binaryLength)\n            };\n            position += binaryLength;\n            break;\n\n          case 7\n          /* string */\n          :\n            var stringLength = headers.readUInt16BE(position);\n            position += 2;\n            out[name] = {\n              type: STRING_TAG,\n              value: headers.slice(position, position + stringLength).toString()\n            };\n            position += stringLength;\n            break;\n\n          case 8\n          /* timestamp */\n          :\n            out[name] = {\n              type: TIMESTAMP_TAG,\n              value: new Date(new Int64(headers.slice(position, position + 8)).valueOf())\n            };\n            position += 8;\n            break;\n\n          case 9\n          /* uuid */\n          :\n            var uuidChars = headers.slice(position, position + 16).toString('hex');\n            position += 16;\n            out[name] = {\n              type: UUID_TAG,\n              value: uuidChars.substr(0, 8) + '-' + uuidChars.substr(8, 4) + '-' + uuidChars.substr(12, 4) + '-' + uuidChars.substr(16, 4) + '-' + uuidChars.substr(20)\n            };\n            break;\n\n          default:\n            throw new Error('Unrecognized header type tag');\n        }\n      }\n\n      return out;\n    }\n\n    function parseMessage(message) {\n      var parsed = splitMessage(message);\n      return {\n        headers: parseHeaders(parsed.headers),\n        body: parsed.body\n      };\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = {\n      parseMessage: parseMessage\n    };\n  }, {\n    \"./int64\": 29,\n    \"./split-message\": 32\n  }],\n  32: [function (require, module, exports) {\n    var util = require('../core').util;\n\n    var toBuffer = util.buffer.toBuffer; // All prelude components are unsigned, 32-bit integers\n\n    var PRELUDE_MEMBER_LENGTH = 4; // The prelude consists of two components\n\n    var PRELUDE_LENGTH = PRELUDE_MEMBER_LENGTH * 2; // Checksums are always CRC32 hashes.\n\n    var CHECKSUM_LENGTH = 4; // Messages must include a full prelude, a prelude checksum, and a message checksum\n\n    var MINIMUM_MESSAGE_LENGTH = PRELUDE_LENGTH + CHECKSUM_LENGTH * 2;\n    /**\n     * @api private\n     *\n     * @param {Buffer} message\n     */\n\n    function splitMessage(message) {\n      if (!util.Buffer.isBuffer(message)) message = toBuffer(message);\n\n      if (message.length < MINIMUM_MESSAGE_LENGTH) {\n        throw new Error('Provided message too short to accommodate event stream message overhead');\n      }\n\n      if (message.length !== message.readUInt32BE(0)) {\n        throw new Error('Reported message length does not match received message length');\n      }\n\n      var expectedPreludeChecksum = message.readUInt32BE(PRELUDE_LENGTH);\n\n      if (expectedPreludeChecksum !== util.crypto.crc32(message.slice(0, PRELUDE_LENGTH))) {\n        throw new Error('The prelude checksum specified in the message (' + expectedPreludeChecksum + ') does not match the calculated CRC32 checksum.');\n      }\n\n      var expectedMessageChecksum = message.readUInt32BE(message.length - CHECKSUM_LENGTH);\n\n      if (expectedMessageChecksum !== util.crypto.crc32(message.slice(0, message.length - CHECKSUM_LENGTH))) {\n        throw new Error('The message checksum did not match the expected value of ' + expectedMessageChecksum);\n      }\n\n      var headersStart = PRELUDE_LENGTH + CHECKSUM_LENGTH;\n      var headersEnd = headersStart + message.readUInt32BE(PRELUDE_MEMBER_LENGTH);\n      return {\n        headers: message.slice(headersStart, headersEnd),\n        body: message.slice(headersEnd, message.length - CHECKSUM_LENGTH)\n      };\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = {\n      splitMessage: splitMessage\n    };\n  }, {\n    \"../core\": 18\n  }],\n  33: [function (require, module, exports) {\n    var AWS = require('./core');\n\n    var SequentialExecutor = require('./sequential_executor');\n\n    var DISCOVER_ENDPOINT = require('./discover_endpoint').discoverEndpoint;\n    /**\n     * The namespace used to register global event listeners for request building\n     * and sending.\n     */\n\n\n    AWS.EventListeners = {\n      /**\n       * @!attribute VALIDATE_CREDENTIALS\n       *   A request listener that validates whether the request is being\n       *   sent with credentials.\n       *   Handles the {AWS.Request~validate 'validate' Request event}\n       *   @example Sending a request without validating credentials\n       *     var listener = AWS.EventListeners.Core.VALIDATE_CREDENTIALS;\n       *     request.removeListener('validate', listener);\n       *   @readonly\n       *   @return [Function]\n       * @!attribute VALIDATE_REGION\n       *   A request listener that validates whether the region is set\n       *   for a request.\n       *   Handles the {AWS.Request~validate 'validate' Request event}\n       *   @example Sending a request without validating region configuration\n       *     var listener = AWS.EventListeners.Core.VALIDATE_REGION;\n       *     request.removeListener('validate', listener);\n       *   @readonly\n       *   @return [Function]\n       * @!attribute VALIDATE_PARAMETERS\n       *   A request listener that validates input parameters in a request.\n       *   Handles the {AWS.Request~validate 'validate' Request event}\n       *   @example Sending a request without validating parameters\n       *     var listener = AWS.EventListeners.Core.VALIDATE_PARAMETERS;\n       *     request.removeListener('validate', listener);\n       *   @example Disable parameter validation globally\n       *     AWS.EventListeners.Core.removeListener('validate',\n       *       AWS.EventListeners.Core.VALIDATE_REGION);\n       *   @readonly\n       *   @return [Function]\n       * @!attribute SEND\n       *   A request listener that initiates the HTTP connection for a\n       *   request being sent. Handles the {AWS.Request~send 'send' Request event}\n       *   @example Replacing the HTTP handler\n       *     var listener = AWS.EventListeners.Core.SEND;\n       *     request.removeListener('send', listener);\n       *     request.on('send', function(response) {\n       *       customHandler.send(response);\n       *     });\n       *   @return [Function]\n       *   @readonly\n       * @!attribute HTTP_DATA\n       *   A request listener that reads data from the HTTP connection in order\n       *   to build the response data.\n       *   Handles the {AWS.Request~httpData 'httpData' Request event}.\n       *   Remove this handler if you are overriding the 'httpData' event and\n       *   do not want extra data processing and buffering overhead.\n       *   @example Disabling default data processing\n       *     var listener = AWS.EventListeners.Core.HTTP_DATA;\n       *     request.removeListener('httpData', listener);\n       *   @return [Function]\n       *   @readonly\n       */\n      Core: {}\n      /* doc hack */\n\n    };\n    /**\n     * @api private\n     */\n\n    function getOperationAuthtype(req) {\n      if (!req.service.api.operations) {\n        return '';\n      }\n\n      var operation = req.service.api.operations[req.operation];\n      return operation ? operation.authtype : '';\n    }\n\n    AWS.EventListeners = {\n      Core: new SequentialExecutor().addNamedListeners(function (add, addAsync) {\n        addAsync('VALIDATE_CREDENTIALS', 'validate', function VALIDATE_CREDENTIALS(req, done) {\n          if (!req.service.api.signatureVersion && !req.service.config.signatureVersion) return done(); // none\n\n          req.service.config.getCredentials(function (err) {\n            if (err) {\n              req.response.error = AWS.util.error(err, {\n                code: 'CredentialsError',\n                message: 'Missing credentials in config'\n              });\n            }\n\n            done();\n          });\n        });\n        add('VALIDATE_REGION', 'validate', function VALIDATE_REGION(req) {\n          if (!req.service.config.region && !req.service.isGlobalEndpoint) {\n            req.response.error = AWS.util.error(new Error(), {\n              code: 'ConfigError',\n              message: 'Missing region in config'\n            });\n          }\n        });\n        add('BUILD_IDEMPOTENCY_TOKENS', 'validate', function BUILD_IDEMPOTENCY_TOKENS(req) {\n          if (!req.service.api.operations) {\n            return;\n          }\n\n          var operation = req.service.api.operations[req.operation];\n\n          if (!operation) {\n            return;\n          }\n\n          var idempotentMembers = operation.idempotentMembers;\n\n          if (!idempotentMembers.length) {\n            return;\n          } // creates a copy of params so user's param object isn't mutated\n\n\n          var params = AWS.util.copy(req.params);\n\n          for (var i = 0, iLen = idempotentMembers.length; i < iLen; i++) {\n            if (!params[idempotentMembers[i]]) {\n              // add the member\n              params[idempotentMembers[i]] = AWS.util.uuid.v4();\n            }\n          }\n\n          req.params = params;\n        });\n        add('VALIDATE_PARAMETERS', 'validate', function VALIDATE_PARAMETERS(req) {\n          if (!req.service.api.operations) {\n            return;\n          }\n\n          var rules = req.service.api.operations[req.operation].input;\n          var validation = req.service.config.paramValidation;\n          new AWS.ParamValidator(validation).validate(rules, req.params);\n        });\n        addAsync('COMPUTE_SHA256', 'afterBuild', function COMPUTE_SHA256(req, done) {\n          req.haltHandlersOnError();\n\n          if (!req.service.api.operations) {\n            return;\n          }\n\n          var operation = req.service.api.operations[req.operation];\n          var authtype = operation ? operation.authtype : '';\n          if (!req.service.api.signatureVersion && !authtype && !req.service.config.signatureVersion) return done(); // none\n\n          if (req.service.getSignerClass(req) === AWS.Signers.V4) {\n            var body = req.httpRequest.body || '';\n\n            if (authtype.indexOf('unsigned-body') >= 0) {\n              req.httpRequest.headers['X-Amz-Content-Sha256'] = 'UNSIGNED-PAYLOAD';\n              return done();\n            }\n\n            AWS.util.computeSha256(body, function (err, sha) {\n              if (err) {\n                done(err);\n              } else {\n                req.httpRequest.headers['X-Amz-Content-Sha256'] = sha;\n                done();\n              }\n            });\n          } else {\n            done();\n          }\n        });\n        add('SET_CONTENT_LENGTH', 'afterBuild', function SET_CONTENT_LENGTH(req) {\n          var authtype = getOperationAuthtype(req);\n          var payloadMember = AWS.util.getRequestPayloadShape(req);\n\n          if (req.httpRequest.headers['Content-Length'] === undefined) {\n            try {\n              var length = AWS.util.string.byteLength(req.httpRequest.body);\n              req.httpRequest.headers['Content-Length'] = length;\n            } catch (err) {\n              if (payloadMember && payloadMember.isStreaming) {\n                if (payloadMember.requiresLength) {\n                  //streaming payload requires length(s3, glacier)\n                  throw err;\n                } else if (authtype.indexOf('unsigned-body') >= 0) {\n                  //unbounded streaming payload(lex, mediastore)\n                  req.httpRequest.headers['Transfer-Encoding'] = 'chunked';\n                  return;\n                } else {\n                  throw err;\n                }\n              }\n\n              throw err;\n            }\n          }\n        });\n        add('SET_HTTP_HOST', 'afterBuild', function SET_HTTP_HOST(req) {\n          req.httpRequest.headers['Host'] = req.httpRequest.endpoint.host;\n        });\n        add('RESTART', 'restart', function RESTART() {\n          var err = this.response.error;\n          if (!err || !err.retryable) return;\n          this.httpRequest = new AWS.HttpRequest(this.service.endpoint, this.service.region);\n\n          if (this.response.retryCount < this.service.config.maxRetries) {\n            this.response.retryCount++;\n          } else {\n            this.response.error = null;\n          }\n        });\n        var addToHead = true;\n        addAsync('DISCOVER_ENDPOINT', 'sign', DISCOVER_ENDPOINT, addToHead);\n        addAsync('SIGN', 'sign', function SIGN(req, done) {\n          var service = req.service;\n          var operations = req.service.api.operations || {};\n          var operation = operations[req.operation];\n          var authtype = operation ? operation.authtype : '';\n          if (!service.api.signatureVersion && !authtype && !service.config.signatureVersion) return done(); // none\n\n          service.config.getCredentials(function (err, credentials) {\n            if (err) {\n              req.response.error = err;\n              return done();\n            }\n\n            try {\n              var date = service.getSkewCorrectedDate();\n              var SignerClass = service.getSignerClass(req);\n              var signer = new SignerClass(req.httpRequest, service.api.signingName || service.api.endpointPrefix, {\n                signatureCache: service.config.signatureCache,\n                operation: operation,\n                signatureVersion: service.api.signatureVersion\n              });\n              signer.setServiceClientId(service._clientId); // clear old authorization headers\n\n              delete req.httpRequest.headers['Authorization'];\n              delete req.httpRequest.headers['Date'];\n              delete req.httpRequest.headers['X-Amz-Date']; // add new authorization\n\n              signer.addAuthorization(credentials, date);\n              req.signedAt = date;\n            } catch (e) {\n              req.response.error = e;\n            }\n\n            done();\n          });\n        });\n        add('VALIDATE_RESPONSE', 'validateResponse', function VALIDATE_RESPONSE(resp) {\n          if (this.service.successfulResponse(resp, this)) {\n            resp.data = {};\n            resp.error = null;\n          } else {\n            resp.data = null;\n            resp.error = AWS.util.error(new Error(), {\n              code: 'UnknownError',\n              message: 'An unknown error occurred.'\n            });\n          }\n        });\n        addAsync('SEND', 'send', function SEND(resp, done) {\n          resp.httpResponse._abortCallback = done;\n          resp.error = null;\n          resp.data = null;\n\n          function callback(httpResp) {\n            resp.httpResponse.stream = httpResp;\n            var stream = resp.request.httpRequest.stream;\n            var service = resp.request.service;\n            var api = service.api;\n            var operationName = resp.request.operation;\n            var operation = api.operations[operationName] || {};\n            httpResp.on('headers', function onHeaders(statusCode, headers, statusMessage) {\n              resp.request.emit('httpHeaders', [statusCode, headers, resp, statusMessage]);\n\n              if (!resp.httpResponse.streaming) {\n                if (AWS.HttpClient.streamsApiVersion === 2) {\n                  // streams2 API check\n                  // if we detect event streams, we're going to have to\n                  // return the stream immediately\n                  if (operation.hasEventOutput && service.successfulResponse(resp)) {\n                    // skip reading the IncomingStream\n                    resp.request.emit('httpDone');\n                    done();\n                    return;\n                  }\n\n                  httpResp.on('readable', function onReadable() {\n                    var data = httpResp.read();\n\n                    if (data !== null) {\n                      resp.request.emit('httpData', [data, resp]);\n                    }\n                  });\n                } else {\n                  // legacy streams API\n                  httpResp.on('data', function onData(data) {\n                    resp.request.emit('httpData', [data, resp]);\n                  });\n                }\n              }\n            });\n            httpResp.on('end', function onEnd() {\n              if (!stream || !stream.didCallback) {\n                if (AWS.HttpClient.streamsApiVersion === 2 && operation.hasEventOutput && service.successfulResponse(resp)) {\n                  // don't concatenate response chunks when streaming event stream data when response is successful\n                  return;\n                }\n\n                resp.request.emit('httpDone');\n                done();\n              }\n            });\n          }\n\n          function progress(httpResp) {\n            httpResp.on('sendProgress', function onSendProgress(value) {\n              resp.request.emit('httpUploadProgress', [value, resp]);\n            });\n            httpResp.on('receiveProgress', function onReceiveProgress(value) {\n              resp.request.emit('httpDownloadProgress', [value, resp]);\n            });\n          }\n\n          function error(err) {\n            if (err.code !== 'RequestAbortedError') {\n              var errCode = err.code === 'TimeoutError' ? err.code : 'NetworkingError';\n              err = AWS.util.error(err, {\n                code: errCode,\n                region: resp.request.httpRequest.region,\n                hostname: resp.request.httpRequest.endpoint.hostname,\n                retryable: true\n              });\n            }\n\n            resp.error = err;\n            resp.request.emit('httpError', [resp.error, resp], function () {\n              done();\n            });\n          }\n\n          function executeSend() {\n            var http = AWS.HttpClient.getInstance();\n            var httpOptions = resp.request.service.config.httpOptions || {};\n\n            try {\n              var stream = http.handleRequest(resp.request.httpRequest, httpOptions, callback, error);\n              progress(stream);\n            } catch (err) {\n              error(err);\n            }\n          }\n\n          var timeDiff = (resp.request.service.getSkewCorrectedDate() - this.signedAt) / 1000;\n\n          if (timeDiff >= 60 * 10) {\n            // if we signed 10min ago, re-sign\n            this.emit('sign', [this], function (err) {\n              if (err) done(err);else executeSend();\n            });\n          } else {\n            executeSend();\n          }\n        });\n        add('HTTP_HEADERS', 'httpHeaders', function HTTP_HEADERS(statusCode, headers, resp, statusMessage) {\n          resp.httpResponse.statusCode = statusCode;\n          resp.httpResponse.statusMessage = statusMessage;\n          resp.httpResponse.headers = headers;\n          resp.httpResponse.body = AWS.util.buffer.toBuffer('');\n          resp.httpResponse.buffers = [];\n          resp.httpResponse.numBytes = 0;\n          var dateHeader = headers.date || headers.Date;\n          var service = resp.request.service;\n\n          if (dateHeader) {\n            var serverTime = Date.parse(dateHeader);\n\n            if (service.config.correctClockSkew && service.isClockSkewed(serverTime)) {\n              service.applyClockOffset(serverTime);\n            }\n          }\n        });\n        add('HTTP_DATA', 'httpData', function HTTP_DATA(chunk, resp) {\n          if (chunk) {\n            if (AWS.util.isNode()) {\n              resp.httpResponse.numBytes += chunk.length;\n              var total = resp.httpResponse.headers['content-length'];\n              var progress = {\n                loaded: resp.httpResponse.numBytes,\n                total: total\n              };\n              resp.request.emit('httpDownloadProgress', [progress, resp]);\n            }\n\n            resp.httpResponse.buffers.push(AWS.util.buffer.toBuffer(chunk));\n          }\n        });\n        add('HTTP_DONE', 'httpDone', function HTTP_DONE(resp) {\n          // convert buffers array into single buffer\n          if (resp.httpResponse.buffers && resp.httpResponse.buffers.length > 0) {\n            var body = AWS.util.buffer.concat(resp.httpResponse.buffers);\n            resp.httpResponse.body = body;\n          }\n\n          delete resp.httpResponse.numBytes;\n          delete resp.httpResponse.buffers;\n        });\n        add('FINALIZE_ERROR', 'retry', function FINALIZE_ERROR(resp) {\n          if (resp.httpResponse.statusCode) {\n            resp.error.statusCode = resp.httpResponse.statusCode;\n\n            if (resp.error.retryable === undefined) {\n              resp.error.retryable = this.service.retryableError(resp.error, this);\n            }\n          }\n        });\n        add('INVALIDATE_CREDENTIALS', 'retry', function INVALIDATE_CREDENTIALS(resp) {\n          if (!resp.error) return;\n\n          switch (resp.error.code) {\n            case 'RequestExpired': // EC2 only\n\n            case 'ExpiredTokenException':\n            case 'ExpiredToken':\n              resp.error.retryable = true;\n              resp.request.service.config.credentials.expired = true;\n          }\n        });\n        add('EXPIRED_SIGNATURE', 'retry', function EXPIRED_SIGNATURE(resp) {\n          var err = resp.error;\n          if (!err) return;\n\n          if (typeof err.code === 'string' && typeof err.message === 'string') {\n            if (err.code.match(/Signature/) && err.message.match(/expired/)) {\n              resp.error.retryable = true;\n            }\n          }\n        });\n        add('CLOCK_SKEWED', 'retry', function CLOCK_SKEWED(resp) {\n          if (!resp.error) return;\n\n          if (this.service.clockSkewError(resp.error) && this.service.config.correctClockSkew) {\n            resp.error.retryable = true;\n          }\n        });\n        add('REDIRECT', 'retry', function REDIRECT(resp) {\n          if (resp.error && resp.error.statusCode >= 300 && resp.error.statusCode < 400 && resp.httpResponse.headers['location']) {\n            this.httpRequest.endpoint = new AWS.Endpoint(resp.httpResponse.headers['location']);\n            this.httpRequest.headers['Host'] = this.httpRequest.endpoint.host;\n            resp.error.redirect = true;\n            resp.error.retryable = true;\n          }\n        });\n        add('RETRY_CHECK', 'retry', function RETRY_CHECK(resp) {\n          if (resp.error) {\n            if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n              resp.error.retryDelay = 0;\n            } else if (resp.retryCount < resp.maxRetries) {\n              resp.error.retryDelay = this.service.retryDelays(resp.retryCount) || 0;\n            }\n          }\n        });\n        addAsync('RESET_RETRY_STATE', 'afterRetry', function RESET_RETRY_STATE(resp, done) {\n          var delay,\n              willRetry = false;\n\n          if (resp.error) {\n            delay = resp.error.retryDelay || 0;\n\n            if (resp.error.retryable && resp.retryCount < resp.maxRetries) {\n              resp.retryCount++;\n              willRetry = true;\n            } else if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n              resp.redirectCount++;\n              willRetry = true;\n            }\n          }\n\n          if (willRetry) {\n            resp.error = null;\n            setTimeout(done, delay);\n          } else {\n            done();\n          }\n        });\n      }),\n      CorePost: new SequentialExecutor().addNamedListeners(function (add) {\n        add('EXTRACT_REQUEST_ID', 'extractData', AWS.util.extractRequestId);\n        add('EXTRACT_REQUEST_ID', 'extractError', AWS.util.extractRequestId);\n        add('ENOTFOUND_ERROR', 'httpError', function ENOTFOUND_ERROR(err) {\n          if (err.code === 'NetworkingError' && err.errno === 'ENOTFOUND') {\n            var message = 'Inaccessible host: `' + err.hostname + '\\'. This service may not be available in the `' + err.region + '\\' region.';\n            this.response.error = AWS.util.error(new Error(message), {\n              code: 'UnknownEndpoint',\n              region: err.region,\n              hostname: err.hostname,\n              retryable: true,\n              originalError: err\n            });\n          }\n        });\n      }),\n      Logger: new SequentialExecutor().addNamedListeners(function (add) {\n        add('LOG_REQUEST', 'complete', function LOG_REQUEST(resp) {\n          var req = resp.request;\n          var logger = req.service.config.logger;\n          if (!logger) return;\n\n          function filterSensitiveLog(inputShape, shape) {\n            if (!shape) {\n              return shape;\n            }\n\n            switch (inputShape.type) {\n              case 'structure':\n                var struct = {};\n                AWS.util.each(shape, function (subShapeName, subShape) {\n                  if (Object.prototype.hasOwnProperty.call(inputShape.members, subShapeName)) {\n                    struct[subShapeName] = filterSensitiveLog(inputShape.members[subShapeName], subShape);\n                  } else {\n                    struct[subShapeName] = subShape;\n                  }\n                });\n                return struct;\n\n              case 'list':\n                var list = [];\n                AWS.util.arrayEach(shape, function (subShape, index) {\n                  list.push(filterSensitiveLog(inputShape.member, subShape));\n                });\n                return list;\n\n              case 'map':\n                var map = {};\n                AWS.util.each(shape, function (key, value) {\n                  map[key] = filterSensitiveLog(inputShape.value, value);\n                });\n                return map;\n\n              default:\n                if (inputShape.isSensitive) {\n                  return '***SensitiveInformation***';\n                } else {\n                  return shape;\n                }\n\n            }\n          }\n\n          function buildMessage() {\n            var time = resp.request.service.getSkewCorrectedDate().getTime();\n            var delta = (time - req.startTime.getTime()) / 1000;\n            var ansi = logger.isTTY ? true : false;\n            var status = resp.httpResponse.statusCode;\n            var censoredParams = req.params;\n\n            if (req.service.api.operations && req.service.api.operations[req.operation] && req.service.api.operations[req.operation].input) {\n              var inputShape = req.service.api.operations[req.operation].input;\n              censoredParams = filterSensitiveLog(inputShape, req.params);\n            }\n\n            var params = require('util').inspect(censoredParams, true, null);\n\n            var message = '';\n            if (ansi) message += '\\x1B[33m';\n            message += '[AWS ' + req.service.serviceIdentifier + ' ' + status;\n            message += ' ' + delta.toString() + 's ' + resp.retryCount + ' retries]';\n            if (ansi) message += '\\x1B[0;1m';\n            message += ' ' + AWS.util.string.lowerFirst(req.operation);\n            message += '(' + params + ')';\n            if (ansi) message += '\\x1B[0m';\n            return message;\n          }\n\n          var line = buildMessage();\n\n          if (typeof logger.log === 'function') {\n            logger.log(line);\n          } else if (typeof logger.write === 'function') {\n            logger.write(line + '\\n');\n          }\n        });\n      }),\n      Json: new SequentialExecutor().addNamedListeners(function (add) {\n        var svc = require('./protocol/json');\n\n        add('BUILD', 'build', svc.buildRequest);\n        add('EXTRACT_DATA', 'extractData', svc.extractData);\n        add('EXTRACT_ERROR', 'extractError', svc.extractError);\n      }),\n      Rest: new SequentialExecutor().addNamedListeners(function (add) {\n        var svc = require('./protocol/rest');\n\n        add('BUILD', 'build', svc.buildRequest);\n        add('EXTRACT_DATA', 'extractData', svc.extractData);\n        add('EXTRACT_ERROR', 'extractError', svc.extractError);\n      }),\n      RestJson: new SequentialExecutor().addNamedListeners(function (add) {\n        var svc = require('./protocol/rest_json');\n\n        add('BUILD', 'build', svc.buildRequest);\n        add('EXTRACT_DATA', 'extractData', svc.extractData);\n        add('EXTRACT_ERROR', 'extractError', svc.extractError);\n      }),\n      RestXml: new SequentialExecutor().addNamedListeners(function (add) {\n        var svc = require('./protocol/rest_xml');\n\n        add('BUILD', 'build', svc.buildRequest);\n        add('EXTRACT_DATA', 'extractData', svc.extractData);\n        add('EXTRACT_ERROR', 'extractError', svc.extractError);\n      }),\n      Query: new SequentialExecutor().addNamedListeners(function (add) {\n        var svc = require('./protocol/query');\n\n        add('BUILD', 'build', svc.buildRequest);\n        add('EXTRACT_DATA', 'extractData', svc.extractData);\n        add('EXTRACT_ERROR', 'extractError', svc.extractError);\n      })\n    };\n  }, {\n    \"./core\": 18,\n    \"./discover_endpoint\": 26,\n    \"./protocol/json\": 46,\n    \"./protocol/query\": 47,\n    \"./protocol/rest\": 48,\n    \"./protocol/rest_json\": 49,\n    \"./protocol/rest_xml\": 50,\n    \"./sequential_executor\": 58,\n    \"util\": 97\n  }],\n  34: [function (require, module, exports) {\n    var AWS = require('./core');\n\n    var inherit = AWS.util.inherit;\n    /**\n     * The endpoint that a service will talk to, for example,\n     * `'https://ec2.ap-southeast-1.amazonaws.com'`. If\n     * you need to override an endpoint for a service, you can\n     * set the endpoint on a service by passing the endpoint\n     * object with the `endpoint` option key:\n     *\n     * ```javascript\n     * var ep = new AWS.Endpoint('awsproxy.example.com');\n     * var s3 = new AWS.S3({endpoint: ep});\n     * s3.service.endpoint.hostname == 'awsproxy.example.com'\n     * ```\n     *\n     * Note that if you do not specify a protocol, the protocol will\n     * be selected based on your current {AWS.config} configuration.\n     *\n     * @!attribute protocol\n     *   @return [String] the protocol (http or https) of the endpoint\n     *     URL\n     * @!attribute hostname\n     *   @return [String] the host portion of the endpoint, e.g.,\n     *     example.com\n     * @!attribute host\n     *   @return [String] the host portion of the endpoint including\n     *     the port, e.g., example.com:80\n     * @!attribute port\n     *   @return [Integer] the port of the endpoint\n     * @!attribute href\n     *   @return [String] the full URL of the endpoint\n     */\n\n    AWS.Endpoint = inherit({\n      /**\n       * @overload Endpoint(endpoint)\n       *   Constructs a new endpoint given an endpoint URL. If the\n       *   URL omits a protocol (http or https), the default protocol\n       *   set in the global {AWS.config} will be used.\n       *   @param endpoint [String] the URL to construct an endpoint from\n       */\n      constructor: function Endpoint(endpoint, config) {\n        AWS.util.hideProperties(this, ['slashes', 'auth', 'hash', 'search', 'query']);\n\n        if (typeof endpoint === 'undefined' || endpoint === null) {\n          throw new Error('Invalid endpoint: ' + endpoint);\n        } else if (typeof endpoint !== 'string') {\n          return AWS.util.copy(endpoint);\n        }\n\n        if (!endpoint.match(/^http/)) {\n          var useSSL = config && config.sslEnabled !== undefined ? config.sslEnabled : AWS.config.sslEnabled;\n          endpoint = (useSSL ? 'https' : 'http') + '://' + endpoint;\n        }\n\n        AWS.util.update(this, AWS.util.urlParse(endpoint)); // Ensure the port property is set as an integer\n\n        if (this.port) {\n          this.port = parseInt(this.port, 10);\n        } else {\n          this.port = this.protocol === 'https:' ? 443 : 80;\n        }\n      }\n    });\n    /**\n     * The low level HTTP request object, encapsulating all HTTP header\n     * and body data sent by a service request.\n     *\n     * @!attribute method\n     *   @return [String] the HTTP method of the request\n     * @!attribute path\n     *   @return [String] the path portion of the URI, e.g.,\n     *     \"/list/?start=5&num=10\"\n     * @!attribute headers\n     *   @return [map<String,String>]\n     *     a map of header keys and their respective values\n     * @!attribute body\n     *   @return [String] the request body payload\n     * @!attribute endpoint\n     *   @return [AWS.Endpoint] the endpoint for the request\n     * @!attribute region\n     *   @api private\n     *   @return [String] the region, for signing purposes only.\n     */\n\n    AWS.HttpRequest = inherit({\n      /**\n       * @api private\n       */\n      constructor: function HttpRequest(endpoint, region) {\n        endpoint = new AWS.Endpoint(endpoint);\n        this.method = 'POST';\n        this.path = endpoint.path || '/';\n        this.headers = {};\n        this.body = '';\n        this.endpoint = endpoint;\n        this.region = region;\n        this._userAgent = '';\n        this.setUserAgent();\n      },\n\n      /**\n       * @api private\n       */\n      setUserAgent: function setUserAgent() {\n        this._userAgent = this.headers[this.getUserAgentHeaderName()] = AWS.util.userAgent();\n      },\n      getUserAgentHeaderName: function getUserAgentHeaderName() {\n        var prefix = AWS.util.isBrowser() ? 'X-Amz-' : '';\n        return prefix + 'User-Agent';\n      },\n\n      /**\n       * @api private\n       */\n      appendToUserAgent: function appendToUserAgent(agentPartial) {\n        if (typeof agentPartial === 'string' && agentPartial) {\n          this._userAgent += ' ' + agentPartial;\n        }\n\n        this.headers[this.getUserAgentHeaderName()] = this._userAgent;\n      },\n\n      /**\n       * @api private\n       */\n      getUserAgent: function getUserAgent() {\n        return this._userAgent;\n      },\n\n      /**\n       * @return [String] the part of the {path} excluding the\n       *   query string\n       */\n      pathname: function pathname() {\n        return this.path.split('?', 1)[0];\n      },\n\n      /**\n       * @return [String] the query string portion of the {path}\n       */\n      search: function search() {\n        var query = this.path.split('?', 2)[1];\n\n        if (query) {\n          query = AWS.util.queryStringParse(query);\n          return AWS.util.queryParamsToString(query);\n        }\n\n        return '';\n      },\n\n      /**\n       * @api private\n       * update httpRequest endpoint with endpoint string\n       */\n      updateEndpoint: function updateEndpoint(endpointStr) {\n        var newEndpoint = new AWS.Endpoint(endpointStr);\n        this.endpoint = newEndpoint;\n        this.path = newEndpoint.path || '/';\n      }\n    });\n    /**\n     * The low level HTTP response object, encapsulating all HTTP header\n     * and body data returned from the request.\n     *\n     * @!attribute statusCode\n     *   @return [Integer] the HTTP status code of the response (e.g., 200, 404)\n     * @!attribute headers\n     *   @return [map<String,String>]\n     *      a map of response header keys and their respective values\n     * @!attribute body\n     *   @return [String] the response body payload\n     * @!attribute [r] streaming\n     *   @return [Boolean] whether this response is being streamed at a low-level.\n     *     Defaults to `false` (buffered reads). Do not modify this manually, use\n     *     {createUnbufferedStream} to convert the stream to unbuffered mode\n     *     instead.\n     */\n\n    AWS.HttpResponse = inherit({\n      /**\n       * @api private\n       */\n      constructor: function HttpResponse() {\n        this.statusCode = undefined;\n        this.headers = {};\n        this.body = undefined;\n        this.streaming = false;\n        this.stream = null;\n      },\n\n      /**\n       * Disables buffering on the HTTP response and returns the stream for reading.\n       * @return [Stream, XMLHttpRequest, null] the underlying stream object.\n       *   Use this object to directly read data off of the stream.\n       * @note This object is only available after the {AWS.Request~httpHeaders}\n       *   event has fired. This method must be called prior to\n       *   {AWS.Request~httpData}.\n       * @example Taking control of a stream\n       *   request.on('httpHeaders', function(statusCode, headers) {\n       *     if (statusCode < 300) {\n       *       if (headers.etag === 'xyz') {\n       *         // pipe the stream, disabling buffering\n       *         var stream = this.response.httpResponse.createUnbufferedStream();\n       *         stream.pipe(process.stdout);\n       *       } else { // abort this request and set a better error message\n       *         this.abort();\n       *         this.response.error = new Error('Invalid ETag');\n       *       }\n       *     }\n       *   }).send(console.log);\n       */\n      createUnbufferedStream: function createUnbufferedStream() {\n        this.streaming = true;\n        return this.stream;\n      }\n    });\n    AWS.HttpClient = inherit({});\n    /**\n     * @api private\n     */\n\n    AWS.HttpClient.getInstance = function getInstance() {\n      if (this.singleton === undefined) {\n        this.singleton = new this();\n      }\n\n      return this.singleton;\n    };\n  }, {\n    \"./core\": 18\n  }],\n  35: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    var EventEmitter = require('events').EventEmitter;\n\n    require('../http');\n    /**\n     * @api private\n     */\n\n\n    AWS.XHRClient = AWS.util.inherit({\n      handleRequest: function handleRequest(httpRequest, httpOptions, callback, errCallback) {\n        var self = this;\n        var endpoint = httpRequest.endpoint;\n        var emitter = new EventEmitter();\n        var href = endpoint.protocol + '//' + endpoint.hostname;\n\n        if (endpoint.port !== 80 && endpoint.port !== 443) {\n          href += ':' + endpoint.port;\n        }\n\n        href += httpRequest.path;\n        var xhr = new XMLHttpRequest(),\n            headersEmitted = false;\n        httpRequest.stream = xhr;\n        xhr.addEventListener('readystatechange', function () {\n          try {\n            if (xhr.status === 0) return; // 0 code is invalid\n          } catch (e) {\n            return;\n          }\n\n          if (this.readyState >= this.HEADERS_RECEIVED && !headersEmitted) {\n            emitter.statusCode = xhr.status;\n            emitter.headers = self.parseHeaders(xhr.getAllResponseHeaders());\n            emitter.emit('headers', emitter.statusCode, emitter.headers, xhr.statusText);\n            headersEmitted = true;\n          }\n\n          if (this.readyState === this.DONE) {\n            self.finishRequest(xhr, emitter);\n          }\n        }, false);\n        xhr.upload.addEventListener('progress', function (evt) {\n          emitter.emit('sendProgress', evt);\n        });\n        xhr.addEventListener('progress', function (evt) {\n          emitter.emit('receiveProgress', evt);\n        }, false);\n        xhr.addEventListener('timeout', function () {\n          errCallback(AWS.util.error(new Error('Timeout'), {\n            code: 'TimeoutError'\n          }));\n        }, false);\n        xhr.addEventListener('error', function () {\n          errCallback(AWS.util.error(new Error('Network Failure'), {\n            code: 'NetworkingError'\n          }));\n        }, false);\n        xhr.addEventListener('abort', function () {\n          errCallback(AWS.util.error(new Error('Request aborted'), {\n            code: 'RequestAbortedError'\n          }));\n        }, false);\n        callback(emitter);\n        xhr.open(httpRequest.method, href, httpOptions.xhrAsync !== false);\n        AWS.util.each(httpRequest.headers, function (key, value) {\n          if (key !== 'Content-Length' && key !== 'User-Agent' && key !== 'Host') {\n            xhr.setRequestHeader(key, value);\n          }\n        });\n\n        if (httpOptions.timeout && httpOptions.xhrAsync !== false) {\n          xhr.timeout = httpOptions.timeout;\n        }\n\n        if (httpOptions.xhrWithCredentials) {\n          xhr.withCredentials = true;\n        }\n\n        try {\n          xhr.responseType = 'arraybuffer';\n        } catch (e) {}\n\n        try {\n          if (httpRequest.body) {\n            xhr.send(httpRequest.body);\n          } else {\n            xhr.send();\n          }\n        } catch (err) {\n          if (httpRequest.body && typeof httpRequest.body.buffer === 'object') {\n            xhr.send(httpRequest.body.buffer); // send ArrayBuffer directly\n          } else {\n            throw err;\n          }\n        }\n\n        return emitter;\n      },\n      parseHeaders: function parseHeaders(rawHeaders) {\n        var headers = {};\n        AWS.util.arrayEach(rawHeaders.split(/\\r?\\n/), function (line) {\n          var key = line.split(':', 1)[0];\n          var value = line.substring(key.length + 2);\n          if (key.length > 0) headers[key.toLowerCase()] = value;\n        });\n        return headers;\n      },\n      finishRequest: function finishRequest(xhr, emitter) {\n        var buffer;\n\n        if (xhr.responseType === 'arraybuffer' && xhr.response) {\n          var ab = xhr.response;\n          buffer = new AWS.util.Buffer(ab.byteLength);\n          var view = new Uint8Array(ab);\n\n          for (var i = 0; i < buffer.length; ++i) {\n            buffer[i] = view[i];\n          }\n        }\n\n        try {\n          if (!buffer && typeof xhr.responseText === 'string') {\n            buffer = new AWS.util.Buffer(xhr.responseText);\n          }\n        } catch (e) {}\n\n        if (buffer) emitter.emit('data', buffer);\n        emitter.emit('end');\n      }\n    });\n    /**\n     * @api private\n     */\n\n    AWS.HttpClient.prototype = AWS.XHRClient.prototype;\n    /**\n     * @api private\n     */\n\n    AWS.HttpClient.streamsApiVersion = 1;\n  }, {\n    \"../core\": 18,\n    \"../http\": 34,\n    \"events\": 81\n  }],\n  36: [function (require, module, exports) {\n    var util = require('../util');\n\n    function JsonBuilder() {}\n\n    JsonBuilder.prototype.build = function (value, shape) {\n      return JSON.stringify(translate(value, shape));\n    };\n\n    function translate(value, shape) {\n      if (!shape || value === undefined || value === null) return undefined;\n\n      switch (shape.type) {\n        case 'structure':\n          return translateStructure(value, shape);\n\n        case 'map':\n          return translateMap(value, shape);\n\n        case 'list':\n          return translateList(value, shape);\n\n        default:\n          return translateScalar(value, shape);\n      }\n    }\n\n    function translateStructure(structure, shape) {\n      var struct = {};\n      util.each(structure, function (name, value) {\n        var memberShape = shape.members[name];\n\n        if (memberShape) {\n          if (memberShape.location !== 'body') return;\n          var locationName = memberShape.isLocationName ? memberShape.name : name;\n          var result = translate(value, memberShape);\n          if (result !== undefined) struct[locationName] = result;\n        }\n      });\n      return struct;\n    }\n\n    function translateList(list, shape) {\n      var out = [];\n      util.arrayEach(list, function (value) {\n        var result = translate(value, shape.member);\n        if (result !== undefined) out.push(result);\n      });\n      return out;\n    }\n\n    function translateMap(map, shape) {\n      var out = {};\n      util.each(map, function (key, value) {\n        var result = translate(value, shape.value);\n        if (result !== undefined) out[key] = result;\n      });\n      return out;\n    }\n\n    function translateScalar(value, shape) {\n      return shape.toWireFormat(value);\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = JsonBuilder;\n  }, {\n    \"../util\": 71\n  }],\n  37: [function (require, module, exports) {\n    var util = require('../util');\n\n    function JsonParser() {}\n\n    JsonParser.prototype.parse = function (value, shape) {\n      return translate(JSON.parse(value), shape);\n    };\n\n    function translate(value, shape) {\n      if (!shape || value === undefined) return undefined;\n\n      switch (shape.type) {\n        case 'structure':\n          return translateStructure(value, shape);\n\n        case 'map':\n          return translateMap(value, shape);\n\n        case 'list':\n          return translateList(value, shape);\n\n        default:\n          return translateScalar(value, shape);\n      }\n    }\n\n    function translateStructure(structure, shape) {\n      if (structure == null) return undefined;\n      var struct = {};\n      var shapeMembers = shape.members;\n      util.each(shapeMembers, function (name, memberShape) {\n        var locationName = memberShape.isLocationName ? memberShape.name : name;\n\n        if (Object.prototype.hasOwnProperty.call(structure, locationName)) {\n          var value = structure[locationName];\n          var result = translate(value, memberShape);\n          if (result !== undefined) struct[name] = result;\n        }\n      });\n      return struct;\n    }\n\n    function translateList(list, shape) {\n      if (list == null) return undefined;\n      var out = [];\n      util.arrayEach(list, function (value) {\n        var result = translate(value, shape.member);\n        if (result === undefined) out.push(null);else out.push(result);\n      });\n      return out;\n    }\n\n    function translateMap(map, shape) {\n      if (map == null) return undefined;\n      var out = {};\n      util.each(map, function (key, value) {\n        var result = translate(value, shape.value);\n        if (result === undefined) out[key] = null;else out[key] = result;\n      });\n      return out;\n    }\n\n    function translateScalar(value, shape) {\n      return shape.toType(value);\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = JsonParser;\n  }, {\n    \"../util\": 71\n  }],\n  38: [function (require, module, exports) {\n    var Collection = require('./collection');\n\n    var Operation = require('./operation');\n\n    var Shape = require('./shape');\n\n    var Paginator = require('./paginator');\n\n    var ResourceWaiter = require('./resource_waiter');\n\n    var util = require('../util');\n\n    var property = util.property;\n    var memoizedProperty = util.memoizedProperty;\n\n    function Api(api, options) {\n      var self = this;\n      api = api || {};\n      options = options || {};\n      options.api = this;\n      api.metadata = api.metadata || {};\n      property(this, 'isApi', true, false);\n      property(this, 'apiVersion', api.metadata.apiVersion);\n      property(this, 'endpointPrefix', api.metadata.endpointPrefix);\n      property(this, 'signingName', api.metadata.signingName);\n      property(this, 'globalEndpoint', api.metadata.globalEndpoint);\n      property(this, 'signatureVersion', api.metadata.signatureVersion);\n      property(this, 'jsonVersion', api.metadata.jsonVersion);\n      property(this, 'targetPrefix', api.metadata.targetPrefix);\n      property(this, 'protocol', api.metadata.protocol);\n      property(this, 'timestampFormat', api.metadata.timestampFormat);\n      property(this, 'xmlNamespaceUri', api.metadata.xmlNamespace);\n      property(this, 'abbreviation', api.metadata.serviceAbbreviation);\n      property(this, 'fullName', api.metadata.serviceFullName);\n      property(this, 'serviceId', api.metadata.serviceId);\n      memoizedProperty(this, 'className', function () {\n        var name = api.metadata.serviceAbbreviation || api.metadata.serviceFullName;\n        if (!name) return null;\n        name = name.replace(/^Amazon|AWS\\s*|\\(.*|\\s+|\\W+/g, '');\n        if (name === 'ElasticLoadBalancing') name = 'ELB';\n        return name;\n      });\n\n      function addEndpointOperation(name, operation) {\n        if (operation.endpointoperation === true) {\n          property(self, 'endpointOperation', util.string.lowerFirst(name));\n        }\n      }\n\n      property(this, 'operations', new Collection(api.operations, options, function (name, operation) {\n        return new Operation(name, operation, options);\n      }, util.string.lowerFirst, addEndpointOperation));\n      property(this, 'shapes', new Collection(api.shapes, options, function (name, shape) {\n        return Shape.create(shape, options);\n      }));\n      property(this, 'paginators', new Collection(api.paginators, options, function (name, paginator) {\n        return new Paginator(name, paginator, options);\n      }));\n      property(this, 'waiters', new Collection(api.waiters, options, function (name, waiter) {\n        return new ResourceWaiter(name, waiter, options);\n      }, util.string.lowerFirst));\n\n      if (options.documentation) {\n        property(this, 'documentation', api.documentation);\n        property(this, 'documentationUrl', api.documentationUrl);\n      }\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = Api;\n  }, {\n    \"../util\": 71,\n    \"./collection\": 39,\n    \"./operation\": 40,\n    \"./paginator\": 41,\n    \"./resource_waiter\": 42,\n    \"./shape\": 43\n  }],\n  39: [function (require, module, exports) {\n    var memoizedProperty = require('../util').memoizedProperty;\n\n    function memoize(name, value, factory, nameTr) {\n      memoizedProperty(this, nameTr(name), function () {\n        return factory(name, value);\n      });\n    }\n\n    function Collection(iterable, options, factory, nameTr, callback) {\n      nameTr = nameTr || String;\n      var self = this;\n\n      for (var id in iterable) {\n        if (Object.prototype.hasOwnProperty.call(iterable, id)) {\n          memoize.call(self, id, iterable[id], factory, nameTr);\n          if (callback) callback(id, iterable[id]);\n        }\n      }\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = Collection;\n  }, {\n    \"../util\": 71\n  }],\n  40: [function (require, module, exports) {\n    var Shape = require('./shape');\n\n    var util = require('../util');\n\n    var property = util.property;\n    var memoizedProperty = util.memoizedProperty;\n\n    function Operation(name, operation, options) {\n      var self = this;\n      options = options || {};\n      property(this, 'name', operation.name || name);\n      property(this, 'api', options.api, false);\n      operation.http = operation.http || {};\n      property(this, 'endpoint', operation.endpoint);\n      property(this, 'httpMethod', operation.http.method || 'POST');\n      property(this, 'httpPath', operation.http.requestUri || '/');\n      property(this, 'authtype', operation.authtype || '');\n      property(this, 'endpointDiscoveryRequired', operation.endpointdiscovery ? operation.endpointdiscovery.required ? 'REQUIRED' : 'OPTIONAL' : 'NULL');\n      memoizedProperty(this, 'input', function () {\n        if (!operation.input) {\n          return new Shape.create({\n            type: 'structure'\n          }, options);\n        }\n\n        return Shape.create(operation.input, options);\n      });\n      memoizedProperty(this, 'output', function () {\n        if (!operation.output) {\n          return new Shape.create({\n            type: 'structure'\n          }, options);\n        }\n\n        return Shape.create(operation.output, options);\n      });\n      memoizedProperty(this, 'errors', function () {\n        var list = [];\n        if (!operation.errors) return null;\n\n        for (var i = 0; i < operation.errors.length; i++) {\n          list.push(Shape.create(operation.errors[i], options));\n        }\n\n        return list;\n      });\n      memoizedProperty(this, 'paginator', function () {\n        return options.api.paginators[name];\n      });\n\n      if (options.documentation) {\n        property(this, 'documentation', operation.documentation);\n        property(this, 'documentationUrl', operation.documentationUrl);\n      } // idempotentMembers only tracks top-level input shapes\n\n\n      memoizedProperty(this, 'idempotentMembers', function () {\n        var idempotentMembers = [];\n        var input = self.input;\n        var members = input.members;\n\n        if (!input.members) {\n          return idempotentMembers;\n        }\n\n        for (var name in members) {\n          if (!members.hasOwnProperty(name)) {\n            continue;\n          }\n\n          if (members[name].isIdempotent === true) {\n            idempotentMembers.push(name);\n          }\n        }\n\n        return idempotentMembers;\n      });\n      memoizedProperty(this, 'hasEventOutput', function () {\n        var output = self.output;\n        return hasEventStream(output);\n      });\n    }\n\n    function hasEventStream(topLevelShape) {\n      var members = topLevelShape.members;\n      var payload = topLevelShape.payload;\n\n      if (!topLevelShape.members) {\n        return false;\n      }\n\n      if (payload) {\n        var payloadMember = members[payload];\n        return payloadMember.isEventStream;\n      } // check if any member is an event stream\n\n\n      for (var name in members) {\n        if (!members.hasOwnProperty(name)) {\n          if (members[name].isEventStream === true) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = Operation;\n  }, {\n    \"../util\": 71,\n    \"./shape\": 43\n  }],\n  41: [function (require, module, exports) {\n    var property = require('../util').property;\n\n    function Paginator(name, paginator) {\n      property(this, 'inputToken', paginator.input_token);\n      property(this, 'limitKey', paginator.limit_key);\n      property(this, 'moreResults', paginator.more_results);\n      property(this, 'outputToken', paginator.output_token);\n      property(this, 'resultKey', paginator.result_key);\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = Paginator;\n  }, {\n    \"../util\": 71\n  }],\n  42: [function (require, module, exports) {\n    var util = require('../util');\n\n    var property = util.property;\n\n    function ResourceWaiter(name, waiter, options) {\n      options = options || {};\n      property(this, 'name', name);\n      property(this, 'api', options.api, false);\n\n      if (waiter.operation) {\n        property(this, 'operation', util.string.lowerFirst(waiter.operation));\n      }\n\n      var self = this;\n      var keys = ['type', 'description', 'delay', 'maxAttempts', 'acceptors'];\n      keys.forEach(function (key) {\n        var value = waiter[key];\n\n        if (value) {\n          property(self, key, value);\n        }\n      });\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = ResourceWaiter;\n  }, {\n    \"../util\": 71\n  }],\n  43: [function (require, module, exports) {\n    var Collection = require('./collection');\n\n    var util = require('../util');\n\n    function property(obj, name, value) {\n      if (value !== null && value !== undefined) {\n        util.property.apply(this, arguments);\n      }\n    }\n\n    function memoizedProperty(obj, name) {\n      if (!obj.constructor.prototype[name]) {\n        util.memoizedProperty.apply(this, arguments);\n      }\n    }\n\n    function Shape(shape, options, memberName) {\n      options = options || {};\n      property(this, 'shape', shape.shape);\n      property(this, 'api', options.api, false);\n      property(this, 'type', shape.type);\n      property(this, 'enum', shape.enum);\n      property(this, 'min', shape.min);\n      property(this, 'max', shape.max);\n      property(this, 'pattern', shape.pattern);\n      property(this, 'location', shape.location || this.location || 'body');\n      property(this, 'name', this.name || shape.xmlName || shape.queryName || shape.locationName || memberName);\n      property(this, 'isStreaming', shape.streaming || this.isStreaming || false);\n      property(this, 'requiresLength', shape.requiresLength, false);\n      property(this, 'isComposite', shape.isComposite || false);\n      property(this, 'isShape', true, false);\n      property(this, 'isQueryName', Boolean(shape.queryName), false);\n      property(this, 'isLocationName', Boolean(shape.locationName), false);\n      property(this, 'isIdempotent', shape.idempotencyToken === true);\n      property(this, 'isJsonValue', shape.jsonvalue === true);\n      property(this, 'isSensitive', shape.sensitive === true || shape.prototype && shape.prototype.sensitive === true);\n      property(this, 'isEventStream', Boolean(shape.eventstream), false);\n      property(this, 'isEvent', Boolean(shape.event), false);\n      property(this, 'isEventPayload', Boolean(shape.eventpayload), false);\n      property(this, 'isEventHeader', Boolean(shape.eventheader), false);\n      property(this, 'isTimestampFormatSet', Boolean(shape.timestampFormat) || shape.prototype && shape.prototype.isTimestampFormatSet === true, false);\n      property(this, 'endpointDiscoveryId', Boolean(shape.endpointdiscoveryid), false);\n      property(this, 'hostLabel', Boolean(shape.hostLabel), false);\n\n      if (options.documentation) {\n        property(this, 'documentation', shape.documentation);\n        property(this, 'documentationUrl', shape.documentationUrl);\n      }\n\n      if (shape.xmlAttribute) {\n        property(this, 'isXmlAttribute', shape.xmlAttribute || false);\n      } // type conversion and parsing\n\n\n      property(this, 'defaultValue', null);\n\n      this.toWireFormat = function (value) {\n        if (value === null || value === undefined) return '';\n        return value;\n      };\n\n      this.toType = function (value) {\n        return value;\n      };\n    }\n    /**\n     * @api private\n     */\n\n\n    Shape.normalizedTypes = {\n      character: 'string',\n      double: 'float',\n      long: 'integer',\n      short: 'integer',\n      biginteger: 'integer',\n      bigdecimal: 'float',\n      blob: 'binary'\n    };\n    /**\n     * @api private\n     */\n\n    Shape.types = {\n      'structure': StructureShape,\n      'list': ListShape,\n      'map': MapShape,\n      'boolean': BooleanShape,\n      'timestamp': TimestampShape,\n      'float': FloatShape,\n      'integer': IntegerShape,\n      'string': StringShape,\n      'base64': Base64Shape,\n      'binary': BinaryShape\n    };\n\n    Shape.resolve = function resolve(shape, options) {\n      if (shape.shape) {\n        var refShape = options.api.shapes[shape.shape];\n\n        if (!refShape) {\n          throw new Error('Cannot find shape reference: ' + shape.shape);\n        }\n\n        return refShape;\n      } else {\n        return null;\n      }\n    };\n\n    Shape.create = function create(shape, options, memberName) {\n      if (shape.isShape) return shape;\n      var refShape = Shape.resolve(shape, options);\n\n      if (refShape) {\n        var filteredKeys = Object.keys(shape);\n\n        if (!options.documentation) {\n          filteredKeys = filteredKeys.filter(function (name) {\n            return !name.match(/documentation/);\n          });\n        } // create an inline shape with extra members\n\n\n        var InlineShape = function () {\n          refShape.constructor.call(this, shape, options, memberName);\n        };\n\n        InlineShape.prototype = refShape;\n        return new InlineShape();\n      } else {\n        // set type if not set\n        if (!shape.type) {\n          if (shape.members) shape.type = 'structure';else if (shape.member) shape.type = 'list';else if (shape.key) shape.type = 'map';else shape.type = 'string';\n        } // normalize types\n\n\n        var origType = shape.type;\n\n        if (Shape.normalizedTypes[shape.type]) {\n          shape.type = Shape.normalizedTypes[shape.type];\n        }\n\n        if (Shape.types[shape.type]) {\n          return new Shape.types[shape.type](shape, options, memberName);\n        } else {\n          throw new Error('Unrecognized shape type: ' + origType);\n        }\n      }\n    };\n\n    function CompositeShape(shape) {\n      Shape.apply(this, arguments);\n      property(this, 'isComposite', true);\n\n      if (shape.flattened) {\n        property(this, 'flattened', shape.flattened || false);\n      }\n    }\n\n    function StructureShape(shape, options) {\n      var self = this;\n      var requiredMap = null,\n          firstInit = !this.isShape;\n      CompositeShape.apply(this, arguments);\n\n      if (firstInit) {\n        property(this, 'defaultValue', function () {\n          return {};\n        });\n        property(this, 'members', {});\n        property(this, 'memberNames', []);\n        property(this, 'required', []);\n        property(this, 'isRequired', function () {\n          return false;\n        });\n      }\n\n      if (shape.members) {\n        property(this, 'members', new Collection(shape.members, options, function (name, member) {\n          return Shape.create(member, options, name);\n        }));\n        memoizedProperty(this, 'memberNames', function () {\n          return shape.xmlOrder || Object.keys(shape.members);\n        });\n\n        if (shape.event) {\n          memoizedProperty(this, 'eventPayloadMemberName', function () {\n            var members = self.members;\n            var memberNames = self.memberNames; // iterate over members to find ones that are event payloads\n\n            for (var i = 0, iLen = memberNames.length; i < iLen; i++) {\n              if (members[memberNames[i]].isEventPayload) {\n                return memberNames[i];\n              }\n            }\n          });\n          memoizedProperty(this, 'eventHeaderMemberNames', function () {\n            var members = self.members;\n            var memberNames = self.memberNames;\n            var eventHeaderMemberNames = []; // iterate over members to find ones that are event headers\n\n            for (var i = 0, iLen = memberNames.length; i < iLen; i++) {\n              if (members[memberNames[i]].isEventHeader) {\n                eventHeaderMemberNames.push(memberNames[i]);\n              }\n            }\n\n            return eventHeaderMemberNames;\n          });\n        }\n      }\n\n      if (shape.required) {\n        property(this, 'required', shape.required);\n        property(this, 'isRequired', function (name) {\n          if (!requiredMap) {\n            requiredMap = {};\n\n            for (var i = 0; i < shape.required.length; i++) {\n              requiredMap[shape.required[i]] = true;\n            }\n          }\n\n          return requiredMap[name];\n        }, false, true);\n      }\n\n      property(this, 'resultWrapper', shape.resultWrapper || null);\n\n      if (shape.payload) {\n        property(this, 'payload', shape.payload);\n      }\n\n      if (typeof shape.xmlNamespace === 'string') {\n        property(this, 'xmlNamespaceUri', shape.xmlNamespace);\n      } else if (typeof shape.xmlNamespace === 'object') {\n        property(this, 'xmlNamespacePrefix', shape.xmlNamespace.prefix);\n        property(this, 'xmlNamespaceUri', shape.xmlNamespace.uri);\n      }\n    }\n\n    function ListShape(shape, options) {\n      var self = this,\n          firstInit = !this.isShape;\n      CompositeShape.apply(this, arguments);\n\n      if (firstInit) {\n        property(this, 'defaultValue', function () {\n          return [];\n        });\n      }\n\n      if (shape.member) {\n        memoizedProperty(this, 'member', function () {\n          return Shape.create(shape.member, options);\n        });\n      }\n\n      if (this.flattened) {\n        var oldName = this.name;\n        memoizedProperty(this, 'name', function () {\n          return self.member.name || oldName;\n        });\n      }\n    }\n\n    function MapShape(shape, options) {\n      var firstInit = !this.isShape;\n      CompositeShape.apply(this, arguments);\n\n      if (firstInit) {\n        property(this, 'defaultValue', function () {\n          return {};\n        });\n        property(this, 'key', Shape.create({\n          type: 'string'\n        }, options));\n        property(this, 'value', Shape.create({\n          type: 'string'\n        }, options));\n      }\n\n      if (shape.key) {\n        memoizedProperty(this, 'key', function () {\n          return Shape.create(shape.key, options);\n        });\n      }\n\n      if (shape.value) {\n        memoizedProperty(this, 'value', function () {\n          return Shape.create(shape.value, options);\n        });\n      }\n    }\n\n    function TimestampShape(shape) {\n      var self = this;\n      Shape.apply(this, arguments);\n\n      if (shape.timestampFormat) {\n        property(this, 'timestampFormat', shape.timestampFormat);\n      } else if (self.isTimestampFormatSet && this.timestampFormat) {\n        property(this, 'timestampFormat', this.timestampFormat);\n      } else if (this.location === 'header') {\n        property(this, 'timestampFormat', 'rfc822');\n      } else if (this.location === 'querystring') {\n        property(this, 'timestampFormat', 'iso8601');\n      } else if (this.api) {\n        switch (this.api.protocol) {\n          case 'json':\n          case 'rest-json':\n            property(this, 'timestampFormat', 'unixTimestamp');\n            break;\n\n          case 'rest-xml':\n          case 'query':\n          case 'ec2':\n            property(this, 'timestampFormat', 'iso8601');\n            break;\n        }\n      }\n\n      this.toType = function (value) {\n        if (value === null || value === undefined) return null;\n        if (typeof value.toUTCString === 'function') return value;\n        return typeof value === 'string' || typeof value === 'number' ? util.date.parseTimestamp(value) : null;\n      };\n\n      this.toWireFormat = function (value) {\n        return util.date.format(value, self.timestampFormat);\n      };\n    }\n\n    function StringShape() {\n      Shape.apply(this, arguments);\n      var nullLessProtocols = ['rest-xml', 'query', 'ec2'];\n\n      this.toType = function (value) {\n        value = this.api && nullLessProtocols.indexOf(this.api.protocol) > -1 ? value || '' : value;\n\n        if (this.isJsonValue) {\n          return JSON.parse(value);\n        }\n\n        return value && typeof value.toString === 'function' ? value.toString() : value;\n      };\n\n      this.toWireFormat = function (value) {\n        return this.isJsonValue ? JSON.stringify(value) : value;\n      };\n    }\n\n    function FloatShape() {\n      Shape.apply(this, arguments);\n\n      this.toType = function (value) {\n        if (value === null || value === undefined) return null;\n        return parseFloat(value);\n      };\n\n      this.toWireFormat = this.toType;\n    }\n\n    function IntegerShape() {\n      Shape.apply(this, arguments);\n\n      this.toType = function (value) {\n        if (value === null || value === undefined) return null;\n        return parseInt(value, 10);\n      };\n\n      this.toWireFormat = this.toType;\n    }\n\n    function BinaryShape() {\n      Shape.apply(this, arguments);\n\n      this.toType = function (value) {\n        var buf = util.base64.decode(value);\n\n        if (this.isSensitive && util.isNode() && typeof util.Buffer.alloc === 'function') {\n          /* Node.js can create a Buffer that is not isolated.\n           * i.e. buf.byteLength !== buf.buffer.byteLength\n           * This means that the sensitive data is accessible to anyone with access to buf.buffer.\n           * If this is the node shared Buffer, then other code within this process _could_ find this secret.\n           * Copy sensitive data to an isolated Buffer and zero the sensitive data.\n           * While this is safe to do here, copying this code somewhere else may produce unexpected results.\n           */\n          var secureBuf = util.Buffer.alloc(buf.length, buf);\n          buf.fill(0);\n          buf = secureBuf;\n        }\n\n        return buf;\n      };\n\n      this.toWireFormat = util.base64.encode;\n    }\n\n    function Base64Shape() {\n      BinaryShape.apply(this, arguments);\n    }\n\n    function BooleanShape() {\n      Shape.apply(this, arguments);\n\n      this.toType = function (value) {\n        if (typeof value === 'boolean') return value;\n        if (value === null || value === undefined) return null;\n        return value === 'true';\n      };\n    }\n    /**\n     * @api private\n     */\n\n\n    Shape.shapes = {\n      StructureShape: StructureShape,\n      ListShape: ListShape,\n      MapShape: MapShape,\n      StringShape: StringShape,\n      BooleanShape: BooleanShape,\n      Base64Shape: Base64Shape\n    };\n    /**\n     * @api private\n     */\n\n    module.exports = Shape;\n  }, {\n    \"../util\": 71,\n    \"./collection\": 39\n  }],\n  44: [function (require, module, exports) {\n    var AWS = require('./core');\n    /**\n     * @api private\n     */\n\n\n    AWS.ParamValidator = AWS.util.inherit({\n      /**\n       * Create a new validator object.\n       *\n       * @param validation [Boolean|map] whether input parameters should be\n       *     validated against the operation description before sending the\n       *     request. Pass a map to enable any of the following specific\n       *     validation features:\n       *\n       *     * **min** [Boolean] &mdash; Validates that a value meets the min\n       *       constraint. This is enabled by default when paramValidation is set\n       *       to `true`.\n       *     * **max** [Boolean] &mdash; Validates that a value meets the max\n       *       constraint.\n       *     * **pattern** [Boolean] &mdash; Validates that a string value matches a\n       *       regular expression.\n       *     * **enum** [Boolean] &mdash; Validates that a string value matches one\n       *       of the allowable enum values.\n       */\n      constructor: function ParamValidator(validation) {\n        if (validation === true || validation === undefined) {\n          validation = {\n            'min': true\n          };\n        }\n\n        this.validation = validation;\n      },\n      validate: function validate(shape, params, context) {\n        this.errors = [];\n        this.validateMember(shape, params || {}, context || 'params');\n\n        if (this.errors.length > 1) {\n          var msg = this.errors.join('\\n* ');\n          msg = 'There were ' + this.errors.length + ' validation errors:\\n* ' + msg;\n          throw AWS.util.error(new Error(msg), {\n            code: 'MultipleValidationErrors',\n            errors: this.errors\n          });\n        } else if (this.errors.length === 1) {\n          throw this.errors[0];\n        } else {\n          return true;\n        }\n      },\n      fail: function fail(code, message) {\n        this.errors.push(AWS.util.error(new Error(message), {\n          code: code\n        }));\n      },\n      validateStructure: function validateStructure(shape, params, context) {\n        this.validateType(params, context, ['object'], 'structure');\n        var paramName;\n\n        for (var i = 0; shape.required && i < shape.required.length; i++) {\n          paramName = shape.required[i];\n          var value = params[paramName];\n\n          if (value === undefined || value === null) {\n            this.fail('MissingRequiredParameter', 'Missing required key \\'' + paramName + '\\' in ' + context);\n          }\n        } // validate hash members\n\n\n        for (paramName in params) {\n          if (!Object.prototype.hasOwnProperty.call(params, paramName)) continue;\n          var paramValue = params[paramName],\n              memberShape = shape.members[paramName];\n\n          if (memberShape !== undefined) {\n            var memberContext = [context, paramName].join('.');\n            this.validateMember(memberShape, paramValue, memberContext);\n          } else {\n            this.fail('UnexpectedParameter', 'Unexpected key \\'' + paramName + '\\' found in ' + context);\n          }\n        }\n\n        return true;\n      },\n      validateMember: function validateMember(shape, param, context) {\n        switch (shape.type) {\n          case 'structure':\n            return this.validateStructure(shape, param, context);\n\n          case 'list':\n            return this.validateList(shape, param, context);\n\n          case 'map':\n            return this.validateMap(shape, param, context);\n\n          default:\n            return this.validateScalar(shape, param, context);\n        }\n      },\n      validateList: function validateList(shape, params, context) {\n        if (this.validateType(params, context, [Array])) {\n          this.validateRange(shape, params.length, context, 'list member count'); // validate array members\n\n          for (var i = 0; i < params.length; i++) {\n            this.validateMember(shape.member, params[i], context + '[' + i + ']');\n          }\n        }\n      },\n      validateMap: function validateMap(shape, params, context) {\n        if (this.validateType(params, context, ['object'], 'map')) {\n          // Build up a count of map members to validate range traits.\n          var mapCount = 0;\n\n          for (var param in params) {\n            if (!Object.prototype.hasOwnProperty.call(params, param)) continue; // Validate any map key trait constraints\n\n            this.validateMember(shape.key, param, context + '[key=\\'' + param + '\\']');\n            this.validateMember(shape.value, params[param], context + '[\\'' + param + '\\']');\n            mapCount++;\n          }\n\n          this.validateRange(shape, mapCount, context, 'map member count');\n        }\n      },\n      validateScalar: function validateScalar(shape, value, context) {\n        switch (shape.type) {\n          case null:\n          case undefined:\n          case 'string':\n            return this.validateString(shape, value, context);\n\n          case 'base64':\n          case 'binary':\n            return this.validatePayload(value, context);\n\n          case 'integer':\n          case 'float':\n            return this.validateNumber(shape, value, context);\n\n          case 'boolean':\n            return this.validateType(value, context, ['boolean']);\n\n          case 'timestamp':\n            return this.validateType(value, context, [Date, /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$/, 'number'], 'Date object, ISO-8601 string, or a UNIX timestamp');\n\n          default:\n            return this.fail('UnkownType', 'Unhandled type ' + shape.type + ' for ' + context);\n        }\n      },\n      validateString: function validateString(shape, value, context) {\n        var validTypes = ['string'];\n\n        if (shape.isJsonValue) {\n          validTypes = validTypes.concat(['number', 'object', 'boolean']);\n        }\n\n        if (value !== null && this.validateType(value, context, validTypes)) {\n          this.validateEnum(shape, value, context);\n          this.validateRange(shape, value.length, context, 'string length');\n          this.validatePattern(shape, value, context);\n          this.validateUri(shape, value, context);\n        }\n      },\n      validateUri: function validateUri(shape, value, context) {\n        if (shape['location'] === 'uri') {\n          if (value.length === 0) {\n            this.fail('UriParameterError', 'Expected uri parameter to have length >= 1,' + ' but found \"' + value + '\" for ' + context);\n          }\n        }\n      },\n      validatePattern: function validatePattern(shape, value, context) {\n        if (this.validation['pattern'] && shape['pattern'] !== undefined) {\n          if (!new RegExp(shape['pattern']).test(value)) {\n            this.fail('PatternMatchError', 'Provided value \"' + value + '\" ' + 'does not match regex pattern /' + shape['pattern'] + '/ for ' + context);\n          }\n        }\n      },\n      validateRange: function validateRange(shape, value, context, descriptor) {\n        if (this.validation['min']) {\n          if (shape['min'] !== undefined && value < shape['min']) {\n            this.fail('MinRangeError', 'Expected ' + descriptor + ' >= ' + shape['min'] + ', but found ' + value + ' for ' + context);\n          }\n        }\n\n        if (this.validation['max']) {\n          if (shape['max'] !== undefined && value > shape['max']) {\n            this.fail('MaxRangeError', 'Expected ' + descriptor + ' <= ' + shape['max'] + ', but found ' + value + ' for ' + context);\n          }\n        }\n      },\n      validateEnum: function validateRange(shape, value, context) {\n        if (this.validation['enum'] && shape['enum'] !== undefined) {\n          // Fail if the string value is not present in the enum list\n          if (shape['enum'].indexOf(value) === -1) {\n            this.fail('EnumError', 'Found string value of ' + value + ', but ' + 'expected ' + shape['enum'].join('|') + ' for ' + context);\n          }\n        }\n      },\n      validateType: function validateType(value, context, acceptedTypes, type) {\n        // We will not log an error for null or undefined, but we will return\n        // false so that callers know that the expected type was not strictly met.\n        if (value === null || value === undefined) return false;\n        var foundInvalidType = false;\n\n        for (var i = 0; i < acceptedTypes.length; i++) {\n          if (typeof acceptedTypes[i] === 'string') {\n            if (typeof value === acceptedTypes[i]) return true;\n          } else if (acceptedTypes[i] instanceof RegExp) {\n            if ((value || '').toString().match(acceptedTypes[i])) return true;\n          } else {\n            if (value instanceof acceptedTypes[i]) return true;\n            if (AWS.util.isType(value, acceptedTypes[i])) return true;\n            if (!type && !foundInvalidType) acceptedTypes = acceptedTypes.slice();\n            acceptedTypes[i] = AWS.util.typeName(acceptedTypes[i]);\n          }\n\n          foundInvalidType = true;\n        }\n\n        var acceptedType = type;\n\n        if (!acceptedType) {\n          acceptedType = acceptedTypes.join(', ').replace(/,([^,]+)$/, ', or$1');\n        }\n\n        var vowel = acceptedType.match(/^[aeiou]/i) ? 'n' : '';\n        this.fail('InvalidParameterType', 'Expected ' + context + ' to be a' + vowel + ' ' + acceptedType);\n        return false;\n      },\n      validateNumber: function validateNumber(shape, value, context) {\n        if (value === null || value === undefined) return;\n\n        if (typeof value === 'string') {\n          var castedValue = parseFloat(value);\n          if (castedValue.toString() === value) value = castedValue;\n        }\n\n        if (this.validateType(value, context, ['number'])) {\n          this.validateRange(shape, value, context, 'numeric value');\n        }\n      },\n      validatePayload: function validatePayload(value, context) {\n        if (value === null || value === undefined) return;\n        if (typeof value === 'string') return;\n        if (value && typeof value.byteLength === 'number') return; // typed arrays\n\n        if (AWS.util.isNode()) {\n          // special check for buffer/stream in Node.js\n          var Stream = AWS.util.stream.Stream;\n          if (AWS.util.Buffer.isBuffer(value) || value instanceof Stream) return;\n        } else {\n          if (typeof Blob !== void 0 && value instanceof Blob) return;\n        }\n\n        var types = ['Buffer', 'Stream', 'File', 'Blob', 'ArrayBuffer', 'DataView'];\n\n        if (value) {\n          for (var i = 0; i < types.length; i++) {\n            if (AWS.util.isType(value, types[i])) return;\n            if (AWS.util.typeName(value.constructor) === types[i]) return;\n          }\n        }\n\n        this.fail('InvalidParameterType', 'Expected ' + context + ' to be a ' + 'string, Buffer, Stream, Blob, or typed array object');\n      }\n    });\n  }, {\n    \"./core\": 18\n  }],\n  45: [function (require, module, exports) {\n    var util = require('../util');\n\n    var AWS = require('../core');\n    /**\n     * Prepend prefix defined by API model to endpoint that's already\n     * constructed. This feature does not apply to operations using\n     * endpoint discovery and can be disabled.\n     * @api private\n     */\n\n\n    function populateHostPrefix(request) {\n      var enabled = request.service.config.hostPrefixEnabled;\n      if (!enabled) return request;\n      var operationModel = request.service.api.operations[request.operation]; //don't marshal host prefix when operation has endpoint discovery traits\n\n      if (hasEndpointDiscover(request)) return request;\n\n      if (operationModel.endpoint && operationModel.endpoint.hostPrefix) {\n        var hostPrefixNotation = operationModel.endpoint.hostPrefix;\n        var hostPrefix = expandHostPrefix(hostPrefixNotation, request.params, operationModel.input);\n        prependEndpointPrefix(request.httpRequest.endpoint, hostPrefix);\n        validateHostname(request.httpRequest.endpoint.hostname);\n      }\n\n      return request;\n    }\n    /**\n     * @api private\n     */\n\n\n    function hasEndpointDiscover(request) {\n      var api = request.service.api;\n      var operationModel = api.operations[request.operation];\n      var isEndpointOperation = api.endpointOperation && api.endpointOperation === util.string.lowerFirst(operationModel.name);\n      return operationModel.endpointDiscoveryRequired !== 'NULL' || isEndpointOperation === true;\n    }\n    /**\n     * @api private\n     */\n\n\n    function expandHostPrefix(hostPrefixNotation, params, shape) {\n      util.each(shape.members, function (name, member) {\n        if (member.hostLabel === true) {\n          if (typeof params[name] !== 'string' || params[name] === '') {\n            throw util.error(new Error(), {\n              message: 'Parameter ' + name + ' should be a non-empty string.',\n              code: 'InvalidParameter'\n            });\n          }\n\n          var regex = new RegExp('\\\\{' + name + '\\\\}', 'g');\n          hostPrefixNotation = hostPrefixNotation.replace(regex, params[name]);\n        }\n      });\n      return hostPrefixNotation;\n    }\n    /**\n     * @api private\n     */\n\n\n    function prependEndpointPrefix(endpoint, prefix) {\n      if (endpoint.host) {\n        endpoint.host = prefix + endpoint.host;\n      }\n\n      if (endpoint.hostname) {\n        endpoint.hostname = prefix + endpoint.hostname;\n      }\n    }\n    /**\n     * @api private\n     */\n\n\n    function validateHostname(hostname) {\n      var labels = hostname.split('.'); //Reference: https://tools.ietf.org/html/rfc1123#section-2\n\n      var hostPattern = /^[a-zA-Z0-9]{1}$|^[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9]$/;\n      util.arrayEach(labels, function (label) {\n        if (!label.length || label.length < 1 || label.length > 63) {\n          throw util.error(new Error(), {\n            code: 'ValidationError',\n            message: 'Hostname label length should be between 1 to 63 characters, inclusive.'\n          });\n        }\n\n        if (!hostPattern.test(label)) {\n          throw AWS.util.error(new Error(), {\n            code: 'ValidationError',\n            message: label + ' is not hostname compatible.'\n          });\n        }\n      });\n    }\n\n    module.exports = {\n      populateHostPrefix: populateHostPrefix\n    };\n  }, {\n    \"../core\": 18,\n    \"../util\": 71\n  }],\n  46: [function (require, module, exports) {\n    var util = require('../util');\n\n    var JsonBuilder = require('../json/builder');\n\n    var JsonParser = require('../json/parser');\n\n    var populateHostPrefix = require('./helpers').populateHostPrefix;\n\n    function buildRequest(req) {\n      var httpRequest = req.httpRequest;\n      var api = req.service.api;\n      var target = api.targetPrefix + '.' + api.operations[req.operation].name;\n      var version = api.jsonVersion || '1.0';\n      var input = api.operations[req.operation].input;\n      var builder = new JsonBuilder();\n      if (version === 1) version = '1.0';\n      httpRequest.body = builder.build(req.params || {}, input);\n      httpRequest.headers['Content-Type'] = 'application/x-amz-json-' + version;\n      httpRequest.headers['X-Amz-Target'] = target;\n      populateHostPrefix(req);\n    }\n\n    function extractError(resp) {\n      var error = {};\n      var httpResponse = resp.httpResponse;\n      error.code = httpResponse.headers['x-amzn-errortype'] || 'UnknownError';\n\n      if (typeof error.code === 'string') {\n        error.code = error.code.split(':')[0];\n      }\n\n      if (httpResponse.body.length > 0) {\n        try {\n          var e = JSON.parse(httpResponse.body.toString());\n\n          if (e.__type || e.code) {\n            error.code = (e.__type || e.code).split('#').pop();\n          }\n\n          if (error.code === 'RequestEntityTooLarge') {\n            error.message = 'Request body must be less than 1 MB';\n          } else {\n            error.message = e.message || e.Message || null;\n          }\n        } catch (e) {\n          error.statusCode = httpResponse.statusCode;\n          error.message = httpResponse.statusMessage;\n        }\n      } else {\n        error.statusCode = httpResponse.statusCode;\n        error.message = httpResponse.statusCode.toString();\n      }\n\n      resp.error = util.error(new Error(), error);\n    }\n\n    function extractData(resp) {\n      var body = resp.httpResponse.body.toString() || '{}';\n\n      if (resp.request.service.config.convertResponseTypes === false) {\n        resp.data = JSON.parse(body);\n      } else {\n        var operation = resp.request.service.api.operations[resp.request.operation];\n        var shape = operation.output || {};\n        var parser = new JsonParser();\n        resp.data = parser.parse(body, shape);\n      }\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = {\n      buildRequest: buildRequest,\n      extractError: extractError,\n      extractData: extractData\n    };\n  }, {\n    \"../json/builder\": 36,\n    \"../json/parser\": 37,\n    \"../util\": 71,\n    \"./helpers\": 45\n  }],\n  47: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    var util = require('../util');\n\n    var QueryParamSerializer = require('../query/query_param_serializer');\n\n    var Shape = require('../model/shape');\n\n    var populateHostPrefix = require('./helpers').populateHostPrefix;\n\n    function buildRequest(req) {\n      var operation = req.service.api.operations[req.operation];\n      var httpRequest = req.httpRequest;\n      httpRequest.headers['Content-Type'] = 'application/x-www-form-urlencoded; charset=utf-8';\n      httpRequest.params = {\n        Version: req.service.api.apiVersion,\n        Action: operation.name\n      }; // convert the request parameters into a list of query params,\n      // e.g. Deeply.NestedParam.0.Name=value\n\n      var builder = new QueryParamSerializer();\n      builder.serialize(req.params, operation.input, function (name, value) {\n        httpRequest.params[name] = value;\n      });\n      httpRequest.body = util.queryParamsToString(httpRequest.params);\n      populateHostPrefix(req);\n    }\n\n    function extractError(resp) {\n      var data,\n          body = resp.httpResponse.body.toString();\n\n      if (body.match('<UnknownOperationException')) {\n        data = {\n          Code: 'UnknownOperation',\n          Message: 'Unknown operation ' + resp.request.operation\n        };\n      } else {\n        try {\n          data = new AWS.XML.Parser().parse(body);\n        } catch (e) {\n          data = {\n            Code: resp.httpResponse.statusCode,\n            Message: resp.httpResponse.statusMessage\n          };\n        }\n      }\n\n      if (data.requestId && !resp.requestId) resp.requestId = data.requestId;\n      if (data.Errors) data = data.Errors;\n      if (data.Error) data = data.Error;\n\n      if (data.Code) {\n        resp.error = util.error(new Error(), {\n          code: data.Code,\n          message: data.Message\n        });\n      } else {\n        resp.error = util.error(new Error(), {\n          code: resp.httpResponse.statusCode,\n          message: null\n        });\n      }\n    }\n\n    function extractData(resp) {\n      var req = resp.request;\n      var operation = req.service.api.operations[req.operation];\n      var shape = operation.output || {};\n      var origRules = shape;\n\n      if (origRules.resultWrapper) {\n        var tmp = Shape.create({\n          type: 'structure'\n        });\n        tmp.members[origRules.resultWrapper] = shape;\n        tmp.memberNames = [origRules.resultWrapper];\n        util.property(shape, 'name', shape.resultWrapper);\n        shape = tmp;\n      }\n\n      var parser = new AWS.XML.Parser(); // TODO: Refactor XML Parser to parse RequestId from response.\n\n      if (shape && shape.members && !shape.members._XAMZRequestId) {\n        var requestIdShape = Shape.create({\n          type: 'string'\n        }, {\n          api: {\n            protocol: 'query'\n          }\n        }, 'requestId');\n        shape.members._XAMZRequestId = requestIdShape;\n      }\n\n      var data = parser.parse(resp.httpResponse.body.toString(), shape);\n      resp.requestId = data._XAMZRequestId || data.requestId;\n      if (data._XAMZRequestId) delete data._XAMZRequestId;\n\n      if (origRules.resultWrapper) {\n        if (data[origRules.resultWrapper]) {\n          util.update(data, data[origRules.resultWrapper]);\n          delete data[origRules.resultWrapper];\n        }\n      }\n\n      resp.data = data;\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = {\n      buildRequest: buildRequest,\n      extractError: extractError,\n      extractData: extractData\n    };\n  }, {\n    \"../core\": 18,\n    \"../model/shape\": 43,\n    \"../query/query_param_serializer\": 51,\n    \"../util\": 71,\n    \"./helpers\": 45\n  }],\n  48: [function (require, module, exports) {\n    var util = require('../util');\n\n    var populateHostPrefix = require('./helpers').populateHostPrefix;\n\n    function populateMethod(req) {\n      req.httpRequest.method = req.service.api.operations[req.operation].httpMethod;\n    }\n\n    function generateURI(endpointPath, operationPath, input, params) {\n      var uri = [endpointPath, operationPath].join('/');\n      uri = uri.replace(/\\/+/g, '/');\n      var queryString = {},\n          queryStringSet = false;\n      util.each(input.members, function (name, member) {\n        var paramValue = params[name];\n        if (paramValue === null || paramValue === undefined) return;\n\n        if (member.location === 'uri') {\n          var regex = new RegExp('\\\\{' + member.name + '(\\\\+)?\\\\}');\n          uri = uri.replace(regex, function (_, plus) {\n            var fn = plus ? util.uriEscapePath : util.uriEscape;\n            return fn(String(paramValue));\n          });\n        } else if (member.location === 'querystring') {\n          queryStringSet = true;\n\n          if (member.type === 'list') {\n            queryString[member.name] = paramValue.map(function (val) {\n              return util.uriEscape(member.member.toWireFormat(val).toString());\n            });\n          } else if (member.type === 'map') {\n            util.each(paramValue, function (key, value) {\n              if (Array.isArray(value)) {\n                queryString[key] = value.map(function (val) {\n                  return util.uriEscape(String(val));\n                });\n              } else {\n                queryString[key] = util.uriEscape(String(value));\n              }\n            });\n          } else {\n            queryString[member.name] = util.uriEscape(member.toWireFormat(paramValue).toString());\n          }\n        }\n      });\n\n      if (queryStringSet) {\n        uri += uri.indexOf('?') >= 0 ? '&' : '?';\n        var parts = [];\n        util.arrayEach(Object.keys(queryString).sort(), function (key) {\n          if (!Array.isArray(queryString[key])) {\n            queryString[key] = [queryString[key]];\n          }\n\n          for (var i = 0; i < queryString[key].length; i++) {\n            parts.push(util.uriEscape(String(key)) + '=' + queryString[key][i]);\n          }\n        });\n        uri += parts.join('&');\n      }\n\n      return uri;\n    }\n\n    function populateURI(req) {\n      var operation = req.service.api.operations[req.operation];\n      var input = operation.input;\n      var uri = generateURI(req.httpRequest.endpoint.path, operation.httpPath, input, req.params);\n      req.httpRequest.path = uri;\n    }\n\n    function populateHeaders(req) {\n      var operation = req.service.api.operations[req.operation];\n      util.each(operation.input.members, function (name, member) {\n        var value = req.params[name];\n        if (value === null || value === undefined) return;\n\n        if (member.location === 'headers' && member.type === 'map') {\n          util.each(value, function (key, memberValue) {\n            req.httpRequest.headers[member.name + key] = memberValue;\n          });\n        } else if (member.location === 'header') {\n          value = member.toWireFormat(value).toString();\n\n          if (member.isJsonValue) {\n            value = util.base64.encode(value);\n          }\n\n          req.httpRequest.headers[member.name] = value;\n        }\n      });\n    }\n\n    function buildRequest(req) {\n      populateMethod(req);\n      populateURI(req);\n      populateHeaders(req);\n      populateHostPrefix(req);\n    }\n\n    function extractError() {}\n\n    function extractData(resp) {\n      var req = resp.request;\n      var data = {};\n      var r = resp.httpResponse;\n      var operation = req.service.api.operations[req.operation];\n      var output = operation.output; // normalize headers names to lower-cased keys for matching\n\n      var headers = {};\n      util.each(r.headers, function (k, v) {\n        headers[k.toLowerCase()] = v;\n      });\n      util.each(output.members, function (name, member) {\n        var header = (member.name || name).toLowerCase();\n\n        if (member.location === 'headers' && member.type === 'map') {\n          data[name] = {};\n          var location = member.isLocationName ? member.name : '';\n          var pattern = new RegExp('^' + location + '(.+)', 'i');\n          util.each(r.headers, function (k, v) {\n            var result = k.match(pattern);\n\n            if (result !== null) {\n              data[name][result[1]] = v;\n            }\n          });\n        } else if (member.location === 'header') {\n          if (headers[header] !== undefined) {\n            var value = member.isJsonValue ? util.base64.decode(headers[header]) : headers[header];\n            data[name] = member.toType(value);\n          }\n        } else if (member.location === 'statusCode') {\n          data[name] = parseInt(r.statusCode, 10);\n        }\n      });\n      resp.data = data;\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = {\n      buildRequest: buildRequest,\n      extractError: extractError,\n      extractData: extractData,\n      generateURI: generateURI\n    };\n  }, {\n    \"../util\": 71,\n    \"./helpers\": 45\n  }],\n  49: [function (require, module, exports) {\n    var util = require('../util');\n\n    var Rest = require('./rest');\n\n    var Json = require('./json');\n\n    var JsonBuilder = require('../json/builder');\n\n    var JsonParser = require('../json/parser');\n\n    function populateBody(req) {\n      var builder = new JsonBuilder();\n      var input = req.service.api.operations[req.operation].input;\n\n      if (input.payload) {\n        var params = {};\n        var payloadShape = input.members[input.payload];\n        params = req.params[input.payload];\n        if (params === undefined) return;\n\n        if (payloadShape.type === 'structure') {\n          req.httpRequest.body = builder.build(params, payloadShape);\n          applyContentTypeHeader(req);\n        } else {\n          // non-JSON payload\n          req.httpRequest.body = params;\n\n          if (payloadShape.type === 'binary' || payloadShape.isStreaming) {\n            applyContentTypeHeader(req, true);\n          }\n        }\n      } else {\n        var body = builder.build(req.params, input);\n\n        if (body !== '{}' || req.httpRequest.method !== 'GET') {\n          //don't send empty body for GET method\n          req.httpRequest.body = body;\n        }\n\n        applyContentTypeHeader(req);\n      }\n    }\n\n    function applyContentTypeHeader(req, isBinary) {\n      var operation = req.service.api.operations[req.operation];\n      var input = operation.input;\n\n      if (!req.httpRequest.headers['Content-Type']) {\n        var type = isBinary ? 'binary/octet-stream' : 'application/json';\n        req.httpRequest.headers['Content-Type'] = type;\n      }\n    }\n\n    function buildRequest(req) {\n      Rest.buildRequest(req); // never send body payload on HEAD/DELETE\n\n      if (['HEAD', 'DELETE'].indexOf(req.httpRequest.method) < 0) {\n        populateBody(req);\n      }\n    }\n\n    function extractError(resp) {\n      Json.extractError(resp);\n    }\n\n    function extractData(resp) {\n      Rest.extractData(resp);\n      var req = resp.request;\n      var operation = req.service.api.operations[req.operation];\n      var rules = req.service.api.operations[req.operation].output || {};\n      var parser;\n      var hasEventOutput = operation.hasEventOutput;\n\n      if (rules.payload) {\n        var payloadMember = rules.members[rules.payload];\n        var body = resp.httpResponse.body;\n\n        if (payloadMember.isEventStream) {\n          parser = new JsonParser();\n          resp.data[payload] = util.createEventStream(AWS.HttpClient.streamsApiVersion === 2 ? resp.httpResponse.stream : body, parser, payloadMember);\n        } else if (payloadMember.type === 'structure' || payloadMember.type === 'list') {\n          var parser = new JsonParser();\n          resp.data[rules.payload] = parser.parse(body, payloadMember);\n        } else if (payloadMember.type === 'binary' || payloadMember.isStreaming) {\n          resp.data[rules.payload] = body;\n        } else {\n          resp.data[rules.payload] = payloadMember.toType(body);\n        }\n      } else {\n        var data = resp.data;\n        Json.extractData(resp);\n        resp.data = util.merge(data, resp.data);\n      }\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = {\n      buildRequest: buildRequest,\n      extractError: extractError,\n      extractData: extractData\n    };\n  }, {\n    \"../json/builder\": 36,\n    \"../json/parser\": 37,\n    \"../util\": 71,\n    \"./json\": 46,\n    \"./rest\": 48\n  }],\n  50: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    var util = require('../util');\n\n    var Rest = require('./rest');\n\n    function populateBody(req) {\n      var input = req.service.api.operations[req.operation].input;\n      var builder = new AWS.XML.Builder();\n      var params = req.params;\n      var payload = input.payload;\n\n      if (payload) {\n        var payloadMember = input.members[payload];\n        params = params[payload];\n        if (params === undefined) return;\n\n        if (payloadMember.type === 'structure') {\n          var rootElement = payloadMember.name;\n          req.httpRequest.body = builder.toXML(params, payloadMember, rootElement, true);\n        } else {\n          // non-xml payload\n          req.httpRequest.body = params;\n        }\n      } else {\n        req.httpRequest.body = builder.toXML(params, input, input.name || input.shape || util.string.upperFirst(req.operation) + 'Request');\n      }\n    }\n\n    function buildRequest(req) {\n      Rest.buildRequest(req); // never send body payload on GET/HEAD\n\n      if (['GET', 'HEAD'].indexOf(req.httpRequest.method) < 0) {\n        populateBody(req);\n      }\n    }\n\n    function extractError(resp) {\n      Rest.extractError(resp);\n      var data;\n\n      try {\n        data = new AWS.XML.Parser().parse(resp.httpResponse.body.toString());\n      } catch (e) {\n        data = {\n          Code: resp.httpResponse.statusCode,\n          Message: resp.httpResponse.statusMessage\n        };\n      }\n\n      if (data.Errors) data = data.Errors;\n      if (data.Error) data = data.Error;\n\n      if (data.Code) {\n        resp.error = util.error(new Error(), {\n          code: data.Code,\n          message: data.Message\n        });\n      } else {\n        resp.error = util.error(new Error(), {\n          code: resp.httpResponse.statusCode,\n          message: null\n        });\n      }\n    }\n\n    function extractData(resp) {\n      Rest.extractData(resp);\n      var parser;\n      var req = resp.request;\n      var body = resp.httpResponse.body;\n      var operation = req.service.api.operations[req.operation];\n      var output = operation.output;\n      var hasEventOutput = operation.hasEventOutput;\n      var payload = output.payload;\n\n      if (payload) {\n        var payloadMember = output.members[payload];\n\n        if (payloadMember.isEventStream) {\n          parser = new AWS.XML.Parser();\n          resp.data[payload] = util.createEventStream(AWS.HttpClient.streamsApiVersion === 2 ? resp.httpResponse.stream : resp.httpResponse.body, parser, payloadMember);\n        } else if (payloadMember.type === 'structure') {\n          parser = new AWS.XML.Parser();\n          resp.data[payload] = parser.parse(body.toString(), payloadMember);\n        } else if (payloadMember.type === 'binary' || payloadMember.isStreaming) {\n          resp.data[payload] = body;\n        } else {\n          resp.data[payload] = payloadMember.toType(body);\n        }\n      } else if (body.length > 0) {\n        parser = new AWS.XML.Parser();\n        var data = parser.parse(body.toString(), output);\n        util.update(resp.data, data);\n      }\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = {\n      buildRequest: buildRequest,\n      extractError: extractError,\n      extractData: extractData\n    };\n  }, {\n    \"../core\": 18,\n    \"../util\": 71,\n    \"./rest\": 48\n  }],\n  51: [function (require, module, exports) {\n    var util = require('../util');\n\n    function QueryParamSerializer() {}\n\n    QueryParamSerializer.prototype.serialize = function (params, shape, fn) {\n      serializeStructure('', params, shape, fn);\n    };\n\n    function ucfirst(shape) {\n      if (shape.isQueryName || shape.api.protocol !== 'ec2') {\n        return shape.name;\n      } else {\n        return shape.name[0].toUpperCase() + shape.name.substr(1);\n      }\n    }\n\n    function serializeStructure(prefix, struct, rules, fn) {\n      util.each(rules.members, function (name, member) {\n        var value = struct[name];\n        if (value === null || value === undefined) return;\n        var memberName = ucfirst(member);\n        memberName = prefix ? prefix + '.' + memberName : memberName;\n        serializeMember(memberName, value, member, fn);\n      });\n    }\n\n    function serializeMap(name, map, rules, fn) {\n      var i = 1;\n      util.each(map, function (key, value) {\n        var prefix = rules.flattened ? '.' : '.entry.';\n        var position = prefix + i++ + '.';\n        var keyName = position + (rules.key.name || 'key');\n        var valueName = position + (rules.value.name || 'value');\n        serializeMember(name + keyName, key, rules.key, fn);\n        serializeMember(name + valueName, value, rules.value, fn);\n      });\n    }\n\n    function serializeList(name, list, rules, fn) {\n      var memberRules = rules.member || {};\n\n      if (list.length === 0) {\n        fn.call(this, name, null);\n        return;\n      }\n\n      util.arrayEach(list, function (v, n) {\n        var suffix = '.' + (n + 1);\n\n        if (rules.api.protocol === 'ec2') {\n          // Do nothing for EC2\n          suffix = suffix + ''; // make linter happy\n        } else if (rules.flattened) {\n          if (memberRules.name) {\n            var parts = name.split('.');\n            parts.pop();\n            parts.push(ucfirst(memberRules));\n            name = parts.join('.');\n          }\n        } else {\n          suffix = '.' + (memberRules.name ? memberRules.name : 'member') + suffix;\n        }\n\n        serializeMember(name + suffix, v, memberRules, fn);\n      });\n    }\n\n    function serializeMember(name, value, rules, fn) {\n      if (value === null || value === undefined) return;\n\n      if (rules.type === 'structure') {\n        serializeStructure(name, value, rules, fn);\n      } else if (rules.type === 'list') {\n        serializeList(name, value, rules, fn);\n      } else if (rules.type === 'map') {\n        serializeMap(name, value, rules, fn);\n      } else {\n        fn(name, rules.toWireFormat(value).toString());\n      }\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = QueryParamSerializer;\n  }, {\n    \"../util\": 71\n  }],\n  52: [function (require, module, exports) {\n    module.exports = {\n      //provide realtime clock for performance measurement\n      now: function now() {\n        if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n          return performance.now();\n        }\n\n        return Date.now();\n      }\n    };\n  }, {}],\n  53: [function (require, module, exports) {\n    var util = require('./util');\n\n    var regionConfig = require('./region_config_data.json');\n\n    function generateRegionPrefix(region) {\n      if (!region) return null;\n      var parts = region.split('-');\n      if (parts.length < 3) return null;\n      return parts.slice(0, parts.length - 2).join('-') + '-*';\n    }\n\n    function derivedKeys(service) {\n      var region = service.config.region;\n      var regionPrefix = generateRegionPrefix(region);\n      var endpointPrefix = service.api.endpointPrefix;\n      return [[region, endpointPrefix], [regionPrefix, endpointPrefix], [region, '*'], [regionPrefix, '*'], ['*', endpointPrefix], ['*', '*']].map(function (item) {\n        return item[0] && item[1] ? item.join('/') : null;\n      });\n    }\n\n    function applyConfig(service, config) {\n      util.each(config, function (key, value) {\n        if (key === 'globalEndpoint') return;\n\n        if (service.config[key] === undefined || service.config[key] === null) {\n          service.config[key] = value;\n        }\n      });\n    }\n\n    function configureEndpoint(service) {\n      var keys = derivedKeys(service);\n\n      for (var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n        if (!key) continue;\n\n        if (Object.prototype.hasOwnProperty.call(regionConfig.rules, key)) {\n          var config = regionConfig.rules[key];\n\n          if (typeof config === 'string') {\n            config = regionConfig.patterns[config];\n          } // set dualstack endpoint\n\n\n          if (service.config.useDualstack && util.isDualstackAvailable(service)) {\n            config = util.copy(config);\n            config.endpoint = '{service}.dualstack.{region}.amazonaws.com';\n          } // set global endpoint\n\n\n          service.isGlobalEndpoint = !!config.globalEndpoint; // signature version\n\n          if (!config.signatureVersion) config.signatureVersion = 'v4'; // merge config\n\n          applyConfig(service, config);\n          return;\n        }\n      }\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = configureEndpoint;\n  }, {\n    \"./region_config_data.json\": 54,\n    \"./util\": 71\n  }],\n  54: [function (require, module, exports) {\n    module.exports = {\n      \"rules\": {\n        \"*/*\": {\n          \"endpoint\": \"{service}.{region}.amazonaws.com\"\n        },\n        \"cn-*/*\": {\n          \"endpoint\": \"{service}.{region}.amazonaws.com.cn\"\n        },\n        \"*/budgets\": \"globalSSL\",\n        \"*/cloudfront\": \"globalSSL\",\n        \"*/iam\": \"globalSSL\",\n        \"*/sts\": \"globalSSL\",\n        \"*/importexport\": {\n          \"endpoint\": \"{service}.amazonaws.com\",\n          \"signatureVersion\": \"v2\",\n          \"globalEndpoint\": true\n        },\n        \"*/route53\": {\n          \"endpoint\": \"https://{service}.amazonaws.com\",\n          \"signatureVersion\": \"v3https\",\n          \"globalEndpoint\": true\n        },\n        \"*/waf\": \"globalSSL\",\n        \"us-gov-*/iam\": \"globalGovCloud\",\n        \"us-gov-*/sts\": {\n          \"endpoint\": \"{service}.{region}.amazonaws.com\"\n        },\n        \"us-gov-west-1/s3\": \"s3signature\",\n        \"us-west-1/s3\": \"s3signature\",\n        \"us-west-2/s3\": \"s3signature\",\n        \"eu-west-1/s3\": \"s3signature\",\n        \"ap-southeast-1/s3\": \"s3signature\",\n        \"ap-southeast-2/s3\": \"s3signature\",\n        \"ap-northeast-1/s3\": \"s3signature\",\n        \"sa-east-1/s3\": \"s3signature\",\n        \"us-east-1/s3\": {\n          \"endpoint\": \"{service}.amazonaws.com\",\n          \"signatureVersion\": \"s3\"\n        },\n        \"us-east-1/sdb\": {\n          \"endpoint\": \"{service}.amazonaws.com\",\n          \"signatureVersion\": \"v2\"\n        },\n        \"*/sdb\": {\n          \"endpoint\": \"{service}.{region}.amazonaws.com\",\n          \"signatureVersion\": \"v2\"\n        }\n      },\n      \"patterns\": {\n        \"globalSSL\": {\n          \"endpoint\": \"https://{service}.amazonaws.com\",\n          \"globalEndpoint\": true\n        },\n        \"globalGovCloud\": {\n          \"endpoint\": \"{service}.us-gov.amazonaws.com\"\n        },\n        \"s3signature\": {\n          \"endpoint\": \"{service}.{region}.amazonaws.com\",\n          \"signatureVersion\": \"s3\"\n        }\n      }\n    };\n  }, {}],\n  55: [function (require, module, exports) {\n    (function (process) {\n      var AWS = require('./core');\n\n      var AcceptorStateMachine = require('./state_machine');\n\n      var inherit = AWS.util.inherit;\n      var domain = AWS.util.domain;\n\n      var jmespath = require('jmespath');\n      /**\n       * @api private\n       */\n\n\n      var hardErrorStates = {\n        success: 1,\n        error: 1,\n        complete: 1\n      };\n\n      function isTerminalState(machine) {\n        return Object.prototype.hasOwnProperty.call(hardErrorStates, machine._asm.currentState);\n      }\n\n      var fsm = new AcceptorStateMachine();\n\n      fsm.setupStates = function () {\n        var transition = function (_, done) {\n          var self = this;\n          self._haltHandlersOnError = false;\n          self.emit(self._asm.currentState, function (err) {\n            if (err) {\n              if (isTerminalState(self)) {\n                if (domain && self.domain instanceof domain.Domain) {\n                  err.domainEmitter = self;\n                  err.domain = self.domain;\n                  err.domainThrown = false;\n                  self.domain.emit('error', err);\n                } else {\n                  throw err;\n                }\n              } else {\n                self.response.error = err;\n                done(err);\n              }\n            } else {\n              done(self.response.error);\n            }\n          });\n        };\n\n        this.addState('validate', 'build', 'error', transition);\n        this.addState('build', 'afterBuild', 'restart', transition);\n        this.addState('afterBuild', 'sign', 'restart', transition);\n        this.addState('sign', 'send', 'retry', transition);\n        this.addState('retry', 'afterRetry', 'afterRetry', transition);\n        this.addState('afterRetry', 'sign', 'error', transition);\n        this.addState('send', 'validateResponse', 'retry', transition);\n        this.addState('validateResponse', 'extractData', 'extractError', transition);\n        this.addState('extractError', 'extractData', 'retry', transition);\n        this.addState('extractData', 'success', 'retry', transition);\n        this.addState('restart', 'build', 'error', transition);\n        this.addState('success', 'complete', 'complete', transition);\n        this.addState('error', 'complete', 'complete', transition);\n        this.addState('complete', null, null, transition);\n      };\n\n      fsm.setupStates();\n      /**\n       * ## Asynchronous Requests\n       *\n       * All requests made through the SDK are asynchronous and use a\n       * callback interface. Each service method that kicks off a request\n       * returns an `AWS.Request` object that you can use to register\n       * callbacks.\n       *\n       * For example, the following service method returns the request\n       * object as \"request\", which can be used to register callbacks:\n       *\n       * ```javascript\n       * // request is an AWS.Request object\n       * var request = ec2.describeInstances();\n       *\n       * // register callbacks on request to retrieve response data\n       * request.on('success', function(response) {\n       *   console.log(response.data);\n       * });\n       * ```\n       *\n       * When a request is ready to be sent, the {send} method should\n       * be called:\n       *\n       * ```javascript\n       * request.send();\n       * ```\n       *\n       * Since registered callbacks may or may not be idempotent, requests should only\n       * be sent once. To perform the same operation multiple times, you will need to\n       * create multiple request objects, each with its own registered callbacks.\n       *\n       * ## Removing Default Listeners for Events\n       *\n       * Request objects are built with default listeners for the various events,\n       * depending on the service type. In some cases, you may want to remove\n       * some built-in listeners to customize behaviour. Doing this requires\n       * access to the built-in listener functions, which are exposed through\n       * the {AWS.EventListeners.Core} namespace. For instance, you may\n       * want to customize the HTTP handler used when sending a request. In this\n       * case, you can remove the built-in listener associated with the 'send'\n       * event, the {AWS.EventListeners.Core.SEND} listener and add your own.\n       *\n       * ## Multiple Callbacks and Chaining\n       *\n       * You can register multiple callbacks on any request object. The\n       * callbacks can be registered for different events, or all for the\n       * same event. In addition, you can chain callback registration, for\n       * example:\n       *\n       * ```javascript\n       * request.\n       *   on('success', function(response) {\n       *     console.log(\"Success!\");\n       *   }).\n       *   on('error', function(error, response) {\n       *     console.log(\"Error!\");\n       *   }).\n       *   on('complete', function(response) {\n       *     console.log(\"Always!\");\n       *   }).\n       *   send();\n       * ```\n       *\n       * The above example will print either \"Success! Always!\", or \"Error! Always!\",\n       * depending on whether the request succeeded or not.\n       *\n       * @!attribute httpRequest\n       *   @readonly\n       *   @!group HTTP Properties\n       *   @return [AWS.HttpRequest] the raw HTTP request object\n       *     containing request headers and body information\n       *     sent by the service.\n       *\n       * @!attribute startTime\n       *   @readonly\n       *   @!group Operation Properties\n       *   @return [Date] the time that the request started\n       *\n       * @!group Request Building Events\n       *\n       * @!event validate(request)\n       *   Triggered when a request is being validated. Listeners\n       *   should throw an error if the request should not be sent.\n       *   @param request [Request] the request object being sent\n       *   @see AWS.EventListeners.Core.VALIDATE_CREDENTIALS\n       *   @see AWS.EventListeners.Core.VALIDATE_REGION\n       *   @example Ensuring that a certain parameter is set before sending a request\n       *     var req = s3.putObject(params);\n       *     req.on('validate', function() {\n       *       if (!req.params.Body.match(/^Hello\\s/)) {\n       *         throw new Error('Body must start with \"Hello \"');\n       *       }\n       *     });\n       *     req.send(function(err, data) { ... });\n       *\n       * @!event build(request)\n       *   Triggered when the request payload is being built. Listeners\n       *   should fill the necessary information to send the request\n       *   over HTTP.\n       *   @param (see AWS.Request~validate)\n       *   @example Add a custom HTTP header to a request\n       *     var req = s3.putObject(params);\n       *     req.on('build', function() {\n       *       req.httpRequest.headers['Custom-Header'] = 'value';\n       *     });\n       *     req.send(function(err, data) { ... });\n       *\n       * @!event sign(request)\n       *   Triggered when the request is being signed. Listeners should\n       *   add the correct authentication headers and/or adjust the body,\n       *   depending on the authentication mechanism being used.\n       *   @param (see AWS.Request~validate)\n       *\n       * @!group Request Sending Events\n       *\n       * @!event send(response)\n       *   Triggered when the request is ready to be sent. Listeners\n       *   should call the underlying transport layer to initiate\n       *   the sending of the request.\n       *   @param response [Response] the response object\n       *   @context [Request] the request object that was sent\n       *   @see AWS.EventListeners.Core.SEND\n       *\n       * @!event retry(response)\n       *   Triggered when a request failed and might need to be retried or redirected.\n       *   If the response is retryable, the listener should set the\n       *   `response.error.retryable` property to `true`, and optionally set\n       *   `response.error.retryDelay` to the millisecond delay for the next attempt.\n       *   In the case of a redirect, `response.error.redirect` should be set to\n       *   `true` with `retryDelay` set to an optional delay on the next request.\n       *\n       *   If a listener decides that a request should not be retried,\n       *   it should set both `retryable` and `redirect` to false.\n       *\n       *   Note that a retryable error will be retried at most\n       *   {AWS.Config.maxRetries} times (based on the service object's config).\n       *   Similarly, a request that is redirected will only redirect at most\n       *   {AWS.Config.maxRedirects} times.\n       *\n       *   @param (see AWS.Request~send)\n       *   @context (see AWS.Request~send)\n       *   @example Adding a custom retry for a 404 response\n       *     request.on('retry', function(response) {\n       *       // this resource is not yet available, wait 10 seconds to get it again\n       *       if (response.httpResponse.statusCode === 404 && response.error) {\n       *         response.error.retryable = true;   // retry this error\n       *         response.error.retryDelay = 10000; // wait 10 seconds\n       *       }\n       *     });\n       *\n       * @!group Data Parsing Events\n       *\n       * @!event extractError(response)\n       *   Triggered on all non-2xx requests so that listeners can extract\n       *   error details from the response body. Listeners to this event\n       *   should set the `response.error` property.\n       *   @param (see AWS.Request~send)\n       *   @context (see AWS.Request~send)\n       *\n       * @!event extractData(response)\n       *   Triggered in successful requests to allow listeners to\n       *   de-serialize the response body into `response.data`.\n       *   @param (see AWS.Request~send)\n       *   @context (see AWS.Request~send)\n       *\n       * @!group Completion Events\n       *\n       * @!event success(response)\n       *   Triggered when the request completed successfully.\n       *   `response.data` will contain the response data and\n       *   `response.error` will be null.\n       *   @param (see AWS.Request~send)\n       *   @context (see AWS.Request~send)\n       *\n       * @!event error(error, response)\n       *   Triggered when an error occurs at any point during the\n       *   request. `response.error` will contain details about the error\n       *   that occurred. `response.data` will be null.\n       *   @param error [Error] the error object containing details about\n       *     the error that occurred.\n       *   @param (see AWS.Request~send)\n       *   @context (see AWS.Request~send)\n       *\n       * @!event complete(response)\n       *   Triggered whenever a request cycle completes. `response.error`\n       *   should be checked, since the request may have failed.\n       *   @param (see AWS.Request~send)\n       *   @context (see AWS.Request~send)\n       *\n       * @!group HTTP Events\n       *\n       * @!event httpHeaders(statusCode, headers, response, statusMessage)\n       *   Triggered when headers are sent by the remote server\n       *   @param statusCode [Integer] the HTTP response code\n       *   @param headers [map<String,String>] the response headers\n       *   @param (see AWS.Request~send)\n       *   @param statusMessage [String] A status message corresponding to the HTTP\n       *                                 response code\n       *   @context (see AWS.Request~send)\n       *\n       * @!event httpData(chunk, response)\n       *   Triggered when data is sent by the remote server\n       *   @param chunk [Buffer] the buffer data containing the next data chunk\n       *     from the server\n       *   @param (see AWS.Request~send)\n       *   @context (see AWS.Request~send)\n       *   @see AWS.EventListeners.Core.HTTP_DATA\n       *\n       * @!event httpUploadProgress(progress, response)\n       *   Triggered when the HTTP request has uploaded more data\n       *   @param progress [map] An object containing the `loaded` and `total` bytes\n       *     of the request.\n       *   @param (see AWS.Request~send)\n       *   @context (see AWS.Request~send)\n       *   @note This event will not be emitted in Node.js 0.8.x.\n       *\n       * @!event httpDownloadProgress(progress, response)\n       *   Triggered when the HTTP request has downloaded more data\n       *   @param progress [map] An object containing the `loaded` and `total` bytes\n       *     of the request.\n       *   @param (see AWS.Request~send)\n       *   @context (see AWS.Request~send)\n       *   @note This event will not be emitted in Node.js 0.8.x.\n       *\n       * @!event httpError(error, response)\n       *   Triggered when the HTTP request failed\n       *   @param error [Error] the error object that was thrown\n       *   @param (see AWS.Request~send)\n       *   @context (see AWS.Request~send)\n       *\n       * @!event httpDone(response)\n       *   Triggered when the server is finished sending data\n       *   @param (see AWS.Request~send)\n       *   @context (see AWS.Request~send)\n       *\n       * @see AWS.Response\n       */\n\n      AWS.Request = inherit({\n        /**\n         * Creates a request for an operation on a given service with\n         * a set of input parameters.\n         *\n         * @param service [AWS.Service] the service to perform the operation on\n         * @param operation [String] the operation to perform on the service\n         * @param params [Object] parameters to send to the operation.\n         *   See the operation's documentation for the format of the\n         *   parameters.\n         */\n        constructor: function Request(service, operation, params) {\n          var endpoint = service.endpoint;\n          var region = service.config.region;\n          var customUserAgent = service.config.customUserAgent; // global endpoints sign as us-east-1\n\n          if (service.isGlobalEndpoint) region = 'us-east-1';\n          this.domain = domain && domain.active;\n          this.service = service;\n          this.operation = operation;\n          this.params = params || {};\n          this.httpRequest = new AWS.HttpRequest(endpoint, region);\n          this.httpRequest.appendToUserAgent(customUserAgent);\n          this.startTime = service.getSkewCorrectedDate();\n          this.response = new AWS.Response(this);\n          this._asm = new AcceptorStateMachine(fsm.states, 'validate');\n          this._haltHandlersOnError = false;\n          AWS.SequentialExecutor.call(this);\n          this.emit = this.emitEvent;\n        },\n\n        /**\n         * @!group Sending a Request\n         */\n\n        /**\n         * @overload send(callback = null)\n         *   Sends the request object.\n         *\n         *   @callback callback function(err, data)\n         *     If a callback is supplied, it is called when a response is returned\n         *     from the service.\n         *     @context [AWS.Request] the request object being sent.\n         *     @param err [Error] the error object returned from the request.\n         *       Set to `null` if the request is successful.\n         *     @param data [Object] the de-serialized data returned from\n         *       the request. Set to `null` if a request error occurs.\n         *   @example Sending a request with a callback\n         *     request = s3.putObject({Bucket: 'bucket', Key: 'key'});\n         *     request.send(function(err, data) { console.log(err, data); });\n         *   @example Sending a request with no callback (using event handlers)\n         *     request = s3.putObject({Bucket: 'bucket', Key: 'key'});\n         *     request.on('complete', function(response) { ... }); // register a callback\n         *     request.send();\n         */\n        send: function send(callback) {\n          if (callback) {\n            // append to user agent\n            this.httpRequest.appendToUserAgent('callback');\n            this.on('complete', function (resp) {\n              callback.call(resp, resp.error, resp.data);\n            });\n          }\n\n          this.runTo();\n          return this.response;\n        },\n\n        /**\n         * @!method  promise()\n         *   Sends the request and returns a 'thenable' promise.\n         *\n         *   Two callbacks can be provided to the `then` method on the returned promise.\n         *   The first callback will be called if the promise is fulfilled, and the second\n         *   callback will be called if the promise is rejected.\n         *   @callback fulfilledCallback function(data)\n         *     Called if the promise is fulfilled.\n         *     @param data [Object] the de-serialized data returned from the request.\n         *   @callback rejectedCallback function(error)\n         *     Called if the promise is rejected.\n         *     @param error [Error] the error object returned from the request.\n         *   @return [Promise] A promise that represents the state of the request.\n         *   @example Sending a request using promises.\n         *     var request = s3.putObject({Bucket: 'bucket', Key: 'key'});\n         *     var result = request.promise();\n         *     result.then(function(data) { ... }, function(error) { ... });\n         */\n\n        /**\n         * @api private\n         */\n        build: function build(callback) {\n          return this.runTo('send', callback);\n        },\n\n        /**\n         * @api private\n         */\n        runTo: function runTo(state, done) {\n          this._asm.runTo(state, done, this);\n\n          return this;\n        },\n\n        /**\n         * Aborts a request, emitting the error and complete events.\n         *\n         * @!macro nobrowser\n         * @example Aborting a request after sending\n         *   var params = {\n         *     Bucket: 'bucket', Key: 'key',\n         *     Body: Buffer.alloc(1024 * 1024 * 5) // 5MB payload\n         *   };\n         *   var request = s3.putObject(params);\n         *   request.send(function (err, data) {\n         *     if (err) console.log(\"Error:\", err.code, err.message);\n         *     else console.log(data);\n         *   });\n         *\n         *   // abort request in 1 second\n         *   setTimeout(request.abort.bind(request), 1000);\n         *\n         *   // prints \"Error: RequestAbortedError Request aborted by user\"\n         * @return [AWS.Request] the same request object, for chaining.\n         * @since v1.4.0\n         */\n        abort: function abort() {\n          this.removeAllListeners('validateResponse');\n          this.removeAllListeners('extractError');\n          this.on('validateResponse', function addAbortedError(resp) {\n            resp.error = AWS.util.error(new Error('Request aborted by user'), {\n              code: 'RequestAbortedError',\n              retryable: false\n            });\n          });\n\n          if (this.httpRequest.stream && !this.httpRequest.stream.didCallback) {\n            // abort HTTP stream\n            this.httpRequest.stream.abort();\n\n            if (this.httpRequest._abortCallback) {\n              this.httpRequest._abortCallback();\n            } else {\n              this.removeAllListeners('send'); // haven't sent yet, so let's not\n            }\n          }\n\n          return this;\n        },\n\n        /**\n         * Iterates over each page of results given a pageable request, calling\n         * the provided callback with each page of data. After all pages have been\n         * retrieved, the callback is called with `null` data.\n         *\n         * @note This operation can generate multiple requests to a service.\n         * @example Iterating over multiple pages of objects in an S3 bucket\n         *   var pages = 1;\n         *   s3.listObjects().eachPage(function(err, data) {\n         *     if (err) return;\n         *     console.log(\"Page\", pages++);\n         *     console.log(data);\n         *   });\n         * @example Iterating over multiple pages with an asynchronous callback\n         *   s3.listObjects(params).eachPage(function(err, data, done) {\n         *     doSomethingAsyncAndOrExpensive(function() {\n         *       // The next page of results isn't fetched until done is called\n         *       done();\n         *     });\n         *   });\n         * @callback callback function(err, data, [doneCallback])\n         *   Called with each page of resulting data from the request. If the\n         *   optional `doneCallback` is provided in the function, it must be called\n         *   when the callback is complete.\n         *\n         *   @param err [Error] an error object, if an error occurred.\n         *   @param data [Object] a single page of response data. If there is no\n         *     more data, this object will be `null`.\n         *   @param doneCallback [Function] an optional done callback. If this\n         *     argument is defined in the function declaration, it should be called\n         *     when the next page is ready to be retrieved. This is useful for\n         *     controlling serial pagination across asynchronous operations.\n         *   @return [Boolean] if the callback returns `false`, pagination will\n         *     stop.\n         *\n         * @see AWS.Request.eachItem\n         * @see AWS.Response.nextPage\n         * @since v1.4.0\n         */\n        eachPage: function eachPage(callback) {\n          // Make all callbacks async-ish\n          callback = AWS.util.fn.makeAsync(callback, 3);\n\n          function wrappedCallback(response) {\n            callback.call(response, response.error, response.data, function (result) {\n              if (result === false) return;\n\n              if (response.hasNextPage()) {\n                response.nextPage().on('complete', wrappedCallback).send();\n              } else {\n                callback.call(response, null, null, AWS.util.fn.noop);\n              }\n            });\n          }\n\n          this.on('complete', wrappedCallback).send();\n        },\n\n        /**\n         * Enumerates over individual items of a request, paging the responses if\n         * necessary.\n         *\n         * @api experimental\n         * @since v1.4.0\n         */\n        eachItem: function eachItem(callback) {\n          var self = this;\n\n          function wrappedCallback(err, data) {\n            if (err) return callback(err, null);\n            if (data === null) return callback(null, null);\n            var config = self.service.paginationConfig(self.operation);\n            var resultKey = config.resultKey;\n            if (Array.isArray(resultKey)) resultKey = resultKey[0];\n            var items = jmespath.search(data, resultKey);\n            var continueIteration = true;\n            AWS.util.arrayEach(items, function (item) {\n              continueIteration = callback(null, item);\n\n              if (continueIteration === false) {\n                return AWS.util.abort;\n              }\n            });\n            return continueIteration;\n          }\n\n          this.eachPage(wrappedCallback);\n        },\n\n        /**\n         * @return [Boolean] whether the operation can return multiple pages of\n         *   response data.\n         * @see AWS.Response.eachPage\n         * @since v1.4.0\n         */\n        isPageable: function isPageable() {\n          return this.service.paginationConfig(this.operation) ? true : false;\n        },\n\n        /**\n         * Sends the request and converts the request object into a readable stream\n         * that can be read from or piped into a writable stream.\n         *\n         * @note The data read from a readable stream contains only\n         *   the raw HTTP body contents.\n         * @example Manually reading from a stream\n         *   request.createReadStream().on('data', function(data) {\n         *     console.log(\"Got data:\", data.toString());\n         *   });\n         * @example Piping a request body into a file\n         *   var out = fs.createWriteStream('/path/to/outfile.jpg');\n         *   s3.service.getObject(params).createReadStream().pipe(out);\n         * @return [Stream] the readable stream object that can be piped\n         *   or read from (by registering 'data' event listeners).\n         * @!macro nobrowser\n         */\n        createReadStream: function createReadStream() {\n          var streams = AWS.util.stream;\n          var req = this;\n          var stream = null;\n\n          if (AWS.HttpClient.streamsApiVersion === 2) {\n            stream = new streams.PassThrough();\n            process.nextTick(function () {\n              req.send();\n            });\n          } else {\n            stream = new streams.Stream();\n            stream.readable = true;\n            stream.sent = false;\n            stream.on('newListener', function (event) {\n              if (!stream.sent && event === 'data') {\n                stream.sent = true;\n                process.nextTick(function () {\n                  req.send();\n                });\n              }\n            });\n          }\n\n          this.on('error', function (err) {\n            stream.emit('error', err);\n          });\n          this.on('httpHeaders', function streamHeaders(statusCode, headers, resp) {\n            if (statusCode < 300) {\n              req.removeListener('httpData', AWS.EventListeners.Core.HTTP_DATA);\n              req.removeListener('httpError', AWS.EventListeners.Core.HTTP_ERROR);\n              req.on('httpError', function streamHttpError(error) {\n                resp.error = error;\n                resp.error.retryable = false;\n              });\n              var shouldCheckContentLength = false;\n              var expectedLen;\n\n              if (req.httpRequest.method !== 'HEAD') {\n                expectedLen = parseInt(headers['content-length'], 10);\n              }\n\n              if (expectedLen !== undefined && !isNaN(expectedLen) && expectedLen >= 0) {\n                shouldCheckContentLength = true;\n                var receivedLen = 0;\n              }\n\n              var checkContentLengthAndEmit = function checkContentLengthAndEmit() {\n                if (shouldCheckContentLength && receivedLen !== expectedLen) {\n                  stream.emit('error', AWS.util.error(new Error('Stream content length mismatch. Received ' + receivedLen + ' of ' + expectedLen + ' bytes.'), {\n                    code: 'StreamContentLengthMismatch'\n                  }));\n                } else if (AWS.HttpClient.streamsApiVersion === 2) {\n                  stream.end();\n                } else {\n                  stream.emit('end');\n                }\n              };\n\n              var httpStream = resp.httpResponse.createUnbufferedStream();\n\n              if (AWS.HttpClient.streamsApiVersion === 2) {\n                if (shouldCheckContentLength) {\n                  var lengthAccumulator = new streams.PassThrough();\n\n                  lengthAccumulator._write = function (chunk) {\n                    if (chunk && chunk.length) {\n                      receivedLen += chunk.length;\n                    }\n\n                    return streams.PassThrough.prototype._write.apply(this, arguments);\n                  };\n\n                  lengthAccumulator.on('end', checkContentLengthAndEmit);\n                  stream.on('error', function (err) {\n                    shouldCheckContentLength = false;\n                    httpStream.unpipe(lengthAccumulator);\n                    lengthAccumulator.emit('end');\n                    lengthAccumulator.end();\n                  });\n                  httpStream.pipe(lengthAccumulator).pipe(stream, {\n                    end: false\n                  });\n                } else {\n                  httpStream.pipe(stream);\n                }\n              } else {\n                if (shouldCheckContentLength) {\n                  httpStream.on('data', function (arg) {\n                    if (arg && arg.length) {\n                      receivedLen += arg.length;\n                    }\n                  });\n                }\n\n                httpStream.on('data', function (arg) {\n                  stream.emit('data', arg);\n                });\n                httpStream.on('end', checkContentLengthAndEmit);\n              }\n\n              httpStream.on('error', function (err) {\n                shouldCheckContentLength = false;\n                stream.emit('error', err);\n              });\n            }\n          });\n          return stream;\n        },\n\n        /**\n         * @param [Array,Response] args This should be the response object,\n         *   or an array of args to send to the event.\n         * @api private\n         */\n        emitEvent: function emit(eventName, args, done) {\n          if (typeof args === 'function') {\n            done = args;\n            args = null;\n          }\n\n          if (!done) done = function () {};\n          if (!args) args = this.eventParameters(eventName, this.response);\n          var origEmit = AWS.SequentialExecutor.prototype.emit;\n          origEmit.call(this, eventName, args, function (err) {\n            if (err) this.response.error = err;\n            done.call(this, err);\n          });\n        },\n\n        /**\n         * @api private\n         */\n        eventParameters: function eventParameters(eventName) {\n          switch (eventName) {\n            case 'restart':\n            case 'validate':\n            case 'sign':\n            case 'build':\n            case 'afterValidate':\n            case 'afterBuild':\n              return [this];\n\n            case 'error':\n              return [this.response.error, this.response];\n\n            default:\n              return [this.response];\n          }\n        },\n\n        /**\n         * @api private\n         */\n        presign: function presign(expires, callback) {\n          if (!callback && typeof expires === 'function') {\n            callback = expires;\n            expires = null;\n          }\n\n          return new AWS.Signers.Presign().sign(this.toGet(), expires, callback);\n        },\n\n        /**\n         * @api private\n         */\n        isPresigned: function isPresigned() {\n          return Object.prototype.hasOwnProperty.call(this.httpRequest.headers, 'presigned-expires');\n        },\n\n        /**\n         * @api private\n         */\n        toUnauthenticated: function toUnauthenticated() {\n          this._unAuthenticated = true;\n          this.removeListener('validate', AWS.EventListeners.Core.VALIDATE_CREDENTIALS);\n          this.removeListener('sign', AWS.EventListeners.Core.SIGN);\n          return this;\n        },\n\n        /**\n         * @api private\n         */\n        toGet: function toGet() {\n          if (this.service.api.protocol === 'query' || this.service.api.protocol === 'ec2') {\n            this.removeListener('build', this.buildAsGet);\n            this.addListener('build', this.buildAsGet);\n          }\n\n          return this;\n        },\n\n        /**\n         * @api private\n         */\n        buildAsGet: function buildAsGet(request) {\n          request.httpRequest.method = 'GET';\n          request.httpRequest.path = request.service.endpoint.path + '?' + request.httpRequest.body;\n          request.httpRequest.body = ''; // don't need these headers on a GET request\n\n          delete request.httpRequest.headers['Content-Length'];\n          delete request.httpRequest.headers['Content-Type'];\n        },\n\n        /**\n         * @api private\n         */\n        haltHandlersOnError: function haltHandlersOnError() {\n          this._haltHandlersOnError = true;\n        }\n      });\n      /**\n       * @api private\n       */\n\n      AWS.Request.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n        this.prototype.promise = function promise() {\n          var self = this; // append to user agent\n\n          this.httpRequest.appendToUserAgent('promise');\n          return new PromiseDependency(function (resolve, reject) {\n            self.on('complete', function (resp) {\n              if (resp.error) {\n                reject(resp.error);\n              } else {\n                // define $response property so that it is not enumberable\n                // this prevents circular reference errors when stringifying the JSON object\n                resolve(Object.defineProperty(resp.data || {}, '$response', {\n                  value: resp\n                }));\n              }\n            });\n            self.runTo();\n          });\n        };\n      };\n      /**\n       * @api private\n       */\n\n\n      AWS.Request.deletePromisesFromClass = function deletePromisesFromClass() {\n        delete this.prototype.promise;\n      };\n\n      AWS.util.addPromises(AWS.Request);\n      AWS.util.mixin(AWS.Request, AWS.SequentialExecutor);\n    }).call(this, require('_process'));\n  }, {\n    \"./core\": 18,\n    \"./state_machine\": 70,\n    \"_process\": 85,\n    \"jmespath\": 84\n  }],\n  56: [function (require, module, exports) {\n    /**\n     * Copyright 2012-2013 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n     *\n     * Licensed under the Apache License, Version 2.0 (the \"License\"). You\n     * may not use this file except in compliance with the License. A copy of\n     * the License is located at\n     *\n     *     http://aws.amazon.com/apache2.0/\n     *\n     * or in the \"license\" file accompanying this file. This file is\n     * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n     * ANY KIND, either express or implied. See the License for the specific\n     * language governing permissions and limitations under the License.\n     */\n    var AWS = require('./core');\n\n    var inherit = AWS.util.inherit;\n\n    var jmespath = require('jmespath');\n    /**\n     * @api private\n     */\n\n\n    function CHECK_ACCEPTORS(resp) {\n      var waiter = resp.request._waiter;\n      var acceptors = waiter.config.acceptors;\n      var acceptorMatched = false;\n      var state = 'retry';\n      acceptors.forEach(function (acceptor) {\n        if (!acceptorMatched) {\n          var matcher = waiter.matchers[acceptor.matcher];\n\n          if (matcher && matcher(resp, acceptor.expected, acceptor.argument)) {\n            acceptorMatched = true;\n            state = acceptor.state;\n          }\n        }\n      });\n      if (!acceptorMatched && resp.error) state = 'failure';\n\n      if (state === 'success') {\n        waiter.setSuccess(resp);\n      } else {\n        waiter.setError(resp, state === 'retry');\n      }\n    }\n    /**\n     * @api private\n     */\n\n\n    AWS.ResourceWaiter = inherit({\n      /**\n       * Waits for a given state on a service object\n       * @param service [Service] the service object to wait on\n       * @param state [String] the state (defined in waiter configuration) to wait\n       *   for.\n       * @example Create a waiter for running EC2 instances\n       *   var ec2 = new AWS.EC2;\n       *   var waiter = new AWS.ResourceWaiter(ec2, 'instanceRunning');\n       */\n      constructor: function constructor(service, state) {\n        this.service = service;\n        this.state = state;\n        this.loadWaiterConfig(this.state);\n      },\n      service: null,\n      state: null,\n      config: null,\n      matchers: {\n        path: function (resp, expected, argument) {\n          try {\n            var result = jmespath.search(resp.data, argument);\n          } catch (err) {\n            return false;\n          }\n\n          return jmespath.strictDeepEqual(result, expected);\n        },\n        pathAll: function (resp, expected, argument) {\n          try {\n            var results = jmespath.search(resp.data, argument);\n          } catch (err) {\n            return false;\n          }\n\n          if (!Array.isArray(results)) results = [results];\n          var numResults = results.length;\n          if (!numResults) return false;\n\n          for (var ind = 0; ind < numResults; ind++) {\n            if (!jmespath.strictDeepEqual(results[ind], expected)) {\n              return false;\n            }\n          }\n\n          return true;\n        },\n        pathAny: function (resp, expected, argument) {\n          try {\n            var results = jmespath.search(resp.data, argument);\n          } catch (err) {\n            return false;\n          }\n\n          if (!Array.isArray(results)) results = [results];\n          var numResults = results.length;\n\n          for (var ind = 0; ind < numResults; ind++) {\n            if (jmespath.strictDeepEqual(results[ind], expected)) {\n              return true;\n            }\n          }\n\n          return false;\n        },\n        status: function (resp, expected) {\n          var statusCode = resp.httpResponse.statusCode;\n          return typeof statusCode === 'number' && statusCode === expected;\n        },\n        error: function (resp, expected) {\n          if (typeof expected === 'string' && resp.error) {\n            return expected === resp.error.code;\n          } // if expected is not string, can be boolean indicating presence of error\n\n\n          return expected === !!resp.error;\n        }\n      },\n      listeners: new AWS.SequentialExecutor().addNamedListeners(function (add) {\n        add('RETRY_CHECK', 'retry', function (resp) {\n          var waiter = resp.request._waiter;\n\n          if (resp.error && resp.error.code === 'ResourceNotReady') {\n            resp.error.retryDelay = (waiter.config.delay || 0) * 1000;\n          }\n        });\n        add('CHECK_OUTPUT', 'extractData', CHECK_ACCEPTORS);\n        add('CHECK_ERROR', 'extractError', CHECK_ACCEPTORS);\n      }),\n\n      /**\n       * @return [AWS.Request]\n       */\n      wait: function wait(params, callback) {\n        if (typeof params === 'function') {\n          callback = params;\n          params = undefined;\n        }\n\n        if (params && params.$waiter) {\n          params = AWS.util.copy(params);\n\n          if (typeof params.$waiter.delay === 'number') {\n            this.config.delay = params.$waiter.delay;\n          }\n\n          if (typeof params.$waiter.maxAttempts === 'number') {\n            this.config.maxAttempts = params.$waiter.maxAttempts;\n          }\n\n          delete params.$waiter;\n        }\n\n        var request = this.service.makeRequest(this.config.operation, params);\n        request._waiter = this;\n        request.response.maxRetries = this.config.maxAttempts;\n        request.addListeners(this.listeners);\n        if (callback) request.send(callback);\n        return request;\n      },\n      setSuccess: function setSuccess(resp) {\n        resp.error = null;\n        resp.data = resp.data || {};\n        resp.request.removeAllListeners('extractData');\n      },\n      setError: function setError(resp, retryable) {\n        resp.data = null;\n        resp.error = AWS.util.error(resp.error || new Error(), {\n          code: 'ResourceNotReady',\n          message: 'Resource is not in the state ' + this.state,\n          retryable: retryable\n        });\n      },\n\n      /**\n       * Loads waiter configuration from API configuration\n       *\n       * @api private\n       */\n      loadWaiterConfig: function loadWaiterConfig(state) {\n        if (!this.service.api.waiters[state]) {\n          throw new AWS.util.error(new Error(), {\n            code: 'StateNotFoundError',\n            message: 'State ' + state + ' not found.'\n          });\n        }\n\n        this.config = AWS.util.copy(this.service.api.waiters[state]);\n      }\n    });\n  }, {\n    \"./core\": 18,\n    \"jmespath\": 84\n  }],\n  57: [function (require, module, exports) {\n    var AWS = require('./core');\n\n    var inherit = AWS.util.inherit;\n\n    var jmespath = require('jmespath');\n    /**\n     * This class encapsulates the response information\n     * from a service request operation sent through {AWS.Request}.\n     * The response object has two main properties for getting information\n     * back from a request:\n     *\n     * ## The `data` property\n     *\n     * The `response.data` property contains the serialized object data\n     * retrieved from the service request. For instance, for an\n     * Amazon DynamoDB `listTables` method call, the response data might\n     * look like:\n     *\n     * ```\n     * > resp.data\n     * { TableNames:\n     *    [ 'table1', 'table2', ... ] }\n     * ```\n     *\n     * The `data` property can be null if an error occurs (see below).\n     *\n     * ## The `error` property\n     *\n     * In the event of a service error (or transfer error), the\n     * `response.error` property will be filled with the given\n     * error data in the form:\n     *\n     * ```\n     * { code: 'SHORT_UNIQUE_ERROR_CODE',\n     *   message: 'Some human readable error message' }\n     * ```\n     *\n     * In the case of an error, the `data` property will be `null`.\n     * Note that if you handle events that can be in a failure state,\n     * you should always check whether `response.error` is set\n     * before attempting to access the `response.data` property.\n     *\n     * @!attribute data\n     *   @readonly\n     *   @!group Data Properties\n     *   @note Inside of a {AWS.Request~httpData} event, this\n     *     property contains a single raw packet instead of the\n     *     full de-serialized service response.\n     *   @return [Object] the de-serialized response data\n     *     from the service.\n     *\n     * @!attribute error\n     *   An structure containing information about a service\n     *   or networking error.\n     *   @readonly\n     *   @!group Data Properties\n     *   @note This attribute is only filled if a service or\n     *     networking error occurs.\n     *   @return [Error]\n     *     * code [String] a unique short code representing the\n     *       error that was emitted.\n     *     * message [String] a longer human readable error message\n     *     * retryable [Boolean] whether the error message is\n     *       retryable.\n     *     * statusCode [Numeric] in the case of a request that reached the service,\n     *       this value contains the response status code.\n     *     * time [Date] the date time object when the error occurred.\n     *     * hostname [String] set when a networking error occurs to easily\n     *       identify the endpoint of the request.\n     *     * region [String] set when a networking error occurs to easily\n     *       identify the region of the request.\n     *\n     * @!attribute requestId\n     *   @readonly\n     *   @!group Data Properties\n     *   @return [String] the unique request ID associated with the response.\n     *     Log this value when debugging requests for AWS support.\n     *\n     * @!attribute retryCount\n     *   @readonly\n     *   @!group Operation Properties\n     *   @return [Integer] the number of retries that were\n     *     attempted before the request was completed.\n     *\n     * @!attribute redirectCount\n     *   @readonly\n     *   @!group Operation Properties\n     *   @return [Integer] the number of redirects that were\n     *     followed before the request was completed.\n     *\n     * @!attribute httpResponse\n     *   @readonly\n     *   @!group HTTP Properties\n     *   @return [AWS.HttpResponse] the raw HTTP response object\n     *     containing the response headers and body information\n     *     from the server.\n     *\n     * @see AWS.Request\n     */\n\n\n    AWS.Response = inherit({\n      /**\n       * @api private\n       */\n      constructor: function Response(request) {\n        this.request = request;\n        this.data = null;\n        this.error = null;\n        this.retryCount = 0;\n        this.redirectCount = 0;\n        this.httpResponse = new AWS.HttpResponse();\n\n        if (request) {\n          this.maxRetries = request.service.numRetries();\n          this.maxRedirects = request.service.config.maxRedirects;\n        }\n      },\n\n      /**\n       * Creates a new request for the next page of response data, calling the\n       * callback with the page data if a callback is provided.\n       *\n       * @callback callback function(err, data)\n       *   Called when a page of data is returned from the next request.\n       *\n       *   @param err [Error] an error object, if an error occurred in the request\n       *   @param data [Object] the next page of data, or null, if there are no\n       *     more pages left.\n       * @return [AWS.Request] the request object for the next page of data\n       * @return [null] if no callback is provided and there are no pages left\n       *   to retrieve.\n       * @since v1.4.0\n       */\n      nextPage: function nextPage(callback) {\n        var config;\n        var service = this.request.service;\n        var operation = this.request.operation;\n\n        try {\n          config = service.paginationConfig(operation, true);\n        } catch (e) {\n          this.error = e;\n        }\n\n        if (!this.hasNextPage()) {\n          if (callback) callback(this.error, null);else if (this.error) throw this.error;\n          return null;\n        }\n\n        var params = AWS.util.copy(this.request.params);\n\n        if (!this.nextPageTokens) {\n          return callback ? callback(null, null) : null;\n        } else {\n          var inputTokens = config.inputToken;\n          if (typeof inputTokens === 'string') inputTokens = [inputTokens];\n\n          for (var i = 0; i < inputTokens.length; i++) {\n            params[inputTokens[i]] = this.nextPageTokens[i];\n          }\n\n          return service.makeRequest(this.request.operation, params, callback);\n        }\n      },\n\n      /**\n       * @return [Boolean] whether more pages of data can be returned by further\n       *   requests\n       * @since v1.4.0\n       */\n      hasNextPage: function hasNextPage() {\n        this.cacheNextPageTokens();\n        if (this.nextPageTokens) return true;\n        if (this.nextPageTokens === undefined) return undefined;else return false;\n      },\n\n      /**\n       * @api private\n       */\n      cacheNextPageTokens: function cacheNextPageTokens() {\n        if (Object.prototype.hasOwnProperty.call(this, 'nextPageTokens')) return this.nextPageTokens;\n        this.nextPageTokens = undefined;\n        var config = this.request.service.paginationConfig(this.request.operation);\n        if (!config) return this.nextPageTokens;\n        this.nextPageTokens = null;\n\n        if (config.moreResults) {\n          if (!jmespath.search(this.data, config.moreResults)) {\n            return this.nextPageTokens;\n          }\n        }\n\n        var exprs = config.outputToken;\n        if (typeof exprs === 'string') exprs = [exprs];\n        AWS.util.arrayEach.call(this, exprs, function (expr) {\n          var output = jmespath.search(this.data, expr);\n\n          if (output) {\n            this.nextPageTokens = this.nextPageTokens || [];\n            this.nextPageTokens.push(output);\n          }\n        });\n        return this.nextPageTokens;\n      }\n    });\n  }, {\n    \"./core\": 18,\n    \"jmespath\": 84\n  }],\n  58: [function (require, module, exports) {\n    var AWS = require('./core');\n    /**\n     * @api private\n     * @!method on(eventName, callback)\n     *   Registers an event listener callback for the event given by `eventName`.\n     *   Parameters passed to the callback function depend on the individual event\n     *   being triggered. See the event documentation for those parameters.\n     *\n     *   @param eventName [String] the event name to register the listener for\n     *   @param callback [Function] the listener callback function\n     *   @param toHead [Boolean] attach the listener callback to the head of callback array if set to true.\n     *     Default to be false.\n     *   @return [AWS.SequentialExecutor] the same object for chaining\n     */\n\n\n    AWS.SequentialExecutor = AWS.util.inherit({\n      constructor: function SequentialExecutor() {\n        this._events = {};\n      },\n\n      /**\n       * @api private\n       */\n      listeners: function listeners(eventName) {\n        return this._events[eventName] ? this._events[eventName].slice(0) : [];\n      },\n      on: function on(eventName, listener, toHead) {\n        if (this._events[eventName]) {\n          toHead ? this._events[eventName].unshift(listener) : this._events[eventName].push(listener);\n        } else {\n          this._events[eventName] = [listener];\n        }\n\n        return this;\n      },\n      onAsync: function onAsync(eventName, listener, toHead) {\n        listener._isAsync = true;\n        return this.on(eventName, listener, toHead);\n      },\n      removeListener: function removeListener(eventName, listener) {\n        var listeners = this._events[eventName];\n\n        if (listeners) {\n          var length = listeners.length;\n          var position = -1;\n\n          for (var i = 0; i < length; ++i) {\n            if (listeners[i] === listener) {\n              position = i;\n            }\n          }\n\n          if (position > -1) {\n            listeners.splice(position, 1);\n          }\n        }\n\n        return this;\n      },\n      removeAllListeners: function removeAllListeners(eventName) {\n        if (eventName) {\n          delete this._events[eventName];\n        } else {\n          this._events = {};\n        }\n\n        return this;\n      },\n\n      /**\n       * @api private\n       */\n      emit: function emit(eventName, eventArgs, doneCallback) {\n        if (!doneCallback) doneCallback = function () {};\n        var listeners = this.listeners(eventName);\n        var count = listeners.length;\n        this.callListeners(listeners, eventArgs, doneCallback);\n        return count > 0;\n      },\n\n      /**\n       * @api private\n       */\n      callListeners: function callListeners(listeners, args, doneCallback, prevError) {\n        var self = this;\n        var error = prevError || null;\n\n        function callNextListener(err) {\n          if (err) {\n            error = AWS.util.error(error || new Error(), err);\n\n            if (self._haltHandlersOnError) {\n              return doneCallback.call(self, error);\n            }\n          }\n\n          self.callListeners(listeners, args, doneCallback, error);\n        }\n\n        while (listeners.length > 0) {\n          var listener = listeners.shift();\n\n          if (listener._isAsync) {\n            // asynchronous listener\n            listener.apply(self, args.concat([callNextListener]));\n            return; // stop here, callNextListener will continue\n          } else {\n            // synchronous listener\n            try {\n              listener.apply(self, args);\n            } catch (err) {\n              error = AWS.util.error(error || new Error(), err);\n            }\n\n            if (error && self._haltHandlersOnError) {\n              doneCallback.call(self, error);\n              return;\n            }\n          }\n        }\n\n        doneCallback.call(self, error);\n      },\n\n      /**\n       * Adds or copies a set of listeners from another list of\n       * listeners or SequentialExecutor object.\n       *\n       * @param listeners [map<String,Array<Function>>, AWS.SequentialExecutor]\n       *   a list of events and callbacks, or an event emitter object\n       *   containing listeners to add to this emitter object.\n       * @return [AWS.SequentialExecutor] the emitter object, for chaining.\n       * @example Adding listeners from a map of listeners\n       *   emitter.addListeners({\n       *     event1: [function() { ... }, function() { ... }],\n       *     event2: [function() { ... }]\n       *   });\n       *   emitter.emit('event1'); // emitter has event1\n       *   emitter.emit('event2'); // emitter has event2\n       * @example Adding listeners from another emitter object\n       *   var emitter1 = new AWS.SequentialExecutor();\n       *   emitter1.on('event1', function() { ... });\n       *   emitter1.on('event2', function() { ... });\n       *   var emitter2 = new AWS.SequentialExecutor();\n       *   emitter2.addListeners(emitter1);\n       *   emitter2.emit('event1'); // emitter2 has event1\n       *   emitter2.emit('event2'); // emitter2 has event2\n       */\n      addListeners: function addListeners(listeners) {\n        var self = this; // extract listeners if parameter is an SequentialExecutor object\n\n        if (listeners._events) listeners = listeners._events;\n        AWS.util.each(listeners, function (event, callbacks) {\n          if (typeof callbacks === 'function') callbacks = [callbacks];\n          AWS.util.arrayEach(callbacks, function (callback) {\n            self.on(event, callback);\n          });\n        });\n        return self;\n      },\n\n      /**\n       * Registers an event with {on} and saves the callback handle function\n       * as a property on the emitter object using a given `name`.\n       *\n       * @param name [String] the property name to set on this object containing\n       *   the callback function handle so that the listener can be removed in\n       *   the future.\n       * @param (see on)\n       * @return (see on)\n       * @example Adding a named listener DATA_CALLBACK\n       *   var listener = function() { doSomething(); };\n       *   emitter.addNamedListener('DATA_CALLBACK', 'data', listener);\n       *\n       *   // the following prints: true\n       *   console.log(emitter.DATA_CALLBACK == listener);\n       */\n      addNamedListener: function addNamedListener(name, eventName, callback, toHead) {\n        this[name] = callback;\n        this.addListener(eventName, callback, toHead);\n        return this;\n      },\n\n      /**\n       * @api private\n       */\n      addNamedAsyncListener: function addNamedAsyncListener(name, eventName, callback, toHead) {\n        callback._isAsync = true;\n        return this.addNamedListener(name, eventName, callback, toHead);\n      },\n\n      /**\n       * Helper method to add a set of named listeners using\n       * {addNamedListener}. The callback contains a parameter\n       * with a handle to the `addNamedListener` method.\n       *\n       * @callback callback function(add)\n       *   The callback function is called immediately in order to provide\n       *   the `add` function to the block. This simplifies the addition of\n       *   a large group of named listeners.\n       *   @param add [Function] the {addNamedListener} function to call\n       *     when registering listeners.\n       * @example Adding a set of named listeners\n       *   emitter.addNamedListeners(function(add) {\n       *     add('DATA_CALLBACK', 'data', function() { ... });\n       *     add('OTHER', 'otherEvent', function() { ... });\n       *     add('LAST', 'lastEvent', function() { ... });\n       *   });\n       *\n       *   // these properties are now set:\n       *   emitter.DATA_CALLBACK;\n       *   emitter.OTHER;\n       *   emitter.LAST;\n       */\n      addNamedListeners: function addNamedListeners(callback) {\n        var self = this;\n        callback(function () {\n          self.addNamedListener.apply(self, arguments);\n        }, function () {\n          self.addNamedAsyncListener.apply(self, arguments);\n        });\n        return this;\n      }\n    });\n    /**\n     * {on} is the prefered method.\n     * @api private\n     */\n\n    AWS.SequentialExecutor.prototype.addListener = AWS.SequentialExecutor.prototype.on;\n    /**\n     * @api private\n     */\n\n    module.exports = AWS.SequentialExecutor;\n  }, {\n    \"./core\": 18\n  }],\n  59: [function (require, module, exports) {\n    (function (process) {\n      var AWS = require('./core');\n\n      var Api = require('./model/api');\n\n      var regionConfig = require('./region_config');\n\n      var inherit = AWS.util.inherit;\n      var clientCount = 0;\n      /**\n       * The service class representing an AWS service.\n       *\n       * @class_abstract This class is an abstract class.\n       *\n       * @!attribute apiVersions\n       *   @return [Array<String>] the list of API versions supported by this service.\n       *   @readonly\n       */\n\n      AWS.Service = inherit({\n        /**\n         * Create a new service object with a configuration object\n         *\n         * @param config [map] a map of configuration options\n         */\n        constructor: function Service(config) {\n          if (!this.loadServiceClass) {\n            throw AWS.util.error(new Error(), 'Service must be constructed with `new\\' operator');\n          }\n\n          var ServiceClass = this.loadServiceClass(config || {});\n\n          if (ServiceClass) {\n            var originalConfig = AWS.util.copy(config);\n            var svc = new ServiceClass(config);\n            Object.defineProperty(svc, '_originalConfig', {\n              get: function () {\n                return originalConfig;\n              },\n              enumerable: false,\n              configurable: true\n            });\n            svc._clientId = ++clientCount;\n            return svc;\n          }\n\n          this.initialize(config);\n        },\n\n        /**\n         * @api private\n         */\n        initialize: function initialize(config) {\n          var svcConfig = AWS.config[this.serviceIdentifier];\n          this.config = new AWS.Config(AWS.config);\n          if (svcConfig) this.config.update(svcConfig, true);\n          if (config) this.config.update(config, true);\n          this.validateService();\n          if (!this.config.endpoint) regionConfig(this);\n          this.config.endpoint = this.endpointFromTemplate(this.config.endpoint);\n          this.setEndpoint(this.config.endpoint); //enable attaching listeners to service client\n\n          AWS.SequentialExecutor.call(this);\n          AWS.Service.addDefaultMonitoringListeners(this);\n\n          if ((this.config.clientSideMonitoring || AWS.Service._clientSideMonitoring) && this.publisher) {\n            var publisher = this.publisher;\n            this.addNamedListener('PUBLISH_API_CALL', 'apiCall', function PUBLISH_API_CALL(event) {\n              process.nextTick(function () {\n                publisher.eventHandler(event);\n              });\n            });\n            this.addNamedListener('PUBLISH_API_ATTEMPT', 'apiCallAttempt', function PUBLISH_API_ATTEMPT(event) {\n              process.nextTick(function () {\n                publisher.eventHandler(event);\n              });\n            });\n          }\n        },\n\n        /**\n         * @api private\n         */\n        validateService: function validateService() {},\n\n        /**\n         * @api private\n         */\n        loadServiceClass: function loadServiceClass(serviceConfig) {\n          var config = serviceConfig;\n\n          if (!AWS.util.isEmpty(this.api)) {\n            return null;\n          } else if (config.apiConfig) {\n            return AWS.Service.defineServiceApi(this.constructor, config.apiConfig);\n          } else if (!this.constructor.services) {\n            return null;\n          } else {\n            config = new AWS.Config(AWS.config);\n            config.update(serviceConfig, true);\n            var version = config.apiVersions[this.constructor.serviceIdentifier];\n            version = version || config.apiVersion;\n            return this.getLatestServiceClass(version);\n          }\n        },\n\n        /**\n         * @api private\n         */\n        getLatestServiceClass: function getLatestServiceClass(version) {\n          version = this.getLatestServiceVersion(version);\n\n          if (this.constructor.services[version] === null) {\n            AWS.Service.defineServiceApi(this.constructor, version);\n          }\n\n          return this.constructor.services[version];\n        },\n\n        /**\n         * @api private\n         */\n        getLatestServiceVersion: function getLatestServiceVersion(version) {\n          if (!this.constructor.services || this.constructor.services.length === 0) {\n            throw new Error('No services defined on ' + this.constructor.serviceIdentifier);\n          }\n\n          if (!version) {\n            version = 'latest';\n          } else if (AWS.util.isType(version, Date)) {\n            version = AWS.util.date.iso8601(version).split('T')[0];\n          }\n\n          if (Object.hasOwnProperty(this.constructor.services, version)) {\n            return version;\n          }\n\n          var keys = Object.keys(this.constructor.services).sort();\n          var selectedVersion = null;\n\n          for (var i = keys.length - 1; i >= 0; i--) {\n            // versions that end in \"*\" are not available on disk and can be\n            // skipped, so do not choose these as selectedVersions\n            if (keys[i][keys[i].length - 1] !== '*') {\n              selectedVersion = keys[i];\n            }\n\n            if (keys[i].substr(0, 10) <= version) {\n              return selectedVersion;\n            }\n          }\n\n          throw new Error('Could not find ' + this.constructor.serviceIdentifier + ' API to satisfy version constraint `' + version + '\\'');\n        },\n\n        /**\n         * @api private\n         */\n        api: {},\n\n        /**\n         * @api private\n         */\n        defaultRetryCount: 3,\n\n        /**\n         * @api private\n         */\n        customizeRequests: function customizeRequests(callback) {\n          if (!callback) {\n            this.customRequestHandler = null;\n          } else if (typeof callback === 'function') {\n            this.customRequestHandler = callback;\n          } else {\n            throw new Error('Invalid callback type \\'' + typeof callback + '\\' provided in customizeRequests');\n          }\n        },\n\n        /**\n         * Calls an operation on a service with the given input parameters.\n         *\n         * @param operation [String] the name of the operation to call on the service.\n         * @param params [map] a map of input options for the operation\n         * @callback callback function(err, data)\n         *   If a callback is supplied, it is called when a response is returned\n         *   from the service.\n         *   @param err [Error] the error object returned from the request.\n         *     Set to `null` if the request is successful.\n         *   @param data [Object] the de-serialized data returned from\n         *     the request. Set to `null` if a request error occurs.\n         */\n        makeRequest: function makeRequest(operation, params, callback) {\n          if (typeof params === 'function') {\n            callback = params;\n            params = null;\n          }\n\n          params = params || {};\n\n          if (this.config.params) {\n            // copy only toplevel bound params\n            var rules = this.api.operations[operation];\n\n            if (rules) {\n              params = AWS.util.copy(params);\n              AWS.util.each(this.config.params, function (key, value) {\n                if (rules.input.members[key]) {\n                  if (params[key] === undefined || params[key] === null) {\n                    params[key] = value;\n                  }\n                }\n              });\n            }\n          }\n\n          var request = new AWS.Request(this, operation, params);\n          this.addAllRequestListeners(request);\n          this.attachMonitoringEmitter(request);\n          if (callback) request.send(callback);\n          return request;\n        },\n\n        /**\n         * Calls an operation on a service with the given input parameters, without\n         * any authentication data. This method is useful for \"public\" API operations.\n         *\n         * @param operation [String] the name of the operation to call on the service.\n         * @param params [map] a map of input options for the operation\n         * @callback callback function(err, data)\n         *   If a callback is supplied, it is called when a response is returned\n         *   from the service.\n         *   @param err [Error] the error object returned from the request.\n         *     Set to `null` if the request is successful.\n         *   @param data [Object] the de-serialized data returned from\n         *     the request. Set to `null` if a request error occurs.\n         */\n        makeUnauthenticatedRequest: function makeUnauthenticatedRequest(operation, params, callback) {\n          if (typeof params === 'function') {\n            callback = params;\n            params = {};\n          }\n\n          var request = this.makeRequest(operation, params).toUnauthenticated();\n          return callback ? request.send(callback) : request;\n        },\n\n        /**\n         * Waits for a given state\n         *\n         * @param state [String] the state on the service to wait for\n         * @param params [map] a map of parameters to pass with each request\n         * @option params $waiter [map] a map of configuration options for the waiter\n         * @option params $waiter.delay [Number] The number of seconds to wait between\n         *                                       requests\n         * @option params $waiter.maxAttempts [Number] The maximum number of requests\n         *                                             to send while waiting\n         * @callback callback function(err, data)\n         *   If a callback is supplied, it is called when a response is returned\n         *   from the service.\n         *   @param err [Error] the error object returned from the request.\n         *     Set to `null` if the request is successful.\n         *   @param data [Object] the de-serialized data returned from\n         *     the request. Set to `null` if a request error occurs.\n         */\n        waitFor: function waitFor(state, params, callback) {\n          var waiter = new AWS.ResourceWaiter(this, state);\n          return waiter.wait(params, callback);\n        },\n\n        /**\n         * @api private\n         */\n        addAllRequestListeners: function addAllRequestListeners(request) {\n          var list = [AWS.events, AWS.EventListeners.Core, this.serviceInterface(), AWS.EventListeners.CorePost];\n\n          for (var i = 0; i < list.length; i++) {\n            if (list[i]) request.addListeners(list[i]);\n          } // disable parameter validation\n\n\n          if (!this.config.paramValidation) {\n            request.removeListener('validate', AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n          }\n\n          if (this.config.logger) {\n            // add logging events\n            request.addListeners(AWS.EventListeners.Logger);\n          }\n\n          this.setupRequestListeners(request); // call prototype's customRequestHandler\n\n          if (typeof this.constructor.prototype.customRequestHandler === 'function') {\n            this.constructor.prototype.customRequestHandler(request);\n          } // call instance's customRequestHandler\n\n\n          if (Object.prototype.hasOwnProperty.call(this, 'customRequestHandler') && typeof this.customRequestHandler === 'function') {\n            this.customRequestHandler(request);\n          }\n        },\n\n        /**\n         * Event recording metrics for a whole API call.\n         * @returns {object} a subset of api call metrics\n         * @api private\n         */\n        apiCallEvent: function apiCallEvent(request) {\n          var api = request.service.api.operations[request.operation];\n          var monitoringEvent = {\n            Type: 'ApiCall',\n            Api: api ? api.name : request.operation,\n            Version: 1,\n            Service: request.service.api.serviceId || request.service.api.endpointPrefix,\n            Region: request.httpRequest.region,\n            MaxRetriesExceeded: 0,\n            UserAgent: request.httpRequest.getUserAgent()\n          };\n          var response = request.response;\n\n          if (response.httpResponse.statusCode) {\n            monitoringEvent.FinalHttpStatusCode = response.httpResponse.statusCode;\n          }\n\n          if (response.error) {\n            var error = response.error;\n            var statusCode = response.httpResponse.statusCode;\n\n            if (statusCode > 299) {\n              if (error.code) monitoringEvent.FinalAwsException = error.code;\n              if (error.message) monitoringEvent.FinalAwsExceptionMessage = error.message;\n            } else {\n              if (error.code || error.name) monitoringEvent.FinalSdkException = error.code || error.name;\n              if (error.message) monitoringEvent.FinalSdkExceptionMessage = error.message;\n            }\n          }\n\n          return monitoringEvent;\n        },\n\n        /**\n         * Event recording metrics for an API call attempt.\n         * @returns {object} a subset of api call attempt metrics\n         * @api private\n         */\n        apiAttemptEvent: function apiAttemptEvent(request) {\n          var api = request.service.api.operations[request.operation];\n          var monitoringEvent = {\n            Type: 'ApiCallAttempt',\n            Api: api ? api.name : request.operation,\n            Version: 1,\n            Service: request.service.api.serviceId || request.service.api.endpointPrefix,\n            Fqdn: request.httpRequest.endpoint.hostname,\n            UserAgent: request.httpRequest.getUserAgent()\n          };\n          var response = request.response;\n\n          if (response.httpResponse.statusCode) {\n            monitoringEvent.HttpStatusCode = response.httpResponse.statusCode;\n          }\n\n          if (!request._unAuthenticated && request.service.config.credentials && request.service.config.credentials.accessKeyId) {\n            monitoringEvent.AccessKey = request.service.config.credentials.accessKeyId;\n          }\n\n          if (!response.httpResponse.headers) return monitoringEvent;\n\n          if (request.httpRequest.headers['x-amz-security-token']) {\n            monitoringEvent.SessionToken = request.httpRequest.headers['x-amz-security-token'];\n          }\n\n          if (response.httpResponse.headers['x-amzn-requestid']) {\n            monitoringEvent.XAmznRequestId = response.httpResponse.headers['x-amzn-requestid'];\n          }\n\n          if (response.httpResponse.headers['x-amz-request-id']) {\n            monitoringEvent.XAmzRequestId = response.httpResponse.headers['x-amz-request-id'];\n          }\n\n          if (response.httpResponse.headers['x-amz-id-2']) {\n            monitoringEvent.XAmzId2 = response.httpResponse.headers['x-amz-id-2'];\n          }\n\n          return monitoringEvent;\n        },\n\n        /**\n         * Add metrics of failed request.\n         * @api private\n         */\n        attemptFailEvent: function attemptFailEvent(request) {\n          var monitoringEvent = this.apiAttemptEvent(request);\n          var response = request.response;\n          var error = response.error;\n\n          if (response.httpResponse.statusCode > 299) {\n            if (error.code) monitoringEvent.AwsException = error.code;\n            if (error.message) monitoringEvent.AwsExceptionMessage = error.message;\n          } else {\n            if (error.code || error.name) monitoringEvent.SdkException = error.code || error.name;\n            if (error.message) monitoringEvent.SdkExceptionMessage = error.message;\n          }\n\n          return monitoringEvent;\n        },\n\n        /**\n         * Attach listeners to request object to fetch metrics of each request\n         * and emit data object through \\'ApiCall\\' and \\'ApiCallAttempt\\' events.\n         * @api private\n         */\n        attachMonitoringEmitter: function attachMonitoringEmitter(request) {\n          var attemptTimestamp; //timestamp marking the beginning of a request attempt\n\n          var attemptStartRealTime; //Start time of request attempt. Used to calculating attemptLatency\n\n          var attemptLatency; //latency from request sent out to http response reaching SDK\n\n          var callStartRealTime; //Start time of API call. Used to calculating API call latency\n\n          var attemptCount = 0; //request.retryCount is not reliable here\n\n          var region; //region cache region for each attempt since it can be updated in plase (e.g. s3)\n\n          var callTimestamp; //timestamp when the request is created\n\n          var self = this;\n          var addToHead = true;\n          request.on('validate', function () {\n            callStartRealTime = AWS.util.realClock.now();\n            callTimestamp = Date.now();\n          }, addToHead);\n          request.on('sign', function () {\n            attemptStartRealTime = AWS.util.realClock.now();\n            attemptTimestamp = Date.now();\n            region = request.httpRequest.region;\n            attemptCount++;\n          }, addToHead);\n          request.on('validateResponse', function () {\n            attemptLatency = Math.round(AWS.util.realClock.now() - attemptStartRealTime);\n          });\n          request.addNamedListener('API_CALL_ATTEMPT', 'success', function API_CALL_ATTEMPT() {\n            var apiAttemptEvent = self.apiAttemptEvent(request);\n            apiAttemptEvent.Timestamp = attemptTimestamp;\n            apiAttemptEvent.AttemptLatency = attemptLatency >= 0 ? attemptLatency : 0;\n            apiAttemptEvent.Region = region;\n            self.emit('apiCallAttempt', [apiAttemptEvent]);\n          });\n          request.addNamedListener('API_CALL_ATTEMPT_RETRY', 'retry', function API_CALL_ATTEMPT_RETRY() {\n            var apiAttemptEvent = self.attemptFailEvent(request);\n            apiAttemptEvent.Timestamp = attemptTimestamp; //attemptLatency may not be available if fail before response\n\n            attemptLatency = attemptLatency || Math.round(AWS.util.realClock.now() - attemptStartRealTime);\n            apiAttemptEvent.AttemptLatency = attemptLatency >= 0 ? attemptLatency : 0;\n            apiAttemptEvent.Region = region;\n            self.emit('apiCallAttempt', [apiAttemptEvent]);\n          });\n          request.addNamedListener('API_CALL', 'complete', function API_CALL() {\n            var apiCallEvent = self.apiCallEvent(request);\n            apiCallEvent.AttemptCount = attemptCount;\n            if (apiCallEvent.AttemptCount <= 0) return;\n            apiCallEvent.Timestamp = callTimestamp;\n            var latency = Math.round(AWS.util.realClock.now() - callStartRealTime);\n            apiCallEvent.Latency = latency >= 0 ? latency : 0;\n            var response = request.response;\n\n            if (typeof response.retryCount === 'number' && typeof response.maxRetries === 'number' && response.retryCount >= response.maxRetries) {\n              apiCallEvent.MaxRetriesExceeded = 1;\n            }\n\n            self.emit('apiCall', [apiCallEvent]);\n          });\n        },\n\n        /**\n         * Override this method to setup any custom request listeners for each\n         * new request to the service.\n         *\n         * @method_abstract This is an abstract method.\n         */\n        setupRequestListeners: function setupRequestListeners(request) {},\n\n        /**\n         * Gets the signer class for a given request\n         * @api private\n         */\n        getSignerClass: function getSignerClass(request) {\n          var version; // get operation authtype if present\n\n          var operation = null;\n          var authtype = '';\n\n          if (request) {\n            var operations = request.service.api.operations || {};\n            operation = operations[request.operation] || null;\n            authtype = operation ? operation.authtype : '';\n          }\n\n          if (this.config.signatureVersion) {\n            version = this.config.signatureVersion;\n          } else if (authtype === 'v4' || authtype === 'v4-unsigned-body') {\n            version = 'v4';\n          } else {\n            version = this.api.signatureVersion;\n          }\n\n          return AWS.Signers.RequestSigner.getVersion(version);\n        },\n\n        /**\n         * @api private\n         */\n        serviceInterface: function serviceInterface() {\n          switch (this.api.protocol) {\n            case 'ec2':\n              return AWS.EventListeners.Query;\n\n            case 'query':\n              return AWS.EventListeners.Query;\n\n            case 'json':\n              return AWS.EventListeners.Json;\n\n            case 'rest-json':\n              return AWS.EventListeners.RestJson;\n\n            case 'rest-xml':\n              return AWS.EventListeners.RestXml;\n          }\n\n          if (this.api.protocol) {\n            throw new Error('Invalid service `protocol\\' ' + this.api.protocol + ' in API config');\n          }\n        },\n\n        /**\n         * @api private\n         */\n        successfulResponse: function successfulResponse(resp) {\n          return resp.httpResponse.statusCode < 300;\n        },\n\n        /**\n         * How many times a failed request should be retried before giving up.\n         * the defaultRetryCount can be overriden by service classes.\n         *\n         * @api private\n         */\n        numRetries: function numRetries() {\n          if (this.config.maxRetries !== undefined) {\n            return this.config.maxRetries;\n          } else {\n            return this.defaultRetryCount;\n          }\n        },\n\n        /**\n         * @api private\n         */\n        retryDelays: function retryDelays(retryCount) {\n          return AWS.util.calculateRetryDelay(retryCount, this.config.retryDelayOptions);\n        },\n\n        /**\n         * @api private\n         */\n        retryableError: function retryableError(error) {\n          if (this.timeoutError(error)) return true;\n          if (this.networkingError(error)) return true;\n          if (this.expiredCredentialsError(error)) return true;\n          if (this.throttledError(error)) return true;\n          if (error.statusCode >= 500) return true;\n          if (error.statusCode === 403) return true;\n          return false;\n        },\n\n        /**\n         * @api private\n         */\n        networkingError: function networkingError(error) {\n          return error.code === 'NetworkingError';\n        },\n\n        /**\n         * @api private\n         */\n        timeoutError: function timeoutError(error) {\n          return error.code === 'TimeoutError';\n        },\n\n        /**\n         * @api private\n         */\n        expiredCredentialsError: function expiredCredentialsError(error) {\n          // TODO : this only handles *one* of the expired credential codes\n          return error.code === 'ExpiredTokenException';\n        },\n\n        /**\n         * @api private\n         */\n        clockSkewError: function clockSkewError(error) {\n          switch (error.code) {\n            case 'RequestTimeTooSkewed':\n            case 'RequestExpired':\n            case 'InvalidSignatureException':\n            case 'SignatureDoesNotMatch':\n            case 'AuthFailure':\n            case 'RequestInTheFuture':\n              return true;\n\n            default:\n              return false;\n          }\n        },\n\n        /**\n         * @api private\n         */\n        getSkewCorrectedDate: function getSkewCorrectedDate() {\n          return new Date(Date.now() + this.config.systemClockOffset);\n        },\n\n        /**\n         * @api private\n         */\n        applyClockOffset: function applyClockOffset(newServerTime) {\n          if (newServerTime) {\n            this.config.systemClockOffset = newServerTime - Date.now();\n          }\n        },\n\n        /**\n         * @api private\n         */\n        isClockSkewed: function isClockSkewed(newServerTime) {\n          if (newServerTime) {\n            return Math.abs(this.getSkewCorrectedDate().getTime() - newServerTime) >= 30000;\n          }\n        },\n\n        /**\n         * @api private\n         */\n        throttledError: function throttledError(error) {\n          // this logic varies between services\n          if (error.statusCode === 429) return true;\n\n          switch (error.code) {\n            case 'ProvisionedThroughputExceededException':\n            case 'Throttling':\n            case 'ThrottlingException':\n            case 'RequestLimitExceeded':\n            case 'RequestThrottled':\n            case 'RequestThrottledException':\n            case 'TooManyRequestsException':\n            case 'TransactionInProgressException':\n              //dynamodb\n              return true;\n\n            default:\n              return false;\n          }\n        },\n\n        /**\n         * @api private\n         */\n        endpointFromTemplate: function endpointFromTemplate(endpoint) {\n          if (typeof endpoint !== 'string') return endpoint;\n          var e = endpoint;\n          e = e.replace(/\\{service\\}/g, this.api.endpointPrefix);\n          e = e.replace(/\\{region\\}/g, this.config.region);\n          e = e.replace(/\\{scheme\\}/g, this.config.sslEnabled ? 'https' : 'http');\n          return e;\n        },\n\n        /**\n         * @api private\n         */\n        setEndpoint: function setEndpoint(endpoint) {\n          this.endpoint = new AWS.Endpoint(endpoint, this.config);\n        },\n\n        /**\n         * @api private\n         */\n        paginationConfig: function paginationConfig(operation, throwException) {\n          var paginator = this.api.operations[operation].paginator;\n\n          if (!paginator) {\n            if (throwException) {\n              var e = new Error();\n              throw AWS.util.error(e, 'No pagination configuration for ' + operation);\n            }\n\n            return null;\n          }\n\n          return paginator;\n        }\n      });\n      AWS.util.update(AWS.Service, {\n        /**\n         * Adds one method for each operation described in the api configuration\n         *\n         * @api private\n         */\n        defineMethods: function defineMethods(svc) {\n          AWS.util.each(svc.prototype.api.operations, function iterator(method) {\n            if (svc.prototype[method]) return;\n            var operation = svc.prototype.api.operations[method];\n\n            if (operation.authtype === 'none') {\n              svc.prototype[method] = function (params, callback) {\n                return this.makeUnauthenticatedRequest(method, params, callback);\n              };\n            } else {\n              svc.prototype[method] = function (params, callback) {\n                return this.makeRequest(method, params, callback);\n              };\n            }\n          });\n        },\n\n        /**\n         * Defines a new Service class using a service identifier and list of versions\n         * including an optional set of features (functions) to apply to the class\n         * prototype.\n         *\n         * @param serviceIdentifier [String] the identifier for the service\n         * @param versions [Array<String>] a list of versions that work with this\n         *   service\n         * @param features [Object] an object to attach to the prototype\n         * @return [Class<Service>] the service class defined by this function.\n         */\n        defineService: function defineService(serviceIdentifier, versions, features) {\n          AWS.Service._serviceMap[serviceIdentifier] = true;\n\n          if (!Array.isArray(versions)) {\n            features = versions;\n            versions = [];\n          }\n\n          var svc = inherit(AWS.Service, features || {});\n\n          if (typeof serviceIdentifier === 'string') {\n            AWS.Service.addVersions(svc, versions);\n            var identifier = svc.serviceIdentifier || serviceIdentifier;\n            svc.serviceIdentifier = identifier;\n          } else {\n            // defineService called with an API\n            svc.prototype.api = serviceIdentifier;\n            AWS.Service.defineMethods(svc);\n          }\n\n          AWS.SequentialExecutor.call(this.prototype); //util.clientSideMonitoring is only available in node\n\n          if (!this.prototype.publisher && AWS.util.clientSideMonitoring) {\n            var Publisher = AWS.util.clientSideMonitoring.Publisher;\n            var configProvider = AWS.util.clientSideMonitoring.configProvider;\n            var publisherConfig = configProvider();\n            this.prototype.publisher = new Publisher(publisherConfig);\n\n            if (publisherConfig.enabled) {\n              //if csm is enabled in environment, SDK should send all metrics\n              AWS.Service._clientSideMonitoring = true;\n            }\n          }\n\n          AWS.SequentialExecutor.call(svc.prototype);\n          AWS.Service.addDefaultMonitoringListeners(svc.prototype);\n          return svc;\n        },\n\n        /**\n         * @api private\n         */\n        addVersions: function addVersions(svc, versions) {\n          if (!Array.isArray(versions)) versions = [versions];\n          svc.services = svc.services || {};\n\n          for (var i = 0; i < versions.length; i++) {\n            if (svc.services[versions[i]] === undefined) {\n              svc.services[versions[i]] = null;\n            }\n          }\n\n          svc.apiVersions = Object.keys(svc.services).sort();\n        },\n\n        /**\n         * @api private\n         */\n        defineServiceApi: function defineServiceApi(superclass, version, apiConfig) {\n          var svc = inherit(superclass, {\n            serviceIdentifier: superclass.serviceIdentifier\n          });\n\n          function setApi(api) {\n            if (api.isApi) {\n              svc.prototype.api = api;\n            } else {\n              svc.prototype.api = new Api(api);\n            }\n          }\n\n          if (typeof version === 'string') {\n            if (apiConfig) {\n              setApi(apiConfig);\n            } else {\n              try {\n                setApi(AWS.apiLoader(superclass.serviceIdentifier, version));\n              } catch (err) {\n                throw AWS.util.error(err, {\n                  message: 'Could not find API configuration ' + superclass.serviceIdentifier + '-' + version\n                });\n              }\n            }\n\n            if (!Object.prototype.hasOwnProperty.call(superclass.services, version)) {\n              superclass.apiVersions = superclass.apiVersions.concat(version).sort();\n            }\n\n            superclass.services[version] = svc;\n          } else {\n            setApi(version);\n          }\n\n          AWS.Service.defineMethods(svc);\n          return svc;\n        },\n\n        /**\n         * @api private\n         */\n        hasService: function (identifier) {\n          return Object.prototype.hasOwnProperty.call(AWS.Service._serviceMap, identifier);\n        },\n\n        /**\n         * @param attachOn attach default monitoring listeners to object\n         *\n         * Each monitoring event should be emitted from service client to service constructor prototype and then\n         * to global service prototype like bubbling up. These default monitoring events listener will transfer\n         * the monitoring events to the upper layer.\n         * @api private\n         */\n        addDefaultMonitoringListeners: function addDefaultMonitoringListeners(attachOn) {\n          attachOn.addNamedListener('MONITOR_EVENTS_BUBBLE', 'apiCallAttempt', function EVENTS_BUBBLE(event) {\n            var baseClass = Object.getPrototypeOf(attachOn);\n            if (baseClass._events) baseClass.emit('apiCallAttempt', [event]);\n          });\n          attachOn.addNamedListener('CALL_EVENTS_BUBBLE', 'apiCall', function CALL_EVENTS_BUBBLE(event) {\n            var baseClass = Object.getPrototypeOf(attachOn);\n            if (baseClass._events) baseClass.emit('apiCall', [event]);\n          });\n        },\n\n        /**\n         * @api private\n         */\n        _serviceMap: {}\n      });\n      AWS.util.mixin(AWS.Service, AWS.SequentialExecutor);\n      /**\n       * @api private\n       */\n\n      module.exports = AWS.Service;\n    }).call(this, require('_process'));\n  }, {\n    \"./core\": 18,\n    \"./model/api\": 38,\n    \"./region_config\": 53,\n    \"_process\": 85\n  }],\n  60: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    AWS.util.update(AWS.CognitoIdentity.prototype, {\n      getOpenIdToken: function getOpenIdToken(params, callback) {\n        return this.makeUnauthenticatedRequest('getOpenIdToken', params, callback);\n      },\n      getId: function getId(params, callback) {\n        return this.makeUnauthenticatedRequest('getId', params, callback);\n      },\n      getCredentialsForIdentity: function getCredentialsForIdentity(params, callback) {\n        return this.makeUnauthenticatedRequest('getCredentialsForIdentity', params, callback);\n      }\n    });\n  }, {\n    \"../core\": 18\n  }],\n  61: [function (require, module, exports) {\n    (function (process) {\n      var AWS = require('../core');\n\n      var regionConfig = require('../region_config');\n\n      var ENV_REGIONAL_ENDPOINT_ENABLED = 'AWS_STS_REGIONAL_ENDPOINTS';\n      var CONFIG_REGIONAL_ENDPOINT_ENABLED = 'sts_regional_endpoints';\n      AWS.util.update(AWS.STS.prototype, {\n        /**\n         * @overload credentialsFrom(data, credentials = null)\n         *   Creates a credentials object from STS response data containing\n         *   credentials information. Useful for quickly setting AWS credentials.\n         *\n         *   @note This is a low-level utility function. If you want to load temporary\n         *     credentials into your process for subsequent requests to AWS resources,\n         *     you should use {AWS.TemporaryCredentials} instead.\n         *   @param data [map] data retrieved from a call to {getFederatedToken},\n         *     {getSessionToken}, {assumeRole}, or {assumeRoleWithWebIdentity}.\n         *   @param credentials [AWS.Credentials] an optional credentials object to\n         *     fill instead of creating a new object. Useful when modifying an\n         *     existing credentials object from a refresh call.\n         *   @return [AWS.TemporaryCredentials] the set of temporary credentials\n         *     loaded from a raw STS operation response.\n         *   @example Using credentialsFrom to load global AWS credentials\n         *     var sts = new AWS.STS();\n         *     sts.getSessionToken(function (err, data) {\n         *       if (err) console.log(\"Error getting credentials\");\n         *       else {\n         *         AWS.config.credentials = sts.credentialsFrom(data);\n         *       }\n         *     });\n         *   @see AWS.TemporaryCredentials\n         */\n        credentialsFrom: function credentialsFrom(data, credentials) {\n          if (!data) return null;\n          if (!credentials) credentials = new AWS.TemporaryCredentials();\n          credentials.expired = false;\n          credentials.accessKeyId = data.Credentials.AccessKeyId;\n          credentials.secretAccessKey = data.Credentials.SecretAccessKey;\n          credentials.sessionToken = data.Credentials.SessionToken;\n          credentials.expireTime = data.Credentials.Expiration;\n          return credentials;\n        },\n        assumeRoleWithWebIdentity: function assumeRoleWithWebIdentity(params, callback) {\n          return this.makeUnauthenticatedRequest('assumeRoleWithWebIdentity', params, callback);\n        },\n        assumeRoleWithSAML: function assumeRoleWithSAML(params, callback) {\n          return this.makeUnauthenticatedRequest('assumeRoleWithSAML', params, callback);\n        },\n\n        /**\n         * @api private\n         */\n        validateRegionalEndpointsFlagValue: function validateRegionalEndpointsFlagValue(configValue, errorOptions) {\n          if (typeof configValue === 'string' && ['legacy', 'regional'].indexOf(configValue.toLowerCase()) >= 0) {\n            this.config.stsRegionalEndpoints = configValue.toLowerCase();\n            return;\n          } else {\n            throw AWS.util.error(new Error(), errorOptions);\n          }\n        },\n\n        /**\n         * @api private\n         */\n        validateRegionalEndpointsFlag: function validateRegionalEndpointsFlag() {\n          //validate config value\n          var config = this.config;\n\n          if (config.stsRegionalEndpoints) {\n            this.validateRegionalEndpointsFlagValue(config.stsRegionalEndpoints, {\n              code: 'InvalidConfiguration',\n              message: 'invalid \"stsRegionalEndpoints\" configuration. Expect \"legacy\" ' + ' or \"regional\". Got \"' + config.stsRegionalEndpoints + '\".'\n            });\n          }\n\n          if (!AWS.util.isNode()) return; //validate environmental variable\n\n          if (Object.prototype.hasOwnProperty.call(process.env, ENV_REGIONAL_ENDPOINT_ENABLED)) {\n            var envFlag = process.env[ENV_REGIONAL_ENDPOINT_ENABLED];\n            this.validateRegionalEndpointsFlagValue(envFlag, {\n              code: 'InvalidEnvironmentalVariable',\n              message: 'invalid ' + ENV_REGIONAL_ENDPOINT_ENABLED + ' environmental variable. Expect \"legacy\" ' + ' or \"regional\". Got \"' + process.env[ENV_REGIONAL_ENDPOINT_ENABLED] + '\".'\n            });\n          } //validate shared config file\n\n\n          var profile = {};\n\n          try {\n            var profiles = AWS.util.getProfilesFromSharedConfig(AWS.util.iniLoader);\n            profile = profiles[process.env.AWS_PROFILE || AWS.util.defaultProfile];\n          } catch (e) {}\n\n          ;\n\n          if (profile && Object.prototype.hasOwnProperty.call(profile, CONFIG_REGIONAL_ENDPOINT_ENABLED)) {\n            var fileFlag = profile[CONFIG_REGIONAL_ENDPOINT_ENABLED];\n            this.validateRegionalEndpointsFlagValue(fileFlag, {\n              code: 'InvalidConfiguration',\n              message: 'invalid ' + CONFIG_REGIONAL_ENDPOINT_ENABLED + ' profile config. Expect \"legacy\" ' + ' or \"regional\". Got \"' + profile[CONFIG_REGIONAL_ENDPOINT_ENABLED] + '\".'\n            });\n          }\n        },\n\n        /**\n         * @api private\n         */\n        optInRegionalEndpoint: function optInRegionalEndpoint() {\n          this.validateRegionalEndpointsFlag();\n          var config = this.config;\n\n          if (config.stsRegionalEndpoints === 'regional') {\n            regionConfig(this);\n            if (!this.isGlobalEndpoint) return;\n            this.isGlobalEndpoint = false; //client will throw if region is not supplied; request will be signed with specified region\n\n            if (!config.region) {\n              throw AWS.util.error(new Error(), {\n                code: 'ConfigError',\n                message: 'Missing region in config'\n              });\n            }\n\n            var insertPoint = config.endpoint.indexOf('.amazonaws.com');\n            config.endpoint = config.endpoint.substring(0, insertPoint) + '.' + config.region + config.endpoint.substring(insertPoint);\n          }\n        },\n        validateService: function validateService() {\n          this.optInRegionalEndpoint();\n        }\n      });\n    }).call(this, require('_process'));\n  }, {\n    \"../core\": 18,\n    \"../region_config\": 53,\n    \"_process\": 85\n  }],\n  62: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    var inherit = AWS.util.inherit;\n    /**\n     * @api private\n     */\n\n    var expiresHeader = 'presigned-expires';\n    /**\n     * @api private\n     */\n\n    function signedUrlBuilder(request) {\n      var expires = request.httpRequest.headers[expiresHeader];\n      var signerClass = request.service.getSignerClass(request);\n      delete request.httpRequest.headers['User-Agent'];\n      delete request.httpRequest.headers['X-Amz-User-Agent'];\n\n      if (signerClass === AWS.Signers.V4) {\n        if (expires > 604800) {\n          // one week expiry is invalid\n          var message = 'Presigning does not support expiry time greater ' + 'than a week with SigV4 signing.';\n          throw AWS.util.error(new Error(), {\n            code: 'InvalidExpiryTime',\n            message: message,\n            retryable: false\n          });\n        }\n\n        request.httpRequest.headers[expiresHeader] = expires;\n      } else if (signerClass === AWS.Signers.S3) {\n        var now = request.service ? request.service.getSkewCorrectedDate() : AWS.util.date.getDate();\n        request.httpRequest.headers[expiresHeader] = parseInt(AWS.util.date.unixTimestamp(now) + expires, 10).toString();\n      } else {\n        throw AWS.util.error(new Error(), {\n          message: 'Presigning only supports S3 or SigV4 signing.',\n          code: 'UnsupportedSigner',\n          retryable: false\n        });\n      }\n    }\n    /**\n     * @api private\n     */\n\n\n    function signedUrlSigner(request) {\n      var endpoint = request.httpRequest.endpoint;\n      var parsedUrl = AWS.util.urlParse(request.httpRequest.path);\n      var queryParams = {};\n\n      if (parsedUrl.search) {\n        queryParams = AWS.util.queryStringParse(parsedUrl.search.substr(1));\n      }\n\n      var auth = request.httpRequest.headers['Authorization'].split(' ');\n\n      if (auth[0] === 'AWS') {\n        auth = auth[1].split(':');\n        queryParams['AWSAccessKeyId'] = auth[0];\n        queryParams['Signature'] = auth[1];\n        AWS.util.each(request.httpRequest.headers, function (key, value) {\n          if (key === expiresHeader) key = 'Expires';\n\n          if (key.indexOf('x-amz-meta-') === 0) {\n            // Delete existing, potentially not normalized key\n            delete queryParams[key];\n            key = key.toLowerCase();\n          }\n\n          queryParams[key] = value;\n        });\n        delete request.httpRequest.headers[expiresHeader];\n        delete queryParams['Authorization'];\n        delete queryParams['Host'];\n      } else if (auth[0] === 'AWS4-HMAC-SHA256') {\n        // SigV4 signing\n        auth.shift();\n        var rest = auth.join(' ');\n        var signature = rest.match(/Signature=(.*?)(?:,|\\s|\\r?\\n|$)/)[1];\n        queryParams['X-Amz-Signature'] = signature;\n        delete queryParams['Expires'];\n      } // build URL\n\n\n      endpoint.pathname = parsedUrl.pathname;\n      endpoint.search = AWS.util.queryParamsToString(queryParams);\n    }\n    /**\n     * @api private\n     */\n\n\n    AWS.Signers.Presign = inherit({\n      /**\n       * @api private\n       */\n      sign: function sign(request, expireTime, callback) {\n        request.httpRequest.headers[expiresHeader] = expireTime || 3600;\n        request.on('build', signedUrlBuilder);\n        request.on('sign', signedUrlSigner);\n        request.removeListener('afterBuild', AWS.EventListeners.Core.SET_CONTENT_LENGTH);\n        request.removeListener('afterBuild', AWS.EventListeners.Core.COMPUTE_SHA256);\n        request.emit('beforePresign', [request]);\n\n        if (callback) {\n          request.build(function () {\n            if (this.response.error) callback(this.response.error);else {\n              callback(null, AWS.util.urlFormat(request.httpRequest.endpoint));\n            }\n          });\n        } else {\n          request.build();\n          if (request.response.error) throw request.response.error;\n          return AWS.util.urlFormat(request.httpRequest.endpoint);\n        }\n      }\n    });\n    /**\n     * @api private\n     */\n\n    module.exports = AWS.Signers.Presign;\n  }, {\n    \"../core\": 18\n  }],\n  63: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    var inherit = AWS.util.inherit;\n    /**\n     * @api private\n     */\n\n    AWS.Signers.RequestSigner = inherit({\n      constructor: function RequestSigner(request) {\n        this.request = request;\n      },\n      setServiceClientId: function setServiceClientId(id) {\n        this.serviceClientId = id;\n      },\n      getServiceClientId: function getServiceClientId() {\n        return this.serviceClientId;\n      }\n    });\n\n    AWS.Signers.RequestSigner.getVersion = function getVersion(version) {\n      switch (version) {\n        case 'v2':\n          return AWS.Signers.V2;\n\n        case 'v3':\n          return AWS.Signers.V3;\n\n        case 's3v4':\n          return AWS.Signers.V4;\n\n        case 'v4':\n          return AWS.Signers.V4;\n\n        case 's3':\n          return AWS.Signers.S3;\n\n        case 'v3https':\n          return AWS.Signers.V3Https;\n      }\n\n      throw new Error('Unknown signing version ' + version);\n    };\n\n    require('./v2');\n\n    require('./v3');\n\n    require('./v3https');\n\n    require('./v4');\n\n    require('./s3');\n\n    require('./presign');\n  }, {\n    \"../core\": 18,\n    \"./presign\": 62,\n    \"./s3\": 64,\n    \"./v2\": 65,\n    \"./v3\": 66,\n    \"./v3https\": 67,\n    \"./v4\": 68\n  }],\n  64: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    var inherit = AWS.util.inherit;\n    /**\n     * @api private\n     */\n\n    AWS.Signers.S3 = inherit(AWS.Signers.RequestSigner, {\n      /**\n       * When building the stringToSign, these sub resource params should be\n       * part of the canonical resource string with their NON-decoded values\n       */\n      subResources: {\n        'acl': 1,\n        'accelerate': 1,\n        'analytics': 1,\n        'cors': 1,\n        'lifecycle': 1,\n        'delete': 1,\n        'inventory': 1,\n        'location': 1,\n        'logging': 1,\n        'metrics': 1,\n        'notification': 1,\n        'partNumber': 1,\n        'policy': 1,\n        'requestPayment': 1,\n        'replication': 1,\n        'restore': 1,\n        'tagging': 1,\n        'torrent': 1,\n        'uploadId': 1,\n        'uploads': 1,\n        'versionId': 1,\n        'versioning': 1,\n        'versions': 1,\n        'website': 1\n      },\n      // when building the stringToSign, these querystring params should be\n      // part of the canonical resource string with their NON-encoded values\n      responseHeaders: {\n        'response-content-type': 1,\n        'response-content-language': 1,\n        'response-expires': 1,\n        'response-cache-control': 1,\n        'response-content-disposition': 1,\n        'response-content-encoding': 1\n      },\n      addAuthorization: function addAuthorization(credentials, date) {\n        if (!this.request.headers['presigned-expires']) {\n          this.request.headers['X-Amz-Date'] = AWS.util.date.rfc822(date);\n        }\n\n        if (credentials.sessionToken) {\n          // presigned URLs require this header to be lowercased\n          this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n        }\n\n        var signature = this.sign(credentials.secretAccessKey, this.stringToSign());\n        var auth = 'AWS ' + credentials.accessKeyId + ':' + signature;\n        this.request.headers['Authorization'] = auth;\n      },\n      stringToSign: function stringToSign() {\n        var r = this.request;\n        var parts = [];\n        parts.push(r.method);\n        parts.push(r.headers['Content-MD5'] || '');\n        parts.push(r.headers['Content-Type'] || ''); // This is the \"Date\" header, but we use X-Amz-Date.\n        // The S3 signing mechanism requires us to pass an empty\n        // string for this Date header regardless.\n\n        parts.push(r.headers['presigned-expires'] || '');\n        var headers = this.canonicalizedAmzHeaders();\n        if (headers) parts.push(headers);\n        parts.push(this.canonicalizedResource());\n        return parts.join('\\n');\n      },\n      canonicalizedAmzHeaders: function canonicalizedAmzHeaders() {\n        var amzHeaders = [];\n        AWS.util.each(this.request.headers, function (name) {\n          if (name.match(/^x-amz-/i)) amzHeaders.push(name);\n        });\n        amzHeaders.sort(function (a, b) {\n          return a.toLowerCase() < b.toLowerCase() ? -1 : 1;\n        });\n        var parts = [];\n        AWS.util.arrayEach.call(this, amzHeaders, function (name) {\n          parts.push(name.toLowerCase() + ':' + String(this.request.headers[name]));\n        });\n        return parts.join('\\n');\n      },\n      canonicalizedResource: function canonicalizedResource() {\n        var r = this.request;\n        var parts = r.path.split('?');\n        var path = parts[0];\n        var querystring = parts[1];\n        var resource = '';\n        if (r.virtualHostedBucket) resource += '/' + r.virtualHostedBucket;\n        resource += path;\n\n        if (querystring) {\n          // collect a list of sub resources and query params that need to be signed\n          var resources = [];\n          AWS.util.arrayEach.call(this, querystring.split('&'), function (param) {\n            var name = param.split('=')[0];\n            var value = param.split('=')[1];\n\n            if (this.subResources[name] || this.responseHeaders[name]) {\n              var subresource = {\n                name: name\n              };\n\n              if (value !== undefined) {\n                if (this.subResources[name]) {\n                  subresource.value = value;\n                } else {\n                  subresource.value = decodeURIComponent(value);\n                }\n              }\n\n              resources.push(subresource);\n            }\n          });\n          resources.sort(function (a, b) {\n            return a.name < b.name ? -1 : 1;\n          });\n\n          if (resources.length) {\n            querystring = [];\n            AWS.util.arrayEach(resources, function (res) {\n              if (res.value === undefined) {\n                querystring.push(res.name);\n              } else {\n                querystring.push(res.name + '=' + res.value);\n              }\n            });\n            resource += '?' + querystring.join('&');\n          }\n        }\n\n        return resource;\n      },\n      sign: function sign(secret, string) {\n        return AWS.util.crypto.hmac(secret, string, 'base64', 'sha1');\n      }\n    });\n    /**\n     * @api private\n     */\n\n    module.exports = AWS.Signers.S3;\n  }, {\n    \"../core\": 18\n  }],\n  65: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    var inherit = AWS.util.inherit;\n    /**\n     * @api private\n     */\n\n    AWS.Signers.V2 = inherit(AWS.Signers.RequestSigner, {\n      addAuthorization: function addAuthorization(credentials, date) {\n        if (!date) date = AWS.util.date.getDate();\n        var r = this.request;\n        r.params.Timestamp = AWS.util.date.iso8601(date);\n        r.params.SignatureVersion = '2';\n        r.params.SignatureMethod = 'HmacSHA256';\n        r.params.AWSAccessKeyId = credentials.accessKeyId;\n\n        if (credentials.sessionToken) {\n          r.params.SecurityToken = credentials.sessionToken;\n        }\n\n        delete r.params.Signature; // delete old Signature for re-signing\n\n        r.params.Signature = this.signature(credentials);\n        r.body = AWS.util.queryParamsToString(r.params);\n        r.headers['Content-Length'] = r.body.length;\n      },\n      signature: function signature(credentials) {\n        return AWS.util.crypto.hmac(credentials.secretAccessKey, this.stringToSign(), 'base64');\n      },\n      stringToSign: function stringToSign() {\n        var parts = [];\n        parts.push(this.request.method);\n        parts.push(this.request.endpoint.host.toLowerCase());\n        parts.push(this.request.pathname());\n        parts.push(AWS.util.queryParamsToString(this.request.params));\n        return parts.join('\\n');\n      }\n    });\n    /**\n     * @api private\n     */\n\n    module.exports = AWS.Signers.V2;\n  }, {\n    \"../core\": 18\n  }],\n  66: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    var inherit = AWS.util.inherit;\n    /**\n     * @api private\n     */\n\n    AWS.Signers.V3 = inherit(AWS.Signers.RequestSigner, {\n      addAuthorization: function addAuthorization(credentials, date) {\n        var datetime = AWS.util.date.rfc822(date);\n        this.request.headers['X-Amz-Date'] = datetime;\n\n        if (credentials.sessionToken) {\n          this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n        }\n\n        this.request.headers['X-Amzn-Authorization'] = this.authorization(credentials, datetime);\n      },\n      authorization: function authorization(credentials) {\n        return 'AWS3 ' + 'AWSAccessKeyId=' + credentials.accessKeyId + ',' + 'Algorithm=HmacSHA256,' + 'SignedHeaders=' + this.signedHeaders() + ',' + 'Signature=' + this.signature(credentials);\n      },\n      signedHeaders: function signedHeaders() {\n        var headers = [];\n        AWS.util.arrayEach(this.headersToSign(), function iterator(h) {\n          headers.push(h.toLowerCase());\n        });\n        return headers.sort().join(';');\n      },\n      canonicalHeaders: function canonicalHeaders() {\n        var headers = this.request.headers;\n        var parts = [];\n        AWS.util.arrayEach(this.headersToSign(), function iterator(h) {\n          parts.push(h.toLowerCase().trim() + ':' + String(headers[h]).trim());\n        });\n        return parts.sort().join('\\n') + '\\n';\n      },\n      headersToSign: function headersToSign() {\n        var headers = [];\n        AWS.util.each(this.request.headers, function iterator(k) {\n          if (k === 'Host' || k === 'Content-Encoding' || k.match(/^X-Amz/i)) {\n            headers.push(k);\n          }\n        });\n        return headers;\n      },\n      signature: function signature(credentials) {\n        return AWS.util.crypto.hmac(credentials.secretAccessKey, this.stringToSign(), 'base64');\n      },\n      stringToSign: function stringToSign() {\n        var parts = [];\n        parts.push(this.request.method);\n        parts.push('/');\n        parts.push('');\n        parts.push(this.canonicalHeaders());\n        parts.push(this.request.body);\n        return AWS.util.crypto.sha256(parts.join('\\n'));\n      }\n    });\n    /**\n     * @api private\n     */\n\n    module.exports = AWS.Signers.V3;\n  }, {\n    \"../core\": 18\n  }],\n  67: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    var inherit = AWS.util.inherit;\n\n    require('./v3');\n    /**\n     * @api private\n     */\n\n\n    AWS.Signers.V3Https = inherit(AWS.Signers.V3, {\n      authorization: function authorization(credentials) {\n        return 'AWS3-HTTPS ' + 'AWSAccessKeyId=' + credentials.accessKeyId + ',' + 'Algorithm=HmacSHA256,' + 'Signature=' + this.signature(credentials);\n      },\n      stringToSign: function stringToSign() {\n        return this.request.headers['X-Amz-Date'];\n      }\n    });\n    /**\n     * @api private\n     */\n\n    module.exports = AWS.Signers.V3Https;\n  }, {\n    \"../core\": 18,\n    \"./v3\": 66\n  }],\n  68: [function (require, module, exports) {\n    var AWS = require('../core');\n\n    var v4Credentials = require('./v4_credentials');\n\n    var inherit = AWS.util.inherit;\n    /**\n     * @api private\n     */\n\n    var expiresHeader = 'presigned-expires';\n    /**\n     * @api private\n     */\n\n    AWS.Signers.V4 = inherit(AWS.Signers.RequestSigner, {\n      constructor: function V4(request, serviceName, options) {\n        AWS.Signers.RequestSigner.call(this, request);\n        this.serviceName = serviceName;\n        options = options || {};\n        this.signatureCache = typeof options.signatureCache === 'boolean' ? options.signatureCache : true;\n        this.operation = options.operation;\n        this.signatureVersion = options.signatureVersion;\n      },\n      algorithm: 'AWS4-HMAC-SHA256',\n      addAuthorization: function addAuthorization(credentials, date) {\n        var datetime = AWS.util.date.iso8601(date).replace(/[:\\-]|\\.\\d{3}/g, '');\n\n        if (this.isPresigned()) {\n          this.updateForPresigned(credentials, datetime);\n        } else {\n          this.addHeaders(credentials, datetime);\n        }\n\n        this.request.headers['Authorization'] = this.authorization(credentials, datetime);\n      },\n      addHeaders: function addHeaders(credentials, datetime) {\n        this.request.headers['X-Amz-Date'] = datetime;\n\n        if (credentials.sessionToken) {\n          this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n        }\n      },\n      updateForPresigned: function updateForPresigned(credentials, datetime) {\n        var credString = this.credentialString(datetime);\n        var qs = {\n          'X-Amz-Date': datetime,\n          'X-Amz-Algorithm': this.algorithm,\n          'X-Amz-Credential': credentials.accessKeyId + '/' + credString,\n          'X-Amz-Expires': this.request.headers[expiresHeader],\n          'X-Amz-SignedHeaders': this.signedHeaders()\n        };\n\n        if (credentials.sessionToken) {\n          qs['X-Amz-Security-Token'] = credentials.sessionToken;\n        }\n\n        if (this.request.headers['Content-Type']) {\n          qs['Content-Type'] = this.request.headers['Content-Type'];\n        }\n\n        if (this.request.headers['Content-MD5']) {\n          qs['Content-MD5'] = this.request.headers['Content-MD5'];\n        }\n\n        if (this.request.headers['Cache-Control']) {\n          qs['Cache-Control'] = this.request.headers['Cache-Control'];\n        } // need to pull in any other X-Amz-* headers\n\n\n        AWS.util.each.call(this, this.request.headers, function (key, value) {\n          if (key === expiresHeader) return;\n\n          if (this.isSignableHeader(key)) {\n            var lowerKey = key.toLowerCase(); // Metadata should be normalized\n\n            if (lowerKey.indexOf('x-amz-meta-') === 0) {\n              qs[lowerKey] = value;\n            } else if (lowerKey.indexOf('x-amz-') === 0) {\n              qs[key] = value;\n            }\n          }\n        });\n        var sep = this.request.path.indexOf('?') >= 0 ? '&' : '?';\n        this.request.path += sep + AWS.util.queryParamsToString(qs);\n      },\n      authorization: function authorization(credentials, datetime) {\n        var parts = [];\n        var credString = this.credentialString(datetime);\n        parts.push(this.algorithm + ' Credential=' + credentials.accessKeyId + '/' + credString);\n        parts.push('SignedHeaders=' + this.signedHeaders());\n        parts.push('Signature=' + this.signature(credentials, datetime));\n        return parts.join(', ');\n      },\n      signature: function signature(credentials, datetime) {\n        var signingKey = v4Credentials.getSigningKey(credentials, datetime.substr(0, 8), this.request.region, this.serviceName, this.signatureCache);\n        return AWS.util.crypto.hmac(signingKey, this.stringToSign(datetime), 'hex');\n      },\n      stringToSign: function stringToSign(datetime) {\n        var parts = [];\n        parts.push('AWS4-HMAC-SHA256');\n        parts.push(datetime);\n        parts.push(this.credentialString(datetime));\n        parts.push(this.hexEncodedHash(this.canonicalString()));\n        return parts.join('\\n');\n      },\n      canonicalString: function canonicalString() {\n        var parts = [],\n            pathname = this.request.pathname();\n        if (this.serviceName !== 's3' && this.signatureVersion !== 's3v4') pathname = AWS.util.uriEscapePath(pathname);\n        parts.push(this.request.method);\n        parts.push(pathname);\n        parts.push(this.request.search());\n        parts.push(this.canonicalHeaders() + '\\n');\n        parts.push(this.signedHeaders());\n        parts.push(this.hexEncodedBodyHash());\n        return parts.join('\\n');\n      },\n      canonicalHeaders: function canonicalHeaders() {\n        var headers = [];\n        AWS.util.each.call(this, this.request.headers, function (key, item) {\n          headers.push([key, item]);\n        });\n        headers.sort(function (a, b) {\n          return a[0].toLowerCase() < b[0].toLowerCase() ? -1 : 1;\n        });\n        var parts = [];\n        AWS.util.arrayEach.call(this, headers, function (item) {\n          var key = item[0].toLowerCase();\n\n          if (this.isSignableHeader(key)) {\n            var value = item[1];\n\n            if (typeof value === 'undefined' || value === null || typeof value.toString !== 'function') {\n              throw AWS.util.error(new Error('Header ' + key + ' contains invalid value'), {\n                code: 'InvalidHeader'\n              });\n            }\n\n            parts.push(key + ':' + this.canonicalHeaderValues(value.toString()));\n          }\n        });\n        return parts.join('\\n');\n      },\n      canonicalHeaderValues: function canonicalHeaderValues(values) {\n        return values.replace(/\\s+/g, ' ').replace(/^\\s+|\\s+$/g, '');\n      },\n      signedHeaders: function signedHeaders() {\n        var keys = [];\n        AWS.util.each.call(this, this.request.headers, function (key) {\n          key = key.toLowerCase();\n          if (this.isSignableHeader(key)) keys.push(key);\n        });\n        return keys.sort().join(';');\n      },\n      credentialString: function credentialString(datetime) {\n        return v4Credentials.createScope(datetime.substr(0, 8), this.request.region, this.serviceName);\n      },\n      hexEncodedHash: function hash(string) {\n        return AWS.util.crypto.sha256(string, 'hex');\n      },\n      hexEncodedBodyHash: function hexEncodedBodyHash() {\n        var request = this.request;\n\n        if (this.isPresigned() && this.serviceName === 's3' && !request.body) {\n          return 'UNSIGNED-PAYLOAD';\n        } else if (request.headers['X-Amz-Content-Sha256']) {\n          return request.headers['X-Amz-Content-Sha256'];\n        } else {\n          return this.hexEncodedHash(this.request.body || '');\n        }\n      },\n      unsignableHeaders: ['authorization', 'content-type', 'content-length', 'user-agent', expiresHeader, 'expect', 'x-amzn-trace-id'],\n      isSignableHeader: function isSignableHeader(key) {\n        if (key.toLowerCase().indexOf('x-amz-') === 0) return true;\n        return this.unsignableHeaders.indexOf(key) < 0;\n      },\n      isPresigned: function isPresigned() {\n        return this.request.headers[expiresHeader] ? true : false;\n      }\n    });\n    /**\n     * @api private\n     */\n\n    module.exports = AWS.Signers.V4;\n  }, {\n    \"../core\": 18,\n    \"./v4_credentials\": 69\n  }],\n  69: [function (require, module, exports) {\n    var AWS = require('../core');\n    /**\n     * @api private\n     */\n\n\n    var cachedSecret = {};\n    /**\n     * @api private\n     */\n\n    var cacheQueue = [];\n    /**\n     * @api private\n     */\n\n    var maxCacheEntries = 50;\n    /**\n     * @api private\n     */\n\n    var v4Identifier = 'aws4_request';\n    /**\n     * @api private\n     */\n\n    module.exports = {\n      /**\n       * @api private\n       *\n       * @param date [String]\n       * @param region [String]\n       * @param serviceName [String]\n       * @return [String]\n       */\n      createScope: function createScope(date, region, serviceName) {\n        return [date.substr(0, 8), region, serviceName, v4Identifier].join('/');\n      },\n\n      /**\n       * @api private\n       *\n       * @param credentials [Credentials]\n       * @param date [String]\n       * @param region [String]\n       * @param service [String]\n       * @param shouldCache [Boolean]\n       * @return [String]\n       */\n      getSigningKey: function getSigningKey(credentials, date, region, service, shouldCache) {\n        var credsIdentifier = AWS.util.crypto.hmac(credentials.secretAccessKey, credentials.accessKeyId, 'base64');\n        var cacheKey = [credsIdentifier, date, region, service].join('_');\n        shouldCache = shouldCache !== false;\n\n        if (shouldCache && cacheKey in cachedSecret) {\n          return cachedSecret[cacheKey];\n        }\n\n        var kDate = AWS.util.crypto.hmac('AWS4' + credentials.secretAccessKey, date, 'buffer');\n        var kRegion = AWS.util.crypto.hmac(kDate, region, 'buffer');\n        var kService = AWS.util.crypto.hmac(kRegion, service, 'buffer');\n        var signingKey = AWS.util.crypto.hmac(kService, v4Identifier, 'buffer');\n\n        if (shouldCache) {\n          cachedSecret[cacheKey] = signingKey;\n          cacheQueue.push(cacheKey);\n\n          if (cacheQueue.length > maxCacheEntries) {\n            // remove the oldest entry (not the least recently used)\n            delete cachedSecret[cacheQueue.shift()];\n          }\n        }\n\n        return signingKey;\n      },\n\n      /**\n       * @api private\n       *\n       * Empties the derived signing key cache. Made available for testing purposes\n       * only.\n       */\n      emptyCache: function emptyCache() {\n        cachedSecret = {};\n        cacheQueue = [];\n      }\n    };\n  }, {\n    \"../core\": 18\n  }],\n  70: [function (require, module, exports) {\n    function AcceptorStateMachine(states, state) {\n      this.currentState = state || null;\n      this.states = states || {};\n    }\n\n    AcceptorStateMachine.prototype.runTo = function runTo(finalState, done, bindObject, inputError) {\n      if (typeof finalState === 'function') {\n        inputError = bindObject;\n        bindObject = done;\n        done = finalState;\n        finalState = null;\n      }\n\n      var self = this;\n      var state = self.states[self.currentState];\n      state.fn.call(bindObject || self, inputError, function (err) {\n        if (err) {\n          if (state.fail) self.currentState = state.fail;else return done ? done.call(bindObject, err) : null;\n        } else {\n          if (state.accept) self.currentState = state.accept;else return done ? done.call(bindObject) : null;\n        }\n\n        if (self.currentState === finalState) {\n          return done ? done.call(bindObject, err) : null;\n        }\n\n        self.runTo(finalState, done, bindObject, err);\n      });\n    };\n\n    AcceptorStateMachine.prototype.addState = function addState(name, acceptState, failState, fn) {\n      if (typeof acceptState === 'function') {\n        fn = acceptState;\n        acceptState = null;\n        failState = null;\n      } else if (typeof failState === 'function') {\n        fn = failState;\n        failState = null;\n      }\n\n      if (!this.currentState) this.currentState = name;\n      this.states[name] = {\n        accept: acceptState,\n        fail: failState,\n        fn: fn\n      };\n      return this;\n    };\n    /**\n     * @api private\n     */\n\n\n    module.exports = AcceptorStateMachine;\n  }, {}],\n  71: [function (require, module, exports) {\n    (function (process, setImmediate) {\n      /* eslint guard-for-in:0 */\n      var AWS;\n      /**\n       * A set of utility methods for use with the AWS SDK.\n       *\n       * @!attribute abort\n       *   Return this value from an iterator function {each} or {arrayEach}\n       *   to break out of the iteration.\n       *   @example Breaking out of an iterator function\n       *     AWS.util.each({a: 1, b: 2, c: 3}, function(key, value) {\n       *       if (key == 'b') return AWS.util.abort;\n       *     });\n       *   @see each\n       *   @see arrayEach\n       * @api private\n       */\n\n      var util = {\n        environment: 'nodejs',\n        engine: function engine() {\n          if (util.isBrowser() && typeof navigator !== 'undefined') {\n            return navigator.userAgent;\n          } else {\n            var engine = process.platform + '/' + process.version;\n\n            if (process.env.AWS_EXECUTION_ENV) {\n              engine += ' exec-env/' + process.env.AWS_EXECUTION_ENV;\n            }\n\n            return engine;\n          }\n        },\n        userAgent: function userAgent() {\n          var name = util.environment;\n\n          var agent = 'aws-sdk-' + name + '/' + require('./core').VERSION;\n\n          if (name === 'nodejs') agent += ' ' + util.engine();\n          return agent;\n        },\n        uriEscape: function uriEscape(string) {\n          var output = encodeURIComponent(string);\n          output = output.replace(/[^A-Za-z0-9_.~\\-%]+/g, escape); // AWS percent-encodes some extra non-standard characters in a URI\n\n          output = output.replace(/[*]/g, function (ch) {\n            return '%' + ch.charCodeAt(0).toString(16).toUpperCase();\n          });\n          return output;\n        },\n        uriEscapePath: function uriEscapePath(string) {\n          var parts = [];\n          util.arrayEach(string.split('/'), function (part) {\n            parts.push(util.uriEscape(part));\n          });\n          return parts.join('/');\n        },\n        urlParse: function urlParse(url) {\n          return util.url.parse(url);\n        },\n        urlFormat: function urlFormat(url) {\n          return util.url.format(url);\n        },\n        queryStringParse: function queryStringParse(qs) {\n          return util.querystring.parse(qs);\n        },\n        queryParamsToString: function queryParamsToString(params) {\n          var items = [];\n          var escape = util.uriEscape;\n          var sortedKeys = Object.keys(params).sort();\n          util.arrayEach(sortedKeys, function (name) {\n            var value = params[name];\n            var ename = escape(name);\n            var result = ename + '=';\n\n            if (Array.isArray(value)) {\n              var vals = [];\n              util.arrayEach(value, function (item) {\n                vals.push(escape(item));\n              });\n              result = ename + '=' + vals.sort().join('&' + ename + '=');\n            } else if (value !== undefined && value !== null) {\n              result = ename + '=' + escape(value);\n            }\n\n            items.push(result);\n          });\n          return items.join('&');\n        },\n        readFileSync: function readFileSync(path) {\n          if (util.isBrowser()) return null;\n          return require('fs').readFileSync(path, 'utf-8');\n        },\n        base64: {\n          encode: function encode64(string) {\n            if (typeof string === 'number') {\n              throw util.error(new Error('Cannot base64 encode number ' + string));\n            }\n\n            if (string === null || typeof string === 'undefined') {\n              return string;\n            }\n\n            var buf = util.buffer.toBuffer(string);\n            return buf.toString('base64');\n          },\n          decode: function decode64(string) {\n            if (typeof string === 'number') {\n              throw util.error(new Error('Cannot base64 decode number ' + string));\n            }\n\n            if (string === null || typeof string === 'undefined') {\n              return string;\n            }\n\n            return util.buffer.toBuffer(string, 'base64');\n          }\n        },\n        buffer: {\n          /**\n           * Buffer constructor for Node buffer and buffer pollyfill\n           */\n          toBuffer: function (data, encoding) {\n            return typeof util.Buffer.from === 'function' && util.Buffer.from !== Uint8Array.from ? util.Buffer.from(data, encoding) : new util.Buffer(data, encoding);\n          },\n          alloc: function (size, fill, encoding) {\n            if (typeof size !== 'number') {\n              throw new Error('size passed to alloc must be a number.');\n            }\n\n            if (typeof util.Buffer.alloc === 'function') {\n              return util.Buffer.alloc(size, fill, encoding);\n            } else {\n              var buf = new util.Buffer(size);\n\n              if (fill !== undefined && typeof buf.fill === 'function') {\n                buf.fill(fill, undefined, undefined, encoding);\n              }\n\n              return buf;\n            }\n          },\n          toStream: function toStream(buffer) {\n            if (!util.Buffer.isBuffer(buffer)) buffer = util.buffer.toBuffer(buffer);\n            var readable = new util.stream.Readable();\n            var pos = 0;\n\n            readable._read = function (size) {\n              if (pos >= buffer.length) return readable.push(null);\n              var end = pos + size;\n              if (end > buffer.length) end = buffer.length;\n              readable.push(buffer.slice(pos, end));\n              pos = end;\n            };\n\n            return readable;\n          },\n\n          /**\n           * Concatenates a list of Buffer objects.\n           */\n          concat: function (buffers) {\n            var length = 0,\n                offset = 0,\n                buffer = null,\n                i;\n\n            for (i = 0; i < buffers.length; i++) {\n              length += buffers[i].length;\n            }\n\n            buffer = util.buffer.alloc(length);\n\n            for (i = 0; i < buffers.length; i++) {\n              buffers[i].copy(buffer, offset);\n              offset += buffers[i].length;\n            }\n\n            return buffer;\n          }\n        },\n        string: {\n          byteLength: function byteLength(string) {\n            if (string === null || string === undefined) return 0;\n            if (typeof string === 'string') string = util.buffer.toBuffer(string);\n\n            if (typeof string.byteLength === 'number') {\n              return string.byteLength;\n            } else if (typeof string.length === 'number') {\n              return string.length;\n            } else if (typeof string.size === 'number') {\n              return string.size;\n            } else if (typeof string.path === 'string') {\n              return require('fs').lstatSync(string.path).size;\n            } else {\n              throw util.error(new Error('Cannot determine length of ' + string), {\n                object: string\n              });\n            }\n          },\n          upperFirst: function upperFirst(string) {\n            return string[0].toUpperCase() + string.substr(1);\n          },\n          lowerFirst: function lowerFirst(string) {\n            return string[0].toLowerCase() + string.substr(1);\n          }\n        },\n        ini: {\n          parse: function string(ini) {\n            var currentSection,\n                map = {};\n            util.arrayEach(ini.split(/\\r?\\n/), function (line) {\n              line = line.split(/(^|\\s)[;#]/)[0]; // remove comments\n\n              var section = line.match(/^\\s*\\[([^\\[\\]]+)\\]\\s*$/);\n\n              if (section) {\n                currentSection = section[1];\n              } else if (currentSection) {\n                var item = line.match(/^\\s*(.+?)\\s*=\\s*(.+?)\\s*$/);\n\n                if (item) {\n                  map[currentSection] = map[currentSection] || {};\n                  map[currentSection][item[1]] = item[2];\n                }\n              }\n            });\n            return map;\n          }\n        },\n        fn: {\n          noop: function () {},\n          callback: function (err) {\n            if (err) throw err;\n          },\n\n          /**\n           * Turn a synchronous function into as \"async\" function by making it call\n           * a callback. The underlying function is called with all but the last argument,\n           * which is treated as the callback. The callback is passed passed a first argument\n           * of null on success to mimick standard node callbacks.\n           */\n          makeAsync: function makeAsync(fn, expectedArgs) {\n            if (expectedArgs && expectedArgs <= fn.length) {\n              return fn;\n            }\n\n            return function () {\n              var args = Array.prototype.slice.call(arguments, 0);\n              var callback = args.pop();\n              var result = fn.apply(null, args);\n              callback(result);\n            };\n          }\n        },\n\n        /**\n         * Date and time utility functions.\n         */\n        date: {\n          /**\n           * @return [Date] the current JavaScript date object. Since all\n           *   AWS services rely on this date object, you can override\n           *   this function to provide a special time value to AWS service\n           *   requests.\n           */\n          getDate: function getDate() {\n            if (!AWS) AWS = require('./core');\n\n            if (AWS.config.systemClockOffset) {\n              // use offset when non-zero\n              return new Date(new Date().getTime() + AWS.config.systemClockOffset);\n            } else {\n              return new Date();\n            }\n          },\n\n          /**\n           * @return [String] the date in ISO-8601 format\n           */\n          iso8601: function iso8601(date) {\n            if (date === undefined) {\n              date = util.date.getDate();\n            }\n\n            return date.toISOString().replace(/\\.\\d{3}Z$/, 'Z');\n          },\n\n          /**\n           * @return [String] the date in RFC 822 format\n           */\n          rfc822: function rfc822(date) {\n            if (date === undefined) {\n              date = util.date.getDate();\n            }\n\n            return date.toUTCString();\n          },\n\n          /**\n           * @return [Integer] the UNIX timestamp value for the current time\n           */\n          unixTimestamp: function unixTimestamp(date) {\n            if (date === undefined) {\n              date = util.date.getDate();\n            }\n\n            return date.getTime() / 1000;\n          },\n\n          /**\n           * @param [String,number,Date] date\n           * @return [Date]\n           */\n          from: function format(date) {\n            if (typeof date === 'number') {\n              return new Date(date * 1000); // unix timestamp\n            } else {\n              return new Date(date);\n            }\n          },\n\n          /**\n           * Given a Date or date-like value, this function formats the\n           * date into a string of the requested value.\n           * @param [String,number,Date] date\n           * @param [String] formatter Valid formats are:\n           #   * 'iso8601'\n           #   * 'rfc822'\n           #   * 'unixTimestamp'\n           * @return [String]\n           */\n          format: function format(date, formatter) {\n            if (!formatter) formatter = 'iso8601';\n            return util.date[formatter](util.date.from(date));\n          },\n          parseTimestamp: function parseTimestamp(value) {\n            if (typeof value === 'number') {\n              // unix timestamp (number)\n              return new Date(value * 1000);\n            } else if (value.match(/^\\d+$/)) {\n              // unix timestamp\n              return new Date(value * 1000);\n            } else if (value.match(/^\\d{4}/)) {\n              // iso8601\n              return new Date(value);\n            } else if (value.match(/^\\w{3},/)) {\n              // rfc822\n              return new Date(value);\n            } else {\n              throw util.error(new Error('unhandled timestamp format: ' + value), {\n                code: 'TimestampParserError'\n              });\n            }\n          }\n        },\n        crypto: {\n          crc32Table: [0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA, 0x076DC419, 0x706AF48F, 0xE963A535, 0x9E6495A3, 0x0EDB8832, 0x79DCB8A4, 0xE0D5E91E, 0x97D2D988, 0x09B64C2B, 0x7EB17CBD, 0xE7B82D07, 0x90BF1D91, 0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE, 0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7, 0x136C9856, 0x646BA8C0, 0xFD62F97A, 0x8A65C9EC, 0x14015C4F, 0x63066CD9, 0xFA0F3D63, 0x8D080DF5, 0x3B6E20C8, 0x4C69105E, 0xD56041E4, 0xA2677172, 0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B, 0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940, 0x32D86CE3, 0x45DF5C75, 0xDCD60DCF, 0xABD13D59, 0x26D930AC, 0x51DE003A, 0xC8D75180, 0xBFD06116, 0x21B4F4B5, 0x56B3C423, 0xCFBA9599, 0xB8BDA50F, 0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924, 0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D, 0x76DC4190, 0x01DB7106, 0x98D220BC, 0xEFD5102A, 0x71B18589, 0x06B6B51F, 0x9FBFE4A5, 0xE8B8D433, 0x7807C9A2, 0x0F00F934, 0x9609A88E, 0xE10E9818, 0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01, 0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E, 0x6C0695ED, 0x1B01A57B, 0x8208F4C1, 0xF50FC457, 0x65B0D9C6, 0x12B7E950, 0x8BBEB8EA, 0xFCB9887C, 0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3, 0xFBD44C65, 0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2, 0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB, 0x4369E96A, 0x346ED9FC, 0xAD678846, 0xDA60B8D0, 0x44042D73, 0x33031DE5, 0xAA0A4C5F, 0xDD0D7CC9, 0x5005713C, 0x270241AA, 0xBE0B1010, 0xC90C2086, 0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F, 0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4, 0x59B33D17, 0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD, 0xEDB88320, 0x9ABFB3B6, 0x03B6E20C, 0x74B1D29A, 0xEAD54739, 0x9DD277AF, 0x04DB2615, 0x73DC1683, 0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8, 0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1, 0xF00F9344, 0x8708A3D2, 0x1E01F268, 0x6906C2FE, 0xF762575D, 0x806567CB, 0x196C3671, 0x6E6B06E7, 0xFED41B76, 0x89D32BE0, 0x10DA7A5A, 0x67DD4ACC, 0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5, 0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252, 0xD1BB67F1, 0xA6BC5767, 0x3FB506DD, 0x48B2364B, 0xD80D2BDA, 0xAF0A1B4C, 0x36034AF6, 0x41047A60, 0xDF60EFC3, 0xA867DF55, 0x316E8EEF, 0x4669BE79, 0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236, 0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F, 0xC5BA3BBE, 0xB2BD0B28, 0x2BB45A92, 0x5CB36A04, 0xC2D7FFA7, 0xB5D0CF31, 0x2CD99E8B, 0x5BDEAE1D, 0x9B64C2B0, 0xEC63F226, 0x756AA39C, 0x026D930A, 0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713, 0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38, 0x92D28E9B, 0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21, 0x86D3D2D4, 0xF1D4E242, 0x68DDB3F8, 0x1FDA836E, 0x81BE16CD, 0xF6B9265B, 0x6FB077E1, 0x18B74777, 0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C, 0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45, 0xA00AE278, 0xD70DD2EE, 0x4E048354, 0x3903B3C2, 0xA7672661, 0xD06016F7, 0x4969474D, 0x3E6E77DB, 0xAED16A4A, 0xD9D65ADC, 0x40DF0B66, 0x37D83BF0, 0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9, 0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6, 0xBAD03605, 0xCDD70693, 0x54DE5729, 0x23D967BF, 0xB3667A2E, 0xC4614AB8, 0x5D681B02, 0x2A6F2B94, 0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B, 0x2D02EF8D],\n          crc32: function crc32(data) {\n            var tbl = util.crypto.crc32Table;\n            var crc = 0 ^ -1;\n\n            if (typeof data === 'string') {\n              data = util.buffer.toBuffer(data);\n            }\n\n            for (var i = 0; i < data.length; i++) {\n              var code = data.readUInt8(i);\n              crc = crc >>> 8 ^ tbl[(crc ^ code) & 0xFF];\n            }\n\n            return (crc ^ -1) >>> 0;\n          },\n          hmac: function hmac(key, string, digest, fn) {\n            if (!digest) digest = 'binary';\n\n            if (digest === 'buffer') {\n              digest = undefined;\n            }\n\n            if (!fn) fn = 'sha256';\n            if (typeof string === 'string') string = util.buffer.toBuffer(string);\n            return util.crypto.lib.createHmac(fn, key).update(string).digest(digest);\n          },\n          md5: function md5(data, digest, callback) {\n            return util.crypto.hash('md5', data, digest, callback);\n          },\n          sha256: function sha256(data, digest, callback) {\n            return util.crypto.hash('sha256', data, digest, callback);\n          },\n          hash: function (algorithm, data, digest, callback) {\n            var hash = util.crypto.createHash(algorithm);\n\n            if (!digest) {\n              digest = 'binary';\n            }\n\n            if (digest === 'buffer') {\n              digest = undefined;\n            }\n\n            if (typeof data === 'string') data = util.buffer.toBuffer(data);\n            var sliceFn = util.arraySliceFn(data);\n            var isBuffer = util.Buffer.isBuffer(data); //Identifying objects with an ArrayBuffer as buffers\n\n            if (util.isBrowser() && typeof ArrayBuffer !== 'undefined' && data && data.buffer instanceof ArrayBuffer) isBuffer = true;\n\n            if (callback && typeof data === 'object' && typeof data.on === 'function' && !isBuffer) {\n              data.on('data', function (chunk) {\n                hash.update(chunk);\n              });\n              data.on('error', function (err) {\n                callback(err);\n              });\n              data.on('end', function () {\n                callback(null, hash.digest(digest));\n              });\n            } else if (callback && sliceFn && !isBuffer && typeof FileReader !== 'undefined') {\n              // this might be a File/Blob\n              var index = 0,\n                  size = 1024 * 512;\n              var reader = new FileReader();\n\n              reader.onerror = function () {\n                callback(new Error('Failed to read data.'));\n              };\n\n              reader.onload = function () {\n                var buf = new util.Buffer(new Uint8Array(reader.result));\n                hash.update(buf);\n                index += buf.length;\n\n                reader._continueReading();\n              };\n\n              reader._continueReading = function () {\n                if (index >= data.size) {\n                  callback(null, hash.digest(digest));\n                  return;\n                }\n\n                var back = index + size;\n                if (back > data.size) back = data.size;\n                reader.readAsArrayBuffer(sliceFn.call(data, index, back));\n              };\n\n              reader._continueReading();\n            } else {\n              if (util.isBrowser() && typeof data === 'object' && !isBuffer) {\n                data = new util.Buffer(new Uint8Array(data));\n              }\n\n              var out = hash.update(data).digest(digest);\n              if (callback) callback(null, out);\n              return out;\n            }\n          },\n          toHex: function toHex(data) {\n            var out = [];\n\n            for (var i = 0; i < data.length; i++) {\n              out.push(('0' + data.charCodeAt(i).toString(16)).substr(-2, 2));\n            }\n\n            return out.join('');\n          },\n          createHash: function createHash(algorithm) {\n            return util.crypto.lib.createHash(algorithm);\n          }\n        },\n\n        /** @!ignore */\n\n        /* Abort constant */\n        abort: {},\n        each: function each(object, iterFunction) {\n          for (var key in object) {\n            if (Object.prototype.hasOwnProperty.call(object, key)) {\n              var ret = iterFunction.call(this, key, object[key]);\n              if (ret === util.abort) break;\n            }\n          }\n        },\n        arrayEach: function arrayEach(array, iterFunction) {\n          for (var idx in array) {\n            if (Object.prototype.hasOwnProperty.call(array, idx)) {\n              var ret = iterFunction.call(this, array[idx], parseInt(idx, 10));\n              if (ret === util.abort) break;\n            }\n          }\n        },\n        update: function update(obj1, obj2) {\n          util.each(obj2, function iterator(key, item) {\n            obj1[key] = item;\n          });\n          return obj1;\n        },\n        merge: function merge(obj1, obj2) {\n          return util.update(util.copy(obj1), obj2);\n        },\n        copy: function copy(object) {\n          if (object === null || object === undefined) return object;\n          var dupe = {}; // jshint forin:false\n\n          for (var key in object) {\n            dupe[key] = object[key];\n          }\n\n          return dupe;\n        },\n        isEmpty: function isEmpty(obj) {\n          for (var prop in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n              return false;\n            }\n          }\n\n          return true;\n        },\n        arraySliceFn: function arraySliceFn(obj) {\n          var fn = obj.slice || obj.webkitSlice || obj.mozSlice;\n          return typeof fn === 'function' ? fn : null;\n        },\n        isType: function isType(obj, type) {\n          // handle cross-\"frame\" objects\n          if (typeof type === 'function') type = util.typeName(type);\n          return Object.prototype.toString.call(obj) === '[object ' + type + ']';\n        },\n        typeName: function typeName(type) {\n          if (Object.prototype.hasOwnProperty.call(type, 'name')) return type.name;\n          var str = type.toString();\n          var match = str.match(/^\\s*function (.+)\\(/);\n          return match ? match[1] : str;\n        },\n        error: function error(err, options) {\n          var originalError = null;\n\n          if (typeof err.message === 'string' && err.message !== '') {\n            if (typeof options === 'string' || options && options.message) {\n              originalError = util.copy(err);\n              originalError.message = err.message;\n            }\n          }\n\n          err.message = err.message || null;\n\n          if (typeof options === 'string') {\n            err.message = options;\n          } else if (typeof options === 'object' && options !== null) {\n            util.update(err, options);\n            if (options.message) err.message = options.message;\n            if (options.code || options.name) err.code = options.code || options.name;\n            if (options.stack) err.stack = options.stack;\n          }\n\n          if (typeof Object.defineProperty === 'function') {\n            Object.defineProperty(err, 'name', {\n              writable: true,\n              enumerable: false\n            });\n            Object.defineProperty(err, 'message', {\n              enumerable: true\n            });\n          }\n\n          err.name = options && options.name || err.name || err.code || 'Error';\n          err.time = new Date();\n          if (originalError) err.originalError = originalError;\n          return err;\n        },\n\n        /**\n         * @api private\n         */\n        inherit: function inherit(klass, features) {\n          var newObject = null;\n\n          if (features === undefined) {\n            features = klass;\n            klass = Object;\n            newObject = {};\n          } else {\n            var ctor = function ConstructorWrapper() {};\n\n            ctor.prototype = klass.prototype;\n            newObject = new ctor();\n          } // constructor not supplied, create pass-through ctor\n\n\n          if (features.constructor === Object) {\n            features.constructor = function () {\n              if (klass !== Object) {\n                return klass.apply(this, arguments);\n              }\n            };\n          }\n\n          features.constructor.prototype = newObject;\n          util.update(features.constructor.prototype, features);\n          features.constructor.__super__ = klass;\n          return features.constructor;\n        },\n\n        /**\n         * @api private\n         */\n        mixin: function mixin() {\n          var klass = arguments[0];\n\n          for (var i = 1; i < arguments.length; i++) {\n            // jshint forin:false\n            for (var prop in arguments[i].prototype) {\n              var fn = arguments[i].prototype[prop];\n\n              if (prop !== 'constructor') {\n                klass.prototype[prop] = fn;\n              }\n            }\n          }\n\n          return klass;\n        },\n\n        /**\n         * @api private\n         */\n        hideProperties: function hideProperties(obj, props) {\n          if (typeof Object.defineProperty !== 'function') return;\n          util.arrayEach(props, function (key) {\n            Object.defineProperty(obj, key, {\n              enumerable: false,\n              writable: true,\n              configurable: true\n            });\n          });\n        },\n\n        /**\n         * @api private\n         */\n        property: function property(obj, name, value, enumerable, isValue) {\n          var opts = {\n            configurable: true,\n            enumerable: enumerable !== undefined ? enumerable : true\n          };\n\n          if (typeof value === 'function' && !isValue) {\n            opts.get = value;\n          } else {\n            opts.value = value;\n            opts.writable = true;\n          }\n\n          Object.defineProperty(obj, name, opts);\n        },\n\n        /**\n         * @api private\n         */\n        memoizedProperty: function memoizedProperty(obj, name, get, enumerable) {\n          var cachedValue = null; // build enumerable attribute for each value with lazy accessor.\n\n          util.property(obj, name, function () {\n            if (cachedValue === null) {\n              cachedValue = get();\n            }\n\n            return cachedValue;\n          }, enumerable);\n        },\n\n        /**\n         * TODO Remove in major version revision\n         * This backfill populates response data without the\n         * top-level payload name.\n         *\n         * @api private\n         */\n        hoistPayloadMember: function hoistPayloadMember(resp) {\n          var req = resp.request;\n          var operationName = req.operation;\n          var operation = req.service.api.operations[operationName];\n          var output = operation.output;\n\n          if (output.payload && !operation.hasEventOutput) {\n            var payloadMember = output.members[output.payload];\n            var responsePayload = resp.data[output.payload];\n\n            if (payloadMember.type === 'structure') {\n              util.each(responsePayload, function (key, value) {\n                util.property(resp.data, key, value, false);\n              });\n            }\n          }\n        },\n\n        /**\n         * Compute SHA-256 checksums of streams\n         *\n         * @api private\n         */\n        computeSha256: function computeSha256(body, done) {\n          if (util.isNode()) {\n            var Stream = util.stream.Stream;\n\n            var fs = require('fs');\n\n            if (typeof Stream === 'function' && body instanceof Stream) {\n              if (typeof body.path === 'string') {\n                // assume file object\n                var settings = {};\n\n                if (typeof body.start === 'number') {\n                  settings.start = body.start;\n                }\n\n                if (typeof body.end === 'number') {\n                  settings.end = body.end;\n                }\n\n                body = fs.createReadStream(body.path, settings);\n              } else {\n                // TODO support other stream types\n                return done(new Error('Non-file stream objects are ' + 'not supported with SigV4'));\n              }\n            }\n          }\n\n          util.crypto.sha256(body, 'hex', function (err, sha) {\n            if (err) done(err);else done(null, sha);\n          });\n        },\n\n        /**\n         * @api private\n         */\n        isClockSkewed: function isClockSkewed(serverTime) {\n          if (serverTime) {\n            util.property(AWS.config, 'isClockSkewed', Math.abs(new Date().getTime() - serverTime) >= 300000, false);\n            return AWS.config.isClockSkewed;\n          }\n        },\n        applyClockOffset: function applyClockOffset(serverTime) {\n          if (serverTime) AWS.config.systemClockOffset = serverTime - new Date().getTime();\n        },\n\n        /**\n         * @api private\n         */\n        extractRequestId: function extractRequestId(resp) {\n          var requestId = resp.httpResponse.headers['x-amz-request-id'] || resp.httpResponse.headers['x-amzn-requestid'];\n\n          if (!requestId && resp.data && resp.data.ResponseMetadata) {\n            requestId = resp.data.ResponseMetadata.RequestId;\n          }\n\n          if (requestId) {\n            resp.requestId = requestId;\n          }\n\n          if (resp.error) {\n            resp.error.requestId = requestId;\n          }\n        },\n\n        /**\n         * @api private\n         */\n        addPromises: function addPromises(constructors, PromiseDependency) {\n          var deletePromises = false;\n\n          if (PromiseDependency === undefined && AWS && AWS.config) {\n            PromiseDependency = AWS.config.getPromisesDependency();\n          }\n\n          if (PromiseDependency === undefined && typeof Promise !== 'undefined') {\n            PromiseDependency = Promise;\n          }\n\n          if (typeof PromiseDependency !== 'function') deletePromises = true;\n          if (!Array.isArray(constructors)) constructors = [constructors];\n\n          for (var ind = 0; ind < constructors.length; ind++) {\n            var constructor = constructors[ind];\n\n            if (deletePromises) {\n              if (constructor.deletePromisesFromClass) {\n                constructor.deletePromisesFromClass();\n              }\n            } else if (constructor.addPromisesToClass) {\n              constructor.addPromisesToClass(PromiseDependency);\n            }\n          }\n        },\n\n        /**\n         * @api private\n         * Return a function that will return a promise whose fate is decided by the\n         * callback behavior of the given method with `methodName`. The method to be\n         * promisified should conform to node.js convention of accepting a callback as\n         * last argument and calling that callback with error as the first argument\n         * and success value on the second argument.\n         */\n        promisifyMethod: function promisifyMethod(methodName, PromiseDependency) {\n          return function promise() {\n            var self = this;\n            var args = Array.prototype.slice.call(arguments);\n            return new PromiseDependency(function (resolve, reject) {\n              args.push(function (err, data) {\n                if (err) {\n                  reject(err);\n                } else {\n                  resolve(data);\n                }\n              });\n              self[methodName].apply(self, args);\n            });\n          };\n        },\n\n        /**\n         * @api private\n         */\n        isDualstackAvailable: function isDualstackAvailable(service) {\n          if (!service) return false;\n\n          var metadata = require('../apis/metadata.json');\n\n          if (typeof service !== 'string') service = service.serviceIdentifier;\n          if (typeof service !== 'string' || !metadata.hasOwnProperty(service)) return false;\n          return !!metadata[service].dualstackAvailable;\n        },\n\n        /**\n         * @api private\n         */\n        calculateRetryDelay: function calculateRetryDelay(retryCount, retryDelayOptions) {\n          if (!retryDelayOptions) retryDelayOptions = {};\n          var customBackoff = retryDelayOptions.customBackoff || null;\n\n          if (typeof customBackoff === 'function') {\n            return customBackoff(retryCount);\n          }\n\n          var base = typeof retryDelayOptions.base === 'number' ? retryDelayOptions.base : 100;\n          var delay = Math.random() * (Math.pow(2, retryCount) * base);\n          return delay;\n        },\n\n        /**\n         * @api private\n         */\n        handleRequestWithRetries: function handleRequestWithRetries(httpRequest, options, cb) {\n          if (!options) options = {};\n          var http = AWS.HttpClient.getInstance();\n          var httpOptions = options.httpOptions || {};\n          var retryCount = 0;\n\n          var errCallback = function (err) {\n            var maxRetries = options.maxRetries || 0;\n            if (err && err.code === 'TimeoutError') err.retryable = true;\n\n            if (err && err.retryable && retryCount < maxRetries) {\n              retryCount++;\n              var delay = util.calculateRetryDelay(retryCount, options.retryDelayOptions);\n              setTimeout(sendRequest, delay + (err.retryAfter || 0));\n            } else {\n              cb(err);\n            }\n          };\n\n          var sendRequest = function () {\n            var data = '';\n            http.handleRequest(httpRequest, httpOptions, function (httpResponse) {\n              httpResponse.on('data', function (chunk) {\n                data += chunk.toString();\n              });\n              httpResponse.on('end', function () {\n                var statusCode = httpResponse.statusCode;\n\n                if (statusCode < 300) {\n                  cb(null, data);\n                } else {\n                  var retryAfter = parseInt(httpResponse.headers['retry-after'], 10) * 1000 || 0;\n                  var err = util.error(new Error(), {\n                    retryable: statusCode >= 500 || statusCode === 429\n                  });\n                  if (retryAfter && err.retryable) err.retryAfter = retryAfter;\n                  errCallback(err);\n                }\n              });\n            }, errCallback);\n          };\n\n          AWS.util.defer(sendRequest);\n        },\n\n        /**\n         * @api private\n         */\n        uuid: {\n          v4: function uuidV4() {\n            return require('uuid').v4();\n          }\n        },\n\n        /**\n         * @api private\n         */\n        convertPayloadToString: function convertPayloadToString(resp) {\n          var req = resp.request;\n          var operation = req.operation;\n          var rules = req.service.api.operations[operation].output || {};\n\n          if (rules.payload && resp.data[rules.payload]) {\n            resp.data[rules.payload] = resp.data[rules.payload].toString();\n          }\n        },\n\n        /**\n         * @api private\n         */\n        defer: function defer(callback) {\n          if (typeof process === 'object' && typeof process.nextTick === 'function') {\n            process.nextTick(callback);\n          } else if (typeof setImmediate === 'function') {\n            setImmediate(callback);\n          } else {\n            setTimeout(callback, 0);\n          }\n        },\n\n        /**\n         * @api private\n         */\n        getRequestPayloadShape: function getRequestPayloadShape(req) {\n          var operations = req.service.api.operations;\n          if (!operations) return undefined;\n          var operation = (operations || {})[req.operation];\n          if (!operation || !operation.input || !operation.input.payload) return undefined;\n          return operation.input.members[operation.input.payload];\n        },\n        getProfilesFromSharedConfig: function getProfilesFromSharedConfig(iniLoader, filename) {\n          var profiles = {};\n          var profilesFromConfig = {};\n\n          if (process.env[util.configOptInEnv]) {\n            var profilesFromConfig = iniLoader.loadFrom({\n              isConfig: true,\n              filename: process.env[util.sharedConfigFileEnv]\n            });\n          }\n\n          var profilesFromCreds = iniLoader.loadFrom({\n            filename: filename || process.env[util.configOptInEnv] && process.env[util.sharedCredentialsFileEnv]\n          });\n\n          for (var i = 0, profileNames = Object.keys(profilesFromConfig); i < profileNames.length; i++) {\n            profiles[profileNames[i]] = profilesFromConfig[profileNames[i]];\n          }\n\n          for (var i = 0, profileNames = Object.keys(profilesFromCreds); i < profileNames.length; i++) {\n            profiles[profileNames[i]] = profilesFromCreds[profileNames[i]];\n          }\n\n          return profiles;\n        },\n\n        /**\n         * @api private\n         */\n        defaultProfile: 'default',\n\n        /**\n         * @api private\n         */\n        configOptInEnv: 'AWS_SDK_LOAD_CONFIG',\n\n        /**\n         * @api private\n         */\n        sharedCredentialsFileEnv: 'AWS_SHARED_CREDENTIALS_FILE',\n\n        /**\n         * @api private\n         */\n        sharedConfigFileEnv: 'AWS_CONFIG_FILE',\n\n        /**\n         * @api private\n         */\n        imdsDisabledEnv: 'AWS_EC2_METADATA_DISABLED'\n      };\n      /**\n       * @api private\n       */\n\n      module.exports = util;\n    }).call(this, require('_process'), require(\"timers\").setImmediate);\n  }, {\n    \"../apis/metadata.json\": 4,\n    \"./core\": 18,\n    \"_process\": 85,\n    \"fs\": 79,\n    \"timers\": 93,\n    \"uuid\": 98\n  }],\n  72: [function (require, module, exports) {\n    var util = require('../util');\n\n    var Shape = require('../model/shape');\n\n    function DomXmlParser() {}\n\n    DomXmlParser.prototype.parse = function (xml, shape) {\n      if (xml.replace(/^\\s+/, '') === '') return {};\n      var result, error;\n\n      try {\n        if (window.DOMParser) {\n          try {\n            var parser = new DOMParser();\n            result = parser.parseFromString(xml, 'text/xml');\n          } catch (syntaxError) {\n            throw util.error(new Error('Parse error in document'), {\n              originalError: syntaxError,\n              code: 'XMLParserError',\n              retryable: true\n            });\n          }\n\n          if (result.documentElement === null) {\n            throw util.error(new Error('Cannot parse empty document.'), {\n              code: 'XMLParserError',\n              retryable: true\n            });\n          }\n\n          var isError = result.getElementsByTagName('parsererror')[0];\n\n          if (isError && (isError.parentNode === result || isError.parentNode.nodeName === 'body' || isError.parentNode.parentNode === result || isError.parentNode.parentNode.nodeName === 'body')) {\n            var errorElement = isError.getElementsByTagName('div')[0] || isError;\n            throw util.error(new Error(errorElement.textContent || 'Parser error in document'), {\n              code: 'XMLParserError',\n              retryable: true\n            });\n          }\n        } else if (window.ActiveXObject) {\n          result = new window.ActiveXObject('Microsoft.XMLDOM');\n          result.async = false;\n\n          if (!result.loadXML(xml)) {\n            throw util.error(new Error('Parse error in document'), {\n              code: 'XMLParserError',\n              retryable: true\n            });\n          }\n        } else {\n          throw new Error('Cannot load XML parser');\n        }\n      } catch (e) {\n        error = e;\n      }\n\n      if (result && result.documentElement && !error) {\n        var data = parseXml(result.documentElement, shape);\n        var metadata = getElementByTagName(result.documentElement, 'ResponseMetadata');\n\n        if (metadata) {\n          data.ResponseMetadata = parseXml(metadata, {});\n        }\n\n        return data;\n      } else if (error) {\n        throw util.error(error || new Error(), {\n          code: 'XMLParserError',\n          retryable: true\n        });\n      } else {\n        // empty xml document\n        return {};\n      }\n    };\n\n    function getElementByTagName(xml, tag) {\n      var elements = xml.getElementsByTagName(tag);\n\n      for (var i = 0, iLen = elements.length; i < iLen; i++) {\n        if (elements[i].parentNode === xml) {\n          return elements[i];\n        }\n      }\n    }\n\n    function parseXml(xml, shape) {\n      if (!shape) shape = {};\n\n      switch (shape.type) {\n        case 'structure':\n          return parseStructure(xml, shape);\n\n        case 'map':\n          return parseMap(xml, shape);\n\n        case 'list':\n          return parseList(xml, shape);\n\n        case undefined:\n        case null:\n          return parseUnknown(xml);\n\n        default:\n          return parseScalar(xml, shape);\n      }\n    }\n\n    function parseStructure(xml, shape) {\n      var data = {};\n      if (xml === null) return data;\n      util.each(shape.members, function (memberName, memberShape) {\n        if (memberShape.isXmlAttribute) {\n          if (Object.prototype.hasOwnProperty.call(xml.attributes, memberShape.name)) {\n            var value = xml.attributes[memberShape.name].value;\n            data[memberName] = parseXml({\n              textContent: value\n            }, memberShape);\n          }\n        } else {\n          var xmlChild = memberShape.flattened ? xml : getElementByTagName(xml, memberShape.name);\n\n          if (xmlChild) {\n            data[memberName] = parseXml(xmlChild, memberShape);\n          } else if (!memberShape.flattened && memberShape.type === 'list') {\n            data[memberName] = memberShape.defaultValue;\n          }\n        }\n      });\n      return data;\n    }\n\n    function parseMap(xml, shape) {\n      var data = {};\n      var xmlKey = shape.key.name || 'key';\n      var xmlValue = shape.value.name || 'value';\n      var tagName = shape.flattened ? shape.name : 'entry';\n      var child = xml.firstElementChild;\n\n      while (child) {\n        if (child.nodeName === tagName) {\n          var key = getElementByTagName(child, xmlKey).textContent;\n          var value = getElementByTagName(child, xmlValue);\n          data[key] = parseXml(value, shape.value);\n        }\n\n        child = child.nextElementSibling;\n      }\n\n      return data;\n    }\n\n    function parseList(xml, shape) {\n      var data = [];\n      var tagName = shape.flattened ? shape.name : shape.member.name || 'member';\n      var child = xml.firstElementChild;\n\n      while (child) {\n        if (child.nodeName === tagName) {\n          data.push(parseXml(child, shape.member));\n        }\n\n        child = child.nextElementSibling;\n      }\n\n      return data;\n    }\n\n    function parseScalar(xml, shape) {\n      if (xml.getAttribute) {\n        var encoding = xml.getAttribute('encoding');\n\n        if (encoding === 'base64') {\n          shape = new Shape.create({\n            type: encoding\n          });\n        }\n      }\n\n      var text = xml.textContent;\n      if (text === '') text = null;\n\n      if (typeof shape.toType === 'function') {\n        return shape.toType(text);\n      } else {\n        return text;\n      }\n    }\n\n    function parseUnknown(xml) {\n      if (xml === undefined || xml === null) return ''; // empty object\n\n      if (!xml.firstElementChild) {\n        if (xml.parentNode.parentNode === null) return {};\n        if (xml.childNodes.length === 0) return '';else return xml.textContent;\n      } // object, parse as structure\n\n\n      var shape = {\n        type: 'structure',\n        members: {}\n      };\n      var child = xml.firstElementChild;\n\n      while (child) {\n        var tag = child.nodeName;\n\n        if (Object.prototype.hasOwnProperty.call(shape.members, tag)) {\n          // multiple tags of the same name makes it a list\n          shape.members[tag].type = 'list';\n        } else {\n          shape.members[tag] = {\n            name: tag\n          };\n        }\n\n        child = child.nextElementSibling;\n      }\n\n      return parseStructure(xml, shape);\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = DomXmlParser;\n  }, {\n    \"../model/shape\": 43,\n    \"../util\": 71\n  }],\n  73: [function (require, module, exports) {\n    var util = require('../util');\n\n    var XmlNode = require('./xml-node').XmlNode;\n\n    var XmlText = require('./xml-text').XmlText;\n\n    function XmlBuilder() {}\n\n    XmlBuilder.prototype.toXML = function (params, shape, rootElement, noEmpty) {\n      var xml = new XmlNode(rootElement);\n      applyNamespaces(xml, shape, true);\n      serialize(xml, params, shape);\n      return xml.children.length > 0 || noEmpty ? xml.toString() : '';\n    };\n\n    function serialize(xml, value, shape) {\n      switch (shape.type) {\n        case 'structure':\n          return serializeStructure(xml, value, shape);\n\n        case 'map':\n          return serializeMap(xml, value, shape);\n\n        case 'list':\n          return serializeList(xml, value, shape);\n\n        default:\n          return serializeScalar(xml, value, shape);\n      }\n    }\n\n    function serializeStructure(xml, params, shape) {\n      util.arrayEach(shape.memberNames, function (memberName) {\n        var memberShape = shape.members[memberName];\n        if (memberShape.location !== 'body') return;\n        var value = params[memberName];\n        var name = memberShape.name;\n\n        if (value !== undefined && value !== null) {\n          if (memberShape.isXmlAttribute) {\n            xml.addAttribute(name, value);\n          } else if (memberShape.flattened) {\n            serialize(xml, value, memberShape);\n          } else {\n            var element = new XmlNode(name);\n            xml.addChildNode(element);\n            applyNamespaces(element, memberShape);\n            serialize(element, value, memberShape);\n          }\n        }\n      });\n    }\n\n    function serializeMap(xml, map, shape) {\n      var xmlKey = shape.key.name || 'key';\n      var xmlValue = shape.value.name || 'value';\n      util.each(map, function (key, value) {\n        var entry = new XmlNode(shape.flattened ? shape.name : 'entry');\n        xml.addChildNode(entry);\n        var entryKey = new XmlNode(xmlKey);\n        var entryValue = new XmlNode(xmlValue);\n        entry.addChildNode(entryKey);\n        entry.addChildNode(entryValue);\n        serialize(entryKey, key, shape.key);\n        serialize(entryValue, value, shape.value);\n      });\n    }\n\n    function serializeList(xml, list, shape) {\n      if (shape.flattened) {\n        util.arrayEach(list, function (value) {\n          var name = shape.member.name || shape.name;\n          var element = new XmlNode(name);\n          xml.addChildNode(element);\n          serialize(element, value, shape.member);\n        });\n      } else {\n        util.arrayEach(list, function (value) {\n          var name = shape.member.name || 'member';\n          var element = new XmlNode(name);\n          xml.addChildNode(element);\n          serialize(element, value, shape.member);\n        });\n      }\n    }\n\n    function serializeScalar(xml, value, shape) {\n      xml.addChildNode(new XmlText(shape.toWireFormat(value)));\n    }\n\n    function applyNamespaces(xml, shape, isRoot) {\n      var uri,\n          prefix = 'xmlns';\n\n      if (shape.xmlNamespaceUri) {\n        uri = shape.xmlNamespaceUri;\n        if (shape.xmlNamespacePrefix) prefix += ':' + shape.xmlNamespacePrefix;\n      } else if (isRoot && shape.api.xmlNamespaceUri) {\n        uri = shape.api.xmlNamespaceUri;\n      }\n\n      if (uri) xml.addAttribute(prefix, uri);\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = XmlBuilder;\n  }, {\n    \"../util\": 71,\n    \"./xml-node\": 76,\n    \"./xml-text\": 77\n  }],\n  74: [function (require, module, exports) {\n    /**\n     * Escapes characters that can not be in an XML attribute.\n     */\n    function escapeAttribute(value) {\n      return value.replace(/&/g, '&amp;').replace(/'/g, '&apos;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = {\n      escapeAttribute: escapeAttribute\n    };\n  }, {}],\n  75: [function (require, module, exports) {\n    /**\n     * Escapes characters that can not be in an XML element.\n     */\n    function escapeElement(value) {\n      return value.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    }\n    /**\n     * @api private\n     */\n\n\n    module.exports = {\n      escapeElement: escapeElement\n    };\n  }, {}],\n  76: [function (require, module, exports) {\n    var escapeAttribute = require('./escape-attribute').escapeAttribute;\n    /**\n     * Represents an XML node.\n     * @api private\n     */\n\n\n    function XmlNode(name, children) {\n      if (children === void 0) {\n        children = [];\n      }\n\n      this.name = name;\n      this.children = children;\n      this.attributes = {};\n    }\n\n    XmlNode.prototype.addAttribute = function (name, value) {\n      this.attributes[name] = value;\n      return this;\n    };\n\n    XmlNode.prototype.addChildNode = function (child) {\n      this.children.push(child);\n      return this;\n    };\n\n    XmlNode.prototype.removeAttribute = function (name) {\n      delete this.attributes[name];\n      return this;\n    };\n\n    XmlNode.prototype.toString = function () {\n      var hasChildren = Boolean(this.children.length);\n      var xmlText = '<' + this.name; // add attributes\n\n      var attributes = this.attributes;\n\n      for (var i = 0, attributeNames = Object.keys(attributes); i < attributeNames.length; i++) {\n        var attributeName = attributeNames[i];\n        var attribute = attributes[attributeName];\n\n        if (typeof attribute !== 'undefined' && attribute !== null) {\n          xmlText += ' ' + attributeName + '=\\\"' + escapeAttribute('' + attribute) + '\\\"';\n        }\n      }\n\n      return xmlText += !hasChildren ? '/>' : '>' + this.children.map(function (c) {\n        return c.toString();\n      }).join('') + '</' + this.name + '>';\n    };\n    /**\n     * @api private\n     */\n\n\n    module.exports = {\n      XmlNode: XmlNode\n    };\n  }, {\n    \"./escape-attribute\": 74\n  }],\n  77: [function (require, module, exports) {\n    var escapeElement = require('./escape-element').escapeElement;\n    /**\n     * Represents an XML text value.\n     * @api private\n     */\n\n\n    function XmlText(value) {\n      this.value = value;\n    }\n\n    XmlText.prototype.toString = function () {\n      return escapeElement('' + this.value);\n    };\n    /**\n     * @api private\n     */\n\n\n    module.exports = {\n      XmlText: XmlText\n    };\n  }, {\n    \"./escape-element\": 75\n  }],\n  78: [function (require, module, exports) {\n    'use strict';\n\n    exports.byteLength = byteLength;\n    exports.toByteArray = toByteArray;\n    exports.fromByteArray = fromByteArray;\n    var lookup = [];\n    var revLookup = [];\n    var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\n    var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n    for (var i = 0, len = code.length; i < len; ++i) {\n      lookup[i] = code[i];\n      revLookup[code.charCodeAt(i)] = i;\n    } // Support decoding URL-safe base64 strings, as Node.js does.\n    // See: https://en.wikipedia.org/wiki/Base64#URL_applications\n\n\n    revLookup['-'.charCodeAt(0)] = 62;\n    revLookup['_'.charCodeAt(0)] = 63;\n\n    function getLens(b64) {\n      var len = b64.length;\n\n      if (len % 4 > 0) {\n        throw new Error('Invalid string. Length must be a multiple of 4');\n      } // Trim off extra bytes after placeholder bytes are found\n      // See: https://github.com/beatgammit/base64-js/issues/42\n\n\n      var validLen = b64.indexOf('=');\n      if (validLen === -1) validLen = len;\n      var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;\n      return [validLen, placeHoldersLen];\n    } // base64 is 4/3 + up to two characters of the original data\n\n\n    function byteLength(b64) {\n      var lens = getLens(b64);\n      var validLen = lens[0];\n      var placeHoldersLen = lens[1];\n      return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n    }\n\n    function _byteLength(b64, validLen, placeHoldersLen) {\n      return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n    }\n\n    function toByteArray(b64) {\n      var tmp;\n      var lens = getLens(b64);\n      var validLen = lens[0];\n      var placeHoldersLen = lens[1];\n      var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));\n      var curByte = 0; // if there are placeholders, only get up to the last complete 4 chars\n\n      var len = placeHoldersLen > 0 ? validLen - 4 : validLen;\n      var i;\n\n      for (i = 0; i < len; i += 4) {\n        tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n        arr[curByte++] = tmp >> 16 & 0xFF;\n        arr[curByte++] = tmp >> 8 & 0xFF;\n        arr[curByte++] = tmp & 0xFF;\n      }\n\n      if (placeHoldersLen === 2) {\n        tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n        arr[curByte++] = tmp & 0xFF;\n      }\n\n      if (placeHoldersLen === 1) {\n        tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n        arr[curByte++] = tmp >> 8 & 0xFF;\n        arr[curByte++] = tmp & 0xFF;\n      }\n\n      return arr;\n    }\n\n    function tripletToBase64(num) {\n      return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];\n    }\n\n    function encodeChunk(uint8, start, end) {\n      var tmp;\n      var output = [];\n\n      for (var i = start; i < end; i += 3) {\n        tmp = (uint8[i] << 16 & 0xFF0000) + (uint8[i + 1] << 8 & 0xFF00) + (uint8[i + 2] & 0xFF);\n        output.push(tripletToBase64(tmp));\n      }\n\n      return output.join('');\n    }\n\n    function fromByteArray(uint8) {\n      var tmp;\n      var len = uint8.length;\n      var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n\n      var parts = [];\n      var maxChunkLength = 16383; // must be multiple of 3\n      // go through the array every three bytes, we'll deal with trailing stuff later\n\n      for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n        parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));\n      } // pad the end with zeros, but make sure to not forget the extra bytes\n\n\n      if (extraBytes === 1) {\n        tmp = uint8[len - 1];\n        parts.push(lookup[tmp >> 2] + lookup[tmp << 4 & 0x3F] + '==');\n      } else if (extraBytes === 2) {\n        tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n        parts.push(lookup[tmp >> 10] + lookup[tmp >> 4 & 0x3F] + lookup[tmp << 2 & 0x3F] + '=');\n      }\n\n      return parts.join('');\n    }\n  }, {}],\n  79: [function (require, module, exports) {}, {}],\n  80: [function (require, module, exports) {\n    (function (global, Buffer) {\n      /*!\n       * The buffer module from node.js, for the browser.\n       *\n       * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n       * @license  MIT\n       */\n\n      /* eslint-disable no-proto */\n      'use strict';\n\n      var base64 = require('base64-js');\n\n      var ieee754 = require('ieee754');\n\n      var isArray = require('isarray');\n\n      exports.Buffer = Buffer;\n      exports.SlowBuffer = SlowBuffer;\n      exports.INSPECT_MAX_BYTES = 50;\n      /**\n       * If `Buffer.TYPED_ARRAY_SUPPORT`:\n       *   === true    Use Uint8Array implementation (fastest)\n       *   === false   Use Object implementation (most compatible, even IE6)\n       *\n       * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n       * Opera 11.6+, iOS 4.2+.\n       *\n       * Due to various browser bugs, sometimes the Object implementation will be used even\n       * when the browser supports typed arrays.\n       *\n       * Note:\n       *\n       *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n       *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n       *\n       *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n       *\n       *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n       *     incorrect length in some situations.\n      \n       * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n       * get the Object implementation, which is slower but behaves correctly.\n       */\n\n      Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n      /*\n       * Export kMaxLength after typed array support is determined.\n       */\n\n      exports.kMaxLength = kMaxLength();\n\n      function typedArraySupport() {\n        try {\n          var arr = new Uint8Array(1);\n          arr.__proto__ = {\n            __proto__: Uint8Array.prototype,\n            foo: function () {\n              return 42;\n            }\n          };\n          return arr.foo() === 42 && // typed array instances can be augmented\n          typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n          arr.subarray(1, 1).byteLength === 0; // ie10 has broken `subarray`\n        } catch (e) {\n          return false;\n        }\n      }\n\n      function kMaxLength() {\n        return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n      }\n\n      function createBuffer(that, length) {\n        if (kMaxLength() < length) {\n          throw new RangeError('Invalid typed array length');\n        }\n\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          // Return an augmented `Uint8Array` instance, for best performance\n          that = new Uint8Array(length);\n          that.__proto__ = Buffer.prototype;\n        } else {\n          // Fallback: Return an object instance of the Buffer class\n          if (that === null) {\n            that = new Buffer(length);\n          }\n\n          that.length = length;\n        }\n\n        return that;\n      }\n      /**\n       * The Buffer constructor returns instances of `Uint8Array` that have their\n       * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n       * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n       * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n       * returns a single octet.\n       *\n       * The `Uint8Array` prototype remains unmodified.\n       */\n\n\n      function Buffer(arg, encodingOrOffset, length) {\n        if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n          return new Buffer(arg, encodingOrOffset, length);\n        } // Common case.\n\n\n        if (typeof arg === 'number') {\n          if (typeof encodingOrOffset === 'string') {\n            throw new Error('If encoding is specified then the first argument must be a string');\n          }\n\n          return allocUnsafe(this, arg);\n        }\n\n        return from(this, arg, encodingOrOffset, length);\n      }\n\n      Buffer.poolSize = 8192; // not used by this implementation\n      // TODO: Legacy, not needed anymore. Remove in next major version.\n\n      Buffer._augment = function (arr) {\n        arr.__proto__ = Buffer.prototype;\n        return arr;\n      };\n\n      function from(that, value, encodingOrOffset, length) {\n        if (typeof value === 'number') {\n          throw new TypeError('\"value\" argument must not be a number');\n        }\n\n        if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n          return fromArrayBuffer(that, value, encodingOrOffset, length);\n        }\n\n        if (typeof value === 'string') {\n          return fromString(that, value, encodingOrOffset);\n        }\n\n        return fromObject(that, value);\n      }\n      /**\n       * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n       * if value is a number.\n       * Buffer.from(str[, encoding])\n       * Buffer.from(array)\n       * Buffer.from(buffer)\n       * Buffer.from(arrayBuffer[, byteOffset[, length]])\n       **/\n\n\n      Buffer.from = function (value, encodingOrOffset, length) {\n        return from(null, value, encodingOrOffset, length);\n      };\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        Buffer.prototype.__proto__ = Uint8Array.prototype;\n        Buffer.__proto__ = Uint8Array;\n\n        if (typeof Symbol !== 'undefined' && Symbol.species && Buffer[Symbol.species] === Buffer) {\n          // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n          Object.defineProperty(Buffer, Symbol.species, {\n            value: null,\n            configurable: true\n          });\n        }\n      }\n\n      function assertSize(size) {\n        if (typeof size !== 'number') {\n          throw new TypeError('\"size\" argument must be a number');\n        } else if (size < 0) {\n          throw new RangeError('\"size\" argument must not be negative');\n        }\n      }\n\n      function alloc(that, size, fill, encoding) {\n        assertSize(size);\n\n        if (size <= 0) {\n          return createBuffer(that, size);\n        }\n\n        if (fill !== undefined) {\n          // Only pay attention to encoding if it's a string. This\n          // prevents accidentally sending in a number that would\n          // be interpretted as a start offset.\n          return typeof encoding === 'string' ? createBuffer(that, size).fill(fill, encoding) : createBuffer(that, size).fill(fill);\n        }\n\n        return createBuffer(that, size);\n      }\n      /**\n       * Creates a new filled Buffer instance.\n       * alloc(size[, fill[, encoding]])\n       **/\n\n\n      Buffer.alloc = function (size, fill, encoding) {\n        return alloc(null, size, fill, encoding);\n      };\n\n      function allocUnsafe(that, size) {\n        assertSize(size);\n        that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n\n        if (!Buffer.TYPED_ARRAY_SUPPORT) {\n          for (var i = 0; i < size; ++i) {\n            that[i] = 0;\n          }\n        }\n\n        return that;\n      }\n      /**\n       * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n       * */\n\n\n      Buffer.allocUnsafe = function (size) {\n        return allocUnsafe(null, size);\n      };\n      /**\n       * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n       */\n\n\n      Buffer.allocUnsafeSlow = function (size) {\n        return allocUnsafe(null, size);\n      };\n\n      function fromString(that, string, encoding) {\n        if (typeof encoding !== 'string' || encoding === '') {\n          encoding = 'utf8';\n        }\n\n        if (!Buffer.isEncoding(encoding)) {\n          throw new TypeError('\"encoding\" must be a valid string encoding');\n        }\n\n        var length = byteLength(string, encoding) | 0;\n        that = createBuffer(that, length);\n        var actual = that.write(string, encoding);\n\n        if (actual !== length) {\n          // Writing a hex string, for example, that contains invalid characters will\n          // cause everything after the first invalid character to be ignored. (e.g.\n          // 'abxxcd' will be treated as 'ab')\n          that = that.slice(0, actual);\n        }\n\n        return that;\n      }\n\n      function fromArrayLike(that, array) {\n        var length = array.length < 0 ? 0 : checked(array.length) | 0;\n        that = createBuffer(that, length);\n\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n\n        return that;\n      }\n\n      function fromArrayBuffer(that, array, byteOffset, length) {\n        array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n        if (byteOffset < 0 || array.byteLength < byteOffset) {\n          throw new RangeError('\\'offset\\' is out of bounds');\n        }\n\n        if (array.byteLength < byteOffset + (length || 0)) {\n          throw new RangeError('\\'length\\' is out of bounds');\n        }\n\n        if (byteOffset === undefined && length === undefined) {\n          array = new Uint8Array(array);\n        } else if (length === undefined) {\n          array = new Uint8Array(array, byteOffset);\n        } else {\n          array = new Uint8Array(array, byteOffset, length);\n        }\n\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          // Return an augmented `Uint8Array` instance, for best performance\n          that = array;\n          that.__proto__ = Buffer.prototype;\n        } else {\n          // Fallback: Return an object instance of the Buffer class\n          that = fromArrayLike(that, array);\n        }\n\n        return that;\n      }\n\n      function fromObject(that, obj) {\n        if (Buffer.isBuffer(obj)) {\n          var len = checked(obj.length) | 0;\n          that = createBuffer(that, len);\n\n          if (that.length === 0) {\n            return that;\n          }\n\n          obj.copy(that, 0, 0, len);\n          return that;\n        }\n\n        if (obj) {\n          if (typeof ArrayBuffer !== 'undefined' && obj.buffer instanceof ArrayBuffer || 'length' in obj) {\n            if (typeof obj.length !== 'number' || isnan(obj.length)) {\n              return createBuffer(that, 0);\n            }\n\n            return fromArrayLike(that, obj);\n          }\n\n          if (obj.type === 'Buffer' && isArray(obj.data)) {\n            return fromArrayLike(that, obj.data);\n          }\n        }\n\n        throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');\n      }\n\n      function checked(length) {\n        // Note: cannot use `length < kMaxLength()` here because that fails when\n        // length is NaN (which is otherwise coerced to zero.)\n        if (length >= kMaxLength()) {\n          throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n        }\n\n        return length | 0;\n      }\n\n      function SlowBuffer(length) {\n        if (+length != length) {\n          // eslint-disable-line eqeqeq\n          length = 0;\n        }\n\n        return Buffer.alloc(+length);\n      }\n\n      Buffer.isBuffer = function isBuffer(b) {\n        return !!(b != null && b._isBuffer);\n      };\n\n      Buffer.compare = function compare(a, b) {\n        if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n          throw new TypeError('Arguments must be Buffers');\n        }\n\n        if (a === b) return 0;\n        var x = a.length;\n        var y = b.length;\n\n        for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n          if (a[i] !== b[i]) {\n            x = a[i];\n            y = b[i];\n            break;\n          }\n        }\n\n        if (x < y) return -1;\n        if (y < x) return 1;\n        return 0;\n      };\n\n      Buffer.isEncoding = function isEncoding(encoding) {\n        switch (String(encoding).toLowerCase()) {\n          case 'hex':\n          case 'utf8':\n          case 'utf-8':\n          case 'ascii':\n          case 'latin1':\n          case 'binary':\n          case 'base64':\n          case 'ucs2':\n          case 'ucs-2':\n          case 'utf16le':\n          case 'utf-16le':\n            return true;\n\n          default:\n            return false;\n        }\n      };\n\n      Buffer.concat = function concat(list, length) {\n        if (!isArray(list)) {\n          throw new TypeError('\"list\" argument must be an Array of Buffers');\n        }\n\n        if (list.length === 0) {\n          return Buffer.alloc(0);\n        }\n\n        var i;\n\n        if (length === undefined) {\n          length = 0;\n\n          for (i = 0; i < list.length; ++i) {\n            length += list[i].length;\n          }\n        }\n\n        var buffer = Buffer.allocUnsafe(length);\n        var pos = 0;\n\n        for (i = 0; i < list.length; ++i) {\n          var buf = list[i];\n\n          if (!Buffer.isBuffer(buf)) {\n            throw new TypeError('\"list\" argument must be an Array of Buffers');\n          }\n\n          buf.copy(buffer, pos);\n          pos += buf.length;\n        }\n\n        return buffer;\n      };\n\n      function byteLength(string, encoding) {\n        if (Buffer.isBuffer(string)) {\n          return string.length;\n        }\n\n        if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n          return string.byteLength;\n        }\n\n        if (typeof string !== 'string') {\n          string = '' + string;\n        }\n\n        var len = string.length;\n        if (len === 0) return 0; // Use a for loop to avoid recursion\n\n        var loweredCase = false;\n\n        for (;;) {\n          switch (encoding) {\n            case 'ascii':\n            case 'latin1':\n            case 'binary':\n              return len;\n\n            case 'utf8':\n            case 'utf-8':\n            case undefined:\n              return utf8ToBytes(string).length;\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n              return len * 2;\n\n            case 'hex':\n              return len >>> 1;\n\n            case 'base64':\n              return base64ToBytes(string).length;\n\n            default:\n              if (loweredCase) return utf8ToBytes(string).length; // assume utf8\n\n              encoding = ('' + encoding).toLowerCase();\n              loweredCase = true;\n          }\n        }\n      }\n\n      Buffer.byteLength = byteLength;\n\n      function slowToString(encoding, start, end) {\n        var loweredCase = false; // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n        // property of a typed array.\n        // This behaves neither like String nor Uint8Array in that we set start/end\n        // to their upper/lower bounds if the value passed is out of range.\n        // undefined is handled specially as per ECMA-262 6th Edition,\n        // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n\n        if (start === undefined || start < 0) {\n          start = 0;\n        } // Return early if start > this.length. Done here to prevent potential uint32\n        // coercion fail below.\n\n\n        if (start > this.length) {\n          return '';\n        }\n\n        if (end === undefined || end > this.length) {\n          end = this.length;\n        }\n\n        if (end <= 0) {\n          return '';\n        } // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n\n\n        end >>>= 0;\n        start >>>= 0;\n\n        if (end <= start) {\n          return '';\n        }\n\n        if (!encoding) encoding = 'utf8';\n\n        while (true) {\n          switch (encoding) {\n            case 'hex':\n              return hexSlice(this, start, end);\n\n            case 'utf8':\n            case 'utf-8':\n              return utf8Slice(this, start, end);\n\n            case 'ascii':\n              return asciiSlice(this, start, end);\n\n            case 'latin1':\n            case 'binary':\n              return latin1Slice(this, start, end);\n\n            case 'base64':\n              return base64Slice(this, start, end);\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n              return utf16leSlice(this, start, end);\n\n            default:\n              if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n              encoding = (encoding + '').toLowerCase();\n              loweredCase = true;\n          }\n        }\n      } // The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n      // Buffer instances.\n\n\n      Buffer.prototype._isBuffer = true;\n\n      function swap(b, n, m) {\n        var i = b[n];\n        b[n] = b[m];\n        b[m] = i;\n      }\n\n      Buffer.prototype.swap16 = function swap16() {\n        var len = this.length;\n\n        if (len % 2 !== 0) {\n          throw new RangeError('Buffer size must be a multiple of 16-bits');\n        }\n\n        for (var i = 0; i < len; i += 2) {\n          swap(this, i, i + 1);\n        }\n\n        return this;\n      };\n\n      Buffer.prototype.swap32 = function swap32() {\n        var len = this.length;\n\n        if (len % 4 !== 0) {\n          throw new RangeError('Buffer size must be a multiple of 32-bits');\n        }\n\n        for (var i = 0; i < len; i += 4) {\n          swap(this, i, i + 3);\n          swap(this, i + 1, i + 2);\n        }\n\n        return this;\n      };\n\n      Buffer.prototype.swap64 = function swap64() {\n        var len = this.length;\n\n        if (len % 8 !== 0) {\n          throw new RangeError('Buffer size must be a multiple of 64-bits');\n        }\n\n        for (var i = 0; i < len; i += 8) {\n          swap(this, i, i + 7);\n          swap(this, i + 1, i + 6);\n          swap(this, i + 2, i + 5);\n          swap(this, i + 3, i + 4);\n        }\n\n        return this;\n      };\n\n      Buffer.prototype.toString = function toString() {\n        var length = this.length | 0;\n        if (length === 0) return '';\n        if (arguments.length === 0) return utf8Slice(this, 0, length);\n        return slowToString.apply(this, arguments);\n      };\n\n      Buffer.prototype.equals = function equals(b) {\n        if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n        if (this === b) return true;\n        return Buffer.compare(this, b) === 0;\n      };\n\n      Buffer.prototype.inspect = function inspect() {\n        var str = '';\n        var max = exports.INSPECT_MAX_BYTES;\n\n        if (this.length > 0) {\n          str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n          if (this.length > max) str += ' ... ';\n        }\n\n        return '<Buffer ' + str + '>';\n      };\n\n      Buffer.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {\n        if (!Buffer.isBuffer(target)) {\n          throw new TypeError('Argument must be a Buffer');\n        }\n\n        if (start === undefined) {\n          start = 0;\n        }\n\n        if (end === undefined) {\n          end = target ? target.length : 0;\n        }\n\n        if (thisStart === undefined) {\n          thisStart = 0;\n        }\n\n        if (thisEnd === undefined) {\n          thisEnd = this.length;\n        }\n\n        if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n          throw new RangeError('out of range index');\n        }\n\n        if (thisStart >= thisEnd && start >= end) {\n          return 0;\n        }\n\n        if (thisStart >= thisEnd) {\n          return -1;\n        }\n\n        if (start >= end) {\n          return 1;\n        }\n\n        start >>>= 0;\n        end >>>= 0;\n        thisStart >>>= 0;\n        thisEnd >>>= 0;\n        if (this === target) return 0;\n        var x = thisEnd - thisStart;\n        var y = end - start;\n        var len = Math.min(x, y);\n        var thisCopy = this.slice(thisStart, thisEnd);\n        var targetCopy = target.slice(start, end);\n\n        for (var i = 0; i < len; ++i) {\n          if (thisCopy[i] !== targetCopy[i]) {\n            x = thisCopy[i];\n            y = targetCopy[i];\n            break;\n          }\n        }\n\n        if (x < y) return -1;\n        if (y < x) return 1;\n        return 0;\n      }; // Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n      // OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n      //\n      // Arguments:\n      // - buffer - a Buffer to search\n      // - val - a string, Buffer, or number\n      // - byteOffset - an index into `buffer`; will be clamped to an int32\n      // - encoding - an optional encoding, relevant is val is a string\n      // - dir - true for indexOf, false for lastIndexOf\n\n\n      function bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n        // Empty buffer means no match\n        if (buffer.length === 0) return -1; // Normalize byteOffset\n\n        if (typeof byteOffset === 'string') {\n          encoding = byteOffset;\n          byteOffset = 0;\n        } else if (byteOffset > 0x7fffffff) {\n          byteOffset = 0x7fffffff;\n        } else if (byteOffset < -0x80000000) {\n          byteOffset = -0x80000000;\n        }\n\n        byteOffset = +byteOffset; // Coerce to Number.\n\n        if (isNaN(byteOffset)) {\n          // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n          byteOffset = dir ? 0 : buffer.length - 1;\n        } // Normalize byteOffset: negative offsets start from the end of the buffer\n\n\n        if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n\n        if (byteOffset >= buffer.length) {\n          if (dir) return -1;else byteOffset = buffer.length - 1;\n        } else if (byteOffset < 0) {\n          if (dir) byteOffset = 0;else return -1;\n        } // Normalize val\n\n\n        if (typeof val === 'string') {\n          val = Buffer.from(val, encoding);\n        } // Finally, search either indexOf (if dir is true) or lastIndexOf\n\n\n        if (Buffer.isBuffer(val)) {\n          // Special case: looking for empty string/buffer always fails\n          if (val.length === 0) {\n            return -1;\n          }\n\n          return arrayIndexOf(buffer, val, byteOffset, encoding, dir);\n        } else if (typeof val === 'number') {\n          val = val & 0xFF; // Search for a byte value [0-255]\n\n          if (Buffer.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === 'function') {\n            if (dir) {\n              return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);\n            } else {\n              return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);\n            }\n          }\n\n          return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);\n        }\n\n        throw new TypeError('val must be string, number or Buffer');\n      }\n\n      function arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n        var indexSize = 1;\n        var arrLength = arr.length;\n        var valLength = val.length;\n\n        if (encoding !== undefined) {\n          encoding = String(encoding).toLowerCase();\n\n          if (encoding === 'ucs2' || encoding === 'ucs-2' || encoding === 'utf16le' || encoding === 'utf-16le') {\n            if (arr.length < 2 || val.length < 2) {\n              return -1;\n            }\n\n            indexSize = 2;\n            arrLength /= 2;\n            valLength /= 2;\n            byteOffset /= 2;\n          }\n        }\n\n        function read(buf, i) {\n          if (indexSize === 1) {\n            return buf[i];\n          } else {\n            return buf.readUInt16BE(i * indexSize);\n          }\n        }\n\n        var i;\n\n        if (dir) {\n          var foundIndex = -1;\n\n          for (i = byteOffset; i < arrLength; i++) {\n            if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n              if (foundIndex === -1) foundIndex = i;\n              if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;\n            } else {\n              if (foundIndex !== -1) i -= i - foundIndex;\n              foundIndex = -1;\n            }\n          }\n        } else {\n          if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n\n          for (i = byteOffset; i >= 0; i--) {\n            var found = true;\n\n            for (var j = 0; j < valLength; j++) {\n              if (read(arr, i + j) !== read(val, j)) {\n                found = false;\n                break;\n              }\n            }\n\n            if (found) return i;\n          }\n        }\n\n        return -1;\n      }\n\n      Buffer.prototype.includes = function includes(val, byteOffset, encoding) {\n        return this.indexOf(val, byteOffset, encoding) !== -1;\n      };\n\n      Buffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n        return bidirectionalIndexOf(this, val, byteOffset, encoding, true);\n      };\n\n      Buffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n        return bidirectionalIndexOf(this, val, byteOffset, encoding, false);\n      };\n\n      function hexWrite(buf, string, offset, length) {\n        offset = Number(offset) || 0;\n        var remaining = buf.length - offset;\n\n        if (!length) {\n          length = remaining;\n        } else {\n          length = Number(length);\n\n          if (length > remaining) {\n            length = remaining;\n          }\n        } // must be an even number of digits\n\n\n        var strLen = string.length;\n        if (strLen % 2 !== 0) throw new TypeError('Invalid hex string');\n\n        if (length > strLen / 2) {\n          length = strLen / 2;\n        }\n\n        for (var i = 0; i < length; ++i) {\n          var parsed = parseInt(string.substr(i * 2, 2), 16);\n          if (isNaN(parsed)) return i;\n          buf[offset + i] = parsed;\n        }\n\n        return i;\n      }\n\n      function utf8Write(buf, string, offset, length) {\n        return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n      }\n\n      function asciiWrite(buf, string, offset, length) {\n        return blitBuffer(asciiToBytes(string), buf, offset, length);\n      }\n\n      function latin1Write(buf, string, offset, length) {\n        return asciiWrite(buf, string, offset, length);\n      }\n\n      function base64Write(buf, string, offset, length) {\n        return blitBuffer(base64ToBytes(string), buf, offset, length);\n      }\n\n      function ucs2Write(buf, string, offset, length) {\n        return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n      }\n\n      Buffer.prototype.write = function write(string, offset, length, encoding) {\n        // Buffer#write(string)\n        if (offset === undefined) {\n          encoding = 'utf8';\n          length = this.length;\n          offset = 0; // Buffer#write(string, encoding)\n        } else if (length === undefined && typeof offset === 'string') {\n          encoding = offset;\n          length = this.length;\n          offset = 0; // Buffer#write(string, offset[, length][, encoding])\n        } else if (isFinite(offset)) {\n          offset = offset | 0;\n\n          if (isFinite(length)) {\n            length = length | 0;\n            if (encoding === undefined) encoding = 'utf8';\n          } else {\n            encoding = length;\n            length = undefined;\n          } // legacy write(string, encoding, offset, length) - remove in v0.13\n\n        } else {\n          throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');\n        }\n\n        var remaining = this.length - offset;\n        if (length === undefined || length > remaining) length = remaining;\n\n        if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n          throw new RangeError('Attempt to write outside buffer bounds');\n        }\n\n        if (!encoding) encoding = 'utf8';\n        var loweredCase = false;\n\n        for (;;) {\n          switch (encoding) {\n            case 'hex':\n              return hexWrite(this, string, offset, length);\n\n            case 'utf8':\n            case 'utf-8':\n              return utf8Write(this, string, offset, length);\n\n            case 'ascii':\n              return asciiWrite(this, string, offset, length);\n\n            case 'latin1':\n            case 'binary':\n              return latin1Write(this, string, offset, length);\n\n            case 'base64':\n              // Warning: maxLength not taken into account in base64Write\n              return base64Write(this, string, offset, length);\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n              return ucs2Write(this, string, offset, length);\n\n            default:\n              if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n              encoding = ('' + encoding).toLowerCase();\n              loweredCase = true;\n          }\n        }\n      };\n\n      Buffer.prototype.toJSON = function toJSON() {\n        return {\n          type: 'Buffer',\n          data: Array.prototype.slice.call(this._arr || this, 0)\n        };\n      };\n\n      function base64Slice(buf, start, end) {\n        if (start === 0 && end === buf.length) {\n          return base64.fromByteArray(buf);\n        } else {\n          return base64.fromByteArray(buf.slice(start, end));\n        }\n      }\n\n      function utf8Slice(buf, start, end) {\n        end = Math.min(buf.length, end);\n        var res = [];\n        var i = start;\n\n        while (i < end) {\n          var firstByte = buf[i];\n          var codePoint = null;\n          var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n          if (i + bytesPerSequence <= end) {\n            var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n            switch (bytesPerSequence) {\n              case 1:\n                if (firstByte < 0x80) {\n                  codePoint = firstByte;\n                }\n\n                break;\n\n              case 2:\n                secondByte = buf[i + 1];\n\n                if ((secondByte & 0xC0) === 0x80) {\n                  tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n\n                  if (tempCodePoint > 0x7F) {\n                    codePoint = tempCodePoint;\n                  }\n                }\n\n                break;\n\n              case 3:\n                secondByte = buf[i + 1];\n                thirdByte = buf[i + 2];\n\n                if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n                  tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n\n                  if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n                    codePoint = tempCodePoint;\n                  }\n                }\n\n                break;\n\n              case 4:\n                secondByte = buf[i + 1];\n                thirdByte = buf[i + 2];\n                fourthByte = buf[i + 3];\n\n                if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n                  tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n\n                  if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n                    codePoint = tempCodePoint;\n                  }\n                }\n\n            }\n          }\n\n          if (codePoint === null) {\n            // we did not generate a valid codePoint so insert a\n            // replacement char (U+FFFD) and advance only 1 byte\n            codePoint = 0xFFFD;\n            bytesPerSequence = 1;\n          } else if (codePoint > 0xFFFF) {\n            // encode to utf16 (surrogate pair dance)\n            codePoint -= 0x10000;\n            res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n            codePoint = 0xDC00 | codePoint & 0x3FF;\n          }\n\n          res.push(codePoint);\n          i += bytesPerSequence;\n        }\n\n        return decodeCodePointsArray(res);\n      } // Based on http://stackoverflow.com/a/22747272/680742, the browser with\n      // the lowest limit is Chrome, with 0x10000 args.\n      // We go 1 magnitude less, for safety\n\n\n      var MAX_ARGUMENTS_LENGTH = 0x1000;\n\n      function decodeCodePointsArray(codePoints) {\n        var len = codePoints.length;\n\n        if (len <= MAX_ARGUMENTS_LENGTH) {\n          return String.fromCharCode.apply(String, codePoints); // avoid extra slice()\n        } // Decode in chunks to avoid \"call stack size exceeded\".\n\n\n        var res = '';\n        var i = 0;\n\n        while (i < len) {\n          res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n        }\n\n        return res;\n      }\n\n      function asciiSlice(buf, start, end) {\n        var ret = '';\n        end = Math.min(buf.length, end);\n\n        for (var i = start; i < end; ++i) {\n          ret += String.fromCharCode(buf[i] & 0x7F);\n        }\n\n        return ret;\n      }\n\n      function latin1Slice(buf, start, end) {\n        var ret = '';\n        end = Math.min(buf.length, end);\n\n        for (var i = start; i < end; ++i) {\n          ret += String.fromCharCode(buf[i]);\n        }\n\n        return ret;\n      }\n\n      function hexSlice(buf, start, end) {\n        var len = buf.length;\n        if (!start || start < 0) start = 0;\n        if (!end || end < 0 || end > len) end = len;\n        var out = '';\n\n        for (var i = start; i < end; ++i) {\n          out += toHex(buf[i]);\n        }\n\n        return out;\n      }\n\n      function utf16leSlice(buf, start, end) {\n        var bytes = buf.slice(start, end);\n        var res = '';\n\n        for (var i = 0; i < bytes.length; i += 2) {\n          res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n        }\n\n        return res;\n      }\n\n      Buffer.prototype.slice = function slice(start, end) {\n        var len = this.length;\n        start = ~~start;\n        end = end === undefined ? len : ~~end;\n\n        if (start < 0) {\n          start += len;\n          if (start < 0) start = 0;\n        } else if (start > len) {\n          start = len;\n        }\n\n        if (end < 0) {\n          end += len;\n          if (end < 0) end = 0;\n        } else if (end > len) {\n          end = len;\n        }\n\n        if (end < start) end = start;\n        var newBuf;\n\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          newBuf = this.subarray(start, end);\n          newBuf.__proto__ = Buffer.prototype;\n        } else {\n          var sliceLen = end - start;\n          newBuf = new Buffer(sliceLen, undefined);\n\n          for (var i = 0; i < sliceLen; ++i) {\n            newBuf[i] = this[i + start];\n          }\n        }\n\n        return newBuf;\n      };\n      /*\n       * Need to make sure that buffer isn't trying to write out of bounds.\n       */\n\n\n      function checkOffset(offset, ext, length) {\n        if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n        if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n      }\n\n      Buffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkOffset(offset, byteLength, this.length);\n        var val = this[offset];\n        var mul = 1;\n        var i = 0;\n\n        while (++i < byteLength && (mul *= 0x100)) {\n          val += this[offset + i] * mul;\n        }\n\n        return val;\n      };\n\n      Buffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n\n        if (!noAssert) {\n          checkOffset(offset, byteLength, this.length);\n        }\n\n        var val = this[offset + --byteLength];\n        var mul = 1;\n\n        while (byteLength > 0 && (mul *= 0x100)) {\n          val += this[offset + --byteLength] * mul;\n        }\n\n        return val;\n      };\n\n      Buffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 1, this.length);\n        return this[offset];\n      };\n\n      Buffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        return this[offset] | this[offset + 1] << 8;\n      };\n\n      Buffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        return this[offset] << 8 | this[offset + 1];\n      };\n\n      Buffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n        return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n      };\n\n      Buffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n        return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n      };\n\n      Buffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkOffset(offset, byteLength, this.length);\n        var val = this[offset];\n        var mul = 1;\n        var i = 0;\n\n        while (++i < byteLength && (mul *= 0x100)) {\n          val += this[offset + i] * mul;\n        }\n\n        mul *= 0x80;\n        if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n        return val;\n      };\n\n      Buffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkOffset(offset, byteLength, this.length);\n        var i = byteLength;\n        var mul = 1;\n        var val = this[offset + --i];\n\n        while (i > 0 && (mul *= 0x100)) {\n          val += this[offset + --i] * mul;\n        }\n\n        mul *= 0x80;\n        if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n        return val;\n      };\n\n      Buffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 1, this.length);\n        if (!(this[offset] & 0x80)) return this[offset];\n        return (0xff - this[offset] + 1) * -1;\n      };\n\n      Buffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        var val = this[offset] | this[offset + 1] << 8;\n        return val & 0x8000 ? val | 0xFFFF0000 : val;\n      };\n\n      Buffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        var val = this[offset + 1] | this[offset] << 8;\n        return val & 0x8000 ? val | 0xFFFF0000 : val;\n      };\n\n      Buffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n        return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n      };\n\n      Buffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n        return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n      };\n\n      Buffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n        return ieee754.read(this, offset, true, 23, 4);\n      };\n\n      Buffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n        return ieee754.read(this, offset, false, 23, 4);\n      };\n\n      Buffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 8, this.length);\n        return ieee754.read(this, offset, true, 52, 8);\n      };\n\n      Buffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 8, this.length);\n        return ieee754.read(this, offset, false, 52, 8);\n      };\n\n      function checkInt(buf, value, offset, ext, max, min) {\n        if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n        if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds');\n        if (offset + ext > buf.length) throw new RangeError('Index out of range');\n      }\n\n      Buffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n\n        if (!noAssert) {\n          var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n          checkInt(this, value, offset, byteLength, maxBytes, 0);\n        }\n\n        var mul = 1;\n        var i = 0;\n        this[offset] = value & 0xFF;\n\n        while (++i < byteLength && (mul *= 0x100)) {\n          this[offset + i] = value / mul & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n\n        if (!noAssert) {\n          var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n          checkInt(this, value, offset, byteLength, maxBytes, 0);\n        }\n\n        var i = byteLength - 1;\n        var mul = 1;\n        this[offset + i] = value & 0xFF;\n\n        while (--i >= 0 && (mul *= 0x100)) {\n          this[offset + i] = value / mul & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n        if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n        this[offset] = value & 0xff;\n        return offset + 1;\n      };\n\n      function objectWriteUInt16(buf, value, offset, littleEndian) {\n        if (value < 0) value = 0xffff + value + 1;\n\n        for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n          buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n        }\n      }\n\n      Buffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value & 0xff;\n          this[offset + 1] = value >>> 8;\n        } else {\n          objectWriteUInt16(this, value, offset, true);\n        }\n\n        return offset + 2;\n      };\n\n      Buffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 8;\n          this[offset + 1] = value & 0xff;\n        } else {\n          objectWriteUInt16(this, value, offset, false);\n        }\n\n        return offset + 2;\n      };\n\n      function objectWriteUInt32(buf, value, offset, littleEndian) {\n        if (value < 0) value = 0xffffffff + value + 1;\n\n        for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n          buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n        }\n      }\n\n      Buffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset + 3] = value >>> 24;\n          this[offset + 2] = value >>> 16;\n          this[offset + 1] = value >>> 8;\n          this[offset] = value & 0xff;\n        } else {\n          objectWriteUInt32(this, value, offset, true);\n        }\n\n        return offset + 4;\n      };\n\n      Buffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 24;\n          this[offset + 1] = value >>> 16;\n          this[offset + 2] = value >>> 8;\n          this[offset + 3] = value & 0xff;\n        } else {\n          objectWriteUInt32(this, value, offset, false);\n        }\n\n        return offset + 4;\n      };\n\n      Buffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n\n        if (!noAssert) {\n          var limit = Math.pow(2, 8 * byteLength - 1);\n          checkInt(this, value, offset, byteLength, limit - 1, -limit);\n        }\n\n        var i = 0;\n        var mul = 1;\n        var sub = 0;\n        this[offset] = value & 0xFF;\n\n        while (++i < byteLength && (mul *= 0x100)) {\n          if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n            sub = 1;\n          }\n\n          this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n\n        if (!noAssert) {\n          var limit = Math.pow(2, 8 * byteLength - 1);\n          checkInt(this, value, offset, byteLength, limit - 1, -limit);\n        }\n\n        var i = byteLength - 1;\n        var mul = 1;\n        var sub = 0;\n        this[offset + i] = value & 0xFF;\n\n        while (--i >= 0 && (mul *= 0x100)) {\n          if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n            sub = 1;\n          }\n\n          this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n        if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n        if (value < 0) value = 0xff + value + 1;\n        this[offset] = value & 0xff;\n        return offset + 1;\n      };\n\n      Buffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value & 0xff;\n          this[offset + 1] = value >>> 8;\n        } else {\n          objectWriteUInt16(this, value, offset, true);\n        }\n\n        return offset + 2;\n      };\n\n      Buffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 8;\n          this[offset + 1] = value & 0xff;\n        } else {\n          objectWriteUInt16(this, value, offset, false);\n        }\n\n        return offset + 2;\n      };\n\n      Buffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value & 0xff;\n          this[offset + 1] = value >>> 8;\n          this[offset + 2] = value >>> 16;\n          this[offset + 3] = value >>> 24;\n        } else {\n          objectWriteUInt32(this, value, offset, true);\n        }\n\n        return offset + 4;\n      };\n\n      Buffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n        if (value < 0) value = 0xffffffff + value + 1;\n\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 24;\n          this[offset + 1] = value >>> 16;\n          this[offset + 2] = value >>> 8;\n          this[offset + 3] = value & 0xff;\n        } else {\n          objectWriteUInt32(this, value, offset, false);\n        }\n\n        return offset + 4;\n      };\n\n      function checkIEEE754(buf, value, offset, ext, max, min) {\n        if (offset + ext > buf.length) throw new RangeError('Index out of range');\n        if (offset < 0) throw new RangeError('Index out of range');\n      }\n\n      function writeFloat(buf, value, offset, littleEndian, noAssert) {\n        if (!noAssert) {\n          checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n        }\n\n        ieee754.write(buf, value, offset, littleEndian, 23, 4);\n        return offset + 4;\n      }\n\n      Buffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n        return writeFloat(this, value, offset, true, noAssert);\n      };\n\n      Buffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n        return writeFloat(this, value, offset, false, noAssert);\n      };\n\n      function writeDouble(buf, value, offset, littleEndian, noAssert) {\n        if (!noAssert) {\n          checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n        }\n\n        ieee754.write(buf, value, offset, littleEndian, 52, 8);\n        return offset + 8;\n      }\n\n      Buffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n        return writeDouble(this, value, offset, true, noAssert);\n      };\n\n      Buffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n        return writeDouble(this, value, offset, false, noAssert);\n      }; // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n\n\n      Buffer.prototype.copy = function copy(target, targetStart, start, end) {\n        if (!start) start = 0;\n        if (!end && end !== 0) end = this.length;\n        if (targetStart >= target.length) targetStart = target.length;\n        if (!targetStart) targetStart = 0;\n        if (end > 0 && end < start) end = start; // Copy 0 bytes; we're done\n\n        if (end === start) return 0;\n        if (target.length === 0 || this.length === 0) return 0; // Fatal error conditions\n\n        if (targetStart < 0) {\n          throw new RangeError('targetStart out of bounds');\n        }\n\n        if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n        if (end < 0) throw new RangeError('sourceEnd out of bounds'); // Are we oob?\n\n        if (end > this.length) end = this.length;\n\n        if (target.length - targetStart < end - start) {\n          end = target.length - targetStart + start;\n        }\n\n        var len = end - start;\n        var i;\n\n        if (this === target && start < targetStart && targetStart < end) {\n          // descending copy from end\n          for (i = len - 1; i >= 0; --i) {\n            target[i + targetStart] = this[i + start];\n          }\n        } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n          // ascending copy from start\n          for (i = 0; i < len; ++i) {\n            target[i + targetStart] = this[i + start];\n          }\n        } else {\n          Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n        }\n\n        return len;\n      }; // Usage:\n      //    buffer.fill(number[, offset[, end]])\n      //    buffer.fill(buffer[, offset[, end]])\n      //    buffer.fill(string[, offset[, end]][, encoding])\n\n\n      Buffer.prototype.fill = function fill(val, start, end, encoding) {\n        // Handle string cases:\n        if (typeof val === 'string') {\n          if (typeof start === 'string') {\n            encoding = start;\n            start = 0;\n            end = this.length;\n          } else if (typeof end === 'string') {\n            encoding = end;\n            end = this.length;\n          }\n\n          if (val.length === 1) {\n            var code = val.charCodeAt(0);\n\n            if (code < 256) {\n              val = code;\n            }\n          }\n\n          if (encoding !== undefined && typeof encoding !== 'string') {\n            throw new TypeError('encoding must be a string');\n          }\n\n          if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n            throw new TypeError('Unknown encoding: ' + encoding);\n          }\n        } else if (typeof val === 'number') {\n          val = val & 255;\n        } // Invalid ranges are not set to a default, so can range check early.\n\n\n        if (start < 0 || this.length < start || this.length < end) {\n          throw new RangeError('Out of range index');\n        }\n\n        if (end <= start) {\n          return this;\n        }\n\n        start = start >>> 0;\n        end = end === undefined ? this.length : end >>> 0;\n        if (!val) val = 0;\n        var i;\n\n        if (typeof val === 'number') {\n          for (i = start; i < end; ++i) {\n            this[i] = val;\n          }\n        } else {\n          var bytes = Buffer.isBuffer(val) ? val : utf8ToBytes(new Buffer(val, encoding).toString());\n          var len = bytes.length;\n\n          for (i = 0; i < end - start; ++i) {\n            this[i + start] = bytes[i % len];\n          }\n        }\n\n        return this;\n      }; // HELPER FUNCTIONS\n      // ================\n\n\n      var INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\n      function base64clean(str) {\n        // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n        str = stringtrim(str).replace(INVALID_BASE64_RE, ''); // Node converts strings with length < 2 to ''\n\n        if (str.length < 2) return ''; // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\n        while (str.length % 4 !== 0) {\n          str = str + '=';\n        }\n\n        return str;\n      }\n\n      function stringtrim(str) {\n        if (str.trim) return str.trim();\n        return str.replace(/^\\s+|\\s+$/g, '');\n      }\n\n      function toHex(n) {\n        if (n < 16) return '0' + n.toString(16);\n        return n.toString(16);\n      }\n\n      function utf8ToBytes(string, units) {\n        units = units || Infinity;\n        var codePoint;\n        var length = string.length;\n        var leadSurrogate = null;\n        var bytes = [];\n\n        for (var i = 0; i < length; ++i) {\n          codePoint = string.charCodeAt(i); // is surrogate component\n\n          if (codePoint > 0xD7FF && codePoint < 0xE000) {\n            // last char was a lead\n            if (!leadSurrogate) {\n              // no lead yet\n              if (codePoint > 0xDBFF) {\n                // unexpected trail\n                if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n                continue;\n              } else if (i + 1 === length) {\n                // unpaired lead\n                if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n                continue;\n              } // valid lead\n\n\n              leadSurrogate = codePoint;\n              continue;\n            } // 2 leads in a row\n\n\n            if (codePoint < 0xDC00) {\n              if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n              leadSurrogate = codePoint;\n              continue;\n            } // valid surrogate pair\n\n\n            codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n          } else if (leadSurrogate) {\n            // valid bmp char, but last char was a lead\n            if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          }\n\n          leadSurrogate = null; // encode utf8\n\n          if (codePoint < 0x80) {\n            if ((units -= 1) < 0) break;\n            bytes.push(codePoint);\n          } else if (codePoint < 0x800) {\n            if ((units -= 2) < 0) break;\n            bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n          } else if (codePoint < 0x10000) {\n            if ((units -= 3) < 0) break;\n            bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n          } else if (codePoint < 0x110000) {\n            if ((units -= 4) < 0) break;\n            bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n          } else {\n            throw new Error('Invalid code point');\n          }\n        }\n\n        return bytes;\n      }\n\n      function asciiToBytes(str) {\n        var byteArray = [];\n\n        for (var i = 0; i < str.length; ++i) {\n          // Node's code seems to be doing this and not & 0x7F..\n          byteArray.push(str.charCodeAt(i) & 0xFF);\n        }\n\n        return byteArray;\n      }\n\n      function utf16leToBytes(str, units) {\n        var c, hi, lo;\n        var byteArray = [];\n\n        for (var i = 0; i < str.length; ++i) {\n          if ((units -= 2) < 0) break;\n          c = str.charCodeAt(i);\n          hi = c >> 8;\n          lo = c % 256;\n          byteArray.push(lo);\n          byteArray.push(hi);\n        }\n\n        return byteArray;\n      }\n\n      function base64ToBytes(str) {\n        return base64.toByteArray(base64clean(str));\n      }\n\n      function blitBuffer(src, dst, offset, length) {\n        for (var i = 0; i < length; ++i) {\n          if (i + offset >= dst.length || i >= src.length) break;\n          dst[i + offset] = src[i];\n        }\n\n        return i;\n      }\n\n      function isnan(val) {\n        return val !== val; // eslint-disable-line no-self-compare\n      }\n    }).call(this, typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {}, require(\"buffer\").Buffer);\n  }, {\n    \"base64-js\": 78,\n    \"buffer\": 80,\n    \"ieee754\": 82,\n    \"isarray\": 83\n  }],\n  81: [function (require, module, exports) {\n    // Copyright Joyent, Inc. and other Node contributors.\n    //\n    // Permission is hereby granted, free of charge, to any person obtaining a\n    // copy of this software and associated documentation files (the\n    // \"Software\"), to deal in the Software without restriction, including\n    // without limitation the rights to use, copy, modify, merge, publish,\n    // distribute, sublicense, and/or sell copies of the Software, and to permit\n    // persons to whom the Software is furnished to do so, subject to the\n    // following conditions:\n    //\n    // The above copyright notice and this permission notice shall be included\n    // in all copies or substantial portions of the Software.\n    //\n    // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n    // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n    // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n    // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n    // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n    // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n    // USE OR OTHER DEALINGS IN THE SOFTWARE.\n    function EventEmitter() {\n      this._events = this._events || {};\n      this._maxListeners = this._maxListeners || undefined;\n    }\n\n    module.exports = EventEmitter; // Backwards-compat with node 0.10.x\n\n    EventEmitter.EventEmitter = EventEmitter;\n    EventEmitter.prototype._events = undefined;\n    EventEmitter.prototype._maxListeners = undefined; // By default EventEmitters will print a warning if more than 10 listeners are\n    // added to it. This is a useful default which helps finding memory leaks.\n\n    EventEmitter.defaultMaxListeners = 10; // Obviously not all Emitters should be limited to 10. This function allows\n    // that to be increased. Set to zero for unlimited.\n\n    EventEmitter.prototype.setMaxListeners = function (n) {\n      if (!isNumber(n) || n < 0 || isNaN(n)) throw TypeError('n must be a positive number');\n      this._maxListeners = n;\n      return this;\n    };\n\n    EventEmitter.prototype.emit = function (type) {\n      var er, handler, len, args, i, listeners;\n      if (!this._events) this._events = {}; // If there is no 'error' event listener then throw.\n\n      if (type === 'error') {\n        if (!this._events.error || isObject(this._events.error) && !this._events.error.length) {\n          er = arguments[1];\n\n          if (er instanceof Error) {\n            throw er; // Unhandled 'error' event\n          } else {\n            // At least give some kind of context to the user\n            var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n            err.context = er;\n            throw err;\n          }\n        }\n      }\n\n      handler = this._events[type];\n      if (isUndefined(handler)) return false;\n\n      if (isFunction(handler)) {\n        switch (arguments.length) {\n          // fast cases\n          case 1:\n            handler.call(this);\n            break;\n\n          case 2:\n            handler.call(this, arguments[1]);\n            break;\n\n          case 3:\n            handler.call(this, arguments[1], arguments[2]);\n            break;\n          // slower\n\n          default:\n            args = Array.prototype.slice.call(arguments, 1);\n            handler.apply(this, args);\n        }\n      } else if (isObject(handler)) {\n        args = Array.prototype.slice.call(arguments, 1);\n        listeners = handler.slice();\n        len = listeners.length;\n\n        for (i = 0; i < len; i++) listeners[i].apply(this, args);\n      }\n\n      return true;\n    };\n\n    EventEmitter.prototype.addListener = function (type, listener) {\n      var m;\n      if (!isFunction(listener)) throw TypeError('listener must be a function');\n      if (!this._events) this._events = {}; // To avoid recursion in the case that type === \"newListener\"! Before\n      // adding it to the listeners, first emit \"newListener\".\n\n      if (this._events.newListener) this.emit('newListener', type, isFunction(listener.listener) ? listener.listener : listener);\n      if (!this._events[type]) // Optimize the case of one listener. Don't need the extra array object.\n        this._events[type] = listener;else if (isObject(this._events[type])) // If we've already got an array, just append.\n        this._events[type].push(listener);else // Adding the second element, need to change to array.\n        this._events[type] = [this._events[type], listener]; // Check for listener leak\n\n      if (isObject(this._events[type]) && !this._events[type].warned) {\n        if (!isUndefined(this._maxListeners)) {\n          m = this._maxListeners;\n        } else {\n          m = EventEmitter.defaultMaxListeners;\n        }\n\n        if (m && m > 0 && this._events[type].length > m) {\n          this._events[type].warned = true;\n          console.error('(node) warning: possible EventEmitter memory ' + 'leak detected. %d listeners added. ' + 'Use emitter.setMaxListeners() to increase limit.', this._events[type].length);\n\n          if (typeof console.trace === 'function') {\n            // not supported in IE 10\n            console.trace();\n          }\n        }\n      }\n\n      return this;\n    };\n\n    EventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\n    EventEmitter.prototype.once = function (type, listener) {\n      if (!isFunction(listener)) throw TypeError('listener must be a function');\n      var fired = false;\n\n      function g() {\n        this.removeListener(type, g);\n\n        if (!fired) {\n          fired = true;\n          listener.apply(this, arguments);\n        }\n      }\n\n      g.listener = listener;\n      this.on(type, g);\n      return this;\n    }; // emits a 'removeListener' event iff the listener was removed\n\n\n    EventEmitter.prototype.removeListener = function (type, listener) {\n      var list, position, length, i;\n      if (!isFunction(listener)) throw TypeError('listener must be a function');\n      if (!this._events || !this._events[type]) return this;\n      list = this._events[type];\n      length = list.length;\n      position = -1;\n\n      if (list === listener || isFunction(list.listener) && list.listener === listener) {\n        delete this._events[type];\n        if (this._events.removeListener) this.emit('removeListener', type, listener);\n      } else if (isObject(list)) {\n        for (i = length; i-- > 0;) {\n          if (list[i] === listener || list[i].listener && list[i].listener === listener) {\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0) return this;\n\n        if (list.length === 1) {\n          list.length = 0;\n          delete this._events[type];\n        } else {\n          list.splice(position, 1);\n        }\n\n        if (this._events.removeListener) this.emit('removeListener', type, listener);\n      }\n\n      return this;\n    };\n\n    EventEmitter.prototype.removeAllListeners = function (type) {\n      var key, listeners;\n      if (!this._events) return this; // not listening for removeListener, no need to emit\n\n      if (!this._events.removeListener) {\n        if (arguments.length === 0) this._events = {};else if (this._events[type]) delete this._events[type];\n        return this;\n      } // emit removeListener for all listeners on all events\n\n\n      if (arguments.length === 0) {\n        for (key in this._events) {\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n\n        this.removeAllListeners('removeListener');\n        this._events = {};\n        return this;\n      }\n\n      listeners = this._events[type];\n\n      if (isFunction(listeners)) {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        while (listeners.length) this.removeListener(type, listeners[listeners.length - 1]);\n      }\n\n      delete this._events[type];\n      return this;\n    };\n\n    EventEmitter.prototype.listeners = function (type) {\n      var ret;\n      if (!this._events || !this._events[type]) ret = [];else if (isFunction(this._events[type])) ret = [this._events[type]];else ret = this._events[type].slice();\n      return ret;\n    };\n\n    EventEmitter.prototype.listenerCount = function (type) {\n      if (this._events) {\n        var evlistener = this._events[type];\n        if (isFunction(evlistener)) return 1;else if (evlistener) return evlistener.length;\n      }\n\n      return 0;\n    };\n\n    EventEmitter.listenerCount = function (emitter, type) {\n      return emitter.listenerCount(type);\n    };\n\n    function isFunction(arg) {\n      return typeof arg === 'function';\n    }\n\n    function isNumber(arg) {\n      return typeof arg === 'number';\n    }\n\n    function isObject(arg) {\n      return typeof arg === 'object' && arg !== null;\n    }\n\n    function isUndefined(arg) {\n      return arg === void 0;\n    }\n  }, {}],\n  82: [function (require, module, exports) {\n    exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n      var e, m;\n      var eLen = nBytes * 8 - mLen - 1;\n      var eMax = (1 << eLen) - 1;\n      var eBias = eMax >> 1;\n      var nBits = -7;\n      var i = isLE ? nBytes - 1 : 0;\n      var d = isLE ? -1 : 1;\n      var s = buffer[offset + i];\n      i += d;\n      e = s & (1 << -nBits) - 1;\n      s >>= -nBits;\n      nBits += eLen;\n\n      for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n      m = e & (1 << -nBits) - 1;\n      e >>= -nBits;\n      nBits += mLen;\n\n      for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n      if (e === 0) {\n        e = 1 - eBias;\n      } else if (e === eMax) {\n        return m ? NaN : (s ? -1 : 1) * Infinity;\n      } else {\n        m = m + Math.pow(2, mLen);\n        e = e - eBias;\n      }\n\n      return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n    };\n\n    exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n      var e, m, c;\n      var eLen = nBytes * 8 - mLen - 1;\n      var eMax = (1 << eLen) - 1;\n      var eBias = eMax >> 1;\n      var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n      var i = isLE ? 0 : nBytes - 1;\n      var d = isLE ? 1 : -1;\n      var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n      value = Math.abs(value);\n\n      if (isNaN(value) || value === Infinity) {\n        m = isNaN(value) ? 1 : 0;\n        e = eMax;\n      } else {\n        e = Math.floor(Math.log(value) / Math.LN2);\n\n        if (value * (c = Math.pow(2, -e)) < 1) {\n          e--;\n          c *= 2;\n        }\n\n        if (e + eBias >= 1) {\n          value += rt / c;\n        } else {\n          value += rt * Math.pow(2, 1 - eBias);\n        }\n\n        if (value * c >= 2) {\n          e++;\n          c /= 2;\n        }\n\n        if (e + eBias >= eMax) {\n          m = 0;\n          e = eMax;\n        } else if (e + eBias >= 1) {\n          m = (value * c - 1) * Math.pow(2, mLen);\n          e = e + eBias;\n        } else {\n          m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n          e = 0;\n        }\n      }\n\n      for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n      e = e << mLen | m;\n      eLen += mLen;\n\n      for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n      buffer[offset + i - d] |= s * 128;\n    };\n  }, {}],\n  83: [function (require, module, exports) {\n    var toString = {}.toString;\n\n    module.exports = Array.isArray || function (arr) {\n      return toString.call(arr) == '[object Array]';\n    };\n  }, {}],\n  84: [function (require, module, exports) {\n    (function (exports) {\n      \"use strict\";\n\n      function isArray(obj) {\n        if (obj !== null) {\n          return Object.prototype.toString.call(obj) === \"[object Array]\";\n        } else {\n          return false;\n        }\n      }\n\n      function isObject(obj) {\n        if (obj !== null) {\n          return Object.prototype.toString.call(obj) === \"[object Object]\";\n        } else {\n          return false;\n        }\n      }\n\n      function strictDeepEqual(first, second) {\n        // Check the scalar case first.\n        if (first === second) {\n          return true;\n        } // Check if they are the same type.\n\n\n        var firstType = Object.prototype.toString.call(first);\n\n        if (firstType !== Object.prototype.toString.call(second)) {\n          return false;\n        } // We know that first and second have the same type so we can just check the\n        // first type from now on.\n\n\n        if (isArray(first) === true) {\n          // Short circuit if they're not the same length;\n          if (first.length !== second.length) {\n            return false;\n          }\n\n          for (var i = 0; i < first.length; i++) {\n            if (strictDeepEqual(first[i], second[i]) === false) {\n              return false;\n            }\n          }\n\n          return true;\n        }\n\n        if (isObject(first) === true) {\n          // An object is equal if it has the same key/value pairs.\n          var keysSeen = {};\n\n          for (var key in first) {\n            if (hasOwnProperty.call(first, key)) {\n              if (strictDeepEqual(first[key], second[key]) === false) {\n                return false;\n              }\n\n              keysSeen[key] = true;\n            }\n          } // Now check that there aren't any keys in second that weren't\n          // in first.\n\n\n          for (var key2 in second) {\n            if (hasOwnProperty.call(second, key2)) {\n              if (keysSeen[key2] !== true) {\n                return false;\n              }\n            }\n          }\n\n          return true;\n        }\n\n        return false;\n      }\n\n      function isFalse(obj) {\n        // From the spec:\n        // A false value corresponds to the following values:\n        // Empty list\n        // Empty object\n        // Empty string\n        // False boolean\n        // null value\n        // First check the scalar values.\n        if (obj === \"\" || obj === false || obj === null) {\n          return true;\n        } else if (isArray(obj) && obj.length === 0) {\n          // Check for an empty array.\n          return true;\n        } else if (isObject(obj)) {\n          // Check for an empty object.\n          for (var key in obj) {\n            // If there are any keys, then\n            // the object is not empty so the object\n            // is not false.\n            if (obj.hasOwnProperty(key)) {\n              return false;\n            }\n          }\n\n          return true;\n        } else {\n          return false;\n        }\n      }\n\n      function objValues(obj) {\n        var keys = Object.keys(obj);\n        var values = [];\n\n        for (var i = 0; i < keys.length; i++) {\n          values.push(obj[keys[i]]);\n        }\n\n        return values;\n      }\n\n      function merge(a, b) {\n        var merged = {};\n\n        for (var key in a) {\n          merged[key] = a[key];\n        }\n\n        for (var key2 in b) {\n          merged[key2] = b[key2];\n        }\n\n        return merged;\n      }\n\n      var trimLeft;\n\n      if (typeof String.prototype.trimLeft === \"function\") {\n        trimLeft = function (str) {\n          return str.trimLeft();\n        };\n      } else {\n        trimLeft = function (str) {\n          return str.match(/^\\s*(.*)/)[1];\n        };\n      } // Type constants used to define functions.\n\n\n      var TYPE_NUMBER = 0;\n      var TYPE_ANY = 1;\n      var TYPE_STRING = 2;\n      var TYPE_ARRAY = 3;\n      var TYPE_OBJECT = 4;\n      var TYPE_BOOLEAN = 5;\n      var TYPE_EXPREF = 6;\n      var TYPE_NULL = 7;\n      var TYPE_ARRAY_NUMBER = 8;\n      var TYPE_ARRAY_STRING = 9;\n      var TOK_EOF = \"EOF\";\n      var TOK_UNQUOTEDIDENTIFIER = \"UnquotedIdentifier\";\n      var TOK_QUOTEDIDENTIFIER = \"QuotedIdentifier\";\n      var TOK_RBRACKET = \"Rbracket\";\n      var TOK_RPAREN = \"Rparen\";\n      var TOK_COMMA = \"Comma\";\n      var TOK_COLON = \"Colon\";\n      var TOK_RBRACE = \"Rbrace\";\n      var TOK_NUMBER = \"Number\";\n      var TOK_CURRENT = \"Current\";\n      var TOK_EXPREF = \"Expref\";\n      var TOK_PIPE = \"Pipe\";\n      var TOK_OR = \"Or\";\n      var TOK_AND = \"And\";\n      var TOK_EQ = \"EQ\";\n      var TOK_GT = \"GT\";\n      var TOK_LT = \"LT\";\n      var TOK_GTE = \"GTE\";\n      var TOK_LTE = \"LTE\";\n      var TOK_NE = \"NE\";\n      var TOK_FLATTEN = \"Flatten\";\n      var TOK_STAR = \"Star\";\n      var TOK_FILTER = \"Filter\";\n      var TOK_DOT = \"Dot\";\n      var TOK_NOT = \"Not\";\n      var TOK_LBRACE = \"Lbrace\";\n      var TOK_LBRACKET = \"Lbracket\";\n      var TOK_LPAREN = \"Lparen\";\n      var TOK_LITERAL = \"Literal\"; // The \"&\", \"[\", \"<\", \">\" tokens\n      // are not in basicToken because\n      // there are two token variants\n      // (\"&&\", \"[?\", \"<=\", \">=\").  This is specially handled\n      // below.\n\n      var basicTokens = {\n        \".\": TOK_DOT,\n        \"*\": TOK_STAR,\n        \",\": TOK_COMMA,\n        \":\": TOK_COLON,\n        \"{\": TOK_LBRACE,\n        \"}\": TOK_RBRACE,\n        \"]\": TOK_RBRACKET,\n        \"(\": TOK_LPAREN,\n        \")\": TOK_RPAREN,\n        \"@\": TOK_CURRENT\n      };\n      var operatorStartToken = {\n        \"<\": true,\n        \">\": true,\n        \"=\": true,\n        \"!\": true\n      };\n      var skipChars = {\n        \" \": true,\n        \"\\t\": true,\n        \"\\n\": true\n      };\n\n      function isAlpha(ch) {\n        return ch >= \"a\" && ch <= \"z\" || ch >= \"A\" && ch <= \"Z\" || ch === \"_\";\n      }\n\n      function isNum(ch) {\n        return ch >= \"0\" && ch <= \"9\" || ch === \"-\";\n      }\n\n      function isAlphaNum(ch) {\n        return ch >= \"a\" && ch <= \"z\" || ch >= \"A\" && ch <= \"Z\" || ch >= \"0\" && ch <= \"9\" || ch === \"_\";\n      }\n\n      function Lexer() {}\n\n      Lexer.prototype = {\n        tokenize: function (stream) {\n          var tokens = [];\n          this._current = 0;\n          var start;\n          var identifier;\n          var token;\n\n          while (this._current < stream.length) {\n            if (isAlpha(stream[this._current])) {\n              start = this._current;\n              identifier = this._consumeUnquotedIdentifier(stream);\n              tokens.push({\n                type: TOK_UNQUOTEDIDENTIFIER,\n                value: identifier,\n                start: start\n              });\n            } else if (basicTokens[stream[this._current]] !== undefined) {\n              tokens.push({\n                type: basicTokens[stream[this._current]],\n                value: stream[this._current],\n                start: this._current\n              });\n              this._current++;\n            } else if (isNum(stream[this._current])) {\n              token = this._consumeNumber(stream);\n              tokens.push(token);\n            } else if (stream[this._current] === \"[\") {\n              // No need to increment this._current.  This happens\n              // in _consumeLBracket\n              token = this._consumeLBracket(stream);\n              tokens.push(token);\n            } else if (stream[this._current] === \"\\\"\") {\n              start = this._current;\n              identifier = this._consumeQuotedIdentifier(stream);\n              tokens.push({\n                type: TOK_QUOTEDIDENTIFIER,\n                value: identifier,\n                start: start\n              });\n            } else if (stream[this._current] === \"'\") {\n              start = this._current;\n              identifier = this._consumeRawStringLiteral(stream);\n              tokens.push({\n                type: TOK_LITERAL,\n                value: identifier,\n                start: start\n              });\n            } else if (stream[this._current] === \"`\") {\n              start = this._current;\n\n              var literal = this._consumeLiteral(stream);\n\n              tokens.push({\n                type: TOK_LITERAL,\n                value: literal,\n                start: start\n              });\n            } else if (operatorStartToken[stream[this._current]] !== undefined) {\n              tokens.push(this._consumeOperator(stream));\n            } else if (skipChars[stream[this._current]] !== undefined) {\n              // Ignore whitespace.\n              this._current++;\n            } else if (stream[this._current] === \"&\") {\n              start = this._current;\n              this._current++;\n\n              if (stream[this._current] === \"&\") {\n                this._current++;\n                tokens.push({\n                  type: TOK_AND,\n                  value: \"&&\",\n                  start: start\n                });\n              } else {\n                tokens.push({\n                  type: TOK_EXPREF,\n                  value: \"&\",\n                  start: start\n                });\n              }\n            } else if (stream[this._current] === \"|\") {\n              start = this._current;\n              this._current++;\n\n              if (stream[this._current] === \"|\") {\n                this._current++;\n                tokens.push({\n                  type: TOK_OR,\n                  value: \"||\",\n                  start: start\n                });\n              } else {\n                tokens.push({\n                  type: TOK_PIPE,\n                  value: \"|\",\n                  start: start\n                });\n              }\n            } else {\n              var error = new Error(\"Unknown character:\" + stream[this._current]);\n              error.name = \"LexerError\";\n              throw error;\n            }\n          }\n\n          return tokens;\n        },\n        _consumeUnquotedIdentifier: function (stream) {\n          var start = this._current;\n          this._current++;\n\n          while (this._current < stream.length && isAlphaNum(stream[this._current])) {\n            this._current++;\n          }\n\n          return stream.slice(start, this._current);\n        },\n        _consumeQuotedIdentifier: function (stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n\n          while (stream[this._current] !== \"\\\"\" && this._current < maxLength) {\n            // You can escape a double quote and you can escape an escape.\n            var current = this._current;\n\n            if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" || stream[current + 1] === \"\\\"\")) {\n              current += 2;\n            } else {\n              current++;\n            }\n\n            this._current = current;\n          }\n\n          this._current++;\n          return JSON.parse(stream.slice(start, this._current));\n        },\n        _consumeRawStringLiteral: function (stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n\n          while (stream[this._current] !== \"'\" && this._current < maxLength) {\n            // You can escape a single quote and you can escape an escape.\n            var current = this._current;\n\n            if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" || stream[current + 1] === \"'\")) {\n              current += 2;\n            } else {\n              current++;\n            }\n\n            this._current = current;\n          }\n\n          this._current++;\n          var literal = stream.slice(start + 1, this._current - 1);\n          return literal.replace(\"\\\\'\", \"'\");\n        },\n        _consumeNumber: function (stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n\n          while (isNum(stream[this._current]) && this._current < maxLength) {\n            this._current++;\n          }\n\n          var value = parseInt(stream.slice(start, this._current));\n          return {\n            type: TOK_NUMBER,\n            value: value,\n            start: start\n          };\n        },\n        _consumeLBracket: function (stream) {\n          var start = this._current;\n          this._current++;\n\n          if (stream[this._current] === \"?\") {\n            this._current++;\n            return {\n              type: TOK_FILTER,\n              value: \"[?\",\n              start: start\n            };\n          } else if (stream[this._current] === \"]\") {\n            this._current++;\n            return {\n              type: TOK_FLATTEN,\n              value: \"[]\",\n              start: start\n            };\n          } else {\n            return {\n              type: TOK_LBRACKET,\n              value: \"[\",\n              start: start\n            };\n          }\n        },\n        _consumeOperator: function (stream) {\n          var start = this._current;\n          var startingChar = stream[start];\n          this._current++;\n\n          if (startingChar === \"!\") {\n            if (stream[this._current] === \"=\") {\n              this._current++;\n              return {\n                type: TOK_NE,\n                value: \"!=\",\n                start: start\n              };\n            } else {\n              return {\n                type: TOK_NOT,\n                value: \"!\",\n                start: start\n              };\n            }\n          } else if (startingChar === \"<\") {\n            if (stream[this._current] === \"=\") {\n              this._current++;\n              return {\n                type: TOK_LTE,\n                value: \"<=\",\n                start: start\n              };\n            } else {\n              return {\n                type: TOK_LT,\n                value: \"<\",\n                start: start\n              };\n            }\n          } else if (startingChar === \">\") {\n            if (stream[this._current] === \"=\") {\n              this._current++;\n              return {\n                type: TOK_GTE,\n                value: \">=\",\n                start: start\n              };\n            } else {\n              return {\n                type: TOK_GT,\n                value: \">\",\n                start: start\n              };\n            }\n          } else if (startingChar === \"=\") {\n            if (stream[this._current] === \"=\") {\n              this._current++;\n              return {\n                type: TOK_EQ,\n                value: \"==\",\n                start: start\n              };\n            }\n          }\n        },\n        _consumeLiteral: function (stream) {\n          this._current++;\n          var start = this._current;\n          var maxLength = stream.length;\n          var literal;\n\n          while (stream[this._current] !== \"`\" && this._current < maxLength) {\n            // You can escape a literal char or you can escape the escape.\n            var current = this._current;\n\n            if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" || stream[current + 1] === \"`\")) {\n              current += 2;\n            } else {\n              current++;\n            }\n\n            this._current = current;\n          }\n\n          var literalString = trimLeft(stream.slice(start, this._current));\n          literalString = literalString.replace(\"\\\\`\", \"`\");\n\n          if (this._looksLikeJSON(literalString)) {\n            literal = JSON.parse(literalString);\n          } else {\n            // Try to JSON parse it as \"<literal>\"\n            literal = JSON.parse(\"\\\"\" + literalString + \"\\\"\");\n          } // +1 gets us to the ending \"`\", +1 to move on to the next char.\n\n\n          this._current++;\n          return literal;\n        },\n        _looksLikeJSON: function (literalString) {\n          var startingChars = \"[{\\\"\";\n          var jsonLiterals = [\"true\", \"false\", \"null\"];\n          var numberLooking = \"-0123456789\";\n\n          if (literalString === \"\") {\n            return false;\n          } else if (startingChars.indexOf(literalString[0]) >= 0) {\n            return true;\n          } else if (jsonLiterals.indexOf(literalString) >= 0) {\n            return true;\n          } else if (numberLooking.indexOf(literalString[0]) >= 0) {\n            try {\n              JSON.parse(literalString);\n              return true;\n            } catch (ex) {\n              return false;\n            }\n          } else {\n            return false;\n          }\n        }\n      };\n      var bindingPower = {};\n      bindingPower[TOK_EOF] = 0;\n      bindingPower[TOK_UNQUOTEDIDENTIFIER] = 0;\n      bindingPower[TOK_QUOTEDIDENTIFIER] = 0;\n      bindingPower[TOK_RBRACKET] = 0;\n      bindingPower[TOK_RPAREN] = 0;\n      bindingPower[TOK_COMMA] = 0;\n      bindingPower[TOK_RBRACE] = 0;\n      bindingPower[TOK_NUMBER] = 0;\n      bindingPower[TOK_CURRENT] = 0;\n      bindingPower[TOK_EXPREF] = 0;\n      bindingPower[TOK_PIPE] = 1;\n      bindingPower[TOK_OR] = 2;\n      bindingPower[TOK_AND] = 3;\n      bindingPower[TOK_EQ] = 5;\n      bindingPower[TOK_GT] = 5;\n      bindingPower[TOK_LT] = 5;\n      bindingPower[TOK_GTE] = 5;\n      bindingPower[TOK_LTE] = 5;\n      bindingPower[TOK_NE] = 5;\n      bindingPower[TOK_FLATTEN] = 9;\n      bindingPower[TOK_STAR] = 20;\n      bindingPower[TOK_FILTER] = 21;\n      bindingPower[TOK_DOT] = 40;\n      bindingPower[TOK_NOT] = 45;\n      bindingPower[TOK_LBRACE] = 50;\n      bindingPower[TOK_LBRACKET] = 55;\n      bindingPower[TOK_LPAREN] = 60;\n\n      function Parser() {}\n\n      Parser.prototype = {\n        parse: function (expression) {\n          this._loadTokens(expression);\n\n          this.index = 0;\n          var ast = this.expression(0);\n\n          if (this._lookahead(0) !== TOK_EOF) {\n            var t = this._lookaheadToken(0);\n\n            var error = new Error(\"Unexpected token type: \" + t.type + \", value: \" + t.value);\n            error.name = \"ParserError\";\n            throw error;\n          }\n\n          return ast;\n        },\n        _loadTokens: function (expression) {\n          var lexer = new Lexer();\n          var tokens = lexer.tokenize(expression);\n          tokens.push({\n            type: TOK_EOF,\n            value: \"\",\n            start: expression.length\n          });\n          this.tokens = tokens;\n        },\n        expression: function (rbp) {\n          var leftToken = this._lookaheadToken(0);\n\n          this._advance();\n\n          var left = this.nud(leftToken);\n\n          var currentToken = this._lookahead(0);\n\n          while (rbp < bindingPower[currentToken]) {\n            this._advance();\n\n            left = this.led(currentToken, left);\n            currentToken = this._lookahead(0);\n          }\n\n          return left;\n        },\n        _lookahead: function (number) {\n          return this.tokens[this.index + number].type;\n        },\n        _lookaheadToken: function (number) {\n          return this.tokens[this.index + number];\n        },\n        _advance: function () {\n          this.index++;\n        },\n        nud: function (token) {\n          var left;\n          var right;\n          var expression;\n\n          switch (token.type) {\n            case TOK_LITERAL:\n              return {\n                type: \"Literal\",\n                value: token.value\n              };\n\n            case TOK_UNQUOTEDIDENTIFIER:\n              return {\n                type: \"Field\",\n                name: token.value\n              };\n\n            case TOK_QUOTEDIDENTIFIER:\n              var node = {\n                type: \"Field\",\n                name: token.value\n              };\n\n              if (this._lookahead(0) === TOK_LPAREN) {\n                throw new Error(\"Quoted identifier not allowed for function names.\");\n              } else {\n                return node;\n              }\n\n              break;\n\n            case TOK_NOT:\n              right = this.expression(bindingPower.Not);\n              return {\n                type: \"NotExpression\",\n                children: [right]\n              };\n\n            case TOK_STAR:\n              left = {\n                type: \"Identity\"\n              };\n              right = null;\n\n              if (this._lookahead(0) === TOK_RBRACKET) {\n                // This can happen in a multiselect,\n                // [a, b, *]\n                right = {\n                  type: \"Identity\"\n                };\n              } else {\n                right = this._parseProjectionRHS(bindingPower.Star);\n              }\n\n              return {\n                type: \"ValueProjection\",\n                children: [left, right]\n              };\n\n            case TOK_FILTER:\n              return this.led(token.type, {\n                type: \"Identity\"\n              });\n\n            case TOK_LBRACE:\n              return this._parseMultiselectHash();\n\n            case TOK_FLATTEN:\n              left = {\n                type: TOK_FLATTEN,\n                children: [{\n                  type: \"Identity\"\n                }]\n              };\n              right = this._parseProjectionRHS(bindingPower.Flatten);\n              return {\n                type: \"Projection\",\n                children: [left, right]\n              };\n\n            case TOK_LBRACKET:\n              if (this._lookahead(0) === TOK_NUMBER || this._lookahead(0) === TOK_COLON) {\n                right = this._parseIndexExpression();\n                return this._projectIfSlice({\n                  type: \"Identity\"\n                }, right);\n              } else if (this._lookahead(0) === TOK_STAR && this._lookahead(1) === TOK_RBRACKET) {\n                this._advance();\n\n                this._advance();\n\n                right = this._parseProjectionRHS(bindingPower.Star);\n                return {\n                  type: \"Projection\",\n                  children: [{\n                    type: \"Identity\"\n                  }, right]\n                };\n              } else {\n                return this._parseMultiselectList();\n              }\n\n              break;\n\n            case TOK_CURRENT:\n              return {\n                type: TOK_CURRENT\n              };\n\n            case TOK_EXPREF:\n              expression = this.expression(bindingPower.Expref);\n              return {\n                type: \"ExpressionReference\",\n                children: [expression]\n              };\n\n            case TOK_LPAREN:\n              var args = [];\n\n              while (this._lookahead(0) !== TOK_RPAREN) {\n                if (this._lookahead(0) === TOK_CURRENT) {\n                  expression = {\n                    type: TOK_CURRENT\n                  };\n\n                  this._advance();\n                } else {\n                  expression = this.expression(0);\n                }\n\n                args.push(expression);\n              }\n\n              this._match(TOK_RPAREN);\n\n              return args[0];\n\n            default:\n              this._errorToken(token);\n\n          }\n        },\n        led: function (tokenName, left) {\n          var right;\n\n          switch (tokenName) {\n            case TOK_DOT:\n              var rbp = bindingPower.Dot;\n\n              if (this._lookahead(0) !== TOK_STAR) {\n                right = this._parseDotRHS(rbp);\n                return {\n                  type: \"Subexpression\",\n                  children: [left, right]\n                };\n              } else {\n                // Creating a projection.\n                this._advance();\n\n                right = this._parseProjectionRHS(rbp);\n                return {\n                  type: \"ValueProjection\",\n                  children: [left, right]\n                };\n              }\n\n              break;\n\n            case TOK_PIPE:\n              right = this.expression(bindingPower.Pipe);\n              return {\n                type: TOK_PIPE,\n                children: [left, right]\n              };\n\n            case TOK_OR:\n              right = this.expression(bindingPower.Or);\n              return {\n                type: \"OrExpression\",\n                children: [left, right]\n              };\n\n            case TOK_AND:\n              right = this.expression(bindingPower.And);\n              return {\n                type: \"AndExpression\",\n                children: [left, right]\n              };\n\n            case TOK_LPAREN:\n              var name = left.name;\n              var args = [];\n              var expression, node;\n\n              while (this._lookahead(0) !== TOK_RPAREN) {\n                if (this._lookahead(0) === TOK_CURRENT) {\n                  expression = {\n                    type: TOK_CURRENT\n                  };\n\n                  this._advance();\n                } else {\n                  expression = this.expression(0);\n                }\n\n                if (this._lookahead(0) === TOK_COMMA) {\n                  this._match(TOK_COMMA);\n                }\n\n                args.push(expression);\n              }\n\n              this._match(TOK_RPAREN);\n\n              node = {\n                type: \"Function\",\n                name: name,\n                children: args\n              };\n              return node;\n\n            case TOK_FILTER:\n              var condition = this.expression(0);\n\n              this._match(TOK_RBRACKET);\n\n              if (this._lookahead(0) === TOK_FLATTEN) {\n                right = {\n                  type: \"Identity\"\n                };\n              } else {\n                right = this._parseProjectionRHS(bindingPower.Filter);\n              }\n\n              return {\n                type: \"FilterProjection\",\n                children: [left, right, condition]\n              };\n\n            case TOK_FLATTEN:\n              var leftNode = {\n                type: TOK_FLATTEN,\n                children: [left]\n              };\n\n              var rightNode = this._parseProjectionRHS(bindingPower.Flatten);\n\n              return {\n                type: \"Projection\",\n                children: [leftNode, rightNode]\n              };\n\n            case TOK_EQ:\n            case TOK_NE:\n            case TOK_GT:\n            case TOK_GTE:\n            case TOK_LT:\n            case TOK_LTE:\n              return this._parseComparator(left, tokenName);\n\n            case TOK_LBRACKET:\n              var token = this._lookaheadToken(0);\n\n              if (token.type === TOK_NUMBER || token.type === TOK_COLON) {\n                right = this._parseIndexExpression();\n                return this._projectIfSlice(left, right);\n              } else {\n                this._match(TOK_STAR);\n\n                this._match(TOK_RBRACKET);\n\n                right = this._parseProjectionRHS(bindingPower.Star);\n                return {\n                  type: \"Projection\",\n                  children: [left, right]\n                };\n              }\n\n              break;\n\n            default:\n              this._errorToken(this._lookaheadToken(0));\n\n          }\n        },\n        _match: function (tokenType) {\n          if (this._lookahead(0) === tokenType) {\n            this._advance();\n          } else {\n            var t = this._lookaheadToken(0);\n\n            var error = new Error(\"Expected \" + tokenType + \", got: \" + t.type);\n            error.name = \"ParserError\";\n            throw error;\n          }\n        },\n        _errorToken: function (token) {\n          var error = new Error(\"Invalid token (\" + token.type + \"): \\\"\" + token.value + \"\\\"\");\n          error.name = \"ParserError\";\n          throw error;\n        },\n        _parseIndexExpression: function () {\n          if (this._lookahead(0) === TOK_COLON || this._lookahead(1) === TOK_COLON) {\n            return this._parseSliceExpression();\n          } else {\n            var node = {\n              type: \"Index\",\n              value: this._lookaheadToken(0).value\n            };\n\n            this._advance();\n\n            this._match(TOK_RBRACKET);\n\n            return node;\n          }\n        },\n        _projectIfSlice: function (left, right) {\n          var indexExpr = {\n            type: \"IndexExpression\",\n            children: [left, right]\n          };\n\n          if (right.type === \"Slice\") {\n            return {\n              type: \"Projection\",\n              children: [indexExpr, this._parseProjectionRHS(bindingPower.Star)]\n            };\n          } else {\n            return indexExpr;\n          }\n        },\n        _parseSliceExpression: function () {\n          // [start:end:step] where each part is optional, as well as the last\n          // colon.\n          var parts = [null, null, null];\n          var index = 0;\n\n          var currentToken = this._lookahead(0);\n\n          while (currentToken !== TOK_RBRACKET && index < 3) {\n            if (currentToken === TOK_COLON) {\n              index++;\n\n              this._advance();\n            } else if (currentToken === TOK_NUMBER) {\n              parts[index] = this._lookaheadToken(0).value;\n\n              this._advance();\n            } else {\n              var t = this._lookahead(0);\n\n              var error = new Error(\"Syntax error, unexpected token: \" + t.value + \"(\" + t.type + \")\");\n              error.name = \"Parsererror\";\n              throw error;\n            }\n\n            currentToken = this._lookahead(0);\n          }\n\n          this._match(TOK_RBRACKET);\n\n          return {\n            type: \"Slice\",\n            children: parts\n          };\n        },\n        _parseComparator: function (left, comparator) {\n          var right = this.expression(bindingPower[comparator]);\n          return {\n            type: \"Comparator\",\n            name: comparator,\n            children: [left, right]\n          };\n        },\n        _parseDotRHS: function (rbp) {\n          var lookahead = this._lookahead(0);\n\n          var exprTokens = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER, TOK_STAR];\n\n          if (exprTokens.indexOf(lookahead) >= 0) {\n            return this.expression(rbp);\n          } else if (lookahead === TOK_LBRACKET) {\n            this._match(TOK_LBRACKET);\n\n            return this._parseMultiselectList();\n          } else if (lookahead === TOK_LBRACE) {\n            this._match(TOK_LBRACE);\n\n            return this._parseMultiselectHash();\n          }\n        },\n        _parseProjectionRHS: function (rbp) {\n          var right;\n\n          if (bindingPower[this._lookahead(0)] < 10) {\n            right = {\n              type: \"Identity\"\n            };\n          } else if (this._lookahead(0) === TOK_LBRACKET) {\n            right = this.expression(rbp);\n          } else if (this._lookahead(0) === TOK_FILTER) {\n            right = this.expression(rbp);\n          } else if (this._lookahead(0) === TOK_DOT) {\n            this._match(TOK_DOT);\n\n            right = this._parseDotRHS(rbp);\n          } else {\n            var t = this._lookaheadToken(0);\n\n            var error = new Error(\"Sytanx error, unexpected token: \" + t.value + \"(\" + t.type + \")\");\n            error.name = \"ParserError\";\n            throw error;\n          }\n\n          return right;\n        },\n        _parseMultiselectList: function () {\n          var expressions = [];\n\n          while (this._lookahead(0) !== TOK_RBRACKET) {\n            var expression = this.expression(0);\n            expressions.push(expression);\n\n            if (this._lookahead(0) === TOK_COMMA) {\n              this._match(TOK_COMMA);\n\n              if (this._lookahead(0) === TOK_RBRACKET) {\n                throw new Error(\"Unexpected token Rbracket\");\n              }\n            }\n          }\n\n          this._match(TOK_RBRACKET);\n\n          return {\n            type: \"MultiSelectList\",\n            children: expressions\n          };\n        },\n        _parseMultiselectHash: function () {\n          var pairs = [];\n          var identifierTypes = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER];\n          var keyToken, keyName, value, node;\n\n          for (;;) {\n            keyToken = this._lookaheadToken(0);\n\n            if (identifierTypes.indexOf(keyToken.type) < 0) {\n              throw new Error(\"Expecting an identifier token, got: \" + keyToken.type);\n            }\n\n            keyName = keyToken.value;\n\n            this._advance();\n\n            this._match(TOK_COLON);\n\n            value = this.expression(0);\n            node = {\n              type: \"KeyValuePair\",\n              name: keyName,\n              value: value\n            };\n            pairs.push(node);\n\n            if (this._lookahead(0) === TOK_COMMA) {\n              this._match(TOK_COMMA);\n            } else if (this._lookahead(0) === TOK_RBRACE) {\n              this._match(TOK_RBRACE);\n\n              break;\n            }\n          }\n\n          return {\n            type: \"MultiSelectHash\",\n            children: pairs\n          };\n        }\n      };\n\n      function TreeInterpreter(runtime) {\n        this.runtime = runtime;\n      }\n\n      TreeInterpreter.prototype = {\n        search: function (node, value) {\n          return this.visit(node, value);\n        },\n        visit: function (node, value) {\n          var matched, current, result, first, second, field, left, right, collected, i;\n\n          switch (node.type) {\n            case \"Field\":\n              if (value === null) {\n                return null;\n              } else if (isObject(value)) {\n                field = value[node.name];\n\n                if (field === undefined) {\n                  return null;\n                } else {\n                  return field;\n                }\n              } else {\n                return null;\n              }\n\n              break;\n\n            case \"Subexpression\":\n              result = this.visit(node.children[0], value);\n\n              for (i = 1; i < node.children.length; i++) {\n                result = this.visit(node.children[1], result);\n\n                if (result === null) {\n                  return null;\n                }\n              }\n\n              return result;\n\n            case \"IndexExpression\":\n              left = this.visit(node.children[0], value);\n              right = this.visit(node.children[1], left);\n              return right;\n\n            case \"Index\":\n              if (!isArray(value)) {\n                return null;\n              }\n\n              var index = node.value;\n\n              if (index < 0) {\n                index = value.length + index;\n              }\n\n              result = value[index];\n\n              if (result === undefined) {\n                result = null;\n              }\n\n              return result;\n\n            case \"Slice\":\n              if (!isArray(value)) {\n                return null;\n              }\n\n              var sliceParams = node.children.slice(0);\n              var computed = this.computeSliceParams(value.length, sliceParams);\n              var start = computed[0];\n              var stop = computed[1];\n              var step = computed[2];\n              result = [];\n\n              if (step > 0) {\n                for (i = start; i < stop; i += step) {\n                  result.push(value[i]);\n                }\n              } else {\n                for (i = start; i > stop; i += step) {\n                  result.push(value[i]);\n                }\n              }\n\n              return result;\n\n            case \"Projection\":\n              // Evaluate left child.\n              var base = this.visit(node.children[0], value);\n\n              if (!isArray(base)) {\n                return null;\n              }\n\n              collected = [];\n\n              for (i = 0; i < base.length; i++) {\n                current = this.visit(node.children[1], base[i]);\n\n                if (current !== null) {\n                  collected.push(current);\n                }\n              }\n\n              return collected;\n\n            case \"ValueProjection\":\n              // Evaluate left child.\n              base = this.visit(node.children[0], value);\n\n              if (!isObject(base)) {\n                return null;\n              }\n\n              collected = [];\n              var values = objValues(base);\n\n              for (i = 0; i < values.length; i++) {\n                current = this.visit(node.children[1], values[i]);\n\n                if (current !== null) {\n                  collected.push(current);\n                }\n              }\n\n              return collected;\n\n            case \"FilterProjection\":\n              base = this.visit(node.children[0], value);\n\n              if (!isArray(base)) {\n                return null;\n              }\n\n              var filtered = [];\n              var finalResults = [];\n\n              for (i = 0; i < base.length; i++) {\n                matched = this.visit(node.children[2], base[i]);\n\n                if (!isFalse(matched)) {\n                  filtered.push(base[i]);\n                }\n              }\n\n              for (var j = 0; j < filtered.length; j++) {\n                current = this.visit(node.children[1], filtered[j]);\n\n                if (current !== null) {\n                  finalResults.push(current);\n                }\n              }\n\n              return finalResults;\n\n            case \"Comparator\":\n              first = this.visit(node.children[0], value);\n              second = this.visit(node.children[1], value);\n\n              switch (node.name) {\n                case TOK_EQ:\n                  result = strictDeepEqual(first, second);\n                  break;\n\n                case TOK_NE:\n                  result = !strictDeepEqual(first, second);\n                  break;\n\n                case TOK_GT:\n                  result = first > second;\n                  break;\n\n                case TOK_GTE:\n                  result = first >= second;\n                  break;\n\n                case TOK_LT:\n                  result = first < second;\n                  break;\n\n                case TOK_LTE:\n                  result = first <= second;\n                  break;\n\n                default:\n                  throw new Error(\"Unknown comparator: \" + node.name);\n              }\n\n              return result;\n\n            case TOK_FLATTEN:\n              var original = this.visit(node.children[0], value);\n\n              if (!isArray(original)) {\n                return null;\n              }\n\n              var merged = [];\n\n              for (i = 0; i < original.length; i++) {\n                current = original[i];\n\n                if (isArray(current)) {\n                  merged.push.apply(merged, current);\n                } else {\n                  merged.push(current);\n                }\n              }\n\n              return merged;\n\n            case \"Identity\":\n              return value;\n\n            case \"MultiSelectList\":\n              if (value === null) {\n                return null;\n              }\n\n              collected = [];\n\n              for (i = 0; i < node.children.length; i++) {\n                collected.push(this.visit(node.children[i], value));\n              }\n\n              return collected;\n\n            case \"MultiSelectHash\":\n              if (value === null) {\n                return null;\n              }\n\n              collected = {};\n              var child;\n\n              for (i = 0; i < node.children.length; i++) {\n                child = node.children[i];\n                collected[child.name] = this.visit(child.value, value);\n              }\n\n              return collected;\n\n            case \"OrExpression\":\n              matched = this.visit(node.children[0], value);\n\n              if (isFalse(matched)) {\n                matched = this.visit(node.children[1], value);\n              }\n\n              return matched;\n\n            case \"AndExpression\":\n              first = this.visit(node.children[0], value);\n\n              if (isFalse(first) === true) {\n                return first;\n              }\n\n              return this.visit(node.children[1], value);\n\n            case \"NotExpression\":\n              first = this.visit(node.children[0], value);\n              return isFalse(first);\n\n            case \"Literal\":\n              return node.value;\n\n            case TOK_PIPE:\n              left = this.visit(node.children[0], value);\n              return this.visit(node.children[1], left);\n\n            case TOK_CURRENT:\n              return value;\n\n            case \"Function\":\n              var resolvedArgs = [];\n\n              for (i = 0; i < node.children.length; i++) {\n                resolvedArgs.push(this.visit(node.children[i], value));\n              }\n\n              return this.runtime.callFunction(node.name, resolvedArgs);\n\n            case \"ExpressionReference\":\n              var refNode = node.children[0]; // Tag the node with a specific attribute so the type\n              // checker verify the type.\n\n              refNode.jmespathType = TOK_EXPREF;\n              return refNode;\n\n            default:\n              throw new Error(\"Unknown node type: \" + node.type);\n          }\n        },\n        computeSliceParams: function (arrayLength, sliceParams) {\n          var start = sliceParams[0];\n          var stop = sliceParams[1];\n          var step = sliceParams[2];\n          var computed = [null, null, null];\n\n          if (step === null) {\n            step = 1;\n          } else if (step === 0) {\n            var error = new Error(\"Invalid slice, step cannot be 0\");\n            error.name = \"RuntimeError\";\n            throw error;\n          }\n\n          var stepValueNegative = step < 0 ? true : false;\n\n          if (start === null) {\n            start = stepValueNegative ? arrayLength - 1 : 0;\n          } else {\n            start = this.capSliceRange(arrayLength, start, step);\n          }\n\n          if (stop === null) {\n            stop = stepValueNegative ? -1 : arrayLength;\n          } else {\n            stop = this.capSliceRange(arrayLength, stop, step);\n          }\n\n          computed[0] = start;\n          computed[1] = stop;\n          computed[2] = step;\n          return computed;\n        },\n        capSliceRange: function (arrayLength, actualValue, step) {\n          if (actualValue < 0) {\n            actualValue += arrayLength;\n\n            if (actualValue < 0) {\n              actualValue = step < 0 ? -1 : 0;\n            }\n          } else if (actualValue >= arrayLength) {\n            actualValue = step < 0 ? arrayLength - 1 : arrayLength;\n          }\n\n          return actualValue;\n        }\n      };\n\n      function Runtime(interpreter) {\n        this._interpreter = interpreter;\n        this.functionTable = {\n          // name: [function, <signature>]\n          // The <signature> can be:\n          //\n          // {\n          //   args: [[type1, type2], [type1, type2]],\n          //   variadic: true|false\n          // }\n          //\n          // Each arg in the arg list is a list of valid types\n          // (if the function is overloaded and supports multiple\n          // types.  If the type is \"any\" then no type checking\n          // occurs on the argument.  Variadic is optional\n          // and if not provided is assumed to be false.\n          abs: {\n            _func: this._functionAbs,\n            _signature: [{\n              types: [TYPE_NUMBER]\n            }]\n          },\n          avg: {\n            _func: this._functionAvg,\n            _signature: [{\n              types: [TYPE_ARRAY_NUMBER]\n            }]\n          },\n          ceil: {\n            _func: this._functionCeil,\n            _signature: [{\n              types: [TYPE_NUMBER]\n            }]\n          },\n          contains: {\n            _func: this._functionContains,\n            _signature: [{\n              types: [TYPE_STRING, TYPE_ARRAY]\n            }, {\n              types: [TYPE_ANY]\n            }]\n          },\n          \"ends_with\": {\n            _func: this._functionEndsWith,\n            _signature: [{\n              types: [TYPE_STRING]\n            }, {\n              types: [TYPE_STRING]\n            }]\n          },\n          floor: {\n            _func: this._functionFloor,\n            _signature: [{\n              types: [TYPE_NUMBER]\n            }]\n          },\n          length: {\n            _func: this._functionLength,\n            _signature: [{\n              types: [TYPE_STRING, TYPE_ARRAY, TYPE_OBJECT]\n            }]\n          },\n          map: {\n            _func: this._functionMap,\n            _signature: [{\n              types: [TYPE_EXPREF]\n            }, {\n              types: [TYPE_ARRAY]\n            }]\n          },\n          max: {\n            _func: this._functionMax,\n            _signature: [{\n              types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]\n            }]\n          },\n          \"merge\": {\n            _func: this._functionMerge,\n            _signature: [{\n              types: [TYPE_OBJECT],\n              variadic: true\n            }]\n          },\n          \"max_by\": {\n            _func: this._functionMaxBy,\n            _signature: [{\n              types: [TYPE_ARRAY]\n            }, {\n              types: [TYPE_EXPREF]\n            }]\n          },\n          sum: {\n            _func: this._functionSum,\n            _signature: [{\n              types: [TYPE_ARRAY_NUMBER]\n            }]\n          },\n          \"starts_with\": {\n            _func: this._functionStartsWith,\n            _signature: [{\n              types: [TYPE_STRING]\n            }, {\n              types: [TYPE_STRING]\n            }]\n          },\n          min: {\n            _func: this._functionMin,\n            _signature: [{\n              types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]\n            }]\n          },\n          \"min_by\": {\n            _func: this._functionMinBy,\n            _signature: [{\n              types: [TYPE_ARRAY]\n            }, {\n              types: [TYPE_EXPREF]\n            }]\n          },\n          type: {\n            _func: this._functionType,\n            _signature: [{\n              types: [TYPE_ANY]\n            }]\n          },\n          keys: {\n            _func: this._functionKeys,\n            _signature: [{\n              types: [TYPE_OBJECT]\n            }]\n          },\n          values: {\n            _func: this._functionValues,\n            _signature: [{\n              types: [TYPE_OBJECT]\n            }]\n          },\n          sort: {\n            _func: this._functionSort,\n            _signature: [{\n              types: [TYPE_ARRAY_STRING, TYPE_ARRAY_NUMBER]\n            }]\n          },\n          \"sort_by\": {\n            _func: this._functionSortBy,\n            _signature: [{\n              types: [TYPE_ARRAY]\n            }, {\n              types: [TYPE_EXPREF]\n            }]\n          },\n          join: {\n            _func: this._functionJoin,\n            _signature: [{\n              types: [TYPE_STRING]\n            }, {\n              types: [TYPE_ARRAY_STRING]\n            }]\n          },\n          reverse: {\n            _func: this._functionReverse,\n            _signature: [{\n              types: [TYPE_STRING, TYPE_ARRAY]\n            }]\n          },\n          \"to_array\": {\n            _func: this._functionToArray,\n            _signature: [{\n              types: [TYPE_ANY]\n            }]\n          },\n          \"to_string\": {\n            _func: this._functionToString,\n            _signature: [{\n              types: [TYPE_ANY]\n            }]\n          },\n          \"to_number\": {\n            _func: this._functionToNumber,\n            _signature: [{\n              types: [TYPE_ANY]\n            }]\n          },\n          \"not_null\": {\n            _func: this._functionNotNull,\n            _signature: [{\n              types: [TYPE_ANY],\n              variadic: true\n            }]\n          }\n        };\n      }\n\n      Runtime.prototype = {\n        callFunction: function (name, resolvedArgs) {\n          var functionEntry = this.functionTable[name];\n\n          if (functionEntry === undefined) {\n            throw new Error(\"Unknown function: \" + name + \"()\");\n          }\n\n          this._validateArgs(name, resolvedArgs, functionEntry._signature);\n\n          return functionEntry._func.call(this, resolvedArgs);\n        },\n        _validateArgs: function (name, args, signature) {\n          // Validating the args requires validating\n          // the correct arity and the correct type of each arg.\n          // If the last argument is declared as variadic, then we need\n          // a minimum number of args to be required.  Otherwise it has to\n          // be an exact amount.\n          var pluralized;\n\n          if (signature[signature.length - 1].variadic) {\n            if (args.length < signature.length) {\n              pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n              throw new Error(\"ArgumentError: \" + name + \"() \" + \"takes at least\" + signature.length + pluralized + \" but received \" + args.length);\n            }\n          } else if (args.length !== signature.length) {\n            pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n            throw new Error(\"ArgumentError: \" + name + \"() \" + \"takes \" + signature.length + pluralized + \" but received \" + args.length);\n          }\n\n          var currentSpec;\n          var actualType;\n          var typeMatched;\n\n          for (var i = 0; i < signature.length; i++) {\n            typeMatched = false;\n            currentSpec = signature[i].types;\n            actualType = this._getTypeName(args[i]);\n\n            for (var j = 0; j < currentSpec.length; j++) {\n              if (this._typeMatches(actualType, currentSpec[j], args[i])) {\n                typeMatched = true;\n                break;\n              }\n            }\n\n            if (!typeMatched) {\n              throw new Error(\"TypeError: \" + name + \"() \" + \"expected argument \" + (i + 1) + \" to be type \" + currentSpec + \" but received type \" + actualType + \" instead.\");\n            }\n          }\n        },\n        _typeMatches: function (actual, expected, argValue) {\n          if (expected === TYPE_ANY) {\n            return true;\n          }\n\n          if (expected === TYPE_ARRAY_STRING || expected === TYPE_ARRAY_NUMBER || expected === TYPE_ARRAY) {\n            // The expected type can either just be array,\n            // or it can require a specific subtype (array of numbers).\n            //\n            // The simplest case is if \"array\" with no subtype is specified.\n            if (expected === TYPE_ARRAY) {\n              return actual === TYPE_ARRAY;\n            } else if (actual === TYPE_ARRAY) {\n              // Otherwise we need to check subtypes.\n              // I think this has potential to be improved.\n              var subtype;\n\n              if (expected === TYPE_ARRAY_NUMBER) {\n                subtype = TYPE_NUMBER;\n              } else if (expected === TYPE_ARRAY_STRING) {\n                subtype = TYPE_STRING;\n              }\n\n              for (var i = 0; i < argValue.length; i++) {\n                if (!this._typeMatches(this._getTypeName(argValue[i]), subtype, argValue[i])) {\n                  return false;\n                }\n              }\n\n              return true;\n            }\n          } else {\n            return actual === expected;\n          }\n        },\n        _getTypeName: function (obj) {\n          switch (Object.prototype.toString.call(obj)) {\n            case \"[object String]\":\n              return TYPE_STRING;\n\n            case \"[object Number]\":\n              return TYPE_NUMBER;\n\n            case \"[object Array]\":\n              return TYPE_ARRAY;\n\n            case \"[object Boolean]\":\n              return TYPE_BOOLEAN;\n\n            case \"[object Null]\":\n              return TYPE_NULL;\n\n            case \"[object Object]\":\n              // Check if it's an expref.  If it has, it's been\n              // tagged with a jmespathType attr of 'Expref';\n              if (obj.jmespathType === TOK_EXPREF) {\n                return TYPE_EXPREF;\n              } else {\n                return TYPE_OBJECT;\n              }\n\n          }\n        },\n        _functionStartsWith: function (resolvedArgs) {\n          return resolvedArgs[0].lastIndexOf(resolvedArgs[1]) === 0;\n        },\n        _functionEndsWith: function (resolvedArgs) {\n          var searchStr = resolvedArgs[0];\n          var suffix = resolvedArgs[1];\n          return searchStr.indexOf(suffix, searchStr.length - suffix.length) !== -1;\n        },\n        _functionReverse: function (resolvedArgs) {\n          var typeName = this._getTypeName(resolvedArgs[0]);\n\n          if (typeName === TYPE_STRING) {\n            var originalStr = resolvedArgs[0];\n            var reversedStr = \"\";\n\n            for (var i = originalStr.length - 1; i >= 0; i--) {\n              reversedStr += originalStr[i];\n            }\n\n            return reversedStr;\n          } else {\n            var reversedArray = resolvedArgs[0].slice(0);\n            reversedArray.reverse();\n            return reversedArray;\n          }\n        },\n        _functionAbs: function (resolvedArgs) {\n          return Math.abs(resolvedArgs[0]);\n        },\n        _functionCeil: function (resolvedArgs) {\n          return Math.ceil(resolvedArgs[0]);\n        },\n        _functionAvg: function (resolvedArgs) {\n          var sum = 0;\n          var inputArray = resolvedArgs[0];\n\n          for (var i = 0; i < inputArray.length; i++) {\n            sum += inputArray[i];\n          }\n\n          return sum / inputArray.length;\n        },\n        _functionContains: function (resolvedArgs) {\n          return resolvedArgs[0].indexOf(resolvedArgs[1]) >= 0;\n        },\n        _functionFloor: function (resolvedArgs) {\n          return Math.floor(resolvedArgs[0]);\n        },\n        _functionLength: function (resolvedArgs) {\n          if (!isObject(resolvedArgs[0])) {\n            return resolvedArgs[0].length;\n          } else {\n            // As far as I can tell, there's no way to get the length\n            // of an object without O(n) iteration through the object.\n            return Object.keys(resolvedArgs[0]).length;\n          }\n        },\n        _functionMap: function (resolvedArgs) {\n          var mapped = [];\n          var interpreter = this._interpreter;\n          var exprefNode = resolvedArgs[0];\n          var elements = resolvedArgs[1];\n\n          for (var i = 0; i < elements.length; i++) {\n            mapped.push(interpreter.visit(exprefNode, elements[i]));\n          }\n\n          return mapped;\n        },\n        _functionMerge: function (resolvedArgs) {\n          var merged = {};\n\n          for (var i = 0; i < resolvedArgs.length; i++) {\n            var current = resolvedArgs[i];\n\n            for (var key in current) {\n              merged[key] = current[key];\n            }\n          }\n\n          return merged;\n        },\n        _functionMax: function (resolvedArgs) {\n          if (resolvedArgs[0].length > 0) {\n            var typeName = this._getTypeName(resolvedArgs[0][0]);\n\n            if (typeName === TYPE_NUMBER) {\n              return Math.max.apply(Math, resolvedArgs[0]);\n            } else {\n              var elements = resolvedArgs[0];\n              var maxElement = elements[0];\n\n              for (var i = 1; i < elements.length; i++) {\n                if (maxElement.localeCompare(elements[i]) < 0) {\n                  maxElement = elements[i];\n                }\n              }\n\n              return maxElement;\n            }\n          } else {\n            return null;\n          }\n        },\n        _functionMin: function (resolvedArgs) {\n          if (resolvedArgs[0].length > 0) {\n            var typeName = this._getTypeName(resolvedArgs[0][0]);\n\n            if (typeName === TYPE_NUMBER) {\n              return Math.min.apply(Math, resolvedArgs[0]);\n            } else {\n              var elements = resolvedArgs[0];\n              var minElement = elements[0];\n\n              for (var i = 1; i < elements.length; i++) {\n                if (elements[i].localeCompare(minElement) < 0) {\n                  minElement = elements[i];\n                }\n              }\n\n              return minElement;\n            }\n          } else {\n            return null;\n          }\n        },\n        _functionSum: function (resolvedArgs) {\n          var sum = 0;\n          var listToSum = resolvedArgs[0];\n\n          for (var i = 0; i < listToSum.length; i++) {\n            sum += listToSum[i];\n          }\n\n          return sum;\n        },\n        _functionType: function (resolvedArgs) {\n          switch (this._getTypeName(resolvedArgs[0])) {\n            case TYPE_NUMBER:\n              return \"number\";\n\n            case TYPE_STRING:\n              return \"string\";\n\n            case TYPE_ARRAY:\n              return \"array\";\n\n            case TYPE_OBJECT:\n              return \"object\";\n\n            case TYPE_BOOLEAN:\n              return \"boolean\";\n\n            case TYPE_EXPREF:\n              return \"expref\";\n\n            case TYPE_NULL:\n              return \"null\";\n          }\n        },\n        _functionKeys: function (resolvedArgs) {\n          return Object.keys(resolvedArgs[0]);\n        },\n        _functionValues: function (resolvedArgs) {\n          var obj = resolvedArgs[0];\n          var keys = Object.keys(obj);\n          var values = [];\n\n          for (var i = 0; i < keys.length; i++) {\n            values.push(obj[keys[i]]);\n          }\n\n          return values;\n        },\n        _functionJoin: function (resolvedArgs) {\n          var joinChar = resolvedArgs[0];\n          var listJoin = resolvedArgs[1];\n          return listJoin.join(joinChar);\n        },\n        _functionToArray: function (resolvedArgs) {\n          if (this._getTypeName(resolvedArgs[0]) === TYPE_ARRAY) {\n            return resolvedArgs[0];\n          } else {\n            return [resolvedArgs[0]];\n          }\n        },\n        _functionToString: function (resolvedArgs) {\n          if (this._getTypeName(resolvedArgs[0]) === TYPE_STRING) {\n            return resolvedArgs[0];\n          } else {\n            return JSON.stringify(resolvedArgs[0]);\n          }\n        },\n        _functionToNumber: function (resolvedArgs) {\n          var typeName = this._getTypeName(resolvedArgs[0]);\n\n          var convertedValue;\n\n          if (typeName === TYPE_NUMBER) {\n            return resolvedArgs[0];\n          } else if (typeName === TYPE_STRING) {\n            convertedValue = +resolvedArgs[0];\n\n            if (!isNaN(convertedValue)) {\n              return convertedValue;\n            }\n          }\n\n          return null;\n        },\n        _functionNotNull: function (resolvedArgs) {\n          for (var i = 0; i < resolvedArgs.length; i++) {\n            if (this._getTypeName(resolvedArgs[i]) !== TYPE_NULL) {\n              return resolvedArgs[i];\n            }\n          }\n\n          return null;\n        },\n        _functionSort: function (resolvedArgs) {\n          var sortedArray = resolvedArgs[0].slice(0);\n          sortedArray.sort();\n          return sortedArray;\n        },\n        _functionSortBy: function (resolvedArgs) {\n          var sortedArray = resolvedArgs[0].slice(0);\n\n          if (sortedArray.length === 0) {\n            return sortedArray;\n          }\n\n          var interpreter = this._interpreter;\n          var exprefNode = resolvedArgs[1];\n\n          var requiredType = this._getTypeName(interpreter.visit(exprefNode, sortedArray[0]));\n\n          if ([TYPE_NUMBER, TYPE_STRING].indexOf(requiredType) < 0) {\n            throw new Error(\"TypeError\");\n          }\n\n          var that = this; // In order to get a stable sort out of an unstable\n          // sort algorithm, we decorate/sort/undecorate (DSU)\n          // by creating a new list of [index, element] pairs.\n          // In the cmp function, if the evaluated elements are\n          // equal, then the index will be used as the tiebreaker.\n          // After the decorated list has been sorted, it will be\n          // undecorated to extract the original elements.\n\n          var decorated = [];\n\n          for (var i = 0; i < sortedArray.length; i++) {\n            decorated.push([i, sortedArray[i]]);\n          }\n\n          decorated.sort(function (a, b) {\n            var exprA = interpreter.visit(exprefNode, a[1]);\n            var exprB = interpreter.visit(exprefNode, b[1]);\n\n            if (that._getTypeName(exprA) !== requiredType) {\n              throw new Error(\"TypeError: expected \" + requiredType + \", received \" + that._getTypeName(exprA));\n            } else if (that._getTypeName(exprB) !== requiredType) {\n              throw new Error(\"TypeError: expected \" + requiredType + \", received \" + that._getTypeName(exprB));\n            }\n\n            if (exprA > exprB) {\n              return 1;\n            } else if (exprA < exprB) {\n              return -1;\n            } else {\n              // If they're equal compare the items by their\n              // order to maintain relative order of equal keys\n              // (i.e. to get a stable sort).\n              return a[0] - b[0];\n            }\n          }); // Undecorate: extract out the original list elements.\n\n          for (var j = 0; j < decorated.length; j++) {\n            sortedArray[j] = decorated[j][1];\n          }\n\n          return sortedArray;\n        },\n        _functionMaxBy: function (resolvedArgs) {\n          var exprefNode = resolvedArgs[1];\n          var resolvedArray = resolvedArgs[0];\n          var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n          var maxNumber = -Infinity;\n          var maxRecord;\n          var current;\n\n          for (var i = 0; i < resolvedArray.length; i++) {\n            current = keyFunction(resolvedArray[i]);\n\n            if (current > maxNumber) {\n              maxNumber = current;\n              maxRecord = resolvedArray[i];\n            }\n          }\n\n          return maxRecord;\n        },\n        _functionMinBy: function (resolvedArgs) {\n          var exprefNode = resolvedArgs[1];\n          var resolvedArray = resolvedArgs[0];\n          var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n          var minNumber = Infinity;\n          var minRecord;\n          var current;\n\n          for (var i = 0; i < resolvedArray.length; i++) {\n            current = keyFunction(resolvedArray[i]);\n\n            if (current < minNumber) {\n              minNumber = current;\n              minRecord = resolvedArray[i];\n            }\n          }\n\n          return minRecord;\n        },\n        createKeyFunction: function (exprefNode, allowedTypes) {\n          var that = this;\n          var interpreter = this._interpreter;\n\n          var keyFunc = function (x) {\n            var current = interpreter.visit(exprefNode, x);\n\n            if (allowedTypes.indexOf(that._getTypeName(current)) < 0) {\n              var msg = \"TypeError: expected one of \" + allowedTypes + \", received \" + that._getTypeName(current);\n\n              throw new Error(msg);\n            }\n\n            return current;\n          };\n\n          return keyFunc;\n        }\n      };\n\n      function compile(stream) {\n        var parser = new Parser();\n        var ast = parser.parse(stream);\n        return ast;\n      }\n\n      function tokenize(stream) {\n        var lexer = new Lexer();\n        return lexer.tokenize(stream);\n      }\n\n      function search(data, expression) {\n        var parser = new Parser(); // This needs to be improved.  Both the interpreter and runtime depend on\n        // each other.  The runtime needs the interpreter to support exprefs.\n        // There's likely a clean way to avoid the cyclic dependency.\n\n        var runtime = new Runtime();\n        var interpreter = new TreeInterpreter(runtime);\n        runtime._interpreter = interpreter;\n        var node = parser.parse(expression);\n        return interpreter.search(node, data);\n      }\n\n      exports.tokenize = tokenize;\n      exports.compile = compile;\n      exports.search = search;\n      exports.strictDeepEqual = strictDeepEqual;\n    })(typeof exports === \"undefined\" ? this.jmespath = {} : exports);\n  }, {}],\n  85: [function (require, module, exports) {\n    // shim for using process in browser\n    var process = module.exports = {}; // cached from whatever global is present so that test runners that stub it\n    // don't break things.  But we need to wrap it in a try catch in case it is\n    // wrapped in strict mode code which doesn't define any globals.  It's inside a\n    // function because try/catches deoptimize in certain engines.\n\n    var cachedSetTimeout;\n    var cachedClearTimeout;\n\n    function defaultSetTimout() {\n      throw new Error('setTimeout has not been defined');\n    }\n\n    function defaultClearTimeout() {\n      throw new Error('clearTimeout has not been defined');\n    }\n\n    (function () {\n      try {\n        if (typeof setTimeout === 'function') {\n          cachedSetTimeout = setTimeout;\n        } else {\n          cachedSetTimeout = defaultSetTimout;\n        }\n      } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n      }\n\n      try {\n        if (typeof clearTimeout === 'function') {\n          cachedClearTimeout = clearTimeout;\n        } else {\n          cachedClearTimeout = defaultClearTimeout;\n        }\n      } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n      }\n    })();\n\n    function runTimeout(fun) {\n      if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n      } // if setTimeout wasn't available but was latter defined\n\n\n      if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n      }\n\n      try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n      } catch (e) {\n        try {\n          // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n          return cachedSetTimeout.call(null, fun, 0);\n        } catch (e) {\n          // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n          return cachedSetTimeout.call(this, fun, 0);\n        }\n      }\n    }\n\n    function runClearTimeout(marker) {\n      if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n      } // if clearTimeout wasn't available but was latter defined\n\n\n      if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n      }\n\n      try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n      } catch (e) {\n        try {\n          // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n          return cachedClearTimeout.call(null, marker);\n        } catch (e) {\n          // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n          // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n          return cachedClearTimeout.call(this, marker);\n        }\n      }\n    }\n\n    var queue = [];\n    var draining = false;\n    var currentQueue;\n    var queueIndex = -1;\n\n    function cleanUpNextTick() {\n      if (!draining || !currentQueue) {\n        return;\n      }\n\n      draining = false;\n\n      if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n      } else {\n        queueIndex = -1;\n      }\n\n      if (queue.length) {\n        drainQueue();\n      }\n    }\n\n    function drainQueue() {\n      if (draining) {\n        return;\n      }\n\n      var timeout = runTimeout(cleanUpNextTick);\n      draining = true;\n      var len = queue.length;\n\n      while (len) {\n        currentQueue = queue;\n        queue = [];\n\n        while (++queueIndex < len) {\n          if (currentQueue) {\n            currentQueue[queueIndex].run();\n          }\n        }\n\n        queueIndex = -1;\n        len = queue.length;\n      }\n\n      currentQueue = null;\n      draining = false;\n      runClearTimeout(timeout);\n    }\n\n    process.nextTick = function (fun) {\n      var args = new Array(arguments.length - 1);\n\n      if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n          args[i - 1] = arguments[i];\n        }\n      }\n\n      queue.push(new Item(fun, args));\n\n      if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n      }\n    }; // v8 likes predictible objects\n\n\n    function Item(fun, array) {\n      this.fun = fun;\n      this.array = array;\n    }\n\n    Item.prototype.run = function () {\n      this.fun.apply(null, this.array);\n    };\n\n    process.title = 'browser';\n    process.browser = true;\n    process.env = {};\n    process.argv = [];\n    process.version = ''; // empty string to avoid regexp issues\n\n    process.versions = {};\n\n    function noop() {}\n\n    process.on = noop;\n    process.addListener = noop;\n    process.once = noop;\n    process.off = noop;\n    process.removeListener = noop;\n    process.removeAllListeners = noop;\n    process.emit = noop;\n    process.prependListener = noop;\n    process.prependOnceListener = noop;\n\n    process.listeners = function (name) {\n      return [];\n    };\n\n    process.binding = function (name) {\n      throw new Error('process.binding is not supported');\n    };\n\n    process.cwd = function () {\n      return '/';\n    };\n\n    process.chdir = function (dir) {\n      throw new Error('process.chdir is not supported');\n    };\n\n    process.umask = function () {\n      return 0;\n    };\n  }, {}],\n  86: [function (require, module, exports) {\n    (function (global) {\n      /*! https://mths.be/punycode v1.3.2 by @mathias */\n      ;\n\n      (function (root) {\n        /** Detect free variables */\n        var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n        var freeModule = typeof module == 'object' && module && !module.nodeType && module;\n        var freeGlobal = typeof global == 'object' && global;\n\n        if (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal) {\n          root = freeGlobal;\n        }\n        /**\n         * The `punycode` object.\n         * @name punycode\n         * @type Object\n         */\n\n\n        var punycode,\n\n        /** Highest positive signed 32-bit float value */\n        maxInt = 2147483647,\n            // aka. 0x7FFFFFFF or 2^31-1\n\n        /** Bootstring parameters */\n        base = 36,\n            tMin = 1,\n            tMax = 26,\n            skew = 38,\n            damp = 700,\n            initialBias = 72,\n            initialN = 128,\n            // 0x80\n        delimiter = '-',\n            // '\\x2D'\n\n        /** Regular expressions */\n        regexPunycode = /^xn--/,\n            regexNonASCII = /[^\\x20-\\x7E]/,\n            // unprintable ASCII chars + non-ASCII chars\n        regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g,\n            // RFC 3490 separators\n\n        /** Error messages */\n        errors = {\n          'overflow': 'Overflow: input needs wider integers to process',\n          'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n          'invalid-input': 'Invalid input'\n        },\n\n        /** Convenience shortcuts */\n        baseMinusTMin = base - tMin,\n            floor = Math.floor,\n            stringFromCharCode = String.fromCharCode,\n\n        /** Temporary variable */\n        key;\n        /*--------------------------------------------------------------------------*/\n\n        /**\n         * A generic error utility function.\n         * @private\n         * @param {String} type The error type.\n         * @returns {Error} Throws a `RangeError` with the applicable error message.\n         */\n\n        function error(type) {\n          throw RangeError(errors[type]);\n        }\n        /**\n         * A generic `Array#map` utility function.\n         * @private\n         * @param {Array} array The array to iterate over.\n         * @param {Function} callback The function that gets called for every array\n         * item.\n         * @returns {Array} A new array of values returned by the callback function.\n         */\n\n\n        function map(array, fn) {\n          var length = array.length;\n          var result = [];\n\n          while (length--) {\n            result[length] = fn(array[length]);\n          }\n\n          return result;\n        }\n        /**\n         * A simple `Array#map`-like wrapper to work with domain name strings or email\n         * addresses.\n         * @private\n         * @param {String} domain The domain name or email address.\n         * @param {Function} callback The function that gets called for every\n         * character.\n         * @returns {Array} A new string of characters returned by the callback\n         * function.\n         */\n\n\n        function mapDomain(string, fn) {\n          var parts = string.split('@');\n          var result = '';\n\n          if (parts.length > 1) {\n            // In email addresses, only the domain name should be punycoded. Leave\n            // the local part (i.e. everything up to `@`) intact.\n            result = parts[0] + '@';\n            string = parts[1];\n          } // Avoid `split(regex)` for IE8 compatibility. See #17.\n\n\n          string = string.replace(regexSeparators, '\\x2E');\n          var labels = string.split('.');\n          var encoded = map(labels, fn).join('.');\n          return result + encoded;\n        }\n        /**\n         * Creates an array containing the numeric code points of each Unicode\n         * character in the string. While JavaScript uses UCS-2 internally,\n         * this function will convert a pair of surrogate halves (each of which\n         * UCS-2 exposes as separate characters) into a single code point,\n         * matching UTF-16.\n         * @see `punycode.ucs2.encode`\n         * @see <https://mathiasbynens.be/notes/javascript-encoding>\n         * @memberOf punycode.ucs2\n         * @name decode\n         * @param {String} string The Unicode input string (UCS-2).\n         * @returns {Array} The new array of code points.\n         */\n\n\n        function ucs2decode(string) {\n          var output = [],\n              counter = 0,\n              length = string.length,\n              value,\n              extra;\n\n          while (counter < length) {\n            value = string.charCodeAt(counter++);\n\n            if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n              // high surrogate, and there is a next character\n              extra = string.charCodeAt(counter++);\n\n              if ((extra & 0xFC00) == 0xDC00) {\n                // low surrogate\n                output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n              } else {\n                // unmatched surrogate; only append this code unit, in case the next\n                // code unit is the high surrogate of a surrogate pair\n                output.push(value);\n                counter--;\n              }\n            } else {\n              output.push(value);\n            }\n          }\n\n          return output;\n        }\n        /**\n         * Creates a string based on an array of numeric code points.\n         * @see `punycode.ucs2.decode`\n         * @memberOf punycode.ucs2\n         * @name encode\n         * @param {Array} codePoints The array of numeric code points.\n         * @returns {String} The new Unicode string (UCS-2).\n         */\n\n\n        function ucs2encode(array) {\n          return map(array, function (value) {\n            var output = '';\n\n            if (value > 0xFFFF) {\n              value -= 0x10000;\n              output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n              value = 0xDC00 | value & 0x3FF;\n            }\n\n            output += stringFromCharCode(value);\n            return output;\n          }).join('');\n        }\n        /**\n         * Converts a basic code point into a digit/integer.\n         * @see `digitToBasic()`\n         * @private\n         * @param {Number} codePoint The basic numeric code point value.\n         * @returns {Number} The numeric value of a basic code point (for use in\n         * representing integers) in the range `0` to `base - 1`, or `base` if\n         * the code point does not represent a value.\n         */\n\n\n        function basicToDigit(codePoint) {\n          if (codePoint - 48 < 10) {\n            return codePoint - 22;\n          }\n\n          if (codePoint - 65 < 26) {\n            return codePoint - 65;\n          }\n\n          if (codePoint - 97 < 26) {\n            return codePoint - 97;\n          }\n\n          return base;\n        }\n        /**\n         * Converts a digit/integer into a basic code point.\n         * @see `basicToDigit()`\n         * @private\n         * @param {Number} digit The numeric value of a basic code point.\n         * @returns {Number} The basic code point whose value (when used for\n         * representing integers) is `digit`, which needs to be in the range\n         * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n         * used; else, the lowercase form is used. The behavior is undefined\n         * if `flag` is non-zero and `digit` has no uppercase form.\n         */\n\n\n        function digitToBasic(digit, flag) {\n          //  0..25 map to ASCII a..z or A..Z\n          // 26..35 map to ASCII 0..9\n          return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n        }\n        /**\n         * Bias adaptation function as per section 3.4 of RFC 3492.\n         * http://tools.ietf.org/html/rfc3492#section-3.4\n         * @private\n         */\n\n\n        function adapt(delta, numPoints, firstTime) {\n          var k = 0;\n          delta = firstTime ? floor(delta / damp) : delta >> 1;\n          delta += floor(delta / numPoints);\n\n          for (;\n          /* no initialization */\n          delta > baseMinusTMin * tMax >> 1; k += base) {\n            delta = floor(delta / baseMinusTMin);\n          }\n\n          return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n        }\n        /**\n         * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n         * symbols.\n         * @memberOf punycode\n         * @param {String} input The Punycode string of ASCII-only symbols.\n         * @returns {String} The resulting string of Unicode symbols.\n         */\n\n\n        function decode(input) {\n          // Don't use UCS-2\n          var output = [],\n              inputLength = input.length,\n              out,\n              i = 0,\n              n = initialN,\n              bias = initialBias,\n              basic,\n              j,\n              index,\n              oldi,\n              w,\n              k,\n              digit,\n              t,\n\n          /** Cached calculation results */\n          baseMinusT; // Handle the basic code points: let `basic` be the number of input code\n          // points before the last delimiter, or `0` if there is none, then copy\n          // the first basic code points to the output.\n\n          basic = input.lastIndexOf(delimiter);\n\n          if (basic < 0) {\n            basic = 0;\n          }\n\n          for (j = 0; j < basic; ++j) {\n            // if it's not a basic code point\n            if (input.charCodeAt(j) >= 0x80) {\n              error('not-basic');\n            }\n\n            output.push(input.charCodeAt(j));\n          } // Main decoding loop: start just after the last delimiter if any basic code\n          // points were copied; start at the beginning otherwise.\n\n\n          for (index = basic > 0 ? basic + 1 : 0; index < inputLength;)\n          /* no final expression */\n          {\n            // `index` is the index of the next character to be consumed.\n            // Decode a generalized variable-length integer into `delta`,\n            // which gets added to `i`. The overflow checking is easier\n            // if we increase `i` as we go, then subtract off its starting\n            // value at the end to obtain `delta`.\n            for (oldi = i, w = 1, k = base;;\n            /* no condition */\n            k += base) {\n              if (index >= inputLength) {\n                error('invalid-input');\n              }\n\n              digit = basicToDigit(input.charCodeAt(index++));\n\n              if (digit >= base || digit > floor((maxInt - i) / w)) {\n                error('overflow');\n              }\n\n              i += digit * w;\n              t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n\n              if (digit < t) {\n                break;\n              }\n\n              baseMinusT = base - t;\n\n              if (w > floor(maxInt / baseMinusT)) {\n                error('overflow');\n              }\n\n              w *= baseMinusT;\n            }\n\n            out = output.length + 1;\n            bias = adapt(i - oldi, out, oldi == 0); // `i` was supposed to wrap around from `out` to `0`,\n            // incrementing `n` each time, so we'll fix that now:\n\n            if (floor(i / out) > maxInt - n) {\n              error('overflow');\n            }\n\n            n += floor(i / out);\n            i %= out; // Insert `n` at position `i` of the output\n\n            output.splice(i++, 0, n);\n          }\n\n          return ucs2encode(output);\n        }\n        /**\n         * Converts a string of Unicode symbols (e.g. a domain name label) to a\n         * Punycode string of ASCII-only symbols.\n         * @memberOf punycode\n         * @param {String} input The string of Unicode symbols.\n         * @returns {String} The resulting Punycode string of ASCII-only symbols.\n         */\n\n\n        function encode(input) {\n          var n,\n              delta,\n              handledCPCount,\n              basicLength,\n              bias,\n              j,\n              m,\n              q,\n              k,\n              t,\n              currentValue,\n              output = [],\n\n          /** `inputLength` will hold the number of code points in `input`. */\n          inputLength,\n\n          /** Cached calculation results */\n          handledCPCountPlusOne,\n              baseMinusT,\n              qMinusT; // Convert the input in UCS-2 to Unicode\n\n          input = ucs2decode(input); // Cache the length\n\n          inputLength = input.length; // Initialize the state\n\n          n = initialN;\n          delta = 0;\n          bias = initialBias; // Handle the basic code points\n\n          for (j = 0; j < inputLength; ++j) {\n            currentValue = input[j];\n\n            if (currentValue < 0x80) {\n              output.push(stringFromCharCode(currentValue));\n            }\n          }\n\n          handledCPCount = basicLength = output.length; // `handledCPCount` is the number of code points that have been handled;\n          // `basicLength` is the number of basic code points.\n          // Finish the basic string - if it is not empty - with a delimiter\n\n          if (basicLength) {\n            output.push(delimiter);\n          } // Main encoding loop:\n\n\n          while (handledCPCount < inputLength) {\n            // All non-basic code points < n have been handled already. Find the next\n            // larger one:\n            for (m = maxInt, j = 0; j < inputLength; ++j) {\n              currentValue = input[j];\n\n              if (currentValue >= n && currentValue < m) {\n                m = currentValue;\n              }\n            } // Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n            // but guard against overflow\n\n\n            handledCPCountPlusOne = handledCPCount + 1;\n\n            if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n              error('overflow');\n            }\n\n            delta += (m - n) * handledCPCountPlusOne;\n            n = m;\n\n            for (j = 0; j < inputLength; ++j) {\n              currentValue = input[j];\n\n              if (currentValue < n && ++delta > maxInt) {\n                error('overflow');\n              }\n\n              if (currentValue == n) {\n                // Represent delta as a generalized variable-length integer\n                for (q = delta, k = base;;\n                /* no condition */\n                k += base) {\n                  t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n\n                  if (q < t) {\n                    break;\n                  }\n\n                  qMinusT = q - t;\n                  baseMinusT = base - t;\n                  output.push(stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0)));\n                  q = floor(qMinusT / baseMinusT);\n                }\n\n                output.push(stringFromCharCode(digitToBasic(q, 0)));\n                bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n                delta = 0;\n                ++handledCPCount;\n              }\n            }\n\n            ++delta;\n            ++n;\n          }\n\n          return output.join('');\n        }\n        /**\n         * Converts a Punycode string representing a domain name or an email address\n         * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n         * it doesn't matter if you call it on a string that has already been\n         * converted to Unicode.\n         * @memberOf punycode\n         * @param {String} input The Punycoded domain name or email address to\n         * convert to Unicode.\n         * @returns {String} The Unicode representation of the given Punycode\n         * string.\n         */\n\n\n        function toUnicode(input) {\n          return mapDomain(input, function (string) {\n            return regexPunycode.test(string) ? decode(string.slice(4).toLowerCase()) : string;\n          });\n        }\n        /**\n         * Converts a Unicode string representing a domain name or an email address to\n         * Punycode. Only the non-ASCII parts of the domain name will be converted,\n         * i.e. it doesn't matter if you call it with a domain that's already in\n         * ASCII.\n         * @memberOf punycode\n         * @param {String} input The domain name or email address to convert, as a\n         * Unicode string.\n         * @returns {String} The Punycode representation of the given domain name or\n         * email address.\n         */\n\n\n        function toASCII(input) {\n          return mapDomain(input, function (string) {\n            return regexNonASCII.test(string) ? 'xn--' + encode(string) : string;\n          });\n        }\n        /*--------------------------------------------------------------------------*/\n\n        /** Define the public API */\n\n\n        punycode = {\n          /**\n           * A string representing the current Punycode.js version number.\n           * @memberOf punycode\n           * @type String\n           */\n          'version': '1.3.2',\n\n          /**\n           * An object of methods to convert from JavaScript's internal character\n           * representation (UCS-2) to Unicode code points, and back.\n           * @see <https://mathiasbynens.be/notes/javascript-encoding>\n           * @memberOf punycode\n           * @type Object\n           */\n          'ucs2': {\n            'decode': ucs2decode,\n            'encode': ucs2encode\n          },\n          'decode': decode,\n          'encode': encode,\n          'toASCII': toASCII,\n          'toUnicode': toUnicode\n        };\n        /** Expose `punycode` */\n        // Some AMD build optimizers, like r.js, check for specific condition patterns\n        // like the following:\n\n        if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n          define('punycode', function () {\n            return punycode;\n          });\n        } else if (freeExports && freeModule) {\n          if (module.exports == freeExports) {\n            // in Node.js or RingoJS v0.8.0+\n            freeModule.exports = punycode;\n          } else {\n            // in Narwhal or RingoJS v0.7.0-\n            for (key in punycode) {\n              punycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n            }\n          }\n        } else {\n          // in Rhino or a web browser\n          root.punycode = punycode;\n        }\n      })(this);\n    }).call(this, typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {});\n  }, {}],\n  87: [function (require, module, exports) {\n    // Copyright Joyent, Inc. and other Node contributors.\n    //\n    // Permission is hereby granted, free of charge, to any person obtaining a\n    // copy of this software and associated documentation files (the\n    // \"Software\"), to deal in the Software without restriction, including\n    // without limitation the rights to use, copy, modify, merge, publish,\n    // distribute, sublicense, and/or sell copies of the Software, and to permit\n    // persons to whom the Software is furnished to do so, subject to the\n    // following conditions:\n    //\n    // The above copyright notice and this permission notice shall be included\n    // in all copies or substantial portions of the Software.\n    //\n    // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n    // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n    // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n    // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n    // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n    // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n    // USE OR OTHER DEALINGS IN THE SOFTWARE.\n    'use strict'; // If obj.hasOwnProperty has been overridden, then calling\n    // obj.hasOwnProperty(prop) will break.\n    // See: https://github.com/joyent/node/issues/1707\n\n    function hasOwnProperty(obj, prop) {\n      return Object.prototype.hasOwnProperty.call(obj, prop);\n    }\n\n    module.exports = function (qs, sep, eq, options) {\n      sep = sep || '&';\n      eq = eq || '=';\n      var obj = {};\n\n      if (typeof qs !== 'string' || qs.length === 0) {\n        return obj;\n      }\n\n      var regexp = /\\+/g;\n      qs = qs.split(sep);\n      var maxKeys = 1000;\n\n      if (options && typeof options.maxKeys === 'number') {\n        maxKeys = options.maxKeys;\n      }\n\n      var len = qs.length; // maxKeys <= 0 means that we should not limit keys count\n\n      if (maxKeys > 0 && len > maxKeys) {\n        len = maxKeys;\n      }\n\n      for (var i = 0; i < len; ++i) {\n        var x = qs[i].replace(regexp, '%20'),\n            idx = x.indexOf(eq),\n            kstr,\n            vstr,\n            k,\n            v;\n\n        if (idx >= 0) {\n          kstr = x.substr(0, idx);\n          vstr = x.substr(idx + 1);\n        } else {\n          kstr = x;\n          vstr = '';\n        }\n\n        k = decodeURIComponent(kstr);\n        v = decodeURIComponent(vstr);\n\n        if (!hasOwnProperty(obj, k)) {\n          obj[k] = v;\n        } else if (isArray(obj[k])) {\n          obj[k].push(v);\n        } else {\n          obj[k] = [obj[k], v];\n        }\n      }\n\n      return obj;\n    };\n\n    var isArray = Array.isArray || function (xs) {\n      return Object.prototype.toString.call(xs) === '[object Array]';\n    };\n  }, {}],\n  88: [function (require, module, exports) {\n    // Copyright Joyent, Inc. and other Node contributors.\n    //\n    // Permission is hereby granted, free of charge, to any person obtaining a\n    // copy of this software and associated documentation files (the\n    // \"Software\"), to deal in the Software without restriction, including\n    // without limitation the rights to use, copy, modify, merge, publish,\n    // distribute, sublicense, and/or sell copies of the Software, and to permit\n    // persons to whom the Software is furnished to do so, subject to the\n    // following conditions:\n    //\n    // The above copyright notice and this permission notice shall be included\n    // in all copies or substantial portions of the Software.\n    //\n    // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n    // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n    // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n    // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n    // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n    // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n    // USE OR OTHER DEALINGS IN THE SOFTWARE.\n    'use strict';\n\n    var stringifyPrimitive = function (v) {\n      switch (typeof v) {\n        case 'string':\n          return v;\n\n        case 'boolean':\n          return v ? 'true' : 'false';\n\n        case 'number':\n          return isFinite(v) ? v : '';\n\n        default:\n          return '';\n      }\n    };\n\n    module.exports = function (obj, sep, eq, name) {\n      sep = sep || '&';\n      eq = eq || '=';\n\n      if (obj === null) {\n        obj = undefined;\n      }\n\n      if (typeof obj === 'object') {\n        return map(objectKeys(obj), function (k) {\n          var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n\n          if (isArray(obj[k])) {\n            return map(obj[k], function (v) {\n              return ks + encodeURIComponent(stringifyPrimitive(v));\n            }).join(sep);\n          } else {\n            return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n          }\n        }).join(sep);\n      }\n\n      if (!name) return '';\n      return encodeURIComponent(stringifyPrimitive(name)) + eq + encodeURIComponent(stringifyPrimitive(obj));\n    };\n\n    var isArray = Array.isArray || function (xs) {\n      return Object.prototype.toString.call(xs) === '[object Array]';\n    };\n\n    function map(xs, f) {\n      if (xs.map) return xs.map(f);\n      var res = [];\n\n      for (var i = 0; i < xs.length; i++) {\n        res.push(f(xs[i], i));\n      }\n\n      return res;\n    }\n\n    var objectKeys = Object.keys || function (obj) {\n      var res = [];\n\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n      }\n\n      return res;\n    };\n  }, {}],\n  89: [function (require, module, exports) {\n    'use strict';\n\n    exports.decode = exports.parse = require('./decode');\n    exports.encode = exports.stringify = require('./encode');\n  }, {\n    \"./decode\": 87,\n    \"./encode\": 88\n  }],\n  90: [function (require, module, exports) {\n    // Copyright Joyent, Inc. and other Node contributors.\n    //\n    // Permission is hereby granted, free of charge, to any person obtaining a\n    // copy of this software and associated documentation files (the\n    // \"Software\"), to deal in the Software without restriction, including\n    // without limitation the rights to use, copy, modify, merge, publish,\n    // distribute, sublicense, and/or sell copies of the Software, and to permit\n    // persons to whom the Software is furnished to do so, subject to the\n    // following conditions:\n    //\n    // The above copyright notice and this permission notice shall be included\n    // in all copies or substantial portions of the Software.\n    //\n    // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n    // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n    // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n    // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n    // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n    // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n    // USE OR OTHER DEALINGS IN THE SOFTWARE.\n    'use strict'; // If obj.hasOwnProperty has been overridden, then calling\n    // obj.hasOwnProperty(prop) will break.\n    // See: https://github.com/joyent/node/issues/1707\n\n    function hasOwnProperty(obj, prop) {\n      return Object.prototype.hasOwnProperty.call(obj, prop);\n    }\n\n    module.exports = function (qs, sep, eq, options) {\n      sep = sep || '&';\n      eq = eq || '=';\n      var obj = {};\n\n      if (typeof qs !== 'string' || qs.length === 0) {\n        return obj;\n      }\n\n      var regexp = /\\+/g;\n      qs = qs.split(sep);\n      var maxKeys = 1000;\n\n      if (options && typeof options.maxKeys === 'number') {\n        maxKeys = options.maxKeys;\n      }\n\n      var len = qs.length; // maxKeys <= 0 means that we should not limit keys count\n\n      if (maxKeys > 0 && len > maxKeys) {\n        len = maxKeys;\n      }\n\n      for (var i = 0; i < len; ++i) {\n        var x = qs[i].replace(regexp, '%20'),\n            idx = x.indexOf(eq),\n            kstr,\n            vstr,\n            k,\n            v;\n\n        if (idx >= 0) {\n          kstr = x.substr(0, idx);\n          vstr = x.substr(idx + 1);\n        } else {\n          kstr = x;\n          vstr = '';\n        }\n\n        k = decodeURIComponent(kstr);\n        v = decodeURIComponent(vstr);\n\n        if (!hasOwnProperty(obj, k)) {\n          obj[k] = v;\n        } else if (Array.isArray(obj[k])) {\n          obj[k].push(v);\n        } else {\n          obj[k] = [obj[k], v];\n        }\n      }\n\n      return obj;\n    };\n  }, {}],\n  91: [function (require, module, exports) {\n    // Copyright Joyent, Inc. and other Node contributors.\n    //\n    // Permission is hereby granted, free of charge, to any person obtaining a\n    // copy of this software and associated documentation files (the\n    // \"Software\"), to deal in the Software without restriction, including\n    // without limitation the rights to use, copy, modify, merge, publish,\n    // distribute, sublicense, and/or sell copies of the Software, and to permit\n    // persons to whom the Software is furnished to do so, subject to the\n    // following conditions:\n    //\n    // The above copyright notice and this permission notice shall be included\n    // in all copies or substantial portions of the Software.\n    //\n    // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n    // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n    // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n    // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n    // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n    // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n    // USE OR OTHER DEALINGS IN THE SOFTWARE.\n    'use strict';\n\n    var stringifyPrimitive = function (v) {\n      switch (typeof v) {\n        case 'string':\n          return v;\n\n        case 'boolean':\n          return v ? 'true' : 'false';\n\n        case 'number':\n          return isFinite(v) ? v : '';\n\n        default:\n          return '';\n      }\n    };\n\n    module.exports = function (obj, sep, eq, name) {\n      sep = sep || '&';\n      eq = eq || '=';\n\n      if (obj === null) {\n        obj = undefined;\n      }\n\n      if (typeof obj === 'object') {\n        return Object.keys(obj).map(function (k) {\n          var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n\n          if (Array.isArray(obj[k])) {\n            return obj[k].map(function (v) {\n              return ks + encodeURIComponent(stringifyPrimitive(v));\n            }).join(sep);\n          } else {\n            return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n          }\n        }).join(sep);\n      }\n\n      if (!name) return '';\n      return encodeURIComponent(stringifyPrimitive(name)) + eq + encodeURIComponent(stringifyPrimitive(obj));\n    };\n  }, {}],\n  92: [function (require, module, exports) {\n    arguments[4][89][0].apply(exports, arguments);\n  }, {\n    \"./decode\": 90,\n    \"./encode\": 91,\n    \"dup\": 89\n  }],\n  93: [function (require, module, exports) {\n    (function (setImmediate, clearImmediate) {\n      var nextTick = require('process/browser.js').nextTick;\n\n      var apply = Function.prototype.apply;\n      var slice = Array.prototype.slice;\n      var immediateIds = {};\n      var nextImmediateId = 0; // DOM APIs, for completeness\n\n      exports.setTimeout = function () {\n        return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n      };\n\n      exports.setInterval = function () {\n        return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n      };\n\n      exports.clearTimeout = exports.clearInterval = function (timeout) {\n        timeout.close();\n      };\n\n      function Timeout(id, clearFn) {\n        this._id = id;\n        this._clearFn = clearFn;\n      }\n\n      Timeout.prototype.unref = Timeout.prototype.ref = function () {};\n\n      Timeout.prototype.close = function () {\n        this._clearFn.call(window, this._id);\n      }; // Does not start the time, just sets up the members needed.\n\n\n      exports.enroll = function (item, msecs) {\n        clearTimeout(item._idleTimeoutId);\n        item._idleTimeout = msecs;\n      };\n\n      exports.unenroll = function (item) {\n        clearTimeout(item._idleTimeoutId);\n        item._idleTimeout = -1;\n      };\n\n      exports._unrefActive = exports.active = function (item) {\n        clearTimeout(item._idleTimeoutId);\n        var msecs = item._idleTimeout;\n\n        if (msecs >= 0) {\n          item._idleTimeoutId = setTimeout(function onTimeout() {\n            if (item._onTimeout) item._onTimeout();\n          }, msecs);\n        }\n      }; // That's not how node.js implements it but the exposed api is the same.\n\n\n      exports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function (fn) {\n        var id = nextImmediateId++;\n        var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n        immediateIds[id] = true;\n        nextTick(function onNextTick() {\n          if (immediateIds[id]) {\n            // fn.call() is faster so we optimize for the common use-case\n            // @see http://jsperf.com/call-apply-segu\n            if (args) {\n              fn.apply(null, args);\n            } else {\n              fn.call(null);\n            } // Prevent ids from leaking\n\n\n            exports.clearImmediate(id);\n          }\n        });\n        return id;\n      };\n      exports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function (id) {\n        delete immediateIds[id];\n      };\n    }).call(this, require(\"timers\").setImmediate, require(\"timers\").clearImmediate);\n  }, {\n    \"process/browser.js\": 85,\n    \"timers\": 93\n  }],\n  94: [function (require, module, exports) {\n    // Copyright Joyent, Inc. and other Node contributors.\n    //\n    // Permission is hereby granted, free of charge, to any person obtaining a\n    // copy of this software and associated documentation files (the\n    // \"Software\"), to deal in the Software without restriction, including\n    // without limitation the rights to use, copy, modify, merge, publish,\n    // distribute, sublicense, and/or sell copies of the Software, and to permit\n    // persons to whom the Software is furnished to do so, subject to the\n    // following conditions:\n    //\n    // The above copyright notice and this permission notice shall be included\n    // in all copies or substantial portions of the Software.\n    //\n    // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n    // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n    // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n    // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n    // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n    // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n    // USE OR OTHER DEALINGS IN THE SOFTWARE.\n    var punycode = require('punycode');\n\n    exports.parse = urlParse;\n    exports.resolve = urlResolve;\n    exports.resolveObject = urlResolveObject;\n    exports.format = urlFormat;\n    exports.Url = Url;\n\n    function Url() {\n      this.protocol = null;\n      this.slashes = null;\n      this.auth = null;\n      this.host = null;\n      this.port = null;\n      this.hostname = null;\n      this.hash = null;\n      this.search = null;\n      this.query = null;\n      this.pathname = null;\n      this.path = null;\n      this.href = null;\n    } // Reference: RFC 3986, RFC 1808, RFC 2396\n    // define these here so at least they only have to be\n    // compiled once on the first module load.\n\n\n    var protocolPattern = /^([a-z0-9.+-]+:)/i,\n        portPattern = /:[0-9]*$/,\n        // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n        // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n        // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n        // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n        hostEndingChars = ['/', '?', '#'],\n        hostnameMaxLen = 255,\n        hostnamePartPattern = /^[a-z0-9A-Z_-]{0,63}$/,\n        hostnamePartStart = /^([a-z0-9A-Z_-]{0,63})(.*)$/,\n        // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n        // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n        // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n        querystring = require('querystring');\n\n    function urlParse(url, parseQueryString, slashesDenoteHost) {\n      if (url && isObject(url) && url instanceof Url) return url;\n      var u = new Url();\n      u.parse(url, parseQueryString, slashesDenoteHost);\n      return u;\n    }\n\n    Url.prototype.parse = function (url, parseQueryString, slashesDenoteHost) {\n      if (!isString(url)) {\n        throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n      }\n\n      var rest = url; // trim before proceeding.\n      // This is to support parse stuff like \"  http://foo.com  \\n\"\n\n      rest = rest.trim();\n      var proto = protocolPattern.exec(rest);\n\n      if (proto) {\n        proto = proto[0];\n        var lowerProto = proto.toLowerCase();\n        this.protocol = lowerProto;\n        rest = rest.substr(proto.length);\n      } // figure out if it's got a host\n      // user@server is *always* interpreted as a hostname, and url\n      // resolution will treat //foo/bar as host=foo,path=bar because that's\n      // how the browser resolves relative URLs.\n\n\n      if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n        var slashes = rest.substr(0, 2) === '//';\n\n        if (slashes && !(proto && hostlessProtocol[proto])) {\n          rest = rest.substr(2);\n          this.slashes = true;\n        }\n      }\n\n      if (!hostlessProtocol[proto] && (slashes || proto && !slashedProtocol[proto])) {\n        // there's a hostname.\n        // the first instance of /, ?, ;, or # ends the host.\n        //\n        // If there is an @ in the hostname, then non-host chars *are* allowed\n        // to the left of the last @ sign, unless some host-ending character\n        // comes *before* the @-sign.\n        // URLs are obnoxious.\n        //\n        // ex:\n        // http://a@b@c/ => user:a@b host:c\n        // http://a@b?@c => user:a host:c path:/?@c\n        // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n        // Review our test case against browsers more comprehensively.\n        // find the first instance of any hostEndingChars\n        var hostEnd = -1;\n\n        for (var i = 0; i < hostEndingChars.length; i++) {\n          var hec = rest.indexOf(hostEndingChars[i]);\n          if (hec !== -1 && (hostEnd === -1 || hec < hostEnd)) hostEnd = hec;\n        } // at this point, either we have an explicit point where the\n        // auth portion cannot go past, or the last @ char is the decider.\n\n\n        var auth, atSign;\n\n        if (hostEnd === -1) {\n          // atSign can be anywhere.\n          atSign = rest.lastIndexOf('@');\n        } else {\n          // atSign must be in auth portion.\n          // http://a@b/c@d => host:b auth:a path:/c@d\n          atSign = rest.lastIndexOf('@', hostEnd);\n        } // Now we have a portion which is definitely the auth.\n        // Pull that off.\n\n\n        if (atSign !== -1) {\n          auth = rest.slice(0, atSign);\n          rest = rest.slice(atSign + 1);\n          this.auth = decodeURIComponent(auth);\n        } // the host is the remaining to the left of the first non-host char\n\n\n        hostEnd = -1;\n\n        for (var i = 0; i < nonHostChars.length; i++) {\n          var hec = rest.indexOf(nonHostChars[i]);\n          if (hec !== -1 && (hostEnd === -1 || hec < hostEnd)) hostEnd = hec;\n        } // if we still have not hit it, then the entire thing is a host.\n\n\n        if (hostEnd === -1) hostEnd = rest.length;\n        this.host = rest.slice(0, hostEnd);\n        rest = rest.slice(hostEnd); // pull out port.\n\n        this.parseHost(); // we've indicated that there is a hostname,\n        // so even if it's empty, it has to be present.\n\n        this.hostname = this.hostname || ''; // if hostname begins with [ and ends with ]\n        // assume that it's an IPv6 address.\n\n        var ipv6Hostname = this.hostname[0] === '[' && this.hostname[this.hostname.length - 1] === ']'; // validate a little.\n\n        if (!ipv6Hostname) {\n          var hostparts = this.hostname.split(/\\./);\n\n          for (var i = 0, l = hostparts.length; i < l; i++) {\n            var part = hostparts[i];\n            if (!part) continue;\n\n            if (!part.match(hostnamePartPattern)) {\n              var newpart = '';\n\n              for (var j = 0, k = part.length; j < k; j++) {\n                if (part.charCodeAt(j) > 127) {\n                  // we replace non-ASCII char with a temporary placeholder\n                  // we need this to make sure size of hostname is not\n                  // broken by replacing non-ASCII by nothing\n                  newpart += 'x';\n                } else {\n                  newpart += part[j];\n                }\n              } // we test again with ASCII char only\n\n\n              if (!newpart.match(hostnamePartPattern)) {\n                var validParts = hostparts.slice(0, i);\n                var notHost = hostparts.slice(i + 1);\n                var bit = part.match(hostnamePartStart);\n\n                if (bit) {\n                  validParts.push(bit[1]);\n                  notHost.unshift(bit[2]);\n                }\n\n                if (notHost.length) {\n                  rest = '/' + notHost.join('.') + rest;\n                }\n\n                this.hostname = validParts.join('.');\n                break;\n              }\n            }\n          }\n        }\n\n        if (this.hostname.length > hostnameMaxLen) {\n          this.hostname = '';\n        } else {\n          // hostnames are always lower case.\n          this.hostname = this.hostname.toLowerCase();\n        }\n\n        if (!ipv6Hostname) {\n          // IDNA Support: Returns a puny coded representation of \"domain\".\n          // It only converts the part of the domain name that\n          // has non ASCII characters. I.e. it dosent matter if\n          // you call it with a domain that already is in ASCII.\n          var domainArray = this.hostname.split('.');\n          var newOut = [];\n\n          for (var i = 0; i < domainArray.length; ++i) {\n            var s = domainArray[i];\n            newOut.push(s.match(/[^A-Za-z0-9_-]/) ? 'xn--' + punycode.encode(s) : s);\n          }\n\n          this.hostname = newOut.join('.');\n        }\n\n        var p = this.port ? ':' + this.port : '';\n        var h = this.hostname || '';\n        this.host = h + p;\n        this.href += this.host; // strip [ and ] from the hostname\n        // the host field still retains them, though\n\n        if (ipv6Hostname) {\n          this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n\n          if (rest[0] !== '/') {\n            rest = '/' + rest;\n          }\n        }\n      } // now rest is set to the post-host stuff.\n      // chop off any delim chars.\n\n\n      if (!unsafeProtocol[lowerProto]) {\n        // First, make 100% sure that any \"autoEscape\" chars get\n        // escaped, even if encodeURIComponent doesn't think they\n        // need to be.\n        for (var i = 0, l = autoEscape.length; i < l; i++) {\n          var ae = autoEscape[i];\n          var esc = encodeURIComponent(ae);\n\n          if (esc === ae) {\n            esc = escape(ae);\n          }\n\n          rest = rest.split(ae).join(esc);\n        }\n      } // chop off from the tail first.\n\n\n      var hash = rest.indexOf('#');\n\n      if (hash !== -1) {\n        // got a fragment string.\n        this.hash = rest.substr(hash);\n        rest = rest.slice(0, hash);\n      }\n\n      var qm = rest.indexOf('?');\n\n      if (qm !== -1) {\n        this.search = rest.substr(qm);\n        this.query = rest.substr(qm + 1);\n\n        if (parseQueryString) {\n          this.query = querystring.parse(this.query);\n        }\n\n        rest = rest.slice(0, qm);\n      } else if (parseQueryString) {\n        // no query string, but parseQueryString still requested\n        this.search = '';\n        this.query = {};\n      }\n\n      if (rest) this.pathname = rest;\n\n      if (slashedProtocol[lowerProto] && this.hostname && !this.pathname) {\n        this.pathname = '/';\n      } //to support http.request\n\n\n      if (this.pathname || this.search) {\n        var p = this.pathname || '';\n        var s = this.search || '';\n        this.path = p + s;\n      } // finally, reconstruct the href based on what has been validated.\n\n\n      this.href = this.format();\n      return this;\n    }; // format a parsed object into a url string\n\n\n    function urlFormat(obj) {\n      // ensure it's an object, and not a string url.\n      // If it's an obj, this is a no-op.\n      // this way, you can call url_format() on strings\n      // to clean up potentially wonky urls.\n      if (isString(obj)) obj = urlParse(obj);\n      if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n      return obj.format();\n    }\n\n    Url.prototype.format = function () {\n      var auth = this.auth || '';\n\n      if (auth) {\n        auth = encodeURIComponent(auth);\n        auth = auth.replace(/%3A/i, ':');\n        auth += '@';\n      }\n\n      var protocol = this.protocol || '',\n          pathname = this.pathname || '',\n          hash = this.hash || '',\n          host = false,\n          query = '';\n\n      if (this.host) {\n        host = auth + this.host;\n      } else if (this.hostname) {\n        host = auth + (this.hostname.indexOf(':') === -1 ? this.hostname : '[' + this.hostname + ']');\n\n        if (this.port) {\n          host += ':' + this.port;\n        }\n      }\n\n      if (this.query && isObject(this.query) && Object.keys(this.query).length) {\n        query = querystring.stringify(this.query);\n      }\n\n      var search = this.search || query && '?' + query || '';\n      if (protocol && protocol.substr(-1) !== ':') protocol += ':'; // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n      // unless they had them to begin with.\n\n      if (this.slashes || (!protocol || slashedProtocol[protocol]) && host !== false) {\n        host = '//' + (host || '');\n        if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n      } else if (!host) {\n        host = '';\n      }\n\n      if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n      if (search && search.charAt(0) !== '?') search = '?' + search;\n      pathname = pathname.replace(/[?#]/g, function (match) {\n        return encodeURIComponent(match);\n      });\n      search = search.replace('#', '%23');\n      return protocol + host + pathname + search + hash;\n    };\n\n    function urlResolve(source, relative) {\n      return urlParse(source, false, true).resolve(relative);\n    }\n\n    Url.prototype.resolve = function (relative) {\n      return this.resolveObject(urlParse(relative, false, true)).format();\n    };\n\n    function urlResolveObject(source, relative) {\n      if (!source) return relative;\n      return urlParse(source, false, true).resolveObject(relative);\n    }\n\n    Url.prototype.resolveObject = function (relative) {\n      if (isString(relative)) {\n        var rel = new Url();\n        rel.parse(relative, false, true);\n        relative = rel;\n      }\n\n      var result = new Url();\n      Object.keys(this).forEach(function (k) {\n        result[k] = this[k];\n      }, this); // hash is always overridden, no matter what.\n      // even href=\"\" will remove it.\n\n      result.hash = relative.hash; // if the relative url is empty, then there's nothing left to do here.\n\n      if (relative.href === '') {\n        result.href = result.format();\n        return result;\n      } // hrefs like //foo/bar always cut to the protocol.\n\n\n      if (relative.slashes && !relative.protocol) {\n        // take everything except the protocol from relative\n        Object.keys(relative).forEach(function (k) {\n          if (k !== 'protocol') result[k] = relative[k];\n        }); //urlParse appends trailing / to urls like http://www.example.com\n\n        if (slashedProtocol[result.protocol] && result.hostname && !result.pathname) {\n          result.path = result.pathname = '/';\n        }\n\n        result.href = result.format();\n        return result;\n      }\n\n      if (relative.protocol && relative.protocol !== result.protocol) {\n        // if it's a known url protocol, then changing\n        // the protocol does weird things\n        // first, if it's not file:, then we MUST have a host,\n        // and if there was a path\n        // to begin with, then we MUST have a path.\n        // if it is file:, then the host is dropped,\n        // because that's known to be hostless.\n        // anything else is assumed to be absolute.\n        if (!slashedProtocol[relative.protocol]) {\n          Object.keys(relative).forEach(function (k) {\n            result[k] = relative[k];\n          });\n          result.href = result.format();\n          return result;\n        }\n\n        result.protocol = relative.protocol;\n\n        if (!relative.host && !hostlessProtocol[relative.protocol]) {\n          var relPath = (relative.pathname || '').split('/');\n\n          while (relPath.length && !(relative.host = relPath.shift()));\n\n          if (!relative.host) relative.host = '';\n          if (!relative.hostname) relative.hostname = '';\n          if (relPath[0] !== '') relPath.unshift('');\n          if (relPath.length < 2) relPath.unshift('');\n          result.pathname = relPath.join('/');\n        } else {\n          result.pathname = relative.pathname;\n        }\n\n        result.search = relative.search;\n        result.query = relative.query;\n        result.host = relative.host || '';\n        result.auth = relative.auth;\n        result.hostname = relative.hostname || relative.host;\n        result.port = relative.port; // to support http.request\n\n        if (result.pathname || result.search) {\n          var p = result.pathname || '';\n          var s = result.search || '';\n          result.path = p + s;\n        }\n\n        result.slashes = result.slashes || relative.slashes;\n        result.href = result.format();\n        return result;\n      }\n\n      var isSourceAbs = result.pathname && result.pathname.charAt(0) === '/',\n          isRelAbs = relative.host || relative.pathname && relative.pathname.charAt(0) === '/',\n          mustEndAbs = isRelAbs || isSourceAbs || result.host && relative.pathname,\n          removeAllDots = mustEndAbs,\n          srcPath = result.pathname && result.pathname.split('/') || [],\n          relPath = relative.pathname && relative.pathname.split('/') || [],\n          psychotic = result.protocol && !slashedProtocol[result.protocol]; // if the url is a non-slashed url, then relative\n      // links like ../.. should be able\n      // to crawl up to the hostname, as well.  This is strange.\n      // result.protocol has already been set by now.\n      // Later on, put the first path part into the host field.\n\n      if (psychotic) {\n        result.hostname = '';\n        result.port = null;\n\n        if (result.host) {\n          if (srcPath[0] === '') srcPath[0] = result.host;else srcPath.unshift(result.host);\n        }\n\n        result.host = '';\n\n        if (relative.protocol) {\n          relative.hostname = null;\n          relative.port = null;\n\n          if (relative.host) {\n            if (relPath[0] === '') relPath[0] = relative.host;else relPath.unshift(relative.host);\n          }\n\n          relative.host = null;\n        }\n\n        mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n      }\n\n      if (isRelAbs) {\n        // it's absolute.\n        result.host = relative.host || relative.host === '' ? relative.host : result.host;\n        result.hostname = relative.hostname || relative.hostname === '' ? relative.hostname : result.hostname;\n        result.search = relative.search;\n        result.query = relative.query;\n        srcPath = relPath; // fall through to the dot-handling below.\n      } else if (relPath.length) {\n        // it's relative\n        // throw away the existing file, and take the new path instead.\n        if (!srcPath) srcPath = [];\n        srcPath.pop();\n        srcPath = srcPath.concat(relPath);\n        result.search = relative.search;\n        result.query = relative.query;\n      } else if (!isNullOrUndefined(relative.search)) {\n        // just pull out the search.\n        // like href='?foo'.\n        // Put this after the other two cases because it simplifies the booleans\n        if (psychotic) {\n          result.hostname = result.host = srcPath.shift(); //occationaly the auth can get stuck only in host\n          //this especialy happens in cases like\n          //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n\n          var authInHost = result.host && result.host.indexOf('@') > 0 ? result.host.split('@') : false;\n\n          if (authInHost) {\n            result.auth = authInHost.shift();\n            result.host = result.hostname = authInHost.shift();\n          }\n        }\n\n        result.search = relative.search;\n        result.query = relative.query; //to support http.request\n\n        if (!isNull(result.pathname) || !isNull(result.search)) {\n          result.path = (result.pathname ? result.pathname : '') + (result.search ? result.search : '');\n        }\n\n        result.href = result.format();\n        return result;\n      }\n\n      if (!srcPath.length) {\n        // no path at all.  easy.\n        // we've already handled the other stuff above.\n        result.pathname = null; //to support http.request\n\n        if (result.search) {\n          result.path = '/' + result.search;\n        } else {\n          result.path = null;\n        }\n\n        result.href = result.format();\n        return result;\n      } // if a url ENDs in . or .., then it must get a trailing slash.\n      // however, if it ends in anything else non-slashy,\n      // then it must NOT get a trailing slash.\n\n\n      var last = srcPath.slice(-1)[0];\n      var hasTrailingSlash = (result.host || relative.host) && (last === '.' || last === '..') || last === ''; // strip single dots, resolve double dots to parent dir\n      // if the path tries to go above the root, `up` ends up > 0\n\n      var up = 0;\n\n      for (var i = srcPath.length; i >= 0; i--) {\n        last = srcPath[i];\n\n        if (last == '.') {\n          srcPath.splice(i, 1);\n        } else if (last === '..') {\n          srcPath.splice(i, 1);\n          up++;\n        } else if (up) {\n          srcPath.splice(i, 1);\n          up--;\n        }\n      } // if the path is allowed to go above the root, restore leading ..s\n\n\n      if (!mustEndAbs && !removeAllDots) {\n        for (; up--; up) {\n          srcPath.unshift('..');\n        }\n      }\n\n      if (mustEndAbs && srcPath[0] !== '' && (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n        srcPath.unshift('');\n      }\n\n      if (hasTrailingSlash && srcPath.join('/').substr(-1) !== '/') {\n        srcPath.push('');\n      }\n\n      var isAbsolute = srcPath[0] === '' || srcPath[0] && srcPath[0].charAt(0) === '/'; // put the host back\n\n      if (psychotic) {\n        result.hostname = result.host = isAbsolute ? '' : srcPath.length ? srcPath.shift() : ''; //occationaly the auth can get stuck only in host\n        //this especialy happens in cases like\n        //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n\n        var authInHost = result.host && result.host.indexOf('@') > 0 ? result.host.split('@') : false;\n\n        if (authInHost) {\n          result.auth = authInHost.shift();\n          result.host = result.hostname = authInHost.shift();\n        }\n      }\n\n      mustEndAbs = mustEndAbs || result.host && srcPath.length;\n\n      if (mustEndAbs && !isAbsolute) {\n        srcPath.unshift('');\n      }\n\n      if (!srcPath.length) {\n        result.pathname = null;\n        result.path = null;\n      } else {\n        result.pathname = srcPath.join('/');\n      } //to support request.http\n\n\n      if (!isNull(result.pathname) || !isNull(result.search)) {\n        result.path = (result.pathname ? result.pathname : '') + (result.search ? result.search : '');\n      }\n\n      result.auth = relative.auth || result.auth;\n      result.slashes = result.slashes || relative.slashes;\n      result.href = result.format();\n      return result;\n    };\n\n    Url.prototype.parseHost = function () {\n      var host = this.host;\n      var port = portPattern.exec(host);\n\n      if (port) {\n        port = port[0];\n\n        if (port !== ':') {\n          this.port = port.substr(1);\n        }\n\n        host = host.substr(0, host.length - port.length);\n      }\n\n      if (host) this.hostname = host;\n    };\n\n    function isString(arg) {\n      return typeof arg === \"string\";\n    }\n\n    function isObject(arg) {\n      return typeof arg === 'object' && arg !== null;\n    }\n\n    function isNull(arg) {\n      return arg === null;\n    }\n\n    function isNullOrUndefined(arg) {\n      return arg == null;\n    }\n  }, {\n    \"punycode\": 86,\n    \"querystring\": 89\n  }],\n  95: [function (require, module, exports) {\n    if (typeof Object.create === 'function') {\n      // implementation from standard node.js 'util' module\n      module.exports = function inherits(ctor, superCtor) {\n        ctor.super_ = superCtor;\n        ctor.prototype = Object.create(superCtor.prototype, {\n          constructor: {\n            value: ctor,\n            enumerable: false,\n            writable: true,\n            configurable: true\n          }\n        });\n      };\n    } else {\n      // old school shim for old browsers\n      module.exports = function inherits(ctor, superCtor) {\n        ctor.super_ = superCtor;\n\n        var TempCtor = function () {};\n\n        TempCtor.prototype = superCtor.prototype;\n        ctor.prototype = new TempCtor();\n        ctor.prototype.constructor = ctor;\n      };\n    }\n  }, {}],\n  96: [function (require, module, exports) {\n    module.exports = function isBuffer(arg) {\n      return arg && typeof arg === 'object' && typeof arg.copy === 'function' && typeof arg.fill === 'function' && typeof arg.readUInt8 === 'function';\n    };\n  }, {}],\n  97: [function (require, module, exports) {\n    (function (process, global) {\n      // Copyright Joyent, Inc. and other Node contributors.\n      //\n      // Permission is hereby granted, free of charge, to any person obtaining a\n      // copy of this software and associated documentation files (the\n      // \"Software\"), to deal in the Software without restriction, including\n      // without limitation the rights to use, copy, modify, merge, publish,\n      // distribute, sublicense, and/or sell copies of the Software, and to permit\n      // persons to whom the Software is furnished to do so, subject to the\n      // following conditions:\n      //\n      // The above copyright notice and this permission notice shall be included\n      // in all copies or substantial portions of the Software.\n      //\n      // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n      // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n      // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n      // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n      // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n      // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n      // USE OR OTHER DEALINGS IN THE SOFTWARE.\n      var formatRegExp = /%[sdj%]/g;\n\n      exports.format = function (f) {\n        if (!isString(f)) {\n          var objects = [];\n\n          for (var i = 0; i < arguments.length; i++) {\n            objects.push(inspect(arguments[i]));\n          }\n\n          return objects.join(' ');\n        }\n\n        var i = 1;\n        var args = arguments;\n        var len = args.length;\n        var str = String(f).replace(formatRegExp, function (x) {\n          if (x === '%%') return '%';\n          if (i >= len) return x;\n\n          switch (x) {\n            case '%s':\n              return String(args[i++]);\n\n            case '%d':\n              return Number(args[i++]);\n\n            case '%j':\n              try {\n                return JSON.stringify(args[i++]);\n              } catch (_) {\n                return '[Circular]';\n              }\n\n            default:\n              return x;\n          }\n        });\n\n        for (var x = args[i]; i < len; x = args[++i]) {\n          if (isNull(x) || !isObject(x)) {\n            str += ' ' + x;\n          } else {\n            str += ' ' + inspect(x);\n          }\n        }\n\n        return str;\n      }; // Mark that a method should not be used.\n      // Returns a modified function which warns once by default.\n      // If --no-deprecation is set, then it is a no-op.\n\n\n      exports.deprecate = function (fn, msg) {\n        // Allow for deprecating things in the process of starting up.\n        if (isUndefined(global.process)) {\n          return function () {\n            return exports.deprecate(fn, msg).apply(this, arguments);\n          };\n        }\n\n        if (process.noDeprecation === true) {\n          return fn;\n        }\n\n        var warned = false;\n\n        function deprecated() {\n          if (!warned) {\n            if (process.throwDeprecation) {\n              throw new Error(msg);\n            } else if (process.traceDeprecation) {\n              console.trace(msg);\n            } else {\n              console.error(msg);\n            }\n\n            warned = true;\n          }\n\n          return fn.apply(this, arguments);\n        }\n\n        return deprecated;\n      };\n\n      var debugs = {};\n      var debugEnviron;\n\n      exports.debuglog = function (set) {\n        if (isUndefined(debugEnviron)) debugEnviron = process.env.NODE_DEBUG || '';\n        set = set.toUpperCase();\n\n        if (!debugs[set]) {\n          if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n            var pid = process.pid;\n\n            debugs[set] = function () {\n              var msg = exports.format.apply(exports, arguments);\n              console.error('%s %d: %s', set, pid, msg);\n            };\n          } else {\n            debugs[set] = function () {};\n          }\n        }\n\n        return debugs[set];\n      };\n      /**\n       * Echos the value of a value. Trys to print the value out\n       * in the best way possible given the different types.\n       *\n       * @param {Object} obj The object to print out.\n       * @param {Object} opts Optional options object that alters the output.\n       */\n\n      /* legacy: obj, showHidden, depth, colors*/\n\n\n      function inspect(obj, opts) {\n        // default options\n        var ctx = {\n          seen: [],\n          stylize: stylizeNoColor\n        }; // legacy...\n\n        if (arguments.length >= 3) ctx.depth = arguments[2];\n        if (arguments.length >= 4) ctx.colors = arguments[3];\n\n        if (isBoolean(opts)) {\n          // legacy...\n          ctx.showHidden = opts;\n        } else if (opts) {\n          // got an \"options\" object\n          exports._extend(ctx, opts);\n        } // set default options\n\n\n        if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n        if (isUndefined(ctx.depth)) ctx.depth = 2;\n        if (isUndefined(ctx.colors)) ctx.colors = false;\n        if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n        if (ctx.colors) ctx.stylize = stylizeWithColor;\n        return formatValue(ctx, obj, ctx.depth);\n      }\n\n      exports.inspect = inspect; // http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\n\n      inspect.colors = {\n        'bold': [1, 22],\n        'italic': [3, 23],\n        'underline': [4, 24],\n        'inverse': [7, 27],\n        'white': [37, 39],\n        'grey': [90, 39],\n        'black': [30, 39],\n        'blue': [34, 39],\n        'cyan': [36, 39],\n        'green': [32, 39],\n        'magenta': [35, 39],\n        'red': [31, 39],\n        'yellow': [33, 39]\n      }; // Don't use 'blue' not visible on cmd.exe\n\n      inspect.styles = {\n        'special': 'cyan',\n        'number': 'yellow',\n        'boolean': 'yellow',\n        'undefined': 'grey',\n        'null': 'bold',\n        'string': 'green',\n        'date': 'magenta',\n        // \"name\": intentionally not styling\n        'regexp': 'red'\n      };\n\n      function stylizeWithColor(str, styleType) {\n        var style = inspect.styles[styleType];\n\n        if (style) {\n          return '\\u001b[' + inspect.colors[style][0] + 'm' + str + '\\u001b[' + inspect.colors[style][1] + 'm';\n        } else {\n          return str;\n        }\n      }\n\n      function stylizeNoColor(str, styleType) {\n        return str;\n      }\n\n      function arrayToHash(array) {\n        var hash = {};\n        array.forEach(function (val, idx) {\n          hash[val] = true;\n        });\n        return hash;\n      }\n\n      function formatValue(ctx, value, recurseTimes) {\n        // Provide a hook for user-specified inspect functions.\n        // Check that value is an object with an inspect function on it\n        if (ctx.customInspect && value && isFunction(value.inspect) && // Filter out the util module, it's inspect function is special\n        value.inspect !== exports.inspect && // Also filter out any prototype objects using the circular check.\n        !(value.constructor && value.constructor.prototype === value)) {\n          var ret = value.inspect(recurseTimes, ctx);\n\n          if (!isString(ret)) {\n            ret = formatValue(ctx, ret, recurseTimes);\n          }\n\n          return ret;\n        } // Primitive types cannot have properties\n\n\n        var primitive = formatPrimitive(ctx, value);\n\n        if (primitive) {\n          return primitive;\n        } // Look up the keys of the object.\n\n\n        var keys = Object.keys(value);\n        var visibleKeys = arrayToHash(keys);\n\n        if (ctx.showHidden) {\n          keys = Object.getOwnPropertyNames(value);\n        } // IE doesn't make error fields non-enumerable\n        // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n\n\n        if (isError(value) && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n          return formatError(value);\n        } // Some type of object without properties can be shortcutted.\n\n\n        if (keys.length === 0) {\n          if (isFunction(value)) {\n            var name = value.name ? ': ' + value.name : '';\n            return ctx.stylize('[Function' + name + ']', 'special');\n          }\n\n          if (isRegExp(value)) {\n            return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n          }\n\n          if (isDate(value)) {\n            return ctx.stylize(Date.prototype.toString.call(value), 'date');\n          }\n\n          if (isError(value)) {\n            return formatError(value);\n          }\n        }\n\n        var base = '',\n            array = false,\n            braces = ['{', '}']; // Make Array say that they are Array\n\n        if (isArray(value)) {\n          array = true;\n          braces = ['[', ']'];\n        } // Make functions say that they are functions\n\n\n        if (isFunction(value)) {\n          var n = value.name ? ': ' + value.name : '';\n          base = ' [Function' + n + ']';\n        } // Make RegExps say that they are RegExps\n\n\n        if (isRegExp(value)) {\n          base = ' ' + RegExp.prototype.toString.call(value);\n        } // Make dates with properties first say the date\n\n\n        if (isDate(value)) {\n          base = ' ' + Date.prototype.toUTCString.call(value);\n        } // Make error with message first say the error\n\n\n        if (isError(value)) {\n          base = ' ' + formatError(value);\n        }\n\n        if (keys.length === 0 && (!array || value.length == 0)) {\n          return braces[0] + base + braces[1];\n        }\n\n        if (recurseTimes < 0) {\n          if (isRegExp(value)) {\n            return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n          } else {\n            return ctx.stylize('[Object]', 'special');\n          }\n        }\n\n        ctx.seen.push(value);\n        var output;\n\n        if (array) {\n          output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n        } else {\n          output = keys.map(function (key) {\n            return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n          });\n        }\n\n        ctx.seen.pop();\n        return reduceToSingleString(output, base, braces);\n      }\n\n      function formatPrimitive(ctx, value) {\n        if (isUndefined(value)) return ctx.stylize('undefined', 'undefined');\n\n        if (isString(value)) {\n          var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '').replace(/'/g, \"\\\\'\").replace(/\\\\\"/g, '\"') + '\\'';\n          return ctx.stylize(simple, 'string');\n        }\n\n        if (isNumber(value)) return ctx.stylize('' + value, 'number');\n        if (isBoolean(value)) return ctx.stylize('' + value, 'boolean'); // For some reason typeof null is \"object\", so special case here.\n\n        if (isNull(value)) return ctx.stylize('null', 'null');\n      }\n\n      function formatError(value) {\n        return '[' + Error.prototype.toString.call(value) + ']';\n      }\n\n      function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n        var output = [];\n\n        for (var i = 0, l = value.length; i < l; ++i) {\n          if (hasOwnProperty(value, String(i))) {\n            output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, String(i), true));\n          } else {\n            output.push('');\n          }\n        }\n\n        keys.forEach(function (key) {\n          if (!key.match(/^\\d+$/)) {\n            output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, key, true));\n          }\n        });\n        return output;\n      }\n\n      function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n        var name, str, desc;\n        desc = Object.getOwnPropertyDescriptor(value, key) || {\n          value: value[key]\n        };\n\n        if (desc.get) {\n          if (desc.set) {\n            str = ctx.stylize('[Getter/Setter]', 'special');\n          } else {\n            str = ctx.stylize('[Getter]', 'special');\n          }\n        } else {\n          if (desc.set) {\n            str = ctx.stylize('[Setter]', 'special');\n          }\n        }\n\n        if (!hasOwnProperty(visibleKeys, key)) {\n          name = '[' + key + ']';\n        }\n\n        if (!str) {\n          if (ctx.seen.indexOf(desc.value) < 0) {\n            if (isNull(recurseTimes)) {\n              str = formatValue(ctx, desc.value, null);\n            } else {\n              str = formatValue(ctx, desc.value, recurseTimes - 1);\n            }\n\n            if (str.indexOf('\\n') > -1) {\n              if (array) {\n                str = str.split('\\n').map(function (line) {\n                  return '  ' + line;\n                }).join('\\n').substr(2);\n              } else {\n                str = '\\n' + str.split('\\n').map(function (line) {\n                  return '   ' + line;\n                }).join('\\n');\n              }\n            }\n          } else {\n            str = ctx.stylize('[Circular]', 'special');\n          }\n        }\n\n        if (isUndefined(name)) {\n          if (array && key.match(/^\\d+$/)) {\n            return str;\n          }\n\n          name = JSON.stringify('' + key);\n\n          if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n            name = name.substr(1, name.length - 2);\n            name = ctx.stylize(name, 'name');\n          } else {\n            name = name.replace(/'/g, \"\\\\'\").replace(/\\\\\"/g, '\"').replace(/(^\"|\"$)/g, \"'\");\n            name = ctx.stylize(name, 'string');\n          }\n        }\n\n        return name + ': ' + str;\n      }\n\n      function reduceToSingleString(output, base, braces) {\n        var numLinesEst = 0;\n        var length = output.reduce(function (prev, cur) {\n          numLinesEst++;\n          if (cur.indexOf('\\n') >= 0) numLinesEst++;\n          return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n        }, 0);\n\n        if (length > 60) {\n          return braces[0] + (base === '' ? '' : base + '\\n ') + ' ' + output.join(',\\n  ') + ' ' + braces[1];\n        }\n\n        return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n      } // NOTE: These type checking functions intentionally don't use `instanceof`\n      // because it is fragile and can be easily faked with `Object.create()`.\n\n\n      function isArray(ar) {\n        return Array.isArray(ar);\n      }\n\n      exports.isArray = isArray;\n\n      function isBoolean(arg) {\n        return typeof arg === 'boolean';\n      }\n\n      exports.isBoolean = isBoolean;\n\n      function isNull(arg) {\n        return arg === null;\n      }\n\n      exports.isNull = isNull;\n\n      function isNullOrUndefined(arg) {\n        return arg == null;\n      }\n\n      exports.isNullOrUndefined = isNullOrUndefined;\n\n      function isNumber(arg) {\n        return typeof arg === 'number';\n      }\n\n      exports.isNumber = isNumber;\n\n      function isString(arg) {\n        return typeof arg === 'string';\n      }\n\n      exports.isString = isString;\n\n      function isSymbol(arg) {\n        return typeof arg === 'symbol';\n      }\n\n      exports.isSymbol = isSymbol;\n\n      function isUndefined(arg) {\n        return arg === void 0;\n      }\n\n      exports.isUndefined = isUndefined;\n\n      function isRegExp(re) {\n        return isObject(re) && objectToString(re) === '[object RegExp]';\n      }\n\n      exports.isRegExp = isRegExp;\n\n      function isObject(arg) {\n        return typeof arg === 'object' && arg !== null;\n      }\n\n      exports.isObject = isObject;\n\n      function isDate(d) {\n        return isObject(d) && objectToString(d) === '[object Date]';\n      }\n\n      exports.isDate = isDate;\n\n      function isError(e) {\n        return isObject(e) && (objectToString(e) === '[object Error]' || e instanceof Error);\n      }\n\n      exports.isError = isError;\n\n      function isFunction(arg) {\n        return typeof arg === 'function';\n      }\n\n      exports.isFunction = isFunction;\n\n      function isPrimitive(arg) {\n        return arg === null || typeof arg === 'boolean' || typeof arg === 'number' || typeof arg === 'string' || typeof arg === 'symbol' || // ES6 symbol\n        typeof arg === 'undefined';\n      }\n\n      exports.isPrimitive = isPrimitive;\n      exports.isBuffer = require('./support/isBuffer');\n\n      function objectToString(o) {\n        return Object.prototype.toString.call(o);\n      }\n\n      function pad(n) {\n        return n < 10 ? '0' + n.toString(10) : n.toString(10);\n      }\n\n      var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']; // 26 Feb 16:19:34\n\n      function timestamp() {\n        var d = new Date();\n        var time = [pad(d.getHours()), pad(d.getMinutes()), pad(d.getSeconds())].join(':');\n        return [d.getDate(), months[d.getMonth()], time].join(' ');\n      } // log is just a thin wrapper to console.log that prepends a timestamp\n\n\n      exports.log = function () {\n        console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n      };\n      /**\n       * Inherit the prototype methods from one constructor into another.\n       *\n       * The Function.prototype.inherits from lang.js rewritten as a standalone\n       * function (not on Function.prototype). NOTE: If this file is to be loaded\n       * during bootstrapping this function needs to be rewritten using some native\n       * functions as prototype setup using normal JavaScript does not work as\n       * expected during bootstrapping (see mirror.js in r114903).\n       *\n       * @param {function} ctor Constructor function which needs to inherit the\n       *     prototype.\n       * @param {function} superCtor Constructor function to inherit prototype from.\n       */\n\n\n      exports.inherits = require('inherits');\n\n      exports._extend = function (origin, add) {\n        // Don't do anything if add isn't an object\n        if (!add || !isObject(add)) return origin;\n        var keys = Object.keys(add);\n        var i = keys.length;\n\n        while (i--) {\n          origin[keys[i]] = add[keys[i]];\n        }\n\n        return origin;\n      };\n\n      function hasOwnProperty(obj, prop) {\n        return Object.prototype.hasOwnProperty.call(obj, prop);\n      }\n    }).call(this, require('_process'), typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {});\n  }, {\n    \"./support/isBuffer\": 96,\n    \"_process\": 85,\n    \"inherits\": 95\n  }],\n  98: [function (require, module, exports) {\n    var v1 = require('./v1');\n\n    var v4 = require('./v4');\n\n    var uuid = v4;\n    uuid.v1 = v1;\n    uuid.v4 = v4;\n    module.exports = uuid;\n  }, {\n    \"./v1\": 101,\n    \"./v4\": 102\n  }],\n  99: [function (require, module, exports) {\n    /**\n     * Convert array of 16 byte values to UUID string format of the form:\n     * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n     */\n    var byteToHex = [];\n\n    for (var i = 0; i < 256; ++i) {\n      byteToHex[i] = (i + 0x100).toString(16).substr(1);\n    }\n\n    function bytesToUuid(buf, offset) {\n      var i = offset || 0;\n      var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n      return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n    }\n\n    module.exports = bytesToUuid;\n  }, {}],\n  100: [function (require, module, exports) {\n    // Unique ID creation requires a high quality random # generator.  In the\n    // browser this is a little complicated due to unknown quality of Math.random()\n    // and inconsistent support for the `crypto` API.  We do the best we can via\n    // feature-detection\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n    // implementation. Also, find the complete implementation of crypto on IE11.\n    var getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (getRandomValues) {\n      // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n      var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n      module.exports = function whatwgRNG() {\n        getRandomValues(rnds8);\n        return rnds8;\n      };\n    } else {\n      // Math.random()-based (RNG)\n      //\n      // If all else fails, use Math.random().  It's fast, but is of unspecified\n      // quality.\n      var rnds = new Array(16);\n\n      module.exports = function mathRNG() {\n        for (var i = 0, r; i < 16; i++) {\n          if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n          rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n        }\n\n        return rnds;\n      };\n    }\n  }, {}],\n  101: [function (require, module, exports) {\n    var rng = require('./lib/rng');\n\n    var bytesToUuid = require('./lib/bytesToUuid'); // **`v1()` - Generate time-based UUID**\n    //\n    // Inspired by https://github.com/LiosK/UUID.js\n    // and http://docs.python.org/library/uuid.html\n\n\n    var _nodeId;\n\n    var _clockseq; // Previous uuid creation time\n\n\n    var _lastMSecs = 0;\n    var _lastNSecs = 0; // See https://github.com/broofa/node-uuid for API details\n\n    function v1(options, buf, offset) {\n      var i = buf && offset || 0;\n      var b = buf || [];\n      options = options || {};\n      var node = options.node || _nodeId;\n      var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n      // specified.  We do this lazily to minimize issues related to insufficient\n      // system entropy.  See #189\n\n      if (node == null || clockseq == null) {\n        var seedBytes = rng();\n\n        if (node == null) {\n          // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n          node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n        }\n\n        if (clockseq == null) {\n          // Per 4.2.2, randomize (14 bit) clockseq\n          clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n        }\n      } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n      // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n      // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n      // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n      var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n      // cycle to simulate higher resolution clock\n\n      var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n      var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n      if (dt < 0 && options.clockseq === undefined) {\n        clockseq = clockseq + 1 & 0x3fff;\n      } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n      // time interval\n\n\n      if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n        nsecs = 0;\n      } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n      if (nsecs >= 10000) {\n        throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n      }\n\n      _lastMSecs = msecs;\n      _lastNSecs = nsecs;\n      _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n      msecs += 12219292800000; // `time_low`\n\n      var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n      b[i++] = tl >>> 24 & 0xff;\n      b[i++] = tl >>> 16 & 0xff;\n      b[i++] = tl >>> 8 & 0xff;\n      b[i++] = tl & 0xff; // `time_mid`\n\n      var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n      b[i++] = tmh >>> 8 & 0xff;\n      b[i++] = tmh & 0xff; // `time_high_and_version`\n\n      b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n      b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n      b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n      b[i++] = clockseq & 0xff; // `node`\n\n      for (var n = 0; n < 6; ++n) {\n        b[i + n] = node[n];\n      }\n\n      return buf ? buf : bytesToUuid(b);\n    }\n\n    module.exports = v1;\n  }, {\n    \"./lib/bytesToUuid\": 99,\n    \"./lib/rng\": 100\n  }],\n  102: [function (require, module, exports) {\n    var rng = require('./lib/rng');\n\n    var bytesToUuid = require('./lib/bytesToUuid');\n\n    function v4(options, buf, offset) {\n      var i = buf && offset || 0;\n\n      if (typeof options == 'string') {\n        buf = options === 'binary' ? new Array(16) : null;\n        options = null;\n      }\n\n      options = options || {};\n      var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n      rnds[6] = rnds[6] & 0x0f | 0x40;\n      rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n      if (buf) {\n        for (var ii = 0; ii < 16; ++ii) {\n          buf[i + ii] = rnds[ii];\n        }\n      }\n\n      return buf || bytesToUuid(rnds);\n    }\n\n    module.exports = v4;\n  }, {\n    \"./lib/bytesToUuid\": 99,\n    \"./lib/rng\": 100\n  }],\n  103: [function (require, module, exports) {\n    \"use strict\";\n\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n\n    var LRU_1 = require(\"./utils/LRU\");\n\n    var CACHE_SIZE = 1000;\n    /**\n     * Inspired node-lru-cache[https://github.com/isaacs/node-lru-cache]\n     */\n\n    var EndpointCache =\n    /** @class */\n    function () {\n      function EndpointCache(maxSize) {\n        if (maxSize === void 0) {\n          maxSize = CACHE_SIZE;\n        }\n\n        this.maxSize = maxSize;\n        this.cache = new LRU_1.LRUCache(maxSize);\n      }\n\n      ;\n      Object.defineProperty(EndpointCache.prototype, \"size\", {\n        get: function () {\n          return this.cache.length;\n        },\n        enumerable: true,\n        configurable: true\n      });\n\n      EndpointCache.prototype.put = function (key, value) {\n        var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n        var endpointRecord = this.populateValue(value);\n        this.cache.put(keyString, endpointRecord);\n      };\n\n      EndpointCache.prototype.get = function (key) {\n        var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n        var now = Date.now();\n        var records = this.cache.get(keyString);\n\n        if (records) {\n          for (var i = 0; i < records.length; i++) {\n            var record = records[i];\n\n            if (record.Expire < now) {\n              this.cache.remove(keyString);\n              return undefined;\n            }\n          }\n        }\n\n        return records;\n      };\n\n      EndpointCache.getKeyString = function (key) {\n        var identifiers = [];\n        var identifierNames = Object.keys(key).sort();\n\n        for (var i = 0; i < identifierNames.length; i++) {\n          var identifierName = identifierNames[i];\n          if (key[identifierName] === undefined) continue;\n          identifiers.push(key[identifierName]);\n        }\n\n        return identifiers.join(' ');\n      };\n\n      EndpointCache.prototype.populateValue = function (endpoints) {\n        var now = Date.now();\n        return endpoints.map(function (endpoint) {\n          return {\n            Address: endpoint.Address || '',\n            Expire: now + (endpoint.CachePeriodInMinutes || 1) * 60 * 1000\n          };\n        });\n      };\n\n      EndpointCache.prototype.empty = function () {\n        this.cache.empty();\n      };\n\n      EndpointCache.prototype.remove = function (key) {\n        var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n        this.cache.remove(keyString);\n      };\n\n      return EndpointCache;\n    }();\n\n    exports.EndpointCache = EndpointCache;\n  }, {\n    \"./utils/LRU\": 104\n  }],\n  104: [function (require, module, exports) {\n    \"use strict\";\n\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n\n    var LinkedListNode =\n    /** @class */\n    function () {\n      function LinkedListNode(key, value) {\n        this.key = key;\n        this.value = value;\n      }\n\n      return LinkedListNode;\n    }();\n\n    var LRUCache =\n    /** @class */\n    function () {\n      function LRUCache(size) {\n        this.nodeMap = {};\n        this.size = 0;\n\n        if (typeof size !== 'number' || size < 1) {\n          throw new Error('Cache size can only be positive number');\n        }\n\n        this.sizeLimit = size;\n      }\n\n      Object.defineProperty(LRUCache.prototype, \"length\", {\n        get: function () {\n          return this.size;\n        },\n        enumerable: true,\n        configurable: true\n      });\n\n      LRUCache.prototype.prependToList = function (node) {\n        if (!this.headerNode) {\n          this.tailNode = node;\n        } else {\n          this.headerNode.prev = node;\n          node.next = this.headerNode;\n        }\n\n        this.headerNode = node;\n        this.size++;\n      };\n\n      LRUCache.prototype.removeFromTail = function () {\n        if (!this.tailNode) {\n          return undefined;\n        }\n\n        var node = this.tailNode;\n        var prevNode = node.prev;\n\n        if (prevNode) {\n          prevNode.next = undefined;\n        }\n\n        node.prev = undefined;\n        this.tailNode = prevNode;\n        this.size--;\n        return node;\n      };\n\n      LRUCache.prototype.detachFromList = function (node) {\n        if (this.headerNode === node) {\n          this.headerNode = node.next;\n        }\n\n        if (this.tailNode === node) {\n          this.tailNode = node.prev;\n        }\n\n        if (node.prev) {\n          node.prev.next = node.next;\n        }\n\n        if (node.next) {\n          node.next.prev = node.prev;\n        }\n\n        node.next = undefined;\n        node.prev = undefined;\n        this.size--;\n      };\n\n      LRUCache.prototype.get = function (key) {\n        if (this.nodeMap[key]) {\n          var node = this.nodeMap[key];\n          this.detachFromList(node);\n          this.prependToList(node);\n          return node.value;\n        }\n      };\n\n      LRUCache.prototype.remove = function (key) {\n        if (this.nodeMap[key]) {\n          var node = this.nodeMap[key];\n          this.detachFromList(node);\n          delete this.nodeMap[key];\n        }\n      };\n\n      LRUCache.prototype.put = function (key, value) {\n        if (this.nodeMap[key]) {\n          this.remove(key);\n        } else if (this.size === this.sizeLimit) {\n          var tailNode = this.removeFromTail();\n          var key_1 = tailNode.key;\n          delete this.nodeMap[key_1];\n        }\n\n        var newNode = new LinkedListNode(key, value);\n        this.nodeMap[key] = newNode;\n        this.prependToList(newNode);\n      };\n\n      LRUCache.prototype.empty = function () {\n        var keys = Object.keys(this.nodeMap);\n\n        for (var i = 0; i < keys.length; i++) {\n          var key = keys[i];\n          var node = this.nodeMap[key];\n          this.detachFromList(node);\n          delete this.nodeMap[key];\n        }\n      };\n\n      return LRUCache;\n    }();\n\n    exports.LRUCache = LRUCache;\n  }, {}],\n  105: [function (require, module, exports) {\n    // AWS SDK for JavaScript v2.553.0\n    // Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n    // License at https://sdk.amazonaws.com/js/BUNDLE_LICENSE.txt\n    require('./browser_loader');\n\n    var AWS = require('./core');\n\n    if (typeof window !== 'undefined') window.AWS = AWS;\n\n    if (typeof module !== 'undefined') {\n      /**\n       * @api private\n       */\n      module.exports = AWS;\n    }\n\n    if (typeof self !== 'undefined') self.AWS = AWS;\n    /**\n     * @private\n     * DO NOT REMOVE\n     * browser builder will strip out this line if services are supplied on the command line.\n     */\n\n    if (!Object.prototype.hasOwnProperty.call(AWS, 'Connect')) {\n      AWS.apiLoader.services['connect'] = {};\n      AWS.Connect = AWS.Service.defineService('connect', ['2017-02-15']);\n    }\n\n    AWS.apiLoader.services['connect']['2017-02-15'] = require('../apis/connect-2017-02-15.min');\n\n    if (!Object.prototype.hasOwnProperty.call(AWS, 'STS')) {\n      AWS.apiLoader.services['sts'] = {};\n      AWS.STS = AWS.Service.defineService('sts', ['2011-06-15']);\n\n      require('./services/sts');\n    }\n\n    AWS.apiLoader.services['sts']['2011-06-15'] = require('../apis/sts-2011-06-15.min');\n  }, {\n    \"../apis/connect-2017-02-15.min\": 3,\n    \"../apis/sts-2011-06-15.min\": 5,\n    \"./browser_loader\": 16,\n    \"./core\": 18,\n    \"./services/sts\": 61\n  }]\n}, {}, [105]);\n/*! @license sprintf.js | Copyright (c) 2007-2013 Alexandru Marasteanu <hello at alexei dot ro> | 3 clause BSD license */\n\n(function () {\n  var ctx = this;\n\n  var sprintf = function () {\n    if (!sprintf.cache.hasOwnProperty(arguments[0])) {\n      sprintf.cache[arguments[0]] = sprintf.parse(arguments[0]);\n    }\n\n    return sprintf.format.call(null, sprintf.cache[arguments[0]], arguments);\n  };\n\n  sprintf.format = function (parse_tree, argv) {\n    var cursor = 1,\n        tree_length = parse_tree.length,\n        node_type = '',\n        arg,\n        output = [],\n        i,\n        k,\n        match,\n        pad,\n        pad_character,\n        pad_length;\n\n    for (i = 0; i < tree_length; i++) {\n      node_type = get_type(parse_tree[i]);\n\n      if (node_type === 'string') {\n        output.push(parse_tree[i]);\n      } else if (node_type === 'array') {\n        match = parse_tree[i]; // convenience purposes only\n\n        if (match[2]) {\n          // keyword argument\n          arg = argv[cursor];\n\n          for (k = 0; k < match[2].length; k++) {\n            if (!arg.hasOwnProperty(match[2][k])) {\n              throw sprintf('[sprintf] property \"%s\" does not exist', match[2][k]);\n            }\n\n            arg = arg[match[2][k]];\n          }\n        } else if (match[1]) {\n          // positional argument (explicit)\n          arg = argv[match[1]];\n        } else {\n          // positional argument (implicit)\n          arg = argv[cursor++];\n        }\n\n        if (/[^s]/.test(match[8]) && get_type(arg) != 'number') {\n          throw sprintf('[sprintf] expecting number but found %s', get_type(arg));\n        }\n\n        switch (match[8]) {\n          case 'b':\n            arg = arg.toString(2);\n            break;\n\n          case 'c':\n            arg = String.fromCharCode(arg);\n            break;\n\n          case 'd':\n            arg = parseInt(arg, 10);\n            break;\n\n          case 'e':\n            arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential();\n            break;\n\n          case 'f':\n            arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg);\n            break;\n\n          case 'o':\n            arg = arg.toString(8);\n            break;\n\n          case 's':\n            arg = (arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg;\n            break;\n\n          case 'u':\n            arg = arg >>> 0;\n            break;\n\n          case 'x':\n            arg = arg.toString(16);\n            break;\n\n          case 'X':\n            arg = arg.toString(16).toUpperCase();\n            break;\n        }\n\n        arg = /[def]/.test(match[8]) && match[3] && arg >= 0 ? '+' + arg : arg;\n        pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\n        pad_length = match[6] - String(arg).length;\n        pad = match[6] ? str_repeat(pad_character, pad_length) : '';\n        output.push(match[5] ? arg + pad : pad + arg);\n      }\n    }\n\n    return output.join('');\n  };\n\n  sprintf.cache = {};\n\n  sprintf.parse = function (fmt) {\n    var _fmt = fmt,\n        match = [],\n        parse_tree = [],\n        arg_names = 0;\n\n    while (_fmt) {\n      if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\n        parse_tree.push(match[0]);\n      } else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\n        parse_tree.push('%');\n      } else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\n        if (match[2]) {\n          arg_names |= 1;\n          var field_list = [],\n              replacement_field = match[2],\n              field_match = [];\n\n          if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n            field_list.push(field_match[1]);\n\n            while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\n              if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                field_list.push(field_match[1]);\n              } else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\n                field_list.push(field_match[1]);\n              } else {\n                throw '[sprintf] huh?';\n              }\n            }\n          } else {\n            throw '[sprintf] huh?';\n          }\n\n          match[2] = field_list;\n        } else {\n          arg_names |= 2;\n        }\n\n        if (arg_names === 3) {\n          throw '[sprintf] mixing positional and named placeholders is not (yet) supported';\n        }\n\n        parse_tree.push(match);\n      } else {\n        throw '[sprintf] huh?';\n      }\n\n      _fmt = _fmt.substring(match[0].length);\n    }\n\n    return parse_tree;\n  };\n\n  var vsprintf = function (fmt, argv, _argv) {\n    _argv = argv.slice(0);\n\n    _argv.splice(0, 0, fmt);\n\n    return sprintf.apply(null, _argv);\n  };\n  /**\n   * helpers\n   */\n\n\n  function get_type(variable) {\n    return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();\n  }\n\n  function str_repeat(input, multiplier) {\n    for (var output = []; multiplier > 0; output[--multiplier] = input) {\n      /* do nothing */\n    }\n\n    return output.join('');\n  }\n  /**\n   * export to either browser or node.js\n   */\n\n\n  ctx.sprintf = sprintf;\n  ctx.vsprintf = vsprintf;\n})();\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect; // How frequently softphone logs should be collected and reported to shared worker.\n\n  var SOFTPHONE_LOG_REPORT_INTERVAL_MILLIS = 5000; // How frequently logs should be collected and sent downstream\n\n  var LOGS_REPORT_INTERVAL_MILLIS = 5000; // The default log roll interval (30min)\n\n  var DEFAULT_LOG_ROLL_INTERVAL = 1800000;\n  /**\n   * An enumeration of common logging levels.\n   */\n\n  var LogLevel = {\n    TEST: \"TEST\",\n    TRACE: \"TRACE\",\n    DEBUG: \"DEBUG\",\n    INFO: \"INFO\",\n    LOG: \"LOG\",\n    WARN: \"WARN\",\n    ERROR: \"ERROR\",\n    CRITICAL: \"CRITICAL\"\n  };\n  /**\n   * An enumeration of common logging components.\n   */\n\n  var LogComponent = {\n    CCP: \"ccp\",\n    SOFTPHONE: \"softphone\",\n    CHAT: \"chat\",\n    TASK: \"task\"\n  };\n  /**\n   * The numeric order of the logging levels above.\n   * They are spaced to allow the addition of other log\n   * levels at a later time.\n   */\n\n  var LogLevelOrder = {\n    TEST: 0,\n    TRACE: 10,\n    DEBUG: 20,\n    INFO: 30,\n    LOG: 40,\n    WARN: 50,\n    ERROR: 100,\n    CRITICAL: 200\n  };\n  /**\n   * A map from log level to console logger function.\n   */\n\n  var CONSOLE_LOGGER_MAP = {\n    TRACE: function (text) {\n      console.info(text);\n    },\n    DEBUG: function (text) {\n      console.info(text);\n    },\n    INFO: function (text) {\n      console.info(text);\n    },\n    LOG: function (text) {\n      console.log(text);\n    },\n    TEST: function (text) {\n      console.log(text);\n    },\n    WARN: function (text) {\n      console.warn(text);\n    },\n    ERROR: function (text) {\n      console.error(text);\n    },\n    CRITICAL: function (text) {\n      console.error(text);\n    }\n  };\n  /**\n  * Checks if it is a valid log component enum\n  */\n\n  var isValidLogComponent = function (component) {\n    return Object.values(LogComponent).indexOf(component) !== -1;\n  };\n  /**\n  * Extract the custom arguments as required by the logger\n  */\n\n\n  var extractLoggerArgs = function (loggerArgs) {\n    var args = Array.prototype.slice.call(loggerArgs, 0);\n    var firstArg = args.shift();\n    var format;\n    var component;\n\n    if (isValidLogComponent(firstArg)) {\n      component = firstArg;\n      format = args.shift();\n    } else {\n      //default to CCP component\n      format = firstArg;\n      component = LogComponent.CCP;\n    }\n\n    return {\n      format: format,\n      component: component,\n      args: args\n    };\n  };\n  /**\n   * A log entry.\n   *\n   * @param component The logging component.\n   * @param level The log level of this log entry.\n   * @param text The text contained in the log entry.\n   * @param loggerId The root logger id.\n   *\n   * Log entries are aware of their timestamp, order,\n   * and can contain objects and exception stack traces.\n   */\n\n\n  var LogEntry = function (component, level, text, loggerId) {\n    this.component = component;\n    this.level = level;\n    this.text = text;\n    this.time = new Date();\n    this.exception = null;\n    this.objects = [];\n    this.line = 0;\n    this.loggerId = loggerId;\n  };\n\n  LogEntry.fromObject = function (obj) {\n    var entry = new LogEntry(LogComponent.CCP, obj.level, obj.text, obj.loggerId); // Required to check for Date objects sent across frame boundaries\n\n    if (Object.prototype.toString.call(obj.time) === '[object Date]') {\n      entry.time = new Date(obj.time.getTime());\n    } else if (typeof obj.time === 'number') {\n      entry.time = new Date(obj.time);\n    } else if (typeof obj.time === 'string') {\n      entry.time = Date.parse(obj.time);\n    } else {\n      entry.time = new Date();\n    }\n\n    entry.exception = obj.exception;\n    entry.objects = obj.objects;\n    return entry;\n  };\n  /**\n   * Private method to remove sensitive info from client log\n   */\n\n\n  var redactSensitiveInfo = function (data) {\n    var regex = /AuthToken.*\\=/g;\n\n    if (data && typeof data === 'object') {\n      Object.keys(data).forEach(function (key) {\n        if (typeof data[key] === 'object') {\n          redactSensitiveInfo(data[key]);\n        }\n\n        if (typeof data[key] === 'string' && (key === \"url\" || key === \"text\")) {\n          data[key] = data[key].replace(regex, \"[redacted]\");\n        }\n      });\n    }\n  };\n  /**\n   * Pulls the type, message, and stack trace\n   * out of the given exception for JSON serialization.\n   */\n\n\n  var LoggedException = function (e) {\n    this.type = e instanceof Error ? e.name : e.code || Object.prototype.toString.call(e);\n    this.message = e.message;\n    this.stack = e.stack ? e.stack.split('\\n') : [];\n  };\n  /**\n   * Minimally stringify this log entry for printing\n   * to the console.\n   */\n\n\n  LogEntry.prototype.toString = function () {\n    return connect.sprintf(\"[%s] [%s]: %s\", this.getTime() && this.getTime().toISOString ? this.getTime().toISOString() : \"???\", this.getLevel(), this.getText());\n  };\n  /**\n   * Get the log entry timestamp.\n   */\n\n\n  LogEntry.prototype.getTime = function () {\n    return this.time;\n  };\n  /**\n   * Get the level of the log entry.\n   */\n\n\n  LogEntry.prototype.getLevel = function () {\n    return this.level;\n  };\n  /**\n   * Get the log entry text.\n   */\n\n\n  LogEntry.prototype.getText = function () {\n    return this.text;\n  };\n  /**\n   * Get the log entry component.\n   */\n\n\n  LogEntry.prototype.getComponent = function () {\n    return this.component;\n  };\n  /**\n   * Add an exception stack trace to this log entry.\n   * A log entry may contain only one exception stack trace.\n   */\n\n\n  LogEntry.prototype.withException = function (e) {\n    this.exception = new LoggedException(e);\n    return this;\n  };\n  /**\n   * Add an arbitrary object to the log entry.  A log entry\n   * may contain any number of objects.\n   */\n\n\n  LogEntry.prototype.withObject = function (obj) {\n    var copiedObj = connect.deepcopy(obj);\n    redactSensitiveInfo(copiedObj);\n    this.objects.push(copiedObj);\n    return this;\n  };\n  /**\n   * Indicate that this log entry should be sent to the server\n   * NOTE: This should be used for internal logs only\n   */\n\n\n  LogEntry.prototype.sendInternalLogToServer = function () {\n    connect.getLog()._serverBoundInternalLogs.push(this);\n\n    return this;\n  };\n  /**\n   * The logger instance.\n   */\n\n\n  var Logger = function () {\n    this._logs = [];\n    this._rolledLogs = [];\n    this._logsToPush = [];\n    this._serverBoundInternalLogs = [];\n    this._echoLevel = LogLevelOrder.INFO;\n    this._logLevel = LogLevelOrder.INFO;\n    this._lineCount = 0;\n    this._logRollInterval = 0;\n    this._logRollTimer = null;\n    this._loggerId = new Date().getTime() + \"-\" + Math.random().toString(36).slice(2);\n    this.setLogRollInterval(DEFAULT_LOG_ROLL_INTERVAL);\n  };\n  /**\n   * Sets the interval in milliseconds that the logs will be rotated.\n   * Logs are rotated out completely at the end of the second roll\n   * and will eventually be garbage collected.\n   */\n\n\n  Logger.prototype.setLogRollInterval = function (interval) {\n    var self = this;\n\n    if (!this._logRollTimer || interval !== this._logRollInterval) {\n      if (this._logRollTimer) {\n        global.clearInterval(this._logRollTimer);\n      }\n\n      this._logRollInterval = interval;\n      this._logRollTimer = global.setInterval(function () {\n        this._rolledLogs = this._logs;\n        this._logs = [];\n        self.info(\"Log roll interval occurred.\");\n      }, this._logRollInterval);\n    } else {\n      this.warn(\"Logger is already set to the given interval: %d\", this._logRollInterval);\n    }\n  };\n  /**\n   * Set the log level.  This is the minimum level at which logs will\n   * be kept for later archiving.\n   */\n\n\n  Logger.prototype.setLogLevel = function (level) {\n    if (level in LogLevelOrder) {\n      this._logLevel = LogLevelOrder[level];\n    } else {\n      throw new Error(\"Unknown logging level: \" + level);\n    }\n  };\n  /**\n   * Set the echo level.  This is the minimum level at which logs will\n   * be printed to the javascript console.\n   */\n\n\n  Logger.prototype.setEchoLevel = function (level) {\n    if (level in LogLevelOrder) {\n      this._echoLevel = LogLevelOrder[level];\n    } else {\n      throw new Error(\"Unknown logging level: \" + level);\n    }\n  };\n  /**\n   * Write a particular log entry.\n   *\n   * @param level The logging level of the entry.\n   * @param text The text contents of the entry.\n   *\n   * @returns The new log entry.\n   */\n\n\n  Logger.prototype.write = function (component, level, text) {\n    var logEntry = new LogEntry(component, level, text, this.getLoggerId());\n    redactSensitiveInfo(logEntry);\n    this.addLogEntry(logEntry);\n    return logEntry;\n  };\n\n  Logger.prototype.addLogEntry = function (logEntry) {\n    this._logs.push(logEntry); //For now only send softphone logs only.\n    //TODO add CCP logs once we are sure that no sensitive data is being logged.\n\n\n    if (LogComponent.SOFTPHONE === logEntry.component) {\n      this._logsToPush.push(logEntry);\n    }\n\n    if (logEntry.level in LogLevelOrder && LogLevelOrder[logEntry.level] >= this._logLevel) {\n      if (LogLevelOrder[logEntry.level] >= this._echoLevel) {\n        CONSOLE_LOGGER_MAP[logEntry.getLevel()](logEntry.toString());\n      }\n\n      logEntry.line = this._lineCount++;\n    }\n  };\n\n  Logger.prototype.sendInternalLogEntryToServer = function (logEntry) {\n    this._serverBoundInternalLogs.push(logEntry);\n\n    if (logEntry.level in LogLevelOrder && LogLevelOrder[logEntry.level] >= this._logLevel) {\n      if (LogLevelOrder[logEntry.level] >= this._echoLevel) {\n        CONSOLE_LOGGER_MAP[logEntry.getLevel()](logEntry.toString());\n      }\n\n      logEntry.line = this._lineCount++;\n    }\n  };\n  /**\n   * Remove all objects from all log entries.\n   */\n\n\n  Logger.prototype.clearObjects = function () {\n    for (var x = 0; x < this._logs.length; x++) {\n      if (this._logs[x].objects) {\n        delete this._logs[x].objects;\n      }\n    }\n  };\n  /**\n   * Remove all exception stack traces from the log entries.\n   */\n\n\n  Logger.prototype.clearExceptions = function () {\n    for (var x = 0; x < this._logs.length; x++) {\n      if (this._logs[x].exception) {\n        delete this._logs[x].exception;\n      }\n    }\n  };\n\n  Logger.prototype.trace = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.TRACE, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n\n  Logger.prototype.debug = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.DEBUG, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n\n  Logger.prototype.info = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.INFO, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n\n  Logger.prototype.log = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.LOG, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n\n  Logger.prototype.test = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.TEST, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n\n  Logger.prototype.warn = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.WARN, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n\n  Logger.prototype.error = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.ERROR, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n\n  Logger.prototype.critical = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.ERROR, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n  /**\n   * Create a string representation of the logger contents.\n   */\n\n\n  Logger.prototype.toString = function () {\n    var lines = [];\n\n    for (var x = 0; x < this._logs.length; x++) {\n      lines.push(this._logs[x].toString());\n    }\n\n    return lines.join(\"\\n\");\n  };\n  /**\n   * Download/Archive logs to a file, \n   * By default, it returns all logs.\n   * To filter logs by the minimum log level set by setLogLevel or the default set in _logLevel, \n   * pass in filterByLogLevel to true in options\n   * \n   * @param options download options [Object|String]. \n   * - of type Object: \n   *   { logName: 'my-log-name',\n   *     filterByLogLevel: false, //download all logs\n   *   }\n   * - of type String (for backward compatibility), the file's name\n   */\n\n\n  Logger.prototype.download = function (options) {\n    var logName = 'agent-log';\n    var filterByLogLevel = false;\n\n    if (typeof options === 'object') {\n      logName = options.logName || logName;\n      filterByLogLevel = options.filterByLogLevel || filterByLogLevel;\n    } else if (typeof options === 'string') {\n      logName = options || logName;\n    }\n\n    var self = this;\n\n    var logs = this._rolledLogs.concat(this._logs);\n\n    if (filterByLogLevel) {\n      logs = logs.filter(function (entry) {\n        return LogLevelOrder[entry.level] >= self._logLevel;\n      });\n    }\n\n    var logBlob = new global.Blob([JSON.stringify(logs, undefined, 4)], ['text/plain']);\n    var downloadLink = document.createElement('a');\n    var logName = logName || 'agent-log';\n    downloadLink.href = global.URL.createObjectURL(logBlob);\n    downloadLink.download = logName + '.txt';\n    document.body.appendChild(downloadLink);\n    downloadLink.click();\n    document.body.removeChild(downloadLink);\n  };\n\n  Logger.prototype.scheduleUpstreamLogPush = function (conduit) {\n    if (!connect.upstreamLogPushScheduled) {\n      connect.upstreamLogPushScheduled = true;\n      /** Schedule pushing logs frequently to sharedworker upstream, sharedworker will report to LARS*/\n\n      global.setInterval(connect.hitch(this, this.reportMasterLogsUpStream, conduit), SOFTPHONE_LOG_REPORT_INTERVAL_MILLIS);\n    }\n  };\n\n  Logger.prototype.reportMasterLogsUpStream = function (conduit) {\n    var logsToPush = this._logsToPush.slice();\n\n    this._logsToPush = [];\n    connect.ifMaster(connect.MasterTopics.SEND_LOGS, function () {\n      if (logsToPush.length > 0) {\n        conduit.sendUpstream(connect.EventType.SEND_LOGS, logsToPush);\n      }\n    });\n  };\n\n  Logger.prototype.getLoggerId = function () {\n    return this._loggerId;\n  };\n\n  Logger.prototype.scheduleDownstreamClientSideLogsPush = function () {\n    global.setInterval(connect.hitch(this, this.pushClientSideLogsDownstream), LOGS_REPORT_INTERVAL_MILLIS);\n  };\n\n  Logger.prototype.pushClientSideLogsDownstream = function () {\n    var logs = []; // We do not send a request if we have less than 50 records so that we minimize the number of\n    // requests per second. \n    // 500 is the max we accept on the server. \n    // We chose 500 because this is the limit imposed by Firehose for a put batch request\n\n    if (this._serverBoundInternalLogs.length < 50) {\n      return;\n    } else if (this._serverBoundInternalLogs.length > 500) {\n      logs = this._serverBoundInternalLogs.splice(0, 500);\n    } else {\n      logs = this._serverBoundInternalLogs;\n      this._serverBoundInternalLogs = [];\n    }\n\n    connect.publishClientSideLogs(logs);\n  };\n\n  var DownstreamConduitLogger = function (conduit) {\n    Logger.call(this);\n    this.conduit = conduit;\n    global.setInterval(connect.hitch(this, this._pushLogsDownstream), DownstreamConduitLogger.LOG_PUSH_INTERVAL); // Disable log rolling, we will purge our own logs once they have\n    // been pushed downstream.\n\n    global.clearInterval(this._logRollTimer);\n    this._logRollTimer = null;\n  }; // How frequently logs should be collected and delivered downstream.\n\n\n  DownstreamConduitLogger.LOG_PUSH_INTERVAL = 1000;\n  DownstreamConduitLogger.prototype = Object.create(Logger.prototype);\n  DownstreamConduitLogger.prototype.constructor = DownstreamConduitLogger;\n\n  DownstreamConduitLogger.prototype.pushLogsDownstream = function (logs) {\n    var self = this;\n    logs.forEach(function (log) {\n      self.conduit.sendDownstream(connect.EventType.LOG, log);\n    });\n  };\n\n  DownstreamConduitLogger.prototype._pushLogsDownstream = function () {\n    var self = this;\n\n    this._logs.forEach(function (log) {\n      self.conduit.sendDownstream(connect.EventType.LOG, log);\n    });\n\n    this._logs = [];\n\n    for (var i = 0; i < this._serverBoundInternalLogs.length; i++) {\n      this.conduit.sendDownstream(connect.EventType.SERVER_BOUND_INTERNAL_LOG, this._serverBoundInternalLogs[i]);\n    }\n\n    this._serverBoundInternalLogs = [];\n  };\n  /** Create the singleton logger instance. */\n\n\n  connect.rootLogger = new Logger();\n  /** Fetch the singleton logger instance. */\n\n  var getLog = function () {\n    return connect.rootLogger;\n  };\n\n  connect = connect || {};\n  connect.getLog = getLog;\n  connect.LogEntry = LogEntry;\n  connect.Logger = Logger;\n  connect.LogLevel = LogLevel;\n  connect.LogComponent = LogComponent;\n  connect.DownstreamConduitLogger = DownstreamConduitLogger;\n})();\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n  var userAgent = navigator.userAgent;\n  var ONE_DAY_MILLIS = 24 * 60 * 60 * 1000;\n  var DEFAULT_POPUP_HEIGHT = 578;\n  var DEFAULT_POPUP_WIDTH = 433;\n  /**\n   * Unpollute sprintf functions from the global namespace.\n   */\n\n  connect.sprintf = global.sprintf;\n  connect.vsprintf = global.vsprintf;\n  delete global.sprintf;\n  delete global.vsprintf;\n  connect.HTTP_STATUS_CODES = {\n    SUCCESS: 200,\n    TOO_MANY_REQUESTS: 429,\n    INTERNAL_SERVER_ERROR: 500\n  };\n  connect.TRANSPORT_TYPES = {\n    CHAT_TOKEN: \"chat_token\",\n    WEB_SOCKET: \"web_socket\"\n  };\n  /**\n   * Binds the given instance object as the context for\n   * the method provided.\n   *\n   * @param scope The instance object to be set as the scope\n   *    of the function.\n   * @param method The method to be encapsulated.\n   *\n   * All other arguments, if any, are bound to the method\n   * invocation inside the closure.\n   *\n   * @return A closure encapsulating the invocation of the\n   *    method provided in context of the given instance.\n   */\n\n  connect.hitch = function () {\n    var args = Array.prototype.slice.call(arguments);\n    var scope = args.shift();\n    var method = args.shift();\n    connect.assertNotNull(scope, 'scope');\n    connect.assertNotNull(method, 'method');\n    connect.assertTrue(connect.isFunction(method), 'method must be a function');\n    return function () {\n      var closureArgs = Array.prototype.slice.call(arguments);\n      return method.apply(scope, args.concat(closureArgs));\n    };\n  };\n  /**\n   * Determine if the given value is a callable function type.\n   * Borrowed from Underscore.js.\n   */\n\n\n  connect.isFunction = function (obj) {\n    return !!(obj && obj.constructor && obj.call && obj.apply);\n  };\n  /**\n   * Determine if the given value is an array.\n   */\n\n\n  connect.isArray = function (obj) {\n    return Object.prototype.toString.call(obj) === '[object Array]';\n  };\n  /**\n   * Get a list of keys from a Javascript object used\n   * as a hash map.\n   */\n\n\n  connect.keys = function (map) {\n    var keys = [];\n    connect.assertNotNull(map, 'map');\n\n    for (var k in map) {\n      keys.push(k);\n    }\n\n    return keys;\n  };\n  /**\n   * Get a list of values from a Javascript object used\n   * as a hash map.\n   */\n\n\n  connect.values = function (map) {\n    var values = [];\n    connect.assertNotNull(map, 'map');\n\n    for (var k in map) {\n      values.push(map[k]);\n    }\n\n    return values;\n  };\n  /**\n   * Get a list of key/value pairs from the given map.\n   */\n\n\n  connect.entries = function (map) {\n    var entries = [];\n\n    for (var k in map) {\n      entries.push({\n        key: k,\n        value: map[k]\n      });\n    }\n\n    return entries;\n  };\n  /**\n   * Merge two or more maps together into a new map,\n   * or simply copy a single map.\n   */\n\n\n  connect.merge = function () {\n    var argMaps = Array.prototype.slice.call(arguments, 0);\n    var resultMap = {};\n    argMaps.forEach(function (map) {\n      connect.entries(map).forEach(function (kv) {\n        resultMap[kv.key] = kv.value;\n      });\n    });\n    return resultMap;\n  };\n\n  connect.now = function () {\n    return new Date().getTime();\n  };\n\n  connect.find = function (array, predicate) {\n    for (var x = 0; x < array.length; x++) {\n      if (predicate(array[x])) {\n        return array[x];\n      }\n    }\n\n    return null;\n  };\n\n  connect.contains = function (obj, value) {\n    if (obj instanceof Array) {\n      return connect.find(obj, function (v) {\n        return v === value;\n      }) != null;\n    } else {\n      return value in obj;\n    }\n  };\n\n  connect.containsValue = function (obj, value) {\n    if (obj instanceof Array) {\n      return connect.find(obj, function (v) {\n        return v === value;\n      }) != null;\n    } else {\n      return connect.find(connect.values(obj), function (v) {\n        return v === value;\n      }) != null;\n    }\n  };\n  /**\n   * Generate a random ID consisting of the current timestamp\n   * and a random base-36 number based on Math.random().\n   */\n\n\n  connect.randomId = function () {\n    return connect.sprintf(\"%s-%s\", connect.now(), Math.random().toString(36).slice(2));\n  };\n  /**\n   * Generate an enum from the given list of lower-case enum values,\n   * where the enum keys will be upper case.\n   *\n   * Conversion from pascal case based on code from here:\n   * http://stackoverflow.com/questions/30521224\n   */\n\n\n  connect.makeEnum = function (values) {\n    var enumObj = {};\n    values.forEach(function (value) {\n      var key = value.replace(/\\.?([a-z]+)_?/g, function (x, y) {\n        return y.toUpperCase() + \"_\";\n      }).replace(/_$/, \"\");\n      enumObj[key] = value;\n    });\n    return enumObj;\n  };\n\n  connect.makeNamespacedEnum = function (prefix, values) {\n    var enumObj = connect.makeEnum(values);\n    connect.keys(enumObj).forEach(function (key) {\n      enumObj[key] = connect.sprintf(\"%s::%s\", prefix, enumObj[key]);\n    });\n    return enumObj;\n  };\n\n  connect.makeGenericNamespacedEnum = function (prefix, values, delimiter) {\n    var enumObj = connect.makeEnum(values);\n    connect.keys(enumObj).forEach(function (key) {\n      enumObj[key] = connect.sprintf(\"%s\" + delimiter + \"%s\", prefix, enumObj[key]);\n    });\n    return enumObj;\n  };\n  /**\n  * Methods to determine browser type and versions, used for softphone initialization.\n  */\n\n\n  connect.isChromeBrowser = function () {\n    return userAgent.indexOf(\"Chrome\") !== -1;\n  };\n\n  connect.isFirefoxBrowser = function () {\n    return userAgent.indexOf(\"Firefox\") !== -1;\n  };\n\n  connect.isOperaBrowser = function () {\n    return userAgent.indexOf(\"Opera\") !== -1;\n  };\n\n  connect.getChromeBrowserVersion = function () {\n    var chromeVersion = userAgent.substring(userAgent.indexOf(\"Chrome\") + 7);\n\n    if (chromeVersion) {\n      return parseFloat(chromeVersion);\n    } else {\n      return -1;\n    }\n  };\n\n  connect.getFirefoxBrowserVersion = function () {\n    var firefoxVersion = userAgent.substring(userAgent.indexOf(\"Firefox\") + 8);\n\n    if (firefoxVersion) {\n      return parseFloat(firefoxVersion);\n    } else {\n      return -1;\n    }\n  };\n\n  connect.isValidLocale = function (locale) {\n    var languages = [{\n      id: 'en_US',\n      label: 'English'\n    }, {\n      id: 'de_DE',\n      label: 'Deutsch'\n    }, {\n      id: 'es_ES',\n      label: 'Espaol'\n    }, {\n      id: 'fr_FR',\n      label: 'Franais'\n    }, {\n      id: 'ja_JP',\n      label: ''\n    }, {\n      id: 'it_IT',\n      label: 'Italiano'\n    }, {\n      id: 'ko_KR',\n      label: ''\n    }, {\n      id: 'pt_BR',\n      label: 'Portugus'\n    }, {\n      id: 'zh_CN',\n      label: '()'\n    }, {\n      id: 'zh_TW',\n      label: '()'\n    }];\n    return languages.map(function (language) {\n      return language.id;\n    }).includes(locale);\n  };\n\n  connect.getOperaBrowserVersion = function () {\n    var versionOffset = userAgent.indexOf(\"Opera\");\n    var operaVersion = userAgent.indexOf(\"Version\") !== -1 ? userAgent.substring(versionOffset + 8) : userAgent.substring(versionOffset + 6);\n\n    if (operaVersion) {\n      return parseFloat(operaVersion);\n    } else {\n      return -1;\n    }\n  };\n  /**\n   * Return a map of items in the given list indexed by\n   * keys determined by the closure provided.\n   *\n   * @param iterable A list-like object.\n   * @param closure A closure to determine the index for the\n   *    items in the iterable.\n   * @return A map from index to item for each item in the iterable.\n   */\n\n\n  connect.index = function (iterable, closure) {\n    var map = {};\n    iterable.forEach(function (item) {\n      map[closure(item)] = item;\n    });\n    return map;\n  };\n  /**\n   * Converts the given array into a map as a set,\n   * where elements in the array are mapped to 1.\n   */\n\n\n  connect.set = function (arrayIn) {\n    var setMap = {};\n    arrayIn.forEach(function (key) {\n      setMap[key] = 1;\n    });\n    return setMap;\n  };\n  /**\n   * Returns a map for each key in mapB which\n   * is NOT in mapA.\n   */\n\n\n  connect.relativeComplement = function (mapA, mapB) {\n    var compMap = {};\n    connect.keys(mapB).forEach(function (key) {\n      if (!(key in mapA)) {\n        compMap[key] = mapB[key];\n      }\n    });\n    return compMap;\n  };\n  /**\n   * Asserts that a premise is true.\n   */\n\n\n  connect.assertTrue = function (premise, message) {\n    if (!premise) {\n      throw new connect.ValueError(message);\n    }\n  };\n  /**\n   * Asserts that a value is not null or undefined.\n   */\n\n\n  connect.assertNotNull = function (value, name) {\n    connect.assertTrue(value != null && typeof value !== undefined, connect.sprintf(\"%s must be provided\", name || 'A value'));\n    return value;\n  };\n\n  connect.deepcopy = function (src) {\n    return JSON.parse(JSON.stringify(src));\n  };\n  /**\n   * Get the current base url of the open page, e.g. if the page is\n   * https://example.com:9494/oranges, this will be \"https://example.com:9494\".\n   */\n\n\n  connect.getBaseUrl = function () {\n    var location = global.location;\n    return connect.sprintf(\"%s//%s:%s\", location.protocol, location.hostname, location.port);\n  };\n\n  connect.getUrlWithProtocol = function (url) {\n    var protocol = global.location.protocol;\n\n    if (url.substr(0, protocol.length) !== protocol) {\n      return connect.sprintf(\"%s//%s\", protocol, url);\n    }\n\n    return url;\n  };\n  /**\n   * Determine if the current window is in an iframe.\n   * Courtesy: http://stackoverflow.com/questions/326069/\n   */\n\n\n  connect.isFramed = function () {\n    try {\n      return window.self !== window.top;\n    } catch (e) {\n      return true;\n    }\n  };\n\n  connect.hasOtherConnectedCCPs = function () {\n    return connect.numberOfConnectedCCPs > 1;\n  };\n\n  connect.fetch = function (endpoint, options, milliInterval, maxRetry) {\n    maxRetry = maxRetry || 5;\n    milliInterval = milliInterval || 1000;\n    options = options || {};\n    return new Promise(function (resolve, reject) {\n      function fetchData(maxRetry) {\n        fetch(endpoint, options).then(function (res) {\n          if (res.status === connect.HTTP_STATUS_CODES.SUCCESS) {\n            resolve(res.json());\n          } else if (maxRetry !== 1 && (res.status >= connect.HTTP_STATUS_CODES.INTERNAL_SERVER_ERROR || res.status === connect.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)) {\n            setTimeout(function () {\n              fetchData(--maxRetry);\n            }, milliInterval);\n          } else {\n            reject(res);\n          }\n        }).catch(function (e) {\n          reject(e);\n        });\n      }\n\n      fetchData(maxRetry);\n    });\n  };\n  /**\n   * Calling a function with exponential backoff with full jitter retry strategy\n   * It will retry calling the function for maximum maxRetry times if it fails.\n   * Success callback will be called if the function succeeded.\n   * Failure callback will be called only if the last try failed.\n   */\n\n\n  connect.backoff = function (func, milliInterval, maxRetry, callbacks) {\n    connect.assertTrue(connect.isFunction(func), \"func must be a Function\");\n    var self = this;\n    var ratio = 2;\n    func({\n      success: function (data) {\n        if (callbacks && callbacks.success) {\n          callbacks.success(data);\n        }\n      },\n      failure: function (err, data) {\n        if (maxRetry > 0) {\n          var interval = milliInterval * 2 * Math.random();\n          global.setTimeout(function () {\n            self.backoff(func, interval * ratio, --maxRetry, callbacks);\n          }, interval);\n        } else {\n          if (callbacks && callbacks.failure) {\n            callbacks.failure(err, data);\n          }\n        }\n      }\n    });\n  };\n\n  connect.publishMetric = function (metricData) {\n    var bus = connect.core.getEventBus();\n    bus.trigger(connect.EventType.CLIENT_METRIC, metricData);\n  };\n\n  connect.publishSoftphoneStats = function (stats) {\n    var bus = connect.core.getEventBus();\n    bus.trigger(connect.EventType.SOFTPHONE_STATS, stats);\n  };\n\n  connect.publishSoftphoneReport = function (report) {\n    var bus = connect.core.getEventBus();\n    bus.trigger(connect.EventType.SOFTPHONE_REPORT, report);\n  };\n\n  connect.publishClientSideLogs = function (logs) {\n    var bus = connect.core.getEventBus();\n    bus.trigger(connect.EventType.CLIENT_SIDE_LOGS, logs);\n  };\n  /**\n   * A wrapper around Window.open() for managing single instance popups.\n   */\n\n\n  connect.PopupManager = function () {};\n\n  connect.PopupManager.prototype.open = function (url, name, options) {\n    var then = this._getLastOpenedTimestamp(name);\n\n    var now = new Date().getTime();\n    var win = null;\n\n    if (now - then > ONE_DAY_MILLIS) {\n      if (options) {\n        // default values are chosen to provide a minimum height without scrolling\n        // and a uniform margin based on the css of the ccp login page\n        var height = options.height || DEFAULT_POPUP_HEIGHT;\n        var width = options.width || DEFAULT_POPUP_WIDTH;\n        var top = options.top || 0;\n        var left = options.left || 0;\n        win = window.open('', name, \"width=\" + width + \", height=\" + height + \", top=\" + top + \", left=\" + left);\n\n        if (win.location !== url) {\n          win = window.open(url, name, \"width=\" + width + \", height=\" + height + \", top=\" + top + \", left=\" + left);\n        }\n      } else {\n        win = window.open('', name);\n\n        if (win.location !== url) {\n          win = window.open(url, name);\n        }\n      }\n\n      this._setLastOpenedTimestamp(name, now);\n    }\n\n    return win;\n  };\n\n  connect.PopupManager.prototype.clear = function (name) {\n    var key = this._getLocalStorageKey(name);\n\n    global.localStorage.removeItem(key);\n  };\n\n  connect.PopupManager.prototype._getLastOpenedTimestamp = function (name) {\n    var key = this._getLocalStorageKey(name);\n\n    var value = global.localStorage.getItem(key);\n\n    if (value) {\n      return parseInt(value, 10);\n    } else {\n      return 0;\n    }\n  };\n\n  connect.PopupManager.prototype._setLastOpenedTimestamp = function (name, ts) {\n    var key = this._getLocalStorageKey(name);\n\n    global.localStorage.setItem(key, '' + ts);\n  };\n\n  connect.PopupManager.prototype._getLocalStorageKey = function (name) {\n    return \"connectPopupManager::\" + name;\n  };\n  /**\n   * An enumeration of the HTML5 notification permission values.\n   */\n\n\n  var NotificationPermission = connect.makeEnum(['granted', 'denied', 'default']);\n  /**\n   * A simple engine for showing notification popups.\n   */\n\n  connect.NotificationManager = function () {\n    this.queue = [];\n    this.permission = NotificationPermission.DEFAULT;\n  };\n\n  connect.NotificationManager.prototype.requestPermission = function () {\n    var self = this;\n\n    if (!(\"Notification\" in global)) {\n      connect.getLog().warn(\"This browser doesn't support notifications.\").sendInternalLogToServer();\n      this.permission = NotificationPermission.DENIED;\n    } else if (global.Notification.permission === NotificationPermission.DENIED) {\n      connect.getLog().warn(\"The user has requested to not receive notifications.\").sendInternalLogToServer();\n      this.permission = NotificationPermission.DENIED;\n    } else if (this.permission !== NotificationPermission.GRANTED) {\n      global.Notification.requestPermission().then(function (permission) {\n        self.permission = permission;\n\n        if (permission === NotificationPermission.GRANTED) {\n          self._showQueued();\n        } else {\n          self.queue = [];\n        }\n      });\n    }\n  };\n\n  connect.NotificationManager.prototype.show = function (title, options) {\n    if (this.permission === NotificationPermission.GRANTED) {\n      return this._showImpl({\n        title: title,\n        options: options\n      });\n    } else if (this.permission === NotificationPermission.DENIED) {\n      connect.getLog().warn(\"Unable to show notification.\").sendInternalLogToServer().withObject({\n        title: title,\n        options: options\n      });\n    } else {\n      var params = {\n        title: title,\n        options: options\n      };\n      connect.getLog().warn(\"Deferring notification until user decides to allow or deny.\").withObject(params).sendInternalLogToServer();\n      this.queue.push(params);\n    }\n  };\n\n  connect.NotificationManager.prototype._showQueued = function () {\n    var self = this;\n    var notifications = this.queue.map(function (params) {\n      return self._showImpl(params);\n    });\n    this.queue = [];\n    return notifications;\n  };\n\n  connect.NotificationManager.prototype._showImpl = function (params) {\n    var notification = new global.Notification(params.title, params.options);\n\n    if (params.options.clicked) {\n      notification.onclick = function () {\n        params.options.clicked.call(notification);\n      };\n    }\n\n    return notification;\n  };\n\n  connect.BaseError = function (format, args) {\n    global.Error.call(this, connect.vsprintf(format, args));\n  };\n\n  connect.BaseError.prototype = Object.create(Error.prototype);\n  connect.BaseError.prototype.constructor = connect.BaseError;\n\n  connect.ValueError = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    var format = args.shift();\n    connect.BaseError.call(this, format, args);\n  };\n\n  connect.ValueError.prototype = Object.create(connect.BaseError.prototype);\n  connect.ValueError.prototype.constructor = connect.ValueError;\n\n  connect.NotImplementedError = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    var format = args.shift();\n    connect.BaseError.call(this, format, args);\n  };\n\n  connect.NotImplementedError.prototype = Object.create(connect.BaseError.prototype);\n  connect.NotImplementedError.prototype.constructor = connect.NotImplementedError;\n\n  connect.StateError = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    var format = args.shift();\n    connect.BaseError.call(this, format, args);\n  };\n\n  connect.StateError.prototype = Object.create(connect.BaseError.prototype);\n  connect.StateError.prototype.constructor = connect.StateError;\n\n  connect.VoiceIdError = function (type, message, err) {\n    var error = {};\n    error.type = type;\n    error.message = message;\n    error.stack = Error(message);\n    error.err = err;\n    return error;\n  }; // internal use only\n\n\n  connect.isCCP = function () {\n    var conduit = connect.core.getUpstream();\n    return conduit.name === 'ConnectSharedWorkerConduit';\n  };\n})();\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  var ALL_EVENTS = '<<all>>';\n  /**---------------------------------------------------------------\n   * enum EventType\n   */\n\n  var EventType = connect.makeEnum(['acknowledge', 'ack_timeout', 'init', 'api_request', 'api_response', 'auth_fail', 'access_denied', 'close', 'configure', 'log', 'master_request', 'master_response', 'synchronize', 'terminate', 'terminated', 'send_logs', 'reload_agent_configuration', 'broadcast', 'api_metric', 'client_metric', 'softphone_stats', 'softphone_report', 'client_side_logs', 'server_bound_internal_log', 'mute', \"iframe_style\", \"update_connected_ccps\"]);\n  /**---------------------------------------------------------------\n   * enum MasterTopics\n   */\n\n  var MasterTopics = connect.makeNamespacedEnum('connect', ['loginPopup', 'sendLogs', 'softphone', 'ringtone', 'metrics']);\n  /**---------------------------------------------------------------\n   * enum AgentEvents\n   */\n\n  var AgentEvents = connect.makeNamespacedEnum('agent', ['init', 'update', 'refresh', 'routable', 'not_routable', 'pending', 'contact_pending', 'offline', 'error', 'softphone_error', 'websocket_connection_lost', 'websocket_connection_gained', 'state_change', 'acw', 'mute_toggle', 'local_media_stream_created']);\n  /**---------------------------------------------------------------\n  * enum WebSocketEvents\n  */\n\n  var WebSocketEvents = connect.makeNamespacedEnum('webSocket', ['init_failure', 'connection_open', 'connection_close', 'connection_error', 'connection_gain', 'connection_lost', 'subscription_update', 'subscription_failure', 'all_message', 'send', 'subscribe']);\n  /**---------------------------------------------------------------\n    * enum ContactEvents\n    */\n\n  var ContactEvents = connect.makeNamespacedEnum('contact', ['init', 'refresh', 'destroyed', 'incoming', 'pending', 'connecting', 'connected', 'missed', 'acw', 'view', 'ended', 'error', 'accepted']);\n  /**---------------------------------------------------------------\n  * enum ConnectionEvents\n  */\n\n  var ConnectionEvents = connect.makeNamespacedEnum('connection', ['session_init', 'ready_to_start_session']);\n  /**---------------------------------------------------------------\n   * enum Configuration Events\n   */\n\n  var ConfigurationEvents = connect.makeNamespacedEnum('configuration', ['configure', 'set_speaker_device', 'set_microphone_device', 'set_ringer_device', 'speaker_device_changed', 'microphone_device_changed', 'ringer_device_changed']);\n  /**---------------------------------------------------------------\n   * class EventFactory\n   */\n\n  var EventFactory = function () {};\n\n  EventFactory.createRequest = function (type, method, params) {\n    return {\n      event: type,\n      requestId: connect.randomId(),\n      method: method,\n      params: params\n    };\n  };\n\n  EventFactory.createResponse = function (type, request, data, err) {\n    return {\n      event: type,\n      requestId: request.requestId,\n      data: data,\n      err: err || null\n    };\n  };\n  /**\n   * An object representing an event subscription in an EventBus.\n   */\n\n\n  var Subscription = function (subMap, eventName, f) {\n    this.subMap = subMap;\n    this.id = connect.randomId();\n    this.eventName = eventName;\n    this.f = f;\n  };\n  /**\n   * Unsubscribe the handler of this subscription from the EventBus\n   * from which it was created.\n   */\n\n\n  Subscription.prototype.unsubscribe = function () {\n    this.subMap.unsubscribe(this.eventName, this.id);\n  };\n  /**\n   * A map of event subscriptions, used by the EventBus.\n   */\n\n\n  var SubscriptionMap = function () {\n    this.subIdMap = {};\n    this.subEventNameMap = {};\n  };\n  /**\n   * Add a subscription for the named event.  Creates a new Subscription\n   * object and returns it.  This object can be used to unsubscribe.\n   */\n\n\n  SubscriptionMap.prototype.subscribe = function (eventName, f) {\n    var sub = new Subscription(this, eventName, f);\n    this.subIdMap[sub.id] = sub;\n    var subList = this.subEventNameMap[eventName] || [];\n    subList.push(sub);\n    this.subEventNameMap[eventName] = subList;\n    return sub;\n  };\n  /**\n   * Unsubscribe a subscription matching the given event name and id.\n   */\n\n\n  SubscriptionMap.prototype.unsubscribe = function (eventName, subId) {\n    if (connect.contains(this.subEventNameMap, eventName)) {\n      this.subEventNameMap[eventName] = this.subEventNameMap[eventName].filter(function (s) {\n        return s.id !== subId;\n      });\n\n      if (this.subEventNameMap[eventName].length < 1) {\n        delete this.subEventNameMap[eventName];\n      }\n    }\n\n    if (connect.contains(this.subIdMap, subId)) {\n      delete this.subIdMap[subId];\n    }\n  };\n  /**\n   * Get a list of all subscriptions in the subscription map.\n   */\n\n\n  SubscriptionMap.prototype.getAllSubscriptions = function () {\n    return connect.values(this.subEventNameMap).reduce(function (a, b) {\n      return a.concat(b);\n    }, []);\n  };\n  /**\n   * Get a list of subscriptions for the given event name, or an empty\n   * list if there are no subscriptions.\n   */\n\n\n  SubscriptionMap.prototype.getSubscriptions = function (eventName) {\n    return this.subEventNameMap[eventName] || [];\n  };\n  /**\n   * An object which maintains a map of subscriptions and serves as the\n   * mechanism for triggering events to be handled by subscribers.\n   */\n\n\n  var EventBus = function (paramsIn) {\n    var params = paramsIn || {};\n    this.subMap = new SubscriptionMap();\n    this.logEvents = params.logEvents || false;\n  };\n  /**\n   * Subscribe to the named event.  Returns a new Subscription object\n   * which can be used to unsubscribe.\n   */\n\n\n  EventBus.prototype.subscribe = function (eventName, f) {\n    connect.assertNotNull(eventName, 'eventName');\n    connect.assertNotNull(f, 'f');\n    connect.assertTrue(connect.isFunction(f), 'f must be a function');\n    return this.subMap.subscribe(eventName, f);\n  };\n  /**\n   * Subscribe a function to be called on all events.\n   */\n\n\n  EventBus.prototype.subscribeAll = function (f) {\n    connect.assertNotNull(f, 'f');\n    connect.assertTrue(connect.isFunction(f), 'f must be a function');\n    return this.subMap.subscribe(ALL_EVENTS, f);\n  };\n  /**\n   * Get a list of subscriptions for the given event name, or an empty\n   * list if there are no subscriptions.\n   */\n\n\n  EventBus.prototype.getSubscriptions = function (eventName) {\n    return this.subMap.getSubscriptions(eventName);\n  };\n  /**\n   * Trigger the given event with the given data.  All methods subscribed\n   * to this event will be called and are provided with the given arbitrary\n   * data object and the name of the event, in that order.\n   */\n\n\n  EventBus.prototype.trigger = function (eventName, data) {\n    connect.assertNotNull(eventName, 'eventName');\n    var self = this;\n    var allEventSubs = this.subMap.getSubscriptions(ALL_EVENTS);\n    var eventSubs = this.subMap.getSubscriptions(eventName);\n\n    if (this.logEvents && eventName !== connect.EventType.LOG && eventName !== connect.EventType.MASTER_RESPONSE && eventName !== connect.EventType.API_METRIC && eventName !== connect.EventType.SERVER_BOUND_INTERNAL_LOG) {\n      connect.getLog().trace(\"Publishing event: %s\", eventName).sendInternalLogToServer();\n    }\n\n    if (eventName.startsWith(connect.ContactEvents.ACCEPTED) && data && data.contactId && !(data instanceof connect.Contact)) {\n      data = new connect.Contact(data.contactId);\n    }\n\n    allEventSubs.concat(eventSubs).forEach(function (sub) {\n      try {\n        sub.f(data || null, eventName, self);\n      } catch (e) {\n        connect.getLog().error(\"'%s' event handler failed.\", eventName).withException(e).sendInternalLogToServer();\n      }\n    });\n  };\n  /**\n   * Returns a closure which bridges an event from another EventBus to this bus.\n   *\n   * Usage:\n   * conduit.onUpstream(\"MyEvent\", bus.bridge());\n   */\n\n\n  EventBus.prototype.bridge = function () {\n    var self = this;\n    return function (data, event) {\n      self.trigger(event, data);\n    };\n  };\n  /**\n   * Unsubscribe all events in the event bus.\n   */\n\n\n  EventBus.prototype.unsubscribeAll = function () {\n    this.subMap.getAllSubscriptions().forEach(function (sub) {\n      sub.unsubscribe();\n    });\n  };\n\n  connect.EventBus = EventBus;\n  connect.EventFactory = EventFactory;\n  connect.EventType = EventType;\n  connect.AgentEvents = AgentEvents;\n  connect.ConfigurationEvents = ConfigurationEvents;\n  connect.ConnectionEvents = ConnectionEvents;\n  connect.ConnnectionEvents = ConnectionEvents; //deprecate on next major version release.\n\n  connect.ContactEvents = ContactEvents;\n  connect.WebSocketEvents = WebSocketEvents;\n  connect.MasterTopics = MasterTopics;\n})();\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n  /**---------------------------------------------------------------\n   * class Stream\n   *\n   * Represents an object from which messages can be read and to which\n   * messages can be sent.\n   */\n\n  var Stream = function () {};\n  /**\n   * Send a message to the stream.  This method must be implemented by subclasses.\n   */\n\n\n  Stream.prototype.send = function (message) {\n    throw new connect.NotImplementedError();\n  };\n  /**\n   * Provide a method to be called when messages are received from this stream.\n   * This method must be implemented by subclasses.\n   */\n\n\n  Stream.prototype.onMessage = function (f) {\n    throw new connect.NotImplementedError();\n  };\n  /**---------------------------------------------------------------\n   * class NullStream extends Stream\n   *\n   * A null stream which provides no message sending or receiving facilities.\n   */\n\n\n  var NullStream = function () {\n    Stream.call(this);\n  };\n\n  NullStream.prototype = Object.create(Stream.prototype);\n  NullStream.prototype.constructor = NullStream;\n\n  NullStream.prototype.onMessage = function (f) {};\n\n  NullStream.prototype.send = function (message) {};\n  /**---------------------------------------------------------------\n   * class WindowStream extends Stream\n   *\n   * A stream for communicating with a window object.  The domain provided\n   * must match the allowed message domains of the downstream receiver\n   * or messages will be rejected, see https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage\n   * for more info.\n   */\n\n\n  var WindowStream = function (win, domain) {\n    Stream.call(this);\n    this.window = win;\n    this.domain = domain || '*';\n  };\n\n  WindowStream.prototype = Object.create(Stream.prototype);\n  WindowStream.prototype.constructor = WindowStream;\n\n  WindowStream.prototype.send = function (message) {\n    this.window.postMessage(message, this.domain);\n  };\n\n  WindowStream.prototype.onMessage = function (f) {\n    this.window.addEventListener(\"message\", f);\n  };\n  /**---------------------------------------------------------------\n   * class WindowIOStream extends Stream\n   *\n   * A stream used by IFrame/popup windows to communicate with their parents\n   * and vise versa.\n   *\n   * This object encapsulates the fact that incoming and outgoing messages\n   * arrive on different windows and allows this to be managed as a single\n   * Stream object.\n   */\n\n\n  var WindowIOStream = function (inputwin, outputwin, domain) {\n    Stream.call(this);\n    this.input = inputwin;\n    this.output = outputwin;\n    this.domain = domain || '*';\n  };\n\n  WindowIOStream.prototype = Object.create(Stream.prototype);\n  WindowIOStream.prototype.constructor = WindowIOStream;\n\n  WindowIOStream.prototype.send = function (message) {\n    this.output.postMessage(message, this.domain);\n  };\n\n  WindowIOStream.prototype.onMessage = function (f) {\n    this.input.addEventListener(\"message\", f);\n  };\n  /**---------------------------------------------------------------\n   * class PortStream extends Stream\n   *\n   * A stream wrapping an HTML5 Worker port.  This could be the port\n   * used to connect to a Worker or one of the multitude of ports\n   * made available to a SharedWorker for communication back to\n   * its connected clients.\n   */\n\n\n  var PortStream = function (port) {\n    Stream.call(this);\n    this.port = port;\n    this.id = connect.randomId();\n  };\n\n  PortStream.prototype = Object.create(Stream.prototype);\n  PortStream.prototype.constructor = PortStream;\n\n  PortStream.prototype.send = function (message) {\n    this.port.postMessage(message);\n  };\n\n  PortStream.prototype.onMessage = function (f) {\n    this.port.addEventListener(\"message\", f);\n  };\n\n  PortStream.prototype.getId = function () {\n    return this.id;\n  };\n  /**---------------------------------------------------------------\n   * class StreamMultiplexer extends Stream\n   *\n   * A wrapper for multiplexed downstream communication with\n   * multiple streams at once.  Mainly useful for the SharedWorker to\n   * broadcast events to many PortStream objects at once.\n   */\n\n\n  var StreamMultiplexer = function (streams) {\n    Stream.call(this);\n    this.streamMap = streams ? connect.index(streams, function (s) {\n      return s.getId();\n    }) : {};\n    this.messageListeners = [];\n  };\n\n  StreamMultiplexer.prototype = Object.create(Stream.prototype);\n  StreamMultiplexer.prototype.constructor = StreamMultiplexer;\n  /**\n   * Send a message to all ports in the multiplexer.\n   */\n\n  StreamMultiplexer.prototype.send = function (message) {\n    this.getStreams().forEach(function (stream) {\n      try {\n        stream.send(message);\n      } catch (e) {// Couldn't send message to one of the downstreams for some reason...\n        // No reliable logging possible without further failures,\n        // no recovery, just eat it.\n      }\n    });\n  };\n  /**\n   * Register a method which will be called when a message is received from\n   * any of the downstreams.\n   */\n\n\n  StreamMultiplexer.prototype.onMessage = function (f) {\n    this.messageListeners.push(f); // Update existing streams with the new listener.\n\n    this.getStreams().forEach(function (stream) {\n      stream.onMessage(f);\n    });\n  };\n  /**\n   * Add a stream to the multiplexer.\n   */\n\n\n  StreamMultiplexer.prototype.addStream = function (stream) {\n    var self = this;\n    this.streamMap[stream.getId()] = stream; // Update stream with existing listeners.\n\n    this.messageListeners.forEach(function (messageListener) {\n      stream.onMessage(messageListener);\n    });\n  };\n  /**\n   * Remove the given downstream.  This is typically used in response\n   * to the SharedWorker's onclose event, indicating that a consumer\n   * tab has been closed.\n   */\n\n\n  StreamMultiplexer.prototype.removeStream = function (stream) {\n    delete this.streamMap[stream.getId()];\n  };\n  /**\n   * Get a list of streams in the multiplexer.\n   */\n\n\n  StreamMultiplexer.prototype.getStreams = function (stream) {\n    return connect.values(this.streamMap);\n  };\n  /**\n   * Get the stream matching the given port.\n   */\n\n\n  StreamMultiplexer.prototype.getStreamForPort = function (port) {\n    return connect.find(this.getStreams(), function (s) {\n      return s.port === port;\n    });\n  };\n  /**---------------------------------------------------------------\n   * class Conduit\n   *\n   * An object which bridges an upstream and a downstream, allowing messages\n   * to be passed to and from each and providing an event bus for event\n   * subscriptions to be made upstream and downstream.\n   */\n\n\n  var Conduit = function (name, upstream, downstream) {\n    this.name = name;\n    this.upstream = upstream || new NullStream();\n    this.downstream = downstream || new NullStream();\n    this.downstreamBus = new connect.EventBus();\n    this.upstreamBus = new connect.EventBus();\n    this.upstream.onMessage(connect.hitch(this, this._dispatchEvent, this.upstreamBus));\n    this.downstream.onMessage(connect.hitch(this, this._dispatchEvent, this.downstreamBus));\n  };\n\n  Conduit.prototype.onUpstream = function (eventName, f) {\n    connect.assertNotNull(eventName, 'eventName');\n    connect.assertNotNull(f, 'f');\n    connect.assertTrue(connect.isFunction(f), 'f must be a function');\n    return this.upstreamBus.subscribe(eventName, f);\n  };\n\n  Conduit.prototype.onAllUpstream = function (f) {\n    connect.assertNotNull(f, 'f');\n    connect.assertTrue(connect.isFunction(f), 'f must be a function');\n    return this.upstreamBus.subscribeAll(f);\n  };\n\n  Conduit.prototype.onDownstream = function (eventName, f) {\n    connect.assertNotNull(eventName, 'eventName');\n    connect.assertNotNull(f, 'f');\n    connect.assertTrue(connect.isFunction(f), 'f must be a function');\n    return this.downstreamBus.subscribe(eventName, f);\n  };\n\n  Conduit.prototype.onAllDownstream = function (f) {\n    connect.assertNotNull(f, 'f');\n    connect.assertTrue(connect.isFunction(f), 'f must be a function');\n    return this.downstreamBus.subscribeAll(f);\n  };\n\n  Conduit.prototype.sendUpstream = function (eventName, data) {\n    connect.assertNotNull(eventName, 'eventName');\n    this.upstream.send({\n      event: eventName,\n      data: data\n    });\n  };\n\n  Conduit.prototype.sendDownstream = function (eventName, data) {\n    connect.assertNotNull(eventName, 'eventName');\n    this.downstream.send({\n      event: eventName,\n      data: data\n    });\n  };\n\n  Conduit.prototype._dispatchEvent = function (bus, messageEvent) {\n    var message = messageEvent.data;\n\n    if (message.event) {\n      bus.trigger(message.event, message.data);\n    }\n  };\n  /**\n   * Returns a closure which passes events upstream.\n   *\n   * Usage:\n   * conduit.onDownstream(\"MyEvent\", conduit.passUpstream());\n   */\n\n\n  Conduit.prototype.passUpstream = function () {\n    var self = this;\n    return function (data, eventName) {\n      self.upstream.send({\n        event: eventName,\n        data: data\n      });\n    };\n  };\n  /**\n   * Returns a closure which passes events downstream.\n   *\n   * Usage:\n   * conduit.onUpstream(\"MyEvent\", conduit.passDownstream());\n   */\n\n\n  Conduit.prototype.passDownstream = function () {\n    var self = this;\n    return function (data, eventName) {\n      self.downstream.send({\n        event: eventName,\n        data: data\n      });\n    };\n  };\n  /**\n   * Shutdown the conduit's event busses and remove all subscriptions.\n   */\n\n\n  Conduit.prototype.shutdown = function () {\n    this.upstreamBus.unsubscribeAll();\n    this.downstreamBus.unsubscribeAll();\n  };\n  /**---------------------------------------------------------------\n   * class IFrameConduit extends Conduit\n   *\n   * Creates a conduit for the given IFrame element.\n   */\n\n\n  var IFrameConduit = function (name, window, iframe, domain) {\n    Conduit.call(this, name, new WindowIOStream(window, iframe.contentWindow, domain || '*'), null);\n  };\n\n  IFrameConduit.prototype = Object.create(Conduit.prototype);\n  IFrameConduit.prototype.constructor = IFrameConduit;\n  connect.Stream = Stream;\n  connect.NullStream = NullStream;\n  connect.WindowStream = WindowStream;\n  connect.WindowIOStream = WindowIOStream;\n  connect.PortStream = PortStream;\n  connect.StreamMultiplexer = StreamMultiplexer;\n  connect.Conduit = Conduit;\n  connect.IFrameConduit = IFrameConduit;\n})();\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n  /**---------------------------------------------------------------\n   * enum ClientMethods\n   */\n\n  connect.ClientMethods = connect.makeEnum(['getAgentSnapshot', 'putAgentState', 'getAgentStates', 'getDialableCountryCodes', 'getRoutingProfileQueues', 'getAgentPermissions', 'getAgentConfiguration', 'updateAgentConfiguration', 'acceptContact', 'createOutboundContact', 'createTaskContact', 'clearContact', 'completeContact', 'destroyContact', 'rejectContact', 'notifyContactIssue', 'updateContactAttributes', 'createAdditionalConnection', 'destroyConnection', 'holdConnection', 'resumeConnection', 'toggleActiveConnections', 'conferenceConnections', 'sendClientLogs', 'sendDigits', 'sendSoftphoneCallReport', 'sendSoftphoneCallMetrics', 'getEndpoints', 'getNewAuthToken', 'createTransport']);\n  /**---------------------------------------------------------------\n   * enum AgentAppClientMethods\n   */\n\n  connect.AgentAppClientMethods = {\n    GET_SPEAKER_ID: \"AgentAppService.Lcms.getContact\",\n    ENROLL_SPEAKER_IN_VOICEID: \"AgentAppService.VoiceId.enrollBySession\",\n    EVALUATE_SPEAKER_WITH_VOICEID: \"AgentAppService.VoiceId.evaluateSession\",\n    GET_SPEAKER_STATUS: \"AgentAppService.VoiceId.describeSpeaker\",\n    OPT_OUT_VOICEID_SPEAKER: \"AgentAppService.VoiceId.optOutSpeaker\",\n    DESCRIBE_VOICEID_SESSION: \"AgentAppService.VoiceId.describeSession\",\n    UPDATE_VOICEID_SESSION: \"AgentAppService.VoiceId.updateSession\",\n    START_VOICEID_SESSION: \"AgentAppService.Nasa.startVoiceIdSession\"\n  };\n  /**---------------------------------------------------------------\n   * enum MasterMethods\n   */\n\n  connect.MasterMethods = connect.makeEnum(['becomeMaster', 'checkMaster']);\n  /**---------------------------------------------------------------\n   * abstract class ClientBase\n   */\n\n  var ClientBase = function () {};\n\n  ClientBase.EMPTY_CALLBACKS = {\n    success: function () {},\n    failure: function () {}\n  };\n\n  ClientBase.prototype.call = function (method, paramsIn, callbacksIn) {\n    connect.assertNotNull(method, 'method');\n    var params = paramsIn || {};\n    var callbacks = callbacksIn || ClientBase.EMPTY_CALLBACKS;\n\n    this._callImpl(method, params, callbacks);\n  };\n\n  ClientBase.prototype._callImpl = function (method, params, callbacks) {\n    throw new connect.NotImplementedError();\n  };\n  /**---------------------------------------------------------------\n   * class NullClient extends ClientBase\n   */\n\n\n  var NullClient = function () {\n    ClientBase.call(this);\n  };\n\n  NullClient.prototype = Object.create(ClientBase.prototype);\n  NullClient.prototype.constructor = NullClient;\n\n  NullClient.prototype._callImpl = function (method, params, callbacks) {\n    if (callbacks && callbacks.failure) {\n      var message = connect.sprintf('No such method exists on NULL client: %s', method);\n      callbacks.failure(new connect.ValueError(message), {\n        message: message\n      });\n    }\n  };\n  /**---------------------------------------------------------------\n   * abstract class UpstreamConduitClientBase extends ClientBase\n   */\n\n\n  var UpstreamConduitClientBase = function (conduit, requestEvent, responseEvent) {\n    ClientBase.call(this);\n    this.conduit = conduit;\n    this.requestEvent = requestEvent;\n    this.responseEvent = responseEvent;\n    this._requestIdCallbacksMap = {};\n    this.conduit.onUpstream(responseEvent, connect.hitch(this, this._handleResponse));\n  };\n\n  UpstreamConduitClientBase.prototype = Object.create(ClientBase.prototype);\n  UpstreamConduitClientBase.prototype.constructor = UpstreamConduitClientBase;\n\n  UpstreamConduitClientBase.prototype._callImpl = function (method, params, callbacks) {\n    var request = connect.EventFactory.createRequest(this.requestEvent, method, params);\n    this._requestIdCallbacksMap[request.requestId] = callbacks;\n    this.conduit.sendUpstream(request.event, request);\n  };\n\n  UpstreamConduitClientBase.prototype._getCallbacksForRequest = function (requestId) {\n    var callbacks = this._requestIdCallbacksMap[requestId] || null;\n\n    if (callbacks != null) {\n      delete this._requestIdCallbacksMap[requestId];\n    }\n\n    return callbacks;\n  };\n\n  UpstreamConduitClientBase.prototype._handleResponse = function (data) {\n    var callbacks = this._getCallbacksForRequest(data.requestId);\n\n    if (callbacks == null) {\n      return;\n    }\n\n    if (data.err && callbacks.failure) {\n      callbacks.failure(data.err, data.data);\n    } else if (callbacks.success) {\n      callbacks.success(data.data);\n    }\n  };\n  /**---------------------------------------------------------------\n   * class UpstreamConduitClient extends ClientBase\n   */\n\n\n  var UpstreamConduitClient = function (conduit) {\n    UpstreamConduitClientBase.call(this, conduit, connect.EventType.API_REQUEST, connect.EventType.API_RESPONSE);\n  };\n\n  UpstreamConduitClient.prototype = Object.create(UpstreamConduitClientBase.prototype);\n  UpstreamConduitClient.prototype.constructor = UpstreamConduitClient;\n  /**---------------------------------------------------------------\n   * class UpstreamConduitMasterClient extends ClientBase\n   */\n\n  var UpstreamConduitMasterClient = function (conduit) {\n    UpstreamConduitClientBase.call(this, conduit, connect.EventType.MASTER_REQUEST, connect.EventType.MASTER_RESPONSE);\n  };\n\n  UpstreamConduitMasterClient.prototype = Object.create(UpstreamConduitClientBase.prototype);\n  UpstreamConduitMasterClient.prototype.constructor = UpstreamConduitMasterClient;\n  /**---------------------------------------------------------------\n  * class AgentAppClient extends ClientBase\n  */\n\n  var AgentAppClient = function (authCookieName, authToken, endpoint) {\n    connect.assertNotNull(authCookieName, 'authCookieName');\n    connect.assertNotNull(authToken, 'authToken');\n    connect.assertNotNull(endpoint, 'endpoint');\n    ClientBase.call(this);\n    this.endpointUrl = connect.getUrlWithProtocol(endpoint);\n    this.authToken = authToken;\n    this.authCookieName = authCookieName;\n  };\n\n  AgentAppClient.prototype = Object.create(ClientBase.prototype);\n  AgentAppClient.prototype.constructor = AgentAppClient;\n\n  AgentAppClient.prototype._callImpl = function (method, params, callbacks) {\n    var self = this;\n    var bear = {};\n    bear[self.authCookieName] = self.authToken;\n    var options = {\n      method: 'post',\n      body: JSON.stringify(params || {}),\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'X-Amz-target': method,\n        'X-Amz-Bearer': JSON.stringify(bear)\n      }\n    };\n    connect.fetch(self.endpointUrl, options).then(function (res) {\n      callbacks.success(res);\n    }).catch(function (err) {\n      callbacks.failure(err);\n    });\n  };\n  /**---------------------------------------------------------------\n   * class AWSClient extends ClientBase\n   */\n\n\n  var AWSClient = function (authToken, region, endpointIn) {\n    connect.assertNotNull(authToken, 'authToken');\n    connect.assertNotNull(region, 'region');\n    ClientBase.call(this);\n    AWS.config.credentials = new AWS.Credentials({});\n    AWS.config.region = region;\n    this.authToken = authToken;\n    var baseUrl = connect.getBaseUrl();\n    var endpointUrl = endpointIn || (baseUrl.includes(\".awsapps.com\") ? baseUrl + '/connect/api' : baseUrl + '/api');\n    var endpoint = new AWS.Endpoint(endpointUrl);\n    this.client = new AWS.Connect({\n      endpoint: endpoint\n    });\n  };\n\n  AWSClient.prototype = Object.create(ClientBase.prototype);\n  AWSClient.prototype.constructor = AWSClient;\n\n  AWSClient.prototype._callImpl = function (method, params, callbacks) {\n    var self = this;\n    var log = connect.getLog();\n\n    if (!connect.contains(this.client, method)) {\n      var message = connect.sprintf('No such method exists on AWS client: %s', method);\n      callbacks.failure(new connect.ValueError(message), {\n        message: message\n      });\n    } else {\n      params = this._translateParams(method, params);\n      log.trace(\"AWSClient: --> Calling operation '%s'\", method).sendInternalLogToServer();\n      this.client[method](params).on('build', function (request) {\n        request.httpRequest.headers['X-Amz-Bearer'] = self.authToken;\n      }).send(function (err, data) {\n        try {\n          if (err) {\n            if (err.code === connect.CTIExceptions.UNAUTHORIZED_EXCEPTION) {\n              callbacks.authFailure();\n            } else if (callbacks.accessDenied && (err.code === connect.CTIExceptions.ACCESS_DENIED_EXCEPTION || err.statusCode === 403)) {\n              callbacks.accessDenied();\n            } else {\n              // Can't pass err directly to postMessage\n              // postMessage() tries to clone the err object and failed.\n              // Refer to https://github.com/goatslacker/alt-devtool/issues/5\n              var error = {};\n              error.type = err.code;\n              error.message = err.message;\n              error.stack = err.stack ? err.stack.split('\\n') : [];\n              callbacks.failure(error, data);\n            }\n\n            log.trace(\"AWSClient: <-- Operation '%s' failed: %s\", method, JSON.stringify(err)).sendInternalLogToServer();\n          } else {\n            log.trace(\"AWSClient: <-- Operation '%s' succeeded.\", method).withObject(data).sendInternalLogToServer();\n            callbacks.success(data);\n          }\n        } catch (e) {\n          connect.getLog().error(\"Failed to handle AWS API request for method %s\", method).withException(e).sendInternalLogToServer();\n        }\n      });\n    }\n  };\n\n  AWSClient.prototype._requiresAuthenticationParam = function (method) {\n    return method !== connect.ClientMethods.COMPLETE_CONTACT && method !== connect.ClientMethods.CLEAR_CONTACT && method !== connect.ClientMethods.REJECT_CONTACT && method !== connect.ClientMethods.CREATE_TASK_CONTACT;\n  };\n\n  AWSClient.prototype._translateParams = function (method, params) {\n    switch (method) {\n      case connect.ClientMethods.UPDATE_AGENT_CONFIGURATION:\n        params.configuration = this._translateAgentConfiguration(params.configuration);\n        break;\n\n      case connect.ClientMethods.SEND_SOFTPHONE_CALL_METRICS:\n        params.softphoneStreamStatistics = this._translateSoftphoneStreamStatistics(params.softphoneStreamStatistics);\n        break;\n\n      case connect.ClientMethods.SEND_SOFTPHONE_CALL_REPORT:\n        params.report = this._translateSoftphoneCallReport(params.report);\n        break;\n\n      default:\n        break;\n    }\n\n    if (this._requiresAuthenticationParam(method)) {\n      params.authentication = {\n        authToken: this.authToken\n      };\n    }\n\n    return params;\n  };\n\n  AWSClient.prototype._translateAgentConfiguration = function (config) {\n    return {\n      name: config.name,\n      softphoneEnabled: config.softphoneEnabled,\n      softphoneAutoAccept: config.softphoneAutoAccept,\n      extension: config.extension,\n      routingProfile: this._translateRoutingProfile(config.routingProfile),\n      agentPreferences: config.agentPreferences\n    };\n  };\n\n  AWSClient.prototype._translateRoutingProfile = function (profile) {\n    return {\n      name: profile.name,\n      routingProfileARN: profile.routingProfileARN,\n      defaultOutboundQueue: this._translateQueue(profile.defaultOutboundQueue)\n    };\n  };\n\n  AWSClient.prototype._translateQueue = function (queue) {\n    return {\n      queueARN: queue.queueARN,\n      name: queue.name\n    };\n  };\n\n  AWSClient.prototype._translateSoftphoneStreamStatistics = function (stats) {\n    stats.forEach(function (stat) {\n      if ('packetsCount' in stat) {\n        stat.packetCount = stat.packetsCount;\n        delete stat.packetsCount;\n      }\n    });\n    return stats;\n  };\n\n  AWSClient.prototype._translateSoftphoneCallReport = function (report) {\n    if ('handshakingTimeMillis' in report) {\n      report.handshakeTimeMillis = report.handshakingTimeMillis;\n      delete report.handshakingTimeMillis;\n    }\n\n    if ('preTalkingTimeMillis' in report) {\n      report.preTalkTimeMillis = report.preTalkingTimeMillis;\n      delete report.preTalkingTimeMillis;\n    }\n\n    if ('handshakingFailure' in report) {\n      report.handshakeFailure = report.handshakingFailure;\n      delete report.handshakingFailure;\n    }\n\n    if ('talkingTimeMillis' in report) {\n      report.talkTimeMillis = report.talkingTimeMillis;\n      delete report.talkingTimeMillis;\n    }\n\n    report.softphoneStreamStatistics = this._translateSoftphoneStreamStatistics(report.softphoneStreamStatistics);\n    return report;\n  };\n\n  connect.ClientBase = ClientBase;\n  connect.NullClient = NullClient;\n  connect.UpstreamConduitClient = UpstreamConduitClient;\n  connect.UpstreamConduitMasterClient = UpstreamConduitMasterClient;\n  connect.AWSClient = AWSClient;\n  connect.AgentAppClient = AgentAppClient;\n})();\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n  /**-------------------------------------------------------------------------\n   * GraphLink <<abstract class>>\n   *\n   * Represents the association of one or more attributes to a state transition.\n   */\n\n  var GraphLink = function (fromState, toState) {\n    connect.assertNotNull(fromState, 'fromState');\n    connect.assertNotNull(toState, 'toState');\n    this.fromState = fromState;\n    this.toState = toState;\n  };\n\n  GraphLink.prototype.getAssociations = function (context) {\n    throw connect.NotImplementedError();\n  };\n\n  GraphLink.prototype.getFromState = function () {\n    return this.fromState;\n  };\n\n  GraphLink.prototype.getToState = function () {\n    return this.toState;\n  };\n  /**-------------------------------------------------------------------------\n   * DirectGraphLink <<concrete class>> extends GraphLink\n   *\n   * Represents the by-value representation of one or more attributes to a\n   * state transition.\n   */\n\n\n  var DirectGraphLink = function (fromState, toState, associations) {\n    connect.assertNotNull(fromState, 'fromState');\n    connect.assertNotNull(toState, 'toState');\n    connect.assertNotNull(associations, 'associations');\n    GraphLink.call(this, fromState, toState);\n    this.associations = associations;\n  };\n\n  DirectGraphLink.prototype = Object.create(GraphLink.prototype);\n  DirectGraphLink.prototype.constructor = DirectGraphLink;\n\n  DirectGraphLink.prototype.getAssociations = function (context) {\n    return this.associations;\n  };\n  /**\n   * FunctionalGraphLink <<concrete class>> extends GraphLink\n   *\n   * Represents a functional association of one or more attributes to a\n   * state transition.\n   */\n\n\n  var FunctionalGraphLink = function (fromState, toState, closure) {\n    connect.assertNotNull(fromState, 'fromState');\n    connect.assertNotNull(toState, 'toState');\n    connect.assertNotNull(closure, 'closure');\n    connect.assertTrue(connect.isFunction(closure), 'closure must be a function');\n    GraphLink.call(this, fromState, toState);\n    this.closure = closure;\n  };\n\n  FunctionalGraphLink.prototype = Object.create(GraphLink.prototype);\n  FunctionalGraphLink.prototype.constructor = FunctionalGraphLink;\n\n  FunctionalGraphLink.prototype.getAssociations = function (context) {\n    return this.closure(context, this.getFromState(), this.getToState());\n  };\n  /**-------------------------------------------------------------------------\n   * EventGraph <<class>>\n   *\n   * Builds a map of associations from one state to another in context of a\n   * particular object.  The associations can be direct (one or more values)\n   * or functional (a method returning one or more values), and are used to\n   * provide additional contextual event hooks for the UI to consume.\n   */\n\n\n  var EventGraph = function () {\n    this.fromMap = {};\n  };\n\n  EventGraph.ANY = \"<<any>>\";\n\n  EventGraph.prototype.assoc = function (fromStateObj, toStateObj, assocObj) {\n    var self = this;\n\n    if (!fromStateObj) {\n      throw new Error(\"fromStateObj is not defined.\");\n    }\n\n    if (!toStateObj) {\n      throw new Error(\"toStateObj is not defined.\");\n    }\n\n    if (!assocObj) {\n      throw new Error(\"assocObj is not defined.\");\n    }\n\n    if (fromStateObj instanceof Array) {\n      fromStateObj.forEach(function (fromState) {\n        self.assoc(fromState, toStateObj, assocObj);\n      });\n    } else if (toStateObj instanceof Array) {\n      toStateObj.forEach(function (toState) {\n        self.assoc(fromStateObj, toState, assocObj);\n      });\n    } else {\n      if (typeof assocObj === \"function\") {\n        this._addAssociation(new FunctionalGraphLink(fromStateObj, toStateObj, assocObj));\n      } else if (assocObj instanceof Array) {\n        this._addAssociation(new DirectGraphLink(fromStateObj, toStateObj, assocObj));\n      } else {\n        this._addAssociation(new DirectGraphLink(fromStateObj, toStateObj, [assocObj]));\n      }\n    }\n\n    return this;\n  };\n\n  EventGraph.prototype.getAssociations = function (context, fromState, toState) {\n    connect.assertNotNull(fromState, 'fromState');\n    connect.assertNotNull(toState, 'toState');\n    var associations = [];\n    var toMapFromAny = this.fromMap[EventGraph.ANY] || {};\n    var toMap = this.fromMap[fromState] || {};\n    associations = associations.concat(this._getAssociationsFromMap(toMapFromAny, context, fromState, toState));\n    associations = associations.concat(this._getAssociationsFromMap(toMap, context, fromState, toState));\n    return associations;\n  };\n\n  EventGraph.prototype._addAssociation = function (assoc) {\n    var toMap = this.fromMap[assoc.getFromState()];\n\n    if (!toMap) {\n      toMap = this.fromMap[assoc.getFromState()] = {};\n    }\n\n    var assocList = toMap[assoc.getToState()];\n\n    if (!assocList) {\n      assocList = toMap[assoc.getToState()] = [];\n    }\n\n    assocList.push(assoc);\n  };\n\n  EventGraph.prototype._getAssociationsFromMap = function (map, context, fromState, toState) {\n    var assocList = (map[EventGraph.ANY] || []).concat(map[toState] || []);\n    return assocList.reduce(function (prev, assoc) {\n      return prev.concat(assoc.getAssociations(context));\n    }, []);\n  };\n\n  connect.EventGraph = EventGraph;\n})();\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n  /*----------------------------------------------------------------\n   * enum AgentStateType\n   */\n\n  connect.AgentStateType = connect.makeEnum(['init', 'routable', 'not_routable', 'offline']);\n  connect.AgentStatusType = connect.AgentStateType;\n  /**\n   * enum AgentAvailStates\n   */\n\n  connect.AgentAvailStates = connect.makeEnum(['Init', 'Busy', 'AfterCallWork', 'CallingCustomer', 'Dialing', 'Joining', 'PendingAvailable', 'PendingBusy']);\n  /**\n   * enum AgentErrorStates\n   */\n\n  connect.AgentErrorStates = connect.makeEnum(['Error', 'AgentHungUp', 'BadAddressAgent', 'BadAddressCustomer', 'Default', 'FailedConnectAgent', 'FailedConnectCustomer', 'InvalidLocale', 'LineEngagedAgent', 'LineEngagedCustomer', 'MissedCallAgent', 'MissedCallCustomer', 'MultipleCcpWindows', 'RealtimeCommunicationError']);\n  /*----------------------------------------------------------------\n   * enum AddressType\n   */\n\n  connect.EndpointType = connect.makeEnum(['phone_number', 'agent', 'queue']);\n  connect.AddressType = connect.EndpointType;\n  /*----------------------------------------------------------------\n   * enum ConnectionType\n   */\n\n  connect.ConnectionType = connect.makeEnum(['agent', 'inbound', 'outbound', 'monitoring']);\n  /*----------------------------------------------------------------\n   * enum ConnectionStateType\n   */\n\n  connect.ConnectionStateType = connect.makeEnum(['init', 'connecting', 'connected', 'hold', 'disconnected']);\n  connect.ConnectionStatusType = connect.ConnectionStateType;\n  connect.CONNECTION_ACTIVE_STATES = connect.set([connect.ConnectionStateType.CONNECTING, connect.ConnectionStateType.CONNECTED, connect.ConnectionStateType.HOLD]);\n  /*----------------------------------------------------------------\n   * enum ContactStateType\n   */\n\n  connect.ContactStateType = connect.makeEnum(['init', 'incoming', 'pending', 'connecting', 'connected', 'missed', 'error', 'ended']);\n  connect.ContactStatusType = connect.ContactStateType;\n  connect.CONTACT_ACTIVE_STATES = connect.makeEnum(['incoming', 'pending', 'connecting', 'connected']);\n  /*----------------------------------------------------------------\n   * enum ContactType\n   */\n\n  connect.ContactType = connect.makeEnum(['voice', 'queue_callback', 'chat', 'task']);\n  /*----------------------------------------------------------------\n   * enum ContactInitiationMethod\n   */\n\n  connect.ContactInitiationMethod = connect.makeEnum(['inbound', 'outbound', 'transfer', 'queue_transfer', 'callback', 'api', 'disconnect']);\n  /*----------------------------------------------------------------\n  * enum ChannelType\n  */\n\n  connect.ChannelType = connect.makeEnum(['VOICE', 'CHAT', 'TASK']);\n  /*----------------------------------------------------------------\n  * enum MediaType\n  */\n\n  connect.MediaType = connect.makeEnum(['softphone', 'chat', 'task']);\n  /*----------------------------------------------------------------\n   * enum SoftphoneCallType\n   */\n\n  connect.SoftphoneCallType = connect.makeEnum(['audio_video', 'video_only', 'audio_only', 'none']);\n  /*----------------------------------------------------------------\n   * enum for SoftphoneErrorTypes\n   */\n\n  connect.SoftphoneErrorTypes = connect.makeEnum(['unsupported_browser', 'microphone_not_shared', 'signalling_handshake_failure', 'signalling_connection_failure', 'ice_collection_timeout', 'user_busy_error', 'webrtc_error', 'realtime_communication_error', 'other']);\n  /*----------------------------------------------------------------\n   * enum for VoiceIdErrorTypes\n   */\n\n  connect.VoiceIdErrorTypes = connect.makeEnum(['no_speaker_id_found', 'get_speaker_id_failed', 'get_speaker_status_failed', 'opt_out_speaker_failed', 'start_session_failed', 'evaluate_speaker_failed', 'describe_session_failed', 'enroll_speaker_failed', 'update_speaker_id_failed', 'not_supported_on_conference_calls', 'timeout']);\n  /*----------------------------------------------------------------\n   * enum for CTI exceptions\n   */\n\n  connect.CTIExceptions = connect.makeEnum([\"AccessDeniedException\", \"InvalidStateException\", \"BadEndpointException\", \"InvalidAgentARNException\", \"InvalidConfigurationException\", \"InvalidContactTypeException\", \"PaginationException\", \"RefreshTokenExpiredException\", \"SendDataFailedException\", \"UnauthorizedException\", \"QuotaExceededException\"]);\n  /*----------------------------------------------------------------\n   * enum for VoiceId streaming status\n   */\n\n  connect.VoiceIdStreamingStatus = connect.makeEnum([\"ONGOING\", \"ENDED\"]);\n  /*----------------------------------------------------------------\n   * enum for VoiceId authentication decision\n   */\n\n  connect.VoiceIdAuthenticationDecision = connect.makeEnum([\"ACCEPT\", \"REJECT\", \"NOT_ENOUGH_SPEECH\", \"SPEAKER_NOT_ENROLLED\", \"SPEAKER_OPTED_OUT\", \"SPEAKER_ID_NOT_PROVIDED\"]);\n  /*----------------------------------------------------------------\n   * enum for contact flow authentication decision \n   */\n\n  connect.ContactFlowAuthenticationDecision = connect.makeEnum([\"Authenticated\", \"NotAuthenticated\", \"Inconclusive\", \"NotEnrolled\", \"OptedOut\", \"Error\"]);\n  /*----------------------------------------------------------------\n   * enum for VoiceId EnrollmentRequestStatus status\n   */\n\n  connect.VoiceIdEnrollmentRequestStatus = connect.makeEnum([\"NOT_ENOUGH_SPEECH\", \"IN_PROGRESS\", \"COMPLETED\", \"FAILED\"]);\n  /*----------------------------------------------------------------\n   * class Agent\n   */\n\n  var Agent = function () {\n    if (!connect.agent.initialized) {\n      throw new connect.StateError(\"The agent is not yet initialized!\");\n    }\n  };\n\n  Agent.prototype._getData = function () {\n    return connect.core.getAgentDataProvider().getAgentData();\n  };\n\n  Agent.prototype._createContactAPI = function (contactData) {\n    return new connect.Contact(contactData.contactId);\n  };\n\n  Agent.prototype.onContactPending = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.CONTACT_PENDING, f);\n  };\n\n  Agent.prototype.onRefresh = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.REFRESH, f);\n  };\n\n  Agent.prototype.onRoutable = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.ROUTABLE, f);\n  };\n\n  Agent.prototype.onNotRoutable = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.NOT_ROUTABLE, f);\n  };\n\n  Agent.prototype.onOffline = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.OFFLINE, f);\n  };\n\n  Agent.prototype.onError = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.ERROR, f);\n  };\n\n  Agent.prototype.onSoftphoneError = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.SOFTPHONE_ERROR, f);\n  };\n\n  Agent.prototype.onWebSocketConnectionLost = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.WEBSOCKET_CONNECTION_LOST, f);\n  };\n\n  Agent.prototype.onWebSocketConnectionGained = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.WEBSOCKET_CONNECTION_GAINED, f);\n  };\n\n  Agent.prototype.onAfterCallWork = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.ACW, f);\n  };\n\n  Agent.prototype.onStateChange = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.STATE_CHANGE, f);\n  };\n\n  Agent.prototype.onMuteToggle = function (f) {\n    connect.core.getUpstream().onUpstream(connect.AgentEvents.MUTE_TOGGLE, f);\n  };\n\n  Agent.prototype.onLocalMediaStreamCreated = function (f) {\n    connect.core.getUpstream().onUpstream(connect.AgentEvents.LOCAL_MEDIA_STREAM_CREATED, f);\n  };\n\n  Agent.prototype.onSpeakerDeviceChanged = function (f) {\n    connect.core.getUpstream().onUpstream(connect.ConfigurationEvents.SPEAKER_DEVICE_CHANGED, f);\n  };\n\n  Agent.prototype.onMicrophoneDeviceChanged = function (f) {\n    connect.core.getUpstream().onUpstream(connect.ConfigurationEvents.MICROPHONE_DEVICE_CHANGED, f);\n  };\n\n  Agent.prototype.onRingerDeviceChanged = function (f) {\n    connect.core.getUpstream().onUpstream(connect.ConfigurationEvents.RINGER_DEVICE_CHANGED, f);\n  };\n\n  Agent.prototype.mute = function () {\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.EventType.MUTE,\n      data: {\n        mute: true\n      }\n    });\n  };\n\n  Agent.prototype.unmute = function () {\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.EventType.MUTE,\n      data: {\n        mute: false\n      }\n    });\n  };\n\n  Agent.prototype.setSpeakerDevice = function (deviceId) {\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.ConfigurationEvents.SET_SPEAKER_DEVICE,\n      data: {\n        deviceId: deviceId\n      }\n    });\n  };\n\n  Agent.prototype.setMicrophoneDevice = function (deviceId) {\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.ConfigurationEvents.SET_MICROPHONE_DEVICE,\n      data: {\n        deviceId: deviceId\n      }\n    });\n  };\n\n  Agent.prototype.setRingerDevice = function (deviceId) {\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.ConfigurationEvents.SET_RINGER_DEVICE,\n      data: {\n        deviceId: deviceId\n      }\n    });\n  };\n\n  Agent.prototype.getState = function () {\n    return this._getData().snapshot.state;\n  };\n\n  Agent.prototype.getAvailabilityState = function () {\n    return this._getData().snapshot.agentAvailabilityState;\n  };\n\n  Agent.prototype.getStatus = Agent.prototype.getState;\n\n  Agent.prototype.getStateDuration = function () {\n    return connect.now() - this._getData().snapshot.state.startTimestamp.getTime() + connect.core.getSkew();\n  };\n\n  Agent.prototype.getStatusDuration = Agent.prototype.getStateDuration;\n\n  Agent.prototype.getPermissions = function () {\n    return this.getConfiguration().permissions;\n  };\n\n  Agent.prototype.getContacts = function (contactTypeFilter) {\n    var self = this;\n    return this._getData().snapshot.contacts.map(function (contactData) {\n      return self._createContactAPI(contactData);\n    }).filter(function (contact) {\n      return !contactTypeFilter || contact.getType() === contactTypeFilter;\n    });\n  };\n\n  Agent.prototype.getConfiguration = function () {\n    return this._getData().configuration;\n  };\n\n  Agent.prototype.getAgentStates = function () {\n    return this.getConfiguration().agentStates;\n  };\n\n  Agent.prototype.getRoutingProfile = function () {\n    return this.getConfiguration().routingProfile;\n  };\n\n  Agent.prototype.getChannelConcurrency = function (channel) {\n    var channelConcurrencyMap = this.getRoutingProfile().channelConcurrencyMap;\n\n    if (!channelConcurrencyMap) {\n      channelConcurrencyMap = Object.keys(connect.ChannelType).reduce(function (acc, key) {\n        // Exclude TASK from default concurrency.\n        if (key !== 'TASK') {\n          acc[connect.ChannelType[key]] = 1;\n        }\n\n        return acc;\n      }, {});\n    }\n\n    return channel ? channelConcurrencyMap[channel] || 0 : channelConcurrencyMap;\n  };\n\n  Agent.prototype.getName = function () {\n    return this.getConfiguration().name;\n  };\n\n  Agent.prototype.getExtension = function () {\n    return this.getConfiguration().extension;\n  };\n\n  Agent.prototype.getDialableCountries = function () {\n    return this.getConfiguration().dialableCountries;\n  };\n\n  Agent.prototype.isSoftphoneEnabled = function () {\n    return this.getConfiguration().softphoneEnabled;\n  };\n\n  Agent.prototype.setConfiguration = function (configuration, callbacks) {\n    var client = connect.core.getClient();\n\n    if (configuration && configuration.agentPreferences && !connect.isValidLocale(configuration.agentPreferences.locale)) {\n      if (callbacks && callbacks.failure) {\n        callbacks.failure(AgentErrorStates.INVALID_LOCALE);\n      }\n    } else {\n      client.call(connect.ClientMethods.UPDATE_AGENT_CONFIGURATION, {\n        configuration: connect.assertNotNull(configuration, 'configuration')\n      }, {\n        success: function (data) {\n          // We need to ask the shared worker to reload agent config\n          // once we change it so every tab has accurate config.\n          var conduit = connect.core.getUpstream();\n          conduit.sendUpstream(connect.EventType.RELOAD_AGENT_CONFIGURATION);\n\n          if (callbacks.success) {\n            callbacks.success(data);\n          }\n        },\n        failure: callbacks && callbacks.failure\n      });\n    }\n  };\n\n  Agent.prototype.setState = function (state, callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.PUT_AGENT_STATE, {\n      state: connect.assertNotNull(state, 'state')\n    }, callbacks);\n  };\n\n  Agent.prototype.setStatus = Agent.prototype.setState;\n\n  Agent.prototype.connect = function (endpointIn, params) {\n    var client = connect.core.getClient();\n    var endpoint = new connect.Endpoint(endpointIn); // Have to remove the endpointId field or AWS JS SDK gets mad.\n\n    delete endpoint.endpointId;\n    client.call(connect.ClientMethods.CREATE_OUTBOUND_CONTACT, {\n      endpoint: connect.assertNotNull(endpoint, 'endpoint'),\n      queueARN: params && (params.queueARN || params.queueId) || this.getRoutingProfile().defaultOutboundQueue.queueARN\n    }, params && {\n      success: params.success,\n      failure: params.failure\n    });\n  };\n\n  Agent.prototype.getAllQueueARNs = function () {\n    return this.getConfiguration().routingProfile.queues.map(function (queue) {\n      return queue.queueARN;\n    });\n  };\n\n  Agent.prototype.getEndpoints = function (queueARNs, callbacks, pageInfoIn) {\n    var self = this;\n    var client = connect.core.getClient();\n    connect.assertNotNull(callbacks, \"callbacks\");\n    connect.assertNotNull(callbacks.success, \"callbacks.success\");\n    var pageInfo = pageInfoIn || {};\n    pageInfo.endpoints = pageInfo.endpoints || [];\n    pageInfo.maxResults = pageInfo.maxResults || connect.DEFAULT_BATCH_SIZE; // Backwards compatibility allowing a single queueARN to be specified\n    // instead of an array.\n\n    if (!connect.isArray(queueARNs)) {\n      queueARNs = [queueARNs];\n    }\n\n    client.call(connect.ClientMethods.GET_ENDPOINTS, {\n      queueARNs: queueARNs,\n      nextToken: pageInfo.nextToken || null,\n      maxResults: pageInfo.maxResults\n    }, {\n      success: function (data) {\n        if (data.nextToken) {\n          self.getEndpoints(queueARNs, callbacks, {\n            nextToken: data.nextToken,\n            maxResults: pageInfo.maxResults,\n            endpoints: pageInfo.endpoints.concat(data.endpoints)\n          });\n        } else {\n          pageInfo.endpoints = pageInfo.endpoints.concat(data.endpoints);\n          var endpoints = pageInfo.endpoints.map(function (endpoint) {\n            return new connect.Endpoint(endpoint);\n          });\n          callbacks.success({\n            endpoints: endpoints,\n            addresses: endpoints\n          });\n        }\n      },\n      failure: callbacks.failure\n    });\n  };\n\n  Agent.prototype.getAddresses = Agent.prototype.getEndpoints;\n\n  Agent.prototype.toSnapshot = function () {\n    return new connect.AgentSnapshot(this._getData());\n  };\n  /*----------------------------------------------------------------\n   * class AgentSnapshot\n   */\n\n\n  var AgentSnapshot = function (agentData) {\n    connect.Agent.call(this);\n    this.agentData = agentData;\n  };\n\n  AgentSnapshot.prototype = Object.create(Agent.prototype);\n  AgentSnapshot.prototype.constructor = AgentSnapshot;\n\n  AgentSnapshot.prototype._getData = function () {\n    return this.agentData;\n  };\n\n  AgentSnapshot.prototype._createContactAPI = function (contactData) {\n    return new connect.ContactSnapshot(contactData);\n  };\n  /*----------------------------------------------------------------\n   * class Contact\n   */\n\n\n  var Contact = function (contactId) {\n    this.contactId = contactId;\n  };\n\n  Contact.prototype._getData = function () {\n    return connect.core.getAgentDataProvider().getContactData(this.getContactId());\n  };\n\n  Contact.prototype._createConnectionAPI = function (connectionData) {\n    if (this.getType() === connect.ContactType.CHAT) {\n      return new connect.ChatConnection(this.contactId, connectionData.connectionId);\n    } else if (this.getType() === connect.ContactType.TASK) {\n      return new connect.TaskConnection(this.contactId, connectionData.connectionId);\n    } else {\n      return new connect.VoiceConnection(this.contactId, connectionData.connectionId);\n    }\n  };\n\n  Contact.prototype.getEventName = function (eventName) {\n    return connect.core.getContactEventName(eventName, this.getContactId());\n  };\n\n  Contact.prototype.onRefresh = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.REFRESH), f);\n  };\n\n  Contact.prototype.onIncoming = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.INCOMING), f);\n  };\n\n  Contact.prototype.onConnecting = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.CONNECTING), f);\n  };\n\n  Contact.prototype.onPending = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.PENDING), f);\n  };\n\n  Contact.prototype.onAccepted = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.ACCEPTED), f);\n  };\n\n  Contact.prototype.onMissed = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.MISSED), f);\n  };\n\n  Contact.prototype.onEnded = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.ENDED), f);\n    bus.subscribe(this.getEventName(connect.ContactEvents.DESTROYED), f);\n  };\n\n  Contact.prototype.onDestroy = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.DESTROYED), f);\n  };\n\n  Contact.prototype.onACW = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.ACW), f);\n  };\n\n  Contact.prototype.onConnected = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.CONNECTED), f);\n  };\n\n  Contact.prototype.onError = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.ERROR), f);\n  };\n\n  Contact.prototype.getContactId = function () {\n    return this.contactId;\n  };\n\n  Contact.prototype.getOriginalContactId = function () {\n    return this._getData().initialContactId;\n  };\n\n  Contact.prototype.getInitialContactId = Contact.prototype.getOriginalContactId;\n\n  Contact.prototype.getType = function () {\n    return this._getData().type;\n  };\n\n  Contact.prototype.getContactDuration = function () {\n    return this._getData().contactDuration;\n  };\n\n  Contact.prototype.getState = function () {\n    return this._getData().state;\n  };\n\n  Contact.prototype.getStatus = Contact.prototype.getState;\n\n  Contact.prototype.getStateDuration = function () {\n    return connect.now() - this._getData().state.timestamp.getTime() + connect.core.getSkew();\n  };\n\n  Contact.prototype.getStatusDuration = Contact.prototype.getStateDuration;\n\n  Contact.prototype.getQueue = function () {\n    return this._getData().queue;\n  };\n\n  Contact.prototype.getQueueTimestamp = function () {\n    return this._getData().queueTimestamp;\n  };\n\n  Contact.prototype.getConnections = function () {\n    var self = this;\n    return this._getData().connections.map(function (connData) {\n      if (self.getType() === connect.ContactType.CHAT) {\n        return new connect.ChatConnection(self.contactId, connData.connectionId);\n      } else if (self.getType() === connect.ContactType.TASK) {\n        return new connect.TaskConnection(self.contactId, connData.connectionId);\n      } else {\n        return new connect.VoiceConnection(self.contactId, connData.connectionId);\n      }\n    });\n  };\n\n  Contact.prototype.getInitialConnection = function () {\n    return connect.find(this.getConnections(), function (conn) {\n      return conn.isInitialConnection();\n    }) || null;\n  };\n\n  Contact.prototype.getActiveInitialConnection = function () {\n    var initialConn = this.getInitialConnection();\n\n    if (initialConn != null && initialConn.isActive()) {\n      return initialConn;\n    } else {\n      return null;\n    }\n  };\n\n  Contact.prototype.getThirdPartyConnections = function () {\n    return this.getConnections().filter(function (conn) {\n      return !conn.isInitialConnection() && conn.getType() !== connect.ConnectionType.AGENT;\n    });\n  };\n\n  Contact.prototype.getSingleActiveThirdPartyConnection = function () {\n    return this.getThirdPartyConnections().filter(function (conn) {\n      return conn.isActive();\n    })[0] || null;\n  };\n\n  Contact.prototype.getAgentConnection = function () {\n    return connect.find(this.getConnections(), function (conn) {\n      var connType = conn.getType();\n      return connType === connect.ConnectionType.AGENT || connType === connect.ConnectionType.MONITORING;\n    });\n  };\n\n  Contact.prototype.getName = function () {\n    return this._getData().name;\n  };\n\n  Contact.prototype.getContactMetadata = function () {\n    return this._getData().contactMetadata;\n  };\n\n  Contact.prototype.getDescription = function () {\n    return this._getData().description;\n  };\n\n  Contact.prototype.getReferences = function () {\n    return this._getData().references;\n  };\n\n  Contact.prototype.getAttributes = function () {\n    return this._getData().attributes;\n  };\n\n  Contact.prototype.getContactFeatures = function () {\n    return this._getData().contactFeatures;\n  };\n\n  Contact.prototype.isSoftphoneCall = function () {\n    return connect.find(this.getConnections(), function (conn) {\n      return conn.getSoftphoneMediaInfo() != null;\n    }) != null;\n  };\n\n  Contact.prototype._isInbound = function () {\n    var initiationMethod = this._getData().initiationMethod;\n\n    return initiationMethod === connect.ContactInitiationMethod.OUTBOUND ? false : true;\n  };\n\n  Contact.prototype.isInbound = function () {\n    var conn = this.getInitialConnection(); // We will gradually change checking inbound by relying on contact initiationMethod\n\n    if (conn.getMediaType() === connect.MediaType.TASK) {\n      return this._isInbound();\n    }\n\n    return conn ? conn.getType() === connect.ConnectionType.INBOUND : false;\n  };\n\n  Contact.prototype.isConnected = function () {\n    return this.getStatus().type === connect.ContactStateType.CONNECTED;\n  };\n\n  Contact.prototype.accept = function (callbacks) {\n    var client = connect.core.getClient();\n    var self = this;\n    var contactId = this.getContactId();\n    client.call(connect.ClientMethods.ACCEPT_CONTACT, {\n      contactId: contactId\n    }, {\n      success: function (data) {\n        var conduit = connect.core.getUpstream();\n        conduit.sendUpstream(connect.EventType.BROADCAST, {\n          event: connect.ContactEvents.ACCEPTED,\n          data: new connect.Contact(contactId)\n        });\n        conduit.sendUpstream(connect.EventType.BROADCAST, {\n          event: connect.core.getContactEventName(connect.ContactEvents.ACCEPTED, self.getContactId()),\n          data: new connect.Contact(contactId)\n        }); // In Firefox, there's a browser restriction that an unfocused browser tab is not allowed to access the user's microphone.\n        // The problem is that the restriction could cause a webrtc session creation timeout error when you get an incoming call while you are not on the primary tab.\n        // It was hard to workaround the issue especially when you have multiple tabs open because you needed to find the right tab and accept the contact before the timeout.\n        // To avoid the error, when multiple tabs are open in Firefox, a webrtc session is not immediately created as an incoming softphone contact is detected.\n        // Instead, it waits until contact.accept() is called on a tab and lets the tab become the new primary tab and start the web rtc session there\n        // because the tab should be focused at the moment and have access to the user's microphone.\n\n        var contact = new connect.Contact(contactId);\n\n        if (connect.isFirefoxBrowser() && contact.isSoftphoneCall()) {\n          connect.core.triggerReadyToStartSessionEvent();\n        }\n\n        if (callbacks && callbacks.success) {\n          callbacks.success(data);\n        }\n      },\n      failure: callbacks ? callbacks.failure : null\n    });\n  };\n\n  Contact.prototype.destroy = function () {\n    connect.getLog().warn(\"contact.destroy() has been deprecated.\");\n  };\n\n  Contact.prototype.reject = function (callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.REJECT_CONTACT, {\n      contactId: this.getContactId()\n    }, callbacks);\n  };\n\n  Contact.prototype.complete = function (callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.COMPLETE_CONTACT, {\n      contactId: this.getContactId()\n    }, callbacks);\n  };\n\n  Contact.prototype.clear = function (callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.CLEAR_CONTACT, {\n      contactId: this.getContactId()\n    }, callbacks);\n  };\n\n  Contact.prototype.notifyIssue = function (issueCode, description, callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.NOTIFY_CONTACT_ISSUE, {\n      contactId: this.getContactId(),\n      issueCode: issueCode,\n      description: description\n    }, callbacks);\n  };\n\n  Contact.prototype.addConnection = function (endpointIn, callbacks) {\n    var client = connect.core.getClient();\n    var endpoint = new connect.Endpoint(endpointIn); // Have to remove the endpointId field or AWS JS SDK gets mad.\n\n    delete endpoint.endpointId;\n    client.call(connect.ClientMethods.CREATE_ADDITIONAL_CONNECTION, {\n      contactId: this.getContactId(),\n      endpoint: endpoint\n    }, callbacks);\n  };\n\n  Contact.prototype.toggleActiveConnections = function (callbacks) {\n    var client = connect.core.getClient();\n    var connectionId = null;\n    var holdingConn = connect.find(this.getConnections(), function (conn) {\n      return conn.getStatus().type === connect.ConnectionStateType.HOLD;\n    });\n\n    if (holdingConn != null) {\n      connectionId = holdingConn.getConnectionId();\n    } else {\n      var activeConns = this.getConnections().filter(function (conn) {\n        return conn.isActive();\n      });\n\n      if (activeConns.length > 0) {\n        connectionId = activeConns[0].getConnectionId();\n      }\n    }\n\n    client.call(connect.ClientMethods.TOGGLE_ACTIVE_CONNECTIONS, {\n      contactId: this.getContactId(),\n      connectionId: connectionId\n    }, callbacks);\n  };\n\n  Contact.prototype.sendSoftphoneMetrics = function (softphoneStreamStatistics, callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.SEND_SOFTPHONE_CALL_METRICS, {\n      contactId: this.getContactId(),\n      ccpVersion: global.ccpVersion,\n      softphoneStreamStatistics: softphoneStreamStatistics\n    }, callbacks);\n    connect.publishSoftphoneStats({\n      contactId: this.getContactId(),\n      ccpVersion: global.ccpVersion,\n      stats: softphoneStreamStatistics\n    });\n  };\n\n  Contact.prototype.sendSoftphoneReport = function (report, callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.SEND_SOFTPHONE_CALL_REPORT, {\n      contactId: this.getContactId(),\n      ccpVersion: global.ccpVersion,\n      report: report\n    }, callbacks);\n    connect.publishSoftphoneReport({\n      contactId: this.getContactId(),\n      ccpVersion: global.ccpVersion,\n      report: report\n    });\n  };\n\n  Contact.prototype.conferenceConnections = function (callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.CONFERENCE_CONNECTIONS, {\n      contactId: this.getContactId()\n    }, callbacks);\n  };\n\n  Contact.prototype.toSnapshot = function () {\n    return new connect.ContactSnapshot(this._getData());\n  };\n  /*----------------------------------------------------------------\n   * class ContactSnapshot\n   */\n\n\n  var ContactSnapshot = function (contactData) {\n    connect.Contact.call(this, contactData.contactId);\n    this.contactData = contactData;\n  };\n\n  ContactSnapshot.prototype = Object.create(Contact.prototype);\n  ContactSnapshot.prototype.constructor = ContactSnapshot;\n\n  ContactSnapshot.prototype._getData = function () {\n    return this.contactData;\n  };\n\n  ContactSnapshot.prototype._createConnectionAPI = function (connectionData) {\n    return new connect.ConnectionSnapshot(connectionData);\n  };\n  /*----------------------------------------------------------------\n   * class Connection\n   */\n\n\n  var Connection = function (contactId, connectionId) {\n    this.contactId = contactId;\n    this.connectionId = connectionId;\n\n    this._initMediaController();\n  };\n\n  Connection.prototype._getData = function () {\n    return connect.core.getAgentDataProvider().getConnectionData(this.getContactId(), this.getConnectionId());\n  };\n\n  Connection.prototype.getContactId = function () {\n    return this.contactId;\n  };\n\n  Connection.prototype.getConnectionId = function () {\n    return this.connectionId;\n  };\n\n  Connection.prototype.getEndpoint = function () {\n    return new connect.Endpoint(this._getData().endpoint);\n  };\n\n  Connection.prototype.getAddress = Connection.prototype.getEndpoint;\n\n  Connection.prototype.getState = function () {\n    return this._getData().state;\n  };\n\n  Connection.prototype.getStatus = Connection.prototype.getState;\n\n  Connection.prototype.getStateDuration = function () {\n    return connect.now() - this._getData().state.timestamp.getTime() + connect.core.getSkew();\n  };\n\n  Connection.prototype.getStatusDuration = Connection.prototype.getStateDuration;\n\n  Connection.prototype.getType = function () {\n    return this._getData().type;\n  };\n\n  Connection.prototype.isInitialConnection = function () {\n    return this._getData().initial;\n  };\n\n  Connection.prototype.isActive = function () {\n    return connect.contains(connect.CONNECTION_ACTIVE_STATES, this.getStatus().type);\n  };\n\n  Connection.prototype.isConnected = function () {\n    return this.getStatus().type === connect.ConnectionStateType.CONNECTED;\n  };\n\n  Connection.prototype.isConnecting = function () {\n    return this.getStatus().type === connect.ConnectionStateType.CONNECTING;\n  };\n\n  Connection.prototype.isOnHold = function () {\n    return this.getStatus().type === connect.ConnectionStateType.HOLD;\n  };\n\n  Connection.prototype.getSoftphoneMediaInfo = function () {\n    return this._getData().softphoneMediaInfo;\n  };\n  /**\n   * Gets the currently monitored contact info, Returns null if does not exists.\n   * @return {{agentName:string, customerName:string, joinTime:Date}}\n   */\n\n\n  Connection.prototype.getMonitorInfo = function () {\n    return this._getData().monitoringInfo;\n  };\n\n  Connection.prototype.destroy = function (callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.DESTROY_CONNECTION, {\n      contactId: this.getContactId(),\n      connectionId: this.getConnectionId()\n    }, callbacks);\n  };\n\n  Connection.prototype.sendDigits = function (digits, callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.SEND_DIGITS, {\n      contactId: this.getContactId(),\n      connectionId: this.getConnectionId(),\n      digits: digits\n    }, callbacks);\n  };\n\n  Connection.prototype.hold = function (callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.HOLD_CONNECTION, {\n      contactId: this.getContactId(),\n      connectionId: this.getConnectionId()\n    }, callbacks);\n  };\n\n  Connection.prototype.resume = function (callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.RESUME_CONNECTION, {\n      contactId: this.getContactId(),\n      connectionId: this.getConnectionId()\n    }, callbacks);\n  };\n\n  Connection.prototype.toSnapshot = function () {\n    return new connect.ConnectionSnapshot(this._getData());\n  };\n\n  Connection.prototype._initMediaController = function () {\n    if (this.getMediaInfo()) {\n      connect.core.mediaFactory.get(this).catch(function () {});\n    }\n  }; // Method for checking whether this connection is an agent-side connection \n  // (type AGENT or MONITORING)\n\n\n  Connection.prototype._isAgentConnectionType = function () {\n    var connectionType = this.getType();\n    return connectionType === connect.ConnectionType.AGENT || connectionType === connect.ConnectionType.MONITORING;\n  };\n  /**\n   * Utility method for checking whether this connection is an agent-side connection \n   * (type AGENT or MONITORING)\n   * @return {boolean} True if this connection is an agent-side connection. False otherwise.\n   */\n\n\n  Connection.prototype._isAgentConnectionType = function () {\n    var connectionType = this.getType();\n    return connectionType === connect.ConnectionType.AGENT || connectionType === connect.ConnectionType.MONITORING;\n  };\n  /*----------------------------------------------------------------\n  * Voice authenticator VoiceId\n  */\n\n\n  var VoiceId = function (contactId) {\n    this.contactId = contactId;\n  };\n\n  VoiceId.prototype.getSpeakerId = function () {\n    var self = this;\n    self.checkConferenceCall();\n    var client = connect.core.getClient();\n    return new Promise(function (resolve, reject) {\n      client.call(connect.AgentAppClientMethods.GET_SPEAKER_ID, {\n        \"contactId\": self.contactId,\n        \"instanceId\": connect.core.getAgentDataProvider().getInstanceId(),\n        \"awsAccountId\": connect.core.getAgentDataProvider().getAWSAccountId()\n      }, {\n        success: function (data) {\n          if (data.contactData.customerId) {\n            var obj = {\n              speakerId: data.contactData.customerId\n            };\n            resolve(obj);\n          } else {\n            var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.NO_SPEAKER_ID_FOUND, \"No speakerId assotiated with this call\", err);\n            reject(error);\n          }\n        },\n        failure: function (err) {\n          connect.getLog().error(\"Get SpeakerId failed\").withObject({\n            err: err\n          });\n          var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.GET_SPEAKER_ID_FAILED, \"Get SpeakerId failed\", err);\n          reject(error);\n        }\n      });\n    });\n  };\n\n  VoiceId.prototype.getSpeakerStatus = function () {\n    var self = this;\n    self.checkConferenceCall();\n    var client = connect.core.getClient();\n    return new Promise(function (resolve, reject) {\n      self.getSpeakerId().then(function (data) {\n        client.call(connect.AgentAppClientMethods.GET_SPEAKER_STATUS, {\n          \"SpeakerId\": connect.assertNotNull(data.speakerId, 'speakerId'),\n          \"DomainId\": \"ConnectDefaultDomainId\"\n        }, {\n          success: function (data) {\n            resolve(data);\n          },\n          failure: function (err) {\n            connect.getLog().error(\"getSpeakerStatus failed\").withObject({\n              err: err\n            });\n            var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.GET_SPEAKER_STATUS_FAILED, \"Get SpeakerStatus failed\", err);\n            reject(error);\n          }\n        });\n      }).catch(function (err) {\n        reject(err);\n      });\n    });\n  };\n\n  VoiceId.prototype.optOutSpeaker = function () {\n    var self = this;\n    self.checkConferenceCall();\n    var client = connect.core.getClient();\n    return new Promise(function (resolve, reject) {\n      self.getSpeakerId().then(function (data) {\n        client.call(connect.AgentAppClientMethods.OPT_OUT_VOICEID_SPEAKER, {\n          \"SpeakerId\": connect.assertNotNull(data.speakerId, 'speakerId'),\n          \"DomainId\": \"ConnectDefaultDomainId\"\n        }, {\n          success: function (data) {\n            connect.getLog().info(\"optOutSpeaker succeeded\"); //TODO add more logic here for filtering out data once VoiceId API finalized\n\n            resolve(data);\n          },\n          failure: function (err) {\n            connect.getLog().error(\"optOutSpeaker failed\").withObject({\n              err: err\n            });\n            var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.OPT_OUT_SPEAKER_FAILED, \"optOutSpeaker failed.\", err);\n            reject(error);\n          }\n        });\n      }).catch(function (err) {\n        reject(err);\n      });\n    });\n  };\n\n  VoiceId.prototype.startSession = function () {\n    var self = this;\n    self.checkConferenceCall();\n    var client = connect.core.getClient();\n    return new Promise(function (resolve, reject) {\n      client.call(connect.AgentAppClientMethods.START_VOICEID_SESSION, {\n        \"contactId\": self.contactId,\n        \"instanceId\": connect.core.getAgentDataProvider().getInstanceId(),\n        \"customerAccountId\": connect.core.getAgentDataProvider().getAWSAccountId(),\n        \"clientToken\": AWS.util.uuid.v4()\n      }, {\n        success: function (data) {\n          if (data.sessionId) {\n            resolve(data);\n          } else {\n            reject(Error(\"No contact id is returned from start session api.\"));\n          }\n        },\n        failure: function (err) {\n          connect.getLog().error(\"startVoiceIdSession failed\").withObject({\n            err: err\n          });\n          var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.START_SESSION_FAILED, \"startVoiceIdSession failed\", err);\n          reject(error);\n        }\n      });\n    });\n  };\n\n  VoiceId.prototype.evaluateSpeaker = function (startNew) {\n    var self = this;\n    self.checkConferenceCall();\n    var client = connect.core.getClient();\n    var contactData = connect.core.getAgentDataProvider().getContactData(this.contactId);\n    var maxPollTimes = 120; // Polling for maximum 2 mins.\n\n    var milliInterval = 1000;\n    return new Promise(function (resolve, reject) {\n      function evaluate() {\n        client.call(connect.AgentAppClientMethods.EVALUATE_SPEAKER_WITH_VOICEID, {\n          \"SessionNameOrId\": contactData.initialContactId || this.contactId\n        }, {\n          success: function (data) {\n            if (maxPollTimes-- !== 1) {\n              if (data.StreamingStatus === connect.VoiceIdStreamingStatus.ENDED && data.AuthenticationResult.Decision === connect.VoiceIdAuthenticationDecision.NOT_ENOUGH_SPEECH) {\n                data.AuthenticationResult.Decision = connect.ContactFlowAuthenticationDecision.INCONCLUSIVE;\n                resolve(data);\n              } else if (data.AuthenticationResult.Decision !== connect.VoiceIdAuthenticationDecision.NOT_ENOUGH_SPEECH) {\n                switch (data.AuthenticationResult.Decision) {\n                  case connect.VoiceIdAuthenticationDecision.ACCEPT:\n                    data.AuthenticationResult.Decision = connect.ContactFlowAuthenticationDecision.AUTHENTICATED;\n                    break;\n\n                  case connect.VoiceIdAuthenticationDecision.REJECT:\n                    data.AuthenticationResult.Decision = connect.ContactFlowAuthenticationDecision.NOT_AUTHENTICATED;\n                    break;\n\n                  case connect.VoiceIdAuthenticationDecision.SPEAKER_OPTED_OUT:\n                    data.AuthenticationResult.Decision = connect.ContactFlowAuthenticationDecision.OPTED_OUT;\n                    break;\n\n                  case connect.VoiceIdAuthenticationDecision.SPEAKER_NOT_ENROLLED:\n                    data.AuthenticationResult.Decision = connect.ContactFlowAuthenticationDecision.NOT_ENROLLED;\n                    break;\n\n                  default:\n                    data.AuthenticationResult.Decision = connect.ContactFlowAuthenticationDecision.ERROR;\n                }\n\n                resolve(data);\n              } else {\n                setTimeout(evaluate, milliInterval);\n              }\n            } else {\n              connect.getLog().error(\"evaluateSpeaker timeout\");\n              var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.TIMEOUT, \"evaluateSpeaker timeout\");\n              reject(error);\n            }\n          },\n          failure: function (err) {\n            connect.getLog().error(\"evaluateSpeaker failed\").withObject({\n              err: err\n            });\n            var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.EVALUATE_SPEAKER_FAILED, \"evaluateSpeaker failed\", err);\n            reject(error);\n          }\n        });\n      }\n\n      if (!startNew) {\n        evaluate();\n      } else {\n        self.startSession().then(function (data) {\n          evaluate();\n        }).catch(function (err) {\n          reject(err);\n        });\n      }\n    });\n  };\n\n  VoiceId.prototype.describeSession = function () {\n    var self = this;\n    var client = connect.core.getClient();\n    var contactData = connect.core.getAgentDataProvider().getContactData(this.contactId);\n    return new Promise(function (resolve, reject) {\n      client.call(connect.AgentAppClientMethods.DESCRIBE_VOICEID_SESSION, {\n        \"SessionNameOrId\": contactData.initialContactId || this.contactId\n      }, {\n        success: function (data) {\n          resolve(data);\n        },\n        failure: function (err) {\n          connect.getLog().error(\"describeSession failed\").withObject({\n            err: err\n          });\n          var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.DESCRIBE_SESSION_FAILED, \"describeSession failed\", err);\n          reject(error);\n        }\n      });\n    });\n  };\n\n  VoiceId.prototype.checkEnrollmentStatus = function () {\n    var self = this;\n    var maxPollingTimes = 120; // It is polling for maximum 10 mins.\n\n    var milliInterval = 5000;\n    return new Promise(function (resolve, reject) {\n      function describe() {\n        if (maxPollingTimes-- !== 1) {\n          self.describeSession().then(function (data) {\n            switch (data.Session.EnrollmentRequestDetails.Status) {\n              case connect.VoiceIdEnrollmentRequestStatus.COMPLETED:\n                resolve(data);\n                break;\n\n              case connect.VoiceIdEnrollmentRequestStatus.IN_PROGRESS:\n                setTimeout(describe, milliInterval);\n                break;\n\n              case connect.VoiceIdEnrollmentRequestStatus.NOT_ENOUGH_SPEECH:\n                if (data.Session.StreamingStatus !== connect.VoiceIdStreamingStatus.ENDED) {\n                  setTimeout(describe, milliInterval);\n                } else {\n                  self.startSession().then(function (data) {\n                    describe();\n                  }).catch(function (err, data) {\n                    reject(err);\n                  });\n                }\n\n                break;\n\n              default:\n                reject(Error(data.Session.EnrollmentRequestDetails.Status));\n            }\n          });\n        } else {\n          connect.getLog().error(\"describeSession timeout\");\n          var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.TIMEOUT, \"describeSession timeout\");\n          reject(error);\n        }\n      }\n\n      describe();\n    });\n  };\n\n  VoiceId.prototype.enrollSpeaker = function () {\n    var self = this;\n    self.checkConferenceCall();\n    var client = connect.core.getClient();\n    var contactData = connect.core.getAgentDataProvider().getContactData(this.contactId);\n    return new Promise(function (resolve, reject) {\n      client.call(connect.AgentAppClientMethods.ENROLL_SPEAKER_IN_VOICEID, {\n        \"SessionNameOrId\": contactData.initialContactId || this.contactId\n      }, {\n        success: function (data) {\n          if (data.Status === connect.VoiceIdEnrollmentRequestStatus.COMPLETED) {\n            resolve(data);\n          } else {\n            self.checkEnrollmentStatus().then(function (data) {\n              resolve(data);\n            }).catch(function (err) {\n              reject(err);\n            });\n          }\n        },\n        failure: function (err) {\n          connect.getLog().error(\"enrollSpeaker failed\").withObject({\n            err: err\n          });\n          var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.ENROLL_SPEAKER_FAILED, \"enrollSpeaker failed\", err);\n          reject(error);\n        }\n      });\n    });\n  };\n\n  VoiceId.prototype.updateSpeakerId = function (speakerId) {\n    var self = this;\n    self.checkConferenceCall();\n    var client = connect.core.getClient();\n    var contactData = connect.core.getAgentDataProvider().getContactData(this.contactId);\n    return new Promise(function (resolve, reject) {\n      client.call(connect.AgentAppClientMethods.UPDATE_VOICEID_SESSION, {\n        \"SessionNameOrId\": contactData.initialContactId || this.contactId,\n        \"SpeakerId\": connect.assertNotNull(speakerId, 'speakerId')\n      }, {\n        success: function (data) {\n          resolve(data);\n        },\n        failure: function (err) {\n          connect.getLog().error(\"updateSpeakerId failed\").withObject({\n            err: err\n          });\n          var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.UPDATE_SPEAKER_ID_FAILED, \"updateSpeakerId failed\", err);\n          reject(error);\n        }\n      });\n    });\n  };\n\n  VoiceId.prototype.checkConferenceCall = function () {\n    var self = this;\n    var isConferenceCall = connect.core.getAgentDataProvider().getContactData(self.contactId).connections.filter(function (conn) {\n      return connect.contains(connect.CONNECTION_ACTIVE_STATES, conn.state.type);\n    }).length > 2;\n\n    if (isConferenceCall) {\n      throw new connect.NotImplementedError(\"VoiceId is not supported for conference calls\");\n    }\n  };\n  /**\n   * @class VoiceConnection\n   * @param {number} contactId \n   * @param {number} connectionId \n   * @description - Provides voice media specific operations\n   */\n\n\n  var VoiceConnection = function (contactId, connectionId) {\n    this._speakerAuthenticator = new VoiceId(contactId);\n    Connection.call(this, contactId, connectionId);\n  };\n\n  VoiceConnection.prototype = Object.create(Connection.prototype);\n  VoiceConnection.prototype.constructor = VoiceConnection;\n  /**\n  * @deprecated\n  * Please use getMediaInfo \n  */\n\n  VoiceConnection.prototype.getSoftphoneMediaInfo = function () {\n    return this._getData().softphoneMediaInfo;\n  };\n\n  VoiceConnection.prototype.getMediaInfo = function () {\n    return this._getData().softphoneMediaInfo;\n  };\n\n  VoiceConnection.prototype.getMediaType = function () {\n    return connect.MediaType.SOFTPHONE;\n  };\n\n  VoiceConnection.prototype.getMediaController = function () {\n    return connect.core.mediaFactory.get(this);\n  };\n\n  VoiceConnection.prototype.getVoiceIdSpeakerId = function () {\n    return this._speakerAuthenticator.getSpeakerId();\n  };\n\n  VoiceConnection.prototype.getVoiceIdSpeakerStatus = function () {\n    return this._speakerAuthenticator.getSpeakerStatus();\n  };\n\n  VoiceConnection.prototype.optOutVoiceIdSpeaker = function () {\n    return this._speakerAuthenticator.optOutSpeaker();\n  };\n\n  VoiceConnection.prototype.evaluateSpeakerWithVoiceId = function (startNew) {\n    return this._speakerAuthenticator.evaluateSpeaker(startNew);\n  };\n\n  VoiceConnection.prototype.enrollSpeakerInVoiceId = function () {\n    return this._speakerAuthenticator.enrollSpeaker();\n  };\n\n  VoiceConnection.prototype.updateVoiceIdSpeakerId = function (speakerId) {\n    return this._speakerAuthenticator.updateSpeakerId(speakerId);\n  };\n  /**\n   * @class ChatConnection\n   * @param {*} contactId \n   * @param {*} connectionId \n   * @description adds the chat media specific functionality\n   */\n\n\n  var ChatConnection = function (contactId, connectionId) {\n    Connection.call(this, contactId, connectionId);\n  };\n\n  ChatConnection.prototype = Object.create(Connection.prototype);\n  ChatConnection.prototype.constructor = ChatConnection;\n\n  ChatConnection.prototype.getMediaInfo = function () {\n    var data = this._getData().chatMediaInfo;\n\n    if (!data) {\n      return null;\n    } else {\n      var contactData = connect.core.getAgentDataProvider().getContactData(this.contactId);\n      var mediaObject = {\n        contactId: this.contactId,\n        initialContactId: contactData.initialContactId || this.contactId,\n        participantId: this.connectionId,\n        getConnectionToken: connect.hitch(this, this.getConnectionToken)\n      };\n\n      if (data.connectionData) {\n        try {\n          mediaObject.participantToken = JSON.parse(data.connectionData).ConnectionAuthenticationToken;\n        } catch (e) {\n          connect.getLog().error(connect.LogComponent.CHAT, \"Connection data is invalid\").withObject(data).withException(e).sendInternalLogToServer();\n          mediaObject.participantToken = null;\n        }\n      }\n\n      mediaObject.participantToken = mediaObject.participantToken || null;\n      /** Just to keep the data accessible */\n\n      mediaObject.originalInfo = this._getData().chatMediaInfo;\n      return mediaObject;\n    }\n  };\n  /**\n  * Provides the chat connectionToken through the create_transport API for a specific contact and participant Id. \n  * @returns a promise which, upon success, returns the response from the createTransport API.\n  * Usage:\n  * connection.getConnectionToken()\n  *  .then(response => {})\n  *  .catch(error => {})\n  */\n\n\n  ChatConnection.prototype.getConnectionToken = function () {\n    client = connect.core.getClient();\n    var contactData = connect.core.getAgentDataProvider().getContactData(this.contactId);\n    var transportDetails = {\n      transportType: connect.TRANSPORT_TYPES.CHAT_TOKEN,\n      participantId: this.connectionId,\n      contactId: contactData.initialContactId || this.contactId\n    };\n    return new Promise(function (resolve, reject) {\n      client.call(connect.ClientMethods.CREATE_TRANSPORT, transportDetails, {\n        success: function (data) {\n          connect.getLog().info(\"getConnectionToken succeeded\").sendInternalLogToServer();\n          resolve(data);\n        },\n        failure: function (err, data) {\n          connect.getLog().error(\"getConnectionToken failed\").sendInternalLogToServer().withObject({\n            err: err,\n            data: data\n          });\n          reject(Error(\"getConnectionToken failed\"));\n        }\n      });\n    });\n  };\n\n  ChatConnection.prototype.getMediaType = function () {\n    return connect.MediaType.CHAT;\n  };\n\n  ChatConnection.prototype.getMediaController = function () {\n    return connect.core.mediaFactory.get(this);\n  };\n\n  ChatConnection.prototype._initMediaController = function () {\n    // Note that a chat media controller only needs to be produced for agent type connections.\n    if (this._isAgentConnectionType()) {\n      connect.core.mediaFactory.get(this).catch(function () {});\n    }\n  };\n  /**\n   * @class TaskConnection\n   * @param {*} contactId \n   * @param {*} connectionId \n   * @description adds the task media specific functionality\n   */\n\n\n  var TaskConnection = function (contactId, connectionId) {\n    Connection.call(this, contactId, connectionId);\n  };\n\n  TaskConnection.prototype = Object.create(Connection.prototype);\n  TaskConnection.prototype.constructor = TaskConnection;\n\n  TaskConnection.prototype.getMediaType = function () {\n    return connect.MediaType.TASK;\n  };\n\n  TaskConnection.prototype.getMediaInfo = function () {\n    var contactData = connect.core.getAgentDataProvider().getContactData(this.contactId);\n    var mediaObject = {\n      contactId: this.contactId,\n      initialContactId: contactData.initialContactId || this.contactId\n    };\n    return mediaObject;\n  };\n\n  TaskConnection.prototype.getMediaController = function () {\n    return connect.core.mediaFactory.get(this);\n  };\n  /*----------------------------------------------------------------\n   * class ConnectionSnapshot\n   */\n\n\n  var ConnectionSnapshot = function (connectionData) {\n    connect.Connection.call(this, connectionData.contactId, connectionData.connectionId);\n    this.connectionData = connectionData;\n  };\n\n  ConnectionSnapshot.prototype = Object.create(Connection.prototype);\n  ConnectionSnapshot.prototype.constructor = ConnectionSnapshot;\n\n  ConnectionSnapshot.prototype._getData = function () {\n    return this.connectionData;\n  };\n\n  ConnectionSnapshot.prototype._initMediaController = function () {};\n\n  var Endpoint = function (paramsIn) {\n    var params = paramsIn || {};\n    this.endpointARN = params.endpointId || params.endpointARN || null;\n    this.endpointId = this.endpointARN;\n    this.type = params.type || null;\n    this.name = params.name || null;\n    this.phoneNumber = params.phoneNumber || null;\n    this.agentLogin = params.agentLogin || null;\n    this.queue = params.queue || null;\n  };\n  /**\n   * Strip the SIP endpoint components from the phoneNumber field.\n   */\n\n\n  Endpoint.prototype.stripPhoneNumber = function () {\n    return this.phoneNumber ? this.phoneNumber.replace(/sip:([^@]*)@.*/, \"$1\") : \"\";\n  };\n  /**\n   * Create an Endpoint object from the given phone number and name.\n   */\n\n\n  Endpoint.byPhoneNumber = function (number, name) {\n    return new Endpoint({\n      type: connect.EndpointType.PHONE_NUMBER,\n      phoneNumber: number,\n      name: name || null\n    });\n  };\n  /*----------------------------------------------------------------\n   * class SoftphoneError\n   */\n\n\n  var SoftphoneError = function (errorType, errorMessage, endPointUrl) {\n    this.errorType = errorType;\n    this.errorMessage = errorMessage;\n    this.endPointUrl = endPointUrl;\n  };\n\n  SoftphoneError.prototype.getErrorType = function () {\n    return this.errorType;\n  };\n\n  SoftphoneError.prototype.getErrorMessage = function () {\n    return this.errorMessage;\n  };\n\n  SoftphoneError.prototype.getEndPointUrl = function () {\n    return this.endPointUrl;\n  };\n  /*----------------------------------------------------------------\n   * Root Subscription APIs.\n   */\n\n\n  connect.agent = function (f) {\n    var bus = connect.core.getEventBus();\n    var sub = bus.subscribe(connect.AgentEvents.INIT, f);\n\n    if (connect.agent.initialized) {\n      f(new connect.Agent());\n    }\n\n    return sub;\n  };\n\n  connect.agent.initialized = false;\n\n  connect.contact = function (f) {\n    var bus = connect.core.getEventBus();\n    return bus.subscribe(connect.ContactEvents.INIT, f);\n  };\n\n  connect.onWebsocketInitFailure = function (f) {\n    var bus = connect.core.getEventBus();\n    var sub = bus.subscribe(connect.WebSocketEvents.INIT_FAILURE, f);\n\n    if (connect.webSocketInitFailed) {\n      f();\n    }\n\n    return sub;\n  };\n  /**\n   * Starts the given function asynchronously only if the shared worker\n   * says we are the master for the given topic.  If there is no master for\n   * the given topic, we become the master and start the function.\n   *\n   * @param topic The master topic we are concerned about.\n   * @param f_true The callback to be invoked if we are the master.\n   * @param f_else [optional] A callback to be invoked if we are not the master.\n   */\n\n\n  connect.ifMaster = function (topic, f_true, f_else) {\n    connect.assertNotNull(topic, \"A topic must be provided.\");\n    connect.assertNotNull(f_true, \"A true callback must be provided.\");\n\n    if (!connect.core.masterClient) {\n      // We can't be the master because there is no master client!\n      connect.getLog().warn(\"We can't be the master for topic '%s' because there is no master client!\", topic).sendInternalLogToServer();\n\n      if (f_else) {\n        f_else();\n      }\n\n      return;\n    }\n\n    var masterClient = connect.core.getMasterClient();\n    masterClient.call(connect.MasterMethods.CHECK_MASTER, {\n      topic: topic\n    }, {\n      success: function (data) {\n        if (data.isMaster) {\n          f_true();\n        } else if (f_else) {\n          f_else();\n        }\n      }\n    });\n  };\n  /**\n   * Notify the shared worker and other CCP tabs that we are now the master for the given topic.\n   */\n\n\n  connect.becomeMaster = function (topic, successCallback, failureCallback) {\n    connect.assertNotNull(topic, \"A topic must be provided.\");\n\n    if (!connect.core.masterClient) {\n      // We can't be the master because there is no master client!\n      connect.getLog().warn(\"We can't be the master for topic '%s' because there is no master client!\", topic);\n\n      if (failureCallback) {\n        failureCallback();\n      }\n    } else {\n      var masterClient = connect.core.getMasterClient();\n      masterClient.call(connect.MasterMethods.BECOME_MASTER, {\n        topic: topic\n      }, {\n        success: function () {\n          if (successCallback) {\n            successCallback();\n          }\n        }\n      });\n    }\n  };\n\n  connect.Agent = Agent;\n  connect.AgentSnapshot = AgentSnapshot;\n  connect.Contact = Contact;\n  connect.ContactSnapshot = ContactSnapshot;\n  /** Default will get the Voice connection */\n\n  connect.Connection = VoiceConnection;\n  connect.BaseConnection = Connection;\n  connect.VoiceConnection = VoiceConnection;\n  connect.ChatConnection = ChatConnection;\n  connect.TaskConnection = TaskConnection;\n  connect.ConnectionSnapshot = ConnectionSnapshot;\n  connect.Endpoint = Endpoint;\n  connect.Address = Endpoint;\n  connect.SoftphoneError = SoftphoneError;\n})();\n\n!function (e) {\n  var n = {};\n\n  function t(o) {\n    if (n[o]) return n[o].exports;\n    var r = n[o] = {\n      i: o,\n      l: !1,\n      exports: {}\n    };\n    return e[o].call(r.exports, r, r.exports, t), r.l = !0, r.exports;\n  }\n\n  t.m = e, t.c = n, t.d = function (e, n, o) {\n    t.o(e, n) || Object.defineProperty(e, n, {\n      enumerable: !0,\n      get: o\n    });\n  }, t.r = function (e) {\n    \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n      value: \"Module\"\n    }), Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n  }, t.t = function (e, n) {\n    if (1 & n && (e = t(e)), 8 & n) return e;\n    if (4 & n && \"object\" == typeof e && e && e.__esModule) return e;\n    var o = Object.create(null);\n    if (t.r(o), Object.defineProperty(o, \"default\", {\n      enumerable: !0,\n      value: e\n    }), 2 & n && \"string\" != typeof e) for (var r in e) t.d(o, r, function (n) {\n      return e[n];\n    }.bind(null, r));\n    return o;\n  }, t.n = function (e) {\n    var n = e && e.__esModule ? function () {\n      return e.default;\n    } : function () {\n      return e;\n    };\n    return t.d(n, \"a\", n), n;\n  }, t.o = function (e, n) {\n    return Object.prototype.hasOwnProperty.call(e, n);\n  }, t.p = \"\", t(t.s = 2);\n}([function (e, n, t) {\n  \"use strict\";\n\n  var o = t(1),\n      r = \"NULL\",\n      i = \"CLIENT_LOGGER\",\n      c = \"DEBUG\",\n      s = 2e3,\n      a = \"aws/subscribe\",\n      u = \"aws/unsubscribe\",\n      l = \"aws/heartbeat\",\n      f = \"connected\",\n      p = \"disconnected\";\n\n  function d(e) {\n    return (d = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (e) {\n      return typeof e;\n    } : function (e) {\n      return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e;\n    })(e);\n  }\n\n  var b = {\n    assertTrue: function (e, n) {\n      if (!e) throw new Error(n);\n    },\n    assertNotNull: function (e, n) {\n      return b.assertTrue(null !== e && void 0 !== d(e), Object(o.sprintf)(\"%s must be provided\", n || \"A value\")), e;\n    },\n    isNonEmptyString: function (e) {\n      return \"string\" == typeof e && e.length > 0;\n    },\n    assertIsList: function (e, n) {\n      if (!Array.isArray(e)) throw new Error(n + \" is not an array\");\n    },\n    isFunction: function (e) {\n      return !!(e && e.constructor && e.call && e.apply);\n    },\n    isObject: function (e) {\n      return !(\"object\" !== d(e) || null === e);\n    },\n    isString: function (e) {\n      return \"string\" == typeof e;\n    },\n    isNumber: function (e) {\n      return \"number\" == typeof e;\n    }\n  },\n      g = new RegExp(\"^(wss://)\\\\w*\");\n  b.validWSUrl = function (e) {\n    return g.test(e);\n  }, b.getSubscriptionResponse = function (e, n, t) {\n    return {\n      topic: e,\n      content: {\n        status: n ? \"success\" : \"failure\",\n        topics: t\n      }\n    };\n  }, b.assertIsObject = function (e, n) {\n    if (!b.isObject(e)) throw new Error(n + \" is not an object!\");\n  }, b.addJitter = function (e) {\n    var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;\n    n = Math.min(n, 1);\n    var t = Math.random() > .5 ? 1 : -1;\n    return Math.floor(e + t * e * Math.random() * n);\n  }, b.isNetworkOnline = function () {\n    return navigator.onLine;\n  }, b.isNetworkFailure = function (e) {\n    return !(!e._debug || !e._debug.type) && \"NetworkingError\" === e._debug.type;\n  };\n  var m = b;\n\n  function y(e) {\n    return (y = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (e) {\n      return typeof e;\n    } : function (e) {\n      return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e;\n    })(e);\n  }\n\n  function S(e, n) {\n    return !n || \"object\" !== y(n) && \"function\" != typeof n ? function (e) {\n      if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      return e;\n    }(e) : n;\n  }\n\n  function k(e) {\n    return (k = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {\n      return e.__proto__ || Object.getPrototypeOf(e);\n    })(e);\n  }\n\n  function h(e, n) {\n    return (h = Object.setPrototypeOf || function (e, n) {\n      return e.__proto__ = n, e;\n    })(e, n);\n  }\n\n  function v(e, n) {\n    if (!(e instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n  }\n\n  function w(e, n) {\n    for (var t = 0; t < n.length; t++) {\n      var o = n[t];\n      o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, o.key, o);\n    }\n  }\n\n  function C(e, n, t) {\n    return n && w(e.prototype, n), t && w(e, t), e;\n  }\n\n  var T = function () {\n    function e() {\n      v(this, e);\n    }\n\n    return C(e, [{\n      key: \"debug\",\n      value: function (e) {}\n    }, {\n      key: \"info\",\n      value: function (e) {}\n    }, {\n      key: \"warn\",\n      value: function (e) {}\n    }, {\n      key: \"error\",\n      value: function (e) {}\n    }]), e;\n  }(),\n      O = {\n    DEBUG: 10,\n    INFO: 20,\n    WARN: 30,\n    ERROR: 40\n  },\n      I = function () {\n    function e() {\n      v(this, e), this.updateLoggerConfig(), this.consoleLoggerWrapper = _();\n    }\n\n    return C(e, [{\n      key: \"writeToClientLogger\",\n      value: function (e, n) {\n        if (this.hasClientLogger()) switch (e) {\n          case O.DEBUG:\n            return this._clientLogger.debug(n);\n\n          case O.INFO:\n            return this._clientLogger.info(n);\n\n          case O.WARN:\n            return this._clientLogger.warn(n);\n\n          case O.ERROR:\n            return this._clientLogger.error(n);\n        }\n      }\n    }, {\n      key: \"isLevelEnabled\",\n      value: function (e) {\n        return e >= this._level;\n      }\n    }, {\n      key: \"hasClientLogger\",\n      value: function () {\n        return null !== this._clientLogger;\n      }\n    }, {\n      key: \"getLogger\",\n      value: function (e) {\n        var n = e.prefix || \"\";\n        return this._logsDestination === c ? this.consoleLoggerWrapper : new N(n);\n      }\n    }, {\n      key: \"updateLoggerConfig\",\n      value: function (e) {\n        var n = e || {};\n        this._level = n.level || O.DEBUG, this._clientLogger = n.logger || null, this._logsDestination = r, n.debug && (this._logsDestination = c), n.logger && (this._logsDestination = i);\n      }\n    }]), e;\n  }(),\n      W = function () {\n    function e() {\n      v(this, e);\n    }\n\n    return C(e, [{\n      key: \"debug\",\n      value: function () {}\n    }, {\n      key: \"info\",\n      value: function () {}\n    }, {\n      key: \"warn\",\n      value: function () {}\n    }, {\n      key: \"error\",\n      value: function () {}\n    }]), e;\n  }(),\n      N = function (e) {\n    function n(e) {\n      var t;\n      return v(this, n), (t = S(this, k(n).call(this))).prefix = e || \"\", t;\n    }\n\n    return function (e, n) {\n      if (\"function\" != typeof n && null !== n) throw new TypeError(\"Super expression must either be null or a function\");\n      e.prototype = Object.create(n && n.prototype, {\n        constructor: {\n          value: e,\n          writable: !0,\n          configurable: !0\n        }\n      }), n && h(e, n);\n    }(n, W), C(n, [{\n      key: \"debug\",\n      value: function () {\n        for (var e = arguments.length, n = new Array(e), t = 0; t < e; t++) n[t] = arguments[t];\n\n        return this._log(O.DEBUG, n);\n      }\n    }, {\n      key: \"info\",\n      value: function () {\n        for (var e = arguments.length, n = new Array(e), t = 0; t < e; t++) n[t] = arguments[t];\n\n        return this._log(O.INFO, n);\n      }\n    }, {\n      key: \"warn\",\n      value: function () {\n        for (var e = arguments.length, n = new Array(e), t = 0; t < e; t++) n[t] = arguments[t];\n\n        return this._log(O.WARN, n);\n      }\n    }, {\n      key: \"error\",\n      value: function () {\n        for (var e = arguments.length, n = new Array(e), t = 0; t < e; t++) n[t] = arguments[t];\n\n        return this._log(O.ERROR, n);\n      }\n    }, {\n      key: \"_shouldLog\",\n      value: function (e) {\n        return E.hasClientLogger() && E.isLevelEnabled(e);\n      }\n    }, {\n      key: \"_writeToClientLogger\",\n      value: function (e, n) {\n        return E.writeToClientLogger(e, n);\n      }\n    }, {\n      key: \"_log\",\n      value: function (e, n) {\n        if (this._shouldLog(e)) {\n          var t = this._convertToSingleStatement(n);\n\n          return this._writeToClientLogger(e, t);\n        }\n      }\n    }, {\n      key: \"_convertToSingleStatement\",\n      value: function (e) {\n        var n = \"\";\n        this.prefix && (n += this.prefix + \" \");\n\n        for (var t = 0; t < e.length; t++) {\n          var o = e[t];\n          n += this._convertToString(o) + \" \";\n        }\n\n        return n;\n      }\n    }, {\n      key: \"_convertToString\",\n      value: function (e) {\n        try {\n          if (!e) return \"\";\n          if (m.isString(e)) return e;\n\n          if (m.isObject(e) && m.isFunction(e.toString)) {\n            var n = e.toString();\n            if (\"[object Object]\" !== n) return n;\n          }\n\n          return JSON.stringify(e);\n        } catch (n) {\n          return console.error(\"Error while converting argument to string\", e, n), \"\";\n        }\n      }\n    }]), n;\n  }(),\n      _ = function () {\n    var e = new W();\n    return e.debug = console.debug, e.info = console.info, e.warn = console.warn, e.error = console.error, e;\n  },\n      E = new I();\n\n  function L(e, n) {\n    for (var t = 0; t < n.length; t++) {\n      var o = n[t];\n      o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, o.key, o);\n    }\n  }\n\n  var F = function () {\n    function e(n) {\n      var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : s;\n      !function (e, n) {\n        if (!(e instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n      }(this, e), this.numAttempts = 0, this.executor = n, this.hasActiveReconnection = !1, this.defaultRetry = t;\n    }\n\n    var n, t, o;\n    return n = e, (t = [{\n      key: \"retry\",\n      value: function () {\n        var e = this;\n        this.hasActiveReconnection || (this.hasActiveReconnection = !0, setTimeout(function () {\n          e._execute();\n        }, this._getDelay()));\n      }\n    }, {\n      key: \"_execute\",\n      value: function () {\n        this.hasActiveReconnection = !1, this.executor(), this.numAttempts++;\n      }\n    }, {\n      key: \"connected\",\n      value: function () {\n        this.numAttempts = 0;\n      }\n    }, {\n      key: \"_getDelay\",\n      value: function () {\n        var e = Math.pow(2, this.numAttempts) * this.defaultRetry;\n        return e <= 3e4 ? e : 3e4;\n      }\n    }]) && L(n.prototype, t), o && L(n, o), e;\n  }();\n\n  t.d(n, \"a\", function () {\n    return R;\n  });\n\n  var x = function () {\n    var e = E.getLogger({}),\n        n = m.isNetworkOnline(),\n        t = {\n      primary: null,\n      secondary: null\n    },\n        o = {\n      reconnectWebSocket: !0,\n      websocketInitFailed: !1,\n      exponentialBackOffTime: 1e3,\n      exponentialTimeoutHandle: null,\n      lifeTimeTimeoutHandle: null,\n      webSocketInitCheckerTimeoutId: null,\n      connState: null\n    },\n        r = {\n      connectWebSocketRetryCount: 0,\n      connectionAttemptStartTime: null,\n      noOpenConnectionsTimestamp: null\n    },\n        i = {\n      pendingResponse: !1,\n      intervalHandle: null\n    },\n        c = {\n      initFailure: new Set(),\n      getWebSocketTransport: null,\n      subscriptionUpdate: new Set(),\n      subscriptionFailure: new Set(),\n      topic: new Map(),\n      allMessage: new Set(),\n      connectionGain: new Set(),\n      connectionLost: new Set(),\n      connectionOpen: new Set(),\n      connectionClose: new Set()\n    },\n        s = {\n      connConfig: null,\n      promiseHandle: null,\n      promiseCompleted: !0\n    },\n        d = {\n      subscribed: new Set(),\n      pending: new Set(),\n      subscriptionHistory: new Set()\n    },\n        b = {\n      responseCheckIntervalId: null,\n      requestCompleted: !0,\n      reSubscribeIntervalId: null,\n      consecutiveFailedSubscribeAttempts: 0,\n      consecutiveNoResponseRequest: 0\n    },\n        g = new F(function () {\n      U();\n    }),\n        y = new Set([a, u, l]),\n        S = setInterval(function () {\n      if (n !== m.isNetworkOnline()) {\n        if (!(n = m.isNetworkOnline())) return void J(e.info(\"Network offline\"));\n        var t = O();\n        n && (!t || w(t, WebSocket.CLOSING) || w(t, WebSocket.CLOSED)) && (J(e.info(\"Network online, connecting to WebSocket server\")), U());\n      }\n    }, 250),\n        k = function (n, t) {\n      n.forEach(function (n) {\n        try {\n          n(t);\n        } catch (n) {\n          J(e.error(\"Error executing callback\", n));\n        }\n      });\n    },\n        h = function (e) {\n      if (null === e) return \"NULL\";\n\n      switch (e.readyState) {\n        case WebSocket.CONNECTING:\n          return \"CONNECTING\";\n\n        case WebSocket.OPEN:\n          return \"OPEN\";\n\n        case WebSocket.CLOSING:\n          return \"CLOSING\";\n\n        case WebSocket.CLOSED:\n          return \"CLOSED\";\n\n        default:\n          return \"UNDEFINED\";\n      }\n    },\n        v = function () {\n      var n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : \"\";\n      J(e.debug(\"[\" + n + \"] Primary WebSocket: \" + h(t.primary) + \" | Secondary WebSocket: \" + h(t.secondary)));\n    },\n        w = function (e, n) {\n      return e && e.readyState === n;\n    },\n        C = function (e) {\n      return w(e, WebSocket.OPEN);\n    },\n        T = function (e) {\n      return null === e || void 0 === e.readyState || w(e, WebSocket.CLOSED);\n    },\n        O = function () {\n      return null !== t.secondary ? t.secondary : t.primary;\n    },\n        I = function () {\n      return C(O());\n    },\n        W = function () {\n      if (i.pendingResponse) return J(e.warn(\"Heartbeat response not received\")), clearInterval(i.intervalHandle), i.pendingResponse = !1, void U();\n      I() ? (J(e.debug(\"Sending heartbeat\")), O().send(G(l)), i.pendingResponse = !0) : (J(e.warn(\"Failed to send heartbeat since WebSocket is not open\")), v(\"sendHeartBeat\"), U());\n    },\n        N = function () {\n      o.exponentialBackOffTime = 1e3, i.pendingResponse = !1, o.reconnectWebSocket = !0, clearTimeout(o.lifeTimeTimeoutHandle), clearInterval(i.intervalHandle), clearTimeout(o.exponentialTimeoutHandle), clearTimeout(o.webSocketInitCheckerTimeoutId);\n    },\n        _ = function () {\n      b.consecutiveFailedSubscribeAttempts = 0, b.consecutiveNoResponseRequest = 0, clearInterval(b.responseCheckIntervalId), clearInterval(b.reSubscribeIntervalId);\n    },\n        L = function () {\n      r.connectWebSocketRetryCount = 0, r.connectionAttemptStartTime = null, r.noOpenConnectionsTimestamp = null;\n    },\n        x = function () {\n      try {\n        J(e.info(\"WebSocket connection established!\")), v(\"webSocketOnOpen\"), null !== o.connState && o.connState !== p || k(c.connectionGain), o.connState = f;\n        var n = Date.now();\n        k(c.connectionOpen, {\n          connectWebSocketRetryCount: r.connectWebSocketRetryCount,\n          connectionAttemptStartTime: r.connectionAttemptStartTime,\n          noOpenConnectionsTimestamp: r.noOpenConnectionsTimestamp,\n          connectionEstablishedTime: n,\n          timeToConnect: n - r.connectionAttemptStartTime,\n          timeWithoutConnection: r.noOpenConnectionsTimestamp ? n - r.noOpenConnectionsTimestamp : null\n        }), L(), N(), O().openTimestamp = Date.now(), 0 === d.subscribed.size && C(t.secondary) && D(t.primary, \"[Primary WebSocket] Closing WebSocket\"), (d.subscribed.size > 0 || d.pending.size > 0) && (C(t.secondary) && J(e.info(\"Subscribing secondary websocket to topics of primary websocket\")), d.subscribed.forEach(function (e) {\n          d.subscriptionHistory.add(e), d.pending.add(e);\n        }), d.subscribed.clear(), A()), W(), i.intervalHandle = setInterval(W, 1e4);\n        var a = 1e3 * s.connConfig.webSocketTransport.transportLifeTimeInSeconds;\n        J(e.debug(\"Scheduling WebSocket manager reconnection, after delay \" + a + \" ms\")), o.lifeTimeTimeoutHandle = setTimeout(function () {\n          J(e.debug(\"Starting scheduled WebSocket manager reconnection\")), U();\n        }, a);\n      } catch (n) {\n        J(e.error(\"Error after establishing WebSocket connection\", n));\n      }\n    },\n        R = function (n) {\n      v(\"webSocketOnError\"), J(e.error(\"WebSocketManager Error, error_event: \", JSON.stringify(n))), U();\n    },\n        j = function (n) {\n      var o = JSON.parse(n.data);\n\n      switch (o.topic) {\n        case a:\n          if (J(e.debug(\"Subscription Message received from webSocket server\", n.data)), b.requestCompleted = !0, b.consecutiveNoResponseRequest = 0, \"success\" === o.content.status) b.consecutiveFailedSubscribeAttempts = 0, o.content.topics.forEach(function (e) {\n            d.subscriptionHistory.delete(e), d.pending.delete(e), d.subscribed.add(e);\n          }), 0 === d.subscriptionHistory.size ? C(t.secondary) && (J(e.info(\"Successfully subscribed secondary websocket to all topics of primary websocket\")), D(t.primary, \"[Primary WebSocket] Closing WebSocket\")) : A(), k(c.subscriptionUpdate, o);else {\n            if (clearInterval(b.reSubscribeIntervalId), ++b.consecutiveFailedSubscribeAttempts, 5 === b.consecutiveFailedSubscribeAttempts) return k(c.subscriptionFailure, o), void (b.consecutiveFailedSubscribeAttempts = 0);\n            b.reSubscribeIntervalId = setInterval(function () {\n              A();\n            }, 500);\n          }\n          break;\n\n        case l:\n          J(e.debug(\"Heartbeat response received\")), i.pendingResponse = !1;\n          break;\n\n        default:\n          if (o.topic) {\n            if (J(e.debug(\"Message received for topic \" + o.topic)), C(t.primary) && C(t.secondary) && 0 === d.subscriptionHistory.size && this === t.primary) return void J(e.warn(\"Ignoring Message for Topic \" + o.topic + \", to avoid duplicates\"));\n            if (0 === c.allMessage.size && 0 === c.topic.size) return void J(e.warn(\"No registered callback listener for Topic\", o.topic));\n            k(c.allMessage, o), c.topic.has(o.topic) && k(c.topic.get(o.topic), o);\n          } else o.message ? J(e.warn(\"WebSocketManager Message Error\", o)) : J(e.warn(\"Invalid incoming message\", o));\n\n      }\n    },\n        A = function n() {\n      if (b.consecutiveNoResponseRequest > 3) return J(e.warn(\"Ignoring subscribePendingTopics since we have exhausted max subscription retries with no response\")), void k(c.subscriptionFailure, m.getSubscriptionResponse(a, !1, Array.from(d.pending)));\n      I() ? (clearInterval(b.responseCheckIntervalId), O().send(G(a, {\n        topics: Array.from(d.pending)\n      })), b.requestCompleted = !1, b.responseCheckIntervalId = setInterval(function () {\n        b.requestCompleted || (++b.consecutiveNoResponseRequest, n());\n      }, 1e3)) : J(e.warn(\"Ignoring subscribePendingTopics call since Default WebSocket is not open\"));\n    },\n        D = function (n, t) {\n      w(n, WebSocket.CONNECTING) || w(n, WebSocket.OPEN) ? n.close(1e3, t) : J(e.warn(\"Ignoring WebSocket Close request, WebSocket State: \" + h(n)));\n    },\n        M = function (e) {\n      D(t.primary, \"[Primary] WebSocket \" + e), D(t.secondary, \"[Secondary] WebSocket \" + e);\n    },\n        P = function () {\n      r.connectWebSocketRetryCount++;\n      var n = m.addJitter(o.exponentialBackOffTime, .3);\n      Date.now() + n <= s.connConfig.urlConnValidTime ? (J(e.debug(\"Scheduling WebSocket reinitialization, after delay \" + n + \" ms\")), o.exponentialTimeoutHandle = setTimeout(function () {\n        return q();\n      }, n), o.exponentialBackOffTime *= 2) : (J(e.warn(\"WebSocket URL cannot be used to establish connection\")), U());\n    },\n        H = function (n) {\n      N(), _(), J(e.error(\"WebSocket Initialization failed\")), o.websocketInitFailed = !0, M(\"Terminating WebSocket Manager\"), clearInterval(S), k(c.initFailure, {\n        connectWebSocketRetryCount: r.connectWebSocketRetryCount,\n        connectionAttemptStartTime: r.connectionAttemptStartTime,\n        reason: n\n      }), L();\n    },\n        G = function (e, n) {\n      return JSON.stringify({\n        topic: e,\n        content: n\n      });\n    },\n        z = function (n) {\n      return !!(m.isObject(n) && m.isObject(n.webSocketTransport) && m.isNonEmptyString(n.webSocketTransport.url) && m.validWSUrl(n.webSocketTransport.url) && 1e3 * n.webSocketTransport.transportLifeTimeInSeconds >= 3e5) || (J(e.error(\"Invalid WebSocket Connection Configuration\", n)), !1);\n    },\n        U = function () {\n      if (m.isNetworkOnline()) {\n        if (o.websocketInitFailed) J(e.debug(\"WebSocket Init had failed, ignoring this getWebSocketConnConfig request\"));else {\n          if (s.promiseCompleted) return N(), J(e.info(\"Fetching new WebSocket connection configuration\")), r.connectionAttemptStartTime = r.connectionAttemptStartTime || Date.now(), s.promiseCompleted = !1, s.promiseHandle = c.getWebSocketTransport(), s.promiseHandle.then(function (n) {\n            return s.promiseCompleted = !0, J(e.debug(\"Successfully fetched webSocket connection configuration\", n)), z(n) ? (s.connConfig = n, s.connConfig.urlConnValidTime = Date.now() + 85e3, g.connected(), q()) : (H(\"Invalid WebSocket connection configuration: \" + n), {\n              webSocketConnectionFailed: !0\n            });\n          }, function (n) {\n            return s.promiseCompleted = !0, J(e.error(\"Failed to fetch webSocket connection configuration\", n)), m.isNetworkFailure(n) && (J(e.info(\"Retrying fetching new WebSocket connection configuration\")), g.retry()), {\n              webSocketConnectionFailed: !0\n            };\n          });\n          J(e.debug(\"There is an ongoing getWebSocketConnConfig request, this request will be ignored\"));\n        }\n      } else J(e.info(\"Network offline, ignoring this getWebSocketConnConfig request\"));\n    },\n        q = function () {\n      if (o.websocketInitFailed) return J(e.info(\"web-socket initializing had failed, aborting re-init\")), {\n        webSocketConnectionFailed: !0\n      };\n      if (!m.isNetworkOnline()) return J(e.warn(\"System is offline aborting web-socket init\")), {\n        webSocketConnectionFailed: !0\n      };\n      J(e.info(\"Initializing Websocket Manager\")), v(\"initWebSocket\");\n\n      try {\n        if (z(s.connConfig)) {\n          var n = null;\n          return C(t.primary) ? (J(e.debug(\"Primary Socket connection is already open\")), w(t.secondary, WebSocket.CONNECTING) || (J(e.debug(\"Establishing a secondary web-socket connection\")), t.secondary = B()), n = t.secondary) : (w(t.primary, WebSocket.CONNECTING) || (J(e.debug(\"Establishing a primary web-socket connection\")), t.primary = B()), n = t.primary), o.webSocketInitCheckerTimeoutId = setTimeout(function () {\n            C(n) || P();\n          }, 1e3), {\n            webSocketConnectionFailed: !1\n          };\n        }\n      } catch (n) {\n        return J(e.error(\"Error Initializing web-socket-manager\", n)), H(\"Failed to initialize new WebSocket: \" + n.message), {\n          webSocketConnectionFailed: !0\n        };\n      }\n    },\n        B = function () {\n      var n = new WebSocket(s.connConfig.webSocketTransport.url);\n      return n.addEventListener(\"open\", x), n.addEventListener(\"message\", j), n.addEventListener(\"error\", R), n.addEventListener(\"close\", function (i) {\n        return function (n, i) {\n          J(e.info(\"Socket connection is closed\", n)), v(\"webSocketOnClose before-cleanup\"), k(c.connectionClose, {\n            openTimestamp: i.openTimestamp,\n            closeTimestamp: Date.now(),\n            connectionDuration: Date.now() - i.openTimestamp,\n            code: n.code,\n            reason: n.reason\n          }), T(t.primary) && (t.primary = null), T(t.secondary) && (t.secondary = null), o.reconnectWebSocket && (C(t.primary) || C(t.secondary) ? T(t.primary) && C(t.secondary) && (J(e.info(\"[Primary] WebSocket Cleanly Closed\")), t.primary = t.secondary, t.secondary = null) : (J(e.warn(\"Neither primary websocket and nor secondary websocket have open connections, attempting to re-establish connection\")), o.connState === p ? J(e.info(\"Ignoring connectionLost callback invocation\")) : (k(c.connectionLost, {\n            openTimestamp: i.openTimestamp,\n            closeTimestamp: Date.now(),\n            connectionDuration: Date.now() - i.openTimestamp,\n            code: n.code,\n            reason: n.reason\n          }), r.noOpenConnectionsTimestamp = Date.now()), o.connState = p, U()), v(\"webSocketOnClose after-cleanup\"));\n        }(i, n);\n      }), n;\n    },\n        J = function (e) {\n      return e && \"function\" == typeof e.sendInternalLogToServer && e.sendInternalLogToServer(), e;\n    };\n\n    this.init = function (n) {\n      if (m.assertTrue(m.isFunction(n), \"transportHandle must be a function\"), null === c.getWebSocketTransport) return c.getWebSocketTransport = n, U();\n      J(e.warn(\"Web Socket Manager was already initialized\"));\n    }, this.onInitFailure = function (e) {\n      return m.assertTrue(m.isFunction(e), \"cb must be a function\"), c.initFailure.add(e), o.websocketInitFailed && e(), function () {\n        return c.initFailure.delete(e);\n      };\n    }, this.onConnectionOpen = function (e) {\n      return m.assertTrue(m.isFunction(e), \"cb must be a function\"), c.connectionOpen.add(e), function () {\n        return c.connectionOpen.delete(e);\n      };\n    }, this.onConnectionClose = function (e) {\n      return m.assertTrue(m.isFunction(e), \"cb must be a function\"), c.connectionClose.add(e), function () {\n        return c.connectionClose.delete(e);\n      };\n    }, this.onConnectionGain = function (e) {\n      return m.assertTrue(m.isFunction(e), \"cb must be a function\"), c.connectionGain.add(e), I() && e(), function () {\n        return c.connectionGain.delete(e);\n      };\n    }, this.onConnectionLost = function (e) {\n      return m.assertTrue(m.isFunction(e), \"cb must be a function\"), c.connectionLost.add(e), o.connState === p && e(), function () {\n        return c.connectionLost.delete(e);\n      };\n    }, this.onSubscriptionUpdate = function (e) {\n      return m.assertTrue(m.isFunction(e), \"cb must be a function\"), c.subscriptionUpdate.add(e), function () {\n        return c.subscriptionUpdate.delete(e);\n      };\n    }, this.onSubscriptionFailure = function (e) {\n      return m.assertTrue(m.isFunction(e), \"cb must be a function\"), c.subscriptionFailure.add(e), function () {\n        return c.subscriptionFailure.delete(e);\n      };\n    }, this.onMessage = function (e, n) {\n      return m.assertNotNull(e, \"topicName\"), m.assertTrue(m.isFunction(n), \"cb must be a function\"), c.topic.has(e) ? c.topic.get(e).add(n) : c.topic.set(e, new Set([n])), function () {\n        return c.topic.get(e).delete(n);\n      };\n    }, this.onAllMessage = function (e) {\n      return m.assertTrue(m.isFunction(e), \"cb must be a function\"), c.allMessage.add(e), function () {\n        return c.allMessage.delete(e);\n      };\n    }, this.subscribeTopics = function (e) {\n      m.assertNotNull(e, \"topics\"), m.assertIsList(e), e.forEach(function (e) {\n        d.subscribed.has(e) || d.pending.add(e);\n      }), b.consecutiveNoResponseRequest = 0, A();\n    }, this.sendMessage = function (n) {\n      if (m.assertIsObject(n, \"payload\"), void 0 === n.topic || y.has(n.topic)) J(e.warn(\"Cannot send message, Invalid topic\", n));else {\n        try {\n          n = JSON.stringify(n);\n        } catch (t) {\n          return void J(e.warn(\"Error stringify message\", n));\n        }\n\n        I() ? O().send(n) : J(e.warn(\"Cannot send message, web socket connection is not open\"));\n      }\n    }, this.closeWebSocket = function () {\n      N(), _(), o.reconnectWebSocket = !1, clearInterval(S), M(\"User request to close WebSocket\");\n    }, this.terminateWebSocketManager = H;\n  },\n      R = {\n    create: function () {\n      return new x();\n    },\n    setGlobalConfig: function (e) {\n      var n = e.loggerConfig;\n      E.updateLoggerConfig(n);\n    },\n    LogLevel: O,\n    Logger: T\n  };\n}, function (e, n, t) {\n  var o;\n  !function () {\n    \"use strict\";\n\n    var r = {\n      not_string: /[^s]/,\n      not_bool: /[^t]/,\n      not_type: /[^T]/,\n      not_primitive: /[^v]/,\n      number: /[diefg]/,\n      numeric_arg: /[bcdiefguxX]/,\n      json: /[j]/,\n      not_json: /[^j]/,\n      text: /^[^\\x25]+/,\n      modulo: /^\\x25{2}/,\n      placeholder: /^\\x25(?:([1-9]\\d*)\\$|\\(([^)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-gijostTuvxX])/,\n      key: /^([a-z_][a-z_\\d]*)/i,\n      key_access: /^\\.([a-z_][a-z_\\d]*)/i,\n      index_access: /^\\[(\\d+)\\]/,\n      sign: /^[+-]/\n    };\n\n    function i(e) {\n      return function (e, n) {\n        var t,\n            o,\n            c,\n            s,\n            a,\n            u,\n            l,\n            f,\n            p,\n            d = 1,\n            b = e.length,\n            g = \"\";\n\n        for (o = 0; o < b; o++) if (\"string\" == typeof e[o]) g += e[o];else if (\"object\" == typeof e[o]) {\n          if ((s = e[o]).keys) for (t = n[d], c = 0; c < s.keys.length; c++) {\n            if (null == t) throw new Error(i('[sprintf] Cannot access property \"%s\" of undefined value \"%s\"', s.keys[c], s.keys[c - 1]));\n            t = t[s.keys[c]];\n          } else t = s.param_no ? n[s.param_no] : n[d++];\n          if (r.not_type.test(s.type) && r.not_primitive.test(s.type) && t instanceof Function && (t = t()), r.numeric_arg.test(s.type) && \"number\" != typeof t && isNaN(t)) throw new TypeError(i(\"[sprintf] expecting number but found %T\", t));\n\n          switch (r.number.test(s.type) && (f = t >= 0), s.type) {\n            case \"b\":\n              t = parseInt(t, 10).toString(2);\n              break;\n\n            case \"c\":\n              t = String.fromCharCode(parseInt(t, 10));\n              break;\n\n            case \"d\":\n            case \"i\":\n              t = parseInt(t, 10);\n              break;\n\n            case \"j\":\n              t = JSON.stringify(t, null, s.width ? parseInt(s.width) : 0);\n              break;\n\n            case \"e\":\n              t = s.precision ? parseFloat(t).toExponential(s.precision) : parseFloat(t).toExponential();\n              break;\n\n            case \"f\":\n              t = s.precision ? parseFloat(t).toFixed(s.precision) : parseFloat(t);\n              break;\n\n            case \"g\":\n              t = s.precision ? String(Number(t.toPrecision(s.precision))) : parseFloat(t);\n              break;\n\n            case \"o\":\n              t = (parseInt(t, 10) >>> 0).toString(8);\n              break;\n\n            case \"s\":\n              t = String(t), t = s.precision ? t.substring(0, s.precision) : t;\n              break;\n\n            case \"t\":\n              t = String(!!t), t = s.precision ? t.substring(0, s.precision) : t;\n              break;\n\n            case \"T\":\n              t = Object.prototype.toString.call(t).slice(8, -1).toLowerCase(), t = s.precision ? t.substring(0, s.precision) : t;\n              break;\n\n            case \"u\":\n              t = parseInt(t, 10) >>> 0;\n              break;\n\n            case \"v\":\n              t = t.valueOf(), t = s.precision ? t.substring(0, s.precision) : t;\n              break;\n\n            case \"x\":\n              t = (parseInt(t, 10) >>> 0).toString(16);\n              break;\n\n            case \"X\":\n              t = (parseInt(t, 10) >>> 0).toString(16).toUpperCase();\n          }\n\n          r.json.test(s.type) ? g += t : (!r.number.test(s.type) || f && !s.sign ? p = \"\" : (p = f ? \"+\" : \"-\", t = t.toString().replace(r.sign, \"\")), u = s.pad_char ? \"0\" === s.pad_char ? \"0\" : s.pad_char.charAt(1) : \" \", l = s.width - (p + t).length, a = s.width && l > 0 ? u.repeat(l) : \"\", g += s.align ? p + t + a : \"0\" === u ? p + a + t : a + p + t);\n        }\n\n        return g;\n      }(function (e) {\n        if (s[e]) return s[e];\n        var n,\n            t = e,\n            o = [],\n            i = 0;\n\n        for (; t;) {\n          if (null !== (n = r.text.exec(t))) o.push(n[0]);else if (null !== (n = r.modulo.exec(t))) o.push(\"%\");else {\n            if (null === (n = r.placeholder.exec(t))) throw new SyntaxError(\"[sprintf] unexpected placeholder\");\n\n            if (n[2]) {\n              i |= 1;\n              var c = [],\n                  a = n[2],\n                  u = [];\n              if (null === (u = r.key.exec(a))) throw new SyntaxError(\"[sprintf] failed to parse named argument key\");\n\n              for (c.push(u[1]); \"\" !== (a = a.substring(u[0].length));) if (null !== (u = r.key_access.exec(a))) c.push(u[1]);else {\n                if (null === (u = r.index_access.exec(a))) throw new SyntaxError(\"[sprintf] failed to parse named argument key\");\n                c.push(u[1]);\n              }\n\n              n[2] = c;\n            } else i |= 2;\n\n            if (3 === i) throw new Error(\"[sprintf] mixing positional and named placeholders is not (yet) supported\");\n            o.push({\n              placeholder: n[0],\n              param_no: n[1],\n              keys: n[2],\n              sign: n[3],\n              pad_char: n[4],\n              align: n[5],\n              width: n[6],\n              precision: n[7],\n              type: n[8]\n            });\n          }\n          t = t.substring(n[0].length);\n        }\n\n        return s[e] = o;\n      }(e), arguments);\n    }\n\n    function c(e, n) {\n      return i.apply(null, [e].concat(n || []));\n    }\n\n    var s = Object.create(null);\n    n.sprintf = i, n.vsprintf = c, \"undefined\" != typeof window && (window.sprintf = i, window.vsprintf = c, void 0 === (o = function () {\n      return {\n        sprintf: i,\n        vsprintf: c\n      };\n    }.call(n, t, n, e)) || (e.exports = o));\n  }();\n}, function (e, n, t) {\n  \"use strict\";\n\n  t.r(n), function (e) {\n    t.d(n, \"WebSocketManager\", function () {\n      return r;\n    });\n    var o = t(0);\n    e.connect = e.connect || {}, connect.WebSocketManager = o.a;\n    var r = o.a;\n  }.call(this, t(3));\n}, function (e, n) {\n  var t;\n\n  t = function () {\n    return this;\n  }();\n\n  try {\n    t = t || new Function(\"return this\")();\n  } catch (e) {\n    \"object\" == typeof window && (t = window);\n  }\n\n  e.exports = t;\n}]);\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n  connect.core = {};\n  connect.core.initialized = false;\n  connect.version = \"1.6.6\";\n  connect.DEFAULT_BATCH_SIZE = 500;\n  var CCP_SYN_TIMEOUT = 1000; // 1 sec\n\n  var CCP_ACK_TIMEOUT = 3000; // 3 sec\n\n  var CCP_LOAD_TIMEOUT = 3000; // 3 sec\n\n  var CCP_IFRAME_REFRESH_INTERVAL = 5000; // 5 sec\n\n  var LEGACY_LOGIN_URL_PATTERN = \"https://{alias}.awsapps.com/auth/?client_id={client_id}&redirect_uri={redirect}\";\n  var CLIENT_ID_MAP = {\n    \"us-east-1\": \"06919f4fd8ed324e\"\n  };\n  var AUTHORIZE_ENDPOINT = \"/auth/authorize\";\n  var LEGACY_AUTHORIZE_ENDPOINT = \"/connect/auth/authorize\";\n  var AUTHORIZE_RETRY_INTERVAL = 2000;\n  var AUTHORIZE_MAX_RETRY = 5;\n  var LEGACY_WHITELISTED_ORIGINS_ENDPOINT = \"/connect/whitelisted-origins\";\n  var WHITELISTED_ORIGINS_ENDPOINT = \"/whitelisted-origins\";\n  var WHITELISTED_ORIGINS_RETRY_INTERVAL = 2000;\n  var WHITELISTED_ORIGINS_MAX_RETRY = 5;\n  connect.numberOfConnectedCCPs = 0;\n  /**\n   * @deprecated\n   * This function was only meant for internal use. \n   * The name is misleading for what it should do.\n   * Internally we have replaced its usage with `getLoginUrl`.\n   */\n\n  var createLoginUrl = function (params) {\n    var redirect = \"https://lily.us-east-1.amazonaws.com/taw/auth/code\";\n    connect.assertNotNull(redirect);\n\n    if (params.loginUrl) {\n      return params.loginUrl;\n    } else if (params.alias) {\n      log.warn(\"The `alias` param is deprecated and should not be expected to function properly. Please use `ccpUrl` or `loginUrl`. See https://github.com/amazon-connect/amazon-connect-streams/blob/master/README.md#connectcoreinitccp for valid parameters.\");\n      return LEGACY_LOGIN_URL_PATTERN.replace(\"{alias}\", params.alias).replace(\"{client_id}\", CLIENT_ID_MAP[\"us-east-1\"]).replace(\"{redirect}\", global.encodeURIComponent(redirect));\n    } else {\n      return params.ccpUrl;\n    }\n  };\n  /**\n   * Replaces `createLoginUrl`, as that function's name was misleading.\n   * The `params.alias` parameter is deprecated. Please refrain from using it.\n   */\n\n\n  var getLoginUrl = function (params) {\n    var redirect = \"https://lily.us-east-1.amazonaws.com/taw/auth/code\";\n    connect.assertNotNull(redirect);\n\n    if (params.loginUrl) {\n      return params.loginUrl;\n    } else if (params.alias) {\n      log.warn(\"The `alias` param is deprecated and should not be expected to function properly. Please use `ccpUrl` or `loginUrl`. See https://github.com/amazon-connect/amazon-connect-streams/blob/master/README.md#connectcoreinitccp for valid parameters.\");\n      return LEGACY_LOGIN_URL_PATTERN.replace(\"{alias}\", params.alias).replace(\"{client_id}\", CLIENT_ID_MAP[\"us-east-1\"]).replace(\"{redirect}\", global.encodeURIComponent(redirect));\n    } else {\n      return params.ccpUrl;\n    }\n  };\n  /**-------------------------------------------------------------------------\n  * Returns scheme://host:port for a given url\n  */\n\n\n  function sanitizeDomain(url) {\n    var domain = url.match(/^(?:https?:\\/\\/)?(?:[^@\\n]+@)?(?:www\\.)?([^:\\/\\n?]+)/ig);\n    return domain.length ? domain[0] : \"\";\n  }\n  /**-------------------------------------------------------------------------\n    * Print a warning message if the Connect core is not initialized.\n    */\n\n\n  connect.core.checkNotInitialized = function () {\n    if (connect.core.initialized) {\n      var log = connect.getLog();\n      log.warn(\"Connect core already initialized, only needs to be initialized once.\").sendInternalLogToServer();\n    }\n  };\n  /**-------------------------------------------------------------------------\n   * Basic Connect client initialization.\n   * Should be used only by the API Shared Worker.\n   */\n\n\n  connect.core.init = function (params) {\n    connect.core.eventBus = new connect.EventBus();\n    connect.core.agentDataProvider = new AgentDataProvider(connect.core.getEventBus());\n    connect.core.initClient(params);\n    connect.core.initAgentAppClient(params);\n    connect.core.initialized = true;\n  };\n  /**-------------------------------------------------------------------------\n   * Initialized AWS client\n   * Should be used by Shared Worker to update AWS client with new credentials\n   * after refreshed authentication.\n   */\n\n\n  connect.core.initClient = function (params) {\n    connect.assertNotNull(params, 'params');\n    var authToken = connect.assertNotNull(params.authToken, 'params.authToken');\n    var region = connect.assertNotNull(params.region, 'params.region');\n    var endpoint = params.endpoint || null;\n    connect.core.client = new connect.AWSClient(authToken, region, endpoint);\n  };\n  /**-------------------------------------------------------------------------\n   * Initialized AgentApp client\n   * Should be used by Shared Worker to update AgentApp client with new credentials\n   * after refreshed authentication.\n   */\n\n\n  connect.core.initAgentAppClient = function (params) {\n    connect.assertNotNull(params, 'params');\n    var authToken = connect.assertNotNull(params.authToken, 'params.authToken');\n    var authCookieName = connect.assertNotNull(params.authCookieName, 'params.authCookieName');\n    var endpoint = connect.assertNotNull(params.agentAppEndpoint, 'params.agentAppEndpoint');\n    connect.core.agentAppClient = new connect.AgentAppClient(authCookieName, authToken, endpoint);\n  };\n  /**-------------------------------------------------------------------------\n   * Uninitialize Connect.\n   */\n\n\n  connect.core.terminate = function () {\n    connect.core.client = new connect.NullClient();\n    connect.core.agentAppClient = new connect.NullClient();\n    connect.core.masterClient = new connect.NullClient();\n    var bus = connect.core.getEventBus();\n    if (bus) bus.unsubscribeAll();\n    connect.core.bus = new connect.EventBus();\n    connect.core.agentDataProvider = null;\n    connect.core.softphoneManager = null;\n    connect.core.upstream = null;\n    connect.core.keepaliveManager = null;\n    connect.agent.initialized = false;\n    connect.core.initialized = false;\n  };\n  /**-------------------------------------------------------------------------\n   * Setup the SoftphoneManager to be initialized when the agent\n   * is determined to have softphone enabled.\n   */\n\n\n  connect.core.softphoneUserMediaStream = null;\n\n  connect.core.getSoftphoneUserMediaStream = function () {\n    return connect.core.softphoneUserMediaStream;\n  };\n\n  connect.core.setSoftphoneUserMediaStream = function (stream) {\n    connect.core.softphoneUserMediaStream = stream;\n  };\n\n  connect.core.initRingtoneEngines = function (params) {\n    connect.assertNotNull(params, \"params\");\n\n    var setupRingtoneEngines = function (ringtoneSettings) {\n      connect.assertNotNull(ringtoneSettings, \"ringtoneSettings\");\n      connect.assertNotNull(ringtoneSettings.voice, \"ringtoneSettings.voice\");\n      connect.assertTrue(ringtoneSettings.voice.ringtoneUrl || ringtoneSettings.voice.disabled, \"ringtoneSettings.voice.ringtoneUrl must be provided or ringtoneSettings.voice.disabled must be true\");\n      connect.assertNotNull(ringtoneSettings.queue_callback, \"ringtoneSettings.queue_callback\");\n      connect.assertTrue(ringtoneSettings.queue_callback.ringtoneUrl || ringtoneSettings.queue_callback.disabled, \"ringtoneSettings.voice.ringtoneUrl must be provided or ringtoneSettings.queue_callback.disabled must be true\");\n      connect.core.ringtoneEngines = {};\n      connect.agent(function (agent) {\n        agent.onRefresh(function () {\n          connect.ifMaster(connect.MasterTopics.RINGTONE, function () {\n            if (!ringtoneSettings.voice.disabled && !connect.core.ringtoneEngines.voice) {\n              connect.core.ringtoneEngines.voice = new connect.VoiceRingtoneEngine(ringtoneSettings.voice);\n              connect.getLog().info(\"VoiceRingtoneEngine initialized.\").sendInternalLogToServer();\n            }\n\n            if (!ringtoneSettings.chat.disabled && !connect.core.ringtoneEngines.chat) {\n              connect.core.ringtoneEngines.chat = new connect.ChatRingtoneEngine(ringtoneSettings.chat);\n              connect.getLog().info(\"ChatRingtoneEngine initialized.\").sendInternalLogToServer();\n            }\n\n            if (!ringtoneSettings.task.disabled && !connect.core.ringtoneEngines.task) {\n              connect.core.ringtoneEngines.task = new connect.TaskRingtoneEngine(ringtoneSettings.task);\n              connect.getLog().info(\"TaskRingtoneEngine initialized.\").sendInternalLogToServer();\n            }\n\n            if (!ringtoneSettings.queue_callback.disabled && !connect.core.ringtoneEngines.queue_callback) {\n              connect.core.ringtoneEngines.queue_callback = new connect.QueueCallbackRingtoneEngine(ringtoneSettings.queue_callback);\n              connect.getLog().info(\"QueueCallbackRingtoneEngine initialized.\").sendInternalLogToServer();\n            }\n          });\n        });\n      });\n      handleRingerDeviceChange();\n    };\n\n    var mergeParams = function (params, otherParams) {\n      // For backwards compatibility: support pulling disabled flag and ringtoneUrl\n      // from softphone config if it exists from downstream into the ringtone config.\n      params.ringtone = params.ringtone || {};\n      params.ringtone.voice = params.ringtone.voice || {};\n      params.ringtone.queue_callback = params.ringtone.queue_callback || {};\n      params.ringtone.chat = params.ringtone.chat || {\n        disabled: true\n      };\n      params.ringtone.task = params.ringtone.task || {\n        disabled: true\n      };\n\n      if (otherParams.softphone) {\n        if (otherParams.softphone.disableRingtone) {\n          params.ringtone.voice.disabled = true;\n          params.ringtone.queue_callback.disabled = true;\n        }\n\n        if (otherParams.softphone.ringtoneUrl) {\n          params.ringtone.voice.ringtoneUrl = otherParams.softphone.ringtoneUrl;\n          params.ringtone.queue_callback.ringtoneUrl = otherParams.softphone.ringtoneUrl;\n        }\n      }\n\n      if (otherParams.chat) {\n        if (otherParams.chat.disableRingtone) {\n          params.ringtone.chat.disabled = true;\n        }\n\n        if (otherParams.chat.ringtoneUrl) {\n          params.ringtone.chat.ringtoneUrl = otherParams.chat.ringtoneUrl;\n        }\n      } // Merge in ringtone settings from downstream.\n\n\n      if (otherParams.ringtone) {\n        params.ringtone.voice = connect.merge(params.ringtone.voice, otherParams.ringtone.voice || {});\n        params.ringtone.queue_callback = connect.merge(params.ringtone.queue_callback, otherParams.ringtone.voice || {});\n        params.ringtone.chat = connect.merge(params.ringtone.chat, otherParams.ringtone.chat || {});\n      }\n    }; // Merge params from params.softphone and params.chat into params.ringtone\n    // for embedded and non-embedded use cases so that defaults are picked up.\n\n\n    mergeParams(params, params);\n\n    if (connect.isFramed()) {\n      // If the CCP is in a frame, wait for configuration from downstream.\n      var bus = connect.core.getEventBus();\n      bus.subscribe(connect.EventType.CONFIGURE, function (data) {\n        this.unsubscribe(); // Merge all params from data into params for any overridden\n        // values in either legacy \"softphone\" or \"ringtone\" settings.\n\n        mergeParams(params, data);\n        setupRingtoneEngines(params.ringtone);\n      });\n    } else {\n      setupRingtoneEngines(params.ringtone);\n    }\n  };\n\n  var handleRingerDeviceChange = function () {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.ConfigurationEvents.SET_RINGER_DEVICE, setRingerDevice);\n  };\n\n  var setRingerDevice = function (data) {\n    if (connect.keys(connect.core.ringtoneEngines).length === 0 || !data || !data.deviceId) {\n      return;\n    }\n\n    var deviceId = data.deviceId;\n\n    for (var ringtoneType in connect.core.ringtoneEngines) {\n      connect.core.ringtoneEngines[ringtoneType].setOutputDevice(deviceId);\n    }\n\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.ConfigurationEvents.RINGER_DEVICE_CHANGED,\n      data: {\n        deviceId: deviceId\n      }\n    });\n  };\n\n  connect.core.initSoftphoneManager = function (paramsIn) {\n    var params = paramsIn || {};\n\n    var competeForMasterOnAgentUpdate = function (softphoneParamsIn) {\n      var softphoneParams = connect.merge(params.softphone || {}, softphoneParamsIn);\n      connect.agent(function (agent) {\n        if (!agent.getChannelConcurrency(connect.ChannelType.VOICE)) {\n          return;\n        }\n\n        agent.onRefresh(function () {\n          var sub = this;\n          connect.ifMaster(connect.MasterTopics.SOFTPHONE, function () {\n            if (!connect.core.softphoneManager && agent.isSoftphoneEnabled()) {\n              // Become master to send logs, since we need logs from softphone tab.\n              connect.becomeMaster(connect.MasterTopics.SEND_LOGS);\n              connect.core.softphoneManager = new connect.SoftphoneManager(softphoneParams);\n              sub.unsubscribe();\n            }\n          });\n        });\n      });\n    };\n    /**\n     * If the window is framed, we need to wait for a CONFIGURE message from\n     * downstream before we try to initialize, unless params.allowFramedSoftphone is true.\n     */\n\n\n    if (connect.isFramed() && !params.allowFramedSoftphone) {\n      var bus = connect.core.getEventBus();\n      bus.subscribe(connect.EventType.CONFIGURE, function (data) {\n        if (data.softphone && data.softphone.allowFramedSoftphone) {\n          this.unsubscribe();\n          competeForMasterOnAgentUpdate(data.softphone);\n        }\n\n        setupEventListenersForMultiTabUseInFirefox(data.softphone);\n      });\n    } else {\n      competeForMasterOnAgentUpdate(params);\n      setupEventListenersForMultiTabUseInFirefox(params);\n    }\n\n    connect.agent(function (agent) {\n      // Sync mute across all tabs \n      if (agent.isSoftphoneEnabled() && agent.getChannelConcurrency(connect.ChannelType.VOICE)) {\n        connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n          event: connect.EventType.MUTE\n        });\n      }\n    });\n\n    function setupEventListenersForMultiTabUseInFirefox(softphoneParamsIn) {\n      var softphoneParams = connect.merge(params.softphone || {}, softphoneParamsIn); // keep the softphone params for external use\n\n      connect.core.softphoneParams = softphoneParams;\n\n      if (connect.isFirefoxBrowser()) {\n        // In Firefox, when a tab takes over another tab's softphone primary,\n        // the previous primary tab should delete sofphone manager and stop microphone\n        connect.core.getUpstream().onUpstream(connect.EventType.MASTER_RESPONSE, function (res) {\n          if (res.data && res.data.topic === connect.MasterTopics.SOFTPHONE && res.data.takeOver && res.data.masterId !== connect.core.portStreamId) {\n            if (connect.core.softphoneManager) {\n              connect.core.softphoneManager.onInitContactSub.unsubscribe();\n              delete connect.core.softphoneManager;\n            }\n\n            var userMediaStream = connect.core.getSoftphoneUserMediaStream();\n\n            if (userMediaStream) {\n              userMediaStream.getTracks().forEach(function (track) {\n                track.stop();\n              });\n              connect.core.setSoftphoneUserMediaStream(null);\n            }\n          }\n        }); // In Firefox, when multiple tabs are open,\n        // webrtc session is not started until READY_TO_START_SESSION event is triggered\n\n        connect.core.getEventBus().subscribe(connect.ConnectionEvents.READY_TO_START_SESSION, function () {\n          connect.ifMaster(connect.MasterTopics.SOFTPHONE, function () {\n            if (connect.core.softphoneManager) {\n              connect.core.softphoneManager.startSession();\n            }\n          }, function () {\n            connect.becomeMaster(connect.MasterTopics.SOFTPHONE, function () {\n              connect.agent(function (agent) {\n                if (!connect.core.softphoneManager && agent.isSoftphoneEnabled()) {\n                  connect.becomeMaster(connect.MasterTopics.SEND_LOGS);\n                  connect.core.softphoneManager = new connect.SoftphoneManager(softphoneParams);\n                  connect.core.softphoneManager.startSession();\n                }\n              });\n            });\n          });\n        }); // handling outbound-call and auto-accept cases for pending session\n\n        connect.contact(function (c) {\n          connect.agent(function (agent) {\n            c.onRefresh(function (contact) {\n              if (connect.hasOtherConnectedCCPs() && document.visibilityState === 'visible' && (contact.getStatus().type === connect.ContactStatusType.CONNECTING || contact.getStatus().type === connect.ContactStatusType.INCOMING)) {\n                var isOutBoundCall = contact.isSoftphoneCall() && !contact.isInbound();\n                var isAutoAcceptEnabled = contact.isSoftphoneCall() && agent.getConfiguration().softphoneAutoAccept;\n                var isQueuedCallback = contact.getType() === connect.ContactType.QUEUE_CALLBACK;\n\n                if (isOutBoundCall || isAutoAcceptEnabled || isQueuedCallback) {\n                  connect.core.triggerReadyToStartSessionEvent();\n                }\n              }\n            });\n          });\n        });\n      }\n    }\n  }; // trigger READY_TO_START_SESSION event in a context with Softphone Manager\n  // internal use only\n\n\n  connect.core.triggerReadyToStartSessionEvent = function () {\n    var allowFramedSoftphone = connect.core.softphoneParams && connect.core.softphoneParams.allowFramedSoftphone;\n\n    if (connect.isCCP()) {\n      if (allowFramedSoftphone) {\n        // the event is triggered in this iframed CCP context\n        connect.core.getEventBus().trigger(connect.ConnectionEvents.READY_TO_START_SESSION);\n      } else {\n        if (connect.isFramed()) {\n          // if this is an iframed CCP, the event is send to downstream (CRM)\n          connect.core.getUpstream().sendDownstream(connect.ConnectionEvents.READY_TO_START_SESSION);\n        } else {\n          // if this is a standalone CCP, trigger this event in this CCP context\n          connect.core.getEventBus().trigger(connect.ConnectionEvents.READY_TO_START_SESSION);\n        }\n      }\n    } else {\n      if (allowFramedSoftphone) {\n        // the event is send to the upstream (iframed CCP)\n        connect.core.getUpstream().sendUpstream(connect.ConnectionEvents.READY_TO_START_SESSION);\n      } else {\n        // the event is triggered in this CRM context\n        connect.core.getEventBus().trigger(connect.ConnectionEvents.READY_TO_START_SESSION);\n      }\n    }\n  };\n\n  connect.core.initPageOptions = function (params) {\n    connect.assertNotNull(params, \"params\");\n\n    if (connect.isFramed()) {\n      // If the CCP is in a frame, wait for configuration from downstream.\n      var bus = connect.core.getEventBus();\n      bus.subscribe(connect.EventType.CONFIGURE, function (data) {\n        connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n          event: connect.ConfigurationEvents.CONFIGURE,\n          data: data\n        });\n      });\n    }\n  }; //Internal use only.\n\n\n  connect.core.authorize = function (endpoint) {\n    var options = {\n      credentials: 'include'\n    };\n    var authorizeEndpoint = endpoint;\n\n    if (!authorizeEndpoint) {\n      authorizeEndpoint = connect.core.isLegacyDomain() ? LEGACY_AUTHORIZE_ENDPOINT : AUTHORIZE_ENDPOINT;\n    }\n\n    return connect.fetch(authorizeEndpoint, options, AUTHORIZE_RETRY_INTERVAL, AUTHORIZE_MAX_RETRY);\n  };\n  /**\n   * @deprecated\n   * This used to be used internally, but is no longer needed.\n   */\n\n\n  connect.core.verifyDomainAccess = function (authToken, endpoint) {\n    connect.getLog().warn(\"This API will be deprecated in the next major version release\");\n\n    if (!connect.isFramed()) {\n      return Promise.resolve();\n    }\n\n    var options = {\n      headers: {\n        'X-Amz-Bearer': authToken\n      }\n    };\n    var whitelistedOriginsEndpoint = null;\n\n    if (endpoint) {\n      whitelistedOriginsEndpoint = endpoint;\n    } else {\n      whitelistedOriginsEndpoint = connect.core.isLegacyDomain() ? LEGACY_WHITELISTED_ORIGINS_ENDPOINT : WHITELISTED_ORIGINS_ENDPOINT;\n    }\n\n    return connect.fetch(whitelistedOriginsEndpoint, options, WHITELISTED_ORIGINS_RETRY_INTERVAL, WHITELISTED_ORIGINS_MAX_RETRY).then(function (response) {\n      var topDomain = sanitizeDomain(window.document.referrer);\n      var isAllowed = response.whitelistedOrigins.some(function (origin) {\n        return topDomain === sanitizeDomain(origin);\n      });\n      return isAllowed ? Promise.resolve() : Promise.reject();\n    });\n  };\n  /**-------------------------------------------------------------------------\n   * Returns true if this window's href is on the legacy connect domain. \n   * Only useful for internal use. \n   */\n\n\n  connect.core.isLegacyDomain = function (url) {\n    url = url || window.location.href;\n    return url.includes('.awsapps.com');\n  };\n  /**-------------------------------------------------------------------------\n   * Initializes Connect by creating or connecting to the API Shared Worker.\n   * Used only by the CCP\n   */\n\n\n  connect.core.initSharedWorker = function (params) {\n    connect.core.checkNotInitialized();\n\n    if (connect.core.initialized) {\n      return;\n    }\n\n    connect.assertNotNull(params, 'params');\n    var sharedWorkerUrl = connect.assertNotNull(params.sharedWorkerUrl, 'params.sharedWorkerUrl');\n    var authToken = connect.assertNotNull(params.authToken, 'params.authToken');\n    var refreshToken = connect.assertNotNull(params.refreshToken, 'params.refreshToken');\n    var authTokenExpiration = connect.assertNotNull(params.authTokenExpiration, 'params.authTokenExpiration');\n    var region = connect.assertNotNull(params.region, 'params.region');\n    var endpoint = params.endpoint || null;\n    var authorizeEndpoint = params.authorizeEndpoint;\n\n    if (!authorizeEndpoint) {\n      authorizeEndpoint = connect.core.isLegacyDomain() ? LEGACY_AUTHORIZE_ENDPOINT : AUTHORIZE_ENDPOINT;\n    }\n\n    var agentAppEndpoint = params.agentAppEndpoint || null;\n    var authCookieName = params.authCookieName || null;\n\n    try {\n      // Initialize the event bus and agent data providers.\n      connect.core.eventBus = new connect.EventBus({\n        logEvents: true\n      });\n      connect.core.agentDataProvider = new AgentDataProvider(connect.core.getEventBus());\n      connect.core.mediaFactory = new connect.MediaFactory(params); // Create the shared worker and upstream conduit.\n\n      var worker = new SharedWorker(sharedWorkerUrl, \"ConnectSharedWorker\");\n      var conduit = new connect.Conduit(\"ConnectSharedWorkerConduit\", new connect.PortStream(worker.port), new connect.WindowIOStream(window, parent)); // Set the global upstream conduit for external use.\n\n      connect.core.upstream = conduit;\n      connect.core.webSocketProvider = new WebSocketProvider(); // Close our port to the shared worker before the window closes.\n\n      global.onunload = function () {\n        conduit.sendUpstream(connect.EventType.CLOSE);\n        worker.port.close();\n      };\n\n      connect.getLog().scheduleUpstreamLogPush(conduit);\n      connect.getLog().scheduleDownstreamClientSideLogsPush(); // Bridge all upstream messages into the event bus.\n\n      conduit.onAllUpstream(connect.core.getEventBus().bridge()); // Pass all upstream messages (from shared worker) downstream (to CCP consumer).\n\n      conduit.onAllUpstream(conduit.passDownstream());\n\n      if (connect.isFramed()) {\n        // Bridge all downstream messages into the event bus.\n        conduit.onAllDownstream(connect.core.getEventBus().bridge()); // Pass all downstream messages (from CCP consumer) upstream (to shared worker).\n\n        conduit.onAllDownstream(conduit.passUpstream());\n      } // Send configuration up to the shared worker.\n\n\n      conduit.sendUpstream(connect.EventType.CONFIGURE, {\n        authToken: authToken,\n        authTokenExpiration: authTokenExpiration,\n        endpoint: endpoint,\n        refreshToken: refreshToken,\n        region: region,\n        authorizeEndpoint: authorizeEndpoint,\n        agentAppEndpoint: agentAppEndpoint,\n        authCookieName: authCookieName\n      });\n      conduit.onUpstream(connect.EventType.ACKNOWLEDGE, function (data) {\n        connect.getLog().info(\"Acknowledged by the ConnectSharedWorker!\").sendInternalLogToServer();\n        connect.core.initialized = true;\n        connect.core.portStreamId = data.id;\n        this.unsubscribe();\n      }); // Add all upstream log entries to our own logger.\n\n      conduit.onUpstream(connect.EventType.LOG, function (logEntry) {\n        if (logEntry.loggerId !== connect.getLog().getLoggerId()) {\n          connect.getLog().addLogEntry(connect.LogEntry.fromObject(logEntry));\n        }\n      });\n      conduit.onUpstream(connect.EventType.SERVER_BOUND_INTERNAL_LOG, function (logEntry) {\n        if (logEntry.loggerId !== connect.getLog().getLoggerId()) {\n          connect.getLog().sendInternalLogEntryToServer(connect.LogEntry.fromObject(logEntry));\n        }\n      }); // Reload the page if the shared worker detects an API auth failure.\n\n      conduit.onUpstream(connect.EventType.AUTH_FAIL, function (logEntry) {\n        location.reload();\n      });\n      conduit.onUpstream(connect.EventType.UPDATE_CONNECTED_CCPS, function (data) {\n        connect.getLog().info(\"Number of connected CCPs updated: \" + data.length);\n        connect.numberOfConnectedCCPs = data.length;\n      });\n      connect.core.client = new connect.UpstreamConduitClient(conduit);\n      connect.core.masterClient = new connect.UpstreamConduitMasterClient(conduit); // Pass the TERMINATE request upstream to the shared worker.\n\n      connect.core.getEventBus().subscribe(connect.EventType.TERMINATE, conduit.passUpstream()); // Refresh the page when we receive the TERMINATED response from the\n      // shared worker.\n\n      connect.core.getEventBus().subscribe(connect.EventType.TERMINATED, function () {\n        window.location.reload(true);\n      });\n      worker.port.start(); // Attempt to get permission to show notifications.\n\n      var nm = connect.core.getNotificationManager();\n      nm.requestPermission();\n    } catch (e) {\n      connect.getLog().error(\"Failed to initialize the API shared worker, we're dead!\").withException(e).sendInternalLogToServer();\n    }\n  };\n  /**-------------------------------------------------------------------------\n   * Initializes Connect by creating or connecting to the API Shared Worker.\n   * Initializes Connect by loading the CCP in an iframe and connecting to it.\n   */\n\n\n  connect.core.initCCP = function (containerDiv, paramsIn) {\n    connect.core.checkNotInitialized();\n\n    if (connect.core.initialized) {\n      return;\n    } // For backwards compatibility, when instead of taking a params object\n    // as input we only accepted ccpUrl.\n\n\n    var params = {};\n\n    if (typeof paramsIn === 'string') {\n      params.ccpUrl = paramsIn;\n    } else {\n      params = paramsIn;\n    }\n\n    connect.assertNotNull(containerDiv, 'containerDiv');\n    connect.assertNotNull(params.ccpUrl, 'params.ccpUrl'); // Create the CCP iframe and append it to the container div.\n\n    var iframe = document.createElement('iframe');\n    iframe.src = params.ccpUrl;\n    iframe.allow = \"microphone; autoplay\";\n    iframe.style = \"width: 100%; height: 100%\";\n    containerDiv.appendChild(iframe); // Initialize the event bus and agent data providers.\n    // NOTE: Setting logEvents here to FALSE in order to avoid duplicating\n    // events which are logged in CCP.\n\n    connect.core.eventBus = new connect.EventBus({\n      logEvents: false\n    });\n    connect.core.agentDataProvider = new AgentDataProvider(connect.core.getEventBus());\n    connect.core.mediaFactory = new connect.MediaFactory(params); // Build the upstream conduit communicating with the CCP iframe.\n\n    var conduit = new connect.IFrameConduit(params.ccpUrl, window, iframe); // Let CCP know if iframe is visible\n\n    iframe.onload = setTimeout(function () {\n      var style = window.getComputedStyle(iframe, null);\n      var data = {\n        display: style.display,\n        offsetWidth: iframe.offsetWidth,\n        offsetHeight: iframe.offsetHeight,\n        clientRectsLength: iframe.getClientRects().length\n      };\n      conduit.sendUpstream(connect.EventType.IFRAME_STYLE, data);\n    }, 10000); // Set the global upstream conduit for external use.\n\n    connect.core.upstream = conduit; // Init webSocketProvider\n\n    connect.core.webSocketProvider = new WebSocketProvider();\n    conduit.onAllUpstream(connect.core.getEventBus().bridge()); // Initialize the keepalive manager.\n\n    connect.core.keepaliveManager = new KeepaliveManager(conduit, connect.core.getEventBus(), params.ccpSynTimeout || CCP_SYN_TIMEOUT, params.ccpAckTimeout || CCP_ACK_TIMEOUT);\n    connect.core.iframeRefreshInterval = null; // Allow 10 sec (default) before receiving the first ACK from the CCP.\n\n    connect.core.ccpLoadTimeoutInstance = global.setTimeout(function () {\n      connect.core.ccpLoadTimeoutInstance = null;\n      connect.core.getEventBus().trigger(connect.EventType.ACK_TIMEOUT);\n    }, params.ccpLoadTimeout || CCP_LOAD_TIMEOUT); // Once we receive the first ACK, setup our upstream API client and establish\n    // the SYN/ACK refresh flow.\n\n    conduit.onUpstream(connect.EventType.ACKNOWLEDGE, function (data) {\n      connect.getLog().info(\"Acknowledged by the CCP!\").sendInternalLogToServer();\n      connect.core.client = new connect.UpstreamConduitClient(conduit);\n      connect.core.masterClient = new connect.UpstreamConduitMasterClient(conduit);\n      connect.core.portStreamId = data.id;\n\n      if (params.softphone || params.chat || params.pageOptions) {\n        // Send configuration up to the CCP.\n        //set it to false if secondary\n        conduit.sendUpstream(connect.EventType.CONFIGURE, {\n          softphone: params.softphone,\n          chat: params.chat,\n          pageOptions: params.pageOptions\n        });\n      }\n\n      if (connect.core.ccpLoadTimeoutInstance) {\n        global.clearTimeout(connect.core.ccpLoadTimeoutInstance);\n        connect.core.ccpLoadTimeoutInstance = null;\n      }\n\n      connect.core.keepaliveManager.start();\n      this.unsubscribe();\n      connect.core.initialized = true;\n      connect.core.getEventBus().trigger(connect.EventType.INIT);\n    }); // Add any logs from the upstream to our own logger.\n\n    conduit.onUpstream(connect.EventType.LOG, function (logEntry) {\n      if (logEntry.loggerId !== connect.getLog().getLoggerId()) {\n        connect.getLog().addLogEntry(connect.LogEntry.fromObject(logEntry));\n      }\n    });\n    conduit.onUpstream(connect.EventType.SERVER_BOUND_INTERNAL_LOG, function (logEntry) {\n      if (logEntry.loggerId !== connect.getLog().getLoggerId()) {\n        connect.getLog().sendInternalLogEntryToServer(connect.LogEntry.fromObject(logEntry));\n      }\n    }); // Pop a login page when we encounter an ACK timeout.\n\n    connect.core.getEventBus().subscribe(connect.EventType.ACK_TIMEOUT, function () {\n      // loginPopup is true by default, only false if explicitly set to false.\n      if (params.loginPopup !== false) {\n        try {\n          var loginUrl = getLoginUrl(params);\n          connect.getLog().warn(\"ACK_TIMEOUT occurred, attempting to pop the login page if not already open.\").sendInternalLogToServer(); // clear out last opened timestamp for SAML authentication when there is ACK_TIMEOUT\n\n          if (params.loginUrl) {\n            connect.core.getPopupManager().clear(connect.MasterTopics.LOGIN_POPUP);\n          }\n\n          connect.core.loginWindow = connect.core.getPopupManager().open(loginUrl, connect.MasterTopics.LOGIN_POPUP, params.loginOptions);\n        } catch (e) {\n          connect.getLog().error(\"ACK_TIMEOUT occurred but we are unable to open the login popup.\").withException(e).sendInternalLogToServer();\n        }\n      }\n\n      if (connect.core.iframeRefreshInterval == null) {\n        connect.core.iframeRefreshInterval = window.setInterval(function () {\n          iframe.src = params.ccpUrl;\n        }, CCP_IFRAME_REFRESH_INTERVAL);\n        conduit.onUpstream(connect.EventType.ACKNOWLEDGE, function () {\n          this.unsubscribe();\n          global.clearInterval(connect.core.iframeRefreshInterval);\n          connect.core.iframeRefreshInterval = null;\n          connect.core.getPopupManager().clear(connect.MasterTopics.LOGIN_POPUP);\n\n          if ((params.loginPopupAutoClose || params.loginOptions && params.loginOptions.autoClose) && connect.core.loginWindow) {\n            connect.core.loginWindow.close();\n            connect.core.loginWindow = null;\n          }\n        });\n      }\n    });\n\n    if (params.onViewContact) {\n      connect.core.onViewContact(params.onViewContact);\n    }\n\n    conduit.onUpstream(connect.EventType.UPDATE_CONNECTED_CCPS, function (data) {\n      connect.numberOfConnectedCCPs = data.length;\n    }); // keep the softphone params for external use\n\n    connect.core.softphoneParams = params.softphone;\n  };\n  /**-----------------------------------------------------------------------*/\n\n\n  var KeepaliveManager = function (conduit, eventBus, synTimeout, ackTimeout) {\n    this.conduit = conduit;\n    this.eventBus = eventBus;\n    this.synTimeout = synTimeout;\n    this.ackTimeout = ackTimeout;\n    this.ackTimer = null;\n    this.synTimer = null;\n    this.ackSub = null;\n  };\n\n  KeepaliveManager.prototype.start = function () {\n    var self = this;\n    this.conduit.sendUpstream(connect.EventType.SYNCHRONIZE);\n    this.ackSub = this.conduit.onUpstream(connect.EventType.ACKNOWLEDGE, function () {\n      this.unsubscribe();\n      global.clearTimeout(self.ackTimer);\n      self.deferStart();\n    });\n    this.ackTimer = global.setTimeout(function () {\n      self.ackSub.unsubscribe();\n      self.eventBus.trigger(connect.EventType.ACK_TIMEOUT);\n      self.deferStart();\n    }, this.ackTimeout);\n  };\n\n  KeepaliveManager.prototype.deferStart = function () {\n    if (this.synTimer == null) {\n      this.synTimer = global.setTimeout(connect.hitch(this, this.start), this.synTimeout);\n    }\n  };\n  /**-----------------------------------------------------------------------*/\n\n\n  var WebSocketProvider = function () {\n    var callbacks = {\n      initFailure: new Set(),\n      subscriptionUpdate: new Set(),\n      subscriptionFailure: new Set(),\n      topic: new Map(),\n      allMessage: new Set(),\n      connectionGain: new Set(),\n      connectionLost: new Set(),\n      connectionOpen: new Set(),\n      connectionClose: new Set()\n    };\n\n    var invokeCallbacks = function (callbacks, response) {\n      callbacks.forEach(function (callback) {\n        callback(response);\n      });\n    };\n\n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.INIT_FAILURE, function () {\n      invokeCallbacks(callbacks.initFailure);\n    });\n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.CONNECTION_OPEN, function (response) {\n      invokeCallbacks(callbacks.connectionOpen, response);\n    });\n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.CONNECTION_CLOSE, function (response) {\n      invokeCallbacks(callbacks.connectionClose, response);\n    });\n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.CONNECTION_GAIN, function () {\n      invokeCallbacks(callbacks.connectionGain);\n    });\n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.CONNECTION_LOST, function (response) {\n      invokeCallbacks(callbacks.connectionLost, response);\n    });\n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.SUBSCRIPTION_UPDATE, function (response) {\n      invokeCallbacks(callbacks.subscriptionUpdate, response);\n    });\n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.SUBSCRIPTION_FAILURE, function (response) {\n      invokeCallbacks(callbacks.subscriptionFailure, response);\n    });\n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.ALL_MESSAGE, function (response) {\n      invokeCallbacks(callbacks.allMessage, response);\n\n      if (callbacks.topic.has(response.topic)) {\n        invokeCallbacks(callbacks.topic.get(response.topic), response);\n      }\n    });\n\n    this.sendMessage = function (webSocketPayload) {\n      connect.core.getUpstream().sendUpstream(connect.WebSocketEvents.SEND, webSocketPayload);\n    };\n\n    this.onInitFailure = function (cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.initFailure.add(cb);\n      return function () {\n        return callbacks.initFailure.delete(cb);\n      };\n    };\n\n    this.onConnectionOpen = function (cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.connectionOpen.add(cb);\n      return function () {\n        return callbacks.connectionOpen.delete(cb);\n      };\n    };\n\n    this.onConnectionClose = function (cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.connectionClose.add(cb);\n      return function () {\n        return callbacks.connectionClose.delete(cb);\n      };\n    };\n\n    this.onConnectionGain = function (cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.connectionGain.add(cb);\n      return function () {\n        return callbacks.connectionGain.delete(cb);\n      };\n    };\n\n    this.onConnectionLost = function (cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.connectionLost.add(cb);\n      return function () {\n        return callbacks.connectionLost.delete(cb);\n      };\n    };\n\n    this.onSubscriptionUpdate = function (cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.subscriptionUpdate.add(cb);\n      return function () {\n        return callbacks.subscriptionUpdate.delete(cb);\n      };\n    };\n\n    this.onSubscriptionFailure = function (cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.subscriptionFailure.add(cb);\n      return function () {\n        return callbacks.subscriptionFailure.delete(cb);\n      };\n    };\n\n    this.subscribeTopics = function (topics) {\n      connect.assertNotNull(topics, 'topics');\n      connect.assertTrue(connect.isArray(topics), 'topics must be a array');\n      connect.core.getUpstream().sendUpstream(connect.WebSocketEvents.SUBSCRIBE, topics);\n    };\n\n    this.onMessage = function (topicName, cb) {\n      connect.assertNotNull(topicName, 'topicName');\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n\n      if (callbacks.topic.has(topicName)) {\n        callbacks.topic.get(topicName).add(cb);\n      } else {\n        callbacks.topic.set(topicName, new Set([cb]));\n      }\n\n      return function () {\n        return callbacks.topic.get(topicName).delete(cb);\n      };\n    };\n\n    this.onAllMessage = function (cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.allMessage.add(cb);\n      return function () {\n        return callbacks.allMessage.delete(cb);\n      };\n    };\n  };\n  /**-----------------------------------------------------------------------*/\n\n\n  var AgentDataProvider = function (bus) {\n    var agentData = null;\n    this.bus = bus;\n    this.bus.subscribe(connect.AgentEvents.UPDATE, connect.hitch(this, this.updateAgentData));\n  };\n\n  AgentDataProvider.prototype.updateAgentData = function (agentData) {\n    var oldAgentData = this.agentData;\n    this.agentData = agentData;\n\n    if (oldAgentData == null) {\n      connect.agent.initialized = true;\n      this.bus.trigger(connect.AgentEvents.INIT, new connect.Agent());\n    }\n\n    this.bus.trigger(connect.AgentEvents.REFRESH, new connect.Agent());\n\n    this._fireAgentUpdateEvents(oldAgentData);\n  };\n\n  AgentDataProvider.prototype.getAgentData = function () {\n    if (this.agentData == null) {\n      throw new connect.StateError('No agent data is available yet!');\n    }\n\n    return this.agentData;\n  };\n\n  AgentDataProvider.prototype.getContactData = function (contactId) {\n    var agentData = this.getAgentData();\n    var contactData = connect.find(agentData.snapshot.contacts, function (ctdata) {\n      return ctdata.contactId === contactId;\n    });\n\n    if (contactData == null) {\n      throw new connect.StateError('Contact %s no longer exists.', contactId);\n    }\n\n    return contactData;\n  };\n\n  AgentDataProvider.prototype.getConnectionData = function (contactId, connectionId) {\n    var contactData = this.getContactData(contactId);\n    var connectionData = connect.find(contactData.connections, function (cdata) {\n      return cdata.connectionId === connectionId;\n    });\n\n    if (connectionData == null) {\n      throw new connect.StateError('Connection %s for contact %s no longer exists.', connectionId, contactId);\n    }\n\n    return connectionData;\n  };\n\n  AgentDataProvider.prototype.getInstanceId = function () {\n    return this.getAgentData().configuration.routingProfile.routingProfileId.match(/instance\\/([0-9a-fA-F|-]+)\\//)[1];\n  };\n\n  AgentDataProvider.prototype.getAWSAccountId = function () {\n    return this.getAgentData().configuration.routingProfile.routingProfileId.match(/:([0-9]+):instance/)[1];\n  };\n\n  AgentDataProvider.prototype._diffContacts = function (oldAgentData) {\n    var diff = {\n      added: {},\n      removed: {},\n      common: {},\n      oldMap: connect.index(oldAgentData == null ? [] : oldAgentData.snapshot.contacts, function (contact) {\n        return contact.contactId;\n      }),\n      newMap: connect.index(this.agentData.snapshot.contacts, function (contact) {\n        return contact.contactId;\n      })\n    };\n    connect.keys(diff.oldMap).forEach(function (contactId) {\n      if (connect.contains(diff.newMap, contactId)) {\n        diff.common[contactId] = diff.newMap[contactId];\n      } else {\n        diff.removed[contactId] = diff.oldMap[contactId];\n      }\n    });\n    connect.keys(diff.newMap).forEach(function (contactId) {\n      if (!connect.contains(diff.oldMap, contactId)) {\n        diff.added[contactId] = diff.newMap[contactId];\n      }\n    });\n    return diff;\n  };\n\n  AgentDataProvider.prototype._fireAgentUpdateEvents = function (oldAgentData) {\n    var self = this;\n    var diff = null;\n    var oldAgentState = oldAgentData == null ? connect.AgentAvailStates.INIT : oldAgentData.snapshot.state.name;\n    var newAgentState = this.agentData.snapshot.state.name;\n    var oldRoutingState = oldAgentData == null ? connect.AgentStateType.INIT : oldAgentData.snapshot.state.type;\n    var newRoutingState = this.agentData.snapshot.state.type;\n\n    if (oldRoutingState !== newRoutingState) {\n      connect.core.getAgentRoutingEventGraph().getAssociations(this, oldRoutingState, newRoutingState).forEach(function (event) {\n        self.bus.trigger(event, new connect.Agent());\n      });\n    }\n\n    if (oldAgentState !== newAgentState) {\n      this.bus.trigger(connect.AgentEvents.STATE_CHANGE, {\n        agent: new connect.Agent(),\n        oldState: oldAgentState,\n        newState: newAgentState\n      });\n      connect.core.getAgentStateEventGraph().getAssociations(this, oldAgentState, newAgentState).forEach(function (event) {\n        self.bus.trigger(event, new connect.Agent());\n      });\n    }\n\n    if (oldAgentData !== null) {\n      diff = this._diffContacts(oldAgentData);\n    } else {\n      diff = {\n        added: connect.index(this.agentData.snapshot.contacts, function (contact) {\n          return contact.contactId;\n        }),\n        removed: {},\n        common: {},\n        oldMap: {},\n        newMap: connect.index(this.agentData.snapshot.contacts, function (contact) {\n          return contact.contactId;\n        })\n      };\n    }\n\n    connect.values(diff.added).forEach(function (contactData) {\n      self.bus.trigger(connect.ContactEvents.INIT, new connect.Contact(contactData.contactId));\n\n      self._fireContactUpdateEvents(contactData.contactId, connect.ContactStateType.INIT, contactData.state.type);\n    });\n    connect.values(diff.removed).forEach(function (contactData) {\n      self.bus.trigger(connect.ContactEvents.DESTROYED, new connect.ContactSnapshot(contactData));\n      self.bus.trigger(connect.core.getContactEventName(connect.ContactEvents.DESTROYED, contactData.contactId), new connect.ContactSnapshot(contactData));\n\n      self._unsubAllContactEventsForContact(contactData.contactId);\n    });\n    connect.keys(diff.common).forEach(function (contactId) {\n      self._fireContactUpdateEvents(contactId, diff.oldMap[contactId].state.type, diff.newMap[contactId].state.type);\n    });\n  };\n\n  AgentDataProvider.prototype._fireContactUpdateEvents = function (contactId, oldContactState, newContactState) {\n    var self = this;\n\n    if (oldContactState !== newContactState) {\n      connect.core.getContactEventGraph().getAssociations(this, oldContactState, newContactState).forEach(function (event) {\n        self.bus.trigger(event, new connect.Contact(contactId));\n        self.bus.trigger(connect.core.getContactEventName(event, contactId), new connect.Contact(contactId));\n      });\n    }\n\n    self.bus.trigger(connect.ContactEvents.REFRESH, new connect.Contact(contactId));\n    self.bus.trigger(connect.core.getContactEventName(connect.ContactEvents.REFRESH, contactId), new connect.Contact(contactId));\n  };\n\n  AgentDataProvider.prototype._unsubAllContactEventsForContact = function (contactId) {\n    var self = this;\n    connect.values(connect.ContactEvents).forEach(function (eventName) {\n      self.bus.getSubscriptions(connect.core.getContactEventName(eventName, contactId)).map(function (sub) {\n        sub.unsubscribe();\n      });\n    });\n  };\n  /** ----- minimal view layer event handling **/\n\n\n  connect.core.onViewContact = function (f) {\n    connect.core.getUpstream().onUpstream(connect.ContactEvents.VIEW, f);\n  };\n  /**\n   * Used of agent interface control. \n   * connect.core.viewContact(\"contactId\") ->  this is curently programmed to get the contact into view.\n   */\n\n\n  connect.core.viewContact = function (contactId) {\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.ContactEvents.VIEW,\n      data: {\n        contactId: contactId\n      }\n    });\n  };\n  /** ------------------------------------------------- */\n\n  /**\n  * This will be helpful for the custom and embedded CCPs \n  * to handle the access denied use case. \n  */\n\n\n  connect.core.onAccessDenied = function (f) {\n    connect.core.getUpstream().onUpstream(connect.EventType.ACCESS_DENIED, f);\n  };\n  /**\n  * This will be helpful for SAML use cases to handle the custom logins. \n  */\n\n\n  connect.core.onAuthFail = function (f) {\n    connect.core.getUpstream().onUpstream(connect.EventType.AUTH_FAIL, f);\n  };\n  /** ------------------------------------------------- */\n\n  /**\n   * Used for handling the rtc session stats.\n   * Usage\n   * connect.core.onSoftphoneSessionInit(function({ connectionId }) {\n   *     var softphoneManager = connect.core.getSoftphoneManager();\n   *     if(softphoneManager){\n   *        // access session\n   *        var session = softphoneManager.getSession(connectionId); \n   *      }\n   * });\n   */\n\n\n  connect.core.onSoftphoneSessionInit = function (f) {\n    connect.core.getUpstream().onUpstream(connect.ConnectionEvents.SESSION_INIT, f);\n  };\n  /**-----------------------------------------------------------------------*/\n\n\n  connect.core.onConfigure = function (f) {\n    connect.core.getUpstream().onUpstream(connect.ConfigurationEvents.CONFIGURE, f);\n  };\n  /**-----------------------------------------------------------------------*/\n\n\n  connect.core.onInitialized = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.EventType.INIT, f);\n  };\n  /**-----------------------------------------------------------------------*/\n\n\n  connect.core.getContactEventName = function (eventName, contactId) {\n    connect.assertNotNull(eventName, 'eventName');\n    connect.assertNotNull(contactId, 'contactId');\n\n    if (!connect.contains(connect.values(connect.ContactEvents), eventName)) {\n      throw new connect.ValueError('%s is not a valid contact event.', eventName);\n    }\n\n    return connect.sprintf('%s::%s', eventName, contactId);\n  };\n  /**-----------------------------------------------------------------------*/\n\n\n  connect.core.getEventBus = function () {\n    return connect.core.eventBus;\n  };\n  /**-----------------------------------------------------------------------*/\n\n\n  connect.core.getWebSocketManager = function () {\n    return connect.core.webSocketProvider;\n  };\n  /**-----------------------------------------------------------------------*/\n\n\n  connect.core.getAgentDataProvider = function () {\n    return connect.core.agentDataProvider;\n  };\n  /**-----------------------------------------------------------------------*/\n\n\n  connect.core.getLocalTimestamp = function () {\n    return connect.core.getAgentDataProvider().getAgentData().snapshot.localTimestamp;\n  };\n  /**-----------------------------------------------------------------------*/\n\n\n  connect.core.getSkew = function () {\n    return connect.core.getAgentDataProvider().getAgentData().snapshot.skew;\n  };\n  /**-----------------------------------------------------------------------*/\n\n\n  connect.core.getAgentRoutingEventGraph = function () {\n    return connect.core.agentRoutingEventGraph;\n  };\n\n  connect.core.agentRoutingEventGraph = new connect.EventGraph().assoc(connect.EventGraph.ANY, connect.AgentStateType.ROUTABLE, connect.AgentEvents.ROUTABLE).assoc(connect.EventGraph.ANY, connect.AgentStateType.NOT_ROUTABLE, connect.AgentEvents.NOT_ROUTABLE).assoc(connect.EventGraph.ANY, connect.AgentStateType.OFFLINE, connect.AgentEvents.OFFLINE);\n  /**-----------------------------------------------------------------------*/\n\n  connect.core.getAgentStateEventGraph = function () {\n    return connect.core.agentStateEventGraph;\n  };\n\n  connect.core.agentStateEventGraph = new connect.EventGraph().assoc(connect.EventGraph.ANY, connect.values(connect.AgentErrorStates), connect.AgentEvents.ERROR).assoc(connect.EventGraph.ANY, connect.AgentAvailStates.AFTER_CALL_WORK, connect.AgentEvents.ACW);\n  /**-----------------------------------------------------------------------*/\n\n  connect.core.getContactEventGraph = function () {\n    return connect.core.contactEventGraph;\n  };\n\n  connect.core.contactEventGraph = new connect.EventGraph().assoc(connect.EventGraph.ANY, connect.ContactStateType.INCOMING, connect.ContactEvents.INCOMING).assoc(connect.EventGraph.ANY, connect.ContactStateType.PENDING, connect.ContactEvents.PENDING).assoc(connect.EventGraph.ANY, connect.ContactStateType.CONNECTING, connect.ContactEvents.CONNECTING).assoc(connect.EventGraph.ANY, connect.ContactStateType.CONNECTED, connect.ContactEvents.CONNECTED).assoc(connect.ContactStateType.CONNECTING, connect.ContactStateType.ERROR, connect.ContactEvents.MISSED).assoc(connect.ContactStateType.INCOMING, connect.ContactStateType.ERROR, connect.ContactEvents.MISSED).assoc(connect.EventGraph.ANY, connect.ContactStateType.ENDED, connect.ContactEvents.ACW).assoc(connect.values(connect.CONTACT_ACTIVE_STATES), connect.values(connect.relativeComplement(connect.CONTACT_ACTIVE_STATES, connect.ContactStateType)), connect.ContactEvents.ENDED).assoc(connect.EventGraph.ANY, connect.values(connect.AgentErrorStates), connect.ContactEvents.ERROR).assoc(connect.ContactStateType.CONNECTING, connect.ContactStateType.MISSED, connect.ContactEvents.MISSED);\n  /**-----------------------------------------------------------------------*/\n\n  connect.core.getClient = function () {\n    if (!connect.core.client) {\n      throw new connect.StateError('The connect core has not been initialized!');\n    }\n\n    return connect.core.client;\n  };\n\n  connect.core.client = null;\n  /**-----------------------------------------------------------------------*/\n\n  connect.core.getAgentAppClient = function () {\n    if (!connect.core.agentAppClient) {\n      throw new connect.StateError('The connect AgentApp Client has not been initialized!');\n    }\n\n    return connect.core.agentAppClient;\n  };\n\n  connect.core.agentAppClient = null;\n  /**-----------------------------------------------------------------------*/\n\n  connect.core.getMasterClient = function () {\n    if (!connect.core.masterClient) {\n      throw new connect.StateError('The connect master client has not been initialized!');\n    }\n\n    return connect.core.masterClient;\n  };\n\n  connect.core.masterClient = null;\n  /**-----------------------------------------------------------------------*/\n\n  connect.core.getSoftphoneManager = function () {\n    return connect.core.softphoneManager;\n  };\n\n  connect.core.softphoneManager = null;\n  /**-----------------------------------------------------------------------*/\n\n  connect.core.getNotificationManager = function () {\n    if (!connect.core.notificationManager) {\n      connect.core.notificationManager = new connect.NotificationManager();\n    }\n\n    return connect.core.notificationManager;\n  };\n\n  connect.core.notificationManager = null;\n  /**-----------------------------------------------------------------------*/\n\n  connect.core.getPopupManager = function () {\n    return connect.core.popupManager;\n  };\n\n  connect.core.popupManager = new connect.PopupManager();\n  /**-----------------------------------------------------------------------*/\n\n  connect.core.getUpstream = function () {\n    if (!connect.core.upstream) {\n      throw new connect.StateError('There is no upstream conduit!');\n    }\n\n    return connect.core.upstream;\n  };\n\n  connect.core.upstream = null;\n  /**-----------------------------------------------------------------------*/\n\n  connect.core.AgentDataProvider = AgentDataProvider;\n})();\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n\n(function () {\n  var global = this;\n  var connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n\n  var RingtoneEngineBase = function (ringtoneConfig) {\n    var self = this;\n    this._prevContactId = null;\n    connect.assertNotNull(ringtoneConfig, \"ringtoneConfig\");\n\n    if (!ringtoneConfig.ringtoneUrl) {\n      throw new Error(\"ringtoneUrl is required!\");\n    }\n\n    if (global.Audio && typeof global.Promise !== \"undefined\") {\n      this._playableAudioPromise = new Promise(function (resolve, reject) {\n        self._audio = new Audio(ringtoneConfig.ringtoneUrl);\n        self._audio.loop = true;\n\n        self._audio.addEventListener(\"canplay\", function () {\n          self._audioPlayable = true;\n          resolve(self._audio);\n        });\n      });\n    } else {\n      this._audio = null;\n      connect.getLog().error(\"Unable to provide a ringtone.\").sendInternalLogToServer();\n    }\n\n    self._driveRingtone();\n  };\n\n  RingtoneEngineBase.prototype._driveRingtone = function () {\n    throw new Error(\"Not implemented.\");\n  };\n\n  RingtoneEngineBase.prototype._startRingtone = function (contact) {\n    if (this._audio) {\n      this._audio.play().catch(function (e) {\n        this._publishTelemetryEvent(\"Ringtone Playback Failure\", contact);\n      });\n\n      this._publishTelemetryEvent(\"Ringtone Start\", contact);\n    }\n  };\n\n  RingtoneEngineBase.prototype._stopRingtone = function (contact) {\n    if (this._audio) {\n      this._audio.pause();\n\n      this._audio.currentTime = 0;\n\n      this._publishTelemetryEvent(\"Ringtone Stop\", contact);\n    }\n  };\n  /**\n   * Stop ringtone.\n   */\n\n\n  RingtoneEngineBase.prototype.stopRingtone = function () {\n    this._stopRingtone();\n  };\n\n  RingtoneEngineBase.prototype._ringtoneSetup = function (contact) {\n    var self = this;\n    connect.ifMaster(connect.MasterTopics.RINGTONE, function () {\n      self._startRingtone(contact);\n\n      self._prevContactId = contact.getContactId();\n      contact.onConnected(lily.hitch(self, self._stopRingtone));\n      contact.onAccepted(lily.hitch(self, self._stopRingtone));\n      contact.onEnded(lily.hitch(self, self._stopRingtone)); // Just to make sure to stop the ringtone in case of the failures of specific callbacks(onAccepted,onConnected);\n\n      contact.onRefresh(function (contact) {\n        if (contact.getStatus().type !== connect.ContactStatusType.CONNECTING && contact.getStatus().type !== connect.ContactStatusType.INCOMING) {\n          self._stopRingtone();\n        }\n      });\n    });\n  };\n\n  RingtoneEngineBase.prototype._publishTelemetryEvent = function (eventName, contact) {\n    if (contact && contact.getContactId()) {\n      connect.publishMetric({\n        name: eventName,\n        contactId: contact.getContactId()\n      });\n    }\n  };\n  /**\n   * Change the audio device used to play ringtone.\n   * If audio element is not fully initialized, the API will wait _audioPlayablePromise for 3 seconds and fail on timeout.\n   * This API is supported only by browsers that implemented ES6 Promise and http://www.w3.org/TR/audio-output/\n   * Return a Promise that indicates the result of changing output device.\n   */\n\n\n  RingtoneEngineBase.prototype.setOutputDevice = function (deviceId) {\n    if (this._playableAudioPromise) {\n      var playableAudioWithTimeout = Promise.race([this._playableAudioPromise, new Promise(function (resolve, reject) {\n        global.setTimeout(function () {\n          reject(\"Timed out waiting for playable audio\");\n        }, 3000\n        /*ms*/\n        );\n      })]);\n      return playableAudioWithTimeout.then(function (audio) {\n        if (audio.setSinkId) {\n          return Promise.resolve(audio.setSinkId(deviceId));\n        } else {\n          return Promise.reject(\"Not supported\");\n        }\n      });\n    }\n\n    if (global.Promise) {\n      return Promise.reject(\"Not eligible ringtone owner\");\n    }\n  };\n\n  var VoiceRingtoneEngine = function (ringtoneConfig) {\n    RingtoneEngineBase.call(this, ringtoneConfig);\n  };\n\n  VoiceRingtoneEngine.prototype = Object.create(RingtoneEngineBase.prototype);\n  VoiceRingtoneEngine.prototype.constructor = VoiceRingtoneEngine;\n\n  VoiceRingtoneEngine.prototype._driveRingtone = function () {\n    var self = this;\n\n    var onContactConnect = function (contact) {\n      if (contact.getType() === lily.ContactType.VOICE && contact.isSoftphoneCall() && contact.isInbound()) {\n        self._ringtoneSetup(contact);\n\n        self._publishTelemetryEvent(\"Ringtone Connecting\", contact);\n      }\n    };\n\n    connect.contact(function (contact) {\n      contact.onConnecting(onContactConnect);\n    });\n    new connect.Agent().getContacts().forEach(function (contact) {\n      if (contact.getStatus().type === connect.ContactStatusType.CONNECTING) {\n        onContactConnect(contact);\n      }\n    });\n  };\n\n  var ChatRingtoneEngine = function (ringtoneConfig) {\n    RingtoneEngineBase.call(this, ringtoneConfig);\n  };\n\n  ChatRingtoneEngine.prototype = Object.create(RingtoneEngineBase.prototype);\n  ChatRingtoneEngine.prototype.constructor = ChatRingtoneEngine;\n\n  ChatRingtoneEngine.prototype._driveRingtone = function () {\n    var self = this;\n\n    var onContactConnect = function (contact) {\n      if (contact.getType() === lily.ContactType.CHAT && contact.isInbound()) {\n        self._ringtoneSetup(contact);\n\n        self._publishTelemetryEvent(\"Chat Ringtone Connecting\", contact);\n      }\n    };\n\n    connect.contact(function (contact) {\n      contact.onConnecting(onContactConnect);\n    });\n  };\n\n  var TaskRingtoneEngine = function (ringtoneConfig) {\n    RingtoneEngineBase.call(this, ringtoneConfig);\n  };\n\n  TaskRingtoneEngine.prototype = Object.create(RingtoneEngineBase.prototype);\n  TaskRingtoneEngine.prototype.constructor = TaskRingtoneEngine;\n\n  TaskRingtoneEngine.prototype._driveRingtone = function () {\n    var self = this;\n\n    var onContactConnect = function (contact) {\n      if (contact.getType() === lily.ContactType.TASK && contact.isInbound()) {\n        self._ringtoneSetup(contact);\n\n        self._publishTelemetryEvent(\"Task Ringtone Connecting\", contact);\n      }\n    };\n\n    connect.contact(function (contact) {\n      contact.onConnecting(onContactConnect);\n    });\n  };\n\n  var QueueCallbackRingtoneEngine = function (ringtoneConfig) {\n    RingtoneEngineBase.call(this, ringtoneConfig);\n  };\n\n  QueueCallbackRingtoneEngine.prototype = Object.create(RingtoneEngineBase.prototype);\n  QueueCallbackRingtoneEngine.prototype.constructor = QueueCallbackRingtoneEngine;\n\n  QueueCallbackRingtoneEngine.prototype._driveRingtone = function () {\n    var self = this;\n    connect.contact(function (contact) {\n      contact.onIncoming(function () {\n        if (contact.getType() === lily.ContactType.QUEUE_CALLBACK) {\n          self._ringtoneSetup(contact);\n\n          self._publishTelemetryEvent(\"Callback Ringtone Connecting\", contact);\n        }\n      });\n    });\n  };\n  /* export connect.RingtoneEngine */\n\n\n  connect.VoiceRingtoneEngine = VoiceRingtoneEngine;\n  connect.ChatRingtoneEngine = ChatRingtoneEngine;\n  connect.TaskRingtoneEngine = TaskRingtoneEngine;\n  connect.QueueCallbackRingtoneEngine = QueueCallbackRingtoneEngine;\n})();\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n  global.ccpVersion = \"V2\";\n  var RTPJobIntervalMs = 1000;\n  var statsReportingJobIntervalMs = 30000;\n  var streamBufferSize = 500;\n  var CallTypeMap = {};\n  CallTypeMap[connect.SoftphoneCallType.AUDIO_ONLY] = 'Audio';\n  CallTypeMap[connect.SoftphoneCallType.VIDEO_ONLY] = 'Video';\n  CallTypeMap[connect.SoftphoneCallType.AUDIO_VIDEO] = 'AudioVideo';\n  CallTypeMap[connect.SoftphoneCallType.NONE] = 'None';\n  var AUDIO_INPUT = 'audio_input';\n  var AUDIO_OUTPUT = 'audio_output';\n  var MediaTypeMap = {};\n  MediaTypeMap[connect.ContactType.VOICE] = \"Voice\";\n  var UNKNOWN_MEDIA_TYPE = \"Unknown\";\n  var timeSeriesStreamStatsBuffer = [];\n  var aggregatedUserAudioStats = {};\n  var aggregatedRemoteAudioStats = {};\n  var rtpStatsJob = null;\n  var reportStatsJob = null; //Logger specific to softphone.\n\n  var logger = null;\n  var SoftphoneErrorTypes = connect.SoftphoneErrorTypes;\n  var HANG_UP_MULTIPLE_SESSIONS_EVENT = \"MultiSessionHangUp\";\n  var MULTIPLE_SESSIONS_EVENT = \"MultiSessions\";\n  var localMediaStream = {};\n  var softphoneClientId = connect.randomId();\n\n  var requestIceAccess = function (transport) {\n    return new Promise(function (resolve, reject) {\n      connect.core.getClient().call(connect.ClientMethods.CREATE_TRANSPORT, transport, {\n        success: function (data) {\n          resolve(data.softphoneTransport.softphoneMediaConnections);\n        },\n        failure: function (reason) {\n          if (reason.message && reason.message.includes(\"SoftphoneConnectionLimitBreachedException\")) {\n            publishError(\"multiple_softphone_active_sessions\", \"Number of active sessions are more then allowed limit.\", \"\");\n          }\n\n          reject(Error(\"requestIceAccess failed\"));\n        },\n        authFailure: function () {\n          reject(Error(\"Authentication failed while requestIceAccess\"));\n        },\n        accessDenied: function () {\n          reject(Error(\"Access Denied while requestIceAccess\"));\n        }\n      });\n    });\n  };\n\n  var SoftphoneManager = function (softphoneParams) {\n    var self = this;\n    logger = new SoftphoneLogger(connect.getLog());\n    var rtcPeerConnectionFactory;\n\n    if (connect.RtcPeerConnectionFactory) {\n      rtcPeerConnectionFactory = new connect.RtcPeerConnectionFactory(logger, connect.core.getWebSocketManager(), softphoneClientId, connect.hitch(self, requestIceAccess, {\n        transportType: \"softphone\",\n        softphoneClientId: softphoneClientId\n      }), connect.hitch(self, publishError));\n    }\n\n    if (!isBrowserSoftPhoneSupported()) {\n      publishError(SoftphoneErrorTypes.UNSUPPORTED_BROWSER, \"Connect does not support this browser. Some functionality may not work. \", \"\");\n    }\n\n    var gumPromise = fetchUserMedia({\n      success: function (stream) {\n        if (connect.isFirefoxBrowser()) {\n          connect.core.setSoftphoneUserMediaStream(stream);\n        }\n      },\n      failure: function (err) {\n        publishError(err, \"Your microphone is not enabled in your browser. \", \"\");\n      }\n    });\n    handleSoftPhoneMuteToggle();\n    handleSpeakerDeviceChange();\n    handleMicrophoneDeviceChange();\n    this.ringtoneEngine = null;\n    var rtcSessions = {}; // Tracks the agent connection ID, so that if the same contact gets re-routed to the same agent, it'll still set up softphone\n\n    var callsDetected = {};\n    this.onInitContactSub = {};\n\n    this.onInitContactSub.unsubscribe = function () {}; // variables for firefox multitab\n\n\n    var isSessionPending = false;\n    var pendingContact = null;\n    var pendingAgentConnectionId = null;\n\n    var postponeStartingSession = function (contact, agentConnectionId) {\n      isSessionPending = true;\n      pendingContact = contact;\n      pendingAgentConnectionId = agentConnectionId;\n    };\n\n    var cancelPendingSession = function () {\n      isSessionPending = false;\n      pendingContact = null;\n      pendingAgentConnectionId = null;\n    }; // helper method to provide access to rtc sessions\n\n\n    this.getSession = function (connectionId) {\n      return rtcSessions[connectionId];\n    };\n\n    this.replaceLocalMediaTrack = function (connectionId, track) {\n      var stream = localMediaStream[connectionId].stream;\n\n      if (stream) {\n        var oldTrack = stream.getAudioTracks()[0];\n        oldTrack.enabled = false;\n        stream.removeTrack(oldTrack);\n        stream.addTrack(track);\n      }\n    };\n\n    var isContactTerminated = function (contact) {\n      return contact.getStatus().type === connect.ContactStatusType.ENDED || contact.getStatus().type === connect.ContactStatusType.ERROR || contact.getStatus().type === connect.ContactStatusType.MISSED;\n    };\n\n    var destroySession = function (agentConnectionId) {\n      if (rtcSessions.hasOwnProperty(agentConnectionId)) {\n        var session = rtcSessions[agentConnectionId]; // Currently the assumption is it will throw an exception only and if only it already has been hung up.\n        // TODO: Update once the hangup API does not throw exceptions\n\n        new Promise(function (resolve, reject) {\n          delete rtcSessions[agentConnectionId];\n          delete callsDetected[agentConnectionId];\n          session.hangup();\n        }).catch(function (err) {\n          lily.getLog().warn(\"Clean up the session locally \" + agentConnectionId, err.message).sendInternalLogToServer();\n        });\n      }\n    }; // When multiple RTC sessions detected, ignore the new call and hang up the previous sessions.\n    // TODO: Update when connect-rtc exposes an API to detect session status.\n\n\n    var sanityCheckActiveSessions = function (rtcSessions) {\n      if (Object.keys(rtcSessions).length > 0) {\n        // Error! our state doesn't match, tear it all down.\n        for (var connectionId in rtcSessions) {\n          if (rtcSessions.hasOwnProperty(connectionId)) {\n            // Log an error for the session we are about to end.\n            publishMultipleSessionsEvent(HANG_UP_MULTIPLE_SESSIONS_EVENT, rtcSessions[connectionId].callId, connectionId);\n            destroySession(connectionId);\n          }\n        }\n\n        throw new Error(\"duplicate session detected, refusing to setup new connection\");\n      }\n    };\n\n    this.startSession = function (_contact, _agentConnectionId) {\n      var contact = isSessionPending ? pendingContact : _contact;\n      var agentConnectionId = isSessionPending ? pendingAgentConnectionId : _agentConnectionId;\n\n      if (!contact || !agentConnectionId) {\n        return;\n      }\n\n      cancelPendingSession(); // Set to true, this will block subsequent invokes from entering.\n\n      callsDetected[agentConnectionId] = true;\n      logger.info(\"Softphone call detected:\", \"contactId \" + contact.getContactId(), \"agent connectionId \" + agentConnectionId).sendInternalLogToServer(); // Ensure our session state matches our contact state to prevent issues should we lose track of a contact.\n\n      sanityCheckActiveSessions(rtcSessions);\n\n      if (contact.getStatus().type === connect.ContactStatusType.CONNECTING) {\n        publishTelemetryEvent(\"Softphone Connecting\", contact.getContactId());\n      }\n\n      initializeParams();\n      var softphoneInfo = contact.getAgentConnection().getSoftphoneMediaInfo();\n      var callConfig = parseCallConfig(softphoneInfo.callConfigJson);\n      var webSocketProvider;\n\n      if (callConfig.useWebSocketProvider) {\n        webSocketProvider = connect.core.getWebSocketManager();\n      }\n\n      var session = new connect.RTCSession(callConfig.signalingEndpoint, callConfig.iceServers, softphoneInfo.callContextToken, logger, contact.getContactId(), agentConnectionId, webSocketProvider);\n      rtcSessions[agentConnectionId] = session;\n\n      if (connect.core.getSoftphoneUserMediaStream()) {\n        session.mediaStream = connect.core.getSoftphoneUserMediaStream();\n      } // Custom Event to indicate the session init operations\n\n\n      connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n        event: connect.ConnectionEvents.SESSION_INIT,\n        data: {\n          connectionId: agentConnectionId\n        }\n      });\n\n      session.onSessionFailed = function (rtcSession, reason) {\n        delete rtcSessions[agentConnectionId];\n        delete callsDetected[agentConnectionId];\n        publishSoftphoneFailureLogs(rtcSession, reason);\n        publishSessionFailureTelemetryEvent(contact.getContactId(), reason);\n        stopJobsAndReport(contact, rtcSession.sessionReport);\n      };\n\n      session.onSessionConnected = function (rtcSession) {\n        publishTelemetryEvent(\"Softphone Session Connected\", contact.getContactId()); // Become master to send logs, since we need logs from softphone tab.\n\n        connect.becomeMaster(connect.MasterTopics.SEND_LOGS); //start stats collection and reporting jobs\n\n        startStatsCollectionJob(rtcSession);\n        startStatsReportingJob(contact);\n        fireContactAcceptedEvent(contact);\n      };\n\n      session.onSessionCompleted = function (rtcSession) {\n        publishTelemetryEvent(\"Softphone Session Completed\", contact.getContactId());\n        delete rtcSessions[agentConnectionId];\n        delete callsDetected[agentConnectionId]; // Stop all jobs and perform one last job.\n\n        stopJobsAndReport(contact, rtcSession.sessionReport); // Cleanup the cached streams\n\n        deleteLocalMediaStream(agentConnectionId);\n      };\n\n      session.onLocalStreamAdded = function (rtcSession, stream) {\n        // Cache the streams for mute/unmute\n        localMediaStream[agentConnectionId] = {\n          stream: stream\n        };\n        connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n          event: connect.AgentEvents.LOCAL_MEDIA_STREAM_CREATED,\n          data: {\n            connectionId: agentConnectionId\n          }\n        });\n      };\n\n      session.remoteAudioElement = document.getElementById('remote-audio');\n\n      if (rtcPeerConnectionFactory) {\n        session.connect(rtcPeerConnectionFactory.get(callConfig.iceServers));\n      } else {\n        session.connect();\n      }\n    };\n\n    var onRefreshContact = function (contact, agentConnectionId) {\n      if (rtcSessions[agentConnectionId] && isContactTerminated(contact)) {\n        destroySession(agentConnectionId);\n        cancelPendingSession();\n      }\n\n      if (contact.isSoftphoneCall() && !callsDetected[agentConnectionId] && (contact.getStatus().type === connect.ContactStatusType.CONNECTING || contact.getStatus().type === connect.ContactStatusType.INCOMING)) {\n        if (connect.isFirefoxBrowser() && connect.hasOtherConnectedCCPs()) {\n          postponeStartingSession(contact, agentConnectionId);\n        } else {\n          self.startSession(contact, agentConnectionId);\n        }\n      }\n    };\n\n    var onInitContact = function (contact) {\n      var agentConnectionId = contact.getAgentConnection().connectionId;\n      logger.info(\"Contact detected:\", \"contactId \" + contact.getContactId(), \"agent connectionId \" + agentConnectionId).sendInternalLogToServer();\n\n      if (!callsDetected[agentConnectionId]) {\n        contact.onRefresh(function () {\n          onRefreshContact(contact, agentConnectionId);\n        });\n      }\n    };\n\n    self.onInitContactSub = connect.contact(onInitContact); // Contact already in connecting state scenario - In this case contact INIT is missed hence the OnRefresh callback is missed. \n\n    new connect.Agent().getContacts().forEach(function (contact) {\n      var agentConnectionId = contact.getAgentConnection().connectionId;\n      logger.info(\"Contact exist in the snapshot. Reinitiate the Contact and RTC session creation for contactId\" + contact.getContactId(), \"agent connectionId \" + agentConnectionId).sendInternalLogToServer();\n      onInitContact(contact);\n      onRefreshContact(contact, agentConnectionId);\n    });\n  };\n\n  var fireContactAcceptedEvent = function (contact) {\n    var conduit = connect.core.getUpstream();\n    var agentConnection = contact.getAgentConnection();\n\n    if (!agentConnection) {\n      logger.info(\"Not able to retrieve the auto-accept setting from null AgentConnection, ignoring event publish..\").sendInternalLogToServer();\n      return;\n    }\n\n    var softphoneMediaInfo = agentConnection.getSoftphoneMediaInfo();\n\n    if (!softphoneMediaInfo) {\n      logger.info(\"Not able to retrieve the auto-accept setting from null SoftphoneMediaInfo, ignoring event publish..\").sendInternalLogToServer();\n      return;\n    }\n\n    if (softphoneMediaInfo.autoAccept === true) {\n      logger.info(\"Auto-accept is enabled, sending out Accepted event to stop ringtone..\").sendInternalLogToServer();\n      conduit.sendUpstream(connect.EventType.BROADCAST, {\n        event: connect.ContactEvents.ACCEPTED,\n        data: new connect.Contact(contact.contactId)\n      });\n      conduit.sendUpstream(connect.EventType.BROADCAST, {\n        event: connect.core.getContactEventName(connect.ContactEvents.ACCEPTED, contact.contactId),\n        data: new connect.Contact(contact.contactId)\n      });\n    } else {\n      logger.info(\"Auto-accept is disabled, ringtone will be stopped by user action.\").sendInternalLogToServer();\n    }\n  }; // Bind events for mute\n\n\n  var handleSoftPhoneMuteToggle = function () {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.EventType.MUTE, muteToggle);\n  };\n\n  var handleSpeakerDeviceChange = function () {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.ConfigurationEvents.SET_SPEAKER_DEVICE, setSpeakerDevice);\n  };\n\n  var handleMicrophoneDeviceChange = function () {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.ConfigurationEvents.SET_MICROPHONE_DEVICE, setMicrophoneDevice);\n  }; // Make sure once we disconnected we get the mute state back to normal\n\n\n  var deleteLocalMediaStream = function (connectionId) {\n    delete localMediaStream[connectionId];\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.AgentEvents.MUTE_TOGGLE,\n      data: {\n        muted: false\n      }\n    });\n  }; // Check for the local streams if exists  -  revert it\n  // And inform other clients about the change \n\n\n  var muteToggle = function (data) {\n    var status;\n\n    if (connect.keys(localMediaStream).length === 0) {\n      return;\n    }\n\n    if (data && data.mute !== undefined) {\n      status = data.mute;\n    }\n\n    for (var connectionId in localMediaStream) {\n      if (localMediaStream.hasOwnProperty(connectionId)) {\n        var localMedia = localMediaStream[connectionId].stream;\n\n        if (localMedia) {\n          var audioTracks = localMedia.getAudioTracks()[0];\n\n          if (status !== undefined) {\n            audioTracks.enabled = !status;\n            localMediaStream[connectionId].muted = status;\n\n            if (status) {\n              logger.info(\"Agent has muted the contact, connectionId -  \" + connectionId).sendInternalLogToServer();\n            } else {\n              logger.info(\"Agent has unmuted the contact, connectionId - \" + connectionId).sendInternalLogToServer();\n            }\n          } else {\n            status = localMediaStream[connectionId].muted || false;\n          }\n        }\n      }\n    }\n\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.AgentEvents.MUTE_TOGGLE,\n      data: {\n        muted: status\n      }\n    });\n  };\n\n  var setSpeakerDevice = function (data) {\n    if (connect.keys(localMediaStream).length === 0 || !data || !data.deviceId) {\n      return;\n    }\n\n    var deviceId = data.deviceId;\n    var remoteAudioElement = document.getElementById('remote-audio');\n\n    try {\n      logger.info(\"Trying to set speaker to device \" + deviceId);\n\n      if (remoteAudioElement && typeof remoteAudioElement.setSinkId === 'function') {\n        remoteAudioElement.setSinkId(deviceId);\n      }\n    } catch (e) {\n      logger.error(\"Failed to set speaker to device \" + deviceId);\n    }\n\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.ConfigurationEvents.SPEAKER_DEVICE_CHANGED,\n      data: {\n        deviceId: deviceId\n      }\n    });\n  };\n\n  var setMicrophoneDevice = function (data) {\n    if (connect.keys(localMediaStream).length === 0 || !data || !data.deviceId) {\n      return;\n    }\n\n    var deviceId = data.deviceId;\n    var softphoneManager = connect.core.getSoftphoneManager();\n\n    try {\n      navigator.mediaDevices.getUserMedia({\n        audio: {\n          deviceId: {\n            exact: deviceId\n          }\n        }\n      }).then(function (newMicrophoneStream) {\n        var newMicrophoneTrack = newMicrophoneStream.getAudioTracks()[0];\n\n        for (var connectionId in localMediaStream) {\n          if (localMediaStream.hasOwnProperty(connectionId)) {\n            var localMedia = localMediaStream[connectionId].stream;\n            var session = softphoneManager.getSession(connectionId); //Replace the audio track in the RtcPeerConnection\n\n            session._pc.getSenders()[0].replaceTrack(newMicrophoneTrack).then(function () {\n              //Replace the audio track in the local media stream (for mute / unmute)\n              softphoneManager.replaceLocalMediaTrack(connectionId, newMicrophoneTrack);\n            });\n          }\n        }\n      });\n    } catch (e) {\n      logger.error(\"Failed to set microphone device \" + deviceId);\n    }\n\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.ConfigurationEvents.MICROPHONE_DEVICE_CHANGED,\n      data: {\n        deviceId: deviceId\n      }\n    });\n  };\n\n  var publishSoftphoneFailureLogs = function (rtcSession, reason) {\n    if (reason === connect.RTCErrors.ICE_COLLECTION_TIMEOUT) {\n      var endPointUrl = \"\\n\";\n\n      for (var i = 0; i < rtcSession._iceServers.length; i++) {\n        for (var j = 0; j < rtcSession._iceServers[i].urls.length; j++) {\n          endPointUrl = endPointUrl + rtcSession._iceServers[i].urls[j] + \"\\n\";\n        }\n      }\n\n      publishError(SoftphoneErrorTypes.ICE_COLLECTION_TIMEOUT, \"Ice collection timedout. \", endPointUrl);\n    } else if (reason === connect.RTCErrors.USER_BUSY) {\n      publishError(SoftphoneErrorTypes.USER_BUSY_ERROR, \"Softphone call UserBusy error. \", \"\");\n    } else if (reason === connect.RTCErrors.SIGNALLING_HANDSHAKE_FAILURE) {\n      publishError(SoftphoneErrorTypes.SIGNALLING_HANDSHAKE_FAILURE, \"Handshaking with Signalling Server \" + rtcSession._signalingUri + \" failed. \", rtcSession._signalingUri);\n    } else if (reason === connect.RTCErrors.GUM_TIMEOUT_FAILURE || reason === connect.RTCErrors.GUM_OTHER_FAILURE) {\n      publishError(SoftphoneErrorTypes.MICROPHONE_NOT_SHARED, \"Your microphone is not enabled in your browser. \", \"\");\n    } else if (reason === connect.RTCErrors.SIGNALLING_CONNECTION_FAILURE) {\n      publishError(SoftphoneErrorTypes.SIGNALLING_CONNECTION_FAILURE, \"URL \" + rtcSession._signalingUri + \" cannot be reached. \", rtcSession._signalingUri);\n    } else if (reason === connect.RTCErrors.CALL_NOT_FOUND) {\n      // No need to publish any softphone error for this case. CCP UX will handle this case.\n      logger.error(\"Softphone call failed due to CallNotFoundException.\").sendInternalLogToServer();\n    } else {\n      publishError(SoftphoneErrorTypes.WEBRTC_ERROR, \"webrtc system error. \", \"\");\n    }\n  };\n  /** Parse the JSON encoded web call config into the data it represents. */\n\n\n  var parseCallConfig = function (serializedConfig) {\n    // Our underscore is too old for unescape\n    // https://issues.amazon.com/issues/CSWF-1467\n    var decodedJSON = serializedConfig.replace(/&quot;/g, '\"');\n    return JSON.parse(decodedJSON);\n  };\n\n  var fetchUserMedia = function (callbacksIn) {\n    var callbacks = callbacksIn || {};\n\n    callbacks.success = callbacks.success || function () {};\n\n    callbacks.failure = callbacks.failure || function () {};\n\n    var CONSTRAINT = {\n      audio: true\n    };\n    var promise = null;\n\n    if (typeof Promise !== \"function\") {\n      callbacks.failure(SoftphoneErrorTypes.UNSUPPORTED_BROWSER);\n      return;\n    }\n\n    if (typeof navigator.mediaDevices === \"object\" && typeof navigator.mediaDevices.getUserMedia === \"function\") {\n      promise = navigator.mediaDevices.getUserMedia(CONSTRAINT);\n    } else if (typeof navigator.webkitGetUserMedia === \"function\") {\n      promise = new Promise(function (resolve, reject) {\n        navigator.webkitGetUserMedia(CONSTRAINT, resolve, reject);\n      });\n    } else {\n      callbacks.failure(SoftphoneErrorTypes.UNSUPPORTED_BROWSER);\n      return;\n    }\n\n    promise.then(function (stream) {\n      var audioTracks = stream.getAudioTracks();\n\n      if (audioTracks && audioTracks.length > 0) {\n        callbacks.success(stream);\n      } else {\n        callbacks.failure(SoftphoneErrorTypes.MICROPHONE_NOT_SHARED);\n      }\n    }, function (err) {\n      callbacks.failure(SoftphoneErrorTypes.MICROPHONE_NOT_SHARED);\n    });\n    return promise;\n  };\n\n  var publishError = function (errorType, message, endPointUrl) {\n    logger.error(\"Softphone error occurred : \", errorType, message || \"\").sendInternalLogToServer();\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.AgentEvents.SOFTPHONE_ERROR,\n      data: new connect.SoftphoneError(errorType, message, endPointUrl)\n    });\n  };\n\n  var publishSessionFailureTelemetryEvent = function (contactId, reason) {\n    publishTelemetryEvent(\"Softphone Session Failed\", contactId, {\n      failedReason: reason\n    });\n  };\n\n  var publishTelemetryEvent = function (eventName, contactId, data) {\n    if (contactId) {\n      connect.publishMetric({\n        name: eventName,\n        contactId: contactId,\n        data: data\n      });\n    }\n  }; // Publish the contact and agent information in a multiple sessions scenarios\n\n\n  var publishMultipleSessionsEvent = function (eventName, contactId, agentConnectionId) {\n    publishTelemetryEvent(eventName, contactId, [{\n      name: \"AgentConnectionId\",\n      value: agentConnectionId\n    }]);\n    logger.info(\"Publish multiple session error metrics\", eventName, \"contactId \" + contactId, \"agent connectionId \" + agentConnectionId).sendInternalLogToServer();\n  };\n\n  var isBrowserSoftPhoneSupported = function () {\n    // In Opera, the true version is after \"Opera\" or after \"Version\"\n    if (connect.isOperaBrowser() && connect.getOperaBrowserVersion() > 17) {\n      return true;\n    } // In Chrome, the true version is after \"Chrome\"\n    else if (connect.isChromeBrowser() && connect.getChromeBrowserVersion() > 22) {\n        return true;\n      } // In Firefox, the true version is after \"Firefox\"\n      else if (connect.isFirefoxBrowser() && connect.getFirefoxBrowserVersion() > 21) {\n          return true;\n        } else {\n          return false;\n        }\n  };\n\n  var sendSoftphoneMetrics = function (contact) {\n    var streamStats = timeSeriesStreamStatsBuffer.slice();\n    timeSeriesStreamStatsBuffer = [];\n\n    if (streamStats.length > 0) {\n      contact.sendSoftphoneMetrics(streamStats, {\n        success: function () {\n          logger.info(\"sendSoftphoneMetrics success\" + JSON.stringify(streamStats)).sendInternalLogToServer();\n        },\n        failure: function (data) {\n          logger.error(\"sendSoftphoneMetrics failed.\").withObject(data).sendInternalLogToServer();\n        }\n      });\n    }\n  };\n\n  var sendSoftphoneReport = function (contact, report, userAudioStats, remoteAudioStats) {\n    report.streamStats = [addStreamTypeToStats(userAudioStats, AUDIO_INPUT), addStreamTypeToStats(remoteAudioStats, AUDIO_OUTPUT)];\n    var callReport = {\n      callStartTime: report.sessionStartTime,\n      callEndTime: report.sessionEndTime,\n      gumTimeMillis: report.gumTimeMillis,\n      initializationTimeMillis: report.initializationTimeMillis,\n      iceCollectionTimeMillis: report.iceCollectionTimeMillis,\n      signallingConnectTimeMillis: report.signallingConnectTimeMillis,\n      handshakingTimeMillis: report.handshakingTimeMillis,\n      preTalkingTimeMillis: report.preTalkingTimeMillis,\n      talkingTimeMillis: report.talkingTimeMillis,\n      cleanupTimeMillis: report.cleanupTimeMillis,\n      iceCollectionFailure: report.iceCollectionFailure,\n      signallingConnectionFailure: report.signallingConnectionFailure,\n      handshakingFailure: report.handshakingFailure,\n      gumOtherFailure: report.gumOtherFailure,\n      gumTimeoutFailure: report.gumTimeoutFailure,\n      createOfferFailure: report.createOfferFailure,\n      setLocalDescriptionFailure: report.setLocalDescriptionFailure,\n      userBusyFailure: report.userBusyFailure,\n      invalidRemoteSDPFailure: report.invalidRemoteSDPFailure,\n      noRemoteIceCandidateFailure: report.noRemoteIceCandidateFailure,\n      setRemoteDescriptionFailure: report.setRemoteDescriptionFailure,\n      softphoneStreamStatistics: report.streamStats\n    };\n    contact.sendSoftphoneReport(callReport, {\n      success: function () {\n        logger.info(\"sendSoftphoneReport success\" + JSON.stringify(callReport)).sendInternalLogToServer();\n      },\n      failure: function (data) {\n        logger.error(\"sendSoftphoneReport failed.\").withObject(data).sendInternalLogToServer();\n      }\n    });\n  };\n\n  var startStatsCollectionJob = function (rtcSession) {\n    rtpStatsJob = window.setInterval(function () {\n      rtcSession.getUserAudioStats().then(function (stats) {\n        var previousUserStats = aggregatedUserAudioStats;\n        aggregatedUserAudioStats = stats;\n        timeSeriesStreamStatsBuffer.push(getTimeSeriesStats(aggregatedUserAudioStats, previousUserStats, AUDIO_INPUT));\n      }, function (error) {\n        logger.debug(\"Failed to get user audio stats.\", error).sendInternalLogToServer();\n      });\n      rtcSession.getRemoteAudioStats().then(function (stats) {\n        var previousRemoteStats = aggregatedRemoteAudioStats;\n        aggregatedRemoteAudioStats = stats;\n        timeSeriesStreamStatsBuffer.push(getTimeSeriesStats(aggregatedRemoteAudioStats, previousRemoteStats, AUDIO_OUTPUT));\n      }, function (error) {\n        logger.debug(\"Failed to get remote audio stats.\", error).sendInternalLogToServer();\n      });\n    }, 1000);\n  };\n\n  var startStatsReportingJob = function (contact) {\n    reportStatsJob = window.setInterval(function () {\n      sendSoftphoneMetrics(contact);\n    }, statsReportingJobIntervalMs);\n  };\n\n  var initializeParams = function () {\n    aggregatedUserAudioStats = null;\n    aggregatedRemoteAudioStats = null;\n    timeSeriesStreamStatsBuffer = [];\n    rtpStatsJob = null;\n    reportStatsJob = null;\n  };\n\n  var getTimeSeriesStats = function (currentStats, previousStats, streamType) {\n    if (previousStats && currentStats) {\n      var packetsLost = currentStats.packetsLost > previousStats.packetsLost ? currentStats.packetsLost - previousStats.packetsLost : 0;\n      var packetsCount = currentStats.packetsCount > previousStats.packetsCount ? currentStats.packetsCount - previousStats.packetsCount : 0;\n      return new RTPStreamStats(currentStats.timestamp, packetsLost, packetsCount, streamType, currentStats.audioLevel, currentStats.jbMilliseconds, currentStats.rttMilliseconds);\n    } else {\n      return new RTPStreamStats(currentStats.timestamp, currentStats.packetsLost, currentStats.packetsCount, streamType, currentStats.audioLevel, currentStats.jbMilliseconds, currentStats.rttMilliseconds);\n    }\n  };\n\n  var stopJob = function (task) {\n    if (task !== null) {\n      window.clearInterval(task);\n    }\n\n    return null;\n  };\n\n  var stopJobsAndReport = function (contact, sessionReport) {\n    rtpStatsJob = stopJob(rtpStatsJob);\n    reportStatsJob = stopJob(reportStatsJob);\n    sendSoftphoneReport(contact, sessionReport, addStreamTypeToStats(aggregatedUserAudioStats, AUDIO_INPUT), addStreamTypeToStats(aggregatedRemoteAudioStats, AUDIO_OUTPUT));\n    sendSoftphoneMetrics(contact);\n  };\n  /**\n  *   Adding streamtype parameter on top of RTCJS RTStats object.\n  */\n\n\n  var RTPStreamStats = function (timestamp, packetsLost, packetsCount, streamType, audioLevel, jitterBufferMillis, roundTripTimeMillis) {\n    this.softphoneStreamType = streamType;\n    this.timestamp = timestamp;\n    this.packetsLost = packetsLost;\n    this.packetsCount = packetsCount;\n    this.audioLevel = audioLevel;\n    this.jitterBufferMillis = jitterBufferMillis;\n    this.roundTripTimeMillis = roundTripTimeMillis;\n  };\n\n  var addStreamTypeToStats = function (stats, streamType) {\n    stats = stats || {};\n    return new RTPStreamStats(stats.timestamp, stats.packetsLost, stats.packetsCount, streamType, stats.audioLevel);\n  };\n\n  var SoftphoneLogger = function (logger) {\n    this._originalLogger = logger;\n    var self = this;\n\n    this._tee = function (level, method) {\n      return function () {\n        // call the original logger object to output to browser\n        //Connect logger follows %s format to print objects to console.\n        var args = Array.prototype.slice.call(arguments[0]);\n        var format = \"\";\n        args.forEach(function () {\n          format = format + \" %s\";\n        });\n        return method.apply(self._originalLogger, [connect.LogComponent.SOFTPHONE, format].concat(args));\n      };\n    };\n  };\n\n  SoftphoneLogger.prototype.debug = function () {\n    return this._tee(1, this._originalLogger.debug)(arguments);\n  };\n\n  SoftphoneLogger.prototype.info = function () {\n    return this._tee(2, this._originalLogger.info)(arguments);\n  };\n\n  SoftphoneLogger.prototype.log = function () {\n    return this._tee(3, this._originalLogger.log)(arguments);\n  };\n\n  SoftphoneLogger.prototype.warn = function () {\n    return this._tee(4, this._originalLogger.warn)(arguments);\n  };\n\n  SoftphoneLogger.prototype.error = function () {\n    return this._tee(5, this._originalLogger.error)(arguments);\n  };\n\n  connect.SoftphoneManager = SoftphoneManager;\n})();\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n  connect.worker = {};\n  var GET_AGENT_TIMEOUT_MS = 30000;\n  var GET_AGENT_RECOVERY_TIMEOUT_MS = 5000;\n  var GET_AGENT_SUCCESS_TIMEOUT_MS = 100;\n  var LOG_BUFFER_CAP_SIZE = 400;\n  var CHECK_AUTH_TOKEN_INTERVAL_MS = 300000; // 5 minuts\n\n  var REFRESH_AUTH_TOKEN_INTERVAL_MS = 10000; // 10 seconds\n\n  var REFRESH_AUTH_TOKEN_MAX_TRY = 4;\n  var GET_AGENT_CONFIGURATION_INTERVAL_MS = 30000;\n  /**-----------------------------------------------------------------------*/\n\n  var MasterTopicCoordinator = function () {\n    this.topicMasterMap = {};\n  };\n\n  MasterTopicCoordinator.prototype.getMaster = function (topic) {\n    connect.assertNotNull(topic, 'topic');\n    return this.topicMasterMap[topic] || null;\n  };\n\n  MasterTopicCoordinator.prototype.setMaster = function (topic, id) {\n    connect.assertNotNull(topic, 'topic');\n    connect.assertNotNull(id, 'id');\n    this.topicMasterMap[topic] = id;\n  };\n\n  MasterTopicCoordinator.prototype.removeMaster = function (id) {\n    connect.assertNotNull(id, 'id');\n    var self = this;\n    connect.entries(this.topicMasterMap).filter(function (entry) {\n      return entry.value === id;\n    }).forEach(function (entry) {\n      delete self.topicMasterMap[entry.key];\n    });\n  };\n  /**---------------------------------------------------------------\n   * class WorkerClient extends ClientBase\n   */\n\n\n  var WorkerClient = function (conduit) {\n    connect.ClientBase.call(this);\n    this.conduit = conduit;\n  };\n\n  WorkerClient.prototype = Object.create(connect.ClientBase.prototype);\n  WorkerClient.prototype.constructor = WorkerClient;\n\n  WorkerClient.prototype._callImpl = function (method, params, callbacks) {\n    var self = this;\n    var request_start = new Date().getTime();\n\n    if (connect.containsValue(connect.AgentAppClientMethods, method)) {\n      connect.core.getAgentAppClient()._callImpl(method, params, {\n        success: function (data) {\n          self._recordAPILatency(method, request_start);\n\n          callbacks.success(data);\n        },\n        failure: function (error, data) {\n          self._recordAPILatency(method, request_start, error);\n\n          callbacks.failure(error, data);\n        }\n      });\n    } else {\n      connect.core.getClient()._callImpl(method, params, {\n        success: function (data) {\n          self._recordAPILatency(method, request_start);\n\n          callbacks.success(data);\n        },\n        failure: function (error, data) {\n          self._recordAPILatency(method, request_start, error);\n\n          callbacks.failure(error, data);\n        },\n        authFailure: function () {\n          self._recordAPILatency(method, request_start);\n\n          callbacks.authFailure();\n        },\n        accessDenied: function () {\n          callbacks.accessDenied && callbacks.accessDenied();\n        }\n      });\n    }\n  };\n\n  WorkerClient.prototype._recordAPILatency = function (method, request_start, err) {\n    var request_end = new Date().getTime();\n    var request_time = request_end - request_start;\n\n    this._sendAPIMetrics(method, request_time, err);\n  };\n\n  WorkerClient.prototype._sendAPIMetrics = function (method, time, err) {\n    this.conduit.sendDownstream(connect.EventType.API_METRIC, {\n      name: method,\n      time: time,\n      dimensions: [{\n        name: \"Category\",\n        value: \"API\"\n      }],\n      error: err\n    });\n  };\n  /**-------------------------------------------------------------------------\n   * The object responsible for polling and passing data downstream to all\n   * consumer ports.\n   */\n\n\n  var ClientEngine = function () {\n    var self = this;\n    this.multiplexer = new connect.StreamMultiplexer();\n    this.conduit = new connect.Conduit(\"AmazonConnectSharedWorker\", null, this.multiplexer);\n    this.client = new WorkerClient(this.conduit);\n    this.timeout = null;\n    this.agent = null;\n    this.nextToken = null;\n    this.initData = {};\n    this.portConduitMap = {};\n    this.masterCoord = new MasterTopicCoordinator();\n    this.logsBuffer = [];\n    this.suppress = false;\n    this.forceOffline = false;\n    var webSocketManager = null;\n    connect.rootLogger = new connect.DownstreamConduitLogger(this.conduit);\n    this.conduit.onDownstream(connect.EventType.SEND_LOGS, function (logsToUpload) {\n      // Add softphone logs downstream\n      connect.getLog().pushLogsDownstream(logsToUpload);\n      self.logsBuffer = self.logsBuffer.concat(logsToUpload); //only call API to send logs if buffer reached cap\n\n      if (self.logsBuffer.length > LOG_BUFFER_CAP_SIZE) {\n        self.handleSendLogsRequest(self.logsBuffer);\n      }\n    });\n    this.conduit.onDownstream(connect.EventType.CONFIGURE, function (data) {\n      if (data.authToken && data.authToken !== self.initData.authToken) {\n        self.initData = data;\n        connect.core.init(data); // init only once.\n\n        if (!webSocketManager) {\n          connect.getLog().info(\"Creating a new Websocket connection for CCP\").sendInternalLogToServer();\n          connect.WebSocketManager.setGlobalConfig({\n            loggerConfig: {\n              logger: connect.getLog()\n            }\n          });\n          webSocketManager = connect.WebSocketManager.create();\n          webSocketManager.onInitFailure(function () {\n            self.conduit.sendDownstream(connect.WebSocketEvents.INIT_FAILURE);\n          });\n          webSocketManager.onConnectionOpen(function (response) {\n            self.conduit.sendDownstream(connect.WebSocketEvents.CONNECTION_OPEN, response);\n          });\n          webSocketManager.onConnectionClose(function (response) {\n            self.conduit.sendDownstream(connect.WebSocketEvents.CONNECTION_CLOSE, response);\n          });\n          webSocketManager.onConnectionGain(function () {\n            self.conduit.sendDownstream(connect.AgentEvents.WEBSOCKET_CONNECTION_GAINED);\n            self.conduit.sendDownstream(connect.WebSocketEvents.CONNECTION_GAIN);\n          });\n          webSocketManager.onConnectionLost(function (response) {\n            self.conduit.sendDownstream(connect.AgentEvents.WEBSOCKET_CONNECTION_LOST, response);\n            self.conduit.sendDownstream(connect.WebSocketEvents.CONNECTION_LOST, response);\n          });\n          webSocketManager.onSubscriptionUpdate(function (response) {\n            self.conduit.sendDownstream(connect.WebSocketEvents.SUBSCRIPTION_UPDATE, response);\n          });\n          webSocketManager.onSubscriptionFailure(function (response) {\n            self.conduit.sendDownstream(connect.WebSocketEvents.SUBSCRIPTION_FAILURE, response);\n          });\n          webSocketManager.onAllMessage(function (response) {\n            self.conduit.sendDownstream(connect.WebSocketEvents.ALL_MESSAGE, response);\n          });\n          self.conduit.onDownstream(connect.WebSocketEvents.SEND, function (message) {\n            webSocketManager.sendMessage(message);\n          });\n          self.conduit.onDownstream(connect.WebSocketEvents.SUBSCRIBE, function (topics) {\n            webSocketManager.subscribeTopics(topics);\n          });\n          webSocketManager.init(connect.hitch(self, self.getWebSocketUrl)).then(function (response) {\n            if (response && !response.webSocketConnectionFailed) {\n              // Start polling for agent data.\n              connect.getLog().info(\"Kicking off agent polling\").sendInternalLogToServer();\n              self.pollForAgent();\n              connect.getLog().info(\"Kicking off config polling\").sendInternalLogToServer();\n              self.pollForAgentConfiguration({\n                repeatForever: true\n              });\n              connect.getLog().info(\"Kicking off auth token polling\").sendInternalLogToServer();\n              global.setInterval(connect.hitch(self, self.checkAuthToken), CHECK_AUTH_TOKEN_INTERVAL_MS);\n            } else {\n              if (!connect.webSocketInitFailed) {\n                self.conduit.sendDownstream(connect.WebSocketEvents.INIT_FAILURE);\n                connect.webSocketInitFailed = true;\n              }\n            }\n          });\n        } else {\n          connect.getLog().info(\"Not Initializing a new WebsocketManager instance, since one already exists\").sendInternalLogToServer();\n        }\n      }\n    });\n    this.conduit.onDownstream(connect.EventType.TERMINATE, function () {\n      //upload pending logs before terminating.\n      self.handleSendLogsRequest(self.logsBuffer);\n      connect.core.terminate();\n      self.conduit.sendDownstream(connect.EventType.TERMINATED);\n    });\n    this.conduit.onDownstream(connect.EventType.SYNCHRONIZE, function () {\n      self.conduit.sendDownstream(connect.EventType.ACKNOWLEDGE);\n    });\n    this.conduit.onDownstream(connect.EventType.BROADCAST, function (data) {\n      self.conduit.sendDownstream(data.event, data.data);\n    });\n    /**\n     * Called when a consumer port connects to this SharedWorker.\n     * Let's add them to our multiplexer.\n     */\n\n    global.onconnect = function (event) {\n      var port = event.ports[0];\n      var stream = new connect.PortStream(port);\n      self.multiplexer.addStream(stream);\n      port.start();\n      var portConduit = new connect.Conduit(stream.getId(), null, stream);\n      portConduit.sendDownstream(connect.EventType.ACKNOWLEDGE, {\n        id: stream.getId()\n      });\n      self.portConduitMap[stream.getId()] = portConduit;\n      self.conduit.sendDownstream(connect.EventType.UPDATE_CONNECTED_CCPS, {\n        length: Object.keys(self.portConduitMap).length\n      });\n\n      if (self.agent !== null) {\n        self.updateAgent();\n      }\n\n      portConduit.onDownstream(connect.EventType.API_REQUEST, connect.hitch(self, self.handleAPIRequest, portConduit));\n      portConduit.onDownstream(connect.EventType.MASTER_REQUEST, connect.hitch(self, self.handleMasterRequest, portConduit, stream.getId()));\n      portConduit.onDownstream(connect.EventType.RELOAD_AGENT_CONFIGURATION, connect.hitch(self, self.pollForAgentConfiguration));\n      portConduit.onDownstream(connect.EventType.CLOSE, function () {\n        self.multiplexer.removeStream(stream);\n        delete self.portConduitMap[stream.getId()];\n        self.masterCoord.removeMaster(stream.getId());\n        self.conduit.sendDownstream(connect.EventType.UPDATE_CONNECTED_CCPS, {\n          length: Object.keys(self.portConduitMap).length\n        });\n      });\n    };\n  };\n\n  ClientEngine.prototype.pollForAgent = function () {\n    var self = this;\n    var onAuthFail = connect.hitch(self, self.handleAuthFail);\n    this.client.call(connect.ClientMethods.GET_AGENT_SNAPSHOT, {\n      nextToken: self.nextToken,\n      timeout: GET_AGENT_TIMEOUT_MS\n    }, {\n      success: function (data) {\n        try {\n          self.agent = self.agent || {};\n          self.agent.snapshot = data.snapshot;\n          self.agent.snapshot.localTimestamp = connect.now();\n          self.agent.snapshot.skew = self.agent.snapshot.snapshotTimestamp - self.agent.snapshot.localTimestamp;\n          self.nextToken = data.nextToken;\n          connect.getLog().trace(\"GET_AGENT_SNAPSHOT succeeded.\").withObject(data).sendInternalLogToServer();\n          self.updateAgent();\n        } catch (e) {\n          connect.getLog().error(\"Long poll failed to update agent.\").withObject(data).withException(e).sendInternalLogToServer();\n        } finally {\n          global.setTimeout(connect.hitch(self, self.pollForAgent), GET_AGENT_SUCCESS_TIMEOUT_MS);\n        }\n      },\n      failure: function (err, data) {\n        try {\n          connect.getLog().error(\"Failed to get agent data.\").sendInternalLogToServer().withObject({\n            err: err,\n            data: data\n          });\n        } finally {\n          global.setTimeout(connect.hitch(self, self.pollForAgent), GET_AGENT_RECOVERY_TIMEOUT_MS);\n        }\n      },\n      authFailure: function () {\n        onAuthFail();\n      },\n      accessDenied: connect.hitch(self, self.handleAccessDenied)\n    });\n  };\n\n  ClientEngine.prototype.pollForAgentConfiguration = function (paramsIn) {\n    var self = this;\n    var params = paramsIn || {};\n    var onAuthFail = connect.hitch(self, self.handleAuthFail);\n    this.client.call(connect.ClientMethods.GET_AGENT_CONFIGURATION, {}, {\n      success: function (data) {\n        var configuration = data.configuration;\n        self.pollForAgentPermissions(configuration);\n        self.pollForAgentStates(configuration);\n        self.pollForDialableCountryCodes(configuration);\n        self.pollForRoutingProfileQueues(configuration);\n\n        if (params.repeatForever) {\n          global.setTimeout(connect.hitch(self, self.pollForAgentConfiguration, params), GET_AGENT_CONFIGURATION_INTERVAL_MS);\n        }\n      },\n      failure: function (err, data) {\n        try {\n          connect.getLog().error(\"Failed to fetch agent configuration data.\").sendInternalLogToServer().withObject({\n            err: err,\n            data: data\n          });\n        } finally {\n          if (params.repeatForever) {\n            global.setTimeout(connect.hitch(self, self.pollForAgentConfiguration), GET_AGENT_CONFIGURATION_INTERVAL_MS, params);\n          }\n        }\n      },\n      authFailure: function () {\n        onAuthFail();\n      },\n      accessDenied: connect.hitch(self, self.handleAccessDenied)\n    });\n  };\n\n  ClientEngine.prototype.pollForAgentStates = function (configuration, paramsIn) {\n    var self = this;\n    var params = paramsIn || {};\n    params.maxResults = params.maxResults || connect.DEFAULT_BATCH_SIZE;\n    this.client.call(connect.ClientMethods.GET_AGENT_STATES, {\n      nextToken: params.nextToken || null,\n      maxResults: params.maxResults\n    }, {\n      success: function (data) {\n        if (data.nextToken) {\n          self.pollForAgentStates(configuration, {\n            states: (params.states || []).concat(data.states),\n            nextToken: data.nextToken,\n            maxResults: params.maxResults\n          });\n        } else {\n          configuration.agentStates = (params.states || []).concat(data.states);\n          self.updateAgentConfiguration(configuration);\n        }\n      },\n      failure: function (err, data) {\n        connect.getLog().error(\"Failed to fetch agent states list.\").sendInternalLogToServer().withObject({\n          err: err,\n          data: data\n        });\n      },\n      authFailure: connect.hitch(self, self.handleAuthFail),\n      accessDenied: connect.hitch(self, self.handleAccessDenied)\n    });\n  };\n\n  ClientEngine.prototype.pollForAgentPermissions = function (configuration, paramsIn) {\n    var self = this;\n    var params = paramsIn || {};\n    params.maxResults = params.maxResults || connect.DEFAULT_BATCH_SIZE;\n    this.client.call(connect.ClientMethods.GET_AGENT_PERMISSIONS, {\n      nextToken: params.nextToken || null,\n      maxResults: params.maxResults\n    }, {\n      success: function (data) {\n        if (data.nextToken) {\n          self.pollForAgentPermissions(configuration, {\n            permissions: (params.permissions || []).concat(data.permissions),\n            nextToken: data.nextToken,\n            maxResults: params.maxResults\n          });\n        } else {\n          configuration.permissions = (params.permissions || []).concat(data.permissions);\n          self.updateAgentConfiguration(configuration);\n        }\n      },\n      failure: function (err, data) {\n        connect.getLog().error(\"Failed to fetch agent permissions list.\").sendInternalLogToServer().withObject({\n          err: err,\n          data: data\n        });\n      },\n      authFailure: connect.hitch(self, self.handleAuthFail),\n      accessDenied: connect.hitch(self, self.handleAccessDenied)\n    });\n  };\n\n  ClientEngine.prototype.pollForDialableCountryCodes = function (configuration, paramsIn) {\n    var self = this;\n    var params = paramsIn || {};\n    params.maxResults = params.maxResults || connect.DEFAULT_BATCH_SIZE;\n    this.client.call(connect.ClientMethods.GET_DIALABLE_COUNTRY_CODES, {\n      nextToken: params.nextToken || null,\n      maxResults: params.maxResults\n    }, {\n      success: function (data) {\n        if (data.nextToken) {\n          self.pollForDialableCountryCodes(configuration, {\n            countryCodes: (params.countryCodes || []).concat(data.countryCodes),\n            nextToken: data.nextToken,\n            maxResults: params.maxResults\n          });\n        } else {\n          configuration.dialableCountries = (params.countryCodes || []).concat(data.countryCodes);\n          self.updateAgentConfiguration(configuration);\n        }\n      },\n      failure: function (err, data) {\n        connect.getLog().error(\"Failed to fetch dialable country codes list.\").sendInternalLogToServer().withObject({\n          err: err,\n          data: data\n        });\n      },\n      authFailure: connect.hitch(self, self.handleAuthFail),\n      accessDenied: connect.hitch(self, self.handleAccessDenied)\n    });\n  };\n\n  ClientEngine.prototype.pollForRoutingProfileQueues = function (configuration, paramsIn) {\n    var self = this;\n    var params = paramsIn || {};\n    params.maxResults = params.maxResults || connect.DEFAULT_BATCH_SIZE;\n    this.client.call(connect.ClientMethods.GET_ROUTING_PROFILE_QUEUES, {\n      routingProfileARN: configuration.routingProfile.routingProfileARN,\n      nextToken: params.nextToken || null,\n      maxResults: params.maxResults\n    }, {\n      success: function (data) {\n        if (data.nextToken) {\n          self.pollForRoutingProfileQueues(configuration, {\n            countryCodes: (params.queues || []).concat(data.queues),\n            nextToken: data.nextToken,\n            maxResults: params.maxResults\n          });\n        } else {\n          configuration.routingProfile.queues = (params.queues || []).concat(data.queues);\n          self.updateAgentConfiguration(configuration);\n        }\n      },\n      failure: function (err, data) {\n        connect.getLog().error(\"Failed to fetch routing profile queues list.\").sendInternalLogToServer().withObject({\n          err: err,\n          data: data\n        });\n      },\n      authFailure: connect.hitch(self, self.handleAuthFail),\n      accessDenied: connect.hitch(self, self.handleAccessDenied)\n    });\n  };\n\n  ClientEngine.prototype.handleAPIRequest = function (portConduit, request) {\n    var self = this;\n    this.client.call(request.method, request.params, {\n      success: function (data) {\n        var response = connect.EventFactory.createResponse(connect.EventType.API_RESPONSE, request, data);\n        portConduit.sendDownstream(response.event, response);\n      },\n      failure: function (err, data) {\n        var response = connect.EventFactory.createResponse(connect.EventType.API_RESPONSE, request, data, JSON.stringify(err));\n        portConduit.sendDownstream(response.event, response);\n        connect.getLog().error(\"'%s' API request failed\", request.method).withObject({\n          request: self.filterAuthToken(request),\n          response: response\n        }).withException(err).sendInternalLogToServer();\n      },\n      authFailure: connect.hitch(self, self.handleAuthFail)\n    });\n  };\n  /**\n   * Handle incoming master query or modification requests from connected tab ports.\n   */\n\n\n  ClientEngine.prototype.handleMasterRequest = function (portConduit, portId, request) {\n    var multiplexerConduit = this.conduit;\n    var response = null;\n\n    switch (request.method) {\n      case connect.MasterMethods.BECOME_MASTER:\n        var masterId = this.masterCoord.getMaster(request.params.topic);\n        var takeOver = Boolean(masterId) && masterId !== portId;\n        this.masterCoord.setMaster(request.params.topic, portId);\n        response = connect.EventFactory.createResponse(connect.EventType.MASTER_RESPONSE, request, {\n          masterId: portId,\n          takeOver: takeOver,\n          topic: request.params.topic\n        });\n\n        if (takeOver) {\n          multiplexerConduit.sendDownstream(response.event, response);\n        }\n\n        break;\n\n      case connect.MasterMethods.CHECK_MASTER:\n        var masterId = this.masterCoord.getMaster(request.params.topic);\n\n        if (!masterId) {\n          this.masterCoord.setMaster(request.params.topic, portId);\n          masterId = portId;\n        }\n\n        response = connect.EventFactory.createResponse(connect.EventType.MASTER_RESPONSE, request, {\n          masterId: masterId,\n          isMaster: portId === masterId,\n          topic: request.params.topic\n        });\n        break;\n\n      default:\n        throw new Error(\"Unknown master method: \" + request.method);\n    }\n\n    portConduit.sendDownstream(response.event, response);\n  };\n\n  ClientEngine.prototype.updateAgentConfiguration = function (configuration) {\n    if (configuration.permissions && configuration.dialableCountries && configuration.agentStates && configuration.routingProfile.queues) {\n      this.agent = this.agent || {};\n      this.agent.configuration = configuration;\n      this.updateAgent();\n    } else {\n      connect.getLog().trace(\"Waiting to update agent configuration until all config data has been fetched.\").sendInternalLogToServer();\n    }\n  };\n\n  ClientEngine.prototype.updateAgent = function () {\n    if (!this.agent) {\n      connect.getLog().trace(\"Waiting to update agent until the agent has been fully constructed.\").sendInternalLogToServer();\n    } else if (!this.agent.snapshot) {\n      connect.getLog().trace(\"Waiting to update agent until the agent snapshot is available.\").sendInternalLogToServer();\n    } else if (!this.agent.configuration) {\n      connect.getLog().trace(\"Waiting to update agent until the agent configuration is available.\").sendInternalLogToServer();\n    } else {\n      // Alias some of the properties for backwards compatibility.\n      this.agent.snapshot.status = this.agent.state; // Sort the contacts on the timestamp\n\n      if (this.agent.snapshot.contacts && this.agent.snapshot.contacts.length > 1) {\n        this.agent.snapshot.contacts.sort(function (contactA, contactB) {\n          return contactA.state.timestamp.getTime() - contactB.state.timestamp.getTime();\n        });\n      }\n\n      this.agent.snapshot.contacts.forEach(function (contact) {\n        contact.status = contact.state;\n        contact.connections.forEach(function (connection) {\n          connection.address = connection.endpoint;\n        });\n      });\n      this.agent.configuration.routingProfile.defaultOutboundQueue.queueId = this.agent.configuration.routingProfile.defaultOutboundQueue.queueARN;\n      this.agent.configuration.routingProfile.queues.forEach(function (queue) {\n        queue.queueId = queue.queueARN;\n      });\n      this.agent.snapshot.contacts.forEach(function (contact) {\n        //contact.queue is null when monitoring\n        if (contact.queue !== undefined) {\n          contact.queue.queueId = contact.queue.queueARN;\n        }\n      });\n      this.agent.configuration.routingProfile.routingProfileId = this.agent.configuration.routingProfile.routingProfileARN;\n      this.conduit.sendDownstream(connect.AgentEvents.UPDATE, this.agent);\n    }\n  };\n  /**\n   * Provides a websocket url through the create_transport API.\n   * @returns a promise which, upon success, returns the response from the createTransport API.\n   */\n\n\n  ClientEngine.prototype.getWebSocketUrl = function () {\n    var self = this;\n    var client = connect.core.getClient();\n    var onAuthFail = connect.hitch(self, self.handleAuthFail);\n    var onAccessDenied = connect.hitch(self, self.handleAccessDenied);\n    return new Promise(function (resolve, reject) {\n      client.call(connect.ClientMethods.CREATE_TRANSPORT, {\n        transportType: connect.TRANSPORT_TYPES.WEB_SOCKET\n      }, {\n        success: function (data) {\n          connect.getLog().info(\"getWebSocketUrl succeeded\").sendInternalLogToServer();\n          resolve(data);\n        },\n        failure: function (err, data) {\n          connect.getLog().error(\"getWebSocketUrl failed\").sendInternalLogToServer().withObject({\n            err: err,\n            data: data\n          });\n          reject(Error(\"getWebSocketUrl failed\"));\n        },\n        authFailure: function () {\n          connect.getLog().error(\"getWebSocketUrl Auth Failure\").sendInternalLogToServer();\n          reject(Error(\"Authentication failed while getting getWebSocketUrl\"));\n          onAuthFail();\n        },\n        accessDenied: function () {\n          connect.getLog().error(\"getWebSocketUrl Access Denied Failure\").sendInternalLogToServer();\n          reject(Error(\"Access Denied Failure while getting getWebSocketUrl\"));\n          onAccessDenied();\n        }\n      });\n    });\n  };\n  /**\n    * Send a message downstream to all consumers when we detect that authentication\n    * against one of our APIs has failed.\n    */\n\n\n  ClientEngine.prototype.handleSendLogsRequest = function () {\n    var self = this;\n    var logEvents = [];\n    var logsToSend = self.logsBuffer.slice();\n    self.logsBuffer = [];\n    logsToSend.forEach(function (log) {\n      logEvents.push({\n        timestamp: log.time,\n        component: log.component,\n        message: log.text\n      });\n    });\n    this.client.call(connect.ClientMethods.SEND_CLIENT_LOGS, {\n      logEvents: logEvents\n    }, {\n      success: function (data) {\n        connect.getLog().info(\"SendLogs request succeeded.\").sendInternalLogToServer();\n      },\n      failure: function (err, data) {\n        connect.getLog().error(\"SendLogs request failed.\").withObject(data).withException(err).sendInternalLogToServer();\n      },\n      authFailure: connect.hitch(self, self.handleAuthFail)\n    });\n  };\n\n  ClientEngine.prototype.handleAuthFail = function () {\n    var self = this;\n    self.conduit.sendDownstream(connect.EventType.AUTH_FAIL);\n  };\n\n  ClientEngine.prototype.handleAccessDenied = function () {\n    var self = this;\n    self.conduit.sendDownstream(connect.EventType.ACCESS_DENIED);\n  };\n\n  ClientEngine.prototype.checkAuthToken = function () {\n    var self = this;\n    var expirationDate = new Date(self.initData.authTokenExpiration);\n    var currentTimeStamp = new Date().getTime();\n    var thirtyMins = 30 * 60 * 1000; // refresh token 30 minutes before expiration\n\n    if (expirationDate.getTime() < currentTimeStamp + thirtyMins) {\n      connect.getLog().info(\"Auth token expires at \" + expirationDate + \" Start refreshing token with retry.\").sendInternalLogToServer();\n      connect.backoff(connect.hitch(self, self.authorize), REFRESH_AUTH_TOKEN_INTERVAL_MS, REFRESH_AUTH_TOKEN_MAX_TRY);\n    }\n  };\n\n  ClientEngine.prototype.authorize = function (callbacks) {\n    var self = this;\n    connect.core.authorize(this.initData.authorizeEndpoint).then(function (response) {\n      var expiration = new Date(response.expiration);\n      connect.getLog().info(\"Authorization succeeded and the token expires at %s\", expiration).sendInternalLogToServer();\n      self.initData.authToken = response.accessToken;\n      self.initData.authTokenExpiration = expiration;\n      connect.core.initClient(self.initData);\n      connect.core.initAgentAppClient(self.initData);\n      callbacks.success();\n    }).catch(function (response) {\n      connect.getLog().error(\"Authorization failed with code %s\", response.status).sendInternalLogToServer();\n\n      if (response.status === 401) {\n        self.handleAuthFail();\n      } else {\n        callbacks.failure();\n      }\n    });\n  };\n  /**\n   * Filter the 'authentication' field of the request params from the given API_REQUEST event.\n   */\n\n\n  ClientEngine.prototype.filterAuthToken = function (request) {\n    var new_request = {};\n\n    for (var keyA in request) {\n      if (keyA === 'params') {\n        var new_params = {};\n\n        for (var keyB in request.params) {\n          if (keyB !== 'authentication') {\n            new_params[keyB] = request.params[keyB];\n          }\n        }\n\n        new_request.params = new_params;\n      } else {\n        new_request[keyA] = request[keyA];\n      }\n    }\n\n    return new_request;\n  };\n  /**-----------------------------------------------------------------------*/\n\n\n  connect.worker.main = function () {\n    connect.worker.clientEngine = new ClientEngine();\n  };\n})();\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\"). You may not use\n * this file except in compliance with the License. A copy of the License is\n * located at\n *\n *    http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express\n * or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n\n  connect.ChatMediaController = function (mediaInfo, metadata) {\n    var logger = connect.getLog();\n    var logComponent = connect.LogComponent.CHAT;\n\n    var createMediaInstance = function () {\n      publishTelemetryEvent(\"Chat media controller init\", mediaInfo.contactId);\n      logger.info(logComponent, \"Chat media controller init\").withObject(mediaInfo).sendInternalLogToServer();\n      connect.ChatSession.setGlobalConfig({\n        loggerConfig: {\n          logger: logger\n        },\n        region: metadata.region\n      });\n      /** Could be also CUSTOMER -  For now we are creating only Agent connection media object */\n\n      var controller = connect.ChatSession.create({\n        chatDetails: mediaInfo,\n        type: \"AGENT\",\n        websocketManager: connect.core.getWebSocketManager()\n      });\n      trackChatConnectionStatus(controller);\n      return controller.connect().then(function (data) {\n        logger.info(logComponent, \"Chat Session Successfully established for contactId %s\", mediaInfo.contactId).sendInternalLogToServer();\n        publishTelemetryEvent(\"Chat Session Successfully established\", mediaInfo.contactId);\n        return controller;\n      }).catch(function (error) {\n        logger.error(logComponent, \"Chat Session establishement failed for contact %s\", mediaInfo.contactId).withException(error).sendInternalLogToServer();\n        publishTelemetryEvent(\"Chat Session establishement failed\", mediaInfo.contactId, error);\n        throw error;\n      });\n    };\n\n    var publishTelemetryEvent = function (eventName, data) {\n      connect.publishMetric({\n        name: eventName,\n        contactId: mediaInfo.contactId,\n        data: data || mediaInfo\n      });\n    };\n\n    var trackChatConnectionStatus = function (controller) {\n      controller.onConnectionBroken(function (data) {\n        logger.error(logComponent, \"Chat Session connection broken\").withException(data).sendInternalLogToServer();\n        publishTelemetryEvent(\"Chat Session connection broken\", data);\n      });\n      controller.onConnectionEstablished(function (data) {\n        logger.info(logComponent, \"Chat Session connection established\").withObject(data).sendInternalLogToServer();\n        publishTelemetryEvent(\"Chat Session connection established\", data);\n      });\n    };\n\n    return {\n      get: function () {\n        return createMediaInstance();\n      }\n    };\n  };\n})();\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\"). You may not use\n * this file except in compliance with the License. A copy of the License is\n * located at\n *\n *    http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express\n * or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n\n  connect.MediaFactory = function (params) {\n    /** controller holder */\n    var mediaControllers = {};\n    var toBeDestroyed = new Set();\n    var logger = connect.getLog();\n    var logComponent = connect.LogComponent.CHAT;\n    var metadata = connect.merge({}, params) || {};\n    metadata.region = metadata.region || \"us-west-2\"; // Default it to us-west-2\n\n    var getMediaController = function (connectionObj) {\n      var connectionId = connectionObj.getConnectionId();\n      var mediaInfo = connectionObj.getMediaInfo();\n      /** if we do not have the media info then just reject the request */\n\n      if (!mediaInfo) {\n        logger.error(logComponent, \"Media info does not exists for a media type %s\").withObject(connectionObj).sendInternalLogToServer();\n        return Promise.reject(\"Media info does not exists for this connection\");\n      }\n\n      if (!mediaControllers[connectionId]) {\n        logger.info(logComponent, \"media controller of type %s init\", connectionObj.getMediaType()).withObject(connectionObj).sendInternalLogToServer();\n\n        switch (connectionObj.getMediaType()) {\n          case connect.MediaType.CHAT:\n            return mediaControllers[connectionId] = new connect.ChatMediaController(connectionObj.getMediaInfo(), metadata).get();\n\n          case connect.MediaType.SOFTPHONE:\n            return mediaControllers[connectionId] = new connect.SoftphoneMediaController(connectionObj.getMediaInfo()).get();\n\n          case connect.MediaType.TASK:\n            return mediaControllers[connectionId] = new connect.TaskMediaController(connectionObj.getMediaInfo()).get();\n\n          default:\n            logger.error(logComponent, \"Unrecognized media type %s \", connectionObj.getMediaType()).sendInternalLogToServer();\n            return Promise.reject();\n        }\n      } else {\n        return mediaControllers[connectionId];\n      }\n    };\n    /** Check all the active states for the connection */\n\n\n    var ifConnectionActive = function (connectionObj) {\n      return connectionObj.isActive();\n    };\n\n    var get = function (connectionObj) {\n      if (ifConnectionActive(connectionObj)) {\n        return getMediaController(connectionObj);\n      } else {\n        destroy(connectionObj.getConnectionId());\n        return Promise.reject(\"Media Controller is no longer available for this connection\");\n      }\n    };\n\n    var destroy = function (connectionId) {\n      if (mediaControllers[connectionId] && !toBeDestroyed.has(connectionId)) {\n        logger.info(logComponent, \"Destroying mediaController for %s\", connectionId);\n        toBeDestroyed.add(connectionId);\n        mediaControllers[connectionId].then(function () {\n          if (typeof controller.cleanUp === \"function\") controller.cleanUp();\n          delete mediaControllers[connectionId];\n          toBeDestroyed.delete(connectionId);\n        }).catch(function () {\n          delete mediaControllers[connectionId];\n          toBeDestroyed.delete(connectionId);\n        });\n      }\n    };\n\n    return {\n      get: get,\n      destroy: destroy\n    };\n  };\n})();\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\"). You may not use\n * this file except in compliance with the License. A copy of the License is\n * located at\n *\n *    http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express\n * or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect; // TODO move softphone implementations here - Wil do this for GA\n\n  connect.SoftphoneMediaController = function (mediaInfo) {\n    return {\n      get: function () {\n        return Promise.resolve(mediaInfo);\n      }\n    };\n  };\n})();\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\"). You may not use\n * this file except in compliance with the License. A copy of the License is\n * located at\n *\n *    http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express\n * or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n\n  connect.TaskMediaController = function (mediaInfo) {\n    var logger = connect.getLog();\n    var logComponent = connect.LogComponent.TASK;\n\n    var createMediaInstance = function () {\n      publishTelemetryEvent(\"Task media controller init\", mediaInfo.contactId);\n      logger.info(logComponent, \"Task media controller init\").withObject(mediaInfo);\n      var controller = connect.TaskSession.create({\n        contactId: mediaInfo.contactId,\n        initialContactId: mediaInfo.initialContactId,\n        websocketManager: connect.core.getWebSocketManager()\n      });\n      trackTaskConnectionStatus(controller);\n      return controller.connect().then(function () {\n        logger.info(logComponent, \"Task Session Successfully established for contactId %s\", mediaInfo.contactId);\n        publishTelemetryEvent(\"Task Session Successfully established\", mediaInfo.contactId);\n        return controller;\n      }).catch(function (error) {\n        logger.error(logComponent, \"Task Session establishement failed for contact %s\", mediaInfo.contactId).withException(error);\n        publishTelemetryEvent(\"Chat Session establishement failed\", mediaInfo.contactId, error);\n        throw error;\n      });\n    };\n\n    var publishTelemetryEvent = function (eventName, data) {\n      connect.publishMetric({\n        name: eventName,\n        contactId: mediaInfo.contactId,\n        data: data || mediaInfo\n      });\n    };\n\n    var trackTaskConnectionStatus = function (controller) {\n      controller.onConnectionBroken(function (data) {\n        logger.error(logComponent, \"Task Session connection broken\").withException(data);\n        publishTelemetryEvent(\"Task Session connection broken\", data);\n      });\n      controller.onConnectionEstablished(function (data) {\n        logger.info(logComponent, \"Task Session connection established\").withObject(data);\n        publishTelemetryEvent(\"Task Session connection established\", data);\n      });\n    };\n\n    return {\n      get: function () {\n        return createMediaInstance();\n      }\n    };\n  };\n})();\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n  connect.agentApp = {};\n  var IFRAME_REFRESH_INTERVAL = 5000;\n  var APP = {\n    CCP: 'ccp'\n  };\n  connect.agentApp.initCCP = connect.core.initCCP;\n\n  connect.agentApp.isInitialized = function (instanceAlias) {};\n\n  connect.agentApp.initAppCommunication = function (iframeId, endpoint) {\n    var iframe = document.getElementById(iframeId);\n    var iframeConduit = new connect.IFrameConduit(endpoint, window, iframe);\n    var BROADCAST_TYPE = [connect.AgentEvents.UPDATE, connect.ContactEvents.VIEW, connect.EventType.ACKNOWLEDGE, connect.EventType.TERMINATED];\n    iframe.addEventListener('load', function (e) {\n      BROADCAST_TYPE.forEach(function (type) {\n        connect.core.getUpstream().onUpstream(type, function (data) {\n          iframeConduit.sendUpstream(type, data);\n        });\n      });\n    });\n    var iframeRefreshInterval = window.setInterval(function () {\n      iframe.src += '';\n    }, IFRAME_REFRESH_INTERVAL);\n    connect.core.getUpstream().onUpstream(connect.EventType.ACKNOWLEDGE, function () {\n      global.clearInterval(iframeRefreshInterval);\n    });\n  };\n\n  var getConnectUrl = function (ccpUrl) {\n    var pos = ccpUrl.indexOf('ccp-v2');\n    return ccpUrl.slice(0, pos - 1);\n  };\n\n  var signOutThroughCCP = function (ccpUrl) {\n    var logoutUrl = getConnectUrl(ccpUrl) + '/logout';\n    return connect.fetch(logoutUrl, {\n      credentials: 'include'\n    }).then(function () {\n      var eventBus = connect.core.getEventBus();\n      eventBus.trigger(connect.EventType.TERMINATE);\n      return true;\n    }).catch(function (e) {\n      connect.getLog().error('An error occured on logout.' + e).withException(e);\n      window.location.href = logoutUrl;\n      return false;\n    });\n  };\n\n  var signInThroughinitCCP = function (ccpUrl, container, config) {\n    var defaultParams = {\n      ccpUrl: ccpUrl,\n      ccpLoadTimeout: 10000,\n      loginPopup: true,\n      loginUrl: getConnectUrl(ccpUrl) + '/login',\n      softphone: {\n        allowFramedSoftphone: true,\n        disableRingtone: false\n      }\n    };\n    var ccpParams = connect.merge(defaultParams, config.ccpParams);\n    connect.core.initCCP(container, ccpParams);\n  };\n\n  connect.agentApp.initApp = function (name, containerId, appUrl, config) {\n    config = config ? config : {};\n    var endpoint = appUrl.endsWith('/') ? appUrl : appUrl + '/';\n    var registerConfig = {\n      endpoint: endpoint,\n      style: config.style\n    };\n    connect.agentApp.AppRegistry.register(name, registerConfig, document.getElementById(containerId));\n    connect.agentApp.AppRegistry.start(name, function (moduleData) {\n      var endpoint = moduleData.endpoint;\n      var containerDOM = moduleData.containerDOM;\n      return {\n        init: function () {\n          if (name === APP.CCP) return signInThroughinitCCP(endpoint, containerDOM, config);\n          return connect.agentApp.initAppCommunication(name, endpoint);\n        },\n        destroy: function () {\n          if (name === APP.CCP) return signOutThroughCCP(endpoint);\n          return null;\n        }\n      };\n    });\n  };\n\n  connect.agentApp.stopApp = function (name) {\n    return connect.agentApp.AppRegistry.stop(name);\n  };\n})();\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  var APP = {\n    CCP: 'ccp'\n  };\n\n  function AppRegistry() {\n    var moduleData = {};\n\n    var makeAppIframe = function (appName, endpoint, style) {\n      var iframe = document.createElement('iframe');\n      iframe.src = endpoint;\n      iframe.style = style || 'width: 100%; height:100%;';\n      iframe.id = appName;\n      iframe['aria-label'] = appName;\n      iframe.setAttribute(\"sandbox\", \"allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts\"); // TODO: Update sandbox option for 3P widget\n\n      return iframe;\n    };\n\n    return {\n      register: function (appName, config, containerDOM) {\n        moduleData[appName] = {\n          containerDOM: containerDOM,\n          endpoint: config.endpoint,\n          style: config.style,\n          instance: undefined\n        };\n      },\n      start: function (appName, creator) {\n        if (!moduleData[appName]) return;\n        var containerDOM = moduleData[appName].containerDOM;\n        var endpoint = moduleData[appName].endpoint;\n        var style = moduleData[appName].style;\n\n        if (appName !== APP.CCP) {\n          var app = makeAppIframe(appName, endpoint, style);\n          containerDOM.appendChild(app);\n        }\n\n        moduleData[appName].instance = creator(moduleData[appName]);\n        return moduleData[appName].instance.init();\n      },\n      stop: function (appName) {\n        if (!moduleData[appName]) return;\n        var data = moduleData[appName];\n        var app = data.containerDOM.querySelector('iframe');\n        data.containerDOM.removeChild(app);\n        var result;\n\n        if (data.instance) {\n          result = data.instance.destroy();\n          delete data.instance;\n        }\n\n        return result;\n      }\n    };\n  }\n\n  global.connect.agentApp.AppRegistry = AppRegistry();\n})();","map":{"version":3,"sources":["/Users/jervchan/Downloads/Amazon-Connect-CustomCCP/node_modules/amazon-connect-streams/release/connect-streams.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","module","arguments","apply","AWS","Service","apiLoader","services","CognitoIdentity","defineService","Object","defineProperty","get","model","paginators","pagination","enumerable","configurable","STS","svc","version","hasOwnProperty","Hmac","Md5","Sha1","Sha256","createHash","alg","toLowerCase","createHmac","key","createSign","Buffer","ArrayBuffer","isView","arg","viewStrings","indexOf","prototype","toString","isEmptyData","data","byteLength","convertToBuffer","Uint8Array","buffer","byteOffset","BYTES_PER_ELEMENT","hashUtils","hashCtor","secret","hash","outer","inner","bufferFromSecret","BLOCK_SIZE","set","update","toHash","error","digest","encoding","finished","input","bufferHash","DIGEST_LENGTH","INIT","state","DataView","bufferLength","bytesHashed","sourceData","position","setUint8","hashBuffer","_a","undecoratedLength","bitsHashed","setUint32","Math","floor","out","buff","b","d","ff","getUint32","gg","hh","ii","cmn","q","x","s","KEY","Uint32Array","MAX_HASHABLE_LENGTH","pow","h0","h1","h2","h3","h4","block","offset","shift","totalLength","write","byte","processBlock","outView","w","k","temp","Int32Array","bufferView","state0","state1","state2","state3","state4","state5","state6","state7","t1_1","t2_1","t1","t2","process","util","crypto","lib","url","querystring","realClock","environment","createEventStream","isBrowser","isNode","XML","Parser","browser","PromisesDependency","Config","inherit","constructor","options","undefined","extractCredentials","each","keys","value","getCredentials","callback","self","finish","err","credentials","credError","msg","message","name","getAsyncCredentials","getStaticCredentials","accessKeyId","secretAccessKey","credentialProvider","resolve","creds","allowUnknownKeys","hasService","loadFromPath","path","clear","JSON","parse","readFileSync","fileSystemCreds","FileSystemCredentials","chain","CredentialProviderChain","providers","unshift","property","defaultValue","merge","region","logger","apiVersions","apiVersion","endpoint","httpOptions","timeout","maxRetries","maxRedirects","paramValidation","sslEnabled","s3ForcePathStyle","s3BucketEndpoint","s3DisableBodySigning","computeChecksums","convertResponseTypes","correctClockSkew","customUserAgent","dynamoDbCrc32","systemClockOffset","signatureVersion","signatureCache","retryDelayOptions","useAccelerateEndpoint","clientSideMonitoring","endpointDiscoveryEnabled","endpointCacheSize","hostPrefixEnabled","stsRegionalEndpoints","copy","Credentials","setPromisesDependency","dep","Promise","constructors","Request","S3","push","ManagedUpload","addPromises","getPromisesDependency","config","_hidden","VERSION","Signers","Protocol","Json","Query","Rest","RestJson","RestXml","Builder","Model","Api","Operation","Shape","Paginator","ResourceWaiter","EndpointCache","events","SequentialExecutor","memoizedProperty","hideProperties","expired","expireTime","refreshCallbacks","sessionToken","expiryWindow","needsRefresh","currentTime","date","getDate","getTime","adjustedTime","Date","refresh","coalesceRefresh","sync","load","onLoad","arrayEach","defer","addPromisesToClass","PromiseDependency","getPromise","promisifyMethod","refreshPromise","deletePromisesFromClass","ChainableTemporaryCredentials","errorCode","tokenCodeFn","params","RoleArn","RoleSessionName","SerialNumber","masterCredentials","stsConfig","service","fn","operation","getTokenCode","tokenCode","TokenCode","credentialsFrom","token","CognitoIdentityCredentials","localStorageKey","id","clientConfig","_identityId","_clientConfig","loadCachedId","IdentityId","identityId","createClients","getId","getCredentialsForIdentity","getCredentialsFromSTS","clearIdOnNotAuthorized","clearCachedId","clearCache","poolId","IdentityPoolId","loginId","LoginId","storage","cognito","loadCredentials","AccessKeyId","SecretKey","SessionToken","Expiration","cacheId","getOpenIdToken","WebIdentityToken","Token","webIdentityCredentials","webErr","sts","getStorage","Logins","actualProviders","cachedProviders","split","intersect","filter","WebIdentityCredentials","cognitoConfig","setStorage","join","val","_","window","localStorage","defaultProviders","slice","resolveCallbacks","index","resolveNext","provider","getErr","resolvePromise","SAMLCredentials","assumeRoleWithSAML","TemporaryCredentials","loadMasterCredentials","assumeRole","getSessionToken","assumeRoleWithWebIdentity","endpointDiscoveryEnabledEnvs","getCacheKey","request","api","operations","identifiers","serviceId","marshallCustomIdentifiersHelper","result","shape","type","required","memberShape","members","endpointDiscoveryId","locationName","isLocationName","String","marshallCustomIdentifiers","optionalDiscoverEndpoint","operationModel","inputShape","cacheKey","endpoints","endpointCache","Address","httpRequest","updateEndpoint","endpointRequest","makeRequest","endpointOperation","Identifiers","addApiVersionHeader","removeListener","EventListeners","Core","VALIDATE_PARAMETERS","RETRY_CHECK","put","CachePeriodInMinutes","send","Endpoints","requestQueue","requiredDiscoverEndpoint","done","cacheKeyStr","getKeyString","errorParams","retryable","response","remove","pendingRequests","requestContext","headers","invalidateCachedEndpoints","httpResponse","statusCode","hasCustomEndpoint","client","_originalConfig","svcConfig","serviceIdentifier","Boolean","isFalsy","isEndpointDiscoveryApplicable","env","configFile","iniLoader","loadFrom","isConfig","filename","sharedConfigFileEnv","sharedFileConfig","AWS_PROFILE","defaultProfile","endpoint_discovery_enabled","discoverEndpoint","isPresigned","appendToUserAgent","isEndpointDiscoveryRequired","endpointDiscoveryRequired","addNamedListener","invalidateCachedEndpoint","eventMessageChunker","parseEvent","body","parser","eventMessages","messages","readInt32BE","toBuffer","Int64","bytes","isBuffer","fromNumber","number","remaining","abs","round","negate","valueOf","negative","parseInt","parseMessage","parsedMessage","messageType","parseError","eventType","eventModel","eventPayloadMemberName","payloadShape","eventHeaderNames","eventHeaderMemberNames","toType","output","errorMessage","splitMessage","BOOLEAN_TAG","BYTE_TAG","SHORT_TAG","INT_TAG","LONG_TAG","BINARY_TAG","STRING_TAG","TIMESTAMP_TAG","UUID_TAG","parseHeaders","nameLength","readUInt8","readInt8","readInt16BE","binaryLength","readUInt16BE","stringLength","uuidChars","substr","parsed","PRELUDE_MEMBER_LENGTH","PRELUDE_LENGTH","CHECKSUM_LENGTH","MINIMUM_MESSAGE_LENGTH","readUInt32BE","expectedPreludeChecksum","crc32","expectedMessageChecksum","headersStart","headersEnd","DISCOVER_ENDPOINT","getOperationAuthtype","req","authtype","addNamedListeners","add","addAsync","VALIDATE_CREDENTIALS","VALIDATE_REGION","isGlobalEndpoint","BUILD_IDEMPOTENCY_TOKENS","idempotentMembers","iLen","uuid","v4","rules","validation","ParamValidator","validate","COMPUTE_SHA256","haltHandlersOnError","getSignerClass","V4","computeSha256","sha","SET_CONTENT_LENGTH","payloadMember","getRequestPayloadShape","string","isStreaming","requiresLength","SET_HTTP_HOST","host","RESTART","HttpRequest","retryCount","addToHead","SIGN","getSkewCorrectedDate","SignerClass","signer","signingName","endpointPrefix","setServiceClientId","_clientId","addAuthorization","signedAt","VALIDATE_RESPONSE","resp","successfulResponse","SEND","_abortCallback","httpResp","stream","operationName","on","onHeaders","statusMessage","emit","streaming","HttpClient","streamsApiVersion","hasEventOutput","onReadable","read","onData","onEnd","didCallback","progress","onSendProgress","onReceiveProgress","errCode","hostname","executeSend","http","getInstance","handleRequest","timeDiff","HTTP_HEADERS","buffers","numBytes","dateHeader","serverTime","isClockSkewed","applyClockOffset","HTTP_DATA","chunk","total","loaded","HTTP_DONE","concat","FINALIZE_ERROR","retryableError","INVALIDATE_CREDENTIALS","EXPIRED_SIGNATURE","match","CLOCK_SKEWED","clockSkewError","REDIRECT","Endpoint","redirect","redirectCount","retryDelay","retryDelays","RESET_RETRY_STATE","delay","willRetry","setTimeout","CorePost","extractRequestId","ENOTFOUND_ERROR","errno","originalError","Logger","LOG_REQUEST","filterSensitiveLog","struct","subShapeName","subShape","list","member","map","isSensitive","buildMessage","time","delta","startTime","ansi","isTTY","status","censoredParams","inspect","lowerFirst","line","log","buildRequest","extractData","extractError","useSSL","urlParse","port","protocol","method","_userAgent","setUserAgent","getUserAgentHeaderName","userAgent","prefix","agentPartial","getUserAgent","pathname","search","query","queryStringParse","queryParamsToString","endpointStr","newEndpoint","HttpResponse","createUnbufferedStream","singleton","EventEmitter","XHRClient","errCallback","emitter","href","xhr","XMLHttpRequest","headersEmitted","addEventListener","readyState","HEADERS_RECEIVED","getAllResponseHeaders","statusText","DONE","finishRequest","upload","evt","open","xhrAsync","setRequestHeader","xhrWithCredentials","withCredentials","responseType","rawHeaders","substring","ab","view","responseText","JsonBuilder","build","stringify","translate","translateStructure","translateMap","translateList","translateScalar","structure","location","toWireFormat","JsonParser","shapeMembers","Collection","metadata","globalEndpoint","jsonVersion","targetPrefix","timestampFormat","xmlNamespace","serviceAbbreviation","serviceFullName","replace","addEndpointOperation","endpointoperation","shapes","create","paginator","waiters","waiter","documentation","documentationUrl","memoize","factory","nameTr","iterable","requestUri","endpointdiscovery","errors","isIdempotent","hasEventStream","topLevelShape","payload","isEventStream","input_token","limit_key","more_results","output_token","result_key","forEach","obj","memberName","enum","min","max","pattern","xmlName","queryName","isComposite","idempotencyToken","jsonvalue","sensitive","eventstream","event","eventpayload","eventheader","isTimestampFormatSet","endpointdiscoveryid","hostLabel","xmlAttribute","normalizedTypes","character","double","long","short","biginteger","bigdecimal","blob","types","StructureShape","ListShape","MapShape","BooleanShape","TimestampShape","FloatShape","IntegerShape","StringShape","Base64Shape","BinaryShape","refShape","isShape","filteredKeys","InlineShape","origType","CompositeShape","flattened","requiredMap","firstInit","xmlOrder","memberNames","isEventPayload","isEventHeader","resultWrapper","uri","oldName","toUTCString","parseTimestamp","format","nullLessProtocols","isJsonValue","parseFloat","buf","base64","decode","alloc","secureBuf","fill","encode","context","validateMember","fail","validateStructure","validateType","paramName","paramValue","memberContext","param","validateList","validateMap","validateScalar","Array","validateRange","mapCount","validateString","validatePayload","validateNumber","validTypes","validateEnum","validatePattern","validateUri","RegExp","test","descriptor","acceptedTypes","foundInvalidType","isType","typeName","acceptedType","vowel","castedValue","Stream","Blob","populateHostPrefix","enabled","hasEndpointDiscover","hostPrefix","hostPrefixNotation","expandHostPrefix","prependEndpointPrefix","validateHostname","isEndpointOperation","regex","labels","hostPattern","label","target","builder","__type","pop","Message","QueryParamSerializer","Version","Action","serialize","Code","requestId","Errors","origRules","tmp","_XAMZRequestId","requestIdShape","populateMethod","httpMethod","generateURI","endpointPath","operationPath","queryString","queryStringSet","plus","uriEscapePath","uriEscape","isArray","parts","sort","populateURI","httpPath","populateHeaders","memberValue","v","header","populateBody","applyContentTypeHeader","isBinary","rootElement","toXML","upperFirst","serializeStructure","ucfirst","isQueryName","toUpperCase","serializeMember","serializeMap","keyName","valueName","serializeList","memberRules","suffix","now","performance","regionConfig","generateRegionPrefix","derivedKeys","regionPrefix","item","applyConfig","configureEndpoint","patterns","useDualstack","isDualstackAvailable","AcceptorStateMachine","domain","jmespath","hardErrorStates","success","complete","isTerminalState","machine","_asm","currentState","fsm","setupStates","transition","_haltHandlersOnError","Domain","domainEmitter","domainThrown","addState","active","Response","states","emitEvent","runTo","abort","removeAllListeners","addAbortedError","eachPage","makeAsync","wrappedCallback","hasNextPage","nextPage","noop","eachItem","paginationConfig","resultKey","items","continueIteration","isPageable","createReadStream","streams","PassThrough","nextTick","readable","sent","streamHeaders","HTTP_ERROR","streamHttpError","shouldCheckContentLength","expectedLen","isNaN","receivedLen","checkContentLengthAndEmit","end","httpStream","lengthAccumulator","_write","unpipe","pipe","eventName","args","eventParameters","origEmit","presign","expires","Presign","sign","toGet","toUnauthenticated","_unAuthenticated","buildAsGet","addListener","promise","reject","mixin","CHECK_ACCEPTORS","_waiter","acceptors","acceptorMatched","acceptor","matcher","matchers","expected","argument","setSuccess","setError","loadWaiterConfig","strictDeepEqual","pathAll","results","numResults","ind","pathAny","listeners","wait","$waiter","maxAttempts","addListeners","numRetries","nextPageTokens","inputTokens","inputToken","cacheNextPageTokens","moreResults","exprs","outputToken","expr","_events","listener","toHead","onAsync","_isAsync","splice","eventArgs","doneCallback","count","callListeners","prevError","callNextListener","callbacks","addNamedAsyncListener","clientCount","loadServiceClass","ServiceClass","originalConfig","initialize","validateService","endpointFromTemplate","setEndpoint","addDefaultMonitoringListeners","_clientSideMonitoring","publisher","PUBLISH_API_CALL","eventHandler","PUBLISH_API_ATTEMPT","serviceConfig","isEmpty","apiConfig","defineServiceApi","getLatestServiceClass","getLatestServiceVersion","iso8601","selectedVersion","defaultRetryCount","customizeRequests","customRequestHandler","addAllRequestListeners","attachMonitoringEmitter","makeUnauthenticatedRequest","waitFor","serviceInterface","setupRequestListeners","apiCallEvent","monitoringEvent","Type","Region","MaxRetriesExceeded","UserAgent","FinalHttpStatusCode","FinalAwsException","FinalAwsExceptionMessage","FinalSdkException","FinalSdkExceptionMessage","apiAttemptEvent","Fqdn","HttpStatusCode","AccessKey","XAmznRequestId","XAmzRequestId","XAmzId2","attemptFailEvent","AwsException","AwsExceptionMessage","SdkException","SdkExceptionMessage","attemptTimestamp","attemptStartRealTime","attemptLatency","callStartRealTime","attemptCount","callTimestamp","API_CALL_ATTEMPT","Timestamp","AttemptLatency","API_CALL_ATTEMPT_RETRY","API_CALL","AttemptCount","latency","Latency","RequestSigner","getVersion","calculateRetryDelay","timeoutError","networkingError","expiredCredentialsError","throttledError","newServerTime","throwException","defineMethods","iterator","versions","features","_serviceMap","addVersions","identifier","Publisher","configProvider","publisherConfig","superclass","setApi","isApi","attachOn","EVENTS_BUBBLE","baseClass","getPrototypeOf","CALL_EVENTS_BUBBLE","ENV_REGIONAL_ENDPOINT_ENABLED","CONFIG_REGIONAL_ENDPOINT_ENABLED","SecretAccessKey","validateRegionalEndpointsFlagValue","configValue","errorOptions","validateRegionalEndpointsFlag","envFlag","profile","profiles","getProfilesFromSharedConfig","fileFlag","optInRegionalEndpoint","insertPoint","expiresHeader","signedUrlBuilder","signerClass","unixTimestamp","signedUrlSigner","parsedUrl","queryParams","auth","rest","signature","urlFormat","serviceClientId","getServiceClientId","V2","V3","V3Https","subResources","responseHeaders","rfc822","stringToSign","canonicalizedAmzHeaders","canonicalizedResource","amzHeaders","resource","virtualHostedBucket","resources","subresource","decodeURIComponent","res","hmac","SignatureVersion","SignatureMethod","AWSAccessKeyId","SecurityToken","Signature","datetime","authorization","signedHeaders","headersToSign","h","canonicalHeaders","trim","sha256","v4Credentials","serviceName","algorithm","updateForPresigned","addHeaders","credString","credentialString","qs","isSignableHeader","lowerKey","sep","signingKey","getSigningKey","hexEncodedHash","canonicalString","hexEncodedBodyHash","canonicalHeaderValues","values","createScope","unsignableHeaders","cachedSecret","cacheQueue","maxCacheEntries","v4Identifier","shouldCache","credsIdentifier","kDate","kRegion","kService","emptyCache","finalState","bindObject","inputError","accept","acceptState","failState","setImmediate","engine","navigator","platform","AWS_EXECUTION_ENV","agent","encodeURIComponent","escape","ch","charCodeAt","part","sortedKeys","ename","vals","encode64","decode64","from","size","toStream","Readable","pos","_read","lstatSync","object","ini","currentSection","section","expectedArgs","toISOString","formatter","crc32Table","tbl","crc","md5","sliceFn","arraySliceFn","FileReader","reader","onerror","onload","_continueReading","back","readAsArrayBuffer","toHex","iterFunction","ret","array","idx","obj1","obj2","dupe","prop","webkitSlice","mozSlice","str","stack","writable","klass","newObject","ctor","ConstructorWrapper","__super__","props","isValue","opts","cachedValue","hoistPayloadMember","responsePayload","fs","settings","start","ResponseMetadata","RequestId","deletePromises","methodName","dualstackAvailable","customBackoff","base","random","handleRequestWithRetries","cb","sendRequest","retryAfter","uuidV4","convertPayloadToString","profilesFromConfig","configOptInEnv","profilesFromCreds","sharedCredentialsFileEnv","profileNames","imdsDisabledEnv","DomXmlParser","xml","DOMParser","parseFromString","syntaxError","documentElement","isError","getElementsByTagName","parentNode","nodeName","errorElement","textContent","ActiveXObject","async","loadXML","parseXml","getElementByTagName","tag","elements","parseStructure","parseMap","parseList","parseUnknown","parseScalar","isXmlAttribute","attributes","xmlChild","xmlKey","xmlValue","tagName","child","firstElementChild","nextElementSibling","getAttribute","text","childNodes","XmlNode","XmlText","XmlBuilder","noEmpty","applyNamespaces","children","serializeScalar","addAttribute","element","addChildNode","entry","entryKey","entryValue","isRoot","xmlNamespaceUri","xmlNamespacePrefix","escapeAttribute","escapeElement","removeAttribute","hasChildren","xmlText","attributeNames","attributeName","attribute","toByteArray","fromByteArray","lookup","revLookup","Arr","len","getLens","b64","validLen","placeHoldersLen","lens","_byteLength","arr","curByte","tripletToBase64","num","encodeChunk","uint8","extraBytes","maxChunkLength","len2","global","ieee754","SlowBuffer","INSPECT_MAX_BYTES","TYPED_ARRAY_SUPPORT","typedArraySupport","kMaxLength","__proto__","foo","subarray","createBuffer","that","RangeError","encodingOrOffset","allocUnsafe","poolSize","_augment","TypeError","fromArrayBuffer","fromString","fromObject","Symbol","species","assertSize","checked","allocUnsafeSlow","isEncoding","actual","fromArrayLike","isnan","_isBuffer","compare","y","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","m","swap16","swap32","swap64","equals","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","foundIndex","found","j","includes","hexWrite","Number","strLen","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","isFinite","toJSON","_arr","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","fromCharCode","newBuf","sliceLen","checkOffset","ext","readUIntLE","noAssert","mul","readUIntBE","readUInt16LE","readUInt32LE","readIntLE","readIntBE","readInt16LE","readInt32LE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","checkInt","writeUIntLE","maxBytes","writeUIntBE","writeUInt8","objectWriteUInt16","littleEndian","writeUInt16LE","writeUInt16BE","objectWriteUInt32","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","checkIEEE754","writeFloat","writeFloatLE","writeFloatBE","writeDouble","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","base64clean","stringtrim","units","Infinity","leadSurrogate","byteArray","hi","lo","src","dst","_maxListeners","defaultMaxListeners","setMaxListeners","isNumber","er","handler","isObject","isUndefined","isFunction","newListener","warned","console","trace","once","fired","g","listenerCount","evlistener","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","first","second","firstType","keysSeen","key2","isFalse","objValues","merged","trimLeft","TYPE_NUMBER","TYPE_ANY","TYPE_STRING","TYPE_ARRAY","TYPE_OBJECT","TYPE_BOOLEAN","TYPE_EXPREF","TYPE_NULL","TYPE_ARRAY_NUMBER","TYPE_ARRAY_STRING","TOK_EOF","TOK_UNQUOTEDIDENTIFIER","TOK_QUOTEDIDENTIFIER","TOK_RBRACKET","TOK_RPAREN","TOK_COMMA","TOK_COLON","TOK_RBRACE","TOK_NUMBER","TOK_CURRENT","TOK_EXPREF","TOK_PIPE","TOK_OR","TOK_AND","TOK_EQ","TOK_GT","TOK_LT","TOK_GTE","TOK_LTE","TOK_NE","TOK_FLATTEN","TOK_STAR","TOK_FILTER","TOK_DOT","TOK_NOT","TOK_LBRACE","TOK_LBRACKET","TOK_LPAREN","TOK_LITERAL","basicTokens","operatorStartToken","skipChars","isAlpha","isNum","isAlphaNum","Lexer","tokenize","tokens","_current","_consumeUnquotedIdentifier","_consumeNumber","_consumeLBracket","_consumeQuotedIdentifier","_consumeRawStringLiteral","literal","_consumeLiteral","_consumeOperator","maxLength","current","startingChar","literalString","_looksLikeJSON","startingChars","jsonLiterals","numberLooking","ex","bindingPower","expression","_loadTokens","ast","_lookahead","_lookaheadToken","lexer","rbp","leftToken","_advance","left","nud","currentToken","led","right","node","Not","_parseProjectionRHS","Star","_parseMultiselectHash","Flatten","_parseIndexExpression","_projectIfSlice","_parseMultiselectList","Expref","_match","_errorToken","tokenName","Dot","_parseDotRHS","Pipe","Or","And","condition","Filter","leftNode","rightNode","_parseComparator","tokenType","_parseSliceExpression","indexExpr","comparator","lookahead","exprTokens","expressions","pairs","identifierTypes","keyToken","TreeInterpreter","runtime","visit","matched","field","collected","sliceParams","computed","computeSliceParams","stop","step","filtered","finalResults","original","resolvedArgs","callFunction","refNode","jmespathType","arrayLength","stepValueNegative","capSliceRange","actualValue","Runtime","interpreter","_interpreter","functionTable","_func","_functionAbs","_signature","avg","_functionAvg","ceil","_functionCeil","contains","_functionContains","_functionEndsWith","_functionFloor","_functionLength","_functionMap","_functionMax","_functionMerge","variadic","_functionMaxBy","sum","_functionSum","_functionStartsWith","_functionMin","_functionMinBy","_functionType","_functionKeys","_functionValues","_functionSort","_functionSortBy","_functionJoin","reverse","_functionReverse","_functionToArray","_functionToString","_functionToNumber","_functionNotNull","functionEntry","_validateArgs","pluralized","currentSpec","actualType","typeMatched","_getTypeName","_typeMatches","argValue","subtype","searchStr","originalStr","reversedStr","reversedArray","inputArray","mapped","exprefNode","maxElement","localeCompare","minElement","listToSum","joinChar","listJoin","convertedValue","sortedArray","requiredType","decorated","exprA","exprB","resolvedArray","keyFunction","createKeyFunction","maxNumber","maxRecord","minNumber","minRecord","allowedTypes","keyFunc","compile","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","run","Item","title","argv","off","prependListener","prependOnceListener","binding","cwd","chdir","umask","root","freeExports","nodeType","freeModule","freeGlobal","punycode","maxInt","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","baseMinusTMin","stringFromCharCode","mapDomain","encoded","ucs2decode","counter","extra","ucs2encode","basicToDigit","digitToBasic","digit","flag","adapt","numPoints","firstTime","inputLength","bias","basic","oldi","baseMinusT","handledCPCount","basicLength","currentValue","handledCPCountPlusOne","qMinusT","toUnicode","toASCII","define","amd","eq","regexp","maxKeys","kstr","vstr","xs","stringifyPrimitive","objectKeys","ks","clearImmediate","Function","immediateIds","nextImmediateId","Timeout","setInterval","clearInterval","close","clearFn","_id","_clearFn","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","onTimeout","_onTimeout","onNextTick","urlResolve","resolveObject","urlResolveObject","Url","slashes","protocolPattern","portPattern","delims","unwise","autoEscape","nonHostChars","hostEndingChars","hostnameMaxLen","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","parseQueryString","slashesDenoteHost","isString","proto","exec","lowerProto","hostEnd","hec","atSign","parseHost","ipv6Hostname","hostparts","l","newpart","validParts","notHost","bit","domainArray","newOut","ae","esc","qm","charAt","source","relative","rel","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","isNullOrUndefined","authInHost","isNull","last","hasTrailingSlash","up","isAbsolute","inherits","superCtor","super_","TempCtor","formatRegExp","objects","deprecate","noDeprecation","deprecated","throwDeprecation","traceDeprecation","debugs","debugEnviron","debuglog","NODE_DEBUG","pid","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styles","styleType","style","arrayToHash","recurseTimes","primitive","formatPrimitive","visibleKeys","getOwnPropertyNames","formatError","isRegExp","isDate","braces","formatArray","formatProperty","reduceToSingleString","simple","desc","getOwnPropertyDescriptor","numLinesEst","reduce","prev","cur","ar","isSymbol","re","objectToString","isPrimitive","pad","months","timestamp","getHours","getMinutes","getSeconds","getMonth","origin","v1","byteToHex","bytesToUuid","bth","getRandomValues","bind","msCrypto","rnds8","whatwgRNG","rnds","mathRNG","rng","_nodeId","_clockseq","_lastMSecs","_lastNSecs","clockseq","seedBytes","nsecs","dt","tl","tmh","LRU_1","CACHE_SIZE","maxSize","cache","LRUCache","keyString","endpointRecord","populateValue","records","record","Expire","identifierNames","identifierName","empty","LinkedListNode","nodeMap","sizeLimit","prependToList","headerNode","tailNode","next","removeFromTail","prevNode","detachFromList","key_1","newNode","Connect","sprintf","parse_tree","cursor","tree_length","node_type","pad_character","pad_length","get_type","toExponential","toFixed","str_repeat","fmt","_fmt","arg_names","field_list","replacement_field","field_match","vsprintf","_argv","variable","multiplier","connect","lily","SOFTPHONE_LOG_REPORT_INTERVAL_MILLIS","LOGS_REPORT_INTERVAL_MILLIS","DEFAULT_LOG_ROLL_INTERVAL","LogLevel","TEST","TRACE","DEBUG","INFO","LOG","WARN","ERROR","CRITICAL","LogComponent","CCP","SOFTPHONE","CHAT","TASK","LogLevelOrder","CONSOLE_LOGGER_MAP","info","warn","isValidLogComponent","component","extractLoggerArgs","loggerArgs","firstArg","LogEntry","level","loggerId","exception","redactSensitiveInfo","LoggedException","getLevel","getText","getComponent","withException","withObject","copiedObj","deepcopy","sendInternalLogToServer","getLog","_serverBoundInternalLogs","_logs","_rolledLogs","_logsToPush","_echoLevel","_logLevel","_lineCount","_logRollInterval","_logRollTimer","_loggerId","setLogRollInterval","interval","setLogLevel","setEchoLevel","logEntry","getLoggerId","addLogEntry","sendInternalLogEntryToServer","clearObjects","clearExceptions","logArgs","debug","critical","lines","download","logName","filterByLogLevel","logs","logBlob","downloadLink","document","createElement","URL","createObjectURL","appendChild","click","removeChild","scheduleUpstreamLogPush","conduit","upstreamLogPushScheduled","hitch","reportMasterLogsUpStream","logsToPush","ifMaster","MasterTopics","SEND_LOGS","sendUpstream","EventType","scheduleDownstreamClientSideLogsPush","pushClientSideLogsDownstream","publishClientSideLogs","DownstreamConduitLogger","_pushLogsDownstream","LOG_PUSH_INTERVAL","pushLogsDownstream","sendDownstream","SERVER_BOUND_INTERNAL_LOG","rootLogger","ONE_DAY_MILLIS","DEFAULT_POPUP_HEIGHT","DEFAULT_POPUP_WIDTH","HTTP_STATUS_CODES","SUCCESS","TOO_MANY_REQUESTS","INTERNAL_SERVER_ERROR","TRANSPORT_TYPES","CHAT_TOKEN","WEB_SOCKET","scope","assertNotNull","assertTrue","closureArgs","entries","argMaps","resultMap","kv","find","predicate","containsValue","randomId","makeEnum","enumObj","makeNamespacedEnum","makeGenericNamespacedEnum","isChromeBrowser","isFirefoxBrowser","isOperaBrowser","getChromeBrowserVersion","chromeVersion","getFirefoxBrowserVersion","firefoxVersion","isValidLocale","locale","languages","language","getOperaBrowserVersion","versionOffset","operaVersion","closure","arrayIn","setMap","relativeComplement","mapA","mapB","compMap","premise","ValueError","getBaseUrl","getUrlWithProtocol","isFramed","top","hasOtherConnectedCCPs","numberOfConnectedCCPs","fetch","milliInterval","maxRetry","fetchData","then","json","catch","backoff","func","ratio","failure","publishMetric","metricData","bus","core","getEventBus","trigger","CLIENT_METRIC","publishSoftphoneStats","stats","SOFTPHONE_STATS","publishSoftphoneReport","report","SOFTPHONE_REPORT","CLIENT_SIDE_LOGS","PopupManager","_getLastOpenedTimestamp","win","height","width","_setLastOpenedTimestamp","_getLocalStorageKey","removeItem","getItem","ts","setItem","NotificationPermission","NotificationManager","permission","DEFAULT","requestPermission","DENIED","Notification","GRANTED","_showQueued","show","_showImpl","notifications","notification","clicked","onclick","BaseError","NotImplementedError","StateError","VoiceIdError","isCCP","getUpstream","ALL_EVENTS","AgentEvents","WebSocketEvents","ContactEvents","ConnectionEvents","ConfigurationEvents","EventFactory","createRequest","createResponse","Subscription","subMap","unsubscribe","SubscriptionMap","subIdMap","subEventNameMap","subscribe","subList","subId","getAllSubscriptions","getSubscriptions","EventBus","paramsIn","logEvents","subscribeAll","allEventSubs","eventSubs","MASTER_RESPONSE","API_METRIC","startsWith","ACCEPTED","contactId","Contact","bridge","unsubscribeAll","ConnnectionEvents","onMessage","NullStream","WindowStream","postMessage","WindowIOStream","inputwin","outputwin","PortStream","StreamMultiplexer","streamMap","messageListeners","getStreams","addStream","messageListener","removeStream","getStreamForPort","Conduit","upstream","downstream","downstreamBus","upstreamBus","_dispatchEvent","onUpstream","onAllUpstream","onDownstream","onAllDownstream","messageEvent","passUpstream","passDownstream","shutdown","IFrameConduit","iframe","contentWindow","ClientMethods","AgentAppClientMethods","GET_SPEAKER_ID","ENROLL_SPEAKER_IN_VOICEID","EVALUATE_SPEAKER_WITH_VOICEID","GET_SPEAKER_STATUS","OPT_OUT_VOICEID_SPEAKER","DESCRIBE_VOICEID_SESSION","UPDATE_VOICEID_SESSION","START_VOICEID_SESSION","MasterMethods","ClientBase","EMPTY_CALLBACKS","callbacksIn","_callImpl","NullClient","UpstreamConduitClientBase","requestEvent","responseEvent","_requestIdCallbacksMap","_handleResponse","_getCallbacksForRequest","UpstreamConduitClient","API_REQUEST","API_RESPONSE","UpstreamConduitMasterClient","MASTER_REQUEST","AgentAppClient","authCookieName","authToken","endpointUrl","bear","AWSClient","endpointIn","baseUrl","_translateParams","CTIExceptions","UNAUTHORIZED_EXCEPTION","authFailure","accessDenied","ACCESS_DENIED_EXCEPTION","_requiresAuthenticationParam","COMPLETE_CONTACT","CLEAR_CONTACT","REJECT_CONTACT","CREATE_TASK_CONTACT","UPDATE_AGENT_CONFIGURATION","configuration","_translateAgentConfiguration","SEND_SOFTPHONE_CALL_METRICS","softphoneStreamStatistics","_translateSoftphoneStreamStatistics","SEND_SOFTPHONE_CALL_REPORT","_translateSoftphoneCallReport","authentication","softphoneEnabled","softphoneAutoAccept","extension","routingProfile","_translateRoutingProfile","agentPreferences","routingProfileARN","defaultOutboundQueue","_translateQueue","queueARN","stat","packetCount","packetsCount","handshakeTimeMillis","handshakingTimeMillis","preTalkTimeMillis","preTalkingTimeMillis","handshakeFailure","handshakingFailure","talkTimeMillis","talkingTimeMillis","GraphLink","fromState","toState","getAssociations","getFromState","getToState","DirectGraphLink","associations","FunctionalGraphLink","EventGraph","fromMap","ANY","assoc","fromStateObj","toStateObj","assocObj","_addAssociation","toMapFromAny","toMap","_getAssociationsFromMap","assocList","AgentStateType","AgentStatusType","AgentAvailStates","AgentErrorStates","EndpointType","AddressType","ConnectionType","ConnectionStateType","ConnectionStatusType","CONNECTION_ACTIVE_STATES","CONNECTING","CONNECTED","HOLD","ContactStateType","ContactStatusType","CONTACT_ACTIVE_STATES","ContactType","ContactInitiationMethod","ChannelType","MediaType","SoftphoneCallType","SoftphoneErrorTypes","VoiceIdErrorTypes","VoiceIdStreamingStatus","VoiceIdAuthenticationDecision","ContactFlowAuthenticationDecision","VoiceIdEnrollmentRequestStatus","Agent","initialized","_getData","getAgentDataProvider","getAgentData","_createContactAPI","contactData","onContactPending","CONTACT_PENDING","onRefresh","REFRESH","onRoutable","ROUTABLE","onNotRoutable","NOT_ROUTABLE","onOffline","OFFLINE","onError","onSoftphoneError","SOFTPHONE_ERROR","onWebSocketConnectionLost","WEBSOCKET_CONNECTION_LOST","onWebSocketConnectionGained","WEBSOCKET_CONNECTION_GAINED","onAfterCallWork","ACW","onStateChange","STATE_CHANGE","onMuteToggle","MUTE_TOGGLE","onLocalMediaStreamCreated","LOCAL_MEDIA_STREAM_CREATED","onSpeakerDeviceChanged","SPEAKER_DEVICE_CHANGED","onMicrophoneDeviceChanged","MICROPHONE_DEVICE_CHANGED","onRingerDeviceChanged","RINGER_DEVICE_CHANGED","mute","BROADCAST","MUTE","unmute","setSpeakerDevice","deviceId","SET_SPEAKER_DEVICE","setMicrophoneDevice","SET_MICROPHONE_DEVICE","setRingerDevice","SET_RINGER_DEVICE","getState","snapshot","getAvailabilityState","agentAvailabilityState","getStatus","getStateDuration","startTimestamp","getSkew","getStatusDuration","getPermissions","getConfiguration","permissions","getContacts","contactTypeFilter","contacts","contact","getType","getAgentStates","agentStates","getRoutingProfile","getChannelConcurrency","channel","channelConcurrencyMap","acc","getName","getExtension","getDialableCountries","dialableCountries","isSoftphoneEnabled","setConfiguration","getClient","INVALID_LOCALE","RELOAD_AGENT_CONFIGURATION","setState","PUT_AGENT_STATE","setStatus","endpointId","CREATE_OUTBOUND_CONTACT","queueId","getAllQueueARNs","queues","getEndpoints","queueARNs","pageInfoIn","pageInfo","maxResults","DEFAULT_BATCH_SIZE","GET_ENDPOINTS","nextToken","addresses","getAddresses","toSnapshot","AgentSnapshot","agentData","ContactSnapshot","getContactData","getContactId","_createConnectionAPI","connectionData","ChatConnection","connectionId","TaskConnection","VoiceConnection","getEventName","getContactEventName","onIncoming","INCOMING","onConnecting","onPending","PENDING","onAccepted","onMissed","MISSED","onEnded","ENDED","DESTROYED","onDestroy","onACW","onConnected","getOriginalContactId","initialContactId","getInitialContactId","getContactDuration","contactDuration","getQueue","getQueueTimestamp","queueTimestamp","getConnections","connections","connData","getInitialConnection","conn","isInitialConnection","getActiveInitialConnection","initialConn","isActive","getThirdPartyConnections","AGENT","getSingleActiveThirdPartyConnection","getAgentConnection","connType","MONITORING","getContactMetadata","contactMetadata","getDescription","description","getReferences","references","getAttributes","getContactFeatures","contactFeatures","isSoftphoneCall","getSoftphoneMediaInfo","_isInbound","initiationMethod","OUTBOUND","isInbound","getMediaType","INBOUND","isConnected","ACCEPT_CONTACT","triggerReadyToStartSessionEvent","destroy","notifyIssue","issueCode","NOTIFY_CONTACT_ISSUE","addConnection","CREATE_ADDITIONAL_CONNECTION","toggleActiveConnections","holdingConn","getConnectionId","activeConns","TOGGLE_ACTIVE_CONNECTIONS","sendSoftphoneMetrics","ccpVersion","sendSoftphoneReport","conferenceConnections","CONFERENCE_CONNECTIONS","ConnectionSnapshot","Connection","_initMediaController","getConnectionData","getEndpoint","getAddress","initial","isConnecting","isOnHold","softphoneMediaInfo","getMonitorInfo","monitoringInfo","DESTROY_CONNECTION","sendDigits","digits","SEND_DIGITS","hold","HOLD_CONNECTION","resume","RESUME_CONNECTION","getMediaInfo","mediaFactory","_isAgentConnectionType","connectionType","VoiceId","getSpeakerId","checkConferenceCall","getInstanceId","getAWSAccountId","customerId","speakerId","NO_SPEAKER_ID_FOUND","GET_SPEAKER_ID_FAILED","getSpeakerStatus","GET_SPEAKER_STATUS_FAILED","optOutSpeaker","OPT_OUT_SPEAKER_FAILED","startSession","sessionId","START_SESSION_FAILED","evaluateSpeaker","startNew","maxPollTimes","evaluate","StreamingStatus","AuthenticationResult","Decision","NOT_ENOUGH_SPEECH","INCONCLUSIVE","ACCEPT","AUTHENTICATED","REJECT","NOT_AUTHENTICATED","SPEAKER_OPTED_OUT","OPTED_OUT","SPEAKER_NOT_ENROLLED","NOT_ENROLLED","TIMEOUT","EVALUATE_SPEAKER_FAILED","describeSession","DESCRIBE_SESSION_FAILED","checkEnrollmentStatus","maxPollingTimes","describe","Session","EnrollmentRequestDetails","Status","COMPLETED","IN_PROGRESS","enrollSpeaker","ENROLL_SPEAKER_FAILED","updateSpeakerId","UPDATE_SPEAKER_ID_FAILED","isConferenceCall","_speakerAuthenticator","getMediaController","getVoiceIdSpeakerId","getVoiceIdSpeakerStatus","optOutVoiceIdSpeaker","evaluateSpeakerWithVoiceId","enrollSpeakerInVoiceId","updateVoiceIdSpeakerId","chatMediaInfo","mediaObject","participantId","getConnectionToken","participantToken","ConnectionAuthenticationToken","originalInfo","transportDetails","transportType","CREATE_TRANSPORT","endpointARN","phoneNumber","agentLogin","stripPhoneNumber","byPhoneNumber","PHONE_NUMBER","SoftphoneError","errorType","endPointUrl","getErrorType","getErrorMessage","getEndPointUrl","onWebsocketInitFailure","INIT_FAILURE","webSocketInitFailed","topic","f_true","f_else","masterClient","getMasterClient","CHECK_MASTER","isMaster","becomeMaster","successCallback","failureCallback","BECOME_MASTER","BaseConnection","toStringTag","__esModule","default","isNonEmptyString","assertIsList","validWSUrl","getSubscriptionResponse","content","topics","assertIsObject","addJitter","isNetworkOnline","onLine","isNetworkFailure","_debug","S","ReferenceError","setPrototypeOf","C","T","O","I","updateLoggerConfig","consoleLoggerWrapper","hasClientLogger","_clientLogger","_level","_logsDestination","N","W","_log","E","isLevelEnabled","writeToClientLogger","_shouldLog","_convertToSingleStatement","_writeToClientLogger","_convertToString","L","F","numAttempts","executor","hasActiveReconnection","defaultRetry","_execute","_getDelay","R","getLogger","primary","secondary","reconnectWebSocket","websocketInitFailed","exponentialBackOffTime","exponentialTimeoutHandle","lifeTimeTimeoutHandle","webSocketInitCheckerTimeoutId","connState","connectWebSocketRetryCount","connectionAttemptStartTime","noOpenConnectionsTimestamp","pendingResponse","intervalHandle","initFailure","Set","getWebSocketTransport","subscriptionUpdate","subscriptionFailure","Map","allMessage","connectionGain","connectionLost","connectionOpen","connectionClose","connConfig","promiseHandle","promiseCompleted","subscribed","pending","subscriptionHistory","responseCheckIntervalId","requestCompleted","reSubscribeIntervalId","consecutiveFailedSubscribeAttempts","consecutiveNoResponseRequest","U","J","WebSocket","CLOSING","CLOSED","OPEN","G","connectionEstablishedTime","timeToConnect","timeWithoutConnection","openTimestamp","D","A","webSocketTransport","transportLifeTimeInSeconds","delete","has","M","P","urlConnValidTime","H","reason","z","connected","webSocketConnectionFailed","retry","B","closeTimestamp","connectionDuration","init","onInitFailure","onConnectionOpen","onConnectionClose","onConnectionGain","onConnectionLost","onSubscriptionUpdate","onSubscriptionFailure","onAllMessage","subscribeTopics","sendMessage","closeWebSocket","terminateWebSocketManager","setGlobalConfig","loggerConfig","not_string","not_bool","not_type","not_primitive","numeric_arg","not_json","modulo","placeholder","key_access","index_access","param_no","precision","toPrecision","pad_char","repeat","align","SyntaxError","WebSocketManager","CCP_SYN_TIMEOUT","CCP_ACK_TIMEOUT","CCP_LOAD_TIMEOUT","CCP_IFRAME_REFRESH_INTERVAL","LEGACY_LOGIN_URL_PATTERN","CLIENT_ID_MAP","AUTHORIZE_ENDPOINT","LEGACY_AUTHORIZE_ENDPOINT","AUTHORIZE_RETRY_INTERVAL","AUTHORIZE_MAX_RETRY","LEGACY_WHITELISTED_ORIGINS_ENDPOINT","WHITELISTED_ORIGINS_ENDPOINT","WHITELISTED_ORIGINS_RETRY_INTERVAL","WHITELISTED_ORIGINS_MAX_RETRY","createLoginUrl","loginUrl","alias","ccpUrl","getLoginUrl","sanitizeDomain","checkNotInitialized","eventBus","agentDataProvider","AgentDataProvider","initClient","initAgentAppClient","agentAppEndpoint","agentAppClient","terminate","softphoneManager","keepaliveManager","softphoneUserMediaStream","getSoftphoneUserMediaStream","setSoftphoneUserMediaStream","initRingtoneEngines","setupRingtoneEngines","ringtoneSettings","voice","ringtoneUrl","disabled","queue_callback","ringtoneEngines","RINGTONE","VoiceRingtoneEngine","chat","ChatRingtoneEngine","task","TaskRingtoneEngine","QueueCallbackRingtoneEngine","handleRingerDeviceChange","mergeParams","otherParams","ringtone","softphone","disableRingtone","CONFIGURE","ringtoneType","setOutputDevice","initSoftphoneManager","competeForMasterOnAgentUpdate","softphoneParamsIn","softphoneParams","VOICE","SoftphoneManager","allowFramedSoftphone","setupEventListenersForMultiTabUseInFirefox","takeOver","masterId","portStreamId","onInitContactSub","userMediaStream","getTracks","track","READY_TO_START_SESSION","visibilityState","isOutBoundCall","isAutoAcceptEnabled","isQueuedCallback","QUEUE_CALLBACK","initPageOptions","authorize","authorizeEndpoint","isLegacyDomain","verifyDomainAccess","whitelistedOriginsEndpoint","topDomain","referrer","isAllowed","whitelistedOrigins","some","initSharedWorker","sharedWorkerUrl","refreshToken","authTokenExpiration","MediaFactory","worker","SharedWorker","parent","webSocketProvider","WebSocketProvider","onunload","CLOSE","ACKNOWLEDGE","AUTH_FAIL","reload","UPDATE_CONNECTED_CCPS","TERMINATE","TERMINATED","nm","getNotificationManager","initCCP","containerDiv","allow","getComputedStyle","display","offsetWidth","offsetHeight","clientRectsLength","getClientRects","IFRAME_STYLE","KeepaliveManager","ccpSynTimeout","ccpAckTimeout","iframeRefreshInterval","ccpLoadTimeoutInstance","ACK_TIMEOUT","ccpLoadTimeout","pageOptions","loginPopup","getPopupManager","LOGIN_POPUP","loginWindow","loginOptions","loginPopupAutoClose","autoClose","onViewContact","synTimeout","ackTimeout","ackTimer","synTimer","ackSub","SYNCHRONIZE","deferStart","invokeCallbacks","CONNECTION_OPEN","CONNECTION_CLOSE","CONNECTION_GAIN","CONNECTION_LOST","SUBSCRIPTION_UPDATE","SUBSCRIPTION_FAILURE","ALL_MESSAGE","webSocketPayload","SUBSCRIBE","topicName","UPDATE","updateAgentData","oldAgentData","_fireAgentUpdateEvents","ctdata","cdata","routingProfileId","_diffContacts","diff","added","removed","common","oldMap","newMap","oldAgentState","newAgentState","oldRoutingState","newRoutingState","getAgentRoutingEventGraph","oldState","newState","getAgentStateEventGraph","_fireContactUpdateEvents","_unsubAllContactEventsForContact","oldContactState","newContactState","getContactEventGraph","VIEW","viewContact","onAccessDenied","ACCESS_DENIED","onAuthFail","onSoftphoneSessionInit","SESSION_INIT","onConfigure","onInitialized","getWebSocketManager","getLocalTimestamp","localTimestamp","agentRoutingEventGraph","agentStateEventGraph","AFTER_CALL_WORK","contactEventGraph","getAgentAppClient","getSoftphoneManager","notificationManager","popupManager","RingtoneEngineBase","ringtoneConfig","_prevContactId","Audio","_playableAudioPromise","_audio","loop","_audioPlayable","_driveRingtone","_startRingtone","play","_publishTelemetryEvent","_stopRingtone","pause","stopRingtone","_ringtoneSetup","playableAudioWithTimeout","race","audio","setSinkId","onContactConnect","RTPJobIntervalMs","statsReportingJobIntervalMs","streamBufferSize","CallTypeMap","AUDIO_ONLY","VIDEO_ONLY","AUDIO_VIDEO","NONE","AUDIO_INPUT","AUDIO_OUTPUT","MediaTypeMap","UNKNOWN_MEDIA_TYPE","timeSeriesStreamStatsBuffer","aggregatedUserAudioStats","aggregatedRemoteAudioStats","rtpStatsJob","reportStatsJob","HANG_UP_MULTIPLE_SESSIONS_EVENT","MULTIPLE_SESSIONS_EVENT","localMediaStream","softphoneClientId","requestIceAccess","transport","softphoneTransport","softphoneMediaConnections","publishError","SoftphoneLogger","rtcPeerConnectionFactory","RtcPeerConnectionFactory","isBrowserSoftPhoneSupported","UNSUPPORTED_BROWSER","gumPromise","fetchUserMedia","handleSoftPhoneMuteToggle","handleSpeakerDeviceChange","handleMicrophoneDeviceChange","ringtoneEngine","rtcSessions","callsDetected","isSessionPending","pendingContact","pendingAgentConnectionId","postponeStartingSession","agentConnectionId","cancelPendingSession","getSession","replaceLocalMediaTrack","oldTrack","getAudioTracks","removeTrack","addTrack","isContactTerminated","destroySession","session","hangup","sanityCheckActiveSessions","publishMultipleSessionsEvent","callId","_contact","_agentConnectionId","publishTelemetryEvent","initializeParams","softphoneInfo","callConfig","parseCallConfig","callConfigJson","useWebSocketProvider","RTCSession","signalingEndpoint","iceServers","callContextToken","mediaStream","onSessionFailed","rtcSession","publishSoftphoneFailureLogs","publishSessionFailureTelemetryEvent","stopJobsAndReport","sessionReport","onSessionConnected","startStatsCollectionJob","startStatsReportingJob","fireContactAcceptedEvent","onSessionCompleted","deleteLocalMediaStream","onLocalStreamAdded","remoteAudioElement","getElementById","onRefreshContact","onInitContact","agentConnection","autoAccept","muteToggle","muted","localMedia","audioTracks","mediaDevices","getUserMedia","exact","newMicrophoneStream","newMicrophoneTrack","_pc","getSenders","replaceTrack","RTCErrors","ICE_COLLECTION_TIMEOUT","_iceServers","urls","USER_BUSY","USER_BUSY_ERROR","SIGNALLING_HANDSHAKE_FAILURE","_signalingUri","GUM_TIMEOUT_FAILURE","GUM_OTHER_FAILURE","MICROPHONE_NOT_SHARED","SIGNALLING_CONNECTION_FAILURE","CALL_NOT_FOUND","WEBRTC_ERROR","serializedConfig","decodedJSON","CONSTRAINT","webkitGetUserMedia","failedReason","streamStats","userAudioStats","remoteAudioStats","addStreamTypeToStats","callReport","callStartTime","sessionStartTime","callEndTime","sessionEndTime","gumTimeMillis","initializationTimeMillis","iceCollectionTimeMillis","signallingConnectTimeMillis","cleanupTimeMillis","iceCollectionFailure","signallingConnectionFailure","gumOtherFailure","gumTimeoutFailure","createOfferFailure","setLocalDescriptionFailure","userBusyFailure","invalidRemoteSDPFailure","noRemoteIceCandidateFailure","setRemoteDescriptionFailure","getUserAudioStats","previousUserStats","getTimeSeriesStats","getRemoteAudioStats","previousRemoteStats","currentStats","previousStats","streamType","packetsLost","RTPStreamStats","audioLevel","jbMilliseconds","rttMilliseconds","stopJob","jitterBufferMillis","roundTripTimeMillis","softphoneStreamType","_originalLogger","_tee","GET_AGENT_TIMEOUT_MS","GET_AGENT_RECOVERY_TIMEOUT_MS","GET_AGENT_SUCCESS_TIMEOUT_MS","LOG_BUFFER_CAP_SIZE","CHECK_AUTH_TOKEN_INTERVAL_MS","REFRESH_AUTH_TOKEN_INTERVAL_MS","REFRESH_AUTH_TOKEN_MAX_TRY","GET_AGENT_CONFIGURATION_INTERVAL_MS","MasterTopicCoordinator","topicMasterMap","getMaster","setMaster","removeMaster","WorkerClient","request_start","_recordAPILatency","request_end","request_time","_sendAPIMetrics","dimensions","ClientEngine","multiplexer","initData","portConduitMap","masterCoord","logsBuffer","suppress","forceOffline","webSocketManager","logsToUpload","handleSendLogsRequest","getWebSocketUrl","pollForAgent","pollForAgentConfiguration","repeatForever","checkAuthToken","onconnect","ports","portConduit","updateAgent","handleAPIRequest","handleMasterRequest","handleAuthFail","GET_AGENT_SNAPSHOT","snapshotTimestamp","handleAccessDenied","GET_AGENT_CONFIGURATION","pollForAgentPermissions","pollForAgentStates","pollForDialableCountryCodes","pollForRoutingProfileQueues","GET_AGENT_STATES","updateAgentConfiguration","GET_AGENT_PERMISSIONS","GET_DIALABLE_COUNTRY_CODES","countryCodes","GET_ROUTING_PROFILE_QUEUES","filterAuthToken","portId","multiplexerConduit","contactA","contactB","connection","address","logsToSend","SEND_CLIENT_LOGS","expirationDate","currentTimeStamp","thirtyMins","expiration","accessToken","new_request","keyA","new_params","keyB","main","clientEngine","ChatMediaController","mediaInfo","logComponent","createMediaInstance","ChatSession","controller","chatDetails","websocketManager","trackChatConnectionStatus","onConnectionBroken","onConnectionEstablished","mediaControllers","toBeDestroyed","connectionObj","SoftphoneMediaController","TaskMediaController","ifConnectionActive","cleanUp","TaskSession","trackTaskConnectionStatus","agentApp","IFRAME_REFRESH_INTERVAL","APP","isInitialized","instanceAlias","initAppCommunication","iframeId","iframeConduit","BROADCAST_TYPE","getConnectUrl","signOutThroughCCP","logoutUrl","signInThroughinitCCP","container","defaultParams","ccpParams","initApp","containerId","appUrl","endsWith","registerConfig","AppRegistry","register","moduleData","containerDOM","stopApp","makeAppIframe","appName","setAttribute","instance","creator","app","querySelector"],"mappings":"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yC,EAA9T;AAAiU,mDAA8C,EAA/W;AAAkX,kBAAa,EAA/X;AAAkY,gCAA2B,EAA7Z;AAAga,cAAS,EAAza;AAA4a,4BAAuB,EAAnc;AAAsc,gBAAW,EAAjd;AAAod,eAAU,EAA9d;AAAie,oBAAe,EAAhf;AAAmf,YAAO;AAA1f,GA3C2C,CAzhH6Z;AAokHuD,MAAG,CAAC,UAASA,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACriB,QAAIM,GAAG,GAAGZ,OAAO,CAAC,QAAD,CAAjB;;AACAA,IAAAA,OAAO,CAAC,eAAD,CAAP;;AACAA,IAAAA,OAAO,CAAC,yCAAD,CAAP;;AACA,QAAIsJ,kBAAJ;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACE1I,IAAAA,GAAG,CAAC2I,MAAJ,GAAa3I,GAAG,CAAC6H,IAAJ,CAASe,OAAT,CAAiB;AAC5B;AACJ;AACA;;AAEI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,MAAAA,WAAW,EAAE,SAASF,MAAT,CAAgBG,OAAhB,EAAyB;AACpC,YAAIA,OAAO,KAAKC,SAAhB,EAA2BD,OAAO,GAAG,EAAV;AAC3BA,QAAAA,OAAO,GAAG,KAAKE,kBAAL,CAAwBF,OAAxB,CAAV;AAEA9I,QAAAA,GAAG,CAAC6H,IAAJ,CAASoB,IAAT,CAActJ,IAAd,CAAmB,IAAnB,EAAyB,KAAKuJ,IAA9B,EAAoC,UAAUxH,GAAV,EAAeyH,KAAf,EAAsB;AACxD,eAAK/F,GAAL,CAAS1B,GAAT,EAAcoH,OAAO,CAACpH,GAAD,CAArB,EAA4ByH,KAA5B;AACD,SAFD;AAGD,OArJ2B;;AAuJ5B;AACJ;AACA;;AAEI;AACJ;AACA;AACA;A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EAAOyI,KAAP,CAAR;AACD,WAfD;AAgBD,SAjBD,MAiBO;AACLzI,UAAAA,QAAQ,CAAC,IAAD,CAAR;AACD;AACF;AA/HmE,KAAlC,CAApC;AAkIC,GA1MmB,EA0MlB;AAAC,yBAAoB,CAArB;AAAuB,eAAU;AAAjC,GA1MkB,CAx/Isb;AAksJla,MAAG,CAAC,UAASjK,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC5E,QAAIM,GAAG,GAAGZ,OAAO,CAAC,SAAD,CAAjB;;AACA,QAAIgB,eAAe,GAAGhB,OAAO,CAAC,+BAAD,CAA7B;;AACA,QAAI0B,GAAG,GAAG1B,OAAO,CAAC,mBAAD,CAAjB;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACEY,IAAAA,GAAG,CAAC+R,0BAAJ,GAAiC/R,GAAG,CAAC6H,IAAJ,CAASe,OAAT,CAAiB5I,GAAG,CAACoN,WAArB,EAAkC;AACjE;AACJ;AACA;AACI4E,MAAAA,eAAe,EAAE;AACfC,QAAAA,EAAE,EAAE,0BADW;AAEfhH,QAAAA,SAAS,EAAE;AAFI,OAJgD;;AASjE;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIpC,MAAAA,WAAW,EAAE,SAASkJ,0BAAT,CAAoCd,MAApC,EAA4Ci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UAA/C;AACA,aAAKK,QAAL,CAAc,UAAd,EAA0B,IAA1B,EAAgC,IAAhC,EAAsCL,UAAtC;AACD,OAzCD;;AA0CAF,MAAAA,GAAG,CAACC,WAAJ;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACE95B,MAAAA,GAAG,CAACyN,OAAJ,GAAc7E,OAAO,CAAC;AAEpB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,QAAAA,WAAW,EAAE,SAAS4E,OAAT,CAAiB8D,OAAjB,EAA0BE,SAA1B,EAAqCR,MAArC,EAA6C;AACxD,cAAIvF,QAAQ,GAAG6F,OAAO,CAAC7F,QAAvB;AACA,cAAIJ,MAAM,GAAGiG,OAAO,CAACxD,MAAR,CAAezC,MAA5B;AACA,cAAIiB,eAAe,GAAGgF,OAAO,CAACxD,MAAR,CAAexB,eAArC,CAHwD,CAKxD;;AACA,cAAIgF,OAAO,CAACoO,gBAAZ,EAA8BrU,MAAM,GAAG,WAAT;AAE9B,eAAK8tB,MAAL,GAAcA,MAAM,IAAIA,MAAM,CAACiB,MAA/B;AACA,eAAK9oB,OAAL,GAAeA,OAAf;AACA,eAAKE,SAAL,GAAiBA,SAAjB;AACA,eAAKR,MAAL,GAAcA,MAAM,IAAI,EAAxB;AACA,eAAKwG,WAAL,GAAmB,IAAIzX,GAAG,CAACohB,WAAR,CAAoB1V,QAApB,EAA8BJ,MAA9B,CAAnB;AACA,eAAKmM,WAAL,CAAiBoD,iBAAjB,CAAmCtO,eAAnC;AACA,eAAKya,SAAL,GAAiBzV,OAAO,CAACiQ,oBAAR,EAAjB;AAEA,eAAKxI,QAAL,GAAgB,IAAIhZ,GAAG,CAACs6B,QAAR,CAAiB,IAAjB,CAAhB;AACA,eAAKX,IAAL,GAAY,IAAIR,oBAAJ,CAAyBU,GAAG,CAACU,MAA7B,EAAqC,UAArC,CAAZ;AACA,eAAKP,oBAAL,GAA4B,KAA5B;AAEAh6B,UAAAA,GAAG,CAACkP,kBAAJ,CAAuBvP,IAAvB,CAA4B,IAA5B;AACA,eAAKijB,IAAL,GAAY,KAAK4X,SAAjB;AACD,SAlCmB;;AAoCpB;AACJ;AACA;;AAEI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIjiB,QAAAA,IAAI,EAAE,SAASA,IAAT,CAAclP,QAAd,EAAwB;AAC5B,cAAIA,QAAJ,EAAc;AACZ;AACA,iBAAKoO,WAAL,CAAiBoD,iBAAjB,CAAmC,UAAnC;AACA,iBAAK4H,EAAL,CAAQ,UAAR,EAAoB,UAAUP,IAAV,EAAgB;AAClC7Y,cAAAA,QAAQ,CAAC1J,IAAT,CAAcuiB,IAAd,EAAoBA,IAAI,CAAC3e,KAAzB,EAAgC2e,IAAI,CAAC7f,IAArC;AACD,aAFD;AAGD;;AACD,eAAKo4B,KAAL;AAEA,iBAAO,KAAKzhB,QAAZ;AACD,SAvEmB;;AAyEpB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEI;AACJ;AACA;AACI+R,QAAAA,KAAK,EAAE,SAASA,KAAT,CAAe1hB,QAAf,EAAyB;AAC9B,iBAAO,KAAKoxB,KAAL,CAAW,MAAX,EAAmBpxB,QAAnB,CAAP;AACD,SAlGmB;;AAoGpB;AACJ;AACA;AACIoxB,QAAAA,KAAK,EAAE,SAASA,KAAT,CAAe12B,KAAf,EAAsB4U,IAAtB,EAA4B;AACjC,eAAKghB,IAAL,CAAUc,KAAV,CAAgB12B,KAAhB,EAAuB4U,IAAvB,EAA6B,IAA7B;;AACA,iBAAO,IAAP;AACD,SA1GmB;;AA4GpB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI+hB,QAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACtB,eAAKC,kBAAL,CAAwB,kBAAxB;AACA,eAAKA,kBAAL,CAAwB,cAAxB;AACA,eAAKlY,EAAL,CAAQ,kBAAR,EAA4B,SAASmY,eAAT,CAAyB1Y,IAAzB,EAA+B;AACzDA,YAAAA,IAAI,CAAC3e,KAAL,GAAavD,GAAG,CAAC6H,IAAJ,CAAStE,KAAT,CAAe,IAAIhE,KAAJ,CAAU,yBAAV,CAAf,EAAqD;AAC/DC,cAAAA,IAAI,EAAE,qBADyD;AAClCuZ,cAAAA,SAAS,EAAE;AADuB,aAArD,CAAb;AAGD,WAJD;;AAMA,cAAI,KAAKtB,WAAL,CAAiB8K,MAAjB,IAA2B,CAAC,KAAK9K,WAAL,CAAiB8K,MAAjB,CAAwBc,WAAxD,EAAqE;AAAE;AACrE,iBAAK5L,WAAL,CAAiB8K,MAAjB,CAAwBmY,KAAxB;;AACA,gBAAI,KAAKjjB,WAAL,CAAiB4K,cAArB,EAAqC;AAClC,mBAAK5K,WAAL,CAAiB4K,cAAjB;AACF,aAFD,MAEO;AACL,mBAAKsY,kBAAL,CAAwB,MAAxB,EADK,CAC4B;AAClC;AACF;;AAED,iBAAO,IAAP;AACD,SArJmB;;AAuJpB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIE,QAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkBxxB,QAAlB,EAA4B;AACpC;AACAA,UAAAA,QAAQ,GAAGrJ,GAAG,CAAC6H,IAAJ,CAAS2J,EAAT,CAAYspB,SAAZ,CAAsBzxB,QAAtB,EAAgC,CAAhC,CAAX;;AAEA,mBAAS0xB,eAAT,CAAyB/hB,QAAzB,EAAmC;AACjC3P,YAAAA,QAAQ,CAAC1J,IAAT,CAAcqZ,QAAd,EAAwBA,QAAQ,CAACzV,KAAjC,EAAwCyV,QAAQ,CAAC3W,IAAjD,EAAuD,UAAUkU,MAAV,EAAkB;AACvE,kBAAIA,MAAM,KAAK,KAAf,EAAsB;;AAEtB,kBAAIyC,QAAQ,CAACgiB,WAAT,EAAJ,EAA4B;AAC1BhiB,gBAAAA,QAAQ,CAACiiB,QAAT,GAAoBxY,EAApB,CAAuB,UAAvB,EAAmCsY,eAAnC,EAAoDxiB,IAApD;AACD,eAFD,MAEO;AACLlP,gBAAAA,QAAQ,CAAC1J,IAAT,CAAcqZ,QAAd,EAAwB,IAAxB,EAA8B,IAA9B,EAAoChZ,GAAG,CAAC6H,IAAJ,CAAS2J,EAAT,CAAY0pB,IAAhD;AACD;AACF,aARD;AASD;;AAED,eAAKzY,EAAL,CAAQ,UAAR,EAAoBsY,eAApB,EAAqCxiB,IAArC;AACD,SA/MmB;;AAiNpB;AACJ;AACA;AACA;AACA;AACA;AACA;AACI4iB,QAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkB9xB,QAAlB,EAA4B;AACpC,cAAIC,IAAI,GAAG,IAAX;;AACA,mBAASyxB,eAAT,CAAyBvxB,GAAzB,EAA8BnH,IAA9B,EAAoC;AAClC,gBAAImH,GAAJ,EAAS,OAAOH,QAAQ,CAACG,GAAD,EAAM,IAAN,CAAf;AACT,gBAAInH,IAAI,KAAK,IAAb,EAAmB,OAAOgH,QAAQ,CAAC,IAAD,EAAO,IAAP,CAAf;AAEnB,gBAAI0E,MAAM,GAAGzE,IAAI,CAACiI,OAAL,CAAa6pB,gBAAb,CAA8B9xB,IAAI,CAACmI,SAAnC,CAAb;AACA,gBAAI4pB,SAAS,GAAGttB,MAAM,CAACstB,SAAvB;AACA,gBAAIrI,KAAK,CAAC6D,OAAN,CAAcwE,SAAd,CAAJ,EAA8BA,SAAS,GAAGA,SAAS,CAAC,CAAD,CAArB;AAC9B,gBAAIC,KAAK,GAAGjC,QAAQ,CAAC5Q,MAAT,CAAgBpmB,IAAhB,EAAsBg5B,SAAtB,CAAZ;AACA,gBAAIE,iBAAiB,GAAG,IAAxB;AACAv7B,YAAAA,GAAG,CAAC6H,IAAJ,CAASyI,SAAT,CAAmBgrB,KAAnB,EAA0B,UAASzC,IAAT,EAAe;AACvC0C,cAAAA,iBAAiB,GAAGlyB,QAAQ,CAAC,IAAD,EAAOwvB,IAAP,CAA5B;;AACA,kBAAI0C,iBAAiB,KAAK,KAA1B,EAAiC;AAC/B,uBAAOv7B,GAAG,CAAC6H,IAAJ,CAAS6yB,KAAhB;AACD;AACF,aALD;AAMA,mBAAOa,iBAAP;AACD;;AAED,eAAKV,QAAL,CAAcE,eAAd;AACD,SA7OmB;;AA+OpB;AACJ;AACA;AACA;AACA;AACA;AACIS,QAAAA,UAAU,EAAE,SAASA,UAAT,GAAsB;AAChC,iBAAO,KAAKjqB,OAAL,CAAa6pB,gBAAb,CAA8B,KAAK3pB,SAAnC,IAAgD,IAAhD,GAAuD,KAA9D;AACD,SAvPmB;;AAyPpB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIgqB,QAAAA,gBAAgB,EAAE,SAASA,gBAAT,GAA4B;AAC5C,cAAIC,OAAO,GAAG17B,GAAG,CAAC6H,IAAJ,CAAS0a,MAAvB;AACA,cAAInD,GAAG,GAAG,IAAV;AACA,cAAImD,MAAM,GAAG,IAAb;;AAEA,cAAIviB,GAAG,CAAC8iB,UAAJ,CAAeC,iBAAf,KAAqC,CAAzC,EAA4C;AAC1CR,YAAAA,MAAM,GAAG,IAAImZ,OAAO,CAACC,WAAZ,EAAT;AACA/zB,YAAAA,OAAO,CAACg0B,QAAR,CAAiB,YAAW;AAAExc,cAAAA,GAAG,CAAC7G,IAAJ;AAAa,aAA3C;AACD,WAHD,MAGO;AACLgK,YAAAA,MAAM,GAAG,IAAImZ,OAAO,CAACtH,MAAZ,EAAT;AACA7R,YAAAA,MAAM,CAACsZ,QAAP,GAAkB,IAAlB;AAEAtZ,YAAAA,MAAM,CAACuZ,IAAP,GAAc,KAAd;AACAvZ,YAAAA,MAAM,CAACE,EAAP,CAAU,aAAV,EAAyB,UAASoM,KAAT,EAAgB;AACvC,kBAAI,CAACtM,MAAM,CAACuZ,IAAR,IAAgBjN,KAAK,KAAK,MAA9B,EAAsC;AACpCtM,gBAAAA,MAAM,CAACuZ,IAAP,GAAc,IAAd;AACAl0B,gBAAAA,OAAO,CAACg0B,QAAR,CAAiB,YAAW;AAAExc,kBAAAA,GAAG,CAAC7G,IAAJ;AAAa,iBAA3C;AACD;AACF,aALD;AAMD;;AAED,eAAKkK,EAAL,CAAQ,OAAR,EAAiB,UAASjZ,GAAT,EAAc;AAC7B+Y,YAAAA,MAAM,CAACK,IAAP,CAAY,OAAZ,EAAqBpZ,GAArB;AACD,WAFD;AAIA,eAAKiZ,EAAL,CAAQ,aAAR,EAAuB,SAASsZ,aAAT,CAAuBxiB,UAAvB,EAAmCH,OAAnC,EAA4C8I,IAA5C,EAAkD;AACvE,gBAAI3I,UAAU,GAAG,GAAjB,EAAsB;AACpB6F,cAAAA,GAAG,CAACpH,cAAJ,CAAmB,UAAnB,EAA+BhY,GAAG,CAACiY,cAAJ,CAAmBC,IAAnB,CAAwBqM,SAAvD;AACAnF,cAAAA,GAAG,CAACpH,cAAJ,CAAmB,WAAnB,EAAgChY,GAAG,CAACiY,cAAJ,CAAmBC,IAAnB,CAAwB8jB,UAAxD;AACA5c,cAAAA,GAAG,CAACqD,EAAJ,CAAO,WAAP,EAAoB,SAASwZ,eAAT,CAAyB14B,KAAzB,EAAgC;AAClD2e,gBAAAA,IAAI,CAAC3e,KAAL,GAAaA,KAAb;AACA2e,gBAAAA,IAAI,CAAC3e,KAAL,CAAWwV,SAAX,GAAuB,KAAvB;AACD,eAHD;AAKA,kBAAImjB,wBAAwB,GAAG,KAA/B;AACA,kBAAIC,WAAJ;;AACA,kBAAI/c,GAAG,CAAC3H,WAAJ,CAAgBuQ,MAAhB,KAA2B,MAA/B,EAAuC;AACrCmU,gBAAAA,WAAW,GAAG9f,QAAQ,CAACjD,OAAO,CAAC,gBAAD,CAAR,EAA4B,EAA5B,CAAtB;AACD;;AACD,kBAAI+iB,WAAW,KAAKpzB,SAAhB,IAA6B,CAACqzB,KAAK,CAACD,WAAD,CAAnC,IAAoDA,WAAW,IAAI,CAAvE,EAA0E;AACxED,gBAAAA,wBAAwB,GAAG,IAA3B;AACA,oBAAIG,WAAW,GAAG,CAAlB;AACD;;AAED,kBAAIC,yBAAyB,GAAG,SAASA,yBAAT,GAAqC;AACnE,oBAAIJ,wBAAwB,IAAIG,WAAW,KAAKF,WAAhD,EAA6D;AAC3D5Z,kBAAAA,MAAM,CAACK,IAAP,CAAY,OAAZ,EAAqB5iB,GAAG,CAAC6H,IAAJ,CAAStE,KAAT,CACnB,IAAIhE,KAAJ,CAAU,8CACR88B,WADQ,GACM,MADN,GACeF,WADf,GAC6B,SADvC,CADmB,EAGnB;AAAE38B,oBAAAA,IAAI,EAAE;AAAR,mBAHmB,CAArB;AAKD,iBAND,MAMO,IAAIQ,GAAG,CAAC8iB,UAAJ,CAAeC,iBAAf,KAAqC,CAAzC,EAA4C;AACjDR,kBAAAA,MAAM,CAACga,GAAP;AACD,iBAFM,MAEA;AACLha,kBAAAA,MAAM,CAACK,IAAP,CAAY,KAAZ;AACD;AACF,eAZD;;AAcA,kBAAI4Z,UAAU,GAAGta,IAAI,CAAC5I,YAAL,CAAkB0P,sBAAlB,EAAjB;;AAEA,kBAAIhpB,GAAG,CAAC8iB,UAAJ,CAAeC,iBAAf,KAAqC,CAAzC,EAA4C;AAC1C,oBAAImZ,wBAAJ,EAA8B;AAC5B,sBAAIO,iBAAiB,GAAG,IAAIf,OAAO,CAACC,WAAZ,EAAxB;;AACAc,kBAAAA,iBAAiB,CAACC,MAAlB,GAA2B,UAASlY,KAAT,EAAgB;AACzC,wBAAIA,KAAK,IAAIA,KAAK,CAAC5kB,MAAnB,EAA2B;AACzBy8B,sBAAAA,WAAW,IAAI7X,KAAK,CAAC5kB,MAArB;AACD;;AACD,2BAAO87B,OAAO,CAACC,WAAR,CAAoBz5B,SAApB,CAA8Bw6B,MAA9B,CAAqC38B,KAArC,CAA2C,IAA3C,EAAiDD,SAAjD,CAAP;AACD,mBALD;;AAOA28B,kBAAAA,iBAAiB,CAACha,EAAlB,CAAqB,KAArB,EAA4B6Z,yBAA5B;AACA/Z,kBAAAA,MAAM,CAACE,EAAP,CAAU,OAAV,EAAmB,UAASjZ,GAAT,EAAc;AAC/B0yB,oBAAAA,wBAAwB,GAAG,KAA3B;AACAM,oBAAAA,UAAU,CAACG,MAAX,CAAkBF,iBAAlB;AACAA,oBAAAA,iBAAiB,CAAC7Z,IAAlB,CAAuB,KAAvB;AACA6Z,oBAAAA,iBAAiB,CAACF,GAAlB;AACD,mBALD;AAMAC,kBAAAA,UAAU,CAACI,IAAX,CAAgBH,iBAAhB,EAAmCG,IAAnC,CAAwCra,MAAxC,EAAgD;AAAEga,oBAAAA,GAAG,EAAE;AAAP,mBAAhD;AACD,iBAjBD,MAiBO;AACLC,kBAAAA,UAAU,CAACI,IAAX,CAAgBra,MAAhB;AACD;AACF,eArBD,MAqBO;AAEL,oBAAI2Z,wBAAJ,EAA8B;AAC5BM,kBAAAA,UAAU,CAAC/Z,EAAX,CAAc,MAAd,EAAsB,UAAS1gB,GAAT,EAAc;AAClC,wBAAIA,GAAG,IAAIA,GAAG,CAACnC,MAAf,EAAuB;AACrBy8B,sBAAAA,WAAW,IAAIt6B,GAAG,CAACnC,MAAnB;AACD;AACF,mBAJD;AAKD;;AAED48B,gBAAAA,UAAU,CAAC/Z,EAAX,CAAc,MAAd,EAAsB,UAAS1gB,GAAT,EAAc;AAClCwgB,kBAAAA,MAAM,CAACK,IAAP,CAAY,MAAZ,EAAoB7gB,GAApB;AACD,iBAFD;AAGAy6B,gBAAAA,UAAU,CAAC/Z,EAAX,CAAc,KAAd,EAAqB6Z,yBAArB;AACD;;AAEDE,cAAAA,UAAU,CAAC/Z,EAAX,CAAc,OAAd,EAAuB,UAASjZ,GAAT,EAAc;AACnC0yB,gBAAAA,wBAAwB,GAAG,KAA3B;AACA3Z,gBAAAA,MAAM,CAACK,IAAP,CAAY,OAAZ,EAAqBpZ,GAArB;AACD,eAHD;AAID;AACF,WA7ED;AA+EA,iBAAO+Y,MAAP;AACD,SAnXmB;;AAqXpB;AACJ;AACA;AACA;AACA;AACIiY,QAAAA,SAAS,EAAE,SAAS5X,IAAT,CAAcia,SAAd,EAAyBC,IAAzB,EAA+BnkB,IAA/B,EAAqC;AAC9C,cAAI,OAAOmkB,IAAP,KAAgB,UAApB,EAAgC;AAAEnkB,YAAAA,IAAI,GAAGmkB,IAAP;AAAaA,YAAAA,IAAI,GAAG,IAAP;AAAc;;AAC7D,cAAI,CAACnkB,IAAL,EAAWA,IAAI,GAAG,YAAW,CAAG,CAArB;AACX,cAAI,CAACmkB,IAAL,EAAWA,IAAI,GAAG,KAAKC,eAAL,CAAqBF,SAArB,EAAgC,KAAK7jB,QAArC,CAAP;AAEX,cAAIgkB,QAAQ,GAAGh9B,GAAG,CAACkP,kBAAJ,CAAuBhN,SAAvB,CAAiC0gB,IAAhD;AACAoa,UAAAA,QAAQ,CAACr9B,IAAT,CAAc,IAAd,EAAoBk9B,SAApB,EAA+BC,IAA/B,EAAqC,UAAUtzB,GAAV,EAAe;AAClD,gBAAIA,GAAJ,EAAS,KAAKwP,QAAL,CAAczV,KAAd,GAAsBiG,GAAtB;AACTmP,YAAAA,IAAI,CAAChZ,IAAL,CAAU,IAAV,EAAgB6J,GAAhB;AACD,WAHD;AAID,SApYmB;;AAsYpB;AACJ;AACA;AACIuzB,QAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBF,SAAzB,EAAoC;AACnD,kBAAQA,SAAR;AACE,iBAAK,SAAL;AACA,iBAAK,UAAL;AACA,iBAAK,MAAL;AACA,iBAAK,OAAL;AACA,iBAAK,eAAL;AACA,iBAAK,YAAL;AACE,qBAAO,CAAC,IAAD,CAAP;;AACF,iBAAK,OAAL;AACE,qBAAO,CAAC,KAAK7jB,QAAL,CAAczV,KAAf,EAAsB,KAAKyV,QAA3B,CAAP;;AACF;AACE,qBAAO,CAAC,KAAKA,QAAN,CAAP;AAXJ;AAaD,SAvZmB;;AAyZpB;AACJ;AACA;AACIikB,QAAAA,OAAO,EAAE,SAASA,OAAT,CAAiBC,OAAjB,EAA0B7zB,QAA1B,EAAoC;AAC3C,cAAI,CAACA,QAAD,IAAa,OAAO6zB,OAAP,KAAmB,UAApC,EAAgD;AAC9C7zB,YAAAA,QAAQ,GAAG6zB,OAAX;AACAA,YAAAA,OAAO,GAAG,IAAV;AACD;;AACD,iBAAO,IAAIl9B,GAAG,CAACkO,OAAJ,CAAYivB,OAAhB,GAA0BC,IAA1B,CAA+B,KAAKC,KAAL,EAA/B,EAA6CH,OAA7C,EAAsD7zB,QAAtD,CAAP;AACD,SAlamB;;AAoapB;AACJ;AACA;AACIuR,QAAAA,WAAW,EAAE,SAASA,WAAT,GAAuB;AAClC,iBAAOta,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqC,KAAK8X,WAAL,CAAiB2B,OAAtD,EAA+D,mBAA/D,CAAP;AACD,SAzamB;;AA2apB;AACJ;AACA;AACIkkB,QAAAA,iBAAiB,EAAE,SAASA,iBAAT,GAA6B;AAC9C,eAAKC,gBAAL,GAAwB,IAAxB;AACA,eAAKvlB,cAAL,CAAoB,UAApB,EAAgChY,GAAG,CAACiY,cAAJ,CAAmBC,IAAnB,CAAwBuH,oBAAxD;AACA,eAAKzH,cAAL,CAAoB,MAApB,EAA4BhY,GAAG,CAACiY,cAAJ,CAAmBC,IAAnB,CAAwBqJ,IAApD;AACA,iBAAO,IAAP;AACD,SAnbmB;;AAqbpB;AACJ;AACA;AACI8b,QAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACtB,cAAI,KAAK9rB,OAAL,CAAa2E,GAAb,CAAiB6R,QAAjB,KAA8B,OAA9B,IACA,KAAKxW,OAAL,CAAa2E,GAAb,CAAiB6R,QAAjB,KAA8B,KADlC,EACyC;AACvC,iBAAK/P,cAAL,CAAoB,OAApB,EAA6B,KAAKwlB,UAAlC;AACA,iBAAKC,WAAL,CAAiB,OAAjB,EAA0B,KAAKD,UAA/B;AACD;;AACD,iBAAO,IAAP;AACD,SA/bmB;;AAicpB;AACJ;AACA;AACIA,QAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBvnB,OAApB,EAA6B;AACvCA,UAAAA,OAAO,CAACwB,WAAR,CAAoBuQ,MAApB,GAA6B,KAA7B;AACA/R,UAAAA,OAAO,CAACwB,WAAR,CAAoBjN,IAApB,GAA2ByL,OAAO,CAAC1E,OAAR,CAAgB7F,QAAhB,CAAyBlB,IAAzB,GACA,GADA,GACMyL,OAAO,CAACwB,WAAR,CAAoB2D,IADrD;AAEAnF,UAAAA,OAAO,CAACwB,WAAR,CAAoB2D,IAApB,GAA2B,EAA3B,CAJuC,CAMvC;;AACA,iBAAOnF,OAAO,CAACwB,WAAR,CAAoB2B,OAApB,CAA4B,gBAA5B,CAAP;AACA,iBAAOnD,OAAO,CAACwB,WAAR,CAAoB2B,OAApB,CAA4B,cAA5B,CAAP;AACD,SA7cmB;;AA+cpB;AACJ;AACA;AACIkH,QAAAA,mBAAmB,EAAE,SAASA,mBAAT,GAA+B;AAClD,eAAK0Z,oBAAL,GAA4B,IAA5B;AACD;AApdmB,OAAD,CAArB;AAudA;AACF;AACA;;AACEh6B,MAAAA,GAAG,CAACyN,OAAJ,CAAY+C,kBAAZ,GAAiC,SAASA,kBAAT,CAA4BC,iBAA5B,EAA+C;AAC9E,aAAKvO,SAAL,CAAew7B,OAAf,GAAyB,SAASA,OAAT,GAAmB;AAC1C,cAAIp0B,IAAI,GAAG,IAAX,CAD0C,CAE1C;;AACA,eAAKmO,WAAL,CAAiBoD,iBAAjB,CAAmC,SAAnC;AACA,iBAAO,IAAIpK,iBAAJ,CAAsB,UAAStG,OAAT,EAAkBwzB,MAAlB,EAA0B;AACrDr0B,YAAAA,IAAI,CAACmZ,EAAL,CAAQ,UAAR,EAAoB,UAASP,IAAT,EAAe;AACjC,kBAAIA,IAAI,CAAC3e,KAAT,EAAgB;AACdo6B,gBAAAA,MAAM,CAACzb,IAAI,CAAC3e,KAAN,CAAN;AACD,eAFD,MAEO;AACL;AACA;AACA4G,gBAAAA,OAAO,CAAC7J,MAAM,CAACC,cAAP,CACN2hB,IAAI,CAAC7f,IAAL,IAAa,EADP,EAEN,WAFM,EAGN;AAAC8G,kBAAAA,KAAK,EAAE+Y;AAAR,iBAHM,CAAD,CAAP;AAKD;AACF,aAZD;AAaA5Y,YAAAA,IAAI,CAACmxB,KAAL;AACD,WAfM,CAAP;AAgBD,SApBD;AAqBD,OAtBD;AAwBA;AACF;AACA;;;AACEz6B,MAAAA,GAAG,CAACyN,OAAJ,CAAYoD,uBAAZ,GAAsC,SAASA,uBAAT,GAAmC;AACvE,eAAO,KAAK3O,SAAL,CAAew7B,OAAtB;AACD,OAFD;;AAIA19B,MAAAA,GAAG,CAAC6H,IAAJ,CAASgG,WAAT,CAAqB7N,GAAG,CAACyN,OAAzB;AAEAzN,MAAAA,GAAG,CAAC6H,IAAJ,CAAS+1B,KAAT,CAAe59B,GAAG,CAACyN,OAAnB,EAA4BzN,GAAG,CAACkP,kBAAhC;AAEC,KAxyBD,EAwyBGvP,IAxyBH,CAwyBQ,IAxyBR,EAwyBaP,OAAO,CAAC,UAAD,CAxyBpB;AAyyBC,GA1yBQ,EA0yBP;AAAC,cAAS,EAAV;AAAa,uBAAkB,EAA/B;AAAkC,gBAAW,EAA7C;AAAgD,gBAAW;AAA3D,GA1yBO,CAzuSic;AAmhUxY,MAAG,CAAC,UAASA,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACtG;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEE,QAAIM,GAAG,GAAGZ,OAAO,CAAC,QAAD,CAAjB;;AACA,QAAIwJ,OAAO,GAAG5I,GAAG,CAAC6H,IAAJ,CAASe,OAAvB;;AACA,QAAIywB,QAAQ,GAAGj6B,OAAO,CAAC,UAAD,CAAtB;AAEA;AACF;AACA;;;AACE,aAASy+B,eAAT,CAAyB3b,IAAzB,EAA+B;AAC7B,UAAIyK,MAAM,GAAGzK,IAAI,CAACjM,OAAL,CAAa6nB,OAA1B;AACA,UAAIC,SAAS,GAAGpR,MAAM,CAAC5e,MAAP,CAAcgwB,SAA9B;AACA,UAAIC,eAAe,GAAG,KAAtB;AACA,UAAIj6B,KAAK,GAAG,OAAZ;AAEAg6B,MAAAA,SAAS,CAAChQ,OAAV,CAAkB,UAASkQ,QAAT,EAAmB;AACnC,YAAI,CAACD,eAAL,EAAsB;AACpB,cAAIE,OAAO,GAAGvR,MAAM,CAACwR,QAAP,CAAgBF,QAAQ,CAACC,OAAzB,CAAd;;AACA,cAAIA,OAAO,IAAIA,OAAO,CAAChc,IAAD,EAAO+b,QAAQ,CAACG,QAAhB,EAA0BH,QAAQ,CAACI,QAAnC,CAAtB,EAAoE;AAClEL,YAAAA,eAAe,GAAG,IAAlB;AACAj6B,YAAAA,KAAK,GAAGk6B,QAAQ,CAACl6B,KAAjB;AACD;AACF;AACF,OARD;AAUA,UAAI,CAACi6B,eAAD,IAAoB9b,IAAI,CAAC3e,KAA7B,EAAoCQ,KAAK,GAAG,SAAR;;AAEpC,UAAIA,KAAK,KAAK,SAAd,EAAyB;AACvB4oB,QAAAA,MAAM,CAAC2R,UAAP,CAAkBpc,IAAlB;AACD,OAFD,MAEO;AACLyK,QAAAA,MAAM,CAAC4R,QAAP,CAAgBrc,IAAhB,EAAsBne,KAAK,KAAK,OAAhC;AACD;AACF;AAED;AACF;AACA;;;AACE/D,IAAAA,GAAG,CAAC+O,cAAJ,GAAqBnG,OAAO,CAAC;AAC3B;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,MAAAA,WAAW,EAAE,SAASA,WAAT,CAAqB0I,OAArB,EAA8BxN,KAA9B,EAAqC;AAChD,aAAKwN,OAAL,GAAeA,OAAf;AACA,aAAKxN,KAAL,GAAaA,KAAb;AACA,aAAKy6B,gBAAL,CAAsB,KAAKz6B,KAA3B;AACD,OAd0B;AAgB3BwN,MAAAA,OAAO,EAAE,IAhBkB;AAkB3BxN,MAAAA,KAAK,EAAE,IAlBoB;AAoB3BgK,MAAAA,MAAM,EAAE,IApBmB;AAsB3BowB,MAAAA,QAAQ,EAAE;AACR3zB,QAAAA,IAAI,EAAE,UAAS0X,IAAT,EAAekc,QAAf,EAAyBC,QAAzB,EAAmC;AACvC,cAAI;AACF,gBAAI9nB,MAAM,GAAG8iB,QAAQ,CAAC5Q,MAAT,CAAgBvG,IAAI,CAAC7f,IAArB,EAA2Bg8B,QAA3B,CAAb;AACD,WAFD,CAEE,OAAO70B,GAAP,EAAY;AACZ,mBAAO,KAAP;AACD;;AAED,iBAAO6vB,QAAQ,CAACoF,eAAT,CAAyBloB,MAAzB,EAAgC6nB,QAAhC,CAAP;AACD,SATO;AAWRM,QAAAA,OAAO,EAAE,UAASxc,IAAT,EAAekc,QAAf,EAAyBC,QAAzB,EAAmC;AAC1C,cAAI;AACF,gBAAIM,OAAO,GAAGtF,QAAQ,CAAC5Q,MAAT,CAAgBvG,IAAI,CAAC7f,IAArB,EAA2Bg8B,QAA3B,CAAd;AACD,WAFD,CAEE,OAAO70B,GAAP,EAAY;AACZ,mBAAO,KAAP;AACD;;AAED,cAAI,CAACwpB,KAAK,CAAC6D,OAAN,CAAc8H,OAAd,CAAL,EAA6BA,OAAO,GAAG,CAACA,OAAD,CAAV;AAC7B,cAAIC,UAAU,GAAGD,OAAO,CAAC/+B,MAAzB;AACA,cAAI,CAACg/B,UAAL,EAAiB,OAAO,KAAP;;AACjB,eAAK,IAAIC,GAAG,GAAG,CAAf,EAAmBA,GAAG,GAAGD,UAAzB,EAAqCC,GAAG,EAAxC,EAA4C;AAC1C,gBAAI,CAACxF,QAAQ,CAACoF,eAAT,CAAyBE,OAAO,CAACE,GAAD,CAAhC,EAAuCT,QAAvC,CAAL,EAAuD;AACrD,qBAAO,KAAP;AACD;AACF;;AACD,iBAAO,IAAP;AACD,SA3BO;AA6BRU,QAAAA,OAAO,EAAE,UAAS5c,IAAT,EAAekc,QAAf,EAAyBC,QAAzB,EAAmC;AAC1C,cAAI;AACF,gBAAIM,OAAO,GAAGtF,QAAQ,CAAC5Q,MAAT,CAAgBvG,IAAI,CAAC7f,IAArB,EAA2Bg8B,QAA3B,CAAd;AACD,WAFD,CAEE,OAAO70B,GAAP,EAAY;AACZ,mBAAO,KAAP;AACD;;AAED,cAAI,CAACwpB,KAAK,CAAC6D,OAAN,CAAc8H,OAAd,CAAL,EAA6BA,OAAO,GAAG,CAACA,OAAD,CAAV;AAC7B,cAAIC,UAAU,GAAGD,OAAO,CAAC/+B,MAAzB;;AACA,eAAK,IAAIi/B,GAAG,GAAG,CAAf,EAAmBA,GAAG,GAAGD,UAAzB,EAAqCC,GAAG,EAAxC,EAA4C;AAC1C,gBAAIxF,QAAQ,CAACoF,eAAT,CAAyBE,OAAO,CAACE,GAAD,CAAhC,EAAuCT,QAAvC,CAAJ,EAAsD;AACpD,qBAAO,IAAP;AACD;AACF;;AACD,iBAAO,KAAP;AACD,SA5CO;AA8CRjX,QAAAA,MAAM,EAAE,UAASjF,IAAT,EAAekc,QAAf,EAAyB;AAC/B,cAAI7kB,UAAU,GAAG2I,IAAI,CAAC5I,YAAL,CAAkBC,UAAnC;AACA,iBAAQ,OAAOA,UAAP,KAAsB,QAAvB,IAAqCA,UAAU,KAAK6kB,QAA3D;AACD,SAjDO;AAmDR76B,QAAAA,KAAK,EAAE,UAAS2e,IAAT,EAAekc,QAAf,EAAyB;AAC9B,cAAI,OAAOA,QAAP,KAAoB,QAApB,IAAgClc,IAAI,CAAC3e,KAAzC,EAAgD;AAC9C,mBAAO66B,QAAQ,KAAKlc,IAAI,CAAC3e,KAAL,CAAW/D,IAA/B;AACD,WAH6B,CAI9B;;;AACA,iBAAO4+B,QAAQ,KAAK,CAAC,CAAClc,IAAI,CAAC3e,KAA3B;AACD;AAzDO,OAtBiB;AAkF3Bw7B,MAAAA,SAAS,EAAE,IAAI/+B,GAAG,CAACkP,kBAAR,GAA6BoQ,iBAA7B,CAA+C,UAASC,GAAT,EAAc;AACtEA,QAAAA,GAAG,CAAC,aAAD,EAAgB,OAAhB,EAAyB,UAAS2C,IAAT,EAAe;AACzC,cAAIyK,MAAM,GAAGzK,IAAI,CAACjM,OAAL,CAAa6nB,OAA1B;;AACA,cAAI5b,IAAI,CAAC3e,KAAL,IAAc2e,IAAI,CAAC3e,KAAL,CAAW/D,IAAX,KAAoB,kBAAtC,EAA0D;AACxD0iB,YAAAA,IAAI,CAAC3e,KAAL,CAAWiiB,UAAX,GAAwB,CAACmH,MAAM,CAAC5e,MAAP,CAAc4X,KAAd,IAAuB,CAAxB,IAA6B,IAArD;AACD;AACF,SALE,CAAH;AAOApG,QAAAA,GAAG,CAAC,cAAD,EAAiB,aAAjB,EAAgCse,eAAhC,CAAH;AAEAte,QAAAA,GAAG,CAAC,aAAD,EAAgB,cAAhB,EAAgCse,eAAhC,CAAH;AACD,OAXU,CAlFgB;;AA+F3B;AACJ;AACA;AACImB,MAAAA,IAAI,EAAE,SAASA,IAAT,CAAc/tB,MAAd,EAAsB5H,QAAtB,EAAgC;AACpC,YAAI,OAAO4H,MAAP,KAAkB,UAAtB,EAAkC;AAChC5H,UAAAA,QAAQ,GAAG4H,MAAX;AAAmBA,UAAAA,MAAM,GAAGlI,SAAT;AACpB;;AAED,YAAIkI,MAAM,IAAIA,MAAM,CAACguB,OAArB,EAA8B;AAC5BhuB,UAAAA,MAAM,GAAGjR,GAAG,CAAC6H,IAAJ,CAASsF,IAAT,CAAc8D,MAAd,CAAT;;AACA,cAAI,OAAOA,MAAM,CAACguB,OAAP,CAAetZ,KAAtB,KAAgC,QAApC,EAA8C;AAC5C,iBAAK5X,MAAL,CAAY4X,KAAZ,GAAoB1U,MAAM,CAACguB,OAAP,CAAetZ,KAAnC;AACD;;AACD,cAAI,OAAO1U,MAAM,CAACguB,OAAP,CAAeC,WAAtB,KAAsC,QAA1C,EAAoD;AAClD,iBAAKnxB,MAAL,CAAYmxB,WAAZ,GAA0BjuB,MAAM,CAACguB,OAAP,CAAeC,WAAzC;AACD;;AACD,iBAAOjuB,MAAM,CAACguB,OAAd;AACD;;AAED,YAAIhpB,OAAO,GAAG,KAAK1E,OAAL,CAAaqG,WAAb,CAAyB,KAAK7J,MAAL,CAAY0D,SAArC,EAAgDR,MAAhD,CAAd;AACAgF,QAAAA,OAAO,CAAC6nB,OAAR,GAAkB,IAAlB;AACA7nB,QAAAA,OAAO,CAAC+C,QAAR,CAAiBnN,UAAjB,GAA8B,KAAKkC,MAAL,CAAYmxB,WAA1C;AACAjpB,QAAAA,OAAO,CAACkpB,YAAR,CAAqB,KAAKJ,SAA1B;AAEA,YAAI11B,QAAJ,EAAc4M,OAAO,CAACsC,IAAR,CAAalP,QAAb;AACd,eAAO4M,OAAP;AACD,OAzH0B;AA2H3BqoB,MAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBpc,IAApB,EAA0B;AACpCA,QAAAA,IAAI,CAAC3e,KAAL,GAAa,IAAb;AACA2e,QAAAA,IAAI,CAAC7f,IAAL,GAAY6f,IAAI,CAAC7f,IAAL,IAAa,EAAzB;AACA6f,QAAAA,IAAI,CAACjM,OAAL,CAAa0kB,kBAAb,CAAgC,aAAhC;AACD,OA/H0B;AAiI3B4D,MAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkBrc,IAAlB,EAAwBnJ,SAAxB,EAAmC;AAC3CmJ,QAAAA,IAAI,CAAC7f,IAAL,GAAY,IAAZ;AACA6f,QAAAA,IAAI,CAAC3e,KAAL,GAAavD,GAAG,CAAC6H,IAAJ,CAAStE,KAAT,CAAe2e,IAAI,CAAC3e,KAAL,IAAc,IAAIhE,KAAJ,EAA7B,EAA0C;AACrDC,UAAAA,IAAI,EAAE,kBAD+C;AAErDoK,UAAAA,OAAO,EAAE,kCAAkC,KAAK7F,KAFK;AAGrDgV,UAAAA,SAAS,EAAEA;AAH0C,SAA1C,CAAb;AAKD,OAxI0B;;AA0I3B;AACJ;AACA;AACA;AACA;AACIylB,MAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0Bz6B,KAA1B,EAAiC;AACjD,YAAI,CAAC,KAAKwN,OAAL,CAAa2E,GAAb,CAAiBwW,OAAjB,CAAyB3oB,KAAzB,CAAL,EAAsC;AACpC,gBAAM,IAAI/D,GAAG,CAAC6H,IAAJ,CAAStE,KAAb,CAAmB,IAAIhE,KAAJ,EAAnB,EAAgC;AACpCC,YAAAA,IAAI,EAAE,oBAD8B;AAEpCoK,YAAAA,OAAO,EAAE,WAAW7F,KAAX,GAAmB;AAFQ,WAAhC,CAAN;AAID;;AAED,aAAKgK,MAAL,GAAc/N,GAAG,CAAC6H,IAAJ,CAASsF,IAAT,CAAc,KAAKoE,OAAL,CAAa2E,GAAb,CAAiBwW,OAAjB,CAAyB3oB,KAAzB,CAAd,CAAd;AACD;AAxJ0B,KAAD,CAA5B;AA2JC,GA9MoE,EA8MnE;AAAC,cAAS,EAAV;AAAa,gBAAW;AAAxB,GA9MmE,CAnhUqY;AAiuU3a,MAAG,CAAC,UAAS3E,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACnE,QAAIM,GAAG,GAAGZ,OAAO,CAAC,QAAD,CAAjB;;AACA,QAAIwJ,OAAO,GAAG5I,GAAG,CAAC6H,IAAJ,CAASe,OAAvB;;AACA,QAAIywB,QAAQ,GAAGj6B,OAAO,CAAC,UAAD,CAAtB;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACEY,IAAAA,GAAG,CAACs6B,QAAJ,GAAe1xB,OAAO,CAAC;AAErB;AACJ;AACA;AACIC,MAAAA,WAAW,EAAE,SAASyxB,QAAT,CAAkBrkB,OAAlB,EAA2B;AACtC,aAAKA,OAAL,GAAeA,OAAf;AACA,aAAK5T,IAAL,GAAY,IAAZ;AACA,aAAKkB,KAAL,GAAa,IAAb;AACA,aAAK8d,UAAL,GAAkB,CAAlB;AACA,aAAKkE,aAAL,GAAqB,CAArB;AACA,aAAKjM,YAAL,GAAoB,IAAItZ,GAAG,CAAC+oB,YAAR,EAApB;;AACA,YAAI9S,OAAJ,EAAa;AACX,eAAKpK,UAAL,GAAkBoK,OAAO,CAAC1E,OAAR,CAAgB6tB,UAAhB,EAAlB;AACA,eAAKtzB,YAAL,GAAoBmK,OAAO,CAAC1E,OAAR,CAAgBxD,MAAhB,CAAuBjC,YAA3C;AACD;AACF,OAhBoB;;AAkBrB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACImvB,MAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkB5xB,QAAlB,EAA4B;AACpC,YAAI0E,MAAJ;AACA,YAAIwD,OAAO,GAAG,KAAK0E,OAAL,CAAa1E,OAA3B;AACA,YAAIE,SAAS,GAAG,KAAKwE,OAAL,CAAaxE,SAA7B;;AACA,YAAI;AACF1D,UAAAA,MAAM,GAAGwD,OAAO,CAAC6pB,gBAAR,CAAyB3pB,SAAzB,EAAoC,IAApC,CAAT;AACD,SAFD,CAEE,OAAO5S,CAAP,EAAU;AAAE,eAAK0E,KAAL,GAAa1E,CAAb;AAAiB;;AAE/B,YAAI,CAAC,KAAKm8B,WAAL,EAAL,EAAyB;AACvB,cAAI3xB,QAAJ,EAAcA,QAAQ,CAAC,KAAK9F,KAAN,EAAa,IAAb,CAAR,CAAd,KACK,IAAI,KAAKA,KAAT,EAAgB,MAAM,KAAKA,KAAX;AACrB,iBAAO,IAAP;AACD;;AAED,YAAI0N,MAAM,GAAGjR,GAAG,CAAC6H,IAAJ,CAASsF,IAAT,CAAc,KAAK8I,OAAL,CAAahF,MAA3B,CAAb;;AACA,YAAI,CAAC,KAAKouB,cAAV,EAA0B;AACxB,iBAAOh2B,QAAQ,GAAGA,QAAQ,CAAC,IAAD,EAAO,IAAP,CAAX,GAA0B,IAAzC;AACD,SAFD,MAEO;AACL,cAAIi2B,WAAW,GAAGvxB,MAAM,CAACwxB,UAAzB;AACA,cAAI,OAAOD,WAAP,KAAuB,QAA3B,EAAqCA,WAAW,GAAG,CAACA,WAAD,CAAd;;AACrC,eAAK,IAAIrgC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqgC,WAAW,CAAC1/B,MAAhC,EAAwCX,CAAC,EAAzC,EAA6C;AAC3CgS,YAAAA,MAAM,CAACquB,WAAW,CAACrgC,CAAD,CAAZ,CAAN,GAAyB,KAAKogC,cAAL,CAAoBpgC,CAApB,CAAzB;AACD;;AACD,iBAAOsS,OAAO,CAACqG,WAAR,CAAoB,KAAK3B,OAAL,CAAaxE,SAAjC,EAA4CR,MAA5C,EAAoD5H,QAApD,CAAP;AACD;AACF,OA1DoB;;AA4DrB;AACJ;AACA;AACA;AACA;AACI2xB,MAAAA,WAAW,EAAE,SAASA,WAAT,GAAuB;AAClC,aAAKwE,mBAAL;AACA,YAAI,KAAKH,cAAT,EAAyB,OAAO,IAAP;AACzB,YAAI,KAAKA,cAAL,KAAwBt2B,SAA5B,EAAuC,OAAOA,SAAP,CAAvC,KACK,OAAO,KAAP;AACN,OAtEoB;;AAwErB;AACJ;AACA;AACIy2B,MAAAA,mBAAmB,EAAE,SAASA,mBAAT,GAA+B;AAClD,YAAIl/B,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqC,IAArC,EAA2C,gBAA3C,CAAJ,EAAkE,OAAO,KAAK0/B,cAAZ;AAClE,aAAKA,cAAL,GAAsBt2B,SAAtB;AAEA,YAAIgF,MAAM,GAAG,KAAKkI,OAAL,CAAa1E,OAAb,CAAqB6pB,gBAArB,CAAsC,KAAKnlB,OAAL,CAAaxE,SAAnD,CAAb;AACA,YAAI,CAAC1D,MAAL,EAAa,OAAO,KAAKsxB,cAAZ;AAEb,aAAKA,cAAL,GAAsB,IAAtB;;AACA,YAAItxB,MAAM,CAAC0xB,WAAX,EAAwB;AACtB,cAAI,CAACpG,QAAQ,CAAC5Q,MAAT,CAAgB,KAAKpmB,IAArB,EAA2B0L,MAAM,CAAC0xB,WAAlC,CAAL,EAAqD;AACnD,mBAAO,KAAKJ,cAAZ;AACD;AACF;;AAED,YAAIK,KAAK,GAAG3xB,MAAM,CAAC4xB,WAAnB;AACA,YAAI,OAAOD,KAAP,KAAiB,QAArB,EAA+BA,KAAK,GAAG,CAACA,KAAD,CAAR;AAC/B1/B,QAAAA,GAAG,CAAC6H,IAAJ,CAASyI,SAAT,CAAmB3Q,IAAnB,CAAwB,IAAxB,EAA8B+/B,KAA9B,EAAqC,UAAUE,IAAV,EAAgB;AACnD,cAAI3iB,MAAM,GAAGoc,QAAQ,CAAC5Q,MAAT,CAAgB,KAAKpmB,IAArB,EAA2Bu9B,IAA3B,CAAb;;AACA,cAAI3iB,MAAJ,EAAY;AACV,iBAAKoiB,cAAL,GAAsB,KAAKA,cAAL,IAAuB,EAA7C;AACA,iBAAKA,cAAL,CAAoB1xB,IAApB,CAAyBsP,MAAzB;AACD;AACF,SAND;AAQA,eAAO,KAAKoiB,cAAZ;AACD;AApGoB,KAAD,CAAtB;AAwGC,GA3MiC,EA2MhC;AAAC,cAAS,EAAV;AAAa,gBAAW;AAAxB,GA3MgC,CAjuUwa;AA46U3a,MAAG,CAAC,UAASjgC,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACnE,QAAIM,GAAG,GAAGZ,OAAO,CAAC,QAAD,CAAjB;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACEY,IAAAA,GAAG,CAACkP,kBAAJ,GAAyBlP,GAAG,CAAC6H,IAAJ,CAASe,OAAT,CAAiB;AAExCC,MAAAA,WAAW,EAAE,SAASqG,kBAAT,GAA8B;AACzC,aAAK2wB,OAAL,GAAe,EAAf;AACD,OAJuC;;AAMxC;AACJ;AACA;AACId,MAAAA,SAAS,EAAE,SAASA,SAAT,CAAmBlC,SAAnB,EAA8B;AACvC,eAAO,KAAKgD,OAAL,CAAahD,SAAb,IAA0B,KAAKgD,OAAL,CAAahD,SAAb,EAAwB5nB,KAAxB,CAA8B,CAA9B,CAA1B,GAA6D,EAApE;AACD,OAXuC;AAaxCwN,MAAAA,EAAE,EAAE,SAASA,EAAT,CAAYoa,SAAZ,EAAuBiD,QAAvB,EAAiCC,MAAjC,EAAyC;AAC3C,YAAI,KAAKF,OAAL,CAAahD,SAAb,CAAJ,EAA6B;AAC3BkD,UAAAA,MAAM,GACJ,KAAKF,OAAL,CAAahD,SAAb,EAAwB3xB,OAAxB,CAAgC40B,QAAhC,CADI,GAEJ,KAAKD,OAAL,CAAahD,SAAb,EAAwBlvB,IAAxB,CAA6BmyB,QAA7B,CAFF;AAGD,SAJD,MAIO;AACL,eAAKD,OAAL,CAAahD,SAAb,IAA0B,CAACiD,QAAD,CAA1B;AACD;;AACD,eAAO,IAAP;AACD,OAtBuC;AAwBxCE,MAAAA,OAAO,EAAE,SAASA,OAAT,CAAiBnD,SAAjB,EAA4BiD,QAA5B,EAAsCC,MAAtC,EAA8C;AACrDD,QAAAA,QAAQ,CAACG,QAAT,GAAoB,IAApB;AACA,eAAO,KAAKxd,EAAL,CAAQoa,SAAR,EAAmBiD,QAAnB,EAA6BC,MAA7B,CAAP;AACD,OA3BuC;AA6BxC/nB,MAAAA,cAAc,EAAE,SAASA,cAAT,CAAwB6kB,SAAxB,EAAmCiD,QAAnC,EAA6C;AAC3D,YAAIf,SAAS,GAAG,KAAKc,OAAL,CAAahD,SAAb,CAAhB;;AACA,YAAIkC,SAAJ,EAAe;AACb,cAAIn/B,MAAM,GAAGm/B,SAAS,CAACn/B,MAAvB;AACA,cAAIwE,QAAQ,GAAG,CAAC,CAAhB;;AACA,eAAK,IAAInF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGW,MAApB,EAA4B,EAAEX,CAA9B,EAAiC;AAC/B,gBAAI8/B,SAAS,CAAC9/B,CAAD,CAAT,KAAiB6gC,QAArB,EAA+B;AAC7B17B,cAAAA,QAAQ,GAAGnF,CAAX;AACD;AACF;;AACD,cAAImF,QAAQ,GAAG,CAAC,CAAhB,EAAmB;AACjB26B,YAAAA,SAAS,CAACmB,MAAV,CAAiB97B,QAAjB,EAA2B,CAA3B;AACD;AACF;;AACD,eAAO,IAAP;AACD,OA5CuC;AA8CxCu2B,MAAAA,kBAAkB,EAAE,SAASA,kBAAT,CAA4BkC,SAA5B,EAAuC;AACzD,YAAIA,SAAJ,EAAe;AACb,iBAAO,KAAKgD,OAAL,CAAahD,SAAb,CAAP;AACD,SAFD,MAEO;AACL,eAAKgD,OAAL,GAAe,EAAf;AACD;;AACD,eAAO,IAAP;AACD,OArDuC;;AAuDxC;AACJ;AACA;AACIjd,MAAAA,IAAI,EAAE,SAASA,IAAT,CAAcia,SAAd,EAAyBsD,SAAzB,EAAoCC,YAApC,EAAkD;AACtD,YAAI,CAACA,YAAL,EAAmBA,YAAY,GAAG,YAAW,CAAG,CAA7B;AACnB,YAAIrB,SAAS,GAAG,KAAKA,SAAL,CAAelC,SAAf,CAAhB;AACA,YAAIwD,KAAK,GAAGtB,SAAS,CAACn/B,MAAtB;AACA,aAAK0gC,aAAL,CAAmBvB,SAAnB,EAA8BoB,SAA9B,EAAyCC,YAAzC;AACA,eAAOC,KAAK,GAAG,CAAf;AACD,OAhEuC;;AAkExC;AACJ;AACA;AACIC,MAAAA,aAAa,EAAE,SAASA,aAAT,CAAuBvB,SAAvB,EAAkCjC,IAAlC,EAAwCsD,YAAxC,EAAsDG,SAAtD,EAAiE;AAC9E,YAAIj3B,IAAI,GAAG,IAAX;AACA,YAAI/F,KAAK,GAAGg9B,SAAS,IAAI,IAAzB;;AAEA,iBAASC,gBAAT,CAA0Bh3B,GAA1B,EAA+B;AAC7B,cAAIA,GAAJ,EAAS;AACPjG,YAAAA,KAAK,GAAGvD,GAAG,CAAC6H,IAAJ,CAAStE,KAAT,CAAeA,KAAK,IAAI,IAAIhE,KAAJ,EAAxB,EAAqCiK,GAArC,CAAR;;AACA,gBAAIF,IAAI,CAAC0wB,oBAAT,EAA+B;AAC7B,qBAAOoG,YAAY,CAACzgC,IAAb,CAAkB2J,IAAlB,EAAwB/F,KAAxB,CAAP;AACD;AACF;;AACD+F,UAAAA,IAAI,CAACg3B,aAAL,CAAmBvB,SAAnB,EAA8BjC,IAA9B,EAAoCsD,YAApC,EAAkD78B,KAAlD;AACD;;AAED,eAAOw7B,SAAS,CAACn/B,MAAV,GAAmB,CAA1B,EAA6B;AAC3B,cAAIkgC,QAAQ,GAAGf,SAAS,CAAC14B,KAAV,EAAf;;AACA,cAAIy5B,QAAQ,CAACG,QAAb,EAAuB;AAAE;AACvBH,YAAAA,QAAQ,CAAC//B,KAAT,CAAeuJ,IAAf,EAAqBwzB,IAAI,CAAClY,MAAL,CAAY,CAAC4b,gBAAD,CAAZ,CAArB;AACA,mBAFqB,CAEb;AACT,WAHD,MAGO;AAAE;AACP,gBAAI;AACFV,cAAAA,QAAQ,CAAC//B,KAAT,CAAeuJ,IAAf,EAAqBwzB,IAArB;AACD,aAFD,CAEE,OAAOtzB,GAAP,EAAY;AACZjG,cAAAA,KAAK,GAAGvD,GAAG,CAAC6H,IAAJ,CAAStE,KAAT,CAAeA,KAAK,IAAI,IAAIhE,KAAJ,EAAxB,EAAqCiK,GAArC,CAAR;AACD;;AACD,gBAAIjG,KAAK,IAAI+F,IAAI,CAAC0wB,oBAAlB,EAAwC;AACtCoG,cAAAA,YAAY,CAACzgC,IAAb,CAAkB2J,IAAlB,EAAwB/F,KAAxB;AACA;AACD;AACF;AACF;;AACD68B,QAAAA,YAAY,CAACzgC,IAAb,CAAkB2J,IAAlB,EAAwB/F,KAAxB;AACD,OArGuC;;AAuGxC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI47B,MAAAA,YAAY,EAAE,SAASA,YAAT,CAAsBJ,SAAtB,EAAiC;AAC7C,YAAIz1B,IAAI,GAAG,IAAX,CAD6C,CAG7C;;AACA,YAAIy1B,SAAS,CAACc,OAAd,EAAuBd,SAAS,GAAGA,SAAS,CAACc,OAAtB;AAEvB7/B,QAAAA,GAAG,CAAC6H,IAAJ,CAASoB,IAAT,CAAc81B,SAAd,EAAyB,UAASlQ,KAAT,EAAgB4R,SAAhB,EAA2B;AAClD,cAAI,OAAOA,SAAP,KAAqB,UAAzB,EAAqCA,SAAS,GAAG,CAACA,SAAD,CAAZ;AACrCzgC,UAAAA,GAAG,CAAC6H,IAAJ,CAASyI,SAAT,CAAmBmwB,SAAnB,EAA8B,UAASp3B,QAAT,EAAmB;AAC/CC,YAAAA,IAAI,CAACmZ,EAAL,CAAQoM,KAAR,EAAexlB,QAAf;AACD,WAFD;AAGD,SALD;AAOA,eAAOC,IAAP;AACD,OA7IuC;;AA+IxC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI0R,MAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0BnR,IAA1B,EAAgCgzB,SAAhC,EAA2CxzB,QAA3C,EAAqD02B,MAArD,EAA6D;AAC7E,aAAKl2B,IAAL,IAAaR,QAAb;AACA,aAAKo0B,WAAL,CAAiBZ,SAAjB,EAA4BxzB,QAA5B,EAAsC02B,MAAtC;AACA,eAAO,IAAP;AACD,OAnKuC;;AAqKxC;AACJ;AACA;AACIW,MAAAA,qBAAqB,EAAE,SAASA,qBAAT,CAA+B72B,IAA/B,EAAqCgzB,SAArC,EAAgDxzB,QAAhD,EAA0D02B,MAA1D,EAAkE;AACvF12B,QAAAA,QAAQ,CAAC42B,QAAT,GAAoB,IAApB;AACA,eAAO,KAAKjlB,gBAAL,CAAsBnR,IAAtB,EAA4BgzB,SAA5B,EAAuCxzB,QAAvC,EAAiD02B,MAAjD,CAAP;AACD,OA3KuC;;AA6KxC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIzgB,MAAAA,iBAAiB,EAAE,SAASA,iBAAT,CAA2BjW,QAA3B,EAAqC;AACtD,YAAIC,IAAI,GAAG,IAAX;AACAD,QAAAA,QAAQ,CACN,YAAW;AACTC,UAAAA,IAAI,CAAC0R,gBAAL,CAAsBjb,KAAtB,CAA4BuJ,IAA5B,EAAkCxJ,SAAlC;AACD,SAHK,EAIN,YAAW;AACTwJ,UAAAA,IAAI,CAACo3B,qBAAL,CAA2B3gC,KAA3B,CAAiCuJ,IAAjC,EAAuCxJ,SAAvC;AACD,SANK,CAAR;AAQA,eAAO,IAAP;AACD;AA/MuC,KAAjB,CAAzB;AAkNA;AACF;AACA;AACA;;AACEE,IAAAA,GAAG,CAACkP,kBAAJ,CAAuBhN,SAAvB,CAAiCu7B,WAAjC,GAA+Cz9B,GAAG,CAACkP,kBAAJ,CAAuBhN,SAAvB,CAAiCugB,EAAhF;AAEA;AACF;AACA;;AACE5iB,IAAAA,MAAM,CAACH,OAAP,GAAiBM,GAAG,CAACkP,kBAArB;AAEC,GA7OiC,EA6OhC;AAAC,cAAS;AAAV,GA7OgC,CA56Uwa;AAypVzb,MAAG,CAAC,UAAS9P,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACrD,KAAC,UAAUkI,OAAV,EAAkB;AACnB,UAAI5H,GAAG,GAAGZ,OAAO,CAAC,QAAD,CAAjB;;AACA,UAAIuP,GAAG,GAAGvP,OAAO,CAAC,aAAD,CAAjB;;AACA,UAAIq5B,YAAY,GAAGr5B,OAAO,CAAC,iBAAD,CAA1B;;AAEA,UAAIwJ,OAAO,GAAG5I,GAAG,CAAC6H,IAAJ,CAASe,OAAvB;AACA,UAAI+3B,WAAW,GAAG,CAAlB;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACE3gC,MAAAA,GAAG,CAACC,OAAJ,GAAc2I,OAAO,CAAC;AACpB;AACJ;AACA;AACA;AACA;AACIC,QAAAA,WAAW,EAAE,SAAS5I,OAAT,CAAiB8N,MAAjB,EAAyB;AACpC,cAAI,CAAC,KAAK6yB,gBAAV,EAA4B;AAC1B,kBAAM5gC,GAAG,CAAC6H,IAAJ,CAAStE,KAAT,CAAe,IAAIhE,KAAJ,EAAf,EACJ,kDADI,CAAN;AAED;;AACD,cAAIshC,YAAY,GAAG,KAAKD,gBAAL,CAAsB7yB,MAAM,IAAI,EAAhC,CAAnB;;AACA,cAAI8yB,YAAJ,EAAkB;AAChB,gBAAIC,cAAc,GAAG9gC,GAAG,CAAC6H,IAAJ,CAASsF,IAAT,CAAcY,MAAd,CAArB;AACA,gBAAIhN,GAAG,GAAG,IAAI8/B,YAAJ,CAAiB9yB,MAAjB,CAAV;AACAzN,YAAAA,MAAM,CAACC,cAAP,CAAsBQ,GAAtB,EAA2B,iBAA3B,EAA8C;AAC5CP,cAAAA,GAAG,EAAE,YAAW;AAAE,uBAAOsgC,cAAP;AAAwB,eADE;AAE5ClgC,cAAAA,UAAU,EAAE,KAFgC;AAG5CC,cAAAA,YAAY,EAAE;AAH8B,aAA9C;AAKAE,YAAAA,GAAG,CAAC+gB,SAAJ,GAAgB,EAAE6e,WAAlB;AACA,mBAAO5/B,GAAP;AACD;;AACD,eAAKggC,UAAL,CAAgBhzB,MAAhB;AACD,SAxBmB;;AA0BpB;AACJ;AACA;AACIgzB,QAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBhzB,MAApB,EAA4B;AACtC,cAAI4L,SAAS,GAAG3Z,GAAG,CAAC+N,MAAJ,CAAW,KAAK6L,iBAAhB,CAAhB;AACA,eAAK7L,MAAL,GAAc,IAAI/N,GAAG,CAAC2I,MAAR,CAAe3I,GAAG,CAAC+N,MAAnB,CAAd;AACA,cAAI4L,SAAJ,EAAe,KAAK5L,MAAL,CAAY1K,MAAZ,CAAmBsW,SAAnB,EAA8B,IAA9B;AACf,cAAI5L,MAAJ,EAAY,KAAKA,MAAL,CAAY1K,MAAZ,CAAmB0K,MAAnB,EAA2B,IAA3B;AAEZ,eAAKizB,eAAL;AACA,cAAI,CAAC,KAAKjzB,MAAL,CAAYrC,QAAjB,EAA2B+sB,YAAY,CAAC,IAAD,CAAZ;AAE3B,eAAK1qB,MAAL,CAAYrC,QAAZ,GAAuB,KAAKu1B,oBAAL,CAA0B,KAAKlzB,MAAL,CAAYrC,QAAtC,CAAvB;AACA,eAAKw1B,WAAL,CAAiB,KAAKnzB,MAAL,CAAYrC,QAA7B,EAVsC,CAWtC;;AACA1L,UAAAA,GAAG,CAACkP,kBAAJ,CAAuBvP,IAAvB,CAA4B,IAA5B;AACAK,UAAAA,GAAG,CAACC,OAAJ,CAAYkhC,6BAAZ,CAA0C,IAA1C;;AACA,cAAI,CAAC,KAAKpzB,MAAL,CAAYjB,oBAAZ,IAAoC9M,GAAG,CAACC,OAAJ,CAAYmhC,qBAAjD,KAA2E,KAAKC,SAApF,EAA+F;AAC7F,gBAAIA,SAAS,GAAG,KAAKA,SAArB;AACA,iBAAKrmB,gBAAL,CAAsB,kBAAtB,EAA0C,SAA1C,EAAqD,SAASsmB,gBAAT,CAA0BzS,KAA1B,EAAiC;AACpFjnB,cAAAA,OAAO,CAACg0B,QAAR,CAAiB,YAAW;AAACyF,gBAAAA,SAAS,CAACE,YAAV,CAAuB1S,KAAvB;AAA+B,eAA5D;AACD,aAFD;AAGA,iBAAK7T,gBAAL,CAAsB,qBAAtB,EAA6C,gBAA7C,EAA+D,SAASwmB,mBAAT,CAA6B3S,KAA7B,EAAoC;AACjGjnB,cAAAA,OAAO,CAACg0B,QAAR,CAAiB,YAAW;AAACyF,gBAAAA,SAAS,CAACE,YAAV,CAAuB1S,KAAvB;AAA+B,eAA5D;AACD,aAFD;AAGD;AACF,SApDmB;;AAsDpB;AACJ;AACA;AACImS,QAAAA,eAAe,EAAE,SAASA,eAAT,GAA2B,CAC3C,CA1DmB;;AA4DpB;AACJ;AACA;AACIJ,QAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0Ba,aAA1B,EAAyC;AACzD,cAAI1zB,MAAM,GAAG0zB,aAAb;;AACA,cAAI,CAACzhC,GAAG,CAAC6H,IAAJ,CAAS65B,OAAT,CAAiB,KAAKxrB,GAAtB,CAAL,EAAiC;AAC/B,mBAAO,IAAP;AACD,WAFD,MAEO,IAAInI,MAAM,CAAC4zB,SAAX,EAAsB;AAC3B,mBAAO3hC,GAAG,CAACC,OAAJ,CAAY2hC,gBAAZ,CAA6B,KAAK/4B,WAAlC,EAA+CkF,MAAM,CAAC4zB,SAAtD,CAAP;AACD,WAFM,MAEA,IAAI,CAAC,KAAK94B,WAAL,CAAiB1I,QAAtB,EAAgC;AACrC,mBAAO,IAAP;AACD,WAFM,MAEA;AACL4N,YAAAA,MAAM,GAAG,IAAI/N,GAAG,CAAC2I,MAAR,CAAe3I,GAAG,CAAC+N,MAAnB,CAAT;AACAA,YAAAA,MAAM,CAAC1K,MAAP,CAAco+B,aAAd,EAA6B,IAA7B;AACA,gBAAIzgC,OAAO,GAAG+M,MAAM,CAACvC,WAAP,CAAmB,KAAK3C,WAAL,CAAiB+Q,iBAApC,CAAd;AACA5Y,YAAAA,OAAO,GAAGA,OAAO,IAAI+M,MAAM,CAACtC,UAA5B;AACA,mBAAO,KAAKo2B,qBAAL,CAA2B7gC,OAA3B,CAAP;AACD;AACF,SA9EmB;;AAgFpB;AACJ;AACA;AACI6gC,QAAAA,qBAAqB,EAAE,SAASA,qBAAT,CAA+B7gC,OAA/B,EAAwC;AAC7DA,UAAAA,OAAO,GAAG,KAAK8gC,uBAAL,CAA6B9gC,OAA7B,CAAV;;AACA,cAAI,KAAK6H,WAAL,CAAiB1I,QAAjB,CAA0Ba,OAA1B,MAAuC,IAA3C,EAAiD;AAC/ChB,YAAAA,GAAG,CAACC,OAAJ,CAAY2hC,gBAAZ,CAA6B,KAAK/4B,WAAlC,EAA+C7H,OAA/C;AACD;;AAED,iBAAO,KAAK6H,WAAL,CAAiB1I,QAAjB,CAA0Ba,OAA1B,CAAP;AACD,SA1FmB;;AA4FpB;AACJ;AACA;AACI8gC,QAAAA,uBAAuB,EAAE,SAASA,uBAAT,CAAiC9gC,OAAjC,EAA0C;AACjE,cAAI,CAAC,KAAK6H,WAAL,CAAiB1I,QAAlB,IAA8B,KAAK0I,WAAL,CAAiB1I,QAAjB,CAA0BP,MAA1B,KAAqC,CAAvE,EAA0E;AACxE,kBAAM,IAAIL,KAAJ,CAAU,4BACA,KAAKsJ,WAAL,CAAiB+Q,iBAD3B,CAAN;AAED;;AAED,cAAI,CAAC5Y,OAAL,EAAc;AACZA,YAAAA,OAAO,GAAG,QAAV;AACD,WAFD,MAEO,IAAIhB,GAAG,CAAC6H,IAAJ,CAASksB,MAAT,CAAgB/yB,OAAhB,EAAyBgP,IAAzB,CAAJ,EAAoC;AACzChP,YAAAA,OAAO,GAAGhB,GAAG,CAAC6H,IAAJ,CAAS+H,IAAT,CAAcmyB,OAAd,CAAsB/gC,OAAtB,EAA+BqT,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAAV;AACD;;AAED,cAAI/T,MAAM,CAACW,cAAP,CAAsB,KAAK4H,WAAL,CAAiB1I,QAAvC,EAAiDa,OAAjD,CAAJ,EAA+D;AAC7D,mBAAOA,OAAP;AACD;;AAED,cAAIkI,IAAI,GAAG5I,MAAM,CAAC4I,IAAP,CAAY,KAAKL,WAAL,CAAiB1I,QAA7B,EAAuC42B,IAAvC,EAAX;AACA,cAAIiL,eAAe,GAAG,IAAtB;;AACA,eAAK,IAAI/iC,CAAC,GAAGiK,IAAI,CAACtJ,MAAL,GAAc,CAA3B,EAA8BX,CAAC,IAAI,CAAnC,EAAsCA,CAAC,EAAvC,EAA2C;AACzC;AACA;AACA,gBAAIiK,IAAI,CAACjK,CAAD,CAAJ,CAAQiK,IAAI,CAACjK,CAAD,CAAJ,CAAQW,MAAR,GAAiB,CAAzB,MAAgC,GAApC,EAAyC;AACvCoiC,cAAAA,eAAe,GAAG94B,IAAI,CAACjK,CAAD,CAAtB;AACD;;AACD,gBAAIiK,IAAI,CAACjK,CAAD,CAAJ,CAAQqf,MAAR,CAAe,CAAf,EAAkB,EAAlB,KAAyBtd,OAA7B,EAAsC;AACpC,qBAAOghC,eAAP;AACD;AACF;;AAED,gBAAM,IAAIziC,KAAJ,CAAU,oBAAoB,KAAKsJ,WAAL,CAAiB+Q,iBAArC,GACA,sCADA,GACyC5Y,OADzC,GACmD,IAD7D,CAAN;AAED,SA9HmB;;AAgIpB;AACJ;AACA;AACIkV,QAAAA,GAAG,EAAE,EAnIe;;AAqIpB;AACJ;AACA;AACI+rB,QAAAA,iBAAiB,EAAE,CAxIC;;AA0IpB;AACJ;AACA;AACIC,QAAAA,iBAAiB,EAAE,SAASA,iBAAT,CAA2B74B,QAA3B,EAAqC;AACtD,cAAI,CAACA,QAAL,EAAe;AACb,iBAAK84B,oBAAL,GAA4B,IAA5B;AACD,WAFD,MAEO,IAAI,OAAO94B,QAAP,KAAoB,UAAxB,EAAoC;AACzC,iBAAK84B,oBAAL,GAA4B94B,QAA5B;AACD,WAFM,MAEA;AACL,kBAAM,IAAI9J,KAAJ,CAAU,6BAA6B,OAAO8J,QAApC,GAA+C,kCAAzD,CAAN;AACD;AACF,SArJmB;;AAuJpB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIuO,QAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBnG,SAArB,EAAgCR,MAAhC,EAAwC5H,QAAxC,EAAkD;AAC7D,cAAI,OAAO4H,MAAP,KAAkB,UAAtB,EAAkC;AAChC5H,YAAAA,QAAQ,GAAG4H,MAAX;AACAA,YAAAA,MAAM,GAAG,IAAT;AACD;;AAEDA,UAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;;AACA,cAAI,KAAKlD,MAAL,CAAYkD,MAAhB,EAAwB;AAAE;AACxB,gBAAIgP,KAAK,GAAG,KAAK/J,GAAL,CAASC,UAAT,CAAoB1E,SAApB,CAAZ;;AACA,gBAAIwO,KAAJ,EAAW;AACThP,cAAAA,MAAM,GAAGjR,GAAG,CAAC6H,IAAJ,CAASsF,IAAT,CAAc8D,MAAd,CAAT;AACAjR,cAAAA,GAAG,CAAC6H,IAAJ,CAASoB,IAAT,CAAc,KAAK8E,MAAL,CAAYkD,MAA1B,EAAkC,UAASvP,GAAT,EAAcyH,KAAd,EAAqB;AACrD,oBAAI8W,KAAK,CAACtc,KAAN,CAAYiT,OAAZ,CAAoBlV,GAApB,CAAJ,EAA8B;AAC5B,sBAAIuP,MAAM,CAACvP,GAAD,CAAN,KAAgBqH,SAAhB,IAA6BkI,MAAM,CAACvP,GAAD,CAAN,KAAgB,IAAjD,EAAuD;AACrDuP,oBAAAA,MAAM,CAACvP,GAAD,CAAN,GAAcyH,KAAd;AACD;AACF;AACF,eAND;AAOD;AACF;;AAED,cAAI8M,OAAO,GAAG,IAAIjW,GAAG,CAACyN,OAAR,CAAgB,IAAhB,EAAsBgE,SAAtB,EAAiCR,MAAjC,CAAd;AACA,eAAKmxB,sBAAL,CAA4BnsB,OAA5B;AACA,eAAKosB,uBAAL,CAA6BpsB,OAA7B;AACA,cAAI5M,QAAJ,EAAc4M,OAAO,CAACsC,IAAR,CAAalP,QAAb;AACd,iBAAO4M,OAAP;AACD,SA9LmB;;AAgMpB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIqsB,QAAAA,0BAA0B,EAAE,SAASA,0BAAT,CAAoC7wB,SAApC,EAA+CR,MAA/C,EAAuD5H,QAAvD,EAAiE;AAC3F,cAAI,OAAO4H,MAAP,KAAkB,UAAtB,EAAkC;AAChC5H,YAAAA,QAAQ,GAAG4H,MAAX;AACAA,YAAAA,MAAM,GAAG,EAAT;AACD;;AAED,cAAIgF,OAAO,GAAG,KAAK2B,WAAL,CAAiBnG,SAAjB,EAA4BR,MAA5B,EAAoCqsB,iBAApC,EAAd;AACA,iBAAOj0B,QAAQ,GAAG4M,OAAO,CAACsC,IAAR,CAAalP,QAAb,CAAH,GAA4B4M,OAA3C;AACD,SAtNmB;;AAwNpB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIssB,QAAAA,OAAO,EAAE,SAASA,OAAT,CAAiBx+B,KAAjB,EAAwBkN,MAAxB,EAAgC5H,QAAhC,EAA0C;AACjD,cAAIsjB,MAAM,GAAG,IAAI3sB,GAAG,CAAC+O,cAAR,CAAuB,IAAvB,EAA6BhL,KAA7B,CAAb;AACA,iBAAO4oB,MAAM,CAACqS,IAAP,CAAY/tB,MAAZ,EAAoB5H,QAApB,CAAP;AACD,SA7OmB;;AA+OpB;AACJ;AACA;AACI+4B,QAAAA,sBAAsB,EAAE,SAASA,sBAAT,CAAgCnsB,OAAhC,EAAyC;AAC/D,cAAIwQ,IAAI,GAAG,CAACzmB,GAAG,CAACiP,MAAL,EAAajP,GAAG,CAACiY,cAAJ,CAAmBC,IAAhC,EAAsC,KAAKsqB,gBAAL,EAAtC,EACCxiC,GAAG,CAACiY,cAAJ,CAAmB6N,QADpB,CAAX;;AAEA,eAAK,IAAI7mB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwnB,IAAI,CAAC7mB,MAAzB,EAAiCX,CAAC,EAAlC,EAAsC;AACpC,gBAAIwnB,IAAI,CAACxnB,CAAD,CAAR,EAAagX,OAAO,CAACkpB,YAAR,CAAqB1Y,IAAI,CAACxnB,CAAD,CAAzB;AACd,WAL8D,CAO/D;;;AACA,cAAI,CAAC,KAAK8O,MAAL,CAAYhC,eAAjB,EAAkC;AAChCkK,YAAAA,OAAO,CAAC+B,cAAR,CAAuB,UAAvB,EACEhY,GAAG,CAACiY,cAAJ,CAAmBC,IAAnB,CAAwBC,mBAD1B;AAED;;AAED,cAAI,KAAKpK,MAAL,CAAYxC,MAAhB,EAAwB;AAAE;AACxB0K,YAAAA,OAAO,CAACkpB,YAAR,CAAqBn/B,GAAG,CAACiY,cAAJ,CAAmBkO,MAAxC;AACD;;AAED,eAAKsc,qBAAL,CAA2BxsB,OAA3B,EAjB+D,CAkB/D;;AACA,cAAI,OAAO,KAAKpN,WAAL,CAAiB3G,SAAjB,CAA2BigC,oBAAlC,KAA2D,UAA/D,EAA2E;AACzE,iBAAKt5B,WAAL,CAAiB3G,SAAjB,CAA2BigC,oBAA3B,CAAgDlsB,OAAhD;AACD,WArB8D,CAsB/D;;;AACA,cAAI3V,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqC,IAArC,EAA2C,sBAA3C,KAAsE,OAAO,KAAKwiC,oBAAZ,KAAqC,UAA/G,EAA2H;AACzH,iBAAKA,oBAAL,CAA0BlsB,OAA1B;AACD;AACF,SA5QmB;;AA8QpB;AACJ;AACA;AACA;AACA;AACIysB,QAAAA,YAAY,EAAE,SAASA,YAAT,CAAsBzsB,OAAtB,EAA+B;AAC3C,cAAIC,GAAG,GAAGD,OAAO,CAAC1E,OAAR,CAAgB2E,GAAhB,CAAoBC,UAApB,CAA+BF,OAAO,CAACxE,SAAvC,CAAV;AACA,cAAIkxB,eAAe,GAAG;AACpBC,YAAAA,IAAI,EAAE,SADc;AAEpBj0B,YAAAA,GAAG,EAAEuH,GAAG,GAAGA,GAAG,CAACrM,IAAP,GAAcoM,OAAO,CAACxE,SAFV;AAGpBgkB,YAAAA,OAAO,EAAE,CAHW;AAIpBx1B,YAAAA,OAAO,EAAEgW,OAAO,CAAC1E,OAAR,CAAgB2E,GAAhB,CAAoBG,SAApB,IAAiCJ,OAAO,CAAC1E,OAAR,CAAgB2E,GAAhB,CAAoB0L,cAJ1C;AAKpBihB,YAAAA,MAAM,EAAE5sB,OAAO,CAACwB,WAAR,CAAoBnM,MALR;AAMpBw3B,YAAAA,kBAAkB,EAAE,CANA;AAOpBC,YAAAA,SAAS,EAAE9sB,OAAO,CAACwB,WAAR,CAAoB8Q,YAApB;AAPS,WAAtB;AASA,cAAIvP,QAAQ,GAAG/C,OAAO,CAAC+C,QAAvB;;AACA,cAAIA,QAAQ,CAACM,YAAT,CAAsBC,UAA1B,EAAsC;AACpCopB,YAAAA,eAAe,CAACK,mBAAhB,GAAsChqB,QAAQ,CAACM,YAAT,CAAsBC,UAA5D;AACD;;AACD,cAAIP,QAAQ,CAACzV,KAAb,EAAoB;AAClB,gBAAIA,KAAK,GAAGyV,QAAQ,CAACzV,KAArB;AACA,gBAAIgW,UAAU,GAAGP,QAAQ,CAACM,YAAT,CAAsBC,UAAvC;;AACA,gBAAIA,UAAU,GAAG,GAAjB,EAAsB;AACpB,kBAAIhW,KAAK,CAAC/D,IAAV,EAAgBmjC,eAAe,CAACM,iBAAhB,GAAoC1/B,KAAK,CAAC/D,IAA1C;AAChB,kBAAI+D,KAAK,CAACqG,OAAV,EAAmB+4B,eAAe,CAACO,wBAAhB,GAA2C3/B,KAAK,CAACqG,OAAjD;AACpB,aAHD,MAGO;AACL,kBAAIrG,KAAK,CAAC/D,IAAN,IAAc+D,KAAK,CAACsG,IAAxB,EAA8B84B,eAAe,CAACQ,iBAAhB,GAAoC5/B,KAAK,CAAC/D,IAAN,IAAc+D,KAAK,CAACsG,IAAxD;AAC9B,kBAAItG,KAAK,CAACqG,OAAV,EAAmB+4B,eAAe,CAACS,wBAAhB,GAA2C7/B,KAAK,CAACqG,OAAjD;AACpB;AACF;;AACD,iBAAO+4B,eAAP;AACD,SA9SmB;;AAgTpB;AACJ;AACA;AACA;AACA;AACIU,QAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBptB,OAAzB,EAAkC;AACjD,cAAIC,GAAG,GAAGD,OAAO,CAAC1E,OAAR,CAAgB2E,GAAhB,CAAoBC,UAApB,CAA+BF,OAAO,CAACxE,SAAvC,CAAV;AACA,cAAIkxB,eAAe,GAAG;AACpBC,YAAAA,IAAI,EAAE,gBADc;AAEpBj0B,YAAAA,GAAG,EAAEuH,GAAG,GAAGA,GAAG,CAACrM,IAAP,GAAcoM,OAAO,CAACxE,SAFV;AAGpBgkB,YAAAA,OAAO,EAAE,CAHW;AAIpBx1B,YAAAA,OAAO,EAAEgW,OAAO,CAAC1E,OAAR,CAAgB2E,GAAhB,CAAoBG,SAApB,IAAiCJ,OAAO,CAAC1E,OAAR,CAAgB2E,GAAhB,CAAoB0L,cAJ1C;AAKpB0hB,YAAAA,IAAI,EAAErtB,OAAO,CAACwB,WAAR,CAAoB/L,QAApB,CAA6BgY,QALf;AAMpBqf,YAAAA,SAAS,EAAE9sB,OAAO,CAACwB,WAAR,CAAoB8Q,YAApB;AANS,WAAtB;AAQA,cAAIvP,QAAQ,GAAG/C,OAAO,CAAC+C,QAAvB;;AACA,cAAIA,QAAQ,CAACM,YAAT,CAAsBC,UAA1B,EAAsC;AACpCopB,YAAAA,eAAe,CAACY,cAAhB,GAAiCvqB,QAAQ,CAACM,YAAT,CAAsBC,UAAvD;AACD;;AACD,cACE,CAACtD,OAAO,CAACsnB,gBAAT,IACAtnB,OAAO,CAAC1E,OAAR,CAAgBxD,MAAhB,CAAuBtE,WADvB,IAEAwM,OAAO,CAAC1E,OAAR,CAAgBxD,MAAhB,CAAuBtE,WAAvB,CAAmCO,WAHrC,EAIE;AACA24B,YAAAA,eAAe,CAACa,SAAhB,GAA4BvtB,OAAO,CAAC1E,OAAR,CAAgBxD,MAAhB,CAAuBtE,WAAvB,CAAmCO,WAA/D;AACD;;AACD,cAAI,CAACgP,QAAQ,CAACM,YAAT,CAAsBF,OAA3B,EAAoC,OAAOupB,eAAP;;AACpC,cAAI1sB,OAAO,CAACwB,WAAR,CAAoB2B,OAApB,CAA4B,sBAA5B,CAAJ,EAAyD;AACvDupB,YAAAA,eAAe,CAACnvB,YAAhB,GAA+ByC,OAAO,CAACwB,WAAR,CAAoB2B,OAApB,CAA4B,sBAA5B,CAA/B;AACD;;AACD,cAAIJ,QAAQ,CAACM,YAAT,CAAsBF,OAAtB,CAA8B,kBAA9B,CAAJ,EAAuD;AACrDupB,YAAAA,eAAe,CAACc,cAAhB,GAAiCzqB,QAAQ,CAACM,YAAT,CAAsBF,OAAtB,CAA8B,kBAA9B,CAAjC;AACD;;AACD,cAAIJ,QAAQ,CAACM,YAAT,CAAsBF,OAAtB,CAA8B,kBAA9B,CAAJ,EAAuD;AACrDupB,YAAAA,eAAe,CAACe,aAAhB,GAAgC1qB,QAAQ,CAACM,YAAT,CAAsBF,OAAtB,CAA8B,kBAA9B,CAAhC;AACD;;AACD,cAAIJ,QAAQ,CAACM,YAAT,CAAsBF,OAAtB,CAA8B,YAA9B,CAAJ,EAAiD;AAC/CupB,YAAAA,eAAe,CAACgB,OAAhB,GAA0B3qB,QAAQ,CAACM,YAAT,CAAsBF,OAAtB,CAA8B,YAA9B,CAA1B;AACD;;AACD,iBAAOupB,eAAP;AACD,SAxVmB;;AA0VpB;AACJ;AACA;AACA;AACIiB,QAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0B3tB,OAA1B,EAAmC;AACnD,cAAI0sB,eAAe,GAAG,KAAKU,eAAL,CAAqBptB,OAArB,CAAtB;AACA,cAAI+C,QAAQ,GAAG/C,OAAO,CAAC+C,QAAvB;AACA,cAAIzV,KAAK,GAAGyV,QAAQ,CAACzV,KAArB;;AACA,cAAIyV,QAAQ,CAACM,YAAT,CAAsBC,UAAtB,GAAmC,GAAvC,EAA6C;AAC3C,gBAAIhW,KAAK,CAAC/D,IAAV,EAAgBmjC,eAAe,CAACkB,YAAhB,GAA+BtgC,KAAK,CAAC/D,IAArC;AAChB,gBAAI+D,KAAK,CAACqG,OAAV,EAAmB+4B,eAAe,CAACmB,mBAAhB,GAAsCvgC,KAAK,CAACqG,OAA5C;AACpB,WAHD,MAGO;AACL,gBAAIrG,KAAK,CAAC/D,IAAN,IAAc+D,KAAK,CAACsG,IAAxB,EAA8B84B,eAAe,CAACoB,YAAhB,GAA+BxgC,KAAK,CAAC/D,IAAN,IAAc+D,KAAK,CAACsG,IAAnD;AAC9B,gBAAItG,KAAK,CAACqG,OAAV,EAAmB+4B,eAAe,CAACqB,mBAAhB,GAAsCzgC,KAAK,CAACqG,OAA5C;AACpB;;AACD,iBAAO+4B,eAAP;AACD,SA1WmB;;AA4WpB;AACJ;AACA;AACA;AACA;AACIN,QAAAA,uBAAuB,EAAE,SAASA,uBAAT,CAAiCpsB,OAAjC,EAA0C;AACjE,cAAIguB,gBAAJ,CADiE,CAC3C;;AACtB,cAAIC,oBAAJ,CAFiE,CAEvC;;AAC1B,cAAIC,cAAJ,CAHiE,CAG7C;;AACpB,cAAIC,iBAAJ,CAJiE,CAI1C;;AACvB,cAAIC,YAAY,GAAG,CAAnB,CALiE,CAK3C;;AACtB,cAAI/4B,MAAJ,CANiE,CAMrD;;AACZ,cAAIg5B,aAAJ,CAPiE,CAO9C;;AACnB,cAAIh7B,IAAI,GAAG,IAAX;AACA,cAAIgY,SAAS,GAAG,IAAhB;AAEArL,UAAAA,OAAO,CAACwM,EAAR,CAAW,UAAX,EAAuB,YAAY;AACjC2hB,YAAAA,iBAAiB,GAAGpkC,GAAG,CAAC6H,IAAJ,CAASK,SAAT,CAAmBqwB,GAAnB,EAApB;AACA+L,YAAAA,aAAa,GAAGt0B,IAAI,CAACuoB,GAAL,EAAhB;AACD,WAHD,EAGGjX,SAHH;AAIArL,UAAAA,OAAO,CAACwM,EAAR,CAAW,MAAX,EAAmB,YAAY;AAC7ByhB,YAAAA,oBAAoB,GAAGlkC,GAAG,CAAC6H,IAAJ,CAASK,SAAT,CAAmBqwB,GAAnB,EAAvB;AACA0L,YAAAA,gBAAgB,GAAGj0B,IAAI,CAACuoB,GAAL,EAAnB;AACAjtB,YAAAA,MAAM,GAAG2K,OAAO,CAACwB,WAAR,CAAoBnM,MAA7B;AACA+4B,YAAAA,YAAY;AACb,WALD,EAKG/iB,SALH;AAMArL,UAAAA,OAAO,CAACwM,EAAR,CAAW,kBAAX,EAA+B,YAAW;AACxC0hB,YAAAA,cAAc,GAAGx/B,IAAI,CAACsX,KAAL,CAAWjc,GAAG,CAAC6H,IAAJ,CAASK,SAAT,CAAmBqwB,GAAnB,KAA2B2L,oBAAtC,CAAjB;AACD,WAFD;AAGAjuB,UAAAA,OAAO,CAAC+E,gBAAR,CAAyB,kBAAzB,EAA6C,SAA7C,EAAwD,SAASupB,gBAAT,GAA4B;AAClF,gBAAIlB,eAAe,GAAG/5B,IAAI,CAAC+5B,eAAL,CAAqBptB,OAArB,CAAtB;AACAotB,YAAAA,eAAe,CAACmB,SAAhB,GAA4BP,gBAA5B;AACAZ,YAAAA,eAAe,CAACoB,cAAhB,GAAiCN,cAAc,IAAI,CAAlB,GAAsBA,cAAtB,GAAuC,CAAxE;AACAd,YAAAA,eAAe,CAACR,MAAhB,GAAyBv3B,MAAzB;AACAhC,YAAAA,IAAI,CAACsZ,IAAL,CAAU,gBAAV,EAA4B,CAACygB,eAAD,CAA5B;AACD,WAND;AAOAptB,UAAAA,OAAO,CAAC+E,gBAAR,CAAyB,wBAAzB,EAAmD,OAAnD,EAA4D,SAAS0pB,sBAAT,GAAkC;AAC5F,gBAAIrB,eAAe,GAAG/5B,IAAI,CAACs6B,gBAAL,CAAsB3tB,OAAtB,CAAtB;AACAotB,YAAAA,eAAe,CAACmB,SAAhB,GAA4BP,gBAA5B,CAF4F,CAG5F;;AACAE,YAAAA,cAAc,GAAGA,cAAc,IAC7Bx/B,IAAI,CAACsX,KAAL,CAAWjc,GAAG,CAAC6H,IAAJ,CAASK,SAAT,CAAmBqwB,GAAnB,KAA2B2L,oBAAtC,CADF;AAEAb,YAAAA,eAAe,CAACoB,cAAhB,GAAiCN,cAAc,IAAI,CAAlB,GAAsBA,cAAtB,GAAuC,CAAxE;AACAd,YAAAA,eAAe,CAACR,MAAhB,GAAyBv3B,MAAzB;AACAhC,YAAAA,IAAI,CAACsZ,IAAL,CAAU,gBAAV,EAA4B,CAACygB,eAAD,CAA5B;AACD,WATD;AAUAptB,UAAAA,OAAO,CAAC+E,gBAAR,CAAyB,UAAzB,EAAqC,UAArC,EAAiD,SAAS2pB,QAAT,GAAoB;AACnE,gBAAIjC,YAAY,GAAGp5B,IAAI,CAACo5B,YAAL,CAAkBzsB,OAAlB,CAAnB;AACAysB,YAAAA,YAAY,CAACkC,YAAb,GAA4BP,YAA5B;AACA,gBAAI3B,YAAY,CAACkC,YAAb,IAA6B,CAAjC,EAAoC;AACpClC,YAAAA,YAAY,CAAC8B,SAAb,GAAyBF,aAAzB;AACA,gBAAIO,OAAO,GAAGlgC,IAAI,CAACsX,KAAL,CAAWjc,GAAG,CAAC6H,IAAJ,CAASK,SAAT,CAAmBqwB,GAAnB,KAA2B6L,iBAAtC,CAAd;AACA1B,YAAAA,YAAY,CAACoC,OAAb,GAAuBD,OAAO,IAAI,CAAX,GAAeA,OAAf,GAAyB,CAAhD;AACA,gBAAI7rB,QAAQ,GAAG/C,OAAO,CAAC+C,QAAvB;;AACA,gBACE,OAAOA,QAAQ,CAACqI,UAAhB,KAA+B,QAA/B,IACA,OAAOrI,QAAQ,CAACnN,UAAhB,KAA+B,QAD/B,IAECmN,QAAQ,CAACqI,UAAT,IAAuBrI,QAAQ,CAACnN,UAHnC,EAIE;AACA62B,cAAAA,YAAY,CAACI,kBAAb,GAAkC,CAAlC;AACD;;AACDx5B,YAAAA,IAAI,CAACsZ,IAAL,CAAU,SAAV,EAAqB,CAAC8f,YAAD,CAArB;AACD,WAhBD;AAiBD,SA3amB;;AA6apB;AACJ;AACA;AACA;AACA;AACA;AACID,QAAAA,qBAAqB,EAAE,SAASA,qBAAT,CAA+BxsB,OAA/B,EAAwC,CAC9D,CApbmB;;AAsbpB;AACJ;AACA;AACA;AACIsK,QAAAA,cAAc,EAAE,SAASA,cAAT,CAAwBtK,OAAxB,EAAiC;AAC/C,cAAIjV,OAAJ,CAD+C,CAE/C;;AACA,cAAIyQ,SAAS,GAAG,IAAhB;AACA,cAAI4N,QAAQ,GAAG,EAAf;;AACA,cAAIpJ,OAAJ,EAAa;AACX,gBAAIE,UAAU,GAAGF,OAAO,CAAC1E,OAAR,CAAgB2E,GAAhB,CAAoBC,UAApB,IAAkC,EAAnD;AACA1E,YAAAA,SAAS,GAAG0E,UAAU,CAACF,OAAO,CAACxE,SAAT,CAAV,IAAiC,IAA7C;AACA4N,YAAAA,QAAQ,GAAG5N,SAAS,GAAGA,SAAS,CAAC4N,QAAb,GAAwB,EAA5C;AACD;;AACD,cAAI,KAAKtR,MAAL,CAAYrB,gBAAhB,EAAkC;AAChC1L,YAAAA,OAAO,GAAG,KAAK+M,MAAL,CAAYrB,gBAAtB;AACD,WAFD,MAEO,IAAI2S,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,kBAAtC,EAA0D;AAC/Dre,YAAAA,OAAO,GAAG,IAAV;AACD,WAFM,MAEA;AACLA,YAAAA,OAAO,GAAG,KAAKkV,GAAL,CAASxJ,gBAAnB;AACD;;AACD,iBAAO1M,GAAG,CAACkO,OAAJ,CAAY62B,aAAZ,CAA0BC,UAA1B,CAAqChkC,OAArC,CAAP;AACD,SA5cmB;;AA8cpB;AACJ;AACA;AACIwhC,QAAAA,gBAAgB,EAAE,SAASA,gBAAT,GAA4B;AAC5C,kBAAQ,KAAKtsB,GAAL,CAAS6R,QAAjB;AACE,iBAAK,KAAL;AAAY,qBAAO/nB,GAAG,CAACiY,cAAJ,CAAmB5J,KAA1B;;AACZ,iBAAK,OAAL;AAAc,qBAAOrO,GAAG,CAACiY,cAAJ,CAAmB5J,KAA1B;;AACd,iBAAK,MAAL;AAAa,qBAAOrO,GAAG,CAACiY,cAAJ,CAAmB7J,IAA1B;;AACb,iBAAK,WAAL;AAAkB,qBAAOpO,GAAG,CAACiY,cAAJ,CAAmB1J,QAA1B;;AAClB,iBAAK,UAAL;AAAiB,qBAAOvO,GAAG,CAACiY,cAAJ,CAAmBzJ,OAA1B;AALnB;;AAOA,cAAI,KAAK0H,GAAL,CAAS6R,QAAb,EAAuB;AACrB,kBAAM,IAAIxoB,KAAJ,CAAU,iCACd,KAAK2W,GAAL,CAAS6R,QADK,GACM,gBADhB,CAAN;AAED;AACF,SA7dmB;;AA+dpB;AACJ;AACA;AACI5F,QAAAA,kBAAkB,EAAE,SAASA,kBAAT,CAA4BD,IAA5B,EAAkC;AACpD,iBAAOA,IAAI,CAAC5I,YAAL,CAAkBC,UAAlB,GAA+B,GAAtC;AACD,SApemB;;AAsepB;AACJ;AACA;AACA;AACA;AACA;AACI6lB,QAAAA,UAAU,EAAE,SAASA,UAAT,GAAsB;AAChC,cAAI,KAAKrxB,MAAL,CAAYlC,UAAZ,KAA2B9C,SAA/B,EAA0C;AACxC,mBAAO,KAAKgF,MAAL,CAAYlC,UAAnB;AACD,WAFD,MAEO;AACL,mBAAO,KAAKo2B,iBAAZ;AACD;AACF,SAlfmB;;AAofpB;AACJ;AACA;AACIxc,QAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBpE,UAArB,EAAiC;AAC5C,iBAAOrhB,GAAG,CAAC6H,IAAJ,CAASo9B,mBAAT,CAA6B5jB,UAA7B,EAAyC,KAAKtT,MAAL,CAAYnB,iBAArD,CAAP;AACD,SAzfmB;;AA2fpB;AACJ;AACA;AACIkY,QAAAA,cAAc,EAAE,SAASA,cAAT,CAAwBvhB,KAAxB,EAA+B;AAC7C,cAAI,KAAK2hC,YAAL,CAAkB3hC,KAAlB,CAAJ,EAA8B,OAAO,IAAP;AAC9B,cAAI,KAAK4hC,eAAL,CAAqB5hC,KAArB,CAAJ,EAAiC,OAAO,IAAP;AACjC,cAAI,KAAK6hC,uBAAL,CAA6B7hC,KAA7B,CAAJ,EAAyC,OAAO,IAAP;AACzC,cAAI,KAAK8hC,cAAL,CAAoB9hC,KAApB,CAAJ,EAAgC,OAAO,IAAP;AAChC,cAAIA,KAAK,CAACgW,UAAN,IAAoB,GAAxB,EAA6B,OAAO,IAAP;AAC7B,cAAIhW,KAAK,CAACgW,UAAN,KAAqB,GAAzB,EAA8B,OAAO,IAAP;AAC9B,iBAAO,KAAP;AACD,SAtgBmB;;AAwgBpB;AACJ;AACA;AACI4rB,QAAAA,eAAe,EAAE,SAASA,eAAT,CAAyB5hC,KAAzB,EAAgC;AAC/C,iBAAOA,KAAK,CAAC/D,IAAN,KAAe,iBAAtB;AACD,SA7gBmB;;AA+gBpB;AACJ;AACA;AACI0lC,QAAAA,YAAY,EAAE,SAASA,YAAT,CAAsB3hC,KAAtB,EAA6B;AACzC,iBAAOA,KAAK,CAAC/D,IAAN,KAAe,cAAtB;AACD,SAphBmB;;AAshBpB;AACJ;AACA;AACI4lC,QAAAA,uBAAuB,EAAE,SAASA,uBAAT,CAAiC7hC,KAAjC,EAAwC;AAC/D;AACA,iBAAQA,KAAK,CAAC/D,IAAN,KAAe,uBAAvB;AACD,SA5hBmB;;AA8hBpB;AACJ;AACA;AACI2lB,QAAAA,cAAc,EAAE,SAASA,cAAT,CAAwB5hB,KAAxB,EAA+B;AAC7C,kBAAQA,KAAK,CAAC/D,IAAd;AACE,iBAAK,sBAAL;AACA,iBAAK,gBAAL;AACA,iBAAK,2BAAL;AACA,iBAAK,uBAAL;AACA,iBAAK,aAAL;AACA,iBAAK,oBAAL;AACE,qBAAO,IAAP;;AACF;AAAS,qBAAO,KAAP;AARX;AAUD,SA5iBmB;;AA8iBpB;AACJ;AACA;AACIgiB,QAAAA,oBAAoB,EAAE,SAASA,oBAAT,GAAgC;AACpD,iBAAO,IAAIxR,IAAJ,CAASA,IAAI,CAACuoB,GAAL,KAAa,KAAKxqB,MAAL,CAAYtB,iBAAlC,CAAP;AACD,SAnjBmB;;AAqjBpB;AACJ;AACA;AACI6X,QAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0BghB,aAA1B,EAAyC;AACzD,cAAIA,aAAJ,EAAmB;AACjB,iBAAKv3B,MAAL,CAAYtB,iBAAZ,GAAgC64B,aAAa,GAAGt1B,IAAI,CAACuoB,GAAL,EAAhD;AACD;AACF,SA5jBmB;;AA8jBpB;AACJ;AACA;AACIlU,QAAAA,aAAa,EAAE,SAASA,aAAT,CAAuBihB,aAAvB,EAAsC;AACnD,cAAIA,aAAJ,EAAmB;AACjB,mBAAO3gC,IAAI,CAACqX,GAAL,CAAS,KAAKwF,oBAAL,GAA4B1R,OAA5B,KAAwCw1B,aAAjD,KAAmE,KAA1E;AACD;AACF,SArkBmB;;AAukBpB;AACJ;AACA;AACID,QAAAA,cAAc,EAAE,SAASA,cAAT,CAAwB9hC,KAAxB,EAA+B;AAC7C;AACA,cAAIA,KAAK,CAACgW,UAAN,KAAqB,GAAzB,EAA8B,OAAO,IAAP;;AAC9B,kBAAQhW,KAAK,CAAC/D,IAAd;AACE,iBAAK,wCAAL;AACA,iBAAK,YAAL;AACA,iBAAK,qBAAL;AACA,iBAAK,sBAAL;AACA,iBAAK,kBAAL;AACA,iBAAK,2BAAL;AACA,iBAAK,0BAAL;AACA,iBAAK,gCAAL;AAAuC;AACrC,qBAAO,IAAP;;AACF;AACE,qBAAO,KAAP;AAXJ;AAaD,SA1lBmB;;AA4lBpB;AACJ;AACA;AACIyhC,QAAAA,oBAAoB,EAAE,SAASA,oBAAT,CAA8Bv1B,QAA9B,EAAwC;AAC5D,cAAI,OAAOA,QAAP,KAAoB,QAAxB,EAAkC,OAAOA,QAAP;AAElC,cAAI7M,CAAC,GAAG6M,QAAR;AACA7M,UAAAA,CAAC,GAAGA,CAAC,CAACutB,OAAF,CAAU,cAAV,EAA0B,KAAKlW,GAAL,CAAS0L,cAAnC,CAAJ;AACA/iB,UAAAA,CAAC,GAAGA,CAAC,CAACutB,OAAF,CAAU,aAAV,EAAyB,KAAKre,MAAL,CAAYzC,MAArC,CAAJ;AACAzM,UAAAA,CAAC,GAAGA,CAAC,CAACutB,OAAF,CAAU,aAAV,EAAyB,KAAKre,MAAL,CAAY/B,UAAZ,GAAyB,OAAzB,GAAmC,MAA5D,CAAJ;AACA,iBAAOnN,CAAP;AACD,SAvmBmB;;AAymBpB;AACJ;AACA;AACIqiC,QAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBx1B,QAArB,EAA+B;AAC1C,eAAKA,QAAL,GAAgB,IAAI1L,GAAG,CAACqlB,QAAR,CAAiB3Z,QAAjB,EAA2B,KAAKqC,MAAhC,CAAhB;AACD,SA9mBmB;;AAgnBpB;AACJ;AACA;AACIqtB,QAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0B3pB,SAA1B,EAAqC8zB,cAArC,EAAqD;AACrE,cAAI9Y,SAAS,GAAG,KAAKvW,GAAL,CAASC,UAAT,CAAoB1E,SAApB,EAA+Bgb,SAA/C;;AACA,cAAI,CAACA,SAAL,EAAgB;AACd,gBAAI8Y,cAAJ,EAAoB;AAClB,kBAAI1mC,CAAC,GAAG,IAAIU,KAAJ,EAAR;AACA,oBAAMS,GAAG,CAAC6H,IAAJ,CAAStE,KAAT,CAAe1E,CAAf,EAAkB,qCAAqC4S,SAAvD,CAAN;AACD;;AACD,mBAAO,IAAP;AACD;;AAED,iBAAOgb,SAAP;AACD;AA9nBmB,OAAD,CAArB;AAioBAzsB,MAAAA,GAAG,CAAC6H,IAAJ,CAASxE,MAAT,CAAgBrD,GAAG,CAACC,OAApB,EAA6B;AAE3B;AACJ;AACA;AACA;AACA;AACIulC,QAAAA,aAAa,EAAE,SAASA,aAAT,CAAuBzkC,GAAvB,EAA4B;AACzCf,UAAAA,GAAG,CAAC6H,IAAJ,CAASoB,IAAT,CAAclI,GAAG,CAACmB,SAAJ,CAAcgU,GAAd,CAAkBC,UAAhC,EAA4C,SAASsvB,QAAT,CAAkBzd,MAAlB,EAA0B;AACpE,gBAAIjnB,GAAG,CAACmB,SAAJ,CAAc8lB,MAAd,CAAJ,EAA2B;AAC3B,gBAAIvW,SAAS,GAAG1Q,GAAG,CAACmB,SAAJ,CAAcgU,GAAd,CAAkBC,UAAlB,CAA6B6R,MAA7B,CAAhB;;AACA,gBAAIvW,SAAS,CAAC4N,QAAV,KAAuB,MAA3B,EAAmC;AACjCte,cAAAA,GAAG,CAACmB,SAAJ,CAAc8lB,MAAd,IAAwB,UAAU/W,MAAV,EAAkB5H,QAAlB,EAA4B;AAClD,uBAAO,KAAKi5B,0BAAL,CAAgCta,MAAhC,EAAwC/W,MAAxC,EAAgD5H,QAAhD,CAAP;AACD,eAFD;AAGD,aAJD,MAIO;AACLtI,cAAAA,GAAG,CAACmB,SAAJ,CAAc8lB,MAAd,IAAwB,UAAU/W,MAAV,EAAkB5H,QAAlB,EAA4B;AAClD,uBAAO,KAAKuO,WAAL,CAAiBoQ,MAAjB,EAAyB/W,MAAzB,EAAiC5H,QAAjC,CAAP;AACD,eAFD;AAGD;AACF,WAZD;AAaD,SArB0B;;AAuB3B;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIhJ,QAAAA,aAAa,EAAE,SAASA,aAAT,CAAuBuZ,iBAAvB,EAA0C8rB,QAA1C,EAAoDC,QAApD,EAA8D;AAC3E3lC,UAAAA,GAAG,CAACC,OAAJ,CAAY2lC,WAAZ,CAAwBhsB,iBAAxB,IAA6C,IAA7C;;AACA,cAAI,CAACoZ,KAAK,CAAC6D,OAAN,CAAc6O,QAAd,CAAL,EAA8B;AAC5BC,YAAAA,QAAQ,GAAGD,QAAX;AACAA,YAAAA,QAAQ,GAAG,EAAX;AACD;;AAED,cAAI3kC,GAAG,GAAG6H,OAAO,CAAC5I,GAAG,CAACC,OAAL,EAAc0lC,QAAQ,IAAI,EAA1B,CAAjB;;AAEA,cAAI,OAAO/rB,iBAAP,KAA6B,QAAjC,EAA2C;AACzC5Z,YAAAA,GAAG,CAACC,OAAJ,CAAY4lC,WAAZ,CAAwB9kC,GAAxB,EAA6B2kC,QAA7B;AAEA,gBAAII,UAAU,GAAG/kC,GAAG,CAAC6Y,iBAAJ,IAAyBA,iBAA1C;AACA7Y,YAAAA,GAAG,CAAC6Y,iBAAJ,GAAwBksB,UAAxB;AACD,WALD,MAKO;AAAE;AACP/kC,YAAAA,GAAG,CAACmB,SAAJ,CAAcgU,GAAd,GAAoB0D,iBAApB;AACA5Z,YAAAA,GAAG,CAACC,OAAJ,CAAYulC,aAAZ,CAA0BzkC,GAA1B;AACD;;AACDf,UAAAA,GAAG,CAACkP,kBAAJ,CAAuBvP,IAAvB,CAA4B,KAAKuC,SAAjC,EAlB2E,CAmB3E;;AACA,cAAI,CAAC,KAAKA,SAAL,CAAem/B,SAAhB,IAA6BrhC,GAAG,CAAC6H,IAAJ,CAASiF,oBAA1C,EAAgE;AAC9D,gBAAIi5B,SAAS,GAAG/lC,GAAG,CAAC6H,IAAJ,CAASiF,oBAAT,CAA8Bi5B,SAA9C;AACA,gBAAIC,cAAc,GAAGhmC,GAAG,CAAC6H,IAAJ,CAASiF,oBAAT,CAA8Bk5B,cAAnD;AACA,gBAAIC,eAAe,GAAGD,cAAc,EAApC;AACA,iBAAK9jC,SAAL,CAAem/B,SAAf,GAA2B,IAAI0E,SAAJ,CAAcE,eAAd,CAA3B;;AACA,gBAAIA,eAAe,CAAC1R,OAApB,EAA6B;AAC3B;AACAv0B,cAAAA,GAAG,CAACC,OAAJ,CAAYmhC,qBAAZ,GAAoC,IAApC;AACD;AACF;;AACDphC,UAAAA,GAAG,CAACkP,kBAAJ,CAAuBvP,IAAvB,CAA4BoB,GAAG,CAACmB,SAAhC;AACAlC,UAAAA,GAAG,CAACC,OAAJ,CAAYkhC,6BAAZ,CAA0CpgC,GAAG,CAACmB,SAA9C;AACA,iBAAOnB,GAAP;AACD,SAnE0B;;AAqE3B;AACJ;AACA;AACI8kC,QAAAA,WAAW,EAAE,SAASA,WAAT,CAAqB9kC,GAArB,EAA0B2kC,QAA1B,EAAoC;AAC/C,cAAI,CAAC1S,KAAK,CAAC6D,OAAN,CAAc6O,QAAd,CAAL,EAA8BA,QAAQ,GAAG,CAACA,QAAD,CAAX;AAE9B3kC,UAAAA,GAAG,CAACZ,QAAJ,GAAeY,GAAG,CAACZ,QAAJ,IAAgB,EAA/B;;AACA,eAAK,IAAIlB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGymC,QAAQ,CAAC9lC,MAA7B,EAAqCX,CAAC,EAAtC,EAA0C;AACxC,gBAAI8B,GAAG,CAACZ,QAAJ,CAAaulC,QAAQ,CAACzmC,CAAD,CAArB,MAA8B8J,SAAlC,EAA6C;AAC3ChI,cAAAA,GAAG,CAACZ,QAAJ,CAAaulC,QAAQ,CAACzmC,CAAD,CAArB,IAA4B,IAA5B;AACD;AACF;;AAED8B,UAAAA,GAAG,CAACyK,WAAJ,GAAkBlL,MAAM,CAAC4I,IAAP,CAAYnI,GAAG,CAACZ,QAAhB,EAA0B42B,IAA1B,EAAlB;AACD,SAnF0B;;AAqF3B;AACJ;AACA;AACI6K,QAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0BsE,UAA1B,EAAsCllC,OAAtC,EAA+C2gC,SAA/C,EAA0D;AAC1E,cAAI5gC,GAAG,GAAG6H,OAAO,CAACs9B,UAAD,EAAa;AAC5BtsB,YAAAA,iBAAiB,EAAEssB,UAAU,CAACtsB;AADF,WAAb,CAAjB;;AAIA,mBAASusB,MAAT,CAAgBjwB,GAAhB,EAAqB;AACnB,gBAAIA,GAAG,CAACkwB,KAAR,EAAe;AACbrlC,cAAAA,GAAG,CAACmB,SAAJ,CAAcgU,GAAd,GAAoBA,GAApB;AACD,aAFD,MAEO;AACLnV,cAAAA,GAAG,CAACmB,SAAJ,CAAcgU,GAAd,GAAoB,IAAIvH,GAAJ,CAAQuH,GAAR,CAApB;AACD;AACF;;AAED,cAAI,OAAOlV,OAAP,KAAmB,QAAvB,EAAiC;AAC/B,gBAAI2gC,SAAJ,EAAe;AACbwE,cAAAA,MAAM,CAACxE,SAAD,CAAN;AACD,aAFD,MAEO;AACL,kBAAI;AACFwE,gBAAAA,MAAM,CAACnmC,GAAG,CAACE,SAAJ,CAAcgmC,UAAU,CAACtsB,iBAAzB,EAA4C5Y,OAA5C,CAAD,CAAN;AACD,eAFD,CAEE,OAAOwI,GAAP,EAAY;AACZ,sBAAMxJ,GAAG,CAAC6H,IAAJ,CAAStE,KAAT,CAAeiG,GAAf,EAAoB;AACxBI,kBAAAA,OAAO,EAAE,sCACPs8B,UAAU,CAACtsB,iBADJ,GACwB,GADxB,GAC8B5Y;AAFf,iBAApB,CAAN;AAID;AACF;;AACD,gBAAI,CAACV,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqCumC,UAAU,CAAC/lC,QAAhD,EAA0Da,OAA1D,CAAL,EAAyE;AACvEklC,cAAAA,UAAU,CAAC16B,WAAX,GAAyB06B,UAAU,CAAC16B,WAAX,CAAuBoZ,MAAvB,CAA8B5jB,OAA9B,EAAuC+1B,IAAvC,EAAzB;AACD;;AACDmP,YAAAA,UAAU,CAAC/lC,QAAX,CAAoBa,OAApB,IAA+BD,GAA/B;AACD,WAjBD,MAiBO;AACLolC,YAAAA,MAAM,CAACnlC,OAAD,CAAN;AACD;;AAEDhB,UAAAA,GAAG,CAACC,OAAJ,CAAYulC,aAAZ,CAA0BzkC,GAA1B;AACA,iBAAOA,GAAP;AACD,SA5H0B;;AA8H3B;AACJ;AACA;AACIuJ,QAAAA,UAAU,EAAE,UAASw7B,UAAT,EAAqB;AAC/B,iBAAOxlC,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqCK,GAAG,CAACC,OAAJ,CAAY2lC,WAAjD,EAA8DE,UAA9D,CAAP;AACD,SAnI0B;;AAqI3B;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACI3E,QAAAA,6BAA6B,EAAE,SAASA,6BAAT,CAAuCkF,QAAvC,EAAiD;AAC9EA,UAAAA,QAAQ,CAACrrB,gBAAT,CAA0B,uBAA1B,EAAmD,gBAAnD,EAAqE,SAASsrB,aAAT,CAAuBzX,KAAvB,EAA8B;AACjG,gBAAI0X,SAAS,GAAGjmC,MAAM,CAACkmC,cAAP,CAAsBH,QAAtB,CAAhB;AACA,gBAAIE,SAAS,CAAC1G,OAAd,EAAuB0G,SAAS,CAAC3jB,IAAV,CAAe,gBAAf,EAAiC,CAACiM,KAAD,CAAjC;AACxB,WAHD;AAIAwX,UAAAA,QAAQ,CAACrrB,gBAAT,CAA0B,oBAA1B,EAAgD,SAAhD,EAA2D,SAASyrB,kBAAT,CAA4B5X,KAA5B,EAAmC;AAC5F,gBAAI0X,SAAS,GAAGjmC,MAAM,CAACkmC,cAAP,CAAsBH,QAAtB,CAAhB;AACA,gBAAIE,SAAS,CAAC1G,OAAd,EAAuB0G,SAAS,CAAC3jB,IAAV,CAAe,SAAf,EAA0B,CAACiM,KAAD,CAA1B;AACxB,WAHD;AAID,SAtJ0B;;AAwJ3B;AACJ;AACA;AACI+W,QAAAA,WAAW,EAAE;AA3Jc,OAA7B;AA8JA5lC,MAAAA,GAAG,CAAC6H,IAAJ,CAAS+1B,KAAT,CAAe59B,GAAG,CAACC,OAAnB,EAA4BD,GAAG,CAACkP,kBAAhC;AAEA;AACF;AACA;;AACErP,MAAAA,MAAM,CAACH,OAAP,GAAiBM,GAAG,CAACC,OAArB;AAEC,KAvzBD,EAuzBGN,IAvzBH,CAuzBQ,IAvzBR,EAuzBaP,OAAO,CAAC,UAAD,CAvzBpB;AAwzBC,GAzzBmB,EAyzBlB;AAAC,cAAS,EAAV;AAAa,mBAAc,EAA3B;AAA8B,uBAAkB,EAAhD;AAAmD,gBAAW;AAA9D,GAzzBkB,CAzpVsb;AAk9WrY,MAAG,CAAC,UAASA,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACzG,QAAIM,GAAG,GAAGZ,OAAO,CAAC,SAAD,CAAjB;;AAEAY,IAAAA,GAAG,CAAC6H,IAAJ,CAASxE,MAAT,CAAgBrD,GAAG,CAACI,eAAJ,CAAoB8B,SAApC,EAA+C;AAC7CyR,MAAAA,cAAc,EAAE,SAASA,cAAT,CAAwB1C,MAAxB,EAAgC5H,QAAhC,EAA0C;AACxD,eAAO,KAAKi5B,0BAAL,CAAgC,gBAAhC,EAAkDrxB,MAAlD,EAA0D5H,QAA1D,CAAP;AACD,OAH4C;AAK7CoJ,MAAAA,KAAK,EAAE,SAASA,KAAT,CAAexB,MAAf,EAAuB5H,QAAvB,EAAiC;AACtC,eAAO,KAAKi5B,0BAAL,CAAgC,OAAhC,EAAyCrxB,MAAzC,EAAiD5H,QAAjD,CAAP;AACD,OAP4C;AAS7CqJ,MAAAA,yBAAyB,EAAE,SAASA,yBAAT,CAAmCzB,MAAnC,EAA2C5H,QAA3C,EAAqD;AAC9E,eAAO,KAAKi5B,0BAAL,CAAgC,2BAAhC,EAA6DrxB,MAA7D,EAAqE5H,QAArE,CAAP;AACD;AAX4C,KAA/C;AAcC,GAjBuE,EAiBtE;AAAC,eAAU;AAAX,GAjBsE,CAl9WkY;AAm+Wxb,MAAG,CAAC,UAASjK,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACtD,KAAC,UAAUkI,OAAV,EAAkB;AACnB,UAAI5H,GAAG,GAAGZ,OAAO,CAAC,SAAD,CAAjB;;AACA,UAAIq5B,YAAY,GAAGr5B,OAAO,CAAC,kBAAD,CAA1B;;AACA,UAAIsnC,6BAA6B,GAAG,4BAApC;AACA,UAAIC,gCAAgC,GAAG,wBAAvC;AAEA3mC,MAAAA,GAAG,CAAC6H,IAAJ,CAASxE,MAAT,CAAgBrD,GAAG,CAACc,GAAJ,CAAQoB,SAAxB,EAAmC;AACjC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI2P,QAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBxP,IAAzB,EAA+BoH,WAA/B,EAA4C;AAC3D,cAAI,CAACpH,IAAL,EAAW,OAAO,IAAP;AACX,cAAI,CAACoH,WAAL,EAAkBA,WAAW,GAAG,IAAIzJ,GAAG,CAAC0V,oBAAR,EAAd;AAClBjM,UAAAA,WAAW,CAAC4F,OAAZ,GAAsB,KAAtB;AACA5F,UAAAA,WAAW,CAACO,WAAZ,GAA0B3H,IAAI,CAAC+K,WAAL,CAAiBkG,WAA3C;AACA7J,UAAAA,WAAW,CAACQ,eAAZ,GAA8B5H,IAAI,CAAC+K,WAAL,CAAiBw5B,eAA/C;AACAn9B,UAAAA,WAAW,CAAC+F,YAAZ,GAA2BnN,IAAI,CAAC+K,WAAL,CAAiBoG,YAA5C;AACA/J,UAAAA,WAAW,CAAC6F,UAAZ,GAAyBjN,IAAI,CAAC+K,WAAL,CAAiBqG,UAA1C;AACA,iBAAOhK,WAAP;AACD,SAnCgC;AAqCjCqM,QAAAA,yBAAyB,EAAE,SAASA,yBAAT,CAAmC7E,MAAnC,EAA2C5H,QAA3C,EAAqD;AAC9E,iBAAO,KAAKi5B,0BAAL,CAAgC,2BAAhC,EAA6DrxB,MAA7D,EAAqE5H,QAArE,CAAP;AACD,SAvCgC;AAyCjCoM,QAAAA,kBAAkB,EAAE,SAASA,kBAAT,CAA4BxE,MAA5B,EAAoC5H,QAApC,EAA8C;AAChE,iBAAO,KAAKi5B,0BAAL,CAAgC,oBAAhC,EAAsDrxB,MAAtD,EAA8D5H,QAA9D,CAAP;AACD,SA3CgC;;AA6CjC;AACJ;AACA;AACIw9B,QAAAA,kCAAkC,EAAE,SAASA,kCAAT,CAA4CC,WAA5C,EAAyDC,YAAzD,EAAuE;AACzG,cAAI,OAAOD,WAAP,KAAuB,QAAvB,IAAmC,CAAC,QAAD,EAAW,UAAX,EAAuB7kC,OAAvB,CAA+B6kC,WAAW,CAACtlC,WAAZ,EAA/B,KAA6D,CAApG,EAAuG;AACrG,iBAAKuM,MAAL,CAAYb,oBAAZ,GAAmC45B,WAAW,CAACtlC,WAAZ,EAAnC;AACA;AACD,WAHD,MAGO;AACL,kBAAMxB,GAAG,CAAC6H,IAAJ,CAAStE,KAAT,CAAe,IAAIhE,KAAJ,EAAf,EAA4BwnC,YAA5B,CAAN;AACD;AACF,SAvDgC;;AAyDjC;AACJ;AACA;AACIC,QAAAA,6BAA6B,EAAE,SAASA,6BAAT,GAAyC;AACtE;AACA,cAAIj5B,MAAM,GAAG,KAAKA,MAAlB;;AACA,cAAIA,MAAM,CAACb,oBAAX,EAAiC;AAC/B,iBAAK25B,kCAAL,CAAwC94B,MAAM,CAACb,oBAA/C,EAAqE;AACnE1N,cAAAA,IAAI,EAAE,sBAD6D;AAEnEoK,cAAAA,OAAO,EAAE,mEACT,uBADS,GACiBmE,MAAM,CAACb,oBADxB,GAC+C;AAHW,aAArE;AAKD;;AACD,cAAI,CAAClN,GAAG,CAAC6H,IAAJ,CAASS,MAAT,EAAL,EAAwB,OAV8C,CAWtE;;AACA,cAAIhI,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqCiI,OAAO,CAACoS,GAA7C,EAAkD0sB,6BAAlD,CAAJ,EAAsF;AACpF,gBAAIO,OAAO,GAAGr/B,OAAO,CAACoS,GAAR,CAAY0sB,6BAAZ,CAAd;AACA,iBAAKG,kCAAL,CAAwCI,OAAxC,EAAiD;AAC/CznC,cAAAA,IAAI,EAAE,8BADyC;AAE/CoK,cAAAA,OAAO,EAAE,aAAa88B,6BAAb,GAA6C,2CAA7C,GACT,uBADS,GACiB9+B,OAAO,CAACoS,GAAR,CAAY0sB,6BAAZ,CADjB,GAC8D;AAHxB,aAAjD;AAKD,WAnBqE,CAoBtE;;;AACA,cAAIQ,OAAO,GAAG,EAAd;;AACA,cAAI;AACF,gBAAIC,QAAQ,GAAGnnC,GAAG,CAAC6H,IAAJ,CAASu/B,2BAAT,CAAqCpnC,GAAG,CAAC6H,IAAJ,CAASqS,SAA9C,CAAf;AACAgtB,YAAAA,OAAO,GAAGC,QAAQ,CAACv/B,OAAO,CAACoS,GAAR,CAAYQ,WAAZ,IAA2Bxa,GAAG,CAAC6H,IAAJ,CAAS4S,cAArC,CAAlB;AACD,WAHD,CAGE,OAAO5b,CAAP,EAAU,CAAE;;AAAA;;AACd,cAAIqoC,OAAO,IAAI5mC,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqCunC,OAArC,EAA8CP,gCAA9C,CAAf,EAAgG;AAC9F,gBAAIU,QAAQ,GAAGH,OAAO,CAACP,gCAAD,CAAtB;AACA,iBAAKE,kCAAL,CAAwCQ,QAAxC,EAAkD;AAChD7nC,cAAAA,IAAI,EAAE,sBAD0C;AAEhDoK,cAAAA,OAAO,EAAE,aAAW+8B,gCAAX,GAA4C,mCAA5C,GACT,uBADS,GACiBO,OAAO,CAACP,gCAAD,CADxB,GAC6D;AAHtB,aAAlD;AAKD;AACF,SA9FgC;;AAgGjC;AACJ;AACA;AACIW,QAAAA,qBAAqB,EAAE,SAASA,qBAAT,GAAiC;AACtD,eAAKN,6BAAL;AACA,cAAIj5B,MAAM,GAAG,KAAKA,MAAlB;;AACA,cAAIA,MAAM,CAACb,oBAAP,KAAgC,UAApC,EAAgD;AAC9CurB,YAAAA,YAAY,CAAC,IAAD,CAAZ;AACA,gBAAI,CAAC,KAAK9Y,gBAAV,EAA4B;AAC5B,iBAAKA,gBAAL,GAAwB,KAAxB,CAH8C,CAI9C;;AACA,gBAAI,CAAC5R,MAAM,CAACzC,MAAZ,EAAoB;AAClB,oBAAMtL,GAAG,CAAC6H,IAAJ,CAAStE,KAAT,CAAe,IAAIhE,KAAJ,EAAf,EACJ;AAACC,gBAAAA,IAAI,EAAE,aAAP;AAAsBoK,gBAAAA,OAAO,EAAE;AAA/B,eADI,CAAN;AAED;;AACD,gBAAI29B,WAAW,GAAGx5B,MAAM,CAACrC,QAAP,CAAgBzJ,OAAhB,CAAwB,gBAAxB,CAAlB;AACA8L,YAAAA,MAAM,CAACrC,QAAP,GAAkBqC,MAAM,CAACrC,QAAP,CAAgBgf,SAAhB,CAA0B,CAA1B,EAA6B6c,WAA7B,IAChB,GADgB,GACVx5B,MAAM,CAACzC,MADG,GACMyC,MAAM,CAACrC,QAAP,CAAgBgf,SAAhB,CAA0B6c,WAA1B,CADxB;AAED;AACF,SAnHgC;AAqHjCvG,QAAAA,eAAe,EAAE,SAASA,eAAT,GAA2B;AAC1C,eAAKsG,qBAAL;AACD;AAvHgC,OAAnC;AA2HC,KAjID,EAiIG3nC,IAjIH,CAiIQ,IAjIR,EAiIaP,OAAO,CAAC,UAAD,CAjIpB;AAkIC,GAnIoB,EAmInB;AAAC,eAAU,EAAX;AAAc,wBAAmB,EAAjC;AAAoC,gBAAW;AAA/C,GAnImB,CAn+Wqb;AAsmXpZ,MAAG,CAAC,UAASA,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1F,QAAIM,GAAG,GAAGZ,OAAO,CAAC,SAAD,CAAjB;;AACA,QAAIwJ,OAAO,GAAG5I,GAAG,CAAC6H,IAAJ,CAASe,OAAvB;AAEA;AACF;AACA;;AACE,QAAI4+B,aAAa,GAAG,mBAApB;AAEA;AACF;AACA;;AACE,aAASC,gBAAT,CAA0BxxB,OAA1B,EAAmC;AACjC,UAAIinB,OAAO,GAAGjnB,OAAO,CAACwB,WAAR,CAAoB2B,OAApB,CAA4BouB,aAA5B,CAAd;AACA,UAAIE,WAAW,GAAGzxB,OAAO,CAAC1E,OAAR,CAAgBgP,cAAhB,CAA+BtK,OAA/B,CAAlB;AAEA,aAAOA,OAAO,CAACwB,WAAR,CAAoB2B,OAApB,CAA4B,YAA5B,CAAP;AACA,aAAOnD,OAAO,CAACwB,WAAR,CAAoB2B,OAApB,CAA4B,kBAA5B,CAAP;;AAEA,UAAIsuB,WAAW,KAAK1nC,GAAG,CAACkO,OAAJ,CAAYsS,EAAhC,EAAoC;AAClC,YAAI0c,OAAO,GAAG,MAAd,EAAsB;AAAE;AACtB,cAAItzB,OAAO,GAAG,qDACA,iCADd;AAEA,gBAAM5J,GAAG,CAAC6H,IAAJ,CAAStE,KAAT,CAAe,IAAIhE,KAAJ,EAAf,EAA4B;AAChCC,YAAAA,IAAI,EAAE,mBAD0B;AACLoK,YAAAA,OAAO,EAAEA,OADJ;AACamP,YAAAA,SAAS,EAAE;AADxB,WAA5B,CAAN;AAGD;;AACD9C,QAAAA,OAAO,CAACwB,WAAR,CAAoB2B,OAApB,CAA4BouB,aAA5B,IAA6CtK,OAA7C;AACD,OATD,MASO,IAAIwK,WAAW,KAAK1nC,GAAG,CAACkO,OAAJ,CAAYR,EAAhC,EAAoC;AACzC,YAAI6qB,GAAG,GAAGtiB,OAAO,CAAC1E,OAAR,GAAkB0E,OAAO,CAAC1E,OAAR,CAAgBiQ,oBAAhB,EAAlB,GAA2DxhB,GAAG,CAAC6H,IAAJ,CAAS+H,IAAT,CAAcC,OAAd,EAArE;AACAoG,QAAAA,OAAO,CAACwB,WAAR,CAAoB2B,OAApB,CAA4BouB,aAA5B,IAA6CnrB,QAAQ,CACnDrc,GAAG,CAAC6H,IAAJ,CAAS+H,IAAT,CAAc+3B,aAAd,CAA4BpP,GAA5B,IAAmC2E,OADgB,EACP,EADO,CAAR,CACK/6B,QADL,EAA7C;AAED,OAJM,MAIA;AACL,cAAMnC,GAAG,CAAC6H,IAAJ,CAAStE,KAAT,CAAe,IAAIhE,KAAJ,EAAf,EAA4B;AAChCqK,UAAAA,OAAO,EAAE,+CADuB;AAEhCpK,UAAAA,IAAI,EAAE,mBAF0B;AAELuZ,UAAAA,SAAS,EAAE;AAFN,SAA5B,CAAN;AAID;AACF;AAED;AACF;AACA;;;AACE,aAAS6uB,eAAT,CAAyB3xB,OAAzB,EAAkC;AAChC,UAAIvK,QAAQ,GAAGuK,OAAO,CAACwB,WAAR,CAAoB/L,QAAnC;AACA,UAAIm8B,SAAS,GAAG7nC,GAAG,CAAC6H,IAAJ,CAASggB,QAAT,CAAkB5R,OAAO,CAACwB,WAAR,CAAoBjN,IAAtC,CAAhB;AACA,UAAIs9B,WAAW,GAAG,EAAlB;;AAEA,UAAID,SAAS,CAACpf,MAAd,EAAsB;AACpBqf,QAAAA,WAAW,GAAG9nC,GAAG,CAAC6H,IAAJ,CAAS8gB,gBAAT,CAA0Bkf,SAAS,CAACpf,MAAV,CAAiBnK,MAAjB,CAAwB,CAAxB,CAA1B,CAAd;AACD;;AAED,UAAIypB,IAAI,GAAG9xB,OAAO,CAACwB,WAAR,CAAoB2B,OAApB,CAA4B,eAA5B,EAA6C/E,KAA7C,CAAmD,GAAnD,CAAX;;AACA,UAAI0zB,IAAI,CAAC,CAAD,CAAJ,KAAY,KAAhB,EAAuB;AACrBA,QAAAA,IAAI,GAAGA,IAAI,CAAC,CAAD,CAAJ,CAAQ1zB,KAAR,CAAc,GAAd,CAAP;AACAyzB,QAAAA,WAAW,CAAC,gBAAD,CAAX,GAAgCC,IAAI,CAAC,CAAD,CAApC;AACAD,QAAAA,WAAW,CAAC,WAAD,CAAX,GAA2BC,IAAI,CAAC,CAAD,CAA/B;AAEA/nC,QAAAA,GAAG,CAAC6H,IAAJ,CAASoB,IAAT,CAAcgN,OAAO,CAACwB,WAAR,CAAoB2B,OAAlC,EAA2C,UAAU1X,GAAV,EAAeyH,KAAf,EAAsB;AAC/D,cAAIzH,GAAG,KAAK8lC,aAAZ,EAA2B9lC,GAAG,GAAG,SAAN;;AAC3B,cAAIA,GAAG,CAACO,OAAJ,CAAY,aAAZ,MAA+B,CAAnC,EAAsC;AACpC;AACA,mBAAO6lC,WAAW,CAACpmC,GAAD,CAAlB;AACAA,YAAAA,GAAG,GAAGA,GAAG,CAACF,WAAJ,EAAN;AACD;;AACDsmC,UAAAA,WAAW,CAACpmC,GAAD,CAAX,GAAmByH,KAAnB;AACD,SARD;AASA,eAAO8M,OAAO,CAACwB,WAAR,CAAoB2B,OAApB,CAA4BouB,aAA5B,CAAP;AACA,eAAOM,WAAW,CAAC,eAAD,CAAlB;AACA,eAAOA,WAAW,CAAC,MAAD,CAAlB;AACD,OAjBD,MAiBO,IAAIC,IAAI,CAAC,CAAD,CAAJ,KAAY,kBAAhB,EAAoC;AAAE;AAC3CA,QAAAA,IAAI,CAAC1hC,KAAL;AACA,YAAI2hC,IAAI,GAAGD,IAAI,CAACpzB,IAAL,CAAU,GAAV,CAAX;AACA,YAAIszB,SAAS,GAAGD,IAAI,CAAC/iB,KAAL,CAAW,iCAAX,EAA8C,CAA9C,CAAhB;AACA6iB,QAAAA,WAAW,CAAC,iBAAD,CAAX,GAAiCG,SAAjC;AACA,eAAOH,WAAW,CAAC,SAAD,CAAlB;AACD,OAjC+B,CAmChC;;;AACAp8B,MAAAA,QAAQ,CAAC8c,QAAT,GAAoBqf,SAAS,CAACrf,QAA9B;AACA9c,MAAAA,QAAQ,CAAC+c,MAAT,GAAkBzoB,GAAG,CAAC6H,IAAJ,CAAS+gB,mBAAT,CAA6Bkf,WAA7B,CAAlB;AACD;AAED;AACF;AACA;;;AACE9nC,IAAAA,GAAG,CAACkO,OAAJ,CAAYivB,OAAZ,GAAsBv0B,OAAO,CAAC;AAC5B;AACJ;AACA;AACIw0B,MAAAA,IAAI,EAAE,SAASA,IAAT,CAAcnnB,OAAd,EAAuB3G,UAAvB,EAAmCjG,QAAnC,EAA6C;AACjD4M,QAAAA,OAAO,CAACwB,WAAR,CAAoB2B,OAApB,CAA4BouB,aAA5B,IAA6Cl4B,UAAU,IAAI,IAA3D;AACA2G,QAAAA,OAAO,CAACwM,EAAR,CAAW,OAAX,EAAoBglB,gBAApB;AACAxxB,QAAAA,OAAO,CAACwM,EAAR,CAAW,MAAX,EAAmBmlB,eAAnB;AACA3xB,QAAAA,OAAO,CAAC+B,cAAR,CAAuB,YAAvB,EACEhY,GAAG,CAACiY,cAAJ,CAAmBC,IAAnB,CAAwByI,kBAD1B;AAEA1K,QAAAA,OAAO,CAAC+B,cAAR,CAAuB,YAAvB,EACEhY,GAAG,CAACiY,cAAJ,CAAmBC,IAAnB,CAAwBmI,cAD1B;AAGApK,QAAAA,OAAO,CAAC2M,IAAR,CAAa,eAAb,EAA8B,CAAC3M,OAAD,CAA9B;;AAEA,YAAI5M,QAAJ,EAAc;AACZ4M,UAAAA,OAAO,CAAC8U,KAAR,CAAc,YAAW;AACvB,gBAAI,KAAK/R,QAAL,CAAczV,KAAlB,EAAyB8F,QAAQ,CAAC,KAAK2P,QAAL,CAAczV,KAAf,CAAR,CAAzB,KACK;AACH8F,cAAAA,QAAQ,CAAC,IAAD,EAAOrJ,GAAG,CAAC6H,IAAJ,CAASqgC,SAAT,CAAmBjyB,OAAO,CAACwB,WAAR,CAAoB/L,QAAvC,CAAP,CAAR;AACD;AACF,WALD;AAMD,SAPD,MAOO;AACLuK,UAAAA,OAAO,CAAC8U,KAAR;AACA,cAAI9U,OAAO,CAAC+C,QAAR,CAAiBzV,KAArB,EAA4B,MAAM0S,OAAO,CAAC+C,QAAR,CAAiBzV,KAAvB;AAC5B,iBAAOvD,GAAG,CAAC6H,IAAJ,CAASqgC,SAAT,CAAmBjyB,OAAO,CAACwB,WAAR,CAAoB/L,QAAvC,CAAP;AACD;AACF;AA3B2B,KAAD,CAA7B;AA8BA;AACF;AACA;;AACE7L,IAAAA,MAAM,CAACH,OAAP,GAAiBM,GAAG,CAACkO,OAAJ,CAAYivB,OAA7B;AAEC,GAzHwD,EAyHvD;AAAC,eAAU;AAAX,GAzHuD,CAtmXiZ;AA+tXxb,MAAG,CAAC,UAAS/9B,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACtD,QAAIM,GAAG,GAAGZ,OAAO,CAAC,SAAD,CAAjB;;AAEA,QAAIwJ,OAAO,GAAG5I,GAAG,CAAC6H,IAAJ,CAASe,OAAvB;AAEA;AACF;AACA;;AACE5I,IAAAA,GAAG,CAACkO,OAAJ,CAAY62B,aAAZ,GAA4Bn8B,OAAO,CAAC;AAClCC,MAAAA,WAAW,EAAE,SAASk8B,aAAT,CAAuB9uB,OAAvB,EAAgC;AAC3C,aAAKA,OAAL,GAAeA,OAAf;AACD,OAHiC;AAKlC4L,MAAAA,kBAAkB,EAAE,SAASA,kBAAT,CAA4B5P,EAA5B,EAAgC;AAClD,aAAKk2B,eAAL,GAAuBl2B,EAAvB;AACD,OAPiC;AASlCm2B,MAAAA,kBAAkB,EAAE,SAASA,kBAAT,GAA8B;AAChD,eAAO,KAAKD,eAAZ;AACD;AAXiC,KAAD,CAAnC;;AAcAnoC,IAAAA,GAAG,CAACkO,OAAJ,CAAY62B,aAAZ,CAA0BC,UAA1B,GAAuC,SAASA,UAAT,CAAoBhkC,OAApB,EAA6B;AAClE,cAAQA,OAAR;AACE,aAAK,IAAL;AAAW,iBAAOhB,GAAG,CAACkO,OAAJ,CAAYm6B,EAAnB;;AACX,aAAK,IAAL;AAAW,iBAAOroC,GAAG,CAACkO,OAAJ,CAAYo6B,EAAnB;;AACX,aAAK,MAAL;AAAa,iBAAOtoC,GAAG,CAACkO,OAAJ,CAAYsS,EAAnB;;AACb,aAAK,IAAL;AAAW,iBAAOxgB,GAAG,CAACkO,OAAJ,CAAYsS,EAAnB;;AACX,aAAK,IAAL;AAAW,iBAAOxgB,GAAG,CAACkO,OAAJ,CAAYR,EAAnB;;AACX,aAAK,SAAL;AAAgB,iBAAO1N,GAAG,CAACkO,OAAJ,CAAYq6B,OAAnB;AANlB;;AAQA,YAAM,IAAIhpC,KAAJ,CAAU,6BAA6ByB,OAAvC,CAAN;AACD,KAVD;;AAYA5B,IAAAA,OAAO,CAAC,MAAD,CAAP;;AACAA,IAAAA,OAAO,CAAC,MAAD,CAAP;;AACAA,IAAAA,OAAO,CAAC,WAAD,CAAP;;AACAA,IAAAA,OAAO,CAAC,MAAD,CAAP;;AACAA,IAAAA,OAAO,CAAC,MAAD,CAAP;;AACAA,IAAAA,OAAO,CAAC,WAAD,CAAP;AAEC,GAzCoB,EAyCnB;AAAC,eAAU,EAAX;AAAc,iBAAY,EAA1B;AAA6B,YAAO,EAApC;AAAuC,YAAO,EAA9C;AAAiD,YAAO,EAAxD;AAA2D,iBAAY,EAAvE;AAA0E,YAAO;AAAjF,GAzCmB,CA/tXqb;AAwwXlX,MAAG,CAAC,UAASA,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC5H,QAAIM,GAAG,GAAGZ,OAAO,CAAC,SAAD,CAAjB;;AACA,QAAIwJ,OAAO,GAAG5I,GAAG,CAAC6H,IAAJ,CAASe,OAAvB;AAEA;AACF;AACA;;AACE5I,IAAAA,GAAG,CAACkO,OAAJ,CAAYR,EAAZ,GAAiB9E,OAAO,CAAC5I,GAAG,CAACkO,OAAJ,CAAY62B,aAAb,EAA4B;AAClD;AACJ;AACA;AACA;AACIyD,MAAAA,YAAY,EAAE;AACZ,eAAO,CADK;AAEZ,sBAAc,CAFF;AAGZ,qBAAa,CAHD;AAIZ,gBAAQ,CAJI;AAKZ,qBAAa,CALD;AAMZ,kBAAU,CANE;AAOZ,qBAAa,CAPD;AAQZ,oBAAY,CARA;AASZ,mBAAW,CATC;AAUZ,mBAAW,CAVC;AAWZ,wBAAgB,CAXJ;AAYZ,sBAAc,CAZF;AAaZ,kBAAU,CAbE;AAcZ,0BAAkB,CAdN;AAeZ,uBAAe,CAfH;AAgBZ,mBAAW,CAhBC;AAiBZ,mBAAW,CAjBC;AAkBZ,mBAAW,CAlBC;AAmBZ,oBAAY,CAnBA;AAoBZ,mBAAW,CApBC;AAqBZ,qBAAa,CArBD;AAsBZ,sBAAc,CAtBF;AAuBZ,oBAAY,CAvBA;AAwBZ,mBAAW;AAxBC,OALoC;AAgClD;AACA;AACAC,MAAAA,eAAe,EAAE;AACf,iCAAyB,CADV;AAEf,qCAA6B,CAFd;AAGf,4BAAoB,CAHL;AAIf,kCAA0B,CAJX;AAKf,wCAAgC,CALjB;AAMf,qCAA6B;AANd,OAlCiC;AA2ClD1mB,MAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0BtY,WAA1B,EAAuCmG,IAAvC,EAA6C;AAC7D,YAAI,CAAC,KAAKqG,OAAL,CAAamD,OAAb,CAAqB,mBAArB,CAAL,EAAgD;AAC9C,eAAKnD,OAAL,CAAamD,OAAb,CAAqB,YAArB,IAAqCpZ,GAAG,CAAC6H,IAAJ,CAAS+H,IAAT,CAAc84B,MAAd,CAAqB94B,IAArB,CAArC;AACD;;AAED,YAAInG,WAAW,CAAC+F,YAAhB,EAA8B;AAC5B;AACA,eAAKyG,OAAL,CAAamD,OAAb,CAAqB,sBAArB,IAA+C3P,WAAW,CAAC+F,YAA3D;AACD;;AAED,YAAIy4B,SAAS,GAAG,KAAK7K,IAAL,CAAU3zB,WAAW,CAACQ,eAAtB,EAAuC,KAAK0+B,YAAL,EAAvC,CAAhB;AACA,YAAIZ,IAAI,GAAG,SAASt+B,WAAW,CAACO,WAArB,GAAmC,GAAnC,GAAyCi+B,SAApD;AAEA,aAAKhyB,OAAL,CAAamD,OAAb,CAAqB,eAArB,IAAwC2uB,IAAxC;AACD,OAzDiD;AA2DlDY,MAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB;AACpC,YAAI/pC,CAAC,GAAG,KAAKqX,OAAb;AAEA,YAAI6gB,KAAK,GAAG,EAAZ;AACAA,QAAAA,KAAK,CAACnpB,IAAN,CAAW/O,CAAC,CAACopB,MAAb;AACA8O,QAAAA,KAAK,CAACnpB,IAAN,CAAW/O,CAAC,CAACwa,OAAF,CAAU,aAAV,KAA4B,EAAvC;AACA0d,QAAAA,KAAK,CAACnpB,IAAN,CAAW/O,CAAC,CAACwa,OAAF,CAAU,cAAV,KAA6B,EAAxC,EANoC,CAQpC;AACA;AACA;;AACA0d,QAAAA,KAAK,CAACnpB,IAAN,CAAW/O,CAAC,CAACwa,OAAF,CAAU,mBAAV,KAAkC,EAA7C;AAEA,YAAIA,OAAO,GAAG,KAAKwvB,uBAAL,EAAd;AACA,YAAIxvB,OAAJ,EAAa0d,KAAK,CAACnpB,IAAN,CAAWyL,OAAX;AACb0d,QAAAA,KAAK,CAACnpB,IAAN,CAAW,KAAKk7B,qBAAL,EAAX;AAEA,eAAO/R,KAAK,CAACniB,IAAN,CAAW,IAAX,CAAP;AAED,OA9EiD;AAgFlDi0B,MAAAA,uBAAuB,EAAE,SAASA,uBAAT,GAAmC;AAE1D,YAAIE,UAAU,GAAG,EAAjB;AAEA9oC,QAAAA,GAAG,CAAC6H,IAAJ,CAASoB,IAAT,CAAc,KAAKgN,OAAL,CAAamD,OAA3B,EAAoC,UAAUvP,IAAV,EAAgB;AAClD,cAAIA,IAAI,CAACob,KAAL,CAAW,UAAX,CAAJ,EACE6jB,UAAU,CAACn7B,IAAX,CAAgB9D,IAAhB;AACH,SAHD;AAKAi/B,QAAAA,UAAU,CAAC/R,IAAX,CAAgB,UAAUz3B,CAAV,EAAayF,CAAb,EAAgB;AAC9B,iBAAOzF,CAAC,CAACkC,WAAF,KAAkBuD,CAAC,CAACvD,WAAF,EAAlB,GAAoC,CAAC,CAArC,GAAyC,CAAhD;AACD,SAFD;AAIA,YAAIs1B,KAAK,GAAG,EAAZ;AACA92B,QAAAA,GAAG,CAAC6H,IAAJ,CAASyI,SAAT,CAAmB3Q,IAAnB,CAAwB,IAAxB,EAA8BmpC,UAA9B,EAA0C,UAAUj/B,IAAV,EAAgB;AACxDitB,UAAAA,KAAK,CAACnpB,IAAN,CAAW9D,IAAI,CAACrI,WAAL,KAAqB,GAArB,GAA2BwV,MAAM,CAAC,KAAKf,OAAL,CAAamD,OAAb,CAAqBvP,IAArB,CAAD,CAA5C;AACD,SAFD;AAIA,eAAOitB,KAAK,CAACniB,IAAN,CAAW,IAAX,CAAP;AAED,OApGiD;AAsGlDk0B,MAAAA,qBAAqB,EAAE,SAASA,qBAAT,GAAiC;AAEtD,YAAIjqC,CAAC,GAAG,KAAKqX,OAAb;AAEA,YAAI6gB,KAAK,GAAGl4B,CAAC,CAAC4L,IAAF,CAAO6J,KAAP,CAAa,GAAb,CAAZ;AACA,YAAI7J,IAAI,GAAGssB,KAAK,CAAC,CAAD,CAAhB;AACA,YAAI7uB,WAAW,GAAG6uB,KAAK,CAAC,CAAD,CAAvB;AAEA,YAAIiS,QAAQ,GAAG,EAAf;AAEA,YAAInqC,CAAC,CAACoqC,mBAAN,EACED,QAAQ,IAAI,MAAMnqC,CAAC,CAACoqC,mBAApB;AAEFD,QAAAA,QAAQ,IAAIv+B,IAAZ;;AAEA,YAAIvC,WAAJ,EAAiB;AAEf;AACA,cAAIghC,SAAS,GAAG,EAAhB;AAEAjpC,UAAAA,GAAG,CAAC6H,IAAJ,CAASyI,SAAT,CAAmB3Q,IAAnB,CAAwB,IAAxB,EAA8BsI,WAAW,CAACoM,KAAZ,CAAkB,GAAlB,CAA9B,EAAsD,UAAUue,KAAV,EAAiB;AACrE,gBAAI/oB,IAAI,GAAG+oB,KAAK,CAACve,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAX;AACA,gBAAIlL,KAAK,GAAGypB,KAAK,CAACve,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAZ;;AACA,gBAAI,KAAKm0B,YAAL,CAAkB3+B,IAAlB,KAA2B,KAAK4+B,eAAL,CAAqB5+B,IAArB,CAA/B,EAA2D;AACzD,kBAAIq/B,WAAW,GAAG;AAAEr/B,gBAAAA,IAAI,EAAEA;AAAR,eAAlB;;AACA,kBAAIV,KAAK,KAAKJ,SAAd,EAAyB;AACvB,oBAAI,KAAKy/B,YAAL,CAAkB3+B,IAAlB,CAAJ,EAA6B;AAC3Bq/B,kBAAAA,WAAW,CAAC//B,KAAZ,GAAoBA,KAApB;AACD,iBAFD,MAEO;AACL+/B,kBAAAA,WAAW,CAAC//B,KAAZ,GAAoBggC,kBAAkB,CAAChgC,KAAD,CAAtC;AACD;AACF;;AACD8/B,cAAAA,SAAS,CAACt7B,IAAV,CAAeu7B,WAAf;AACD;AACF,WAdD;AAgBAD,UAAAA,SAAS,CAAClS,IAAV,CAAe,UAAUz3B,CAAV,EAAayF,CAAb,EAAgB;AAAE,mBAAOzF,CAAC,CAACuK,IAAF,GAAS9E,CAAC,CAAC8E,IAAX,GAAkB,CAAC,CAAnB,GAAuB,CAA9B;AAAkC,WAAnE;;AAEA,cAAIo/B,SAAS,CAACrpC,MAAd,EAAsB;AAEpBqI,YAAAA,WAAW,GAAG,EAAd;AACAjI,YAAAA,GAAG,CAAC6H,IAAJ,CAASyI,SAAT,CAAmB24B,SAAnB,EAA8B,UAAUG,GAAV,EAAe;AAC3C,kBAAIA,GAAG,CAACjgC,KAAJ,KAAcJ,SAAlB,EAA6B;AAC3Bd,gBAAAA,WAAW,CAAC0F,IAAZ,CAAiBy7B,GAAG,CAACv/B,IAArB;AACD,eAFD,MAEO;AACL5B,gBAAAA,WAAW,CAAC0F,IAAZ,CAAiBy7B,GAAG,CAACv/B,IAAJ,GAAW,GAAX,GAAiBu/B,GAAG,CAACjgC,KAAtC;AACD;AACF,aAND;AAQA4/B,YAAAA,QAAQ,IAAI,MAAM9gC,WAAW,CAAC0M,IAAZ,CAAiB,GAAjB,CAAlB;AACD;AAEF;;AAED,eAAOo0B,QAAP;AAED,OA9JiD;AAgKlD3L,MAAAA,IAAI,EAAE,SAASA,IAAT,CAAct6B,MAAd,EAAsBge,MAAtB,EAA8B;AAClC,eAAO9gB,GAAG,CAAC6H,IAAJ,CAASC,MAAT,CAAgBuhC,IAAhB,CAAqBvmC,MAArB,EAA6Bge,MAA7B,EAAqC,QAArC,EAA+C,MAA/C,CAAP;AACD;AAlKiD,KAA5B,CAAxB;AAqKA;AACF;AACA;;AACEjhB,IAAAA,MAAM,CAACH,OAAP,GAAiBM,GAAG,CAACkO,OAAJ,CAAYR,EAA7B;AAEC,GAjL0F,EAiLzF;AAAC,eAAU;AAAX,GAjLyF,CAxwX+W;AAy7Xxb,MAAG,CAAC,UAAStO,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACtD,QAAIM,GAAG,GAAGZ,OAAO,CAAC,SAAD,CAAjB;;AACA,QAAIwJ,OAAO,GAAG5I,GAAG,CAAC6H,IAAJ,CAASe,OAAvB;AAEA;AACF;AACA;;AACE5I,IAAAA,GAAG,CAACkO,OAAJ,CAAYm6B,EAAZ,GAAiBz/B,OAAO,CAAC5I,GAAG,CAACkO,OAAJ,CAAY62B,aAAb,EAA4B;AAClDhjB,MAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0BtY,WAA1B,EAAuCmG,IAAvC,EAA6C;AAE7D,YAAI,CAACA,IAAL,EAAWA,IAAI,GAAG5P,GAAG,CAAC6H,IAAJ,CAAS+H,IAAT,CAAcC,OAAd,EAAP;AAEX,YAAIjR,CAAC,GAAG,KAAKqX,OAAb;AAEArX,QAAAA,CAAC,CAACqS,MAAF,CAASuzB,SAAT,GAAqBxkC,GAAG,CAAC6H,IAAJ,CAAS+H,IAAT,CAAcmyB,OAAd,CAAsBnyB,IAAtB,CAArB;AACAhR,QAAAA,CAAC,CAACqS,MAAF,CAASq4B,gBAAT,GAA4B,GAA5B;AACA1qC,QAAAA,CAAC,CAACqS,MAAF,CAASs4B,eAAT,GAA2B,YAA3B;AACA3qC,QAAAA,CAAC,CAACqS,MAAF,CAASu4B,cAAT,GAA0B//B,WAAW,CAACO,WAAtC;;AAEA,YAAIP,WAAW,CAAC+F,YAAhB,EAA8B;AAC5B5Q,UAAAA,CAAC,CAACqS,MAAF,CAASw4B,aAAT,GAAyBhgC,WAAW,CAAC+F,YAArC;AACD;;AAED,eAAO5Q,CAAC,CAACqS,MAAF,CAASy4B,SAAhB,CAf6D,CAelC;;AAC3B9qC,QAAAA,CAAC,CAACqS,MAAF,CAASy4B,SAAT,GAAqB,KAAKzB,SAAL,CAAex+B,WAAf,CAArB;AAEA7K,QAAAA,CAAC,CAACwc,IAAF,GAASpb,GAAG,CAAC6H,IAAJ,CAAS+gB,mBAAT,CAA6BhqB,CAAC,CAACqS,MAA/B,CAAT;AACArS,QAAAA,CAAC,CAACwa,OAAF,CAAU,gBAAV,IAA8Bxa,CAAC,CAACwc,IAAF,CAAOxb,MAArC;AACD,OArBiD;AAuBlDqoC,MAAAA,SAAS,EAAE,SAASA,SAAT,CAAmBx+B,WAAnB,EAAgC;AACzC,eAAOzJ,GAAG,CAAC6H,IAAJ,CAASC,MAAT,CAAgBuhC,IAAhB,CAAqB5/B,WAAW,CAACQ,eAAjC,EAAkD,KAAK0+B,YAAL,EAAlD,EAAuE,QAAvE,CAAP;AACD,OAzBiD;AA2BlDA,MAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB;AACpC,YAAI7R,KAAK,GAAG,EAAZ;AACAA,QAAAA,KAAK,CAACnpB,IAAN,CAAW,KAAKsI,OAAL,CAAa+R,MAAxB;AACA8O,QAAAA,KAAK,CAACnpB,IAAN,CAAW,KAAKsI,OAAL,CAAavK,QAAb,CAAsBwV,IAAtB,CAA2B1f,WAA3B,EAAX;AACAs1B,QAAAA,KAAK,CAACnpB,IAAN,CAAW,KAAKsI,OAAL,CAAauS,QAAb,EAAX;AACAsO,QAAAA,KAAK,CAACnpB,IAAN,CAAW3N,GAAG,CAAC6H,IAAJ,CAAS+gB,mBAAT,CAA6B,KAAK3S,OAAL,CAAahF,MAA1C,CAAX;AACA,eAAO6lB,KAAK,CAACniB,IAAN,CAAW,IAAX,CAAP;AACD;AAlCiD,KAA5B,CAAxB;AAsCA;AACF;AACA;;AACE9U,IAAAA,MAAM,CAACH,OAAP,GAAiBM,GAAG,CAACkO,OAAJ,CAAYm6B,EAA7B;AAEC,GAlDoB,EAkDnB;AAAC,eAAU;AAAX,GAlDmB,CAz7Xqb;AA2+Xxb,MAAG,CAAC,UAASjpC,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACtD,QAAIM,GAAG,GAAGZ,OAAO,CAAC,SAAD,CAAjB;;AACA,QAAIwJ,OAAO,GAAG5I,GAAG,CAAC6H,IAAJ,CAASe,OAAvB;AAEA;AACF;AACA;;AACE5I,IAAAA,GAAG,CAACkO,OAAJ,CAAYo6B,EAAZ,GAAiB1/B,OAAO,CAAC5I,GAAG,CAACkO,OAAJ,CAAY62B,aAAb,EAA4B;AAClDhjB,MAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0BtY,WAA1B,EAAuCmG,IAAvC,EAA6C;AAE7D,YAAI+5B,QAAQ,GAAG3pC,GAAG,CAAC6H,IAAJ,CAAS+H,IAAT,CAAc84B,MAAd,CAAqB94B,IAArB,CAAf;AAEA,aAAKqG,OAAL,CAAamD,OAAb,CAAqB,YAArB,IAAqCuwB,QAArC;;AAEA,YAAIlgC,WAAW,CAAC+F,YAAhB,EAA8B;AAC5B,eAAKyG,OAAL,CAAamD,OAAb,CAAqB,sBAArB,IAA+C3P,WAAW,CAAC+F,YAA3D;AACD;;AAED,aAAKyG,OAAL,CAAamD,OAAb,CAAqB,sBAArB,IACE,KAAKwwB,aAAL,CAAmBngC,WAAnB,EAAgCkgC,QAAhC,CADF;AAGD,OAdiD;AAgBlDC,MAAAA,aAAa,EAAE,SAASA,aAAT,CAAuBngC,WAAvB,EAAoC;AACjD,eAAO,UACL,iBADK,GACeA,WAAW,CAACO,WAD3B,GACyC,GADzC,GAEL,uBAFK,GAGL,gBAHK,GAGc,KAAK6/B,aAAL,EAHd,GAGqC,GAHrC,GAIL,YAJK,GAIU,KAAK5B,SAAL,CAAex+B,WAAf,CAJjB;AAKD,OAtBiD;AAwBlDogC,MAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACtC,YAAIzwB,OAAO,GAAG,EAAd;AACApZ,QAAAA,GAAG,CAAC6H,IAAJ,CAASyI,SAAT,CAAmB,KAAKw5B,aAAL,EAAnB,EAAyC,SAASrE,QAAT,CAAkBsE,CAAlB,EAAqB;AAC5D3wB,UAAAA,OAAO,CAACzL,IAAR,CAAao8B,CAAC,CAACvoC,WAAF,EAAb;AACD,SAFD;AAGA,eAAO4X,OAAO,CAAC2d,IAAR,GAAepiB,IAAf,CAAoB,GAApB,CAAP;AACD,OA9BiD;AAgClDq1B,MAAAA,gBAAgB,EAAE,SAASA,gBAAT,GAA4B;AAC5C,YAAI5wB,OAAO,GAAG,KAAKnD,OAAL,CAAamD,OAA3B;AACA,YAAI0d,KAAK,GAAG,EAAZ;AACA92B,QAAAA,GAAG,CAAC6H,IAAJ,CAASyI,SAAT,CAAmB,KAAKw5B,aAAL,EAAnB,EAAyC,SAASrE,QAAT,CAAkBsE,CAAlB,EAAqB;AAC5DjT,UAAAA,KAAK,CAACnpB,IAAN,CAAWo8B,CAAC,CAACvoC,WAAF,GAAgByoC,IAAhB,KAAyB,GAAzB,GAA+BjzB,MAAM,CAACoC,OAAO,CAAC2wB,CAAD,CAAR,CAAN,CAAmBE,IAAnB,EAA1C;AACD,SAFD;AAGA,eAAOnT,KAAK,CAACC,IAAN,GAAapiB,IAAb,CAAkB,IAAlB,IAA0B,IAAjC;AACD,OAvCiD;AAyClDm1B,MAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACtC,YAAI1wB,OAAO,GAAG,EAAd;AACApZ,QAAAA,GAAG,CAAC6H,IAAJ,CAASoB,IAAT,CAAc,KAAKgN,OAAL,CAAamD,OAA3B,EAAoC,SAASqsB,QAAT,CAAkB7+B,CAAlB,EAAqB;AACvD,cAAIA,CAAC,KAAK,MAAN,IAAgBA,CAAC,KAAK,kBAAtB,IAA4CA,CAAC,CAACqe,KAAF,CAAQ,SAAR,CAAhD,EAAoE;AAClE7L,YAAAA,OAAO,CAACzL,IAAR,CAAa/G,CAAb;AACD;AACF,SAJD;AAKA,eAAOwS,OAAP;AACD,OAjDiD;AAmDlD6uB,MAAAA,SAAS,EAAE,SAASA,SAAT,CAAmBx+B,WAAnB,EAAgC;AACzC,eAAOzJ,GAAG,CAAC6H,IAAJ,CAASC,MAAT,CAAgBuhC,IAAhB,CAAqB5/B,WAAW,CAACQ,eAAjC,EAAkD,KAAK0+B,YAAL,EAAlD,EAAuE,QAAvE,CAAP;AACD,OArDiD;AAuDlDA,MAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB;AACpC,YAAI7R,KAAK,GAAG,EAAZ;AACAA,QAAAA,KAAK,CAACnpB,IAAN,CAAW,KAAKsI,OAAL,CAAa+R,MAAxB;AACA8O,QAAAA,KAAK,CAACnpB,IAAN,CAAW,GAAX;AACAmpB,QAAAA,KAAK,CAACnpB,IAAN,CAAW,EAAX;AACAmpB,QAAAA,KAAK,CAACnpB,IAAN,CAAW,KAAKq8B,gBAAL,EAAX;AACAlT,QAAAA,KAAK,CAACnpB,IAAN,CAAW,KAAKsI,OAAL,CAAamF,IAAxB;AACA,eAAOpb,GAAG,CAAC6H,IAAJ,CAASC,MAAT,CAAgBoiC,MAAhB,CAAuBpT,KAAK,CAACniB,IAAN,CAAW,IAAX,CAAvB,CAAP;AACD;AA/DiD,KAA5B,CAAxB;AAmEA;AACF;AACA;;AACE9U,IAAAA,MAAM,CAACH,OAAP,GAAiBM,GAAG,CAACkO,OAAJ,CAAYo6B,EAA7B;AAEC,GA/EoB,EA+EnB;AAAC,eAAU;AAAX,GA/EmB,CA3+Xqb;AA0jYxb,MAAG,CAAC,UAASlpC,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACtD,QAAIM,GAAG,GAAGZ,OAAO,CAAC,SAAD,CAAjB;;AACA,QAAIwJ,OAAO,GAAG5I,GAAG,CAAC6H,IAAJ,CAASe,OAAvB;;AAEAxJ,IAAAA,OAAO,CAAC,MAAD,CAAP;AAEA;AACF;AACA;;;AACEY,IAAAA,GAAG,CAACkO,OAAJ,CAAYq6B,OAAZ,GAAsB3/B,OAAO,CAAC5I,GAAG,CAACkO,OAAJ,CAAYo6B,EAAb,EAAiB;AAC5CsB,MAAAA,aAAa,EAAE,SAASA,aAAT,CAAuBngC,WAAvB,EAAoC;AACjD,eAAO,gBACL,iBADK,GACeA,WAAW,CAACO,WAD3B,GACyC,GADzC,GAEL,uBAFK,GAGL,YAHK,GAGU,KAAKi+B,SAAL,CAAex+B,WAAf,CAHjB;AAID,OAN2C;AAQ5Ck/B,MAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB;AACpC,eAAO,KAAK1yB,OAAL,CAAamD,OAAb,CAAqB,YAArB,CAAP;AACD;AAV2C,KAAjB,CAA7B;AAaA;AACF;AACA;;AACEvZ,IAAAA,MAAM,CAACH,OAAP,GAAiBM,GAAG,CAACkO,OAAJ,CAAYq6B,OAA7B;AAEC,GA3BoB,EA2BnB;AAAC,eAAU,EAAX;AAAc,YAAO;AAArB,GA3BmB,CA1jYqb;AAqlY9a,MAAG,CAAC,UAASnpC,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAChE,QAAIM,GAAG,GAAGZ,OAAO,CAAC,SAAD,CAAjB;;AACA,QAAI+qC,aAAa,GAAG/qC,OAAO,CAAC,kBAAD,CAA3B;;AACA,QAAIwJ,OAAO,GAAG5I,GAAG,CAAC6H,IAAJ,CAASe,OAAvB;AAEA;AACF;AACA;;AACE,QAAI4+B,aAAa,GAAG,mBAApB;AAEA;AACF;AACA;;AACExnC,IAAAA,GAAG,CAACkO,OAAJ,CAAYsS,EAAZ,GAAiB5X,OAAO,CAAC5I,GAAG,CAACkO,OAAJ,CAAY62B,aAAb,EAA4B;AAClDl8B,MAAAA,WAAW,EAAE,SAAS2X,EAAT,CAAYvK,OAAZ,EAAqBm0B,WAArB,EAAkCthC,OAAlC,EAA2C;AACtD9I,QAAAA,GAAG,CAACkO,OAAJ,CAAY62B,aAAZ,CAA0BplC,IAA1B,CAA+B,IAA/B,EAAqCsW,OAArC;AACA,aAAKm0B,WAAL,GAAmBA,WAAnB;AACAthC,QAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACA,aAAK6D,cAAL,GAAsB,OAAO7D,OAAO,CAAC6D,cAAf,KAAkC,SAAlC,GAA8C7D,OAAO,CAAC6D,cAAtD,GAAuE,IAA7F;AACA,aAAK8E,SAAL,GAAiB3I,OAAO,CAAC2I,SAAzB;AACA,aAAK/E,gBAAL,GAAwB5D,OAAO,CAAC4D,gBAAhC;AACD,OARiD;AAUlD29B,MAAAA,SAAS,EAAE,kBAVuC;AAYlDtoB,MAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0BtY,WAA1B,EAAuCmG,IAAvC,EAA6C;AAC7D,YAAI+5B,QAAQ,GAAG3pC,GAAG,CAAC6H,IAAJ,CAAS+H,IAAT,CAAcmyB,OAAd,CAAsBnyB,IAAtB,EAA4Bwc,OAA5B,CAAoC,gBAApC,EAAsD,EAAtD,CAAf;;AAEA,YAAI,KAAKxR,WAAL,EAAJ,EAAwB;AACtB,eAAK0vB,kBAAL,CAAwB7gC,WAAxB,EAAqCkgC,QAArC;AACD,SAFD,MAEO;AACL,eAAKY,UAAL,CAAgB9gC,WAAhB,EAA6BkgC,QAA7B;AACD;;AAED,aAAK1zB,OAAL,CAAamD,OAAb,CAAqB,eAArB,IACE,KAAKwwB,aAAL,CAAmBngC,WAAnB,EAAgCkgC,QAAhC,CADF;AAED,OAvBiD;AAyBlDY,MAAAA,UAAU,EAAE,SAASA,UAAT,CAAoB9gC,WAApB,EAAiCkgC,QAAjC,EAA2C;AACrD,aAAK1zB,OAAL,CAAamD,OAAb,CAAqB,YAArB,IAAqCuwB,QAArC;;AACA,YAAIlgC,WAAW,CAAC+F,YAAhB,EAA8B;AAC5B,eAAKyG,OAAL,CAAamD,OAAb,CAAqB,sBAArB,IAA+C3P,WAAW,CAAC+F,YAA3D;AACD;AACF,OA9BiD;AAgClD86B,MAAAA,kBAAkB,EAAE,SAASA,kBAAT,CAA4B7gC,WAA5B,EAAyCkgC,QAAzC,EAAmD;AACrE,YAAIa,UAAU,GAAG,KAAKC,gBAAL,CAAsBd,QAAtB,CAAjB;AACA,YAAIe,EAAE,GAAG;AACP,wBAAcf,QADP;AAEP,6BAAmB,KAAKU,SAFjB;AAGP,8BAAoB5gC,WAAW,CAACO,WAAZ,GAA0B,GAA1B,GAAgCwgC,UAH7C;AAIP,2BAAiB,KAAKv0B,OAAL,CAAamD,OAAb,CAAqBouB,aAArB,CAJV;AAKP,iCAAuB,KAAKqC,aAAL;AALhB,SAAT;;AAQA,YAAIpgC,WAAW,CAAC+F,YAAhB,EAA8B;AAC5Bk7B,UAAAA,EAAE,CAAC,sBAAD,CAAF,GAA6BjhC,WAAW,CAAC+F,YAAzC;AACD;;AAED,YAAI,KAAKyG,OAAL,CAAamD,OAAb,CAAqB,cAArB,CAAJ,EAA0C;AACxCsxB,UAAAA,EAAE,CAAC,cAAD,CAAF,GAAqB,KAAKz0B,OAAL,CAAamD,OAAb,CAAqB,cAArB,CAArB;AACD;;AACD,YAAI,KAAKnD,OAAL,CAAamD,OAAb,CAAqB,aAArB,CAAJ,EAAyC;AACvCsxB,UAAAA,EAAE,CAAC,aAAD,CAAF,GAAoB,KAAKz0B,OAAL,CAAamD,OAAb,CAAqB,aAArB,CAApB;AACD;;AACD,YAAI,KAAKnD,OAAL,CAAamD,OAAb,CAAqB,eAArB,CAAJ,EAA2C;AACzCsxB,UAAAA,EAAE,CAAC,eAAD,CAAF,GAAsB,KAAKz0B,OAAL,CAAamD,OAAb,CAAqB,eAArB,CAAtB;AACD,SAtBoE,CAwBrE;;;AACApZ,QAAAA,GAAG,CAAC6H,IAAJ,CAASoB,IAAT,CAActJ,IAAd,CAAmB,IAAnB,EAAyB,KAAKsW,OAAL,CAAamD,OAAtC,EAA+C,UAAS1X,GAAT,EAAcyH,KAAd,EAAqB;AAClE,cAAIzH,GAAG,KAAK8lC,aAAZ,EAA2B;;AAC3B,cAAI,KAAKmD,gBAAL,CAAsBjpC,GAAtB,CAAJ,EAAgC;AAC9B,gBAAIkpC,QAAQ,GAAGlpC,GAAG,CAACF,WAAJ,EAAf,CAD8B,CAE9B;;AACA,gBAAIopC,QAAQ,CAAC3oC,OAAT,CAAiB,aAAjB,MAAoC,CAAxC,EAA2C;AACzCyoC,cAAAA,EAAE,CAACE,QAAD,CAAF,GAAezhC,KAAf;AACD,aAFD,MAEO,IAAIyhC,QAAQ,CAAC3oC,OAAT,CAAiB,QAAjB,MAA+B,CAAnC,EAAsC;AAC3CyoC,cAAAA,EAAE,CAAChpC,GAAD,CAAF,GAAUyH,KAAV;AACD;AACF;AACF,SAXD;AAaA,YAAI0hC,GAAG,GAAG,KAAK50B,OAAL,CAAazL,IAAb,CAAkBvI,OAAlB,CAA0B,GAA1B,KAAkC,CAAlC,GAAsC,GAAtC,GAA4C,GAAtD;AACA,aAAKgU,OAAL,CAAazL,IAAb,IAAqBqgC,GAAG,GAAG7qC,GAAG,CAAC6H,IAAJ,CAAS+gB,mBAAT,CAA6B8hB,EAA7B,CAA3B;AACD,OAxEiD;AA0ElDd,MAAAA,aAAa,EAAE,SAASA,aAAT,CAAuBngC,WAAvB,EAAoCkgC,QAApC,EAA8C;AAC3D,YAAI7S,KAAK,GAAG,EAAZ;AACA,YAAI0T,UAAU,GAAG,KAAKC,gBAAL,CAAsBd,QAAtB,CAAjB;AACA7S,QAAAA,KAAK,CAACnpB,IAAN,CAAW,KAAK08B,SAAL,GAAiB,cAAjB,GACT5gC,WAAW,CAACO,WADH,GACiB,GADjB,GACuBwgC,UADlC;AAEA1T,QAAAA,KAAK,CAACnpB,IAAN,CAAW,mBAAmB,KAAKk8B,aAAL,EAA9B;AACA/S,QAAAA,KAAK,CAACnpB,IAAN,CAAW,eAAe,KAAKs6B,SAAL,CAAex+B,WAAf,EAA4BkgC,QAA5B,CAA1B;AACA,eAAO7S,KAAK,CAACniB,IAAN,CAAW,IAAX,CAAP;AACD,OAlFiD;AAoFlDszB,MAAAA,SAAS,EAAE,SAASA,SAAT,CAAmBx+B,WAAnB,EAAgCkgC,QAAhC,EAA0C;AACnD,YAAImB,UAAU,GAAGX,aAAa,CAACY,aAAd,CACfthC,WADe,EAEfkgC,QAAQ,CAACrrB,MAAT,CAAgB,CAAhB,EAAmB,CAAnB,CAFe,EAGf,KAAKrI,OAAL,CAAa3K,MAHE,EAIf,KAAK8+B,WAJU,EAKf,KAAKz9B,cALU,CAAjB;AAOA,eAAO3M,GAAG,CAAC6H,IAAJ,CAASC,MAAT,CAAgBuhC,IAAhB,CAAqByB,UAArB,EAAiC,KAAKnC,YAAL,CAAkBgB,QAAlB,CAAjC,EAA8D,KAA9D,CAAP;AACD,OA7FiD;AA+FlDhB,MAAAA,YAAY,EAAE,SAASA,YAAT,CAAsBgB,QAAtB,EAAgC;AAC5C,YAAI7S,KAAK,GAAG,EAAZ;AACAA,QAAAA,KAAK,CAACnpB,IAAN,CAAW,kBAAX;AACAmpB,QAAAA,KAAK,CAACnpB,IAAN,CAAWg8B,QAAX;AACA7S,QAAAA,KAAK,CAACnpB,IAAN,CAAW,KAAK88B,gBAAL,CAAsBd,QAAtB,CAAX;AACA7S,QAAAA,KAAK,CAACnpB,IAAN,CAAW,KAAKq9B,cAAL,CAAoB,KAAKC,eAAL,EAApB,CAAX;AACA,eAAOnU,KAAK,CAACniB,IAAN,CAAW,IAAX,CAAP;AACD,OAtGiD;AAwGlDs2B,MAAAA,eAAe,EAAE,SAASA,eAAT,GAA2B;AAC1C,YAAInU,KAAK,GAAG,EAAZ;AAAA,YAAgBtO,QAAQ,GAAG,KAAKvS,OAAL,CAAauS,QAAb,EAA3B;AACA,YAAI,KAAK4hB,WAAL,KAAqB,IAArB,IAA6B,KAAK19B,gBAAL,KAA0B,MAA3D,EAAmE8b,QAAQ,GAAGxoB,GAAG,CAAC6H,IAAJ,CAAS8uB,aAAT,CAAuBnO,QAAvB,CAAX;AAEnEsO,QAAAA,KAAK,CAACnpB,IAAN,CAAW,KAAKsI,OAAL,CAAa+R,MAAxB;AACA8O,QAAAA,KAAK,CAACnpB,IAAN,CAAW6a,QAAX;AACAsO,QAAAA,KAAK,CAACnpB,IAAN,CAAW,KAAKsI,OAAL,CAAawS,MAAb,EAAX;AACAqO,QAAAA,KAAK,CAACnpB,IAAN,CAAW,KAAKq8B,gBAAL,KAA0B,IAArC;AACAlT,QAAAA,KAAK,CAACnpB,IAAN,CAAW,KAAKk8B,aAAL,EAAX;AACA/S,QAAAA,KAAK,CAACnpB,IAAN,CAAW,KAAKu9B,kBAAL,EAAX;AACA,eAAOpU,KAAK,CAACniB,IAAN,CAAW,IAAX,CAAP;AACD,OAnHiD;AAqHlDq1B,MAAAA,gBAAgB,EAAE,SAASA,gBAAT,GAA4B;AAC5C,YAAI5wB,OAAO,GAAG,EAAd;AACApZ,QAAAA,GAAG,CAAC6H,IAAJ,CAASoB,IAAT,CAActJ,IAAd,CAAmB,IAAnB,EAAyB,KAAKsW,OAAL,CAAamD,OAAtC,EAA+C,UAAU1X,GAAV,EAAem3B,IAAf,EAAqB;AAClEzf,UAAAA,OAAO,CAACzL,IAAR,CAAa,CAACjM,GAAD,EAAMm3B,IAAN,CAAb;AACD,SAFD;AAGAzf,QAAAA,OAAO,CAAC2d,IAAR,CAAa,UAAUz3B,CAAV,EAAayF,CAAb,EAAgB;AAC3B,iBAAOzF,CAAC,CAAC,CAAD,CAAD,CAAKkC,WAAL,KAAqBuD,CAAC,CAAC,CAAD,CAAD,CAAKvD,WAAL,EAArB,GAA0C,CAAC,CAA3C,GAA+C,CAAtD;AACD,SAFD;AAGA,YAAIs1B,KAAK,GAAG,EAAZ;AACA92B,QAAAA,GAAG,CAAC6H,IAAJ,CAASyI,SAAT,CAAmB3Q,IAAnB,CAAwB,IAAxB,EAA8ByZ,OAA9B,EAAuC,UAAUyf,IAAV,EAAgB;AACrD,cAAIn3B,GAAG,GAAGm3B,IAAI,CAAC,CAAD,CAAJ,CAAQr3B,WAAR,EAAV;;AACA,cAAI,KAAKmpC,gBAAL,CAAsBjpC,GAAtB,CAAJ,EAAgC;AAC9B,gBAAIyH,KAAK,GAAG0vB,IAAI,CAAC,CAAD,CAAhB;;AACA,gBAAI,OAAO1vB,KAAP,KAAiB,WAAjB,IAAgCA,KAAK,KAAK,IAA1C,IAAkD,OAAOA,KAAK,CAAChH,QAAb,KAA0B,UAAhF,EAA4F;AAC1F,oBAAMnC,GAAG,CAAC6H,IAAJ,CAAStE,KAAT,CAAe,IAAIhE,KAAJ,CAAU,YAAYmC,GAAZ,GAAkB,yBAA5B,CAAf,EAAuE;AAC3ElC,gBAAAA,IAAI,EAAE;AADqE,eAAvE,CAAN;AAGD;;AACDs3B,YAAAA,KAAK,CAACnpB,IAAN,CAAWjM,GAAG,GAAG,GAAN,GACT,KAAKypC,qBAAL,CAA2BhiC,KAAK,CAAChH,QAAN,EAA3B,CADF;AAED;AACF,SAZD;AAaA,eAAO20B,KAAK,CAACniB,IAAN,CAAW,IAAX,CAAP;AACD,OA5IiD;AA8IlDw2B,MAAAA,qBAAqB,EAAE,SAASA,qBAAT,CAA+BC,MAA/B,EAAuC;AAC5D,eAAOA,MAAM,CAAChf,OAAP,CAAe,MAAf,EAAuB,GAAvB,EAA4BA,OAA5B,CAAoC,YAApC,EAAkD,EAAlD,CAAP;AACD,OAhJiD;AAkJlDyd,MAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACtC,YAAI3gC,IAAI,GAAG,EAAX;AACAlJ,QAAAA,GAAG,CAAC6H,IAAJ,CAASoB,IAAT,CAActJ,IAAd,CAAmB,IAAnB,EAAyB,KAAKsW,OAAL,CAAamD,OAAtC,EAA+C,UAAU1X,GAAV,EAAe;AAC5DA,UAAAA,GAAG,GAAGA,GAAG,CAACF,WAAJ,EAAN;AACA,cAAI,KAAKmpC,gBAAL,CAAsBjpC,GAAtB,CAAJ,EAAgCwH,IAAI,CAACyE,IAAL,CAAUjM,GAAV;AACjC,SAHD;AAIA,eAAOwH,IAAI,CAAC6tB,IAAL,GAAYpiB,IAAZ,CAAiB,GAAjB,CAAP;AACD,OAzJiD;AA2JlD81B,MAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0Bd,QAA1B,EAAoC;AACpD,eAAOQ,aAAa,CAACkB,WAAd,CACL1B,QAAQ,CAACrrB,MAAT,CAAgB,CAAhB,EAAmB,CAAnB,CADK,EAEL,KAAKrI,OAAL,CAAa3K,MAFR,EAGL,KAAK8+B,WAHA,CAAP;AAKD,OAjKiD;AAmKlDY,MAAAA,cAAc,EAAE,SAASjoC,IAAT,CAAc+d,MAAd,EAAsB;AACpC,eAAO9gB,GAAG,CAAC6H,IAAJ,CAASC,MAAT,CAAgBoiC,MAAhB,CAAuBppB,MAAvB,EAA+B,KAA/B,CAAP;AACD,OArKiD;AAuKlDoqB,MAAAA,kBAAkB,EAAE,SAASA,kBAAT,GAA8B;AAChD,YAAIj1B,OAAO,GAAG,KAAKA,OAAnB;;AACA,YAAI,KAAK2E,WAAL,MAAsB,KAAKwvB,WAAL,KAAqB,IAA3C,IAAmD,CAACn0B,OAAO,CAACmF,IAAhE,EAAsE;AACpE,iBAAO,kBAAP;AACD,SAFD,MAEO,IAAInF,OAAO,CAACmD,OAAR,CAAgB,sBAAhB,CAAJ,EAA6C;AAClD,iBAAOnD,OAAO,CAACmD,OAAR,CAAgB,sBAAhB,CAAP;AACD,SAFM,MAEA;AACL,iBAAO,KAAK4xB,cAAL,CAAoB,KAAK/0B,OAAL,CAAamF,IAAb,IAAqB,EAAzC,CAAP;AACD;AACF,OAhLiD;AAkLlDkwB,MAAAA,iBAAiB,EAAE,CACjB,eADiB,EAEjB,cAFiB,EAGjB,gBAHiB,EAIjB,YAJiB,EAKjB9D,aALiB,EAMjB,QANiB,EAOjB,iBAPiB,CAlL+B;AA4LlDmD,MAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0BjpC,GAA1B,EAA+B;AAC/C,YAAIA,GAAG,CAACF,WAAJ,GAAkBS,OAAlB,CAA0B,QAA1B,MAAwC,CAA5C,EAA+C,OAAO,IAAP;AAC/C,eAAO,KAAKqpC,iBAAL,CAAuBrpC,OAAvB,CAA+BP,GAA/B,IAAsC,CAA7C;AACD,OA/LiD;AAiMlDkZ,MAAAA,WAAW,EAAE,SAASA,WAAT,GAAuB;AAClC,eAAO,KAAK3E,OAAL,CAAamD,OAAb,CAAqBouB,aAArB,IAAsC,IAAtC,GAA6C,KAApD;AACD;AAnMiD,KAA5B,CAAxB;AAuMA;AACF;AACA;;AACE3nC,IAAAA,MAAM,CAACH,OAAP,GAAiBM,GAAG,CAACkO,OAAJ,CAAYsS,EAA7B;AAEC,GAzN8B,EAyN7B;AAAC,eAAU,EAAX;AAAc,wBAAmB;AAAjC,GAzN6B,CArlY2a;AA8yYla,MAAG,CAAC,UAASphB,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC5E,QAAIM,GAAG,GAAGZ,OAAO,CAAC,SAAD,CAAjB;AAEA;AACF;AACA;;;AACE,QAAImsC,YAAY,GAAG,EAAnB;AAEA;AACF;AACA;;AACE,QAAIC,UAAU,GAAG,EAAjB;AAEA;AACF;AACA;;AACE,QAAIC,eAAe,GAAG,EAAtB;AAEA;AACF;AACA;;AACE,QAAIC,YAAY,GAAG,cAAnB;AAEA;AACF;AACA;;AACE7rC,IAAAA,MAAM,CAACH,OAAP,GAAiB;AACf;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACI2rC,MAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBz7B,IAArB,EAA2BtE,MAA3B,EAAmC8+B,WAAnC,EAAgD;AAC3D,eAAO,CACLx6B,IAAI,CAAC0O,MAAL,CAAY,CAAZ,EAAe,CAAf,CADK,EAELhT,MAFK,EAGL8+B,WAHK,EAILsB,YAJK,EAKL/2B,IALK,CAKA,GALA,CAAP;AAMD,OAhBc;;AAkBf;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIo2B,MAAAA,aAAa,EAAE,SAASA,aAAT,CACbthC,WADa,EAEbmG,IAFa,EAGbtE,MAHa,EAIbiG,OAJa,EAKbo6B,WALa,EAMb;AACA,YAAIC,eAAe,GAAG5rC,GAAG,CAAC6H,IAAJ,CAASC,MAAT,CACnBuhC,IADmB,CACd5/B,WAAW,CAACQ,eADE,EACeR,WAAW,CAACO,WAD3B,EACwC,QADxC,CAAtB;AAEA,YAAIqN,QAAQ,GAAG,CAACu0B,eAAD,EAAkBh8B,IAAlB,EAAwBtE,MAAxB,EAAgCiG,OAAhC,EAAyCoD,IAAzC,CAA8C,GAA9C,CAAf;AACAg3B,QAAAA,WAAW,GAAGA,WAAW,KAAK,KAA9B;;AACA,YAAIA,WAAW,IAAKt0B,QAAQ,IAAIk0B,YAAhC,EAA+C;AAC7C,iBAAOA,YAAY,CAACl0B,QAAD,CAAnB;AACD;;AAED,YAAIw0B,KAAK,GAAG7rC,GAAG,CAAC6H,IAAJ,CAASC,MAAT,CAAgBuhC,IAAhB,CACV,SAAS5/B,WAAW,CAACQ,eADX,EAEV2F,IAFU,EAGV,QAHU,CAAZ;AAKA,YAAIk8B,OAAO,GAAG9rC,GAAG,CAAC6H,IAAJ,CAASC,MAAT,CAAgBuhC,IAAhB,CAAqBwC,KAArB,EAA4BvgC,MAA5B,EAAoC,QAApC,CAAd;AACA,YAAIygC,QAAQ,GAAG/rC,GAAG,CAAC6H,IAAJ,CAASC,MAAT,CAAgBuhC,IAAhB,CAAqByC,OAArB,EAA8Bv6B,OAA9B,EAAuC,QAAvC,CAAf;AAEA,YAAIu5B,UAAU,GAAG9qC,GAAG,CAAC6H,IAAJ,CAASC,MAAT,CAAgBuhC,IAAhB,CAAqB0C,QAArB,EAA+BL,YAA/B,EAA6C,QAA7C,CAAjB;;AACA,YAAIC,WAAJ,EAAiB;AACfJ,UAAAA,YAAY,CAACl0B,QAAD,CAAZ,GAAyByzB,UAAzB;AACAU,UAAAA,UAAU,CAAC79B,IAAX,CAAgB0J,QAAhB;;AACA,cAAIm0B,UAAU,CAAC5rC,MAAX,GAAoB6rC,eAAxB,EAAyC;AACvC;AACA,mBAAOF,YAAY,CAACC,UAAU,CAACnlC,KAAX,EAAD,CAAnB;AACD;AACF;;AAED,eAAOykC,UAAP;AACD,OA9Dc;;AAgEf;AACJ;AACA;AACA;AACA;AACA;AACIkB,MAAAA,UAAU,EAAE,SAASA,UAAT,GAAsB;AAChCT,QAAAA,YAAY,GAAG,EAAf;AACAC,QAAAA,UAAU,GAAG,EAAb;AACD;AAzEc,KAAjB;AA4EC,GAtG0C,EAsGzC;AAAC,eAAU;AAAX,GAtGyC,CA9yY+Z;AAo5Yxb,MAAG,CAAC,UAASpsC,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACtD,aAASy5B,oBAAT,CAA8BoB,MAA9B,EAAsCx2B,KAAtC,EAA6C;AAC3C,WAAK61B,YAAL,GAAoB71B,KAAK,IAAI,IAA7B;AACA,WAAKw2B,MAAL,GAAcA,MAAM,IAAI,EAAxB;AACD;;AAEDpB,IAAAA,oBAAoB,CAACj3B,SAArB,CAA+Bu4B,KAA/B,GAAuC,SAASA,KAAT,CAAewR,UAAf,EAA2BtzB,IAA3B,EAAiCuzB,UAAjC,EAA6CC,UAA7C,EAAyD;AAC9F,UAAI,OAAOF,UAAP,KAAsB,UAA1B,EAAsC;AACpCE,QAAAA,UAAU,GAAGD,UAAb;AAAyBA,QAAAA,UAAU,GAAGvzB,IAAb;AACzBA,QAAAA,IAAI,GAAGszB,UAAP;AAAmBA,QAAAA,UAAU,GAAG,IAAb;AACpB;;AAED,UAAI3iC,IAAI,GAAG,IAAX;AACA,UAAIvF,KAAK,GAAGuF,IAAI,CAACixB,MAAL,CAAYjxB,IAAI,CAACswB,YAAjB,CAAZ;AACA71B,MAAAA,KAAK,CAACyN,EAAN,CAAS7R,IAAT,CAAcusC,UAAU,IAAI5iC,IAA5B,EAAkC6iC,UAAlC,EAA8C,UAAS3iC,GAAT,EAAc;AAC1D,YAAIA,GAAJ,EAAS;AACP,cAAIzF,KAAK,CAACuuB,IAAV,EAAgBhpB,IAAI,CAACswB,YAAL,GAAoB71B,KAAK,CAACuuB,IAA1B,CAAhB,KACK,OAAO3Z,IAAI,GAAGA,IAAI,CAAChZ,IAAL,CAAUusC,UAAV,EAAsB1iC,GAAtB,CAAH,GAAgC,IAA3C;AACN,SAHD,MAGO;AACL,cAAIzF,KAAK,CAACqoC,MAAV,EAAkB9iC,IAAI,CAACswB,YAAL,GAAoB71B,KAAK,CAACqoC,MAA1B,CAAlB,KACK,OAAOzzB,IAAI,GAAGA,IAAI,CAAChZ,IAAL,CAAUusC,UAAV,CAAH,GAA2B,IAAtC;AACN;;AACD,YAAI5iC,IAAI,CAACswB,YAAL,KAAsBqS,UAA1B,EAAsC;AACpC,iBAAOtzB,IAAI,GAAGA,IAAI,CAAChZ,IAAL,CAAUusC,UAAV,EAAsB1iC,GAAtB,CAAH,GAAgC,IAA3C;AACD;;AAEDF,QAAAA,IAAI,CAACmxB,KAAL,CAAWwR,UAAX,EAAuBtzB,IAAvB,EAA6BuzB,UAA7B,EAAyC1iC,GAAzC;AACD,OAbD;AAcD,KAtBD;;AAwBA2vB,IAAAA,oBAAoB,CAACj3B,SAArB,CAA+Bk4B,QAA/B,GAA0C,SAASA,QAAT,CAAkBvwB,IAAlB,EAAwBwiC,WAAxB,EAAqCC,SAArC,EAAgD96B,EAAhD,EAAoD;AAC5F,UAAI,OAAO66B,WAAP,KAAuB,UAA3B,EAAuC;AACrC76B,QAAAA,EAAE,GAAG66B,WAAL;AAAkBA,QAAAA,WAAW,GAAG,IAAd;AAAoBC,QAAAA,SAAS,GAAG,IAAZ;AACvC,OAFD,MAEO,IAAI,OAAOA,SAAP,KAAqB,UAAzB,EAAqC;AAC1C96B,QAAAA,EAAE,GAAG86B,SAAL;AAAgBA,QAAAA,SAAS,GAAG,IAAZ;AACjB;;AAED,UAAI,CAAC,KAAK1S,YAAV,EAAwB,KAAKA,YAAL,GAAoB/vB,IAApB;AACxB,WAAK0wB,MAAL,CAAY1wB,IAAZ,IAAoB;AAAEuiC,QAAAA,MAAM,EAAEC,WAAV;AAAuB/Z,QAAAA,IAAI,EAAEga,SAA7B;AAAwC96B,QAAAA,EAAE,EAAEA;AAA5C,OAApB;AACA,aAAO,IAAP;AACD,KAVD;AAYA;AACF;AACA;;;AACE3R,IAAAA,MAAM,CAACH,OAAP,GAAiBy5B,oBAAjB;AAEC,GA/CoB,EA+CnB,EA/CmB,CAp5Yqb;AAm8Ypc,MAAG,CAAC,UAAS/5B,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1C,KAAC,UAAUkI,OAAV,EAAkB2kC,YAAlB,EAA+B;AAChC;AACA,UAAIvsC,GAAJ;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACE,UAAI6H,IAAI,GAAG;AACTM,QAAAA,WAAW,EAAE,QADJ;AAETqkC,QAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxB,cAAI3kC,IAAI,CAACQ,SAAL,MAAoB,OAAOokC,SAAP,KAAqB,WAA7C,EAA0D;AACxD,mBAAOA,SAAS,CAACrkB,SAAjB;AACD,WAFD,MAEO;AACL,gBAAIokB,MAAM,GAAG5kC,OAAO,CAAC8kC,QAAR,GAAmB,GAAnB,GAAyB9kC,OAAO,CAAC5G,OAA9C;;AACA,gBAAI4G,OAAO,CAACoS,GAAR,CAAY2yB,iBAAhB,EAAmC;AACjCH,cAAAA,MAAM,IAAI,eAAe5kC,OAAO,CAACoS,GAAR,CAAY2yB,iBAArC;AACD;;AACD,mBAAOH,MAAP;AACD;AACF,SAZQ;AAcTpkB,QAAAA,SAAS,EAAE,SAASA,SAAT,GAAqB;AAC9B,cAAIve,IAAI,GAAGhC,IAAI,CAACM,WAAhB;;AACA,cAAIykC,KAAK,GAAG,aAAa/iC,IAAb,GAAoB,GAApB,GAA0BzK,OAAO,CAAC,QAAD,CAAP,CAAkB6O,OAAxD;;AACA,cAAIpE,IAAI,KAAK,QAAb,EAAuB+iC,KAAK,IAAI,MAAM/kC,IAAI,CAAC2kC,MAAL,EAAf;AACvB,iBAAOI,KAAP;AACD,SAnBQ;AAqBThW,QAAAA,SAAS,EAAE,SAASA,SAAT,CAAmB9V,MAAnB,EAA2B;AACpC,cAAI7D,MAAM,GAAG4vB,kBAAkB,CAAC/rB,MAAD,CAA/B;AACA7D,UAAAA,MAAM,GAAGA,MAAM,CAACmP,OAAP,CAAe,sBAAf,EAAuC0gB,MAAvC,CAAT,CAFoC,CAIpC;;AACA7vB,UAAAA,MAAM,GAAGA,MAAM,CAACmP,OAAP,CAAe,MAAf,EAAuB,UAAS2gB,EAAT,EAAa;AAC3C,mBAAO,MAAMA,EAAE,CAACC,UAAH,CAAc,CAAd,EAAiB7qC,QAAjB,CAA0B,EAA1B,EAA8B41B,WAA9B,EAAb;AACD,WAFQ,CAAT;AAIA,iBAAO9a,MAAP;AACD,SA/BQ;AAiCT0Z,QAAAA,aAAa,EAAE,SAASA,aAAT,CAAuB7V,MAAvB,EAA+B;AAC5C,cAAIgW,KAAK,GAAG,EAAZ;AACAjvB,UAAAA,IAAI,CAACyI,SAAL,CAAewQ,MAAM,CAACzM,KAAP,CAAa,GAAb,CAAf,EAAkC,UAAU44B,IAAV,EAAgB;AAChDnW,YAAAA,KAAK,CAACnpB,IAAN,CAAW9F,IAAI,CAAC+uB,SAAL,CAAeqW,IAAf,CAAX;AACD,WAFD;AAGA,iBAAOnW,KAAK,CAACniB,IAAN,CAAW,GAAX,CAAP;AACD,SAvCQ;AAyCTkT,QAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkB7f,GAAlB,EAAuB;AAC/B,iBAAOH,IAAI,CAACG,GAAL,CAAS2C,KAAT,CAAe3C,GAAf,CAAP;AACD,SA3CQ;AA6CTkgC,QAAAA,SAAS,EAAE,SAASA,SAAT,CAAmBlgC,GAAnB,EAAwB;AACjC,iBAAOH,IAAI,CAACG,GAAL,CAASypB,MAAT,CAAgBzpB,GAAhB,CAAP;AACD,SA/CQ;AAiDT2gB,QAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0B+hB,EAA1B,EAA8B;AAC9C,iBAAO7iC,IAAI,CAACI,WAAL,CAAiB0C,KAAjB,CAAuB+/B,EAAvB,CAAP;AACD,SAnDQ;AAqDT9hB,QAAAA,mBAAmB,EAAE,SAASA,mBAAT,CAA6B3X,MAA7B,EAAqC;AACxD,cAAIqqB,KAAK,GAAG,EAAZ;AACA,cAAIwR,MAAM,GAAGjlC,IAAI,CAAC+uB,SAAlB;AACA,cAAIsW,UAAU,GAAG5sC,MAAM,CAAC4I,IAAP,CAAY+H,MAAZ,EAAoB8lB,IAApB,EAAjB;AAEAlvB,UAAAA,IAAI,CAACyI,SAAL,CAAe48B,UAAf,EAA2B,UAASrjC,IAAT,EAAe;AACxC,gBAAIV,KAAK,GAAG8H,MAAM,CAACpH,IAAD,CAAlB;AACA,gBAAIsjC,KAAK,GAAGL,MAAM,CAACjjC,IAAD,CAAlB;AACA,gBAAI0M,MAAM,GAAG42B,KAAK,GAAG,GAArB;;AACA,gBAAIna,KAAK,CAAC6D,OAAN,CAAc1tB,KAAd,CAAJ,EAA0B;AACxB,kBAAIikC,IAAI,GAAG,EAAX;AACAvlC,cAAAA,IAAI,CAACyI,SAAL,CAAenH,KAAf,EAAsB,UAAS0vB,IAAT,EAAe;AAAEuU,gBAAAA,IAAI,CAACz/B,IAAL,CAAUm/B,MAAM,CAACjU,IAAD,CAAhB;AAA0B,eAAjE;AACAtiB,cAAAA,MAAM,GAAG42B,KAAK,GAAG,GAAR,GAAcC,IAAI,CAACrW,IAAL,GAAYpiB,IAAZ,CAAiB,MAAMw4B,KAAN,GAAc,GAA/B,CAAvB;AACD,aAJD,MAIO,IAAIhkC,KAAK,KAAKJ,SAAV,IAAuBI,KAAK,KAAK,IAArC,EAA2C;AAChDoN,cAAAA,MAAM,GAAG42B,KAAK,GAAG,GAAR,GAAcL,MAAM,CAAC3jC,KAAD,CAA7B;AACD;;AACDmyB,YAAAA,KAAK,CAAC3tB,IAAN,CAAW4I,MAAX;AACD,WAZD;AAcA,iBAAO+kB,KAAK,CAAC3mB,IAAN,CAAW,GAAX,CAAP;AACD,SAzEQ;AA2ET/J,QAAAA,YAAY,EAAE,SAASA,YAAT,CAAsBJ,IAAtB,EAA4B;AACxC,cAAI3C,IAAI,CAACQ,SAAL,EAAJ,EAAsB,OAAO,IAAP;AACtB,iBAAOjJ,OAAO,CAAC,IAAD,CAAP,CAAcwL,YAAd,CAA2BJ,IAA3B,EAAiC,OAAjC,CAAP;AACD,SA9EQ;AAgFTsnB,QAAAA,MAAM,EAAE;AACNK,UAAAA,MAAM,EAAE,SAASkb,QAAT,CAAkBvsB,MAAlB,EAA0B;AAChC,gBAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,oBAAMjZ,IAAI,CAACtE,KAAL,CAAW,IAAIhE,KAAJ,CAAU,iCAAiCuhB,MAA3C,CAAX,CAAN;AACD;;AACD,gBAAIA,MAAM,KAAK,IAAX,IAAmB,OAAOA,MAAP,KAAkB,WAAzC,EAAsD;AACpD,qBAAOA,MAAP;AACD;;AACD,gBAAI+Q,GAAG,GAAGhqB,IAAI,CAACpF,MAAL,CAAYgZ,QAAZ,CAAqBqF,MAArB,CAAV;AACA,mBAAO+Q,GAAG,CAAC1vB,QAAJ,CAAa,QAAb,CAAP;AACD,WAVK;AAYN4vB,UAAAA,MAAM,EAAE,SAASub,QAAT,CAAkBxsB,MAAlB,EAA0B;AAChC,gBAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,oBAAMjZ,IAAI,CAACtE,KAAL,CAAW,IAAIhE,KAAJ,CAAU,iCAAiCuhB,MAA3C,CAAX,CAAN;AACD;;AACD,gBAAIA,MAAM,KAAK,IAAX,IAAmB,OAAOA,MAAP,KAAkB,WAAzC,EAAsD;AACpD,qBAAOA,MAAP;AACD;;AACD,mBAAOjZ,IAAI,CAACpF,MAAL,CAAYgZ,QAAZ,CAAqBqF,MAArB,EAA6B,QAA7B,CAAP;AACD;AApBK,SAhFC;AAwGTre,QAAAA,MAAM,EAAE;AACN;AACN;AACA;AACMgZ,UAAAA,QAAQ,EAAE,UAASpZ,IAAT,EAAeoB,QAAf,EAAyB;AACjC,mBAAQ,OAAOoE,IAAI,CAACjG,MAAL,CAAY2rC,IAAnB,KAA4B,UAA5B,IAA0C1lC,IAAI,CAACjG,MAAL,CAAY2rC,IAAZ,KAAqB/qC,UAAU,CAAC+qC,IAA3E,GACL1lC,IAAI,CAACjG,MAAL,CAAY2rC,IAAZ,CAAiBlrC,IAAjB,EAAuBoB,QAAvB,CADK,GAC8B,IAAIoE,IAAI,CAACjG,MAAT,CAAgBS,IAAhB,EAAsBoB,QAAtB,CADrC;AAED,WAPK;AASNuuB,UAAAA,KAAK,EAAE,UAASwb,IAAT,EAAetb,IAAf,EAAqBzuB,QAArB,EAA+B;AACpC,gBAAI,OAAO+pC,IAAP,KAAgB,QAApB,EAA8B;AAC5B,oBAAM,IAAIjuC,KAAJ,CAAU,wCAAV,CAAN;AACD;;AACD,gBAAI,OAAOsI,IAAI,CAACjG,MAAL,CAAYowB,KAAnB,KAA6B,UAAjC,EAA6C;AAC3C,qBAAOnqB,IAAI,CAACjG,MAAL,CAAYowB,KAAZ,CAAkBwb,IAAlB,EAAwBtb,IAAxB,EAA8BzuB,QAA9B,CAAP;AACD,aAFD,MAEO;AACL,kBAAIouB,GAAG,GAAG,IAAIhqB,IAAI,CAACjG,MAAT,CAAgB4rC,IAAhB,CAAV;;AACA,kBAAItb,IAAI,KAAKnpB,SAAT,IAAsB,OAAO8oB,GAAG,CAACK,IAAX,KAAoB,UAA9C,EAA0D;AACxDL,gBAAAA,GAAG,CAACK,IAAJ,CAASA,IAAT,EAAenpB,SAAf,EAA0BA,SAA1B,EAAqCtF,QAArC;AACD;;AACD,qBAAOouB,GAAP;AACD;AACF,WAtBK;AAwBN4b,UAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkBhrC,MAAlB,EAA0B;AAClC,gBAAI,CAACoF,IAAI,CAACjG,MAAL,CAAYga,QAAZ,CAAqBnZ,MAArB,CAAL,EAAmCA,MAAM,GAAIoF,IAAI,CAACpF,MAAL,CAAYgZ,QAAZ,CAAqBhZ,MAArB,CAAV;AAEnC,gBAAIo5B,QAAQ,GAAG,IAAKh0B,IAAI,CAAC0a,MAAL,CAAYmrB,QAAjB,EAAf;AACA,gBAAIC,GAAG,GAAG,CAAV;;AACA9R,YAAAA,QAAQ,CAAC+R,KAAT,GAAiB,UAASJ,IAAT,EAAe;AAC9B,kBAAIG,GAAG,IAAIlrC,MAAM,CAAC7C,MAAlB,EAA0B,OAAOi8B,QAAQ,CAACluB,IAAT,CAAc,IAAd,CAAP;AAE1B,kBAAI4uB,GAAG,GAAGoR,GAAG,GAAGH,IAAhB;AACA,kBAAIjR,GAAG,GAAG95B,MAAM,CAAC7C,MAAjB,EAAyB28B,GAAG,GAAG95B,MAAM,CAAC7C,MAAb;AACzBi8B,cAAAA,QAAQ,CAACluB,IAAT,CAAclL,MAAM,CAACwS,KAAP,CAAa04B,GAAb,EAAkBpR,GAAlB,CAAd;AACAoR,cAAAA,GAAG,GAAGpR,GAAN;AACD,aAPD;;AASA,mBAAOV,QAAP;AACD,WAvCK;;AAyCN;AACN;AACA;AACMjX,UAAAA,MAAM,EAAE,UAASX,OAAT,EAAkB;AACxB,gBAAIrkB,MAAM,GAAG,CAAb;AAAA,gBACIwG,MAAM,GAAG,CADb;AAAA,gBAEI3D,MAAM,GAAG,IAFb;AAAA,gBAEmBxD,CAFnB;;AAIA,iBAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGglB,OAAO,CAACrkB,MAAxB,EAAgCX,CAAC,EAAjC,EAAqC;AACnCW,cAAAA,MAAM,IAAIqkB,OAAO,CAAChlB,CAAD,CAAP,CAAWW,MAArB;AACD;;AAED6C,YAAAA,MAAM,GAAGoF,IAAI,CAACpF,MAAL,CAAYuvB,KAAZ,CAAkBpyB,MAAlB,CAAT;;AAEA,iBAAKX,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGglB,OAAO,CAACrkB,MAAxB,EAAgCX,CAAC,EAAjC,EAAqC;AACnCglB,cAAAA,OAAO,CAAChlB,CAAD,CAAP,CAAWkO,IAAX,CAAgB1K,MAAhB,EAAwB2D,MAAxB;AACAA,cAAAA,MAAM,IAAI6d,OAAO,CAAChlB,CAAD,CAAP,CAAWW,MAArB;AACD;;AAED,mBAAO6C,MAAP;AACD;AA7DK,SAxGC;AAwKTqe,QAAAA,MAAM,EAAE;AACNxe,UAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBwe,MAApB,EAA4B;AACtC,gBAAIA,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK/X,SAAlC,EAA6C,OAAO,CAAP;AAC7C,gBAAI,OAAO+X,MAAP,KAAkB,QAAtB,EAAgCA,MAAM,GAAGjZ,IAAI,CAACpF,MAAL,CAAYgZ,QAAZ,CAAqBqF,MAArB,CAAT;;AAEhC,gBAAI,OAAOA,MAAM,CAACxe,UAAd,KAA6B,QAAjC,EAA2C;AACzC,qBAAOwe,MAAM,CAACxe,UAAd;AACD,aAFD,MAEO,IAAI,OAAOwe,MAAM,CAAClhB,MAAd,KAAyB,QAA7B,EAAuC;AAC5C,qBAAOkhB,MAAM,CAAClhB,MAAd;AACD,aAFM,MAEA,IAAI,OAAOkhB,MAAM,CAAC0sB,IAAd,KAAuB,QAA3B,EAAqC;AAC1C,qBAAO1sB,MAAM,CAAC0sB,IAAd;AACD,aAFM,MAEA,IAAI,OAAO1sB,MAAM,CAACtW,IAAd,KAAuB,QAA3B,EAAqC;AAC1C,qBAAOpL,OAAO,CAAC,IAAD,CAAP,CAAcyuC,SAAd,CAAwB/sB,MAAM,CAACtW,IAA/B,EAAqCgjC,IAA5C;AACD,aAFM,MAEA;AACL,oBAAM3lC,IAAI,CAACtE,KAAL,CAAW,IAAIhE,KAAJ,CAAU,gCAAgCuhB,MAA1C,CAAX,EACJ;AAAEgtB,gBAAAA,MAAM,EAAEhtB;AAAV,eADI,CAAN;AAED;AACF,WAjBK;AAmBN6W,UAAAA,UAAU,EAAE,SAASA,UAAT,CAAoB7W,MAApB,EAA4B;AACtC,mBAAOA,MAAM,CAAC,CAAD,CAAN,CAAUiX,WAAV,KAA0BjX,MAAM,CAACxC,MAAP,CAAc,CAAd,CAAjC;AACD,WArBK;AAuBNgJ,UAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBxG,MAApB,EAA4B;AACtC,mBAAOA,MAAM,CAAC,CAAD,CAAN,CAAUtf,WAAV,KAA0Bsf,MAAM,CAACxC,MAAP,CAAc,CAAd,CAAjC;AACD;AAzBK,SAxKC;AAoMTyvB,QAAAA,GAAG,EAAE;AACHpjC,UAAAA,KAAK,EAAE,SAASmW,MAAT,CAAgBitB,GAAhB,EAAqB;AAC1B,gBAAIC,cAAJ;AAAA,gBAAoBrnB,GAAG,GAAG,EAA1B;AACA9e,YAAAA,IAAI,CAACyI,SAAL,CAAey9B,GAAG,CAAC15B,KAAJ,CAAU,OAAV,CAAf,EAAmC,UAASkT,IAAT,EAAe;AAChDA,cAAAA,IAAI,GAAGA,IAAI,CAAClT,KAAL,CAAW,YAAX,EAAyB,CAAzB,CAAP,CADgD,CACZ;;AACpC,kBAAI45B,OAAO,GAAG1mB,IAAI,CAACtC,KAAL,CAAW,wBAAX,CAAd;;AACA,kBAAIgpB,OAAJ,EAAa;AACXD,gBAAAA,cAAc,GAAGC,OAAO,CAAC,CAAD,CAAxB;AACD,eAFD,MAEO,IAAID,cAAJ,EAAoB;AACzB,oBAAInV,IAAI,GAAGtR,IAAI,CAACtC,KAAL,CAAW,2BAAX,CAAX;;AACA,oBAAI4T,IAAJ,EAAU;AACRlS,kBAAAA,GAAG,CAACqnB,cAAD,CAAH,GAAsBrnB,GAAG,CAACqnB,cAAD,CAAH,IAAuB,EAA7C;AACArnB,kBAAAA,GAAG,CAACqnB,cAAD,CAAH,CAAoBnV,IAAI,CAAC,CAAD,CAAxB,IAA+BA,IAAI,CAAC,CAAD,CAAnC;AACD;AACF;AACF,aAZD;AAcA,mBAAOlS,GAAP;AACD;AAlBE,SApMI;AAyNTnV,QAAAA,EAAE,EAAE;AACF0pB,UAAAA,IAAI,EAAE,YAAW,CAAE,CADjB;AAEF7xB,UAAAA,QAAQ,EAAE,UAAUG,GAAV,EAAe;AAAE,gBAAIA,GAAJ,EAAS,MAAMA,GAAN;AAAY,WAF9C;;AAIF;AACN;AACA;AACA;AACA;AACA;AACMsxB,UAAAA,SAAS,EAAE,SAASA,SAAT,CAAmBtpB,EAAnB,EAAuB08B,YAAvB,EAAqC;AAC9C,gBAAIA,YAAY,IAAIA,YAAY,IAAI18B,EAAE,CAAC5R,MAAvC,EAA+C;AAC7C,qBAAO4R,EAAP;AACD;;AAED,mBAAO,YAAW;AAChB,kBAAIsrB,IAAI,GAAG9J,KAAK,CAAC9wB,SAAN,CAAgB+S,KAAhB,CAAsBtV,IAAtB,CAA2BG,SAA3B,EAAsC,CAAtC,CAAX;AACA,kBAAIuJ,QAAQ,GAAGyzB,IAAI,CAACxH,GAAL,EAAf;AACA,kBAAI/e,MAAM,GAAG/E,EAAE,CAACzR,KAAH,CAAS,IAAT,EAAe+8B,IAAf,CAAb;AACAzzB,cAAAA,QAAQ,CAACkN,MAAD,CAAR;AACD,aALD;AAMD;AArBC,SAzNK;;AAiPT;AACJ;AACA;AACI3G,QAAAA,IAAI,EAAE;AAEJ;AACN;AACA;AACA;AACA;AACA;AACMC,UAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,gBAAI,CAAC7P,GAAL,EAAUA,GAAG,GAAGZ,OAAO,CAAC,QAAD,CAAb;;AACV,gBAAIY,GAAG,CAAC+N,MAAJ,CAAWtB,iBAAf,EAAkC;AAAE;AAClC,qBAAO,IAAIuD,IAAJ,CAAS,IAAIA,IAAJ,GAAWF,OAAX,KAAuB9P,GAAG,CAAC+N,MAAJ,CAAWtB,iBAA3C,CAAP;AACD,aAFD,MAEO;AACL,qBAAO,IAAIuD,IAAJ,EAAP;AACD;AACF,WAfG;;AAiBJ;AACN;AACA;AACM+xB,UAAAA,OAAO,EAAE,SAASA,OAAT,CAAiBnyB,IAAjB,EAAuB;AAC9B,gBAAIA,IAAI,KAAK7G,SAAb,EAAwB;AAAE6G,cAAAA,IAAI,GAAG/H,IAAI,CAAC+H,IAAL,CAAUC,OAAV,EAAP;AAA6B;;AACvD,mBAAOD,IAAI,CAACu+B,WAAL,GAAmB/hB,OAAnB,CAA2B,WAA3B,EAAwC,GAAxC,CAAP;AACD,WAvBG;;AAyBJ;AACN;AACA;AACMsc,UAAAA,MAAM,EAAE,SAASA,MAAT,CAAgB94B,IAAhB,EAAsB;AAC5B,gBAAIA,IAAI,KAAK7G,SAAb,EAAwB;AAAE6G,cAAAA,IAAI,GAAG/H,IAAI,CAAC+H,IAAL,CAAUC,OAAV,EAAP;AAA6B;;AACvD,mBAAOD,IAAI,CAAC2hB,WAAL,EAAP;AACD,WA/BG;;AAiCJ;AACN;AACA;AACMoW,UAAAA,aAAa,EAAE,SAASA,aAAT,CAAuB/3B,IAAvB,EAA6B;AAC1C,gBAAIA,IAAI,KAAK7G,SAAb,EAAwB;AAAE6G,cAAAA,IAAI,GAAG/H,IAAI,CAAC+H,IAAL,CAAUC,OAAV,EAAP;AAA6B;;AACvD,mBAAOD,IAAI,CAACE,OAAL,KAAiB,IAAxB;AACD,WAvCG;;AAyCJ;AACN;AACA;AACA;AACMy9B,UAAAA,IAAI,EAAE,SAAS9b,MAAT,CAAgB7hB,IAAhB,EAAsB;AAC1B,gBAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC5B,qBAAO,IAAII,IAAJ,CAASJ,IAAI,GAAG,IAAhB,CAAP,CAD4B,CACE;AAC/B,aAFD,MAEO;AACL,qBAAO,IAAII,IAAJ,CAASJ,IAAT,CAAP;AACD;AACF,WAnDG;;AAqDJ;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACM6hB,UAAAA,MAAM,EAAE,SAASA,MAAT,CAAgB7hB,IAAhB,EAAsBw+B,SAAtB,EAAiC;AACvC,gBAAI,CAACA,SAAL,EAAgBA,SAAS,GAAG,SAAZ;AAChB,mBAAOvmC,IAAI,CAAC+H,IAAL,CAAUw+B,SAAV,EAAqBvmC,IAAI,CAAC+H,IAAL,CAAU29B,IAAV,CAAe39B,IAAf,CAArB,CAAP;AACD,WAlEG;AAoEJ4hB,UAAAA,cAAc,EAAE,SAASA,cAAT,CAAwBroB,KAAxB,EAA+B;AAC7C,gBAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAAE;AAC/B,qBAAO,IAAI6G,IAAJ,CAAS7G,KAAK,GAAG,IAAjB,CAAP;AACD,aAFD,MAEO,IAAIA,KAAK,CAAC8b,KAAN,CAAY,OAAZ,CAAJ,EAA0B;AAAE;AACjC,qBAAO,IAAIjV,IAAJ,CAAS7G,KAAK,GAAG,IAAjB,CAAP;AACD,aAFM,MAEA,IAAIA,KAAK,CAAC8b,KAAN,CAAY,QAAZ,CAAJ,EAA2B;AAAE;AAClC,qBAAO,IAAIjV,IAAJ,CAAS7G,KAAT,CAAP;AACD,aAFM,MAEA,IAAIA,KAAK,CAAC8b,KAAN,CAAY,SAAZ,CAAJ,EAA4B;AAAE;AACnC,qBAAO,IAAIjV,IAAJ,CAAS7G,KAAT,CAAP;AACD,aAFM,MAEA;AACL,oBAAMtB,IAAI,CAACtE,KAAL,CACJ,IAAIhE,KAAJ,CAAU,iCAAiC4J,KAA3C,CADI,EAEJ;AAAC3J,gBAAAA,IAAI,EAAE;AAAP,eAFI,CAAN;AAGD;AACF;AAlFG,SApPG;AA0UTsI,QAAAA,MAAM,EAAE;AACNumC,UAAAA,UAAU,EAAE,CACX,UADW,EACC,UADD,EACa,UADb,EACyB,UADzB,EACqC,UADrC,EAEX,UAFW,EAEC,UAFD,EAEa,UAFb,EAEyB,UAFzB,EAEqC,UAFrC,EAGX,UAHW,EAGC,UAHD,EAGa,UAHb,EAGyB,UAHzB,EAGqC,UAHrC,EAIX,UAJW,EAIC,UAJD,EAIa,UAJb,EAIyB,UAJzB,EAIqC,UAJrC,EAKX,UALW,EAKC,UALD,EAKa,UALb,EAKyB,UALzB,EAKqC,UALrC,EAMX,UANW,EAMC,UAND,EAMa,UANb,EAMyB,UANzB,EAMqC,UANrC,EAOX,UAPW,EAOC,UAPD,EAOa,UAPb,EAOyB,UAPzB,EAOqC,UAPrC,EAQX,UARW,EAQC,UARD,EAQa,UARb,EAQyB,UARzB,EAQqC,UARrC,EASX,UATW,EASC,UATD,EASa,UATb,EASyB,UATzB,EASqC,UATrC,EAUX,UAVW,EAUC,UAVD,EAUa,UAVb,EAUyB,UAVzB,EAUqC,UAVrC,EAWX,UAXW,EAWC,UAXD,EAWa,UAXb,EAWyB,UAXzB,EAWqC,UAXrC,EAYX,UAZW,EAYC,UAZD,EAYa,UAZb,EAYyB,UAZzB,EAYqC,UAZrC,EAaX,UAbW,EAaC,UAbD,EAaa,UAbb,EAayB,UAbzB,EAaqC,UAbrC,EAcX,UAdW,EAcC,UAdD,EAca,UAdb,EAcyB,UAdzB,EAcqC,UAdrC,EAeX,UAfW,EAeC,UAfD,EAea,UAfb,EAeyB,UAfzB,EAeqC,UAfrC,EAgBX,UAhBW,EAgBC,UAhBD,EAgBa,UAhBb,EAgByB,UAhBzB,EAgBqC,UAhBrC,EAiBX,UAjBW,EAiBC,UAjBD,EAiBa,UAjBb,EAiByB,UAjBzB,EAiBqC,UAjBrC,EAkBX,UAlBW,EAkBC,UAlBD,EAkBa,UAlBb,EAkByB,UAlBzB,EAkBqC,UAlBrC,EAmBX,UAnBW,EAmBC,UAnBD,EAmBa,UAnBb,EAmByB,UAnBzB,EAmBqC,UAnBrC,EAoBX,UApBW,EAoBC,UApBD,EAoBa,UApBb,EAoByB,UApBzB,EAoBqC,UApBrC,EAqBX,UArBW,EAqBC,UArBD,EAqBa,UArBb,EAqByB,UArBzB,EAqBqC,UArBrC,EAsBX,UAtBW,EAsBC,UAtBD,EAsBa,UAtBb,EAsByB,UAtBzB,EAsBqC,UAtBrC,EAuBX,UAvBW,EAuBC,UAvBD,EAuBa,UAvBb,EAuByB,UAvBzB,EAuBqC,UAvBrC,EAwBX,UAxBW,EAwBC,UAxBD,EAwBa,UAxBb,EAwByB,UAxBzB,EAwBqC,UAxBrC,EAyBX,UAzBW,EAyBC,UAzBD,EAyBa,UAzBb,EAyByB,UAzBzB,EAyBqC,UAzBrC,EA0BX,UA1BW,EA0BC,UA1BD,EA0Ba,UA1Bb,EA0ByB,UA1BzB,EA0BqC,UA1BrC,EA2BX,UA3BW,EA2BC,UA3BD,EA2Ba,UA3Bb,EA2ByB,UA3BzB,EA2BqC,UA3BrC,EA4BX,UA5BW,EA4BC,UA5BD,EA4Ba,UA5Bb,EA4ByB,UA5BzB,EA4BqC,UA5BrC,EA6BX,UA7BW,EA6BC,UA7BD,EA6Ba,UA7Bb,EA6ByB,UA7BzB,EA6BqC,UA7BrC,EA8BX,UA9BW,EA8BC,UA9BD,EA8Ba,UA9Bb,EA8ByB,UA9BzB,EA8BqC,UA9BrC,EA+BX,UA/BW,EA+BC,UA/BD,EA+Ba,UA/Bb,EA+ByB,UA/BzB,EA+BqC,UA/BrC,EAgCX,UAhCW,EAgCC,UAhCD,EAgCa,UAhCb,EAgCyB,UAhCzB,EAgCqC,UAhCrC,EAiCX,UAjCW,EAiCC,UAjCD,EAiCa,UAjCb,EAiCyB,UAjCzB,EAiCqC,UAjCrC,EAkCX,UAlCW,EAkCC,UAlCD,EAkCa,UAlCb,EAkCyB,UAlCzB,EAkCqC,UAlCrC,EAmCX,UAnCW,EAmCC,UAnCD,EAmCa,UAnCb,EAmCyB,UAnCzB,EAmCqC,UAnCrC,EAoCX,UApCW,EAoCC,UApCD,EAoCa,UApCb,EAoCyB,UApCzB,EAoCqC,UApCrC,EAqCX,UArCW,EAqCC,UArCD,EAqCa,UArCb,EAqCyB,UArCzB,EAqCqC,UArCrC,EAsCX,UAtCW,EAsCC,UAtCD,EAsCa,UAtCb,EAsCyB,UAtCzB,EAsCqC,UAtCrC,EAuCX,UAvCW,EAuCC,UAvCD,EAuCa,UAvCb,EAuCyB,UAvCzB,EAuCqC,UAvCrC,EAwCX,UAxCW,EAwCC,UAxCD,EAwCa,UAxCb,EAwCyB,UAxCzB,EAwCqC,UAxCrC,EAyCX,UAzCW,EAyCC,UAzCD,EAyCa,UAzCb,EAyCyB,UAzCzB,EAyCqC,UAzCrC,EA0CX,UA1CW,EA0CC,UA1CD,EA0Ca,UA1Cb,EA0CyB,UA1CzB,EA0CqC,UA1CrC,EA2CX,UA3CW,EA2CC,UA3CD,EA2Ca,UA3Cb,EA2CyB,UA3CzB,EA2CqC,UA3CrC,EA4CX,UA5CW,EA4CC,UA5CD,EA4Ca,UA5Cb,EA4CyB,UA5CzB,EA4CqC,UA5CrC,EA6CX,UA7CW,EA6CC,UA7CD,EA6Ca,UA7Cb,EA6CyB,UA7CzB,EA6CqC,UA7CrC,EA8CX,UA9CW,EA8CC,UA9CD,EA8Ca,UA9Cb,EA8CyB,UA9CzB,EA8CqC,UA9CrC,EA+CX,UA/CW,EA+CC,UA/CD,EA+Ca,UA/Cb,EA+CyB,UA/CzB,EA+CqC,UA/CrC,EAgDX,UAhDW,EAgDC,UAhDD,EAgDa,UAhDb,EAgDyB,UAhDzB,EAgDqC,UAhDrC,EAiDX,UAjDW,EAiDC,UAjDD,EAiDa,UAjDb,EAiDyB,UAjDzB,EAiDqC,UAjDrC,EAkDX,UAlDW,EAkDC,UAlDD,EAkDa,UAlDb,EAkDyB,UAlDzB,EAkDqC,UAlDrC,EAmDX,UAnDW,EAmDC,UAnDD,EAmDa,UAnDb,EAmDyB,UAnDzB,EAmDqC,UAnDrC,EAoDX,UApDW,CADN;AAuDNvvB,UAAAA,KAAK,EAAE,SAASA,KAAT,CAAezc,IAAf,EAAqB;AAC1B,gBAAIisC,GAAG,GAAGzmC,IAAI,CAACC,MAAL,CAAYumC,UAAtB;AACA,gBAAIE,GAAG,GAAG,IAAI,CAAC,CAAf;;AAEA,gBAAI,OAAOlsC,IAAP,KAAgB,QAApB,EAA8B;AAC5BA,cAAAA,IAAI,GAAGwF,IAAI,CAACpF,MAAL,CAAYgZ,QAAZ,CAAqBpZ,IAArB,CAAP;AACD;;AAED,iBAAK,IAAIpD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoD,IAAI,CAACzC,MAAzB,EAAiCX,CAAC,EAAlC,EAAsC;AACpC,kBAAIO,IAAI,GAAG6C,IAAI,CAAC0b,SAAL,CAAe9e,CAAf,CAAX;AACAsvC,cAAAA,GAAG,GAAIA,GAAG,KAAK,CAAT,GAAcD,GAAG,CAAC,CAACC,GAAG,GAAG/uC,IAAP,IAAe,IAAhB,CAAvB;AACD;;AACD,mBAAO,CAAC+uC,GAAG,GAAG,CAAC,CAAR,MAAe,CAAtB;AACD,WApEK;AAsENlF,UAAAA,IAAI,EAAE,SAASA,IAAT,CAAc3nC,GAAd,EAAmBof,MAAnB,EAA2Btd,MAA3B,EAAmCgO,EAAnC,EAAuC;AAC3C,gBAAI,CAAChO,MAAL,EAAaA,MAAM,GAAG,QAAT;;AACb,gBAAIA,MAAM,KAAK,QAAf,EAAyB;AAAEA,cAAAA,MAAM,GAAGuF,SAAT;AAAqB;;AAChD,gBAAI,CAACyI,EAAL,EAASA,EAAE,GAAG,QAAL;AACT,gBAAI,OAAOsP,MAAP,KAAkB,QAAtB,EAAgCA,MAAM,GAAGjZ,IAAI,CAACpF,MAAL,CAAYgZ,QAAZ,CAAqBqF,MAArB,CAAT;AAChC,mBAAOjZ,IAAI,CAACC,MAAL,CAAYC,GAAZ,CAAgBtG,UAAhB,CAA2B+P,EAA3B,EAA+B9P,GAA/B,EAAoC2B,MAApC,CAA2Cyd,MAA3C,EAAmDtd,MAAnD,CAA0DA,MAA1D,CAAP;AACD,WA5EK;AA8ENgrC,UAAAA,GAAG,EAAE,SAASA,GAAT,CAAansC,IAAb,EAAmBmB,MAAnB,EAA2B6F,QAA3B,EAAqC;AACxC,mBAAOxB,IAAI,CAACC,MAAL,CAAY/E,IAAZ,CAAiB,KAAjB,EAAwBV,IAAxB,EAA8BmB,MAA9B,EAAsC6F,QAAtC,CAAP;AACD,WAhFK;AAkFN6gC,UAAAA,MAAM,EAAE,SAASA,MAAT,CAAgB7nC,IAAhB,EAAsBmB,MAAtB,EAA8B6F,QAA9B,EAAwC;AAC9C,mBAAOxB,IAAI,CAACC,MAAL,CAAY/E,IAAZ,CAAiB,QAAjB,EAA2BV,IAA3B,EAAiCmB,MAAjC,EAAyC6F,QAAzC,CAAP;AACD,WApFK;AAsFNtG,UAAAA,IAAI,EAAE,UAASsnC,SAAT,EAAoBhoC,IAApB,EAA0BmB,MAA1B,EAAkC6F,QAAlC,EAA4C;AAChD,gBAAItG,IAAI,GAAG8E,IAAI,CAACC,MAAL,CAAYxG,UAAZ,CAAuB+oC,SAAvB,CAAX;;AACA,gBAAI,CAAC7mC,MAAL,EAAa;AAAEA,cAAAA,MAAM,GAAG,QAAT;AAAoB;;AACnC,gBAAIA,MAAM,KAAK,QAAf,EAAyB;AAAEA,cAAAA,MAAM,GAAGuF,SAAT;AAAqB;;AAChD,gBAAI,OAAO1G,IAAP,KAAgB,QAApB,EAA8BA,IAAI,GAAGwF,IAAI,CAACpF,MAAL,CAAYgZ,QAAZ,CAAqBpZ,IAArB,CAAP;AAC9B,gBAAIosC,OAAO,GAAG5mC,IAAI,CAAC6mC,YAAL,CAAkBrsC,IAAlB,CAAd;AACA,gBAAIuZ,QAAQ,GAAG/T,IAAI,CAACjG,MAAL,CAAYga,QAAZ,CAAqBvZ,IAArB,CAAf,CANgD,CAOhD;;AACA,gBAAIwF,IAAI,CAACQ,SAAL,MAAoB,OAAOxG,WAAP,KAAuB,WAA3C,IAA0DQ,IAA1D,IAAkEA,IAAI,CAACI,MAAL,YAAuBZ,WAA7F,EAA0G+Z,QAAQ,GAAG,IAAX;;AAE1G,gBAAIvS,QAAQ,IAAI,OAAOhH,IAAP,KAAgB,QAA5B,IACA,OAAOA,IAAI,CAACogB,EAAZ,KAAmB,UADnB,IACiC,CAAC7G,QADtC,EACgD;AAC9CvZ,cAAAA,IAAI,CAACogB,EAAL,CAAQ,MAAR,EAAgB,UAAS+B,KAAT,EAAgB;AAAEzhB,gBAAAA,IAAI,CAACM,MAAL,CAAYmhB,KAAZ;AAAqB,eAAvD;AACAniB,cAAAA,IAAI,CAACogB,EAAL,CAAQ,OAAR,EAAiB,UAASjZ,GAAT,EAAc;AAAEH,gBAAAA,QAAQ,CAACG,GAAD,CAAR;AAAgB,eAAjD;AACAnH,cAAAA,IAAI,CAACogB,EAAL,CAAQ,KAAR,EAAe,YAAW;AAAEpZ,gBAAAA,QAAQ,CAAC,IAAD,EAAOtG,IAAI,CAACS,MAAL,CAAYA,MAAZ,CAAP,CAAR;AAAsC,eAAlE;AACD,aALD,MAKO,IAAI6F,QAAQ,IAAIolC,OAAZ,IAAuB,CAAC7yB,QAAxB,IACA,OAAO+yB,UAAP,KAAsB,WAD1B,EACuC;AAC5C;AACA,kBAAIx5B,KAAK,GAAG,CAAZ;AAAA,kBAAeq4B,IAAI,GAAG,OAAO,GAA7B;AACA,kBAAIoB,MAAM,GAAG,IAAID,UAAJ,EAAb;;AACAC,cAAAA,MAAM,CAACC,OAAP,GAAiB,YAAW;AAC1BxlC,gBAAAA,QAAQ,CAAC,IAAI9J,KAAJ,CAAU,sBAAV,CAAD,CAAR;AACD,eAFD;;AAGAqvC,cAAAA,MAAM,CAACE,MAAP,GAAgB,YAAW;AACzB,oBAAIjd,GAAG,GAAG,IAAIhqB,IAAI,CAACjG,MAAT,CAAgB,IAAIY,UAAJ,CAAeosC,MAAM,CAACr4B,MAAtB,CAAhB,CAAV;AACAxT,gBAAAA,IAAI,CAACM,MAAL,CAAYwuB,GAAZ;AACA1c,gBAAAA,KAAK,IAAI0c,GAAG,CAACjyB,MAAb;;AACAgvC,gBAAAA,MAAM,CAACG,gBAAP;AACD,eALD;;AAMAH,cAAAA,MAAM,CAACG,gBAAP,GAA0B,YAAW;AACnC,oBAAI55B,KAAK,IAAI9S,IAAI,CAACmrC,IAAlB,EAAwB;AACtBnkC,kBAAAA,QAAQ,CAAC,IAAD,EAAOtG,IAAI,CAACS,MAAL,CAAYA,MAAZ,CAAP,CAAR;AACA;AACD;;AAED,oBAAIwrC,IAAI,GAAG75B,KAAK,GAAGq4B,IAAnB;AACA,oBAAIwB,IAAI,GAAG3sC,IAAI,CAACmrC,IAAhB,EAAsBwB,IAAI,GAAG3sC,IAAI,CAACmrC,IAAZ;AACtBoB,gBAAAA,MAAM,CAACK,iBAAP,CAAyBR,OAAO,CAAC9uC,IAAR,CAAa0C,IAAb,EAAmB8S,KAAnB,EAA0B65B,IAA1B,CAAzB;AACD,eATD;;AAWAJ,cAAAA,MAAM,CAACG,gBAAP;AACD,aA1BM,MA0BA;AACL,kBAAIlnC,IAAI,CAACQ,SAAL,MAAoB,OAAOhG,IAAP,KAAgB,QAApC,IAAgD,CAACuZ,QAArD,EAA+D;AAC7DvZ,gBAAAA,IAAI,GAAG,IAAIwF,IAAI,CAACjG,MAAT,CAAgB,IAAIY,UAAJ,CAAeH,IAAf,CAAhB,CAAP;AACD;;AACD,kBAAIwC,GAAG,GAAG9B,IAAI,CAACM,MAAL,CAAYhB,IAAZ,EAAkBmB,MAAlB,CAAyBA,MAAzB,CAAV;AACA,kBAAI6F,QAAJ,EAAcA,QAAQ,CAAC,IAAD,EAAOxE,GAAP,CAAR;AACd,qBAAOA,GAAP;AACD;AACF,WAvIK;AAyINqqC,UAAAA,KAAK,EAAE,SAASA,KAAT,CAAe7sC,IAAf,EAAqB;AAC1B,gBAAIwC,GAAG,GAAG,EAAV;;AACA,iBAAK,IAAI5F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoD,IAAI,CAACzC,MAAzB,EAAiCX,CAAC,EAAlC,EAAsC;AACpC4F,cAAAA,GAAG,CAAC8I,IAAJ,CAAS,CAAC,MAAMtL,IAAI,CAAC2qC,UAAL,CAAgB/tC,CAAhB,EAAmBkD,QAAnB,CAA4B,EAA5B,CAAP,EAAwCmc,MAAxC,CAA+C,CAAC,CAAhD,EAAmD,CAAnD,CAAT;AACD;;AACD,mBAAOzZ,GAAG,CAAC8P,IAAJ,CAAS,EAAT,CAAP;AACD,WA/IK;AAiJNrT,UAAAA,UAAU,EAAE,SAASA,UAAT,CAAoB+oC,SAApB,EAA+B;AACzC,mBAAOxiC,IAAI,CAACC,MAAL,CAAYC,GAAZ,CAAgBzG,UAAhB,CAA2B+oC,SAA3B,CAAP;AACD;AAnJK,SA1UC;;AAieT;;AAEA;AACA3P,QAAAA,KAAK,EAAE,EApeE;AAseTzxB,QAAAA,IAAI,EAAE,SAASA,IAAT,CAAc6kC,MAAd,EAAsBqB,YAAtB,EAAoC;AACxC,eAAK,IAAIztC,GAAT,IAAgBosC,MAAhB,EAAwB;AACtB,gBAAIxtC,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqCmuC,MAArC,EAA6CpsC,GAA7C,CAAJ,EAAuD;AACrD,kBAAI0tC,GAAG,GAAGD,YAAY,CAACxvC,IAAb,CAAkB,IAAlB,EAAwB+B,GAAxB,EAA6BosC,MAAM,CAACpsC,GAAD,CAAnC,CAAV;AACA,kBAAI0tC,GAAG,KAAKvnC,IAAI,CAAC6yB,KAAjB,EAAwB;AACzB;AACF;AACF,SA7eQ;AA+eTpqB,QAAAA,SAAS,EAAE,SAASA,SAAT,CAAmB++B,KAAnB,EAA0BF,YAA1B,EAAwC;AACjD,eAAK,IAAIG,GAAT,IAAgBD,KAAhB,EAAuB;AACrB,gBAAI/uC,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqC0vC,KAArC,EAA4CC,GAA5C,CAAJ,EAAsD;AACpD,kBAAIF,GAAG,GAAGD,YAAY,CAACxvC,IAAb,CAAkB,IAAlB,EAAwB0vC,KAAK,CAACC,GAAD,CAA7B,EAAoCjzB,QAAQ,CAACizB,GAAD,EAAM,EAAN,CAA5C,CAAV;AACA,kBAAIF,GAAG,KAAKvnC,IAAI,CAAC6yB,KAAjB,EAAwB;AACzB;AACF;AACF,SAtfQ;AAwfTr3B,QAAAA,MAAM,EAAE,SAASA,MAAT,CAAgBksC,IAAhB,EAAsBC,IAAtB,EAA4B;AAClC3nC,UAAAA,IAAI,CAACoB,IAAL,CAAUumC,IAAV,EAAgB,SAAS/J,QAAT,CAAkB/jC,GAAlB,EAAuBm3B,IAAvB,EAA6B;AAC3C0W,YAAAA,IAAI,CAAC7tC,GAAD,CAAJ,GAAYm3B,IAAZ;AACD,WAFD;AAGA,iBAAO0W,IAAP;AACD,SA7fQ;AA+fTlkC,QAAAA,KAAK,EAAE,SAASA,KAAT,CAAekkC,IAAf,EAAqBC,IAArB,EAA2B;AAChC,iBAAO3nC,IAAI,CAACxE,MAAL,CAAYwE,IAAI,CAACsF,IAAL,CAAUoiC,IAAV,CAAZ,EAA6BC,IAA7B,CAAP;AACD,SAjgBQ;AAmgBTriC,QAAAA,IAAI,EAAE,SAASA,IAAT,CAAc2gC,MAAd,EAAsB;AAC1B,cAAIA,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK/kC,SAAlC,EAA6C,OAAO+kC,MAAP;AAC7C,cAAI2B,IAAI,GAAG,EAAX,CAF0B,CAG1B;;AACA,eAAK,IAAI/tC,GAAT,IAAgBosC,MAAhB,EAAwB;AACtB2B,YAAAA,IAAI,CAAC/tC,GAAD,CAAJ,GAAYosC,MAAM,CAACpsC,GAAD,CAAlB;AACD;;AACD,iBAAO+tC,IAAP;AACD,SA3gBQ;AA6gBT/N,QAAAA,OAAO,EAAE,SAASA,OAAT,CAAiB1T,GAAjB,EAAsB;AAC7B,eAAK,IAAI0hB,IAAT,IAAiB1hB,GAAjB,EAAsB;AACpB,gBAAI1tB,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqCquB,GAArC,EAA0C0hB,IAA1C,CAAJ,EAAqD;AACnD,qBAAO,KAAP;AACD;AACF;;AACD,iBAAO,IAAP;AACD,SAphBQ;AAshBThB,QAAAA,YAAY,EAAE,SAASA,YAAT,CAAsB1gB,GAAtB,EAA2B;AACvC,cAAIxc,EAAE,GAAGwc,GAAG,CAAC/Y,KAAJ,IAAa+Y,GAAG,CAAC2hB,WAAjB,IAAgC3hB,GAAG,CAAC4hB,QAA7C;AACA,iBAAO,OAAOp+B,EAAP,KAAc,UAAd,GAA2BA,EAA3B,GAAgC,IAAvC;AACD,SAzhBQ;AA2hBTuiB,QAAAA,MAAM,EAAE,SAASA,MAAT,CAAgB/F,GAAhB,EAAqBvX,IAArB,EAA2B;AACjC;AACA,cAAI,OAAOA,IAAP,KAAgB,UAApB,EAAgCA,IAAI,GAAG5O,IAAI,CAACmsB,QAAL,CAAcvd,IAAd,CAAP;AAChC,iBAAOnW,MAAM,CAAC4B,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+BquB,GAA/B,MAAwC,aAAavX,IAAb,GAAoB,GAAnE;AACD,SA/hBQ;AAiiBTud,QAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkBvd,IAAlB,EAAwB;AAChC,cAAInW,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqC8W,IAArC,EAA2C,MAA3C,CAAJ,EAAwD,OAAOA,IAAI,CAAC5M,IAAZ;AACxD,cAAIgmC,GAAG,GAAGp5B,IAAI,CAACtU,QAAL,EAAV;AACA,cAAI8iB,KAAK,GAAG4qB,GAAG,CAAC5qB,KAAJ,CAAU,qBAAV,CAAZ;AACA,iBAAOA,KAAK,GAAGA,KAAK,CAAC,CAAD,CAAR,GAAc4qB,GAA1B;AACD,SAtiBQ;AAwiBTtsC,QAAAA,KAAK,EAAE,SAASA,KAAT,CAAeiG,GAAf,EAAoBV,OAApB,EAA6B;AAClC,cAAIod,aAAa,GAAG,IAApB;;AACA,cAAI,OAAO1c,GAAG,CAACI,OAAX,KAAuB,QAAvB,IAAmCJ,GAAG,CAACI,OAAJ,KAAgB,EAAvD,EAA2D;AACzD,gBAAI,OAAOd,OAAP,KAAmB,QAAnB,IAAgCA,OAAO,IAAIA,OAAO,CAACc,OAAvD,EAAiE;AAC/Dsc,cAAAA,aAAa,GAAGre,IAAI,CAACsF,IAAL,CAAU3D,GAAV,CAAhB;AACA0c,cAAAA,aAAa,CAACtc,OAAd,GAAwBJ,GAAG,CAACI,OAA5B;AACD;AACF;;AACDJ,UAAAA,GAAG,CAACI,OAAJ,GAAcJ,GAAG,CAACI,OAAJ,IAAe,IAA7B;;AAEA,cAAI,OAAOd,OAAP,KAAmB,QAAvB,EAAiC;AAC/BU,YAAAA,GAAG,CAACI,OAAJ,GAAcd,OAAd;AACD,WAFD,MAEO,IAAI,OAAOA,OAAP,KAAmB,QAAnB,IAA+BA,OAAO,KAAK,IAA/C,EAAqD;AAC1DjB,YAAAA,IAAI,CAACxE,MAAL,CAAYmG,GAAZ,EAAiBV,OAAjB;AACA,gBAAIA,OAAO,CAACc,OAAZ,EACEJ,GAAG,CAACI,OAAJ,GAAcd,OAAO,CAACc,OAAtB;AACF,gBAAId,OAAO,CAACtJ,IAAR,IAAgBsJ,OAAO,CAACe,IAA5B,EACEL,GAAG,CAAChK,IAAJ,GAAWsJ,OAAO,CAACtJ,IAAR,IAAgBsJ,OAAO,CAACe,IAAnC;AACF,gBAAIf,OAAO,CAACgnC,KAAZ,EACEtmC,GAAG,CAACsmC,KAAJ,GAAYhnC,OAAO,CAACgnC,KAApB;AACH;;AAED,cAAI,OAAOxvC,MAAM,CAACC,cAAd,KAAiC,UAArC,EAAiD;AAC/CD,YAAAA,MAAM,CAACC,cAAP,CAAsBiJ,GAAtB,EAA2B,MAA3B,EAAmC;AAACumC,cAAAA,QAAQ,EAAE,IAAX;AAAiBnvC,cAAAA,UAAU,EAAE;AAA7B,aAAnC;AACAN,YAAAA,MAAM,CAACC,cAAP,CAAsBiJ,GAAtB,EAA2B,SAA3B,EAAsC;AAAC5I,cAAAA,UAAU,EAAE;AAAb,aAAtC;AACD;;AAED4I,UAAAA,GAAG,CAACK,IAAJ,GAAWf,OAAO,IAAIA,OAAO,CAACe,IAAnB,IAA2BL,GAAG,CAACK,IAA/B,IAAuCL,GAAG,CAAChK,IAA3C,IAAmD,OAA9D;AACAgK,UAAAA,GAAG,CAACsd,IAAJ,GAAW,IAAI9W,IAAJ,EAAX;AAEA,cAAIkW,aAAJ,EAAmB1c,GAAG,CAAC0c,aAAJ,GAAoBA,aAApB;AAEnB,iBAAO1c,GAAP;AACD,SAzkBQ;;AA2kBT;AACJ;AACA;AACIZ,QAAAA,OAAO,EAAE,SAASA,OAAT,CAAiBonC,KAAjB,EAAwBrK,QAAxB,EAAkC;AACzC,cAAIsK,SAAS,GAAG,IAAhB;;AACA,cAAItK,QAAQ,KAAK58B,SAAjB,EAA4B;AAC1B48B,YAAAA,QAAQ,GAAGqK,KAAX;AACAA,YAAAA,KAAK,GAAG1vC,MAAR;AACA2vC,YAAAA,SAAS,GAAG,EAAZ;AACD,WAJD,MAIO;AACL,gBAAIC,IAAI,GAAG,SAASC,kBAAT,GAA8B,CAAE,CAA3C;;AACAD,YAAAA,IAAI,CAAChuC,SAAL,GAAiB8tC,KAAK,CAAC9tC,SAAvB;AACA+tC,YAAAA,SAAS,GAAG,IAAIC,IAAJ,EAAZ;AACD,WAVwC,CAYzC;;;AACA,cAAIvK,QAAQ,CAAC98B,WAAT,KAAyBvI,MAA7B,EAAqC;AACnCqlC,YAAAA,QAAQ,CAAC98B,WAAT,GAAuB,YAAW;AAChC,kBAAImnC,KAAK,KAAK1vC,MAAd,EAAsB;AACpB,uBAAO0vC,KAAK,CAACjwC,KAAN,CAAY,IAAZ,EAAkBD,SAAlB,CAAP;AACD;AACF,aAJD;AAKD;;AAED6lC,UAAAA,QAAQ,CAAC98B,WAAT,CAAqB3G,SAArB,GAAiC+tC,SAAjC;AACApoC,UAAAA,IAAI,CAACxE,MAAL,CAAYsiC,QAAQ,CAAC98B,WAAT,CAAqB3G,SAAjC,EAA4CyjC,QAA5C;AACAA,UAAAA,QAAQ,CAAC98B,WAAT,CAAqBunC,SAArB,GAAiCJ,KAAjC;AACA,iBAAOrK,QAAQ,CAAC98B,WAAhB;AACD,SAvmBQ;;AAymBT;AACJ;AACA;AACI+0B,QAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACtB,cAAIoS,KAAK,GAAGlwC,SAAS,CAAC,CAAD,CAArB;;AACA,eAAK,IAAIb,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGa,SAAS,CAACF,MAA9B,EAAsCX,CAAC,EAAvC,EAA2C;AACzC;AACA,iBAAK,IAAIywC,IAAT,IAAiB5vC,SAAS,CAACb,CAAD,CAAT,CAAaiD,SAA9B,EAAyC;AACvC,kBAAIsP,EAAE,GAAG1R,SAAS,CAACb,CAAD,CAAT,CAAaiD,SAAb,CAAuBwtC,IAAvB,CAAT;;AACA,kBAAIA,IAAI,KAAK,aAAb,EAA4B;AAC1BM,gBAAAA,KAAK,CAAC9tC,SAAN,CAAgBwtC,IAAhB,IAAwBl+B,EAAxB;AACD;AACF;AACF;;AACD,iBAAOw+B,KAAP;AACD,SAxnBQ;;AA0nBT;AACJ;AACA;AACI5gC,QAAAA,cAAc,EAAE,SAASA,cAAT,CAAwB4e,GAAxB,EAA6BqiB,KAA7B,EAAoC;AAClD,cAAI,OAAO/vC,MAAM,CAACC,cAAd,KAAiC,UAArC,EAAiD;AAEjDsH,UAAAA,IAAI,CAACyI,SAAL,CAAe+/B,KAAf,EAAsB,UAAU3uC,GAAV,EAAe;AACnCpB,YAAAA,MAAM,CAACC,cAAP,CAAsBytB,GAAtB,EAA2BtsB,GAA3B,EAAgC;AAC9Bd,cAAAA,UAAU,EAAE,KADkB;AACXmvC,cAAAA,QAAQ,EAAE,IADC;AACKlvC,cAAAA,YAAY,EAAE;AADnB,aAAhC;AAED,WAHD;AAID,SApoBQ;;AAsoBT;AACJ;AACA;AACIsK,QAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkB6iB,GAAlB,EAAuBnkB,IAAvB,EAA6BV,KAA7B,EAAoCvI,UAApC,EAAgD0vC,OAAhD,EAAyD;AACjE,cAAIC,IAAI,GAAG;AACT1vC,YAAAA,YAAY,EAAE,IADL;AAETD,YAAAA,UAAU,EAAEA,UAAU,KAAKmI,SAAf,GAA2BnI,UAA3B,GAAwC;AAF3C,WAAX;;AAIA,cAAI,OAAOuI,KAAP,KAAiB,UAAjB,IAA+B,CAACmnC,OAApC,EAA6C;AAC3CC,YAAAA,IAAI,CAAC/vC,GAAL,GAAW2I,KAAX;AACD,WAFD,MAGK;AACHonC,YAAAA,IAAI,CAACpnC,KAAL,GAAaA,KAAb;AAAoBonC,YAAAA,IAAI,CAACR,QAAL,GAAgB,IAAhB;AACrB;;AAEDzvC,UAAAA,MAAM,CAACC,cAAP,CAAsBytB,GAAtB,EAA2BnkB,IAA3B,EAAiC0mC,IAAjC;AACD,SAtpBQ;;AAwpBT;AACJ;AACA;AACIphC,QAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0B6e,GAA1B,EAA+BnkB,IAA/B,EAAqCrJ,GAArC,EAA0CI,UAA1C,EAAsD;AACtE,cAAI4vC,WAAW,GAAG,IAAlB,CADsE,CAGtE;;AACA3oC,UAAAA,IAAI,CAACsD,QAAL,CAAc6iB,GAAd,EAAmBnkB,IAAnB,EAAyB,YAAW;AAClC,gBAAI2mC,WAAW,KAAK,IAApB,EAA0B;AACxBA,cAAAA,WAAW,GAAGhwC,GAAG,EAAjB;AACD;;AACD,mBAAOgwC,WAAP;AACD,WALD,EAKG5vC,UALH;AAMD,SArqBQ;;AAuqBT;AACJ;AACA;AACA;AACA;AACA;AACA;AACI6vC,QAAAA,kBAAkB,EAAE,SAASA,kBAAT,CAA4BvuB,IAA5B,EAAkC;AACpD,cAAI9C,GAAG,GAAG8C,IAAI,CAACjM,OAAf;AACA,cAAIuM,aAAa,GAAGpD,GAAG,CAAC3N,SAAxB;AACA,cAAIA,SAAS,GAAG2N,GAAG,CAAC7N,OAAJ,CAAY2E,GAAZ,CAAgBC,UAAhB,CAA2BqM,aAA3B,CAAhB;AACA,cAAIvF,MAAM,GAAGxL,SAAS,CAACwL,MAAvB;;AACA,cAAIA,MAAM,CAACuQ,OAAP,IAAkB,CAAC/b,SAAS,CAACuR,cAAjC,EAAiD;AAC/C,gBAAIpC,aAAa,GAAG3D,MAAM,CAACrG,OAAP,CAAeqG,MAAM,CAACuQ,OAAtB,CAApB;AACA,gBAAIkjB,eAAe,GAAGxuB,IAAI,CAAC7f,IAAL,CAAU4a,MAAM,CAACuQ,OAAjB,CAAtB;;AACA,gBAAI5M,aAAa,CAACnK,IAAd,KAAuB,WAA3B,EAAwC;AACtC5O,cAAAA,IAAI,CAACoB,IAAL,CAAUynC,eAAV,EAA2B,UAAShvC,GAAT,EAAcyH,KAAd,EAAqB;AAC9CtB,gBAAAA,IAAI,CAACsD,QAAL,CAAc+W,IAAI,CAAC7f,IAAnB,EAAyBX,GAAzB,EAA8ByH,KAA9B,EAAqC,KAArC;AACD,eAFD;AAGD;AACF;AACF,SA5rBQ;;AA8rBT;AACJ;AACA;AACA;AACA;AACIsX,QAAAA,aAAa,EAAE,SAASA,aAAT,CAAuBrF,IAAvB,EAA6BzC,IAA7B,EAAmC;AAChD,cAAI9Q,IAAI,CAACS,MAAL,EAAJ,EAAmB;AACjB,gBAAI8rB,MAAM,GAAGvsB,IAAI,CAAC0a,MAAL,CAAY6R,MAAzB;;AACA,gBAAIuc,EAAE,GAAGvxC,OAAO,CAAC,IAAD,CAAhB;;AACA,gBAAI,OAAOg1B,MAAP,KAAkB,UAAlB,IAAgChZ,IAAI,YAAYgZ,MAApD,EAA4D;AAC1D,kBAAI,OAAOhZ,IAAI,CAAC5Q,IAAZ,KAAqB,QAAzB,EAAmC;AAAE;AACnC,oBAAIomC,QAAQ,GAAG,EAAf;;AACA,oBAAI,OAAOx1B,IAAI,CAACy1B,KAAZ,KAAsB,QAA1B,EAAoC;AAClCD,kBAAAA,QAAQ,CAACC,KAAT,GAAiBz1B,IAAI,CAACy1B,KAAtB;AACD;;AACD,oBAAI,OAAOz1B,IAAI,CAACmhB,GAAZ,KAAoB,QAAxB,EAAkC;AAChCqU,kBAAAA,QAAQ,CAACrU,GAAT,GAAenhB,IAAI,CAACmhB,GAApB;AACD;;AACDnhB,gBAAAA,IAAI,GAAGu1B,EAAE,CAAClV,gBAAH,CAAoBrgB,IAAI,CAAC5Q,IAAzB,EAA+BomC,QAA/B,CAAP;AACD,eATD,MASO;AAAE;AACP,uBAAOj4B,IAAI,CAAC,IAAIpZ,KAAJ,CAAU,iCACA,0BADV,CAAD,CAAX;AAED;AACF;AACF;;AAEDsI,UAAAA,IAAI,CAACC,MAAL,CAAYoiC,MAAZ,CAAmB9uB,IAAnB,EAAyB,KAAzB,EAAgC,UAAS5R,GAAT,EAAckX,GAAd,EAAmB;AACjD,gBAAIlX,GAAJ,EAASmP,IAAI,CAACnP,GAAD,CAAJ,CAAT,KACKmP,IAAI,CAAC,IAAD,EAAO+H,GAAP,CAAJ;AACN,WAHD;AAID,SA5tBQ;;AA8tBT;AACJ;AACA;AACI2D,QAAAA,aAAa,EAAE,SAASA,aAAT,CAAuBD,UAAvB,EAAmC;AAChD,cAAIA,UAAJ,EAAgB;AACdvc,YAAAA,IAAI,CAACsD,QAAL,CAAcnL,GAAG,CAAC+N,MAAlB,EAA0B,eAA1B,EACEpJ,IAAI,CAACqX,GAAL,CAAS,IAAIhM,IAAJ,GAAWF,OAAX,KAAuBsU,UAAhC,KAA+C,MADjD,EACyD,KADzD;AAEA,mBAAOpkB,GAAG,CAAC+N,MAAJ,CAAWsW,aAAlB;AACD;AACF,SAvuBQ;AAyuBTC,QAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0BF,UAA1B,EAAsC;AACtD,cAAIA,UAAJ,EACEpkB,GAAG,CAAC+N,MAAJ,CAAWtB,iBAAX,GAA+B2X,UAAU,GAAG,IAAIpU,IAAJ,GAAWF,OAAX,EAA5C;AACH,SA5uBQ;;AA8uBT;AACJ;AACA;AACIiW,QAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0B7D,IAA1B,EAAgC;AAChD,cAAI2T,SAAS,GAAG3T,IAAI,CAAC5I,YAAL,CAAkBF,OAAlB,CAA0B,kBAA1B,KACC8I,IAAI,CAAC5I,YAAL,CAAkBF,OAAlB,CAA0B,kBAA1B,CADjB;;AAGA,cAAI,CAACyc,SAAD,IAAc3T,IAAI,CAAC7f,IAAnB,IAA2B6f,IAAI,CAAC7f,IAAL,CAAUyuC,gBAAzC,EAA2D;AACzDjb,YAAAA,SAAS,GAAG3T,IAAI,CAAC7f,IAAL,CAAUyuC,gBAAV,CAA2BC,SAAvC;AACD;;AAED,cAAIlb,SAAJ,EAAe;AACb3T,YAAAA,IAAI,CAAC2T,SAAL,GAAiBA,SAAjB;AACD;;AAED,cAAI3T,IAAI,CAAC3e,KAAT,EAAgB;AACd2e,YAAAA,IAAI,CAAC3e,KAAL,CAAWsyB,SAAX,GAAuBA,SAAvB;AACD;AACF,SAhwBQ;;AAkwBT;AACJ;AACA;AACIhoB,QAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBL,YAArB,EAAmCiD,iBAAnC,EAAsD;AACjE,cAAIugC,cAAc,GAAG,KAArB;;AACA,cAAIvgC,iBAAiB,KAAK1H,SAAtB,IAAmC/I,GAAnC,IAA0CA,GAAG,CAAC+N,MAAlD,EAA0D;AACxD0C,YAAAA,iBAAiB,GAAGzQ,GAAG,CAAC+N,MAAJ,CAAWD,qBAAX,EAApB;AACD;;AACD,cAAI2C,iBAAiB,KAAK1H,SAAtB,IAAmC,OAAOwE,OAAP,KAAmB,WAA1D,EAAuE;AACrEkD,YAAAA,iBAAiB,GAAGlD,OAApB;AACD;;AACD,cAAI,OAAOkD,iBAAP,KAA6B,UAAjC,EAA6CugC,cAAc,GAAG,IAAjB;AAC7C,cAAI,CAAChe,KAAK,CAAC6D,OAAN,CAAcrpB,YAAd,CAAL,EAAkCA,YAAY,GAAG,CAACA,YAAD,CAAf;;AAElC,eAAK,IAAIqxB,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGrxB,YAAY,CAAC5N,MAArC,EAA6Ci/B,GAAG,EAAhD,EAAoD;AAClD,gBAAIh2B,WAAW,GAAG2E,YAAY,CAACqxB,GAAD,CAA9B;;AACA,gBAAImS,cAAJ,EAAoB;AAClB,kBAAInoC,WAAW,CAACgI,uBAAhB,EAAyC;AACvChI,gBAAAA,WAAW,CAACgI,uBAAZ;AACD;AACF,aAJD,MAIO,IAAIhI,WAAW,CAAC2H,kBAAhB,EAAoC;AACzC3H,cAAAA,WAAW,CAAC2H,kBAAZ,CAA+BC,iBAA/B;AACD;AACF;AACF,SA1xBQ;;AA4xBT;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACIE,QAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBsgC,UAAzB,EAAqCxgC,iBAArC,EAAwD;AACvE,iBAAO,SAASitB,OAAT,GAAmB;AACxB,gBAAIp0B,IAAI,GAAG,IAAX;AACA,gBAAIwzB,IAAI,GAAG9J,KAAK,CAAC9wB,SAAN,CAAgB+S,KAAhB,CAAsBtV,IAAtB,CAA2BG,SAA3B,CAAX;AACA,mBAAO,IAAI2Q,iBAAJ,CAAsB,UAAStG,OAAT,EAAkBwzB,MAAlB,EAA0B;AACrDb,cAAAA,IAAI,CAACnvB,IAAL,CAAU,UAASnE,GAAT,EAAcnH,IAAd,EAAoB;AAC5B,oBAAImH,GAAJ,EAAS;AACPm0B,kBAAAA,MAAM,CAACn0B,GAAD,CAAN;AACD,iBAFD,MAEO;AACLW,kBAAAA,OAAO,CAAC9H,IAAD,CAAP;AACD;AACF,eAND;AAOAiH,cAAAA,IAAI,CAAC2nC,UAAD,CAAJ,CAAiBlxC,KAAjB,CAAuBuJ,IAAvB,EAA6BwzB,IAA7B;AACD,aATM,CAAP;AAUD,WAbD;AAcD,SAnzBQ;;AAqzBT;AACJ;AACA;AACI5D,QAAAA,oBAAoB,EAAE,SAASA,oBAAT,CAA8B3nB,OAA9B,EAAuC;AAC3D,cAAI,CAACA,OAAL,EAAc,OAAO,KAAP;;AACd,cAAIqa,QAAQ,GAAGxsB,OAAO,CAAC,uBAAD,CAAtB;;AACA,cAAI,OAAOmS,OAAP,KAAmB,QAAvB,EAAiCA,OAAO,GAAGA,OAAO,CAACqI,iBAAlB;AACjC,cAAI,OAAOrI,OAAP,KAAmB,QAAnB,IAA+B,CAACqa,QAAQ,CAAC3qB,cAAT,CAAwBsQ,OAAxB,CAApC,EAAsE,OAAO,KAAP;AACtE,iBAAO,CAAC,CAACqa,QAAQ,CAACra,OAAD,CAAR,CAAkB2/B,kBAA3B;AACD,SA9zBQ;;AAg0BT;AACJ;AACA;AACIjM,QAAAA,mBAAmB,EAAE,SAASA,mBAAT,CAA6B5jB,UAA7B,EAAyCzU,iBAAzC,EAA4D;AAC/E,cAAI,CAACA,iBAAL,EAAwBA,iBAAiB,GAAG,EAApB;AACxB,cAAIukC,aAAa,GAAGvkC,iBAAiB,CAACukC,aAAlB,IAAmC,IAAvD;;AACA,cAAI,OAAOA,aAAP,KAAyB,UAA7B,EAAyC;AACvC,mBAAOA,aAAa,CAAC9vB,UAAD,CAApB;AACD;;AACD,cAAI+vB,IAAI,GAAG,OAAOxkC,iBAAiB,CAACwkC,IAAzB,KAAkC,QAAlC,GAA6CxkC,iBAAiB,CAACwkC,IAA/D,GAAsE,GAAjF;AACA,cAAIzrB,KAAK,GAAGhhB,IAAI,CAAC0sC,MAAL,MAAiB1sC,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAYwb,UAAZ,IAA0B+vB,IAA3C,CAAZ;AACA,iBAAOzrB,KAAP;AACD,SA50BQ;;AA80BT;AACJ;AACA;AACI2rB,QAAAA,wBAAwB,EAAE,SAASA,wBAAT,CAAkC75B,WAAlC,EAA+C3O,OAA/C,EAAwDyoC,EAAxD,EAA4D;AACpF,cAAI,CAACzoC,OAAL,EAAcA,OAAO,GAAG,EAAV;AACd,cAAI8a,IAAI,GAAG5jB,GAAG,CAAC8iB,UAAJ,CAAee,WAAf,EAAX;AACA,cAAIlY,WAAW,GAAG7C,OAAO,CAAC6C,WAAR,IAAuB,EAAzC;AACA,cAAI0V,UAAU,GAAG,CAAjB;;AAEA,cAAI+H,WAAW,GAAG,UAAS5f,GAAT,EAAc;AAC9B,gBAAIqC,UAAU,GAAG/C,OAAO,CAAC+C,UAAR,IAAsB,CAAvC;AACA,gBAAIrC,GAAG,IAAIA,GAAG,CAAChK,IAAJ,KAAa,cAAxB,EAAwCgK,GAAG,CAACuP,SAAJ,GAAgB,IAAhB;;AACxC,gBAAIvP,GAAG,IAAIA,GAAG,CAACuP,SAAX,IAAwBsI,UAAU,GAAGxV,UAAzC,EAAqD;AACnDwV,cAAAA,UAAU;AACV,kBAAIsE,KAAK,GAAG9d,IAAI,CAACo9B,mBAAL,CAAyB5jB,UAAzB,EAAqCvY,OAAO,CAAC8D,iBAA7C,CAAZ;AACAiZ,cAAAA,UAAU,CAAC2rB,WAAD,EAAc7rB,KAAK,IAAInc,GAAG,CAACioC,UAAJ,IAAkB,CAAtB,CAAnB,CAAV;AACD,aAJD,MAIO;AACLF,cAAAA,EAAE,CAAC/nC,GAAD,CAAF;AACD;AACF,WAVD;;AAYA,cAAIgoC,WAAW,GAAG,YAAW;AAC3B,gBAAInvC,IAAI,GAAG,EAAX;AACAuhB,YAAAA,IAAI,CAACE,aAAL,CAAmBrM,WAAnB,EAAgC9L,WAAhC,EAA6C,UAAS2N,YAAT,EAAuB;AAClEA,cAAAA,YAAY,CAACmJ,EAAb,CAAgB,MAAhB,EAAwB,UAAS+B,KAAT,EAAgB;AAAEniB,gBAAAA,IAAI,IAAImiB,KAAK,CAACriB,QAAN,EAAR;AAA2B,eAArE;AACAmX,cAAAA,YAAY,CAACmJ,EAAb,CAAgB,KAAhB,EAAuB,YAAW;AAChC,oBAAIlJ,UAAU,GAAGD,YAAY,CAACC,UAA9B;;AACA,oBAAIA,UAAU,GAAG,GAAjB,EAAsB;AACpBg4B,kBAAAA,EAAE,CAAC,IAAD,EAAOlvC,IAAP,CAAF;AACD,iBAFD,MAEO;AACL,sBAAIovC,UAAU,GAAGp1B,QAAQ,CAAC/C,YAAY,CAACF,OAAb,CAAqB,aAArB,CAAD,EAAsC,EAAtC,CAAR,GAAoD,IAApD,IAA4D,CAA7E;AACA,sBAAI5P,GAAG,GAAG3B,IAAI,CAACtE,KAAL,CAAW,IAAIhE,KAAJ,EAAX,EACR;AAAEwZ,oBAAAA,SAAS,EAAEQ,UAAU,IAAI,GAAd,IAAqBA,UAAU,KAAK;AAAjD,mBADQ,CAAV;AAGA,sBAAIk4B,UAAU,IAAIjoC,GAAG,CAACuP,SAAtB,EAAiCvP,GAAG,CAACioC,UAAJ,GAAiBA,UAAjB;AACjCroB,kBAAAA,WAAW,CAAC5f,GAAD,CAAX;AACD;AACF,eAZD;AAaD,aAfD,EAeG4f,WAfH;AAgBD,WAlBD;;AAoBAppB,UAAAA,GAAG,CAAC6H,IAAJ,CAAS0I,KAAT,CAAeihC,WAAf;AACD,SAx3BQ;;AA03BT;AACJ;AACA;AACIzxB,QAAAA,IAAI,EAAE;AACJC,UAAAA,EAAE,EAAE,SAAS0xB,MAAT,GAAkB;AACpB,mBAAOtyC,OAAO,CAAC,MAAD,CAAP,CAAgB4gB,EAAhB,EAAP;AACD;AAHG,SA73BG;;AAm4BT;AACJ;AACA;AACI2xB,QAAAA,sBAAsB,EAAE,SAASA,sBAAT,CAAgCzvB,IAAhC,EAAsC;AAC5D,cAAI9C,GAAG,GAAG8C,IAAI,CAACjM,OAAf;AACA,cAAIxE,SAAS,GAAG2N,GAAG,CAAC3N,SAApB;AACA,cAAIwO,KAAK,GAAGb,GAAG,CAAC7N,OAAJ,CAAY2E,GAAZ,CAAgBC,UAAhB,CAA2B1E,SAA3B,EAAsCwL,MAAtC,IAAgD,EAA5D;;AACA,cAAIgD,KAAK,CAACuN,OAAN,IAAiBtL,IAAI,CAAC7f,IAAL,CAAU4d,KAAK,CAACuN,OAAhB,CAArB,EAA+C;AAC7CtL,YAAAA,IAAI,CAAC7f,IAAL,CAAU4d,KAAK,CAACuN,OAAhB,IAA2BtL,IAAI,CAAC7f,IAAL,CAAU4d,KAAK,CAACuN,OAAhB,EAAyBrrB,QAAzB,EAA3B;AACD;AACF,SA74BQ;;AA+4BT;AACJ;AACA;AACIoO,QAAAA,KAAK,EAAE,SAASA,KAAT,CAAelH,QAAf,EAAyB;AAC9B,cAAI,OAAOzB,OAAP,KAAmB,QAAnB,IAA+B,OAAOA,OAAO,CAACg0B,QAAf,KAA4B,UAA/D,EAA2E;AACzEh0B,YAAAA,OAAO,CAACg0B,QAAR,CAAiBvyB,QAAjB;AACD,WAFD,MAEO,IAAI,OAAOkjC,YAAP,KAAwB,UAA5B,EAAwC;AAC7CA,YAAAA,YAAY,CAACljC,QAAD,CAAZ;AACD,WAFM,MAEA;AACLwc,YAAAA,UAAU,CAACxc,QAAD,EAAW,CAAX,CAAV;AACD;AACF,SA15BQ;;AA45BT;AACJ;AACA;AACIwX,QAAAA,sBAAsB,EAAE,SAASA,sBAAT,CAAgCzB,GAAhC,EAAqC;AAC3D,cAAIjJ,UAAU,GAAGiJ,GAAG,CAAC7N,OAAJ,CAAY2E,GAAZ,CAAgBC,UAAjC;AACA,cAAI,CAACA,UAAL,EAAiB,OAAOpN,SAAP;AACjB,cAAI0I,SAAS,GAAG,CAAC0E,UAAU,IAAI,EAAf,EAAmBiJ,GAAG,CAAC3N,SAAvB,CAAhB;AACA,cAAI,CAACA,SAAD,IAAc,CAACA,SAAS,CAAC9N,KAAzB,IAAkC,CAAC8N,SAAS,CAAC9N,KAAV,CAAgB6pB,OAAvD,EAAgE,OAAOzkB,SAAP;AAChE,iBAAO0I,SAAS,CAAC9N,KAAV,CAAgBiT,OAAhB,CAAwBnF,SAAS,CAAC9N,KAAV,CAAgB6pB,OAAxC,CAAP;AACD,SAr6BQ;AAu6BT4Z,QAAAA,2BAA2B,EAAE,SAASA,2BAAT,CAAqCltB,SAArC,EAAgDG,QAAhD,EAA0D;AACrF,cAAI8sB,QAAQ,GAAG,EAAf;AACA,cAAIyK,kBAAkB,GAAG,EAAzB;;AACA,cAAIhqC,OAAO,CAACoS,GAAR,CAAYnS,IAAI,CAACgqC,cAAjB,CAAJ,EAAsC;AACpC,gBAAID,kBAAkB,GAAG13B,SAAS,CAACC,QAAV,CAAmB;AAC1CC,cAAAA,QAAQ,EAAE,IADgC;AAE1CC,cAAAA,QAAQ,EAAEzS,OAAO,CAACoS,GAAR,CAAYnS,IAAI,CAACyS,mBAAjB;AAFgC,aAAnB,CAAzB;AAID;;AACD,cAAIw3B,iBAAiB,GAAG53B,SAAS,CAACC,QAAV,CAAmB;AACzCE,YAAAA,QAAQ,EAAEA,QAAQ,IACfzS,OAAO,CAACoS,GAAR,CAAYnS,IAAI,CAACgqC,cAAjB,KAAoCjqC,OAAO,CAACoS,GAAR,CAAYnS,IAAI,CAACkqC,wBAAjB;AAFE,WAAnB,CAAxB;;AAIA,eAAK,IAAI9yC,CAAC,GAAG,CAAR,EAAW+yC,YAAY,GAAG1xC,MAAM,CAAC4I,IAAP,CAAY0oC,kBAAZ,CAA/B,EAAgE3yC,CAAC,GAAG+yC,YAAY,CAACpyC,MAAjF,EAAyFX,CAAC,EAA1F,EAA8F;AAC5FkoC,YAAAA,QAAQ,CAAC6K,YAAY,CAAC/yC,CAAD,CAAb,CAAR,GAA4B2yC,kBAAkB,CAACI,YAAY,CAAC/yC,CAAD,CAAb,CAA9C;AACD;;AACD,eAAK,IAAIA,CAAC,GAAG,CAAR,EAAW+yC,YAAY,GAAG1xC,MAAM,CAAC4I,IAAP,CAAY4oC,iBAAZ,CAA/B,EAA+D7yC,CAAC,GAAG+yC,YAAY,CAACpyC,MAAhF,EAAwFX,CAAC,EAAzF,EAA6F;AAC3FkoC,YAAAA,QAAQ,CAAC6K,YAAY,CAAC/yC,CAAD,CAAb,CAAR,GAA4B6yC,iBAAiB,CAACE,YAAY,CAAC/yC,CAAD,CAAb,CAA7C;AACD;;AACD,iBAAOkoC,QAAP;AACD,SA37BQ;;AA67BT;AACJ;AACA;AACI1sB,QAAAA,cAAc,EAAE,SAh8BP;;AAk8BT;AACJ;AACA;AACIo3B,QAAAA,cAAc,EAAE,qBAr8BP;;AAu8BT;AACJ;AACA;AACIE,QAAAA,wBAAwB,EAAE,6BA18BjB;;AA48BT;AACJ;AACA;AACIz3B,QAAAA,mBAAmB,EAAE,iBA/8BZ;;AAi9BT;AACJ;AACA;AACI23B,QAAAA,eAAe,EAAE;AAp9BR,OAAX;AAu9BA;AACF;AACA;;AACEpyC,MAAAA,MAAM,CAACH,OAAP,GAAiBmI,IAAjB;AAEC,KA9+BD,EA8+BGlI,IA9+BH,CA8+BQ,IA9+BR,EA8+BaP,OAAO,CAAC,UAAD,CA9+BpB,EA8+BiCA,OAAO,CAAC,QAAD,CAAP,CAAkBmtC,YA9+BnD;AA++BC,GAh/BQ,EAg/BP;AAAC,6BAAwB,CAAzB;AAA2B,cAAS,EAApC;AAAuC,gBAAW,EAAlD;AAAqD,UAAK,EAA1D;AAA6D,cAAS,EAAtE;AAAyE,YAAO;AAAhF,GAh/BO,CAn8Yic;AAm7anX,MAAG,CAAC,UAASntC,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC3H,QAAImI,IAAI,GAAGzI,OAAO,CAAC,SAAD,CAAlB;;AACA,QAAIyP,KAAK,GAAGzP,OAAO,CAAC,gBAAD,CAAnB;;AAEA,aAAS8yC,YAAT,GAAwB,CAAG;;AAE3BA,IAAAA,YAAY,CAAChwC,SAAb,CAAuByI,KAAvB,GAA+B,UAASwnC,GAAT,EAAc37B,KAAd,EAAqB;AAClD,UAAI27B,GAAG,CAAC/lB,OAAJ,CAAY,MAAZ,EAAoB,EAApB,MAA4B,EAAhC,EAAoC,OAAO,EAAP;AAEpC,UAAI7V,MAAJ,EAAYhT,KAAZ;;AACA,UAAI;AACF,YAAIuR,MAAM,CAACs9B,SAAX,EAAsB;AACpB,cAAI;AACF,gBAAI/2B,MAAM,GAAG,IAAI+2B,SAAJ,EAAb;AACA77B,YAAAA,MAAM,GAAG8E,MAAM,CAACg3B,eAAP,CAAuBF,GAAvB,EAA4B,UAA5B,CAAT;AACD,WAHD,CAGE,OAAOG,WAAP,EAAoB;AACpB,kBAAMzqC,IAAI,CAACtE,KAAL,CAAW,IAAIhE,KAAJ,CAAU,yBAAV,CAAX,EACJ;AACE2mB,cAAAA,aAAa,EAAEosB,WADjB;AAEE9yC,cAAAA,IAAI,EAAE,gBAFR;AAGEuZ,cAAAA,SAAS,EAAE;AAHb,aADI,CAAN;AAMD;;AAED,cAAIxC,MAAM,CAACg8B,eAAP,KAA2B,IAA/B,EAAqC;AACnC,kBAAM1qC,IAAI,CAACtE,KAAL,CAAW,IAAIhE,KAAJ,CAAU,8BAAV,CAAX,EACJ;AACEC,cAAAA,IAAI,EAAE,gBADR;AAEEuZ,cAAAA,SAAS,EAAE;AAFb,aADI,CAAN;AAKD;;AAED,cAAIy5B,OAAO,GAAGj8B,MAAM,CAACk8B,oBAAP,CAA4B,aAA5B,EAA2C,CAA3C,CAAd;;AACA,cAAID,OAAO,KAAKA,OAAO,CAACE,UAAR,KAAuBn8B,MAAvB,IACZi8B,OAAO,CAACE,UAAR,CAAmBC,QAAnB,KAAgC,MADpB,IAEZH,OAAO,CAACE,UAAR,CAAmBA,UAAnB,KAAkCn8B,MAFtB,IAGZi8B,OAAO,CAACE,UAAR,CAAmBA,UAAnB,CAA8BC,QAA9B,KAA2C,MAHpC,CAAX,EAGwD;AACtD,gBAAIC,YAAY,GAAGJ,OAAO,CAACC,oBAAR,CAA6B,KAA7B,EAAoC,CAApC,KAA0CD,OAA7D;AACA,kBAAM3qC,IAAI,CAACtE,KAAL,CAAW,IAAIhE,KAAJ,CAAUqzC,YAAY,CAACC,WAAb,IAA4B,0BAAtC,CAAX,EACJ;AACErzC,cAAAA,IAAI,EAAE,gBADR;AAEEuZ,cAAAA,SAAS,EAAE;AAFb,aADI,CAAN;AAKD;AACF,SAjCD,MAiCO,IAAIjE,MAAM,CAACg+B,aAAX,EAA0B;AAC/Bv8B,UAAAA,MAAM,GAAG,IAAIzB,MAAM,CAACg+B,aAAX,CAAyB,kBAAzB,CAAT;AACAv8B,UAAAA,MAAM,CAACw8B,KAAP,GAAe,KAAf;;AAEA,cAAI,CAACx8B,MAAM,CAACy8B,OAAP,CAAeb,GAAf,CAAL,EAA0B;AACxB,kBAAMtqC,IAAI,CAACtE,KAAL,CAAW,IAAIhE,KAAJ,CAAU,yBAAV,CAAX,EACJ;AACEC,cAAAA,IAAI,EAAE,gBADR;AAEEuZ,cAAAA,SAAS,EAAE;AAFb,aADI,CAAN;AAKD;AACF,SAXM,MAWA;AACL,gBAAM,IAAIxZ,KAAJ,CAAU,wBAAV,CAAN;AACD;AACF,OAhDD,CAgDE,OAAOV,CAAP,EAAU;AACV0E,QAAAA,KAAK,GAAG1E,CAAR;AACD;;AAED,UAAI0X,MAAM,IAAIA,MAAM,CAACg8B,eAAjB,IAAoC,CAAChvC,KAAzC,EAAgD;AAC9C,YAAIlB,IAAI,GAAG4wC,QAAQ,CAAC18B,MAAM,CAACg8B,eAAR,EAAyB/7B,KAAzB,CAAnB;AACA,YAAIoV,QAAQ,GAAGsnB,mBAAmB,CAAC38B,MAAM,CAACg8B,eAAR,EAAyB,kBAAzB,CAAlC;;AACA,YAAI3mB,QAAJ,EAAc;AACZvpB,UAAAA,IAAI,CAACyuC,gBAAL,GAAwBmC,QAAQ,CAACrnB,QAAD,EAAW,EAAX,CAAhC;AACD;;AACD,eAAOvpB,IAAP;AACD,OAPD,MAOO,IAAIkB,KAAJ,EAAW;AAChB,cAAMsE,IAAI,CAACtE,KAAL,CAAWA,KAAK,IAAI,IAAIhE,KAAJ,EAApB,EAAiC;AAACC,UAAAA,IAAI,EAAE,gBAAP;AAAyBuZ,UAAAA,SAAS,EAAE;AAApC,SAAjC,CAAN;AACD,OAFM,MAEA;AAAE;AACP,eAAO,EAAP;AACD;AACF,KApED;;AAsEA,aAASm6B,mBAAT,CAA6Bf,GAA7B,EAAkCgB,GAAlC,EAAuC;AACrC,UAAIC,QAAQ,GAAGjB,GAAG,CAACM,oBAAJ,CAAyBU,GAAzB,CAAf;;AACA,WAAK,IAAIl0C,CAAC,GAAG,CAAR,EAAW6gB,IAAI,GAAGszB,QAAQ,CAACxzC,MAAhC,EAAwCX,CAAC,GAAG6gB,IAA5C,EAAkD7gB,CAAC,EAAnD,EAAuD;AACrD,YAAIm0C,QAAQ,CAACn0C,CAAD,CAAR,CAAYyzC,UAAZ,KAA2BP,GAA/B,EAAoC;AAClC,iBAAOiB,QAAQ,CAACn0C,CAAD,CAAf;AACD;AACF;AACF;;AAED,aAASg0C,QAAT,CAAkBd,GAAlB,EAAuB37B,KAAvB,EAA8B;AAC5B,UAAI,CAACA,KAAL,EAAYA,KAAK,GAAG,EAAR;;AACZ,cAAQA,KAAK,CAACC,IAAd;AACE,aAAK,WAAL;AAAkB,iBAAO48B,cAAc,CAAClB,GAAD,EAAM37B,KAAN,CAArB;;AAClB,aAAK,KAAL;AAAY,iBAAO88B,QAAQ,CAACnB,GAAD,EAAM37B,KAAN,CAAf;;AACZ,aAAK,MAAL;AAAa,iBAAO+8B,SAAS,CAACpB,GAAD,EAAM37B,KAAN,CAAhB;;AACb,aAAKzN,SAAL;AAAgB,aAAK,IAAL;AAAW,iBAAOyqC,YAAY,CAACrB,GAAD,CAAnB;;AAC3B;AAAS,iBAAOsB,WAAW,CAACtB,GAAD,EAAM37B,KAAN,CAAlB;AALX;AAOD;;AAED,aAAS68B,cAAT,CAAwBlB,GAAxB,EAA6B37B,KAA7B,EAAoC;AAClC,UAAInU,IAAI,GAAG,EAAX;AACA,UAAI8vC,GAAG,KAAK,IAAZ,EAAkB,OAAO9vC,IAAP;AAElBwF,MAAAA,IAAI,CAACoB,IAAL,CAAUuN,KAAK,CAACI,OAAhB,EAAyB,UAASqX,UAAT,EAAqBtX,WAArB,EAAkC;AACzD,YAAIA,WAAW,CAAC+8B,cAAhB,EAAgC;AAC9B,cAAIpzC,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqCwyC,GAAG,CAACwB,UAAzC,EAAqDh9B,WAAW,CAAC9M,IAAjE,CAAJ,EAA4E;AAC1E,gBAAIV,KAAK,GAAGgpC,GAAG,CAACwB,UAAJ,CAAeh9B,WAAW,CAAC9M,IAA3B,EAAiCV,KAA7C;AACA9G,YAAAA,IAAI,CAAC4rB,UAAD,CAAJ,GAAmBglB,QAAQ,CAAC;AAACJ,cAAAA,WAAW,EAAE1pC;AAAd,aAAD,EAAuBwN,WAAvB,CAA3B;AACD;AACF,SALD,MAKO;AACL,cAAIi9B,QAAQ,GAAGj9B,WAAW,CAACka,SAAZ,GAAwBshB,GAAxB,GACbe,mBAAmB,CAACf,GAAD,EAAMx7B,WAAW,CAAC9M,IAAlB,CADrB;;AAEA,cAAI+pC,QAAJ,EAAc;AACZvxC,YAAAA,IAAI,CAAC4rB,UAAD,CAAJ,GAAmBglB,QAAQ,CAACW,QAAD,EAAWj9B,WAAX,CAA3B;AACD,WAFD,MAEO,IAAI,CAACA,WAAW,CAACka,SAAb,IAA0Bla,WAAW,CAACF,IAAZ,KAAqB,MAAnD,EAA2D;AAChEpU,YAAAA,IAAI,CAAC4rB,UAAD,CAAJ,GAAmBtX,WAAW,CAACvL,YAA/B;AACD;AACF;AACF,OAfD;AAiBA,aAAO/I,IAAP;AACD;;AAED,aAASixC,QAAT,CAAkBnB,GAAlB,EAAuB37B,KAAvB,EAA8B;AAC5B,UAAInU,IAAI,GAAG,EAAX;AACA,UAAIwxC,MAAM,GAAGr9B,KAAK,CAAC9U,GAAN,CAAUmI,IAAV,IAAkB,KAA/B;AACA,UAAIiqC,QAAQ,GAAGt9B,KAAK,CAACrN,KAAN,CAAYU,IAAZ,IAAoB,OAAnC;AACA,UAAIkqC,OAAO,GAAGv9B,KAAK,CAACqa,SAAN,GAAkBra,KAAK,CAAC3M,IAAxB,GAA+B,OAA7C;AAEA,UAAImqC,KAAK,GAAG7B,GAAG,CAAC8B,iBAAhB;;AACA,aAAOD,KAAP,EAAc;AACZ,YAAIA,KAAK,CAACrB,QAAN,KAAmBoB,OAAvB,EAAgC;AAC9B,cAAIryC,GAAG,GAAGwxC,mBAAmB,CAACc,KAAD,EAAQH,MAAR,CAAnB,CAAmChB,WAA7C;AACA,cAAI1pC,KAAK,GAAG+pC,mBAAmB,CAACc,KAAD,EAAQF,QAAR,CAA/B;AACAzxC,UAAAA,IAAI,CAACX,GAAD,CAAJ,GAAYuxC,QAAQ,CAAC9pC,KAAD,EAAQqN,KAAK,CAACrN,KAAd,CAApB;AACD;;AACD6qC,QAAAA,KAAK,GAAGA,KAAK,CAACE,kBAAd;AACD;;AACD,aAAO7xC,IAAP;AACD;;AAED,aAASkxC,SAAT,CAAmBpB,GAAnB,EAAwB37B,KAAxB,EAA+B;AAC7B,UAAInU,IAAI,GAAG,EAAX;AACA,UAAI0xC,OAAO,GAAGv9B,KAAK,CAACqa,SAAN,GAAkBra,KAAK,CAAC3M,IAAxB,GAAgC2M,KAAK,CAACkQ,MAAN,CAAa7c,IAAb,IAAqB,QAAnE;AAEA,UAAImqC,KAAK,GAAG7B,GAAG,CAAC8B,iBAAhB;;AACA,aAAOD,KAAP,EAAc;AACZ,YAAIA,KAAK,CAACrB,QAAN,KAAmBoB,OAAvB,EAAgC;AAC9B1xC,UAAAA,IAAI,CAACsL,IAAL,CAAUslC,QAAQ,CAACe,KAAD,EAAQx9B,KAAK,CAACkQ,MAAd,CAAlB;AACD;;AACDstB,QAAAA,KAAK,GAAGA,KAAK,CAACE,kBAAd;AACD;;AACD,aAAO7xC,IAAP;AACD;;AAED,aAASoxC,WAAT,CAAqBtB,GAArB,EAA0B37B,KAA1B,EAAiC;AAC/B,UAAI27B,GAAG,CAACgC,YAAR,EAAsB;AACpB,YAAI1wC,QAAQ,GAAG0uC,GAAG,CAACgC,YAAJ,CAAiB,UAAjB,CAAf;;AACA,YAAI1wC,QAAQ,KAAK,QAAjB,EAA2B;AACzB+S,UAAAA,KAAK,GAAG,IAAI3H,KAAK,CAAC2d,MAAV,CAAiB;AAAC/V,YAAAA,IAAI,EAAEhT;AAAP,WAAjB,CAAR;AACD;AACF;;AAED,UAAI2wC,IAAI,GAAGjC,GAAG,CAACU,WAAf;AACA,UAAIuB,IAAI,KAAK,EAAb,EAAiBA,IAAI,GAAG,IAAP;;AACjB,UAAI,OAAO59B,KAAK,CAACwG,MAAb,KAAwB,UAA5B,EAAwC;AACtC,eAAOxG,KAAK,CAACwG,MAAN,CAAao3B,IAAb,CAAP;AACD,OAFD,MAEO;AACL,eAAOA,IAAP;AACD;AACF;;AAED,aAASZ,YAAT,CAAsBrB,GAAtB,EAA2B;AACzB,UAAIA,GAAG,KAAKppC,SAAR,IAAqBopC,GAAG,KAAK,IAAjC,EAAuC,OAAO,EAAP,CADd,CAGzB;;AACA,UAAI,CAACA,GAAG,CAAC8B,iBAAT,EAA4B;AAC1B,YAAI9B,GAAG,CAACO,UAAJ,CAAeA,UAAf,KAA8B,IAAlC,EAAwC,OAAO,EAAP;AACxC,YAAIP,GAAG,CAACkC,UAAJ,CAAez0C,MAAf,KAA0B,CAA9B,EAAiC,OAAO,EAAP,CAAjC,KACK,OAAOuyC,GAAG,CAACU,WAAX;AACN,OARwB,CAUzB;;;AACA,UAAIr8B,KAAK,GAAG;AAACC,QAAAA,IAAI,EAAE,WAAP;AAAoBG,QAAAA,OAAO,EAAE;AAA7B,OAAZ;AACA,UAAIo9B,KAAK,GAAG7B,GAAG,CAAC8B,iBAAhB;;AACA,aAAOD,KAAP,EAAc;AACZ,YAAIb,GAAG,GAAGa,KAAK,CAACrB,QAAhB;;AACA,YAAIryC,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqC6W,KAAK,CAACI,OAA3C,EAAoDu8B,GAApD,CAAJ,EAA8D;AAC5D;AACA38B,UAAAA,KAAK,CAACI,OAAN,CAAcu8B,GAAd,EAAmB18B,IAAnB,GAA0B,MAA1B;AACD,SAHD,MAGO;AACLD,UAAAA,KAAK,CAACI,OAAN,CAAcu8B,GAAd,IAAqB;AAACtpC,YAAAA,IAAI,EAAEspC;AAAP,WAArB;AACD;;AACDa,QAAAA,KAAK,GAAGA,KAAK,CAACE,kBAAd;AACD;;AACD,aAAOb,cAAc,CAAClB,GAAD,EAAM37B,KAAN,CAArB;AACD;AAED;AACF;AACA;;;AACE3W,IAAAA,MAAM,CAACH,OAAP,GAAiBwyC,YAAjB;AAEC,GAxMyF,EAwMxF;AAAC,sBAAiB,EAAlB;AAAqB,eAAU;AAA/B,GAxMwF,CAn7agX;AA2nbpa,MAAG,CAAC,UAAS9yC,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1E,QAAImI,IAAI,GAAGzI,OAAO,CAAC,SAAD,CAAlB;;AACA,QAAIk1C,OAAO,GAAGl1C,OAAO,CAAC,YAAD,CAAP,CAAsBk1C,OAApC;;AACA,QAAIC,OAAO,GAAGn1C,OAAO,CAAC,YAAD,CAAP,CAAsBm1C,OAApC;;AAEA,aAASC,UAAT,GAAsB,CAAG;;AAEzBA,IAAAA,UAAU,CAACtyC,SAAX,CAAqBw1B,KAArB,GAA6B,UAASzmB,MAAT,EAAiBuF,KAAjB,EAAwBihB,WAAxB,EAAqCgd,OAArC,EAA8C;AACzE,UAAItC,GAAG,GAAG,IAAImC,OAAJ,CAAY7c,WAAZ,CAAV;AACAid,MAAAA,eAAe,CAACvC,GAAD,EAAM37B,KAAN,EAAa,IAAb,CAAf;AACAmf,MAAAA,SAAS,CAACwc,GAAD,EAAMlhC,MAAN,EAAcuF,KAAd,CAAT;AACA,aAAO27B,GAAG,CAACwC,QAAJ,CAAa/0C,MAAb,GAAsB,CAAtB,IAA2B60C,OAA3B,GAAqCtC,GAAG,CAAChwC,QAAJ,EAArC,GAAsD,EAA7D;AACD,KALD;;AAOA,aAASwzB,SAAT,CAAmBwc,GAAnB,EAAwBhpC,KAAxB,EAA+BqN,KAA/B,EAAsC;AACpC,cAAQA,KAAK,CAACC,IAAd;AACE,aAAK,WAAL;AAAkB,iBAAOmhB,kBAAkB,CAACua,GAAD,EAAMhpC,KAAN,EAAaqN,KAAb,CAAzB;;AAClB,aAAK,KAAL;AAAY,iBAAOyhB,YAAY,CAACka,GAAD,EAAMhpC,KAAN,EAAaqN,KAAb,CAAnB;;AACZ,aAAK,MAAL;AAAa,iBAAO4hB,aAAa,CAAC+Z,GAAD,EAAMhpC,KAAN,EAAaqN,KAAb,CAApB;;AACb;AAAS,iBAAOo+B,eAAe,CAACzC,GAAD,EAAMhpC,KAAN,EAAaqN,KAAb,CAAtB;AAJX;AAMD;;AAED,aAASohB,kBAAT,CAA4Bua,GAA5B,EAAiClhC,MAAjC,EAAyCuF,KAAzC,EAAgD;AAC9C3O,MAAAA,IAAI,CAACyI,SAAL,CAAekG,KAAK,CAACya,WAArB,EAAkC,UAAShD,UAAT,EAAqB;AACrD,YAAItX,WAAW,GAAGH,KAAK,CAACI,OAAN,CAAcqX,UAAd,CAAlB;AACA,YAAItX,WAAW,CAAC4U,QAAZ,KAAyB,MAA7B,EAAqC;AAErC,YAAIpiB,KAAK,GAAG8H,MAAM,CAACgd,UAAD,CAAlB;AACA,YAAIpkB,IAAI,GAAG8M,WAAW,CAAC9M,IAAvB;;AACA,YAAIV,KAAK,KAAKJ,SAAV,IAAuBI,KAAK,KAAK,IAArC,EAA2C;AACzC,cAAIwN,WAAW,CAAC+8B,cAAhB,EAAgC;AAC9BvB,YAAAA,GAAG,CAAC0C,YAAJ,CAAiBhrC,IAAjB,EAAuBV,KAAvB;AACD,WAFD,MAEO,IAAIwN,WAAW,CAACka,SAAhB,EAA2B;AAChC8E,YAAAA,SAAS,CAACwc,GAAD,EAAMhpC,KAAN,EAAawN,WAAb,CAAT;AACD,WAFM,MAEA;AACL,gBAAIm+B,OAAO,GAAG,IAAIR,OAAJ,CAAYzqC,IAAZ,CAAd;AACAsoC,YAAAA,GAAG,CAAC4C,YAAJ,CAAiBD,OAAjB;AACAJ,YAAAA,eAAe,CAACI,OAAD,EAAUn+B,WAAV,CAAf;AACAgf,YAAAA,SAAS,CAACmf,OAAD,EAAU3rC,KAAV,EAAiBwN,WAAjB,CAAT;AACD;AACF;AACF,OAlBD;AAmBD;;AAED,aAASshB,YAAT,CAAsBka,GAAtB,EAA2BxrB,GAA3B,EAAgCnQ,KAAhC,EAAuC;AACrC,UAAIq9B,MAAM,GAAGr9B,KAAK,CAAC9U,GAAN,CAAUmI,IAAV,IAAkB,KAA/B;AACA,UAAIiqC,QAAQ,GAAGt9B,KAAK,CAACrN,KAAN,CAAYU,IAAZ,IAAoB,OAAnC;AAEAhC,MAAAA,IAAI,CAACoB,IAAL,CAAU0d,GAAV,EAAe,UAASjlB,GAAT,EAAcyH,KAAd,EAAqB;AAClC,YAAI6rC,KAAK,GAAG,IAAIV,OAAJ,CAAY99B,KAAK,CAACqa,SAAN,GAAkBra,KAAK,CAAC3M,IAAxB,GAA+B,OAA3C,CAAZ;AACAsoC,QAAAA,GAAG,CAAC4C,YAAJ,CAAiBC,KAAjB;AAEA,YAAIC,QAAQ,GAAG,IAAIX,OAAJ,CAAYT,MAAZ,CAAf;AACA,YAAIqB,UAAU,GAAG,IAAIZ,OAAJ,CAAYR,QAAZ,CAAjB;AACAkB,QAAAA,KAAK,CAACD,YAAN,CAAmBE,QAAnB;AACAD,QAAAA,KAAK,CAACD,YAAN,CAAmBG,UAAnB;AAEAvf,QAAAA,SAAS,CAACsf,QAAD,EAAWvzC,GAAX,EAAgB8U,KAAK,CAAC9U,GAAtB,CAAT;AACAi0B,QAAAA,SAAS,CAACuf,UAAD,EAAa/rC,KAAb,EAAoBqN,KAAK,CAACrN,KAA1B,CAAT;AACD,OAXD;AAYD;;AAED,aAASivB,aAAT,CAAuB+Z,GAAvB,EAA4B1rB,IAA5B,EAAkCjQ,KAAlC,EAAyC;AACvC,UAAIA,KAAK,CAACqa,SAAV,EAAqB;AACnBhpB,QAAAA,IAAI,CAACyI,SAAL,CAAemW,IAAf,EAAqB,UAAStd,KAAT,EAAgB;AACnC,cAAIU,IAAI,GAAG2M,KAAK,CAACkQ,MAAN,CAAa7c,IAAb,IAAqB2M,KAAK,CAAC3M,IAAtC;AACA,cAAIirC,OAAO,GAAG,IAAIR,OAAJ,CAAYzqC,IAAZ,CAAd;AACAsoC,UAAAA,GAAG,CAAC4C,YAAJ,CAAiBD,OAAjB;AACAnf,UAAAA,SAAS,CAACmf,OAAD,EAAU3rC,KAAV,EAAiBqN,KAAK,CAACkQ,MAAvB,CAAT;AACD,SALD;AAMD,OAPD,MAOO;AACL7e,QAAAA,IAAI,CAACyI,SAAL,CAAemW,IAAf,EAAqB,UAAStd,KAAT,EAAgB;AACnC,cAAIU,IAAI,GAAG2M,KAAK,CAACkQ,MAAN,CAAa7c,IAAb,IAAqB,QAAhC;AACA,cAAIirC,OAAO,GAAG,IAAIR,OAAJ,CAAYzqC,IAAZ,CAAd;AACAsoC,UAAAA,GAAG,CAAC4C,YAAJ,CAAiBD,OAAjB;AACAnf,UAAAA,SAAS,CAACmf,OAAD,EAAU3rC,KAAV,EAAiBqN,KAAK,CAACkQ,MAAvB,CAAT;AACD,SALD;AAMD;AACF;;AAED,aAASkuB,eAAT,CAAyBzC,GAAzB,EAA8BhpC,KAA9B,EAAqCqN,KAArC,EAA4C;AAC1C27B,MAAAA,GAAG,CAAC4C,YAAJ,CACE,IAAIR,OAAJ,CAAY/9B,KAAK,CAACgV,YAAN,CAAmBriB,KAAnB,CAAZ,CADF;AAGD;;AAED,aAASurC,eAAT,CAAyBvC,GAAzB,EAA8B37B,KAA9B,EAAqC2+B,MAArC,EAA6C;AAC3C,UAAI9jB,GAAJ;AAAA,UAAShJ,MAAM,GAAG,OAAlB;;AACA,UAAI7R,KAAK,CAAC4+B,eAAV,EAA2B;AACzB/jB,QAAAA,GAAG,GAAG7a,KAAK,CAAC4+B,eAAZ;AACA,YAAI5+B,KAAK,CAAC6+B,kBAAV,EAA8BhtB,MAAM,IAAI,MAAM7R,KAAK,CAAC6+B,kBAAtB;AAC/B,OAHD,MAGO,IAAIF,MAAM,IAAI3+B,KAAK,CAACN,GAAN,CAAUk/B,eAAxB,EAAyC;AAC9C/jB,QAAAA,GAAG,GAAG7a,KAAK,CAACN,GAAN,CAAUk/B,eAAhB;AACD;;AAED,UAAI/jB,GAAJ,EAAS8gB,GAAG,CAAC0C,YAAJ,CAAiBxsB,MAAjB,EAAyBgJ,GAAzB;AACV;AAED;AACF;AACA;;;AACExxB,IAAAA,MAAM,CAACH,OAAP,GAAiB80C,UAAjB;AAEC,GAxGwC,EAwGvC;AAAC,eAAU,EAAX;AAAc,kBAAa,EAA3B;AAA8B,kBAAa;AAA3C,GAxGuC,CA3nbia;AAmubxZ,MAAG,CAAC,UAASp1C,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACtF;AACF;AACA;AACE,aAAS41C,eAAT,CAAyBnsC,KAAzB,EAAgC;AAC5B,aAAOA,KAAK,CAACijB,OAAN,CAAc,IAAd,EAAoB,OAApB,EAA6BA,OAA7B,CAAqC,IAArC,EAA2C,QAA3C,EAAqDA,OAArD,CAA6D,IAA7D,EAAmE,MAAnE,EAA2EA,OAA3E,CAAmF,IAAnF,EAAyF,MAAzF,EAAiGA,OAAjG,CAAyG,IAAzG,EAA+G,QAA/G,CAAP;AACH;AAED;AACF;AACA;;;AACEvsB,IAAAA,MAAM,CAACH,OAAP,GAAiB;AACb41C,MAAAA,eAAe,EAAEA;AADJ,KAAjB;AAIC,GAfoD,EAenD,EAfmD,CAnubqZ;AAkvbpc,MAAG,CAAC,UAASl2C,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1C;AACF;AACA;AACE,aAAS61C,aAAT,CAAuBpsC,KAAvB,EAA8B;AAC1B,aAAOA,KAAK,CAACijB,OAAN,CAAc,IAAd,EAAoB,OAApB,EAA6BA,OAA7B,CAAqC,IAArC,EAA2C,MAA3C,EAAmDA,OAAnD,CAA2D,IAA3D,EAAiE,MAAjE,CAAP;AACH;AAED;AACF;AACA;;;AACEvsB,IAAAA,MAAM,CAACH,OAAP,GAAiB;AACb61C,MAAAA,aAAa,EAAEA;AADF,KAAjB;AAIC,GAfQ,EAeP,EAfO,CAlvbic;AAiwbpc,MAAG,CAAC,UAASn2C,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1C,QAAI41C,eAAe,GAAGl2C,OAAO,CAAC,oBAAD,CAAP,CAA8Bk2C,eAApD;AAEA;AACF;AACA;AACA;;;AACE,aAAShB,OAAT,CAAiBzqC,IAAjB,EAAuB8qC,QAAvB,EAAiC;AAC7B,UAAIA,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AAAEA,QAAAA,QAAQ,GAAG,EAAX;AAAgB;;AAC3C,WAAK9qC,IAAL,GAAYA,IAAZ;AACA,WAAK8qC,QAAL,GAAgBA,QAAhB;AACA,WAAKhB,UAAL,GAAkB,EAAlB;AACH;;AACDW,IAAAA,OAAO,CAACpyC,SAAR,CAAkB2yC,YAAlB,GAAiC,UAAUhrC,IAAV,EAAgBV,KAAhB,EAAuB;AACpD,WAAKwqC,UAAL,CAAgB9pC,IAAhB,IAAwBV,KAAxB;AACA,aAAO,IAAP;AACH,KAHD;;AAIAmrC,IAAAA,OAAO,CAACpyC,SAAR,CAAkB6yC,YAAlB,GAAiC,UAAUf,KAAV,EAAiB;AAC9C,WAAKW,QAAL,CAAchnC,IAAd,CAAmBqmC,KAAnB;AACA,aAAO,IAAP;AACH,KAHD;;AAIAM,IAAAA,OAAO,CAACpyC,SAAR,CAAkBszC,eAAlB,GAAoC,UAAU3rC,IAAV,EAAgB;AAChD,aAAO,KAAK8pC,UAAL,CAAgB9pC,IAAhB,CAAP;AACA,aAAO,IAAP;AACH,KAHD;;AAIAyqC,IAAAA,OAAO,CAACpyC,SAAR,CAAkBC,QAAlB,GAA6B,YAAY;AACrC,UAAIszC,WAAW,GAAG57B,OAAO,CAAC,KAAK86B,QAAL,CAAc/0C,MAAf,CAAzB;AACA,UAAI81C,OAAO,GAAG,MAAM,KAAK7rC,IAAzB,CAFqC,CAGrC;;AACA,UAAI8pC,UAAU,GAAG,KAAKA,UAAtB;;AACA,WAAK,IAAI10C,CAAC,GAAG,CAAR,EAAW02C,cAAc,GAAGr1C,MAAM,CAAC4I,IAAP,CAAYyqC,UAAZ,CAAjC,EAA0D10C,CAAC,GAAG02C,cAAc,CAAC/1C,MAA7E,EAAqFX,CAAC,EAAtF,EAA0F;AACtF,YAAI22C,aAAa,GAAGD,cAAc,CAAC12C,CAAD,CAAlC;AACA,YAAI42C,SAAS,GAAGlC,UAAU,CAACiC,aAAD,CAA1B;;AACA,YAAI,OAAOC,SAAP,KAAqB,WAArB,IAAoCA,SAAS,KAAK,IAAtD,EAA4D;AACxDH,UAAAA,OAAO,IAAI,MAAME,aAAN,GAAsB,KAAtB,GAA8BN,eAAe,CAAC,KAAKO,SAAN,CAA7C,GAAgE,IAA3E;AACH;AACJ;;AACD,aAAOH,OAAO,IAAI,CAACD,WAAD,GAAe,IAAf,GAAsB,MAAM,KAAKd,QAAL,CAAchuB,GAAd,CAAkB,UAAUxnB,CAAV,EAAa;AAAE,eAAOA,CAAC,CAACgD,QAAF,EAAP;AAAsB,OAAvD,EAAyDwS,IAAzD,CAA8D,EAA9D,CAAN,GAA0E,IAA1E,GAAiF,KAAK9K,IAAtF,GAA6F,GAArI;AACH,KAbD;AAeA;AACF;AACA;;;AACEhK,IAAAA,MAAM,CAACH,OAAP,GAAiB;AACb40C,MAAAA,OAAO,EAAEA;AADI,KAAjB;AAIC,GA/CQ,EA+CP;AAAC,0BAAqB;AAAtB,GA/CO,CAjwbic;AAgzb7a,MAAG,CAAC,UAASl1C,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACjE,QAAI61C,aAAa,GAAGn2C,OAAO,CAAC,kBAAD,CAAP,CAA4Bm2C,aAAhD;AAEA;AACF;AACA;AACA;;;AACE,aAAShB,OAAT,CAAiBprC,KAAjB,EAAwB;AACpB,WAAKA,KAAL,GAAaA,KAAb;AACH;;AAEDorC,IAAAA,OAAO,CAACryC,SAAR,CAAkBC,QAAlB,GAA6B,YAAY;AACrC,aAAOozC,aAAa,CAAC,KAAK,KAAKpsC,KAAX,CAApB;AACH,KAFD;AAIA;AACF;AACA;;;AACEtJ,IAAAA,MAAM,CAACH,OAAP,GAAiB;AACb60C,MAAAA,OAAO,EAAEA;AADI,KAAjB;AAIC,GAtB+B,EAsB9B;AAAC,wBAAmB;AAApB,GAtB8B,CAhzb0a;AAs0b/a,MAAG,CAAC,UAASn1C,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC/D;;AAEAA,IAAAA,OAAO,CAAC4C,UAAR,GAAqBA,UAArB;AACA5C,IAAAA,OAAO,CAACo2C,WAAR,GAAsBA,WAAtB;AACAp2C,IAAAA,OAAO,CAACq2C,aAAR,GAAwBA,aAAxB;AAEA,QAAIC,MAAM,GAAG,EAAb;AACA,QAAIC,SAAS,GAAG,EAAhB;AACA,QAAIC,GAAG,GAAG,OAAO1zC,UAAP,KAAsB,WAAtB,GAAoCA,UAApC,GAAiDwwB,KAA3D;AAEA,QAAIxzB,IAAI,GAAG,kEAAX;;AACA,SAAK,IAAIP,CAAC,GAAG,CAAR,EAAWk3C,GAAG,GAAG32C,IAAI,CAACI,MAA3B,EAAmCX,CAAC,GAAGk3C,GAAvC,EAA4C,EAAEl3C,CAA9C,EAAiD;AAC/C+2C,MAAAA,MAAM,CAAC/2C,CAAD,CAAN,GAAYO,IAAI,CAACP,CAAD,CAAhB;AACAg3C,MAAAA,SAAS,CAACz2C,IAAI,CAACwtC,UAAL,CAAgB/tC,CAAhB,CAAD,CAAT,GAAgCA,CAAhC;AACD,KAf8D,CAiB/D;AACA;;;AACAg3C,IAAAA,SAAS,CAAC,IAAIjJ,UAAJ,CAAe,CAAf,CAAD,CAAT,GAA+B,EAA/B;AACAiJ,IAAAA,SAAS,CAAC,IAAIjJ,UAAJ,CAAe,CAAf,CAAD,CAAT,GAA+B,EAA/B;;AAEA,aAASoJ,OAAT,CAAkBC,GAAlB,EAAuB;AACrB,UAAIF,GAAG,GAAGE,GAAG,CAACz2C,MAAd;;AAEA,UAAIu2C,GAAG,GAAG,CAAN,GAAU,CAAd,EAAiB;AACf,cAAM,IAAI52C,KAAJ,CAAU,gDAAV,CAAN;AACD,OALoB,CAOrB;AACA;;;AACA,UAAI+2C,QAAQ,GAAGD,GAAG,CAACp0C,OAAJ,CAAY,GAAZ,CAAf;AACA,UAAIq0C,QAAQ,KAAK,CAAC,CAAlB,EAAqBA,QAAQ,GAAGH,GAAX;AAErB,UAAII,eAAe,GAAGD,QAAQ,KAAKH,GAAb,GAClB,CADkB,GAElB,IAAKG,QAAQ,GAAG,CAFpB;AAIA,aAAO,CAACA,QAAD,EAAWC,eAAX,CAAP;AACD,KAvC8D,CAyC/D;;;AACA,aAASj0C,UAAT,CAAqB+zC,GAArB,EAA0B;AACxB,UAAIG,IAAI,GAAGJ,OAAO,CAACC,GAAD,CAAlB;AACA,UAAIC,QAAQ,GAAGE,IAAI,CAAC,CAAD,CAAnB;AACA,UAAID,eAAe,GAAGC,IAAI,CAAC,CAAD,CAA1B;AACA,aAAQ,CAACF,QAAQ,GAAGC,eAAZ,IAA+B,CAA/B,GAAmC,CAApC,GAAyCA,eAAhD;AACD;;AAED,aAASE,WAAT,CAAsBJ,GAAtB,EAA2BC,QAA3B,EAAqCC,eAArC,EAAsD;AACpD,aAAQ,CAACD,QAAQ,GAAGC,eAAZ,IAA+B,CAA/B,GAAmC,CAApC,GAAyCA,eAAhD;AACD;;AAED,aAAST,WAAT,CAAsBO,GAAtB,EAA2B;AACzB,UAAIrgB,GAAJ;AACA,UAAIwgB,IAAI,GAAGJ,OAAO,CAACC,GAAD,CAAlB;AACA,UAAIC,QAAQ,GAAGE,IAAI,CAAC,CAAD,CAAnB;AACA,UAAID,eAAe,GAAGC,IAAI,CAAC,CAAD,CAA1B;AAEA,UAAIE,GAAG,GAAG,IAAIR,GAAJ,CAAQO,WAAW,CAACJ,GAAD,EAAMC,QAAN,EAAgBC,eAAhB,CAAnB,CAAV;AAEA,UAAII,OAAO,GAAG,CAAd,CARyB,CAUzB;;AACA,UAAIR,GAAG,GAAGI,eAAe,GAAG,CAAlB,GACND,QAAQ,GAAG,CADL,GAENA,QAFJ;AAIA,UAAIr3C,CAAJ;;AACA,WAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGk3C,GAAhB,EAAqBl3C,CAAC,IAAI,CAA1B,EAA6B;AAC3B+2B,QAAAA,GAAG,GACAigB,SAAS,CAACI,GAAG,CAACrJ,UAAJ,CAAe/tC,CAAf,CAAD,CAAT,IAAgC,EAAjC,GACCg3C,SAAS,CAACI,GAAG,CAACrJ,UAAJ,CAAe/tC,CAAC,GAAG,CAAnB,CAAD,CAAT,IAAoC,EADrC,GAECg3C,SAAS,CAACI,GAAG,CAACrJ,UAAJ,CAAe/tC,CAAC,GAAG,CAAnB,CAAD,CAAT,IAAoC,CAFrC,GAGAg3C,SAAS,CAACI,GAAG,CAACrJ,UAAJ,CAAe/tC,CAAC,GAAG,CAAnB,CAAD,CAJX;AAKAy3C,QAAAA,GAAG,CAACC,OAAO,EAAR,CAAH,GAAkB3gB,GAAG,IAAI,EAAR,GAAc,IAA/B;AACA0gB,QAAAA,GAAG,CAACC,OAAO,EAAR,CAAH,GAAkB3gB,GAAG,IAAI,CAAR,GAAa,IAA9B;AACA0gB,QAAAA,GAAG,CAACC,OAAO,EAAR,CAAH,GAAiB3gB,GAAG,GAAG,IAAvB;AACD;;AAED,UAAIugB,eAAe,KAAK,CAAxB,EAA2B;AACzBvgB,QAAAA,GAAG,GACAigB,SAAS,CAACI,GAAG,CAACrJ,UAAJ,CAAe/tC,CAAf,CAAD,CAAT,IAAgC,CAAjC,GACCg3C,SAAS,CAACI,GAAG,CAACrJ,UAAJ,CAAe/tC,CAAC,GAAG,CAAnB,CAAD,CAAT,IAAoC,CAFvC;AAGAy3C,QAAAA,GAAG,CAACC,OAAO,EAAR,CAAH,GAAiB3gB,GAAG,GAAG,IAAvB;AACD;;AAED,UAAIugB,eAAe,KAAK,CAAxB,EAA2B;AACzBvgB,QAAAA,GAAG,GACAigB,SAAS,CAACI,GAAG,CAACrJ,UAAJ,CAAe/tC,CAAf,CAAD,CAAT,IAAgC,EAAjC,GACCg3C,SAAS,CAACI,GAAG,CAACrJ,UAAJ,CAAe/tC,CAAC,GAAG,CAAnB,CAAD,CAAT,IAAoC,CADrC,GAECg3C,SAAS,CAACI,GAAG,CAACrJ,UAAJ,CAAe/tC,CAAC,GAAG,CAAnB,CAAD,CAAT,IAAoC,CAHvC;AAIAy3C,QAAAA,GAAG,CAACC,OAAO,EAAR,CAAH,GAAkB3gB,GAAG,IAAI,CAAR,GAAa,IAA9B;AACA0gB,QAAAA,GAAG,CAACC,OAAO,EAAR,CAAH,GAAiB3gB,GAAG,GAAG,IAAvB;AACD;;AAED,aAAO0gB,GAAP;AACD;;AAED,aAASE,eAAT,CAA0BC,GAA1B,EAA+B;AAC7B,aAAOb,MAAM,CAACa,GAAG,IAAI,EAAP,GAAY,IAAb,CAAN,GACLb,MAAM,CAACa,GAAG,IAAI,EAAP,GAAY,IAAb,CADD,GAELb,MAAM,CAACa,GAAG,IAAI,CAAP,GAAW,IAAZ,CAFD,GAGLb,MAAM,CAACa,GAAG,GAAG,IAAP,CAHR;AAID;;AAED,aAASC,WAAT,CAAsBC,KAAtB,EAA6BlG,KAA7B,EAAoCtU,GAApC,EAAyC;AACvC,UAAIvG,GAAJ;AACA,UAAI/Y,MAAM,GAAG,EAAb;;AACA,WAAK,IAAIhe,CAAC,GAAG4xC,KAAb,EAAoB5xC,CAAC,GAAGs9B,GAAxB,EAA6Bt9B,CAAC,IAAI,CAAlC,EAAqC;AACnC+2B,QAAAA,GAAG,GACD,CAAE+gB,KAAK,CAAC93C,CAAD,CAAL,IAAY,EAAb,GAAmB,QAApB,KACE83C,KAAK,CAAC93C,CAAC,GAAG,CAAL,CAAL,IAAgB,CAAjB,GAAsB,MADvB,KAEC83C,KAAK,CAAC93C,CAAC,GAAG,CAAL,CAAL,GAAe,IAFhB,CADF;AAIAge,QAAAA,MAAM,CAACtP,IAAP,CAAYipC,eAAe,CAAC5gB,GAAD,CAA3B;AACD;;AACD,aAAO/Y,MAAM,CAACtI,IAAP,CAAY,EAAZ,CAAP;AACD;;AAED,aAASohC,aAAT,CAAwBgB,KAAxB,EAA+B;AAC7B,UAAI/gB,GAAJ;AACA,UAAImgB,GAAG,GAAGY,KAAK,CAACn3C,MAAhB;AACA,UAAIo3C,UAAU,GAAGb,GAAG,GAAG,CAAvB,CAH6B,CAGJ;;AACzB,UAAIrf,KAAK,GAAG,EAAZ;AACA,UAAImgB,cAAc,GAAG,KAArB,CAL6B,CAKF;AAE3B;;AACA,WAAK,IAAIh4C,CAAC,GAAG,CAAR,EAAWi4C,IAAI,GAAGf,GAAG,GAAGa,UAA7B,EAAyC/3C,CAAC,GAAGi4C,IAA7C,EAAmDj4C,CAAC,IAAIg4C,cAAxD,EAAwE;AACtEngB,QAAAA,KAAK,CAACnpB,IAAN,CAAWmpC,WAAW,CACpBC,KADoB,EACb93C,CADa,EACTA,CAAC,GAAGg4C,cAAL,GAAuBC,IAAvB,GAA8BA,IAA9B,GAAsCj4C,CAAC,GAAGg4C,cADhC,CAAtB;AAGD,OAZ4B,CAc7B;;;AACA,UAAID,UAAU,KAAK,CAAnB,EAAsB;AACpBhhB,QAAAA,GAAG,GAAG+gB,KAAK,CAACZ,GAAG,GAAG,CAAP,CAAX;AACArf,QAAAA,KAAK,CAACnpB,IAAN,CACEqoC,MAAM,CAAChgB,GAAG,IAAI,CAAR,CAAN,GACAggB,MAAM,CAAEhgB,GAAG,IAAI,CAAR,GAAa,IAAd,CADN,GAEA,IAHF;AAKD,OAPD,MAOO,IAAIghB,UAAU,KAAK,CAAnB,EAAsB;AAC3BhhB,QAAAA,GAAG,GAAG,CAAC+gB,KAAK,CAACZ,GAAG,GAAG,CAAP,CAAL,IAAkB,CAAnB,IAAwBY,KAAK,CAACZ,GAAG,GAAG,CAAP,CAAnC;AACArf,QAAAA,KAAK,CAACnpB,IAAN,CACEqoC,MAAM,CAAChgB,GAAG,IAAI,EAAR,CAAN,GACAggB,MAAM,CAAEhgB,GAAG,IAAI,CAAR,GAAa,IAAd,CADN,GAEAggB,MAAM,CAAEhgB,GAAG,IAAI,CAAR,GAAa,IAAd,CAFN,GAGA,GAJF;AAMD;;AAED,aAAOc,KAAK,CAACniB,IAAN,CAAW,EAAX,CAAP;AACD;AAEA,GA1J6B,EA0J5B,EA1J4B,CAt0b4a;AAg+bpc,MAAG,CAAC,UAASvV,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC,CAEzC,CAFQ,EAEP,EAFO,CAh+bic;AAk+bpc,MAAG,CAAC,UAASN,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1C,KAAC,UAAUy3C,MAAV,EAAiBv1C,MAAjB,EAAwB;AACzB;AACF;AACA;AACA;AACA;AACA;;AACE;AAEA;;AAEA,UAAIkwB,MAAM,GAAG1yB,OAAO,CAAC,WAAD,CAApB;;AACA,UAAIg4C,OAAO,GAAGh4C,OAAO,CAAC,SAAD,CAArB;;AACA,UAAIy3B,OAAO,GAAGz3B,OAAO,CAAC,SAAD,CAArB;;AAEAM,MAAAA,OAAO,CAACkC,MAAR,GAAiBA,MAAjB;AACAlC,MAAAA,OAAO,CAAC23C,UAAR,GAAqBA,UAArB;AACA33C,MAAAA,OAAO,CAAC43C,iBAAR,GAA4B,EAA5B;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACE11C,MAAAA,MAAM,CAAC21C,mBAAP,GAA6BJ,MAAM,CAACI,mBAAP,KAA+BxuC,SAA/B,GACzBouC,MAAM,CAACI,mBADkB,GAEzBC,iBAAiB,EAFrB;AAIA;AACF;AACA;;AACE93C,MAAAA,OAAO,CAAC+3C,UAAR,GAAqBA,UAAU,EAA/B;;AAEA,eAASD,iBAAT,GAA8B;AAC5B,YAAI;AACF,cAAId,GAAG,GAAG,IAAIl0C,UAAJ,CAAe,CAAf,CAAV;AACAk0C,UAAAA,GAAG,CAACgB,SAAJ,GAAgB;AAACA,YAAAA,SAAS,EAAEl1C,UAAU,CAACN,SAAvB;AAAkCy1C,YAAAA,GAAG,EAAE,YAAY;AAAE,qBAAO,EAAP;AAAW;AAAhE,WAAhB;AACA,iBAAOjB,GAAG,CAACiB,GAAJ,OAAc,EAAd,IAAoB;AACvB,iBAAOjB,GAAG,CAACkB,QAAX,KAAwB,UADrB,IACmC;AACtClB,UAAAA,GAAG,CAACkB,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBt1C,UAAnB,KAAkC,CAFtC,CAHE,CAKsC;AACzC,SAND,CAME,OAAOzD,CAAP,EAAU;AACV,iBAAO,KAAP;AACD;AACF;;AAED,eAAS44C,UAAT,GAAuB;AACrB,eAAO71C,MAAM,CAAC21C,mBAAP,GACH,UADG,GAEH,UAFJ;AAGD;;AAED,eAASM,YAAT,CAAuBC,IAAvB,EAA6Bl4C,MAA7B,EAAqC;AACnC,YAAI63C,UAAU,KAAK73C,MAAnB,EAA2B;AACzB,gBAAM,IAAIm4C,UAAJ,CAAe,4BAAf,CAAN;AACD;;AACD,YAAIn2C,MAAM,CAAC21C,mBAAX,EAAgC;AAC9B;AACAO,UAAAA,IAAI,GAAG,IAAIt1C,UAAJ,CAAe5C,MAAf,CAAP;AACAk4C,UAAAA,IAAI,CAACJ,SAAL,GAAiB91C,MAAM,CAACM,SAAxB;AACD,SAJD,MAIO;AACL;AACA,cAAI41C,IAAI,KAAK,IAAb,EAAmB;AACjBA,YAAAA,IAAI,GAAG,IAAIl2C,MAAJ,CAAWhC,MAAX,CAAP;AACD;;AACDk4C,UAAAA,IAAI,CAACl4C,MAAL,GAAcA,MAAd;AACD;;AAED,eAAOk4C,IAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEE,eAASl2C,MAAT,CAAiBG,GAAjB,EAAsBi2C,gBAAtB,EAAwCp4C,MAAxC,EAAgD;AAC9C,YAAI,CAACgC,MAAM,CAAC21C,mBAAR,IAA+B,EAAE,gBAAgB31C,MAAlB,CAAnC,EAA8D;AAC5D,iBAAO,IAAIA,MAAJ,CAAWG,GAAX,EAAgBi2C,gBAAhB,EAAkCp4C,MAAlC,CAAP;AACD,SAH6C,CAK9C;;;AACA,YAAI,OAAOmC,GAAP,KAAe,QAAnB,EAA6B;AAC3B,cAAI,OAAOi2C,gBAAP,KAA4B,QAAhC,EAA0C;AACxC,kBAAM,IAAIz4C,KAAJ,CACJ,mEADI,CAAN;AAGD;;AACD,iBAAO04C,WAAW,CAAC,IAAD,EAAOl2C,GAAP,CAAlB;AACD;;AACD,eAAOwrC,IAAI,CAAC,IAAD,EAAOxrC,GAAP,EAAYi2C,gBAAZ,EAA8Bp4C,MAA9B,CAAX;AACD;;AAEDgC,MAAAA,MAAM,CAACs2C,QAAP,GAAkB,IAAlB,CApHyB,CAoHF;AAEvB;;AACAt2C,MAAAA,MAAM,CAACu2C,QAAP,GAAkB,UAAUzB,GAAV,EAAe;AAC/BA,QAAAA,GAAG,CAACgB,SAAJ,GAAgB91C,MAAM,CAACM,SAAvB;AACA,eAAOw0C,GAAP;AACD,OAHD;;AAKA,eAASnJ,IAAT,CAAeuK,IAAf,EAAqB3uC,KAArB,EAA4B6uC,gBAA5B,EAA8Cp4C,MAA9C,EAAsD;AACpD,YAAI,OAAOuJ,KAAP,KAAiB,QAArB,EAA+B;AAC7B,gBAAM,IAAIivC,SAAJ,CAAc,uCAAd,CAAN;AACD;;AAED,YAAI,OAAOv2C,WAAP,KAAuB,WAAvB,IAAsCsH,KAAK,YAAYtH,WAA3D,EAAwE;AACtE,iBAAOw2C,eAAe,CAACP,IAAD,EAAO3uC,KAAP,EAAc6uC,gBAAd,EAAgCp4C,MAAhC,CAAtB;AACD;;AAED,YAAI,OAAOuJ,KAAP,KAAiB,QAArB,EAA+B;AAC7B,iBAAOmvC,UAAU,CAACR,IAAD,EAAO3uC,KAAP,EAAc6uC,gBAAd,CAAjB;AACD;;AAED,eAAOO,UAAU,CAACT,IAAD,EAAO3uC,KAAP,CAAjB;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;AACEvH,MAAAA,MAAM,CAAC2rC,IAAP,GAAc,UAAUpkC,KAAV,EAAiB6uC,gBAAjB,EAAmCp4C,MAAnC,EAA2C;AACvD,eAAO2tC,IAAI,CAAC,IAAD,EAAOpkC,KAAP,EAAc6uC,gBAAd,EAAgCp4C,MAAhC,CAAX;AACD,OAFD;;AAIA,UAAIgC,MAAM,CAAC21C,mBAAX,EAAgC;AAC9B31C,QAAAA,MAAM,CAACM,SAAP,CAAiBw1C,SAAjB,GAA6Bl1C,UAAU,CAACN,SAAxC;AACAN,QAAAA,MAAM,CAAC81C,SAAP,GAAmBl1C,UAAnB;;AACA,YAAI,OAAOg2C,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,CAACC,OAAxC,IACA72C,MAAM,CAAC42C,MAAM,CAACC,OAAR,CAAN,KAA2B72C,MAD/B,EACuC;AACrC;AACAtB,UAAAA,MAAM,CAACC,cAAP,CAAsBqB,MAAtB,EAA8B42C,MAAM,CAACC,OAArC,EAA8C;AAC5CtvC,YAAAA,KAAK,EAAE,IADqC;AAE5CtI,YAAAA,YAAY,EAAE;AAF8B,WAA9C;AAID;AACF;;AAED,eAAS63C,UAAT,CAAqBlL,IAArB,EAA2B;AACzB,YAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC5B,gBAAM,IAAI4K,SAAJ,CAAc,kCAAd,CAAN;AACD,SAFD,MAEO,IAAI5K,IAAI,GAAG,CAAX,EAAc;AACnB,gBAAM,IAAIuK,UAAJ,CAAe,sCAAf,CAAN;AACD;AACF;;AAED,eAAS/lB,KAAT,CAAgB8lB,IAAhB,EAAsBtK,IAAtB,EAA4Btb,IAA5B,EAAkCzuB,QAAlC,EAA4C;AAC1Ci1C,QAAAA,UAAU,CAAClL,IAAD,CAAV;;AACA,YAAIA,IAAI,IAAI,CAAZ,EAAe;AACb,iBAAOqK,YAAY,CAACC,IAAD,EAAOtK,IAAP,CAAnB;AACD;;AACD,YAAItb,IAAI,KAAKnpB,SAAb,EAAwB;AACtB;AACA;AACA;AACA,iBAAO,OAAOtF,QAAP,KAAoB,QAApB,GACHo0C,YAAY,CAACC,IAAD,EAAOtK,IAAP,CAAZ,CAAyBtb,IAAzB,CAA8BA,IAA9B,EAAoCzuB,QAApC,CADG,GAEHo0C,YAAY,CAACC,IAAD,EAAOtK,IAAP,CAAZ,CAAyBtb,IAAzB,CAA8BA,IAA9B,CAFJ;AAGD;;AACD,eAAO2lB,YAAY,CAACC,IAAD,EAAOtK,IAAP,CAAnB;AACD;AAED;AACF;AACA;AACA;;;AACE5rC,MAAAA,MAAM,CAACowB,KAAP,GAAe,UAAUwb,IAAV,EAAgBtb,IAAhB,EAAsBzuB,QAAtB,EAAgC;AAC7C,eAAOuuB,KAAK,CAAC,IAAD,EAAOwb,IAAP,EAAatb,IAAb,EAAmBzuB,QAAnB,CAAZ;AACD,OAFD;;AAIA,eAASw0C,WAAT,CAAsBH,IAAtB,EAA4BtK,IAA5B,EAAkC;AAChCkL,QAAAA,UAAU,CAAClL,IAAD,CAAV;AACAsK,QAAAA,IAAI,GAAGD,YAAY,CAACC,IAAD,EAAOtK,IAAI,GAAG,CAAP,GAAW,CAAX,GAAemL,OAAO,CAACnL,IAAD,CAAP,GAAgB,CAAtC,CAAnB;;AACA,YAAI,CAAC5rC,MAAM,CAAC21C,mBAAZ,EAAiC;AAC/B,eAAK,IAAIt4C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuuC,IAApB,EAA0B,EAAEvuC,CAA5B,EAA+B;AAC7B64C,YAAAA,IAAI,CAAC74C,CAAD,CAAJ,GAAU,CAAV;AACD;AACF;;AACD,eAAO64C,IAAP;AACD;AAED;AACF;AACA;;;AACEl2C,MAAAA,MAAM,CAACq2C,WAAP,GAAqB,UAAUzK,IAAV,EAAgB;AACnC,eAAOyK,WAAW,CAAC,IAAD,EAAOzK,IAAP,CAAlB;AACD,OAFD;AAGA;AACF;AACA;;;AACE5rC,MAAAA,MAAM,CAACg3C,eAAP,GAAyB,UAAUpL,IAAV,EAAgB;AACvC,eAAOyK,WAAW,CAAC,IAAD,EAAOzK,IAAP,CAAlB;AACD,OAFD;;AAIA,eAAS8K,UAAT,CAAqBR,IAArB,EAA2Bh3B,MAA3B,EAAmCrd,QAAnC,EAA6C;AAC3C,YAAI,OAAOA,QAAP,KAAoB,QAApB,IAAgCA,QAAQ,KAAK,EAAjD,EAAqD;AACnDA,UAAAA,QAAQ,GAAG,MAAX;AACD;;AAED,YAAI,CAAC7B,MAAM,CAACi3C,UAAP,CAAkBp1C,QAAlB,CAAL,EAAkC;AAChC,gBAAM,IAAI20C,SAAJ,CAAc,4CAAd,CAAN;AACD;;AAED,YAAIx4C,MAAM,GAAG0C,UAAU,CAACwe,MAAD,EAASrd,QAAT,CAAV,GAA+B,CAA5C;AACAq0C,QAAAA,IAAI,GAAGD,YAAY,CAACC,IAAD,EAAOl4C,MAAP,CAAnB;AAEA,YAAIk5C,MAAM,GAAGhB,IAAI,CAACvxC,KAAL,CAAWua,MAAX,EAAmBrd,QAAnB,CAAb;;AAEA,YAAIq1C,MAAM,KAAKl5C,MAAf,EAAuB;AACrB;AACA;AACA;AACAk4C,UAAAA,IAAI,GAAGA,IAAI,CAAC7iC,KAAL,CAAW,CAAX,EAAc6jC,MAAd,CAAP;AACD;;AAED,eAAOhB,IAAP;AACD;;AAED,eAASiB,aAAT,CAAwBjB,IAAxB,EAA8BzI,KAA9B,EAAqC;AACnC,YAAIzvC,MAAM,GAAGyvC,KAAK,CAACzvC,MAAN,GAAe,CAAf,GAAmB,CAAnB,GAAuB+4C,OAAO,CAACtJ,KAAK,CAACzvC,MAAP,CAAP,GAAwB,CAA5D;AACAk4C,QAAAA,IAAI,GAAGD,YAAY,CAACC,IAAD,EAAOl4C,MAAP,CAAnB;;AACA,aAAK,IAAIX,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGW,MAApB,EAA4BX,CAAC,IAAI,CAAjC,EAAoC;AAClC64C,UAAAA,IAAI,CAAC74C,CAAD,CAAJ,GAAUowC,KAAK,CAACpwC,CAAD,CAAL,GAAW,GAArB;AACD;;AACD,eAAO64C,IAAP;AACD;;AAED,eAASO,eAAT,CAA0BP,IAA1B,EAAgCzI,KAAhC,EAAuC3sC,UAAvC,EAAmD9C,MAAnD,EAA2D;AACzDyvC,QAAAA,KAAK,CAAC/sC,UAAN,CADyD,CACxC;;AAEjB,YAAII,UAAU,GAAG,CAAb,IAAkB2sC,KAAK,CAAC/sC,UAAN,GAAmBI,UAAzC,EAAqD;AACnD,gBAAM,IAAIq1C,UAAJ,CAAe,6BAAf,CAAN;AACD;;AAED,YAAI1I,KAAK,CAAC/sC,UAAN,GAAmBI,UAAU,IAAI9C,MAAM,IAAI,CAAd,CAAjC,EAAmD;AACjD,gBAAM,IAAIm4C,UAAJ,CAAe,6BAAf,CAAN;AACD;;AAED,YAAIr1C,UAAU,KAAKqG,SAAf,IAA4BnJ,MAAM,KAAKmJ,SAA3C,EAAsD;AACpDsmC,UAAAA,KAAK,GAAG,IAAI7sC,UAAJ,CAAe6sC,KAAf,CAAR;AACD,SAFD,MAEO,IAAIzvC,MAAM,KAAKmJ,SAAf,EAA0B;AAC/BsmC,UAAAA,KAAK,GAAG,IAAI7sC,UAAJ,CAAe6sC,KAAf,EAAsB3sC,UAAtB,CAAR;AACD,SAFM,MAEA;AACL2sC,UAAAA,KAAK,GAAG,IAAI7sC,UAAJ,CAAe6sC,KAAf,EAAsB3sC,UAAtB,EAAkC9C,MAAlC,CAAR;AACD;;AAED,YAAIgC,MAAM,CAAC21C,mBAAX,EAAgC;AAC9B;AACAO,UAAAA,IAAI,GAAGzI,KAAP;AACAyI,UAAAA,IAAI,CAACJ,SAAL,GAAiB91C,MAAM,CAACM,SAAxB;AACD,SAJD,MAIO;AACL;AACA41C,UAAAA,IAAI,GAAGiB,aAAa,CAACjB,IAAD,EAAOzI,KAAP,CAApB;AACD;;AACD,eAAOyI,IAAP;AACD;;AAED,eAASS,UAAT,CAAqBT,IAArB,EAA2B9pB,GAA3B,EAAgC;AAC9B,YAAIpsB,MAAM,CAACga,QAAP,CAAgBoS,GAAhB,CAAJ,EAA0B;AACxB,cAAImoB,GAAG,GAAGwC,OAAO,CAAC3qB,GAAG,CAACpuB,MAAL,CAAP,GAAsB,CAAhC;AACAk4C,UAAAA,IAAI,GAAGD,YAAY,CAACC,IAAD,EAAO3B,GAAP,CAAnB;;AAEA,cAAI2B,IAAI,CAACl4C,MAAL,KAAgB,CAApB,EAAuB;AACrB,mBAAOk4C,IAAP;AACD;;AAED9pB,UAAAA,GAAG,CAAC7gB,IAAJ,CAAS2qC,IAAT,EAAe,CAAf,EAAkB,CAAlB,EAAqB3B,GAArB;AACA,iBAAO2B,IAAP;AACD;;AAED,YAAI9pB,GAAJ,EAAS;AACP,cAAK,OAAOnsB,WAAP,KAAuB,WAAvB,IACDmsB,GAAG,CAACvrB,MAAJ,YAAsBZ,WADtB,IACsC,YAAYmsB,GADtD,EAC2D;AACzD,gBAAI,OAAOA,GAAG,CAACpuB,MAAX,KAAsB,QAAtB,IAAkCo5C,KAAK,CAAChrB,GAAG,CAACpuB,MAAL,CAA3C,EAAyD;AACvD,qBAAOi4C,YAAY,CAACC,IAAD,EAAO,CAAP,CAAnB;AACD;;AACD,mBAAOiB,aAAa,CAACjB,IAAD,EAAO9pB,GAAP,CAApB;AACD;;AAED,cAAIA,GAAG,CAACvX,IAAJ,KAAa,QAAb,IAAyBogB,OAAO,CAAC7I,GAAG,CAAC3rB,IAAL,CAApC,EAAgD;AAC9C,mBAAO02C,aAAa,CAACjB,IAAD,EAAO9pB,GAAG,CAAC3rB,IAAX,CAApB;AACD;AACF;;AAED,cAAM,IAAI+1C,SAAJ,CAAc,oFAAd,CAAN;AACD;;AAED,eAASO,OAAT,CAAkB/4C,MAAlB,EAA0B;AACxB;AACA;AACA,YAAIA,MAAM,IAAI63C,UAAU,EAAxB,EAA4B;AAC1B,gBAAM,IAAIM,UAAJ,CAAe,oDACA,UADA,GACaN,UAAU,GAAGt1C,QAAb,CAAsB,EAAtB,CADb,GACyC,QADxD,CAAN;AAED;;AACD,eAAOvC,MAAM,GAAG,CAAhB;AACD;;AAED,eAASy3C,UAAT,CAAqBz3C,MAArB,EAA6B;AAC3B,YAAI,CAACA,MAAD,IAAWA,MAAf,EAAuB;AAAE;AACvBA,UAAAA,MAAM,GAAG,CAAT;AACD;;AACD,eAAOgC,MAAM,CAACowB,KAAP,CAAa,CAACpyB,MAAd,CAAP;AACD;;AAEDgC,MAAAA,MAAM,CAACga,QAAP,GAAkB,SAASA,QAAT,CAAmB7W,CAAnB,EAAsB;AACtC,eAAO,CAAC,EAAEA,CAAC,IAAI,IAAL,IAAaA,CAAC,CAACk0C,SAAjB,CAAR;AACD,OAFD;;AAIAr3C,MAAAA,MAAM,CAACs3C,OAAP,GAAiB,SAASA,OAAT,CAAkB55C,CAAlB,EAAqByF,CAArB,EAAwB;AACvC,YAAI,CAACnD,MAAM,CAACga,QAAP,CAAgBtc,CAAhB,CAAD,IAAuB,CAACsC,MAAM,CAACga,QAAP,CAAgB7W,CAAhB,CAA5B,EAAgD;AAC9C,gBAAM,IAAIqzC,SAAJ,CAAc,2BAAd,CAAN;AACD;;AAED,YAAI94C,CAAC,KAAKyF,CAAV,EAAa,OAAO,CAAP;AAEb,YAAIS,CAAC,GAAGlG,CAAC,CAACM,MAAV;AACA,YAAIu5C,CAAC,GAAGp0C,CAAC,CAACnF,MAAV;;AAEA,aAAK,IAAIX,CAAC,GAAG,CAAR,EAAWk3C,GAAG,GAAGxxC,IAAI,CAACwpB,GAAL,CAAS3oB,CAAT,EAAY2zC,CAAZ,CAAtB,EAAsCl6C,CAAC,GAAGk3C,GAA1C,EAA+C,EAAEl3C,CAAjD,EAAoD;AAClD,cAAIK,CAAC,CAACL,CAAD,CAAD,KAAS8F,CAAC,CAAC9F,CAAD,CAAd,EAAmB;AACjBuG,YAAAA,CAAC,GAAGlG,CAAC,CAACL,CAAD,CAAL;AACAk6C,YAAAA,CAAC,GAAGp0C,CAAC,CAAC9F,CAAD,CAAL;AACA;AACD;AACF;;AAED,YAAIuG,CAAC,GAAG2zC,CAAR,EAAW,OAAO,CAAC,CAAR;AACX,YAAIA,CAAC,GAAG3zC,CAAR,EAAW,OAAO,CAAP;AACX,eAAO,CAAP;AACD,OArBD;;AAuBA5D,MAAAA,MAAM,CAACi3C,UAAP,GAAoB,SAASA,UAAT,CAAqBp1C,QAArB,EAA+B;AACjD,gBAAQuT,MAAM,CAACvT,QAAD,CAAN,CAAiBjC,WAAjB,EAAR;AACE,eAAK,KAAL;AACA,eAAK,MAAL;AACA,eAAK,OAAL;AACA,eAAK,OAAL;AACA,eAAK,QAAL;AACA,eAAK,QAAL;AACA,eAAK,QAAL;AACA,eAAK,MAAL;AACA,eAAK,OAAL;AACA,eAAK,SAAL;AACA,eAAK,UAAL;AACE,mBAAO,IAAP;;AACF;AACE,mBAAO,KAAP;AAdJ;AAgBD,OAjBD;;AAmBAI,MAAAA,MAAM,CAACgjB,MAAP,GAAgB,SAASA,MAAT,CAAiB6B,IAAjB,EAAuB7mB,MAAvB,EAA+B;AAC7C,YAAI,CAACi3B,OAAO,CAACpQ,IAAD,CAAZ,EAAoB;AAClB,gBAAM,IAAI2xB,SAAJ,CAAc,6CAAd,CAAN;AACD;;AAED,YAAI3xB,IAAI,CAAC7mB,MAAL,KAAgB,CAApB,EAAuB;AACrB,iBAAOgC,MAAM,CAACowB,KAAP,CAAa,CAAb,CAAP;AACD;;AAED,YAAI/yB,CAAJ;;AACA,YAAIW,MAAM,KAAKmJ,SAAf,EAA0B;AACxBnJ,UAAAA,MAAM,GAAG,CAAT;;AACA,eAAKX,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGwnB,IAAI,CAAC7mB,MAArB,EAA6B,EAAEX,CAA/B,EAAkC;AAChCW,YAAAA,MAAM,IAAI6mB,IAAI,CAACxnB,CAAD,CAAJ,CAAQW,MAAlB;AACD;AACF;;AAED,YAAI6C,MAAM,GAAGb,MAAM,CAACq2C,WAAP,CAAmBr4C,MAAnB,CAAb;AACA,YAAI+tC,GAAG,GAAG,CAAV;;AACA,aAAK1uC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGwnB,IAAI,CAAC7mB,MAArB,EAA6B,EAAEX,CAA/B,EAAkC;AAChC,cAAI4yB,GAAG,GAAGpL,IAAI,CAACxnB,CAAD,CAAd;;AACA,cAAI,CAAC2C,MAAM,CAACga,QAAP,CAAgBiW,GAAhB,CAAL,EAA2B;AACzB,kBAAM,IAAIumB,SAAJ,CAAc,6CAAd,CAAN;AACD;;AACDvmB,UAAAA,GAAG,CAAC1kB,IAAJ,CAAS1K,MAAT,EAAiBkrC,GAAjB;AACAA,UAAAA,GAAG,IAAI9b,GAAG,CAACjyB,MAAX;AACD;;AACD,eAAO6C,MAAP;AACD,OA5BD;;AA8BA,eAASH,UAAT,CAAqBwe,MAArB,EAA6Brd,QAA7B,EAAuC;AACrC,YAAI7B,MAAM,CAACga,QAAP,CAAgBkF,MAAhB,CAAJ,EAA6B;AAC3B,iBAAOA,MAAM,CAAClhB,MAAd;AACD;;AACD,YAAI,OAAOiC,WAAP,KAAuB,WAAvB,IAAsC,OAAOA,WAAW,CAACC,MAAnB,KAA8B,UAApE,KACCD,WAAW,CAACC,MAAZ,CAAmBgf,MAAnB,KAA8BA,MAAM,YAAYjf,WADjD,CAAJ,EACmE;AACjE,iBAAOif,MAAM,CAACxe,UAAd;AACD;;AACD,YAAI,OAAOwe,MAAP,KAAkB,QAAtB,EAAgC;AAC9BA,UAAAA,MAAM,GAAG,KAAKA,MAAd;AACD;;AAED,YAAIq1B,GAAG,GAAGr1B,MAAM,CAAClhB,MAAjB;AACA,YAAIu2C,GAAG,KAAK,CAAZ,EAAe,OAAO,CAAP,CAbsB,CAerC;;AACA,YAAIiD,WAAW,GAAG,KAAlB;;AACA,iBAAS;AACP,kBAAQ31C,QAAR;AACE,iBAAK,OAAL;AACA,iBAAK,QAAL;AACA,iBAAK,QAAL;AACE,qBAAO0yC,GAAP;;AACF,iBAAK,MAAL;AACA,iBAAK,OAAL;AACA,iBAAKptC,SAAL;AACE,qBAAOswC,WAAW,CAACv4B,MAAD,CAAX,CAAoBlhB,MAA3B;;AACF,iBAAK,MAAL;AACA,iBAAK,OAAL;AACA,iBAAK,SAAL;AACA,iBAAK,UAAL;AACE,qBAAOu2C,GAAG,GAAG,CAAb;;AACF,iBAAK,KAAL;AACE,qBAAOA,GAAG,KAAK,CAAf;;AACF,iBAAK,QAAL;AACE,qBAAOmD,aAAa,CAACx4B,MAAD,CAAb,CAAsBlhB,MAA7B;;AACF;AACE,kBAAIw5C,WAAJ,EAAiB,OAAOC,WAAW,CAACv4B,MAAD,CAAX,CAAoBlhB,MAA3B,CADnB,CACqD;;AACnD6D,cAAAA,QAAQ,GAAG,CAAC,KAAKA,QAAN,EAAgBjC,WAAhB,EAAX;AACA43C,cAAAA,WAAW,GAAG,IAAd;AArBJ;AAuBD;AACF;;AACDx3C,MAAAA,MAAM,CAACU,UAAP,GAAoBA,UAApB;;AAEA,eAASi3C,YAAT,CAAuB91C,QAAvB,EAAiCotC,KAAjC,EAAwCtU,GAAxC,EAA6C;AAC3C,YAAI6c,WAAW,GAAG,KAAlB,CAD2C,CAG3C;AACA;AAEA;AACA;AACA;AACA;;AACA,YAAIvI,KAAK,KAAK9nC,SAAV,IAAuB8nC,KAAK,GAAG,CAAnC,EAAsC;AACpCA,UAAAA,KAAK,GAAG,CAAR;AACD,SAZ0C,CAa3C;AACA;;;AACA,YAAIA,KAAK,GAAG,KAAKjxC,MAAjB,EAAyB;AACvB,iBAAO,EAAP;AACD;;AAED,YAAI28B,GAAG,KAAKxzB,SAAR,IAAqBwzB,GAAG,GAAG,KAAK38B,MAApC,EAA4C;AAC1C28B,UAAAA,GAAG,GAAG,KAAK38B,MAAX;AACD;;AAED,YAAI28B,GAAG,IAAI,CAAX,EAAc;AACZ,iBAAO,EAAP;AACD,SAzB0C,CA2B3C;;;AACAA,QAAAA,GAAG,MAAM,CAAT;AACAsU,QAAAA,KAAK,MAAM,CAAX;;AAEA,YAAItU,GAAG,IAAIsU,KAAX,EAAkB;AAChB,iBAAO,EAAP;AACD;;AAED,YAAI,CAACptC,QAAL,EAAeA,QAAQ,GAAG,MAAX;;AAEf,eAAO,IAAP,EAAa;AACX,kBAAQA,QAAR;AACE,iBAAK,KAAL;AACE,qBAAO+1C,QAAQ,CAAC,IAAD,EAAO3I,KAAP,EAActU,GAAd,CAAf;;AAEF,iBAAK,MAAL;AACA,iBAAK,OAAL;AACE,qBAAOkd,SAAS,CAAC,IAAD,EAAO5I,KAAP,EAActU,GAAd,CAAhB;;AAEF,iBAAK,OAAL;AACE,qBAAOmd,UAAU,CAAC,IAAD,EAAO7I,KAAP,EAActU,GAAd,CAAjB;;AAEF,iBAAK,QAAL;AACA,iBAAK,QAAL;AACE,qBAAOod,WAAW,CAAC,IAAD,EAAO9I,KAAP,EAActU,GAAd,CAAlB;;AAEF,iBAAK,QAAL;AACE,qBAAOqd,WAAW,CAAC,IAAD,EAAO/I,KAAP,EAActU,GAAd,CAAlB;;AAEF,iBAAK,MAAL;AACA,iBAAK,OAAL;AACA,iBAAK,SAAL;AACA,iBAAK,UAAL;AACE,qBAAOsd,YAAY,CAAC,IAAD,EAAOhJ,KAAP,EAActU,GAAd,CAAnB;;AAEF;AACE,kBAAI6c,WAAJ,EAAiB,MAAM,IAAIhB,SAAJ,CAAc,uBAAuB30C,QAArC,CAAN;AACjBA,cAAAA,QAAQ,GAAG,CAACA,QAAQ,GAAG,EAAZ,EAAgBjC,WAAhB,EAAX;AACA43C,cAAAA,WAAW,GAAG,IAAd;AA3BJ;AA6BD;AACF,OAxgBwB,CA0gBzB;AACA;;;AACAx3C,MAAAA,MAAM,CAACM,SAAP,CAAiB+2C,SAAjB,GAA6B,IAA7B;;AAEA,eAASa,IAAT,CAAe/0C,CAAf,EAAkBjG,CAAlB,EAAqBi7C,CAArB,EAAwB;AACtB,YAAI96C,CAAC,GAAG8F,CAAC,CAACjG,CAAD,CAAT;AACAiG,QAAAA,CAAC,CAACjG,CAAD,CAAD,GAAOiG,CAAC,CAACg1C,CAAD,CAAR;AACAh1C,QAAAA,CAAC,CAACg1C,CAAD,CAAD,GAAO96C,CAAP;AACD;;AAED2C,MAAAA,MAAM,CAACM,SAAP,CAAiB83C,MAAjB,GAA0B,SAASA,MAAT,GAAmB;AAC3C,YAAI7D,GAAG,GAAG,KAAKv2C,MAAf;;AACA,YAAIu2C,GAAG,GAAG,CAAN,KAAY,CAAhB,EAAmB;AACjB,gBAAM,IAAI4B,UAAJ,CAAe,2CAAf,CAAN;AACD;;AACD,aAAK,IAAI94C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGk3C,GAApB,EAAyBl3C,CAAC,IAAI,CAA9B,EAAiC;AAC/B66C,UAAAA,IAAI,CAAC,IAAD,EAAO76C,CAAP,EAAUA,CAAC,GAAG,CAAd,CAAJ;AACD;;AACD,eAAO,IAAP;AACD,OATD;;AAWA2C,MAAAA,MAAM,CAACM,SAAP,CAAiB+3C,MAAjB,GAA0B,SAASA,MAAT,GAAmB;AAC3C,YAAI9D,GAAG,GAAG,KAAKv2C,MAAf;;AACA,YAAIu2C,GAAG,GAAG,CAAN,KAAY,CAAhB,EAAmB;AACjB,gBAAM,IAAI4B,UAAJ,CAAe,2CAAf,CAAN;AACD;;AACD,aAAK,IAAI94C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGk3C,GAApB,EAAyBl3C,CAAC,IAAI,CAA9B,EAAiC;AAC/B66C,UAAAA,IAAI,CAAC,IAAD,EAAO76C,CAAP,EAAUA,CAAC,GAAG,CAAd,CAAJ;AACA66C,UAAAA,IAAI,CAAC,IAAD,EAAO76C,CAAC,GAAG,CAAX,EAAcA,CAAC,GAAG,CAAlB,CAAJ;AACD;;AACD,eAAO,IAAP;AACD,OAVD;;AAYA2C,MAAAA,MAAM,CAACM,SAAP,CAAiBg4C,MAAjB,GAA0B,SAASA,MAAT,GAAmB;AAC3C,YAAI/D,GAAG,GAAG,KAAKv2C,MAAf;;AACA,YAAIu2C,GAAG,GAAG,CAAN,KAAY,CAAhB,EAAmB;AACjB,gBAAM,IAAI4B,UAAJ,CAAe,2CAAf,CAAN;AACD;;AACD,aAAK,IAAI94C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGk3C,GAApB,EAAyBl3C,CAAC,IAAI,CAA9B,EAAiC;AAC/B66C,UAAAA,IAAI,CAAC,IAAD,EAAO76C,CAAP,EAAUA,CAAC,GAAG,CAAd,CAAJ;AACA66C,UAAAA,IAAI,CAAC,IAAD,EAAO76C,CAAC,GAAG,CAAX,EAAcA,CAAC,GAAG,CAAlB,CAAJ;AACA66C,UAAAA,IAAI,CAAC,IAAD,EAAO76C,CAAC,GAAG,CAAX,EAAcA,CAAC,GAAG,CAAlB,CAAJ;AACA66C,UAAAA,IAAI,CAAC,IAAD,EAAO76C,CAAC,GAAG,CAAX,EAAcA,CAAC,GAAG,CAAlB,CAAJ;AACD;;AACD,eAAO,IAAP;AACD,OAZD;;AAcA2C,MAAAA,MAAM,CAACM,SAAP,CAAiBC,QAAjB,GAA4B,SAASA,QAAT,GAAqB;AAC/C,YAAIvC,MAAM,GAAG,KAAKA,MAAL,GAAc,CAA3B;AACA,YAAIA,MAAM,KAAK,CAAf,EAAkB,OAAO,EAAP;AAClB,YAAIE,SAAS,CAACF,MAAV,KAAqB,CAAzB,EAA4B,OAAO65C,SAAS,CAAC,IAAD,EAAO,CAAP,EAAU75C,MAAV,CAAhB;AAC5B,eAAO25C,YAAY,CAACx5C,KAAb,CAAmB,IAAnB,EAAyBD,SAAzB,CAAP;AACD,OALD;;AAOA8B,MAAAA,MAAM,CAACM,SAAP,CAAiBi4C,MAAjB,GAA0B,SAASA,MAAT,CAAiBp1C,CAAjB,EAAoB;AAC5C,YAAI,CAACnD,MAAM,CAACga,QAAP,CAAgB7W,CAAhB,CAAL,EAAyB,MAAM,IAAIqzC,SAAJ,CAAc,2BAAd,CAAN;AACzB,YAAI,SAASrzC,CAAb,EAAgB,OAAO,IAAP;AAChB,eAAOnD,MAAM,CAACs3C,OAAP,CAAe,IAAf,EAAqBn0C,CAArB,MAA4B,CAAnC;AACD,OAJD;;AAMAnD,MAAAA,MAAM,CAACM,SAAP,CAAiBmlB,OAAjB,GAA2B,SAASA,OAAT,GAAoB;AAC7C,YAAIwoB,GAAG,GAAG,EAAV;AACA,YAAIzhB,GAAG,GAAG1uB,OAAO,CAAC43C,iBAAlB;;AACA,YAAI,KAAK13C,MAAL,GAAc,CAAlB,EAAqB;AACnBiwC,UAAAA,GAAG,GAAG,KAAK1tC,QAAL,CAAc,KAAd,EAAqB,CAArB,EAAwBisB,GAAxB,EAA6BnJ,KAA7B,CAAmC,OAAnC,EAA4CtQ,IAA5C,CAAiD,GAAjD,CAAN;AACA,cAAI,KAAK/U,MAAL,GAAcwuB,GAAlB,EAAuByhB,GAAG,IAAI,OAAP;AACxB;;AACD,eAAO,aAAaA,GAAb,GAAmB,GAA1B;AACD,OARD;;AAUAjuC,MAAAA,MAAM,CAACM,SAAP,CAAiBg3C,OAAjB,GAA2B,SAASA,OAAT,CAAkB/jB,MAAlB,EAA0B0b,KAA1B,EAAiCtU,GAAjC,EAAsC6d,SAAtC,EAAiDC,OAAjD,EAA0D;AACnF,YAAI,CAACz4C,MAAM,CAACga,QAAP,CAAgBuZ,MAAhB,CAAL,EAA8B;AAC5B,gBAAM,IAAIijB,SAAJ,CAAc,2BAAd,CAAN;AACD;;AAED,YAAIvH,KAAK,KAAK9nC,SAAd,EAAyB;AACvB8nC,UAAAA,KAAK,GAAG,CAAR;AACD;;AACD,YAAItU,GAAG,KAAKxzB,SAAZ,EAAuB;AACrBwzB,UAAAA,GAAG,GAAGpH,MAAM,GAAGA,MAAM,CAACv1B,MAAV,GAAmB,CAA/B;AACD;;AACD,YAAIw6C,SAAS,KAAKrxC,SAAlB,EAA6B;AAC3BqxC,UAAAA,SAAS,GAAG,CAAZ;AACD;;AACD,YAAIC,OAAO,KAAKtxC,SAAhB,EAA2B;AACzBsxC,UAAAA,OAAO,GAAG,KAAKz6C,MAAf;AACD;;AAED,YAAIixC,KAAK,GAAG,CAAR,IAAatU,GAAG,GAAGpH,MAAM,CAACv1B,MAA1B,IAAoCw6C,SAAS,GAAG,CAAhD,IAAqDC,OAAO,GAAG,KAAKz6C,MAAxE,EAAgF;AAC9E,gBAAM,IAAIm4C,UAAJ,CAAe,oBAAf,CAAN;AACD;;AAED,YAAIqC,SAAS,IAAIC,OAAb,IAAwBxJ,KAAK,IAAItU,GAArC,EAA0C;AACxC,iBAAO,CAAP;AACD;;AACD,YAAI6d,SAAS,IAAIC,OAAjB,EAA0B;AACxB,iBAAO,CAAC,CAAR;AACD;;AACD,YAAIxJ,KAAK,IAAItU,GAAb,EAAkB;AAChB,iBAAO,CAAP;AACD;;AAEDsU,QAAAA,KAAK,MAAM,CAAX;AACAtU,QAAAA,GAAG,MAAM,CAAT;AACA6d,QAAAA,SAAS,MAAM,CAAf;AACAC,QAAAA,OAAO,MAAM,CAAb;AAEA,YAAI,SAASllB,MAAb,EAAqB,OAAO,CAAP;AAErB,YAAI3vB,CAAC,GAAG60C,OAAO,GAAGD,SAAlB;AACA,YAAIjB,CAAC,GAAG5c,GAAG,GAAGsU,KAAd;AACA,YAAIsF,GAAG,GAAGxxC,IAAI,CAACwpB,GAAL,CAAS3oB,CAAT,EAAY2zC,CAAZ,CAAV;AAEA,YAAImB,QAAQ,GAAG,KAAKrlC,KAAL,CAAWmlC,SAAX,EAAsBC,OAAtB,CAAf;AACA,YAAIE,UAAU,GAAGplB,MAAM,CAAClgB,KAAP,CAAa47B,KAAb,EAAoBtU,GAApB,CAAjB;;AAEA,aAAK,IAAIt9B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGk3C,GAApB,EAAyB,EAAEl3C,CAA3B,EAA8B;AAC5B,cAAIq7C,QAAQ,CAACr7C,CAAD,CAAR,KAAgBs7C,UAAU,CAACt7C,CAAD,CAA9B,EAAmC;AACjCuG,YAAAA,CAAC,GAAG80C,QAAQ,CAACr7C,CAAD,CAAZ;AACAk6C,YAAAA,CAAC,GAAGoB,UAAU,CAACt7C,CAAD,CAAd;AACA;AACD;AACF;;AAED,YAAIuG,CAAC,GAAG2zC,CAAR,EAAW,OAAO,CAAC,CAAR;AACX,YAAIA,CAAC,GAAG3zC,CAAR,EAAW,OAAO,CAAP;AACX,eAAO,CAAP;AACD,OAzDD,CAhlByB,CA2oBzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,eAASg1C,oBAAT,CAA+B/3C,MAA/B,EAAuCmS,GAAvC,EAA4ClS,UAA5C,EAAwDe,QAAxD,EAAkEg3C,GAAlE,EAAuE;AACrE;AACA,YAAIh4C,MAAM,CAAC7C,MAAP,KAAkB,CAAtB,EAAyB,OAAO,CAAC,CAAR,CAF4C,CAIrE;;AACA,YAAI,OAAO8C,UAAP,KAAsB,QAA1B,EAAoC;AAClCe,UAAAA,QAAQ,GAAGf,UAAX;AACAA,UAAAA,UAAU,GAAG,CAAb;AACD,SAHD,MAGO,IAAIA,UAAU,GAAG,UAAjB,EAA6B;AAClCA,UAAAA,UAAU,GAAG,UAAb;AACD,SAFM,MAEA,IAAIA,UAAU,GAAG,CAAC,UAAlB,EAA8B;AACnCA,UAAAA,UAAU,GAAG,CAAC,UAAd;AACD;;AACDA,QAAAA,UAAU,GAAG,CAACA,UAAd,CAbqE,CAa3C;;AAC1B,YAAI05B,KAAK,CAAC15B,UAAD,CAAT,EAAuB;AACrB;AACAA,UAAAA,UAAU,GAAG+3C,GAAG,GAAG,CAAH,GAAQh4C,MAAM,CAAC7C,MAAP,GAAgB,CAAxC;AACD,SAjBoE,CAmBrE;;;AACA,YAAI8C,UAAU,GAAG,CAAjB,EAAoBA,UAAU,GAAGD,MAAM,CAAC7C,MAAP,GAAgB8C,UAA7B;;AACpB,YAAIA,UAAU,IAAID,MAAM,CAAC7C,MAAzB,EAAiC;AAC/B,cAAI66C,GAAJ,EAAS,OAAO,CAAC,CAAR,CAAT,KACK/3C,UAAU,GAAGD,MAAM,CAAC7C,MAAP,GAAgB,CAA7B;AACN,SAHD,MAGO,IAAI8C,UAAU,GAAG,CAAjB,EAAoB;AACzB,cAAI+3C,GAAJ,EAAS/3C,UAAU,GAAG,CAAb,CAAT,KACK,OAAO,CAAC,CAAR;AACN,SA3BoE,CA6BrE;;;AACA,YAAI,OAAOkS,GAAP,KAAe,QAAnB,EAA6B;AAC3BA,UAAAA,GAAG,GAAGhT,MAAM,CAAC2rC,IAAP,CAAY34B,GAAZ,EAAiBnR,QAAjB,CAAN;AACD,SAhCoE,CAkCrE;;;AACA,YAAI7B,MAAM,CAACga,QAAP,CAAgBhH,GAAhB,CAAJ,EAA0B;AACxB;AACA,cAAIA,GAAG,CAAChV,MAAJ,KAAe,CAAnB,EAAsB;AACpB,mBAAO,CAAC,CAAR;AACD;;AACD,iBAAO86C,YAAY,CAACj4C,MAAD,EAASmS,GAAT,EAAclS,UAAd,EAA0Be,QAA1B,EAAoCg3C,GAApC,CAAnB;AACD,SAND,MAMO,IAAI,OAAO7lC,GAAP,KAAe,QAAnB,EAA6B;AAClCA,UAAAA,GAAG,GAAGA,GAAG,GAAG,IAAZ,CADkC,CACjB;;AACjB,cAAIhT,MAAM,CAAC21C,mBAAP,IACA,OAAO/0C,UAAU,CAACN,SAAX,CAAqBD,OAA5B,KAAwC,UAD5C,EACwD;AACtD,gBAAIw4C,GAAJ,EAAS;AACP,qBAAOj4C,UAAU,CAACN,SAAX,CAAqBD,OAArB,CAA6BtC,IAA7B,CAAkC8C,MAAlC,EAA0CmS,GAA1C,EAA+ClS,UAA/C,CAAP;AACD,aAFD,MAEO;AACL,qBAAOF,UAAU,CAACN,SAAX,CAAqBy4C,WAArB,CAAiCh7C,IAAjC,CAAsC8C,MAAtC,EAA8CmS,GAA9C,EAAmDlS,UAAnD,CAAP;AACD;AACF;;AACD,iBAAOg4C,YAAY,CAACj4C,MAAD,EAAS,CAAEmS,GAAF,CAAT,EAAkBlS,UAAlB,EAA8Be,QAA9B,EAAwCg3C,GAAxC,CAAnB;AACD;;AAED,cAAM,IAAIrC,SAAJ,CAAc,sCAAd,CAAN;AACD;;AAED,eAASsC,YAAT,CAAuBhE,GAAvB,EAA4B9hC,GAA5B,EAAiClS,UAAjC,EAA6Ce,QAA7C,EAAuDg3C,GAAvD,EAA4D;AAC1D,YAAIG,SAAS,GAAG,CAAhB;AACA,YAAIC,SAAS,GAAGnE,GAAG,CAAC92C,MAApB;AACA,YAAIk7C,SAAS,GAAGlmC,GAAG,CAAChV,MAApB;;AAEA,YAAI6D,QAAQ,KAAKsF,SAAjB,EAA4B;AAC1BtF,UAAAA,QAAQ,GAAGuT,MAAM,CAACvT,QAAD,CAAN,CAAiBjC,WAAjB,EAAX;;AACA,cAAIiC,QAAQ,KAAK,MAAb,IAAuBA,QAAQ,KAAK,OAApC,IACAA,QAAQ,KAAK,SADb,IAC0BA,QAAQ,KAAK,UAD3C,EACuD;AACrD,gBAAIizC,GAAG,CAAC92C,MAAJ,GAAa,CAAb,IAAkBgV,GAAG,CAAChV,MAAJ,GAAa,CAAnC,EAAsC;AACpC,qBAAO,CAAC,CAAR;AACD;;AACDg7C,YAAAA,SAAS,GAAG,CAAZ;AACAC,YAAAA,SAAS,IAAI,CAAb;AACAC,YAAAA,SAAS,IAAI,CAAb;AACAp4C,YAAAA,UAAU,IAAI,CAAd;AACD;AACF;;AAED,iBAASwgB,IAAT,CAAe2O,GAAf,EAAoB5yB,CAApB,EAAuB;AACrB,cAAI27C,SAAS,KAAK,CAAlB,EAAqB;AACnB,mBAAO/oB,GAAG,CAAC5yB,CAAD,CAAV;AACD,WAFD,MAEO;AACL,mBAAO4yB,GAAG,CAAC1T,YAAJ,CAAiBlf,CAAC,GAAG27C,SAArB,CAAP;AACD;AACF;;AAED,YAAI37C,CAAJ;;AACA,YAAIw7C,GAAJ,EAAS;AACP,cAAIM,UAAU,GAAG,CAAC,CAAlB;;AACA,eAAK97C,CAAC,GAAGyD,UAAT,EAAqBzD,CAAC,GAAG47C,SAAzB,EAAoC57C,CAAC,EAArC,EAAyC;AACvC,gBAAIikB,IAAI,CAACwzB,GAAD,EAAMz3C,CAAN,CAAJ,KAAiBikB,IAAI,CAACtO,GAAD,EAAMmmC,UAAU,KAAK,CAAC,CAAhB,GAAoB,CAApB,GAAwB97C,CAAC,GAAG87C,UAAlC,CAAzB,EAAwE;AACtE,kBAAIA,UAAU,KAAK,CAAC,CAApB,EAAuBA,UAAU,GAAG97C,CAAb;AACvB,kBAAIA,CAAC,GAAG87C,UAAJ,GAAiB,CAAjB,KAAuBD,SAA3B,EAAsC,OAAOC,UAAU,GAAGH,SAApB;AACvC,aAHD,MAGO;AACL,kBAAIG,UAAU,KAAK,CAAC,CAApB,EAAuB97C,CAAC,IAAIA,CAAC,GAAG87C,UAAT;AACvBA,cAAAA,UAAU,GAAG,CAAC,CAAd;AACD;AACF;AACF,SAXD,MAWO;AACL,cAAIr4C,UAAU,GAAGo4C,SAAb,GAAyBD,SAA7B,EAAwCn4C,UAAU,GAAGm4C,SAAS,GAAGC,SAAzB;;AACxC,eAAK77C,CAAC,GAAGyD,UAAT,EAAqBzD,CAAC,IAAI,CAA1B,EAA6BA,CAAC,EAA9B,EAAkC;AAChC,gBAAI+7C,KAAK,GAAG,IAAZ;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,SAApB,EAA+BG,CAAC,EAAhC,EAAoC;AAClC,kBAAI/3B,IAAI,CAACwzB,GAAD,EAAMz3C,CAAC,GAAGg8C,CAAV,CAAJ,KAAqB/3B,IAAI,CAACtO,GAAD,EAAMqmC,CAAN,CAA7B,EAAuC;AACrCD,gBAAAA,KAAK,GAAG,KAAR;AACA;AACD;AACF;;AACD,gBAAIA,KAAJ,EAAW,OAAO/7C,CAAP;AACZ;AACF;;AAED,eAAO,CAAC,CAAR;AACD;;AAED2C,MAAAA,MAAM,CAACM,SAAP,CAAiBg5C,QAAjB,GAA4B,SAASA,QAAT,CAAmBtmC,GAAnB,EAAwBlS,UAAxB,EAAoCe,QAApC,EAA8C;AACxE,eAAO,KAAKxB,OAAL,CAAa2S,GAAb,EAAkBlS,UAAlB,EAA8Be,QAA9B,MAA4C,CAAC,CAApD;AACD,OAFD;;AAIA7B,MAAAA,MAAM,CAACM,SAAP,CAAiBD,OAAjB,GAA2B,SAASA,OAAT,CAAkB2S,GAAlB,EAAuBlS,UAAvB,EAAmCe,QAAnC,EAA6C;AACtE,eAAO+2C,oBAAoB,CAAC,IAAD,EAAO5lC,GAAP,EAAYlS,UAAZ,EAAwBe,QAAxB,EAAkC,IAAlC,CAA3B;AACD,OAFD;;AAIA7B,MAAAA,MAAM,CAACM,SAAP,CAAiBy4C,WAAjB,GAA+B,SAASA,WAAT,CAAsB/lC,GAAtB,EAA2BlS,UAA3B,EAAuCe,QAAvC,EAAiD;AAC9E,eAAO+2C,oBAAoB,CAAC,IAAD,EAAO5lC,GAAP,EAAYlS,UAAZ,EAAwBe,QAAxB,EAAkC,KAAlC,CAA3B;AACD,OAFD;;AAIA,eAAS03C,QAAT,CAAmBtpB,GAAnB,EAAwB/Q,MAAxB,EAAgC1a,MAAhC,EAAwCxG,MAAxC,EAAgD;AAC9CwG,QAAAA,MAAM,GAAGg1C,MAAM,CAACh1C,MAAD,CAAN,IAAkB,CAA3B;AACA,YAAI2V,SAAS,GAAG8V,GAAG,CAACjyB,MAAJ,GAAawG,MAA7B;;AACA,YAAI,CAACxG,MAAL,EAAa;AACXA,UAAAA,MAAM,GAAGmc,SAAT;AACD,SAFD,MAEO;AACLnc,UAAAA,MAAM,GAAGw7C,MAAM,CAACx7C,MAAD,CAAf;;AACA,cAAIA,MAAM,GAAGmc,SAAb,EAAwB;AACtBnc,YAAAA,MAAM,GAAGmc,SAAT;AACD;AACF,SAV6C,CAY9C;;;AACA,YAAIs/B,MAAM,GAAGv6B,MAAM,CAAClhB,MAApB;AACA,YAAIy7C,MAAM,GAAG,CAAT,KAAe,CAAnB,EAAsB,MAAM,IAAIjD,SAAJ,CAAc,oBAAd,CAAN;;AAEtB,YAAIx4C,MAAM,GAAGy7C,MAAM,GAAG,CAAtB,EAAyB;AACvBz7C,UAAAA,MAAM,GAAGy7C,MAAM,GAAG,CAAlB;AACD;;AACD,aAAK,IAAIp8C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGW,MAApB,EAA4B,EAAEX,CAA9B,EAAiC;AAC/B,cAAIsf,MAAM,GAAGlC,QAAQ,CAACyE,MAAM,CAACxC,MAAP,CAAcrf,CAAC,GAAG,CAAlB,EAAqB,CAArB,CAAD,EAA0B,EAA1B,CAArB;AACA,cAAIm9B,KAAK,CAAC7d,MAAD,CAAT,EAAmB,OAAOtf,CAAP;AACnB4yB,UAAAA,GAAG,CAACzrB,MAAM,GAAGnH,CAAV,CAAH,GAAkBsf,MAAlB;AACD;;AACD,eAAOtf,CAAP;AACD;;AAED,eAASq8C,SAAT,CAAoBzpB,GAApB,EAAyB/Q,MAAzB,EAAiC1a,MAAjC,EAAyCxG,MAAzC,EAAiD;AAC/C,eAAO27C,UAAU,CAAClC,WAAW,CAACv4B,MAAD,EAAS+Q,GAAG,CAACjyB,MAAJ,GAAawG,MAAtB,CAAZ,EAA2CyrB,GAA3C,EAAgDzrB,MAAhD,EAAwDxG,MAAxD,CAAjB;AACD;;AAED,eAAS47C,UAAT,CAAqB3pB,GAArB,EAA0B/Q,MAA1B,EAAkC1a,MAAlC,EAA0CxG,MAA1C,EAAkD;AAChD,eAAO27C,UAAU,CAACE,YAAY,CAAC36B,MAAD,CAAb,EAAuB+Q,GAAvB,EAA4BzrB,MAA5B,EAAoCxG,MAApC,CAAjB;AACD;;AAED,eAAS87C,WAAT,CAAsB7pB,GAAtB,EAA2B/Q,MAA3B,EAAmC1a,MAAnC,EAA2CxG,MAA3C,EAAmD;AACjD,eAAO47C,UAAU,CAAC3pB,GAAD,EAAM/Q,MAAN,EAAc1a,MAAd,EAAsBxG,MAAtB,CAAjB;AACD;;AAED,eAAS+7C,WAAT,CAAsB9pB,GAAtB,EAA2B/Q,MAA3B,EAAmC1a,MAAnC,EAA2CxG,MAA3C,EAAmD;AACjD,eAAO27C,UAAU,CAACjC,aAAa,CAACx4B,MAAD,CAAd,EAAwB+Q,GAAxB,EAA6BzrB,MAA7B,EAAqCxG,MAArC,CAAjB;AACD;;AAED,eAASg8C,SAAT,CAAoB/pB,GAApB,EAAyB/Q,MAAzB,EAAiC1a,MAAjC,EAAyCxG,MAAzC,EAAiD;AAC/C,eAAO27C,UAAU,CAACM,cAAc,CAAC/6B,MAAD,EAAS+Q,GAAG,CAACjyB,MAAJ,GAAawG,MAAtB,CAAf,EAA8CyrB,GAA9C,EAAmDzrB,MAAnD,EAA2DxG,MAA3D,CAAjB;AACD;;AAEDgC,MAAAA,MAAM,CAACM,SAAP,CAAiBqE,KAAjB,GAAyB,SAASA,KAAT,CAAgBua,MAAhB,EAAwB1a,MAAxB,EAAgCxG,MAAhC,EAAwC6D,QAAxC,EAAkD;AACzE;AACA,YAAI2C,MAAM,KAAK2C,SAAf,EAA0B;AACxBtF,UAAAA,QAAQ,GAAG,MAAX;AACA7D,UAAAA,MAAM,GAAG,KAAKA,MAAd;AACAwG,UAAAA,MAAM,GAAG,CAAT,CAHwB,CAI1B;AACC,SALD,MAKO,IAAIxG,MAAM,KAAKmJ,SAAX,IAAwB,OAAO3C,MAAP,KAAkB,QAA9C,EAAwD;AAC7D3C,UAAAA,QAAQ,GAAG2C,MAAX;AACAxG,UAAAA,MAAM,GAAG,KAAKA,MAAd;AACAwG,UAAAA,MAAM,GAAG,CAAT,CAH6D,CAI/D;AACC,SALM,MAKA,IAAI01C,QAAQ,CAAC11C,MAAD,CAAZ,EAAsB;AAC3BA,UAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;;AACA,cAAI01C,QAAQ,CAACl8C,MAAD,CAAZ,EAAsB;AACpBA,YAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA,gBAAI6D,QAAQ,KAAKsF,SAAjB,EAA4BtF,QAAQ,GAAG,MAAX;AAC7B,WAHD,MAGO;AACLA,YAAAA,QAAQ,GAAG7D,MAAX;AACAA,YAAAA,MAAM,GAAGmJ,SAAT;AACD,WAR0B,CAS7B;;AACC,SAVM,MAUA;AACL,gBAAM,IAAIxJ,KAAJ,CACJ,yEADI,CAAN;AAGD;;AAED,YAAIwc,SAAS,GAAG,KAAKnc,MAAL,GAAcwG,MAA9B;AACA,YAAIxG,MAAM,KAAKmJ,SAAX,IAAwBnJ,MAAM,GAAGmc,SAArC,EAAgDnc,MAAM,GAAGmc,SAAT;;AAEhD,YAAK+E,MAAM,CAAClhB,MAAP,GAAgB,CAAhB,KAAsBA,MAAM,GAAG,CAAT,IAAcwG,MAAM,GAAG,CAA7C,CAAD,IAAqDA,MAAM,GAAG,KAAKxG,MAAvE,EAA+E;AAC7E,gBAAM,IAAIm4C,UAAJ,CAAe,wCAAf,CAAN;AACD;;AAED,YAAI,CAACt0C,QAAL,EAAeA,QAAQ,GAAG,MAAX;AAEf,YAAI21C,WAAW,GAAG,KAAlB;;AACA,iBAAS;AACP,kBAAQ31C,QAAR;AACE,iBAAK,KAAL;AACE,qBAAO03C,QAAQ,CAAC,IAAD,EAAOr6B,MAAP,EAAe1a,MAAf,EAAuBxG,MAAvB,CAAf;;AAEF,iBAAK,MAAL;AACA,iBAAK,OAAL;AACE,qBAAO07C,SAAS,CAAC,IAAD,EAAOx6B,MAAP,EAAe1a,MAAf,EAAuBxG,MAAvB,CAAhB;;AAEF,iBAAK,OAAL;AACE,qBAAO47C,UAAU,CAAC,IAAD,EAAO16B,MAAP,EAAe1a,MAAf,EAAuBxG,MAAvB,CAAjB;;AAEF,iBAAK,QAAL;AACA,iBAAK,QAAL;AACE,qBAAO87C,WAAW,CAAC,IAAD,EAAO56B,MAAP,EAAe1a,MAAf,EAAuBxG,MAAvB,CAAlB;;AAEF,iBAAK,QAAL;AACE;AACA,qBAAO+7C,WAAW,CAAC,IAAD,EAAO76B,MAAP,EAAe1a,MAAf,EAAuBxG,MAAvB,CAAlB;;AAEF,iBAAK,MAAL;AACA,iBAAK,OAAL;AACA,iBAAK,SAAL;AACA,iBAAK,UAAL;AACE,qBAAOg8C,SAAS,CAAC,IAAD,EAAO96B,MAAP,EAAe1a,MAAf,EAAuBxG,MAAvB,CAAhB;;AAEF;AACE,kBAAIw5C,WAAJ,EAAiB,MAAM,IAAIhB,SAAJ,CAAc,uBAAuB30C,QAArC,CAAN;AACjBA,cAAAA,QAAQ,GAAG,CAAC,KAAKA,QAAN,EAAgBjC,WAAhB,EAAX;AACA43C,cAAAA,WAAW,GAAG,IAAd;AA5BJ;AA8BD;AACF,OAtED;;AAwEAx3C,MAAAA,MAAM,CAACM,SAAP,CAAiB65C,MAAjB,GAA0B,SAASA,MAAT,GAAmB;AAC3C,eAAO;AACLtlC,UAAAA,IAAI,EAAE,QADD;AAELpU,UAAAA,IAAI,EAAE2wB,KAAK,CAAC9wB,SAAN,CAAgB+S,KAAhB,CAAsBtV,IAAtB,CAA2B,KAAKq8C,IAAL,IAAa,IAAxC,EAA8C,CAA9C;AAFD,SAAP;AAID,OALD;;AAOA,eAASpC,WAAT,CAAsB/nB,GAAtB,EAA2Bgf,KAA3B,EAAkCtU,GAAlC,EAAuC;AACrC,YAAIsU,KAAK,KAAK,CAAV,IAAetU,GAAG,KAAK1K,GAAG,CAACjyB,MAA/B,EAAuC;AACrC,iBAAOkyB,MAAM,CAACikB,aAAP,CAAqBlkB,GAArB,CAAP;AACD,SAFD,MAEO;AACL,iBAAOC,MAAM,CAACikB,aAAP,CAAqBlkB,GAAG,CAAC5c,KAAJ,CAAU47B,KAAV,EAAiBtU,GAAjB,CAArB,CAAP;AACD;AACF;;AAED,eAASkd,SAAT,CAAoB5nB,GAApB,EAAyBgf,KAAzB,EAAgCtU,GAAhC,EAAqC;AACnCA,QAAAA,GAAG,GAAG53B,IAAI,CAACwpB,GAAL,CAAS0D,GAAG,CAACjyB,MAAb,EAAqB28B,GAArB,CAAN;AACA,YAAI6M,GAAG,GAAG,EAAV;AAEA,YAAInqC,CAAC,GAAG4xC,KAAR;;AACA,eAAO5xC,CAAC,GAAGs9B,GAAX,EAAgB;AACd,cAAI0f,SAAS,GAAGpqB,GAAG,CAAC5yB,CAAD,CAAnB;AACA,cAAIi9C,SAAS,GAAG,IAAhB;AACA,cAAIC,gBAAgB,GAAIF,SAAS,GAAG,IAAb,GAAqB,CAArB,GAClBA,SAAS,GAAG,IAAb,GAAqB,CAArB,GACCA,SAAS,GAAG,IAAb,GAAqB,CAArB,GACA,CAHJ;;AAKA,cAAIh9C,CAAC,GAAGk9C,gBAAJ,IAAwB5f,GAA5B,EAAiC;AAC/B,gBAAI6f,UAAJ,EAAgBC,SAAhB,EAA2BC,UAA3B,EAAuCC,aAAvC;;AAEA,oBAAQJ,gBAAR;AACE,mBAAK,CAAL;AACE,oBAAIF,SAAS,GAAG,IAAhB,EAAsB;AACpBC,kBAAAA,SAAS,GAAGD,SAAZ;AACD;;AACD;;AACF,mBAAK,CAAL;AACEG,gBAAAA,UAAU,GAAGvqB,GAAG,CAAC5yB,CAAC,GAAG,CAAL,CAAhB;;AACA,oBAAI,CAACm9C,UAAU,GAAG,IAAd,MAAwB,IAA5B,EAAkC;AAChCG,kBAAAA,aAAa,GAAG,CAACN,SAAS,GAAG,IAAb,KAAsB,GAAtB,GAA6BG,UAAU,GAAG,IAA1D;;AACA,sBAAIG,aAAa,GAAG,IAApB,EAA0B;AACxBL,oBAAAA,SAAS,GAAGK,aAAZ;AACD;AACF;;AACD;;AACF,mBAAK,CAAL;AACEH,gBAAAA,UAAU,GAAGvqB,GAAG,CAAC5yB,CAAC,GAAG,CAAL,CAAhB;AACAo9C,gBAAAA,SAAS,GAAGxqB,GAAG,CAAC5yB,CAAC,GAAG,CAAL,CAAf;;AACA,oBAAI,CAACm9C,UAAU,GAAG,IAAd,MAAwB,IAAxB,IAAgC,CAACC,SAAS,GAAG,IAAb,MAAuB,IAA3D,EAAiE;AAC/DE,kBAAAA,aAAa,GAAG,CAACN,SAAS,GAAG,GAAb,KAAqB,GAArB,GAA2B,CAACG,UAAU,GAAG,IAAd,KAAuB,GAAlD,GAAyDC,SAAS,GAAG,IAArF;;AACA,sBAAIE,aAAa,GAAG,KAAhB,KAA0BA,aAAa,GAAG,MAAhB,IAA0BA,aAAa,GAAG,MAApE,CAAJ,EAAiF;AAC/EL,oBAAAA,SAAS,GAAGK,aAAZ;AACD;AACF;;AACD;;AACF,mBAAK,CAAL;AACEH,gBAAAA,UAAU,GAAGvqB,GAAG,CAAC5yB,CAAC,GAAG,CAAL,CAAhB;AACAo9C,gBAAAA,SAAS,GAAGxqB,GAAG,CAAC5yB,CAAC,GAAG,CAAL,CAAf;AACAq9C,gBAAAA,UAAU,GAAGzqB,GAAG,CAAC5yB,CAAC,GAAG,CAAL,CAAhB;;AACA,oBAAI,CAACm9C,UAAU,GAAG,IAAd,MAAwB,IAAxB,IAAgC,CAACC,SAAS,GAAG,IAAb,MAAuB,IAAvD,IAA+D,CAACC,UAAU,GAAG,IAAd,MAAwB,IAA3F,EAAiG;AAC/FC,kBAAAA,aAAa,GAAG,CAACN,SAAS,GAAG,GAAb,KAAqB,IAArB,GAA4B,CAACG,UAAU,GAAG,IAAd,KAAuB,GAAnD,GAAyD,CAACC,SAAS,GAAG,IAAb,KAAsB,GAA/E,GAAsFC,UAAU,GAAG,IAAnH;;AACA,sBAAIC,aAAa,GAAG,MAAhB,IAA0BA,aAAa,GAAG,QAA9C,EAAwD;AACtDL,oBAAAA,SAAS,GAAGK,aAAZ;AACD;AACF;;AAlCL;AAoCD;;AAED,cAAIL,SAAS,KAAK,IAAlB,EAAwB;AACtB;AACA;AACAA,YAAAA,SAAS,GAAG,MAAZ;AACAC,YAAAA,gBAAgB,GAAG,CAAnB;AACD,WALD,MAKO,IAAID,SAAS,GAAG,MAAhB,EAAwB;AAC7B;AACAA,YAAAA,SAAS,IAAI,OAAb;AACA9S,YAAAA,GAAG,CAACz7B,IAAJ,CAASuuC,SAAS,KAAK,EAAd,GAAmB,KAAnB,GAA2B,MAApC;AACAA,YAAAA,SAAS,GAAG,SAASA,SAAS,GAAG,KAAjC;AACD;;AAED9S,UAAAA,GAAG,CAACz7B,IAAJ,CAASuuC,SAAT;AACAj9C,UAAAA,CAAC,IAAIk9C,gBAAL;AACD;;AAED,eAAOK,qBAAqB,CAACpT,GAAD,CAA5B;AACD,OA99BwB,CAg+BzB;AACA;AACA;;;AACA,UAAIqT,oBAAoB,GAAG,MAA3B;;AAEA,eAASD,qBAAT,CAAgCE,UAAhC,EAA4C;AAC1C,YAAIvG,GAAG,GAAGuG,UAAU,CAAC98C,MAArB;;AACA,YAAIu2C,GAAG,IAAIsG,oBAAX,EAAiC;AAC/B,iBAAOzlC,MAAM,CAAC2lC,YAAP,CAAoB58C,KAApB,CAA0BiX,MAA1B,EAAkC0lC,UAAlC,CAAP,CAD+B,CACsB;AACtD,SAJyC,CAM1C;;;AACA,YAAItT,GAAG,GAAG,EAAV;AACA,YAAInqC,CAAC,GAAG,CAAR;;AACA,eAAOA,CAAC,GAAGk3C,GAAX,EAAgB;AACd/M,UAAAA,GAAG,IAAIpyB,MAAM,CAAC2lC,YAAP,CAAoB58C,KAApB,CACLiX,MADK,EAEL0lC,UAAU,CAACznC,KAAX,CAAiBhW,CAAjB,EAAoBA,CAAC,IAAIw9C,oBAAzB,CAFK,CAAP;AAID;;AACD,eAAOrT,GAAP;AACD;;AAED,eAASsQ,UAAT,CAAqB7nB,GAArB,EAA0Bgf,KAA1B,EAAiCtU,GAAjC,EAAsC;AACpC,YAAI6S,GAAG,GAAG,EAAV;AACA7S,QAAAA,GAAG,GAAG53B,IAAI,CAACwpB,GAAL,CAAS0D,GAAG,CAACjyB,MAAb,EAAqB28B,GAArB,CAAN;;AAEA,aAAK,IAAIt9B,CAAC,GAAG4xC,KAAb,EAAoB5xC,CAAC,GAAGs9B,GAAxB,EAA6B,EAAEt9B,CAA/B,EAAkC;AAChCmwC,UAAAA,GAAG,IAAIp4B,MAAM,CAAC2lC,YAAP,CAAoB9qB,GAAG,CAAC5yB,CAAD,CAAH,GAAS,IAA7B,CAAP;AACD;;AACD,eAAOmwC,GAAP;AACD;;AAED,eAASuK,WAAT,CAAsB9nB,GAAtB,EAA2Bgf,KAA3B,EAAkCtU,GAAlC,EAAuC;AACrC,YAAI6S,GAAG,GAAG,EAAV;AACA7S,QAAAA,GAAG,GAAG53B,IAAI,CAACwpB,GAAL,CAAS0D,GAAG,CAACjyB,MAAb,EAAqB28B,GAArB,CAAN;;AAEA,aAAK,IAAIt9B,CAAC,GAAG4xC,KAAb,EAAoB5xC,CAAC,GAAGs9B,GAAxB,EAA6B,EAAEt9B,CAA/B,EAAkC;AAChCmwC,UAAAA,GAAG,IAAIp4B,MAAM,CAAC2lC,YAAP,CAAoB9qB,GAAG,CAAC5yB,CAAD,CAAvB,CAAP;AACD;;AACD,eAAOmwC,GAAP;AACD;;AAED,eAASoK,QAAT,CAAmB3nB,GAAnB,EAAwBgf,KAAxB,EAA+BtU,GAA/B,EAAoC;AAClC,YAAI4Z,GAAG,GAAGtkB,GAAG,CAACjyB,MAAd;AAEA,YAAI,CAACixC,KAAD,IAAUA,KAAK,GAAG,CAAtB,EAAyBA,KAAK,GAAG,CAAR;AACzB,YAAI,CAACtU,GAAD,IAAQA,GAAG,GAAG,CAAd,IAAmBA,GAAG,GAAG4Z,GAA7B,EAAkC5Z,GAAG,GAAG4Z,GAAN;AAElC,YAAItxC,GAAG,GAAG,EAAV;;AACA,aAAK,IAAI5F,CAAC,GAAG4xC,KAAb,EAAoB5xC,CAAC,GAAGs9B,GAAxB,EAA6B,EAAEt9B,CAA/B,EAAkC;AAChC4F,UAAAA,GAAG,IAAIqqC,KAAK,CAACrd,GAAG,CAAC5yB,CAAD,CAAJ,CAAZ;AACD;;AACD,eAAO4F,GAAP;AACD;;AAED,eAASg1C,YAAT,CAAuBhoB,GAAvB,EAA4Bgf,KAA5B,EAAmCtU,GAAnC,EAAwC;AACtC,YAAI5gB,KAAK,GAAGkW,GAAG,CAAC5c,KAAJ,CAAU47B,KAAV,EAAiBtU,GAAjB,CAAZ;AACA,YAAI6M,GAAG,GAAG,EAAV;;AACA,aAAK,IAAInqC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0c,KAAK,CAAC/b,MAA1B,EAAkCX,CAAC,IAAI,CAAvC,EAA0C;AACxCmqC,UAAAA,GAAG,IAAIpyB,MAAM,CAAC2lC,YAAP,CAAoBhhC,KAAK,CAAC1c,CAAD,CAAL,GAAW0c,KAAK,CAAC1c,CAAC,GAAG,CAAL,CAAL,GAAe,GAA9C,CAAP;AACD;;AACD,eAAOmqC,GAAP;AACD;;AAEDxnC,MAAAA,MAAM,CAACM,SAAP,CAAiB+S,KAAjB,GAAyB,SAASA,KAAT,CAAgB47B,KAAhB,EAAuBtU,GAAvB,EAA4B;AACnD,YAAI4Z,GAAG,GAAG,KAAKv2C,MAAf;AACAixC,QAAAA,KAAK,GAAG,CAAC,CAACA,KAAV;AACAtU,QAAAA,GAAG,GAAGA,GAAG,KAAKxzB,SAAR,GAAoBotC,GAApB,GAA0B,CAAC,CAAC5Z,GAAlC;;AAEA,YAAIsU,KAAK,GAAG,CAAZ,EAAe;AACbA,UAAAA,KAAK,IAAIsF,GAAT;AACA,cAAItF,KAAK,GAAG,CAAZ,EAAeA,KAAK,GAAG,CAAR;AAChB,SAHD,MAGO,IAAIA,KAAK,GAAGsF,GAAZ,EAAiB;AACtBtF,UAAAA,KAAK,GAAGsF,GAAR;AACD;;AAED,YAAI5Z,GAAG,GAAG,CAAV,EAAa;AACXA,UAAAA,GAAG,IAAI4Z,GAAP;AACA,cAAI5Z,GAAG,GAAG,CAAV,EAAaA,GAAG,GAAG,CAAN;AACd,SAHD,MAGO,IAAIA,GAAG,GAAG4Z,GAAV,EAAe;AACpB5Z,UAAAA,GAAG,GAAG4Z,GAAN;AACD;;AAED,YAAI5Z,GAAG,GAAGsU,KAAV,EAAiBtU,GAAG,GAAGsU,KAAN;AAEjB,YAAI+L,MAAJ;;AACA,YAAIh7C,MAAM,CAAC21C,mBAAX,EAAgC;AAC9BqF,UAAAA,MAAM,GAAG,KAAKhF,QAAL,CAAc/G,KAAd,EAAqBtU,GAArB,CAAT;AACAqgB,UAAAA,MAAM,CAAClF,SAAP,GAAmB91C,MAAM,CAACM,SAA1B;AACD,SAHD,MAGO;AACL,cAAI26C,QAAQ,GAAGtgB,GAAG,GAAGsU,KAArB;AACA+L,UAAAA,MAAM,GAAG,IAAIh7C,MAAJ,CAAWi7C,QAAX,EAAqB9zC,SAArB,CAAT;;AACA,eAAK,IAAI9J,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG49C,QAApB,EAA8B,EAAE59C,CAAhC,EAAmC;AACjC29C,YAAAA,MAAM,CAAC39C,CAAD,CAAN,GAAY,KAAKA,CAAC,GAAG4xC,KAAT,CAAZ;AACD;AACF;;AAED,eAAO+L,MAAP;AACD,OAlCD;AAoCA;AACF;AACA;;;AACE,eAASE,WAAT,CAAsB12C,MAAtB,EAA8B22C,GAA9B,EAAmCn9C,MAAnC,EAA2C;AACzC,YAAKwG,MAAM,GAAG,CAAV,KAAiB,CAAjB,IAAsBA,MAAM,GAAG,CAAnC,EAAsC,MAAM,IAAI2xC,UAAJ,CAAe,oBAAf,CAAN;AACtC,YAAI3xC,MAAM,GAAG22C,GAAT,GAAen9C,MAAnB,EAA2B,MAAM,IAAIm4C,UAAJ,CAAe,uCAAf,CAAN;AAC5B;;AAEDn2C,MAAAA,MAAM,CAACM,SAAP,CAAiB86C,UAAjB,GAA8B,SAASA,UAAT,CAAqB52C,MAArB,EAA6B9D,UAA7B,EAAyC26C,QAAzC,EAAmD;AAC/E72C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA9D,QAAAA,UAAU,GAAGA,UAAU,GAAG,CAA1B;AACA,YAAI,CAAC26C,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS9D,UAAT,EAAqB,KAAK1C,MAA1B,CAAX;AAEf,YAAIgV,GAAG,GAAG,KAAKxO,MAAL,CAAV;AACA,YAAI82C,GAAG,GAAG,CAAV;AACA,YAAIj+C,CAAC,GAAG,CAAR;;AACA,eAAO,EAAEA,CAAF,GAAMqD,UAAN,KAAqB46C,GAAG,IAAI,KAA5B,CAAP,EAA2C;AACzCtoC,UAAAA,GAAG,IAAI,KAAKxO,MAAM,GAAGnH,CAAd,IAAmBi+C,GAA1B;AACD;;AAED,eAAOtoC,GAAP;AACD,OAbD;;AAeAhT,MAAAA,MAAM,CAACM,SAAP,CAAiBi7C,UAAjB,GAA8B,SAASA,UAAT,CAAqB/2C,MAArB,EAA6B9D,UAA7B,EAAyC26C,QAAzC,EAAmD;AAC/E72C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA9D,QAAAA,UAAU,GAAGA,UAAU,GAAG,CAA1B;;AACA,YAAI,CAAC26C,QAAL,EAAe;AACbH,UAAAA,WAAW,CAAC12C,MAAD,EAAS9D,UAAT,EAAqB,KAAK1C,MAA1B,CAAX;AACD;;AAED,YAAIgV,GAAG,GAAG,KAAKxO,MAAM,GAAG,EAAE9D,UAAhB,CAAV;AACA,YAAI46C,GAAG,GAAG,CAAV;;AACA,eAAO56C,UAAU,GAAG,CAAb,KAAmB46C,GAAG,IAAI,KAA1B,CAAP,EAAyC;AACvCtoC,UAAAA,GAAG,IAAI,KAAKxO,MAAM,GAAG,EAAE9D,UAAhB,IAA8B46C,GAArC;AACD;;AAED,eAAOtoC,GAAP;AACD,OAdD;;AAgBAhT,MAAAA,MAAM,CAACM,SAAP,CAAiB6b,SAAjB,GAA6B,SAASA,SAAT,CAAoB3X,MAApB,EAA4B62C,QAA5B,EAAsC;AACjE,YAAI,CAACA,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS,CAAT,EAAY,KAAKxG,MAAjB,CAAX;AACf,eAAO,KAAKwG,MAAL,CAAP;AACD,OAHD;;AAKAxE,MAAAA,MAAM,CAACM,SAAP,CAAiBk7C,YAAjB,GAAgC,SAASA,YAAT,CAAuBh3C,MAAvB,EAA+B62C,QAA/B,EAAyC;AACvE,YAAI,CAACA,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS,CAAT,EAAY,KAAKxG,MAAjB,CAAX;AACf,eAAO,KAAKwG,MAAL,IAAgB,KAAKA,MAAM,GAAG,CAAd,KAAoB,CAA3C;AACD,OAHD;;AAKAxE,MAAAA,MAAM,CAACM,SAAP,CAAiBic,YAAjB,GAAgC,SAASA,YAAT,CAAuB/X,MAAvB,EAA+B62C,QAA/B,EAAyC;AACvE,YAAI,CAACA,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS,CAAT,EAAY,KAAKxG,MAAjB,CAAX;AACf,eAAQ,KAAKwG,MAAL,KAAgB,CAAjB,GAAsB,KAAKA,MAAM,GAAG,CAAd,CAA7B;AACD,OAHD;;AAKAxE,MAAAA,MAAM,CAACM,SAAP,CAAiBm7C,YAAjB,GAAgC,SAASA,YAAT,CAAuBj3C,MAAvB,EAA+B62C,QAA/B,EAAyC;AACvE,YAAI,CAACA,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS,CAAT,EAAY,KAAKxG,MAAjB,CAAX;AAEf,eAAO,CAAE,KAAKwG,MAAL,CAAD,GACH,KAAKA,MAAM,GAAG,CAAd,KAAoB,CADjB,GAEH,KAAKA,MAAM,GAAG,CAAd,KAAoB,EAFlB,IAGF,KAAKA,MAAM,GAAG,CAAd,IAAmB,SAHxB;AAID,OAPD;;AASAxE,MAAAA,MAAM,CAACM,SAAP,CAAiB0c,YAAjB,GAAgC,SAASA,YAAT,CAAuBxY,MAAvB,EAA+B62C,QAA/B,EAAyC;AACvE,YAAI,CAACA,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS,CAAT,EAAY,KAAKxG,MAAjB,CAAX;AAEf,eAAQ,KAAKwG,MAAL,IAAe,SAAhB,IACH,KAAKA,MAAM,GAAG,CAAd,KAAoB,EAArB,GACA,KAAKA,MAAM,GAAG,CAAd,KAAoB,CADpB,GAED,KAAKA,MAAM,GAAG,CAAd,CAHK,CAAP;AAID,OAPD;;AASAxE,MAAAA,MAAM,CAACM,SAAP,CAAiBo7C,SAAjB,GAA6B,SAASA,SAAT,CAAoBl3C,MAApB,EAA4B9D,UAA5B,EAAwC26C,QAAxC,EAAkD;AAC7E72C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA9D,QAAAA,UAAU,GAAGA,UAAU,GAAG,CAA1B;AACA,YAAI,CAAC26C,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS9D,UAAT,EAAqB,KAAK1C,MAA1B,CAAX;AAEf,YAAIgV,GAAG,GAAG,KAAKxO,MAAL,CAAV;AACA,YAAI82C,GAAG,GAAG,CAAV;AACA,YAAIj+C,CAAC,GAAG,CAAR;;AACA,eAAO,EAAEA,CAAF,GAAMqD,UAAN,KAAqB46C,GAAG,IAAI,KAA5B,CAAP,EAA2C;AACzCtoC,UAAAA,GAAG,IAAI,KAAKxO,MAAM,GAAGnH,CAAd,IAAmBi+C,GAA1B;AACD;;AACDA,QAAAA,GAAG,IAAI,IAAP;AAEA,YAAItoC,GAAG,IAAIsoC,GAAX,EAAgBtoC,GAAG,IAAIjQ,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAY,IAAIvD,UAAhB,CAAP;AAEhB,eAAOsS,GAAP;AACD,OAhBD;;AAkBAhT,MAAAA,MAAM,CAACM,SAAP,CAAiBq7C,SAAjB,GAA6B,SAASA,SAAT,CAAoBn3C,MAApB,EAA4B9D,UAA5B,EAAwC26C,QAAxC,EAAkD;AAC7E72C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA9D,QAAAA,UAAU,GAAGA,UAAU,GAAG,CAA1B;AACA,YAAI,CAAC26C,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS9D,UAAT,EAAqB,KAAK1C,MAA1B,CAAX;AAEf,YAAIX,CAAC,GAAGqD,UAAR;AACA,YAAI46C,GAAG,GAAG,CAAV;AACA,YAAItoC,GAAG,GAAG,KAAKxO,MAAM,GAAG,EAAEnH,CAAhB,CAAV;;AACA,eAAOA,CAAC,GAAG,CAAJ,KAAUi+C,GAAG,IAAI,KAAjB,CAAP,EAAgC;AAC9BtoC,UAAAA,GAAG,IAAI,KAAKxO,MAAM,GAAG,EAAEnH,CAAhB,IAAqBi+C,GAA5B;AACD;;AACDA,QAAAA,GAAG,IAAI,IAAP;AAEA,YAAItoC,GAAG,IAAIsoC,GAAX,EAAgBtoC,GAAG,IAAIjQ,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAY,IAAIvD,UAAhB,CAAP;AAEhB,eAAOsS,GAAP;AACD,OAhBD;;AAkBAhT,MAAAA,MAAM,CAACM,SAAP,CAAiB8b,QAAjB,GAA4B,SAASA,QAAT,CAAmB5X,MAAnB,EAA2B62C,QAA3B,EAAqC;AAC/D,YAAI,CAACA,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS,CAAT,EAAY,KAAKxG,MAAjB,CAAX;AACf,YAAI,EAAE,KAAKwG,MAAL,IAAe,IAAjB,CAAJ,EAA4B,OAAQ,KAAKA,MAAL,CAAR;AAC5B,eAAQ,CAAC,OAAO,KAAKA,MAAL,CAAP,GAAsB,CAAvB,IAA4B,CAAC,CAArC;AACD,OAJD;;AAMAxE,MAAAA,MAAM,CAACM,SAAP,CAAiBs7C,WAAjB,GAA+B,SAASA,WAAT,CAAsBp3C,MAAtB,EAA8B62C,QAA9B,EAAwC;AACrE,YAAI,CAACA,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS,CAAT,EAAY,KAAKxG,MAAjB,CAAX;AACf,YAAIgV,GAAG,GAAG,KAAKxO,MAAL,IAAgB,KAAKA,MAAM,GAAG,CAAd,KAAoB,CAA9C;AACA,eAAQwO,GAAG,GAAG,MAAP,GAAiBA,GAAG,GAAG,UAAvB,GAAoCA,GAA3C;AACD,OAJD;;AAMAhT,MAAAA,MAAM,CAACM,SAAP,CAAiB+b,WAAjB,GAA+B,SAASA,WAAT,CAAsB7X,MAAtB,EAA8B62C,QAA9B,EAAwC;AACrE,YAAI,CAACA,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS,CAAT,EAAY,KAAKxG,MAAjB,CAAX;AACf,YAAIgV,GAAG,GAAG,KAAKxO,MAAM,GAAG,CAAd,IAAoB,KAAKA,MAAL,KAAgB,CAA9C;AACA,eAAQwO,GAAG,GAAG,MAAP,GAAiBA,GAAG,GAAG,UAAvB,GAAoCA,GAA3C;AACD,OAJD;;AAMAhT,MAAAA,MAAM,CAACM,SAAP,CAAiBu7C,WAAjB,GAA+B,SAASA,WAAT,CAAsBr3C,MAAtB,EAA8B62C,QAA9B,EAAwC;AACrE,YAAI,CAACA,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS,CAAT,EAAY,KAAKxG,MAAjB,CAAX;AAEf,eAAQ,KAAKwG,MAAL,CAAD,GACJ,KAAKA,MAAM,GAAG,CAAd,KAAoB,CADhB,GAEJ,KAAKA,MAAM,GAAG,CAAd,KAAoB,EAFhB,GAGJ,KAAKA,MAAM,GAAG,CAAd,KAAoB,EAHvB;AAID,OAPD;;AASAxE,MAAAA,MAAM,CAACM,SAAP,CAAiBsZ,WAAjB,GAA+B,SAASA,WAAT,CAAsBpV,MAAtB,EAA8B62C,QAA9B,EAAwC;AACrE,YAAI,CAACA,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS,CAAT,EAAY,KAAKxG,MAAjB,CAAX;AAEf,eAAQ,KAAKwG,MAAL,KAAgB,EAAjB,GACJ,KAAKA,MAAM,GAAG,CAAd,KAAoB,EADhB,GAEJ,KAAKA,MAAM,GAAG,CAAd,KAAoB,CAFhB,GAGJ,KAAKA,MAAM,GAAG,CAAd,CAHH;AAID,OAPD;;AASAxE,MAAAA,MAAM,CAACM,SAAP,CAAiBw7C,WAAjB,GAA+B,SAASA,WAAT,CAAsBt3C,MAAtB,EAA8B62C,QAA9B,EAAwC;AACrE,YAAI,CAACA,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS,CAAT,EAAY,KAAKxG,MAAjB,CAAX;AACf,eAAOw3C,OAAO,CAACl0B,IAAR,CAAa,IAAb,EAAmB9c,MAAnB,EAA2B,IAA3B,EAAiC,EAAjC,EAAqC,CAArC,CAAP;AACD,OAHD;;AAKAxE,MAAAA,MAAM,CAACM,SAAP,CAAiBy7C,WAAjB,GAA+B,SAASA,WAAT,CAAsBv3C,MAAtB,EAA8B62C,QAA9B,EAAwC;AACrE,YAAI,CAACA,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS,CAAT,EAAY,KAAKxG,MAAjB,CAAX;AACf,eAAOw3C,OAAO,CAACl0B,IAAR,CAAa,IAAb,EAAmB9c,MAAnB,EAA2B,KAA3B,EAAkC,EAAlC,EAAsC,CAAtC,CAAP;AACD,OAHD;;AAKAxE,MAAAA,MAAM,CAACM,SAAP,CAAiB07C,YAAjB,GAAgC,SAASA,YAAT,CAAuBx3C,MAAvB,EAA+B62C,QAA/B,EAAyC;AACvE,YAAI,CAACA,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS,CAAT,EAAY,KAAKxG,MAAjB,CAAX;AACf,eAAOw3C,OAAO,CAACl0B,IAAR,CAAa,IAAb,EAAmB9c,MAAnB,EAA2B,IAA3B,EAAiC,EAAjC,EAAqC,CAArC,CAAP;AACD,OAHD;;AAKAxE,MAAAA,MAAM,CAACM,SAAP,CAAiB27C,YAAjB,GAAgC,SAASA,YAAT,CAAuBz3C,MAAvB,EAA+B62C,QAA/B,EAAyC;AACvE,YAAI,CAACA,QAAL,EAAeH,WAAW,CAAC12C,MAAD,EAAS,CAAT,EAAY,KAAKxG,MAAjB,CAAX;AACf,eAAOw3C,OAAO,CAACl0B,IAAR,CAAa,IAAb,EAAmB9c,MAAnB,EAA2B,KAA3B,EAAkC,EAAlC,EAAsC,CAAtC,CAAP;AACD,OAHD;;AAKA,eAAS03C,QAAT,CAAmBjsB,GAAnB,EAAwB1oB,KAAxB,EAA+B/C,MAA/B,EAAuC22C,GAAvC,EAA4C3uB,GAA5C,EAAiDD,GAAjD,EAAsD;AACpD,YAAI,CAACvsB,MAAM,CAACga,QAAP,CAAgBiW,GAAhB,CAAL,EAA2B,MAAM,IAAIumB,SAAJ,CAAc,6CAAd,CAAN;AAC3B,YAAIjvC,KAAK,GAAGilB,GAAR,IAAejlB,KAAK,GAAGglB,GAA3B,EAAgC,MAAM,IAAI4pB,UAAJ,CAAe,mCAAf,CAAN;AAChC,YAAI3xC,MAAM,GAAG22C,GAAT,GAAelrB,GAAG,CAACjyB,MAAvB,EAA+B,MAAM,IAAIm4C,UAAJ,CAAe,oBAAf,CAAN;AAChC;;AAEDn2C,MAAAA,MAAM,CAACM,SAAP,CAAiB67C,WAAjB,GAA+B,SAASA,WAAT,CAAsB50C,KAAtB,EAA6B/C,MAA7B,EAAqC9D,UAArC,EAAiD26C,QAAjD,EAA2D;AACxF9zC,QAAAA,KAAK,GAAG,CAACA,KAAT;AACA/C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA9D,QAAAA,UAAU,GAAGA,UAAU,GAAG,CAA1B;;AACA,YAAI,CAAC26C,QAAL,EAAe;AACb,cAAIe,QAAQ,GAAGr5C,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAY,IAAIvD,UAAhB,IAA8B,CAA7C;AACAw7C,UAAAA,QAAQ,CAAC,IAAD,EAAO30C,KAAP,EAAc/C,MAAd,EAAsB9D,UAAtB,EAAkC07C,QAAlC,EAA4C,CAA5C,CAAR;AACD;;AAED,YAAId,GAAG,GAAG,CAAV;AACA,YAAIj+C,CAAC,GAAG,CAAR;AACA,aAAKmH,MAAL,IAAe+C,KAAK,GAAG,IAAvB;;AACA,eAAO,EAAElK,CAAF,GAAMqD,UAAN,KAAqB46C,GAAG,IAAI,KAA5B,CAAP,EAA2C;AACzC,eAAK92C,MAAM,GAAGnH,CAAd,IAAoBkK,KAAK,GAAG+zC,GAAT,GAAgB,IAAnC;AACD;;AAED,eAAO92C,MAAM,GAAG9D,UAAhB;AACD,OAjBD;;AAmBAV,MAAAA,MAAM,CAACM,SAAP,CAAiB+7C,WAAjB,GAA+B,SAASA,WAAT,CAAsB90C,KAAtB,EAA6B/C,MAA7B,EAAqC9D,UAArC,EAAiD26C,QAAjD,EAA2D;AACxF9zC,QAAAA,KAAK,GAAG,CAACA,KAAT;AACA/C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA9D,QAAAA,UAAU,GAAGA,UAAU,GAAG,CAA1B;;AACA,YAAI,CAAC26C,QAAL,EAAe;AACb,cAAIe,QAAQ,GAAGr5C,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAY,IAAIvD,UAAhB,IAA8B,CAA7C;AACAw7C,UAAAA,QAAQ,CAAC,IAAD,EAAO30C,KAAP,EAAc/C,MAAd,EAAsB9D,UAAtB,EAAkC07C,QAAlC,EAA4C,CAA5C,CAAR;AACD;;AAED,YAAI/+C,CAAC,GAAGqD,UAAU,GAAG,CAArB;AACA,YAAI46C,GAAG,GAAG,CAAV;AACA,aAAK92C,MAAM,GAAGnH,CAAd,IAAmBkK,KAAK,GAAG,IAA3B;;AACA,eAAO,EAAElK,CAAF,IAAO,CAAP,KAAai+C,GAAG,IAAI,KAApB,CAAP,EAAmC;AACjC,eAAK92C,MAAM,GAAGnH,CAAd,IAAoBkK,KAAK,GAAG+zC,GAAT,GAAgB,IAAnC;AACD;;AAED,eAAO92C,MAAM,GAAG9D,UAAhB;AACD,OAjBD;;AAmBAV,MAAAA,MAAM,CAACM,SAAP,CAAiBg8C,UAAjB,GAA8B,SAASA,UAAT,CAAqB/0C,KAArB,EAA4B/C,MAA5B,EAAoC62C,QAApC,EAA8C;AAC1E9zC,QAAAA,KAAK,GAAG,CAACA,KAAT;AACA/C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA,YAAI,CAAC62C,QAAL,EAAea,QAAQ,CAAC,IAAD,EAAO30C,KAAP,EAAc/C,MAAd,EAAsB,CAAtB,EAAyB,IAAzB,EAA+B,CAA/B,CAAR;AACf,YAAI,CAACxE,MAAM,CAAC21C,mBAAZ,EAAiCpuC,KAAK,GAAGxE,IAAI,CAACC,KAAL,CAAWuE,KAAX,CAAR;AACjC,aAAK/C,MAAL,IAAgB+C,KAAK,GAAG,IAAxB;AACA,eAAO/C,MAAM,GAAG,CAAhB;AACD,OAPD;;AASA,eAAS+3C,iBAAT,CAA4BtsB,GAA5B,EAAiC1oB,KAAjC,EAAwC/C,MAAxC,EAAgDg4C,YAAhD,EAA8D;AAC5D,YAAIj1C,KAAK,GAAG,CAAZ,EAAeA,KAAK,GAAG,SAASA,KAAT,GAAiB,CAAzB;;AACf,aAAK,IAAIlK,CAAC,GAAG,CAAR,EAAWg8C,CAAC,GAAGt2C,IAAI,CAACwpB,GAAL,CAAS0D,GAAG,CAACjyB,MAAJ,GAAawG,MAAtB,EAA8B,CAA9B,CAApB,EAAsDnH,CAAC,GAAGg8C,CAA1D,EAA6D,EAAEh8C,CAA/D,EAAkE;AAChE4yB,UAAAA,GAAG,CAACzrB,MAAM,GAAGnH,CAAV,CAAH,GAAkB,CAACkK,KAAK,GAAI,QAAS,KAAKi1C,YAAY,GAAGn/C,CAAH,GAAO,IAAIA,CAA5B,CAAnB,MAChB,CAACm/C,YAAY,GAAGn/C,CAAH,GAAO,IAAIA,CAAxB,IAA6B,CAD/B;AAED;AACF;;AAED2C,MAAAA,MAAM,CAACM,SAAP,CAAiBm8C,aAAjB,GAAiC,SAASA,aAAT,CAAwBl1C,KAAxB,EAA+B/C,MAA/B,EAAuC62C,QAAvC,EAAiD;AAChF9zC,QAAAA,KAAK,GAAG,CAACA,KAAT;AACA/C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA,YAAI,CAAC62C,QAAL,EAAea,QAAQ,CAAC,IAAD,EAAO30C,KAAP,EAAc/C,MAAd,EAAsB,CAAtB,EAAyB,MAAzB,EAAiC,CAAjC,CAAR;;AACf,YAAIxE,MAAM,CAAC21C,mBAAX,EAAgC;AAC9B,eAAKnxC,MAAL,IAAgB+C,KAAK,GAAG,IAAxB;AACA,eAAK/C,MAAM,GAAG,CAAd,IAAoB+C,KAAK,KAAK,CAA9B;AACD,SAHD,MAGO;AACLg1C,UAAAA,iBAAiB,CAAC,IAAD,EAAOh1C,KAAP,EAAc/C,MAAd,EAAsB,IAAtB,CAAjB;AACD;;AACD,eAAOA,MAAM,GAAG,CAAhB;AACD,OAXD;;AAaAxE,MAAAA,MAAM,CAACM,SAAP,CAAiBo8C,aAAjB,GAAiC,SAASA,aAAT,CAAwBn1C,KAAxB,EAA+B/C,MAA/B,EAAuC62C,QAAvC,EAAiD;AAChF9zC,QAAAA,KAAK,GAAG,CAACA,KAAT;AACA/C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA,YAAI,CAAC62C,QAAL,EAAea,QAAQ,CAAC,IAAD,EAAO30C,KAAP,EAAc/C,MAAd,EAAsB,CAAtB,EAAyB,MAAzB,EAAiC,CAAjC,CAAR;;AACf,YAAIxE,MAAM,CAAC21C,mBAAX,EAAgC;AAC9B,eAAKnxC,MAAL,IAAgB+C,KAAK,KAAK,CAA1B;AACA,eAAK/C,MAAM,GAAG,CAAd,IAAoB+C,KAAK,GAAG,IAA5B;AACD,SAHD,MAGO;AACLg1C,UAAAA,iBAAiB,CAAC,IAAD,EAAOh1C,KAAP,EAAc/C,MAAd,EAAsB,KAAtB,CAAjB;AACD;;AACD,eAAOA,MAAM,GAAG,CAAhB;AACD,OAXD;;AAaA,eAASm4C,iBAAT,CAA4B1sB,GAA5B,EAAiC1oB,KAAjC,EAAwC/C,MAAxC,EAAgDg4C,YAAhD,EAA8D;AAC5D,YAAIj1C,KAAK,GAAG,CAAZ,EAAeA,KAAK,GAAG,aAAaA,KAAb,GAAqB,CAA7B;;AACf,aAAK,IAAIlK,CAAC,GAAG,CAAR,EAAWg8C,CAAC,GAAGt2C,IAAI,CAACwpB,GAAL,CAAS0D,GAAG,CAACjyB,MAAJ,GAAawG,MAAtB,EAA8B,CAA9B,CAApB,EAAsDnH,CAAC,GAAGg8C,CAA1D,EAA6D,EAAEh8C,CAA/D,EAAkE;AAChE4yB,UAAAA,GAAG,CAACzrB,MAAM,GAAGnH,CAAV,CAAH,GAAmBkK,KAAK,KAAK,CAACi1C,YAAY,GAAGn/C,CAAH,GAAO,IAAIA,CAAxB,IAA6B,CAAxC,GAA6C,IAA/D;AACD;AACF;;AAED2C,MAAAA,MAAM,CAACM,SAAP,CAAiBs8C,aAAjB,GAAiC,SAASA,aAAT,CAAwBr1C,KAAxB,EAA+B/C,MAA/B,EAAuC62C,QAAvC,EAAiD;AAChF9zC,QAAAA,KAAK,GAAG,CAACA,KAAT;AACA/C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA,YAAI,CAAC62C,QAAL,EAAea,QAAQ,CAAC,IAAD,EAAO30C,KAAP,EAAc/C,MAAd,EAAsB,CAAtB,EAAyB,UAAzB,EAAqC,CAArC,CAAR;;AACf,YAAIxE,MAAM,CAAC21C,mBAAX,EAAgC;AAC9B,eAAKnxC,MAAM,GAAG,CAAd,IAAoB+C,KAAK,KAAK,EAA9B;AACA,eAAK/C,MAAM,GAAG,CAAd,IAAoB+C,KAAK,KAAK,EAA9B;AACA,eAAK/C,MAAM,GAAG,CAAd,IAAoB+C,KAAK,KAAK,CAA9B;AACA,eAAK/C,MAAL,IAAgB+C,KAAK,GAAG,IAAxB;AACD,SALD,MAKO;AACLo1C,UAAAA,iBAAiB,CAAC,IAAD,EAAOp1C,KAAP,EAAc/C,MAAd,EAAsB,IAAtB,CAAjB;AACD;;AACD,eAAOA,MAAM,GAAG,CAAhB;AACD,OAbD;;AAeAxE,MAAAA,MAAM,CAACM,SAAP,CAAiBu8C,aAAjB,GAAiC,SAASA,aAAT,CAAwBt1C,KAAxB,EAA+B/C,MAA/B,EAAuC62C,QAAvC,EAAiD;AAChF9zC,QAAAA,KAAK,GAAG,CAACA,KAAT;AACA/C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA,YAAI,CAAC62C,QAAL,EAAea,QAAQ,CAAC,IAAD,EAAO30C,KAAP,EAAc/C,MAAd,EAAsB,CAAtB,EAAyB,UAAzB,EAAqC,CAArC,CAAR;;AACf,YAAIxE,MAAM,CAAC21C,mBAAX,EAAgC;AAC9B,eAAKnxC,MAAL,IAAgB+C,KAAK,KAAK,EAA1B;AACA,eAAK/C,MAAM,GAAG,CAAd,IAAoB+C,KAAK,KAAK,EAA9B;AACA,eAAK/C,MAAM,GAAG,CAAd,IAAoB+C,KAAK,KAAK,CAA9B;AACA,eAAK/C,MAAM,GAAG,CAAd,IAAoB+C,KAAK,GAAG,IAA5B;AACD,SALD,MAKO;AACLo1C,UAAAA,iBAAiB,CAAC,IAAD,EAAOp1C,KAAP,EAAc/C,MAAd,EAAsB,KAAtB,CAAjB;AACD;;AACD,eAAOA,MAAM,GAAG,CAAhB;AACD,OAbD;;AAeAxE,MAAAA,MAAM,CAACM,SAAP,CAAiBw8C,UAAjB,GAA8B,SAASA,UAAT,CAAqBv1C,KAArB,EAA4B/C,MAA5B,EAAoC9D,UAApC,EAAgD26C,QAAhD,EAA0D;AACtF9zC,QAAAA,KAAK,GAAG,CAACA,KAAT;AACA/C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;;AACA,YAAI,CAAC62C,QAAL,EAAe;AACb,cAAI0B,KAAK,GAAGh6C,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAY,IAAIvD,UAAJ,GAAiB,CAA7B,CAAZ;AAEAw7C,UAAAA,QAAQ,CAAC,IAAD,EAAO30C,KAAP,EAAc/C,MAAd,EAAsB9D,UAAtB,EAAkCq8C,KAAK,GAAG,CAA1C,EAA6C,CAACA,KAA9C,CAAR;AACD;;AAED,YAAI1/C,CAAC,GAAG,CAAR;AACA,YAAIi+C,GAAG,GAAG,CAAV;AACA,YAAI0B,GAAG,GAAG,CAAV;AACA,aAAKx4C,MAAL,IAAe+C,KAAK,GAAG,IAAvB;;AACA,eAAO,EAAElK,CAAF,GAAMqD,UAAN,KAAqB46C,GAAG,IAAI,KAA5B,CAAP,EAA2C;AACzC,cAAI/zC,KAAK,GAAG,CAAR,IAAay1C,GAAG,KAAK,CAArB,IAA0B,KAAKx4C,MAAM,GAAGnH,CAAT,GAAa,CAAlB,MAAyB,CAAvD,EAA0D;AACxD2/C,YAAAA,GAAG,GAAG,CAAN;AACD;;AACD,eAAKx4C,MAAM,GAAGnH,CAAd,IAAmB,CAAEkK,KAAK,GAAG+zC,GAAT,IAAiB,CAAlB,IAAuB0B,GAAvB,GAA6B,IAAhD;AACD;;AAED,eAAOx4C,MAAM,GAAG9D,UAAhB;AACD,OArBD;;AAuBAV,MAAAA,MAAM,CAACM,SAAP,CAAiB28C,UAAjB,GAA8B,SAASA,UAAT,CAAqB11C,KAArB,EAA4B/C,MAA5B,EAAoC9D,UAApC,EAAgD26C,QAAhD,EAA0D;AACtF9zC,QAAAA,KAAK,GAAG,CAACA,KAAT;AACA/C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;;AACA,YAAI,CAAC62C,QAAL,EAAe;AACb,cAAI0B,KAAK,GAAGh6C,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAY,IAAIvD,UAAJ,GAAiB,CAA7B,CAAZ;AAEAw7C,UAAAA,QAAQ,CAAC,IAAD,EAAO30C,KAAP,EAAc/C,MAAd,EAAsB9D,UAAtB,EAAkCq8C,KAAK,GAAG,CAA1C,EAA6C,CAACA,KAA9C,CAAR;AACD;;AAED,YAAI1/C,CAAC,GAAGqD,UAAU,GAAG,CAArB;AACA,YAAI46C,GAAG,GAAG,CAAV;AACA,YAAI0B,GAAG,GAAG,CAAV;AACA,aAAKx4C,MAAM,GAAGnH,CAAd,IAAmBkK,KAAK,GAAG,IAA3B;;AACA,eAAO,EAAElK,CAAF,IAAO,CAAP,KAAai+C,GAAG,IAAI,KAApB,CAAP,EAAmC;AACjC,cAAI/zC,KAAK,GAAG,CAAR,IAAay1C,GAAG,KAAK,CAArB,IAA0B,KAAKx4C,MAAM,GAAGnH,CAAT,GAAa,CAAlB,MAAyB,CAAvD,EAA0D;AACxD2/C,YAAAA,GAAG,GAAG,CAAN;AACD;;AACD,eAAKx4C,MAAM,GAAGnH,CAAd,IAAmB,CAAEkK,KAAK,GAAG+zC,GAAT,IAAiB,CAAlB,IAAuB0B,GAAvB,GAA6B,IAAhD;AACD;;AAED,eAAOx4C,MAAM,GAAG9D,UAAhB;AACD,OArBD;;AAuBAV,MAAAA,MAAM,CAACM,SAAP,CAAiB48C,SAAjB,GAA6B,SAASA,SAAT,CAAoB31C,KAApB,EAA2B/C,MAA3B,EAAmC62C,QAAnC,EAA6C;AACxE9zC,QAAAA,KAAK,GAAG,CAACA,KAAT;AACA/C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA,YAAI,CAAC62C,QAAL,EAAea,QAAQ,CAAC,IAAD,EAAO30C,KAAP,EAAc/C,MAAd,EAAsB,CAAtB,EAAyB,IAAzB,EAA+B,CAAC,IAAhC,CAAR;AACf,YAAI,CAACxE,MAAM,CAAC21C,mBAAZ,EAAiCpuC,KAAK,GAAGxE,IAAI,CAACC,KAAL,CAAWuE,KAAX,CAAR;AACjC,YAAIA,KAAK,GAAG,CAAZ,EAAeA,KAAK,GAAG,OAAOA,KAAP,GAAe,CAAvB;AACf,aAAK/C,MAAL,IAAgB+C,KAAK,GAAG,IAAxB;AACA,eAAO/C,MAAM,GAAG,CAAhB;AACD,OARD;;AAUAxE,MAAAA,MAAM,CAACM,SAAP,CAAiB68C,YAAjB,GAAgC,SAASA,YAAT,CAAuB51C,KAAvB,EAA8B/C,MAA9B,EAAsC62C,QAAtC,EAAgD;AAC9E9zC,QAAAA,KAAK,GAAG,CAACA,KAAT;AACA/C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA,YAAI,CAAC62C,QAAL,EAAea,QAAQ,CAAC,IAAD,EAAO30C,KAAP,EAAc/C,MAAd,EAAsB,CAAtB,EAAyB,MAAzB,EAAiC,CAAC,MAAlC,CAAR;;AACf,YAAIxE,MAAM,CAAC21C,mBAAX,EAAgC;AAC9B,eAAKnxC,MAAL,IAAgB+C,KAAK,GAAG,IAAxB;AACA,eAAK/C,MAAM,GAAG,CAAd,IAAoB+C,KAAK,KAAK,CAA9B;AACD,SAHD,MAGO;AACLg1C,UAAAA,iBAAiB,CAAC,IAAD,EAAOh1C,KAAP,EAAc/C,MAAd,EAAsB,IAAtB,CAAjB;AACD;;AACD,eAAOA,MAAM,GAAG,CAAhB;AACD,OAXD;;AAaAxE,MAAAA,MAAM,CAACM,SAAP,CAAiB88C,YAAjB,GAAgC,SAASA,YAAT,CAAuB71C,KAAvB,EAA8B/C,MAA9B,EAAsC62C,QAAtC,EAAgD;AAC9E9zC,QAAAA,KAAK,GAAG,CAACA,KAAT;AACA/C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA,YAAI,CAAC62C,QAAL,EAAea,QAAQ,CAAC,IAAD,EAAO30C,KAAP,EAAc/C,MAAd,EAAsB,CAAtB,EAAyB,MAAzB,EAAiC,CAAC,MAAlC,CAAR;;AACf,YAAIxE,MAAM,CAAC21C,mBAAX,EAAgC;AAC9B,eAAKnxC,MAAL,IAAgB+C,KAAK,KAAK,CAA1B;AACA,eAAK/C,MAAM,GAAG,CAAd,IAAoB+C,KAAK,GAAG,IAA5B;AACD,SAHD,MAGO;AACLg1C,UAAAA,iBAAiB,CAAC,IAAD,EAAOh1C,KAAP,EAAc/C,MAAd,EAAsB,KAAtB,CAAjB;AACD;;AACD,eAAOA,MAAM,GAAG,CAAhB;AACD,OAXD;;AAaAxE,MAAAA,MAAM,CAACM,SAAP,CAAiB+8C,YAAjB,GAAgC,SAASA,YAAT,CAAuB91C,KAAvB,EAA8B/C,MAA9B,EAAsC62C,QAAtC,EAAgD;AAC9E9zC,QAAAA,KAAK,GAAG,CAACA,KAAT;AACA/C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA,YAAI,CAAC62C,QAAL,EAAea,QAAQ,CAAC,IAAD,EAAO30C,KAAP,EAAc/C,MAAd,EAAsB,CAAtB,EAAyB,UAAzB,EAAqC,CAAC,UAAtC,CAAR;;AACf,YAAIxE,MAAM,CAAC21C,mBAAX,EAAgC;AAC9B,eAAKnxC,MAAL,IAAgB+C,KAAK,GAAG,IAAxB;AACA,eAAK/C,MAAM,GAAG,CAAd,IAAoB+C,KAAK,KAAK,CAA9B;AACA,eAAK/C,MAAM,GAAG,CAAd,IAAoB+C,KAAK,KAAK,EAA9B;AACA,eAAK/C,MAAM,GAAG,CAAd,IAAoB+C,KAAK,KAAK,EAA9B;AACD,SALD,MAKO;AACLo1C,UAAAA,iBAAiB,CAAC,IAAD,EAAOp1C,KAAP,EAAc/C,MAAd,EAAsB,IAAtB,CAAjB;AACD;;AACD,eAAOA,MAAM,GAAG,CAAhB;AACD,OAbD;;AAeAxE,MAAAA,MAAM,CAACM,SAAP,CAAiBg9C,YAAjB,GAAgC,SAASA,YAAT,CAAuB/1C,KAAvB,EAA8B/C,MAA9B,EAAsC62C,QAAtC,EAAgD;AAC9E9zC,QAAAA,KAAK,GAAG,CAACA,KAAT;AACA/C,QAAAA,MAAM,GAAGA,MAAM,GAAG,CAAlB;AACA,YAAI,CAAC62C,QAAL,EAAea,QAAQ,CAAC,IAAD,EAAO30C,KAAP,EAAc/C,MAAd,EAAsB,CAAtB,EAAyB,UAAzB,EAAqC,CAAC,UAAtC,CAAR;AACf,YAAI+C,KAAK,GAAG,CAAZ,EAAeA,KAAK,GAAG,aAAaA,KAAb,GAAqB,CAA7B;;AACf,YAAIvH,MAAM,CAAC21C,mBAAX,EAAgC;AAC9B,eAAKnxC,MAAL,IAAgB+C,KAAK,KAAK,EAA1B;AACA,eAAK/C,MAAM,GAAG,CAAd,IAAoB+C,KAAK,KAAK,EAA9B;AACA,eAAK/C,MAAM,GAAG,CAAd,IAAoB+C,KAAK,KAAK,CAA9B;AACA,eAAK/C,MAAM,GAAG,CAAd,IAAoB+C,KAAK,GAAG,IAA5B;AACD,SALD,MAKO;AACLo1C,UAAAA,iBAAiB,CAAC,IAAD,EAAOp1C,KAAP,EAAc/C,MAAd,EAAsB,KAAtB,CAAjB;AACD;;AACD,eAAOA,MAAM,GAAG,CAAhB;AACD,OAdD;;AAgBA,eAAS+4C,YAAT,CAAuBttB,GAAvB,EAA4B1oB,KAA5B,EAAmC/C,MAAnC,EAA2C22C,GAA3C,EAAgD3uB,GAAhD,EAAqDD,GAArD,EAA0D;AACxD,YAAI/nB,MAAM,GAAG22C,GAAT,GAAelrB,GAAG,CAACjyB,MAAvB,EAA+B,MAAM,IAAIm4C,UAAJ,CAAe,oBAAf,CAAN;AAC/B,YAAI3xC,MAAM,GAAG,CAAb,EAAgB,MAAM,IAAI2xC,UAAJ,CAAe,oBAAf,CAAN;AACjB;;AAED,eAASqH,UAAT,CAAqBvtB,GAArB,EAA0B1oB,KAA1B,EAAiC/C,MAAjC,EAAyCg4C,YAAzC,EAAuDnB,QAAvD,EAAiE;AAC/D,YAAI,CAACA,QAAL,EAAe;AACbkC,UAAAA,YAAY,CAACttB,GAAD,EAAM1oB,KAAN,EAAa/C,MAAb,EAAqB,CAArB,EAAwB,sBAAxB,EAAgD,CAAC,sBAAjD,CAAZ;AACD;;AACDgxC,QAAAA,OAAO,CAAC7wC,KAAR,CAAcsrB,GAAd,EAAmB1oB,KAAnB,EAA0B/C,MAA1B,EAAkCg4C,YAAlC,EAAgD,EAAhD,EAAoD,CAApD;AACA,eAAOh4C,MAAM,GAAG,CAAhB;AACD;;AAEDxE,MAAAA,MAAM,CAACM,SAAP,CAAiBm9C,YAAjB,GAAgC,SAASA,YAAT,CAAuBl2C,KAAvB,EAA8B/C,MAA9B,EAAsC62C,QAAtC,EAAgD;AAC9E,eAAOmC,UAAU,CAAC,IAAD,EAAOj2C,KAAP,EAAc/C,MAAd,EAAsB,IAAtB,EAA4B62C,QAA5B,CAAjB;AACD,OAFD;;AAIAr7C,MAAAA,MAAM,CAACM,SAAP,CAAiBo9C,YAAjB,GAAgC,SAASA,YAAT,CAAuBn2C,KAAvB,EAA8B/C,MAA9B,EAAsC62C,QAAtC,EAAgD;AAC9E,eAAOmC,UAAU,CAAC,IAAD,EAAOj2C,KAAP,EAAc/C,MAAd,EAAsB,KAAtB,EAA6B62C,QAA7B,CAAjB;AACD,OAFD;;AAIA,eAASsC,WAAT,CAAsB1tB,GAAtB,EAA2B1oB,KAA3B,EAAkC/C,MAAlC,EAA0Cg4C,YAA1C,EAAwDnB,QAAxD,EAAkE;AAChE,YAAI,CAACA,QAAL,EAAe;AACbkC,UAAAA,YAAY,CAACttB,GAAD,EAAM1oB,KAAN,EAAa/C,MAAb,EAAqB,CAArB,EAAwB,uBAAxB,EAAiD,CAAC,uBAAlD,CAAZ;AACD;;AACDgxC,QAAAA,OAAO,CAAC7wC,KAAR,CAAcsrB,GAAd,EAAmB1oB,KAAnB,EAA0B/C,MAA1B,EAAkCg4C,YAAlC,EAAgD,EAAhD,EAAoD,CAApD;AACA,eAAOh4C,MAAM,GAAG,CAAhB;AACD;;AAEDxE,MAAAA,MAAM,CAACM,SAAP,CAAiBs9C,aAAjB,GAAiC,SAASA,aAAT,CAAwBr2C,KAAxB,EAA+B/C,MAA/B,EAAuC62C,QAAvC,EAAiD;AAChF,eAAOsC,WAAW,CAAC,IAAD,EAAOp2C,KAAP,EAAc/C,MAAd,EAAsB,IAAtB,EAA4B62C,QAA5B,CAAlB;AACD,OAFD;;AAIAr7C,MAAAA,MAAM,CAACM,SAAP,CAAiBu9C,aAAjB,GAAiC,SAASA,aAAT,CAAwBt2C,KAAxB,EAA+B/C,MAA/B,EAAuC62C,QAAvC,EAAiD;AAChF,eAAOsC,WAAW,CAAC,IAAD,EAAOp2C,KAAP,EAAc/C,MAAd,EAAsB,KAAtB,EAA6B62C,QAA7B,CAAlB;AACD,OAFD,CAv/CyB,CA2/CzB;;;AACAr7C,MAAAA,MAAM,CAACM,SAAP,CAAiBiL,IAAjB,GAAwB,SAASA,IAAT,CAAegoB,MAAf,EAAuBuqB,WAAvB,EAAoC7O,KAApC,EAA2CtU,GAA3C,EAAgD;AACtE,YAAI,CAACsU,KAAL,EAAYA,KAAK,GAAG,CAAR;AACZ,YAAI,CAACtU,GAAD,IAAQA,GAAG,KAAK,CAApB,EAAuBA,GAAG,GAAG,KAAK38B,MAAX;AACvB,YAAI8/C,WAAW,IAAIvqB,MAAM,CAACv1B,MAA1B,EAAkC8/C,WAAW,GAAGvqB,MAAM,CAACv1B,MAArB;AAClC,YAAI,CAAC8/C,WAAL,EAAkBA,WAAW,GAAG,CAAd;AAClB,YAAInjB,GAAG,GAAG,CAAN,IAAWA,GAAG,GAAGsU,KAArB,EAA4BtU,GAAG,GAAGsU,KAAN,CAL0C,CAOtE;;AACA,YAAItU,GAAG,KAAKsU,KAAZ,EAAmB,OAAO,CAAP;AACnB,YAAI1b,MAAM,CAACv1B,MAAP,KAAkB,CAAlB,IAAuB,KAAKA,MAAL,KAAgB,CAA3C,EAA8C,OAAO,CAAP,CATwB,CAWtE;;AACA,YAAI8/C,WAAW,GAAG,CAAlB,EAAqB;AACnB,gBAAM,IAAI3H,UAAJ,CAAe,2BAAf,CAAN;AACD;;AACD,YAAIlH,KAAK,GAAG,CAAR,IAAaA,KAAK,IAAI,KAAKjxC,MAA/B,EAAuC,MAAM,IAAIm4C,UAAJ,CAAe,2BAAf,CAAN;AACvC,YAAIxb,GAAG,GAAG,CAAV,EAAa,MAAM,IAAIwb,UAAJ,CAAe,yBAAf,CAAN,CAhByD,CAkBtE;;AACA,YAAIxb,GAAG,GAAG,KAAK38B,MAAf,EAAuB28B,GAAG,GAAG,KAAK38B,MAAX;;AACvB,YAAIu1B,MAAM,CAACv1B,MAAP,GAAgB8/C,WAAhB,GAA8BnjB,GAAG,GAAGsU,KAAxC,EAA+C;AAC7CtU,UAAAA,GAAG,GAAGpH,MAAM,CAACv1B,MAAP,GAAgB8/C,WAAhB,GAA8B7O,KAApC;AACD;;AAED,YAAIsF,GAAG,GAAG5Z,GAAG,GAAGsU,KAAhB;AACA,YAAI5xC,CAAJ;;AAEA,YAAI,SAASk2B,MAAT,IAAmB0b,KAAK,GAAG6O,WAA3B,IAA0CA,WAAW,GAAGnjB,GAA5D,EAAiE;AAC/D;AACA,eAAKt9B,CAAC,GAAGk3C,GAAG,GAAG,CAAf,EAAkBl3C,CAAC,IAAI,CAAvB,EAA0B,EAAEA,CAA5B,EAA+B;AAC7Bk2B,YAAAA,MAAM,CAACl2B,CAAC,GAAGygD,WAAL,CAAN,GAA0B,KAAKzgD,CAAC,GAAG4xC,KAAT,CAA1B;AACD;AACF,SALD,MAKO,IAAIsF,GAAG,GAAG,IAAN,IAAc,CAACv0C,MAAM,CAAC21C,mBAA1B,EAA+C;AACpD;AACA,eAAKt4C,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGk3C,GAAhB,EAAqB,EAAEl3C,CAAvB,EAA0B;AACxBk2B,YAAAA,MAAM,CAACl2B,CAAC,GAAGygD,WAAL,CAAN,GAA0B,KAAKzgD,CAAC,GAAG4xC,KAAT,CAA1B;AACD;AACF,SALM,MAKA;AACLruC,UAAAA,UAAU,CAACN,SAAX,CAAqBkB,GAArB,CAAyBzD,IAAzB,CACEw1B,MADF,EAEE,KAAKyiB,QAAL,CAAc/G,KAAd,EAAqBA,KAAK,GAAGsF,GAA7B,CAFF,EAGEuJ,WAHF;AAKD;;AAED,eAAOvJ,GAAP;AACD,OA9CD,CA5/CyB,CA4iDzB;AACA;AACA;AACA;;;AACAv0C,MAAAA,MAAM,CAACM,SAAP,CAAiBgwB,IAAjB,GAAwB,SAASA,IAAT,CAAetd,GAAf,EAAoBi8B,KAApB,EAA2BtU,GAA3B,EAAgC94B,QAAhC,EAA0C;AAChE;AACA,YAAI,OAAOmR,GAAP,KAAe,QAAnB,EAA6B;AAC3B,cAAI,OAAOi8B,KAAP,KAAiB,QAArB,EAA+B;AAC7BptC,YAAAA,QAAQ,GAAGotC,KAAX;AACAA,YAAAA,KAAK,GAAG,CAAR;AACAtU,YAAAA,GAAG,GAAG,KAAK38B,MAAX;AACD,WAJD,MAIO,IAAI,OAAO28B,GAAP,KAAe,QAAnB,EAA6B;AAClC94B,YAAAA,QAAQ,GAAG84B,GAAX;AACAA,YAAAA,GAAG,GAAG,KAAK38B,MAAX;AACD;;AACD,cAAIgV,GAAG,CAAChV,MAAJ,KAAe,CAAnB,EAAsB;AACpB,gBAAIJ,IAAI,GAAGoV,GAAG,CAACo4B,UAAJ,CAAe,CAAf,CAAX;;AACA,gBAAIxtC,IAAI,GAAG,GAAX,EAAgB;AACdoV,cAAAA,GAAG,GAAGpV,IAAN;AACD;AACF;;AACD,cAAIiE,QAAQ,KAAKsF,SAAb,IAA0B,OAAOtF,QAAP,KAAoB,QAAlD,EAA4D;AAC1D,kBAAM,IAAI20C,SAAJ,CAAc,2BAAd,CAAN;AACD;;AACD,cAAI,OAAO30C,QAAP,KAAoB,QAApB,IAAgC,CAAC7B,MAAM,CAACi3C,UAAP,CAAkBp1C,QAAlB,CAArC,EAAkE;AAChE,kBAAM,IAAI20C,SAAJ,CAAc,uBAAuB30C,QAArC,CAAN;AACD;AACF,SArBD,MAqBO,IAAI,OAAOmR,GAAP,KAAe,QAAnB,EAA6B;AAClCA,UAAAA,GAAG,GAAGA,GAAG,GAAG,GAAZ;AACD,SAzB+D,CA2BhE;;;AACA,YAAIi8B,KAAK,GAAG,CAAR,IAAa,KAAKjxC,MAAL,GAAcixC,KAA3B,IAAoC,KAAKjxC,MAAL,GAAc28B,GAAtD,EAA2D;AACzD,gBAAM,IAAIwb,UAAJ,CAAe,oBAAf,CAAN;AACD;;AAED,YAAIxb,GAAG,IAAIsU,KAAX,EAAkB;AAChB,iBAAO,IAAP;AACD;;AAEDA,QAAAA,KAAK,GAAGA,KAAK,KAAK,CAAlB;AACAtU,QAAAA,GAAG,GAAGA,GAAG,KAAKxzB,SAAR,GAAoB,KAAKnJ,MAAzB,GAAkC28B,GAAG,KAAK,CAAhD;AAEA,YAAI,CAAC3nB,GAAL,EAAUA,GAAG,GAAG,CAAN;AAEV,YAAI3V,CAAJ;;AACA,YAAI,OAAO2V,GAAP,KAAe,QAAnB,EAA6B;AAC3B,eAAK3V,CAAC,GAAG4xC,KAAT,EAAgB5xC,CAAC,GAAGs9B,GAApB,EAAyB,EAAEt9B,CAA3B,EAA8B;AAC5B,iBAAKA,CAAL,IAAU2V,GAAV;AACD;AACF,SAJD,MAIO;AACL,cAAI+G,KAAK,GAAG/Z,MAAM,CAACga,QAAP,CAAgBhH,GAAhB,IACRA,GADQ,GAERykC,WAAW,CAAC,IAAIz3C,MAAJ,CAAWgT,GAAX,EAAgBnR,QAAhB,EAA0BtB,QAA1B,EAAD,CAFf;AAGA,cAAIg0C,GAAG,GAAGx6B,KAAK,CAAC/b,MAAhB;;AACA,eAAKX,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGs9B,GAAG,GAAGsU,KAAtB,EAA6B,EAAE5xC,CAA/B,EAAkC;AAChC,iBAAKA,CAAC,GAAG4xC,KAAT,IAAkBl1B,KAAK,CAAC1c,CAAC,GAAGk3C,GAAL,CAAvB;AACD;AACF;;AAED,eAAO,IAAP;AACD,OAzDD,CAhjDyB,CA2mDzB;AACA;;;AAEA,UAAIwJ,iBAAiB,GAAG,oBAAxB;;AAEA,eAASC,WAAT,CAAsB/P,GAAtB,EAA2B;AACzB;AACAA,QAAAA,GAAG,GAAGgQ,UAAU,CAAChQ,GAAD,CAAV,CAAgBzjB,OAAhB,CAAwBuzB,iBAAxB,EAA2C,EAA3C,CAAN,CAFyB,CAGzB;;AACA,YAAI9P,GAAG,CAACjwC,MAAJ,GAAa,CAAjB,EAAoB,OAAO,EAAP,CAJK,CAKzB;;AACA,eAAOiwC,GAAG,CAACjwC,MAAJ,GAAa,CAAb,KAAmB,CAA1B,EAA6B;AAC3BiwC,UAAAA,GAAG,GAAGA,GAAG,GAAG,GAAZ;AACD;;AACD,eAAOA,GAAP;AACD;;AAED,eAASgQ,UAAT,CAAqBhQ,GAArB,EAA0B;AACxB,YAAIA,GAAG,CAAC5F,IAAR,EAAc,OAAO4F,GAAG,CAAC5F,IAAJ,EAAP;AACd,eAAO4F,GAAG,CAACzjB,OAAJ,CAAY,YAAZ,EAA0B,EAA1B,CAAP;AACD;;AAED,eAAS8iB,KAAT,CAAgBpwC,CAAhB,EAAmB;AACjB,YAAIA,CAAC,GAAG,EAAR,EAAY,OAAO,MAAMA,CAAC,CAACqD,QAAF,CAAW,EAAX,CAAb;AACZ,eAAOrD,CAAC,CAACqD,QAAF,CAAW,EAAX,CAAP;AACD;;AAED,eAASk3C,WAAT,CAAsBv4B,MAAtB,EAA8Bg/B,KAA9B,EAAqC;AACnCA,QAAAA,KAAK,GAAGA,KAAK,IAAIC,QAAjB;AACA,YAAI7D,SAAJ;AACA,YAAIt8C,MAAM,GAAGkhB,MAAM,CAAClhB,MAApB;AACA,YAAIogD,aAAa,GAAG,IAApB;AACA,YAAIrkC,KAAK,GAAG,EAAZ;;AAEA,aAAK,IAAI1c,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGW,MAApB,EAA4B,EAAEX,CAA9B,EAAiC;AAC/Bi9C,UAAAA,SAAS,GAAGp7B,MAAM,CAACksB,UAAP,CAAkB/tC,CAAlB,CAAZ,CAD+B,CAG/B;;AACA,cAAIi9C,SAAS,GAAG,MAAZ,IAAsBA,SAAS,GAAG,MAAtC,EAA8C;AAC5C;AACA,gBAAI,CAAC8D,aAAL,EAAoB;AAClB;AACA,kBAAI9D,SAAS,GAAG,MAAhB,EAAwB;AACtB;AACA,oBAAI,CAAC4D,KAAK,IAAI,CAAV,IAAe,CAAC,CAApB,EAAuBnkC,KAAK,CAAChO,IAAN,CAAW,IAAX,EAAiB,IAAjB,EAAuB,IAAvB;AACvB;AACD,eAJD,MAIO,IAAI1O,CAAC,GAAG,CAAJ,KAAUW,MAAd,EAAsB;AAC3B;AACA,oBAAI,CAACkgD,KAAK,IAAI,CAAV,IAAe,CAAC,CAApB,EAAuBnkC,KAAK,CAAChO,IAAN,CAAW,IAAX,EAAiB,IAAjB,EAAuB,IAAvB;AACvB;AACD,eAViB,CAYlB;;;AACAqyC,cAAAA,aAAa,GAAG9D,SAAhB;AAEA;AACD,aAlB2C,CAoB5C;;;AACA,gBAAIA,SAAS,GAAG,MAAhB,EAAwB;AACtB,kBAAI,CAAC4D,KAAK,IAAI,CAAV,IAAe,CAAC,CAApB,EAAuBnkC,KAAK,CAAChO,IAAN,CAAW,IAAX,EAAiB,IAAjB,EAAuB,IAAvB;AACvBqyC,cAAAA,aAAa,GAAG9D,SAAhB;AACA;AACD,aAzB2C,CA2B5C;;;AACAA,YAAAA,SAAS,GAAG,CAAC8D,aAAa,GAAG,MAAhB,IAA0B,EAA1B,GAA+B9D,SAAS,GAAG,MAA5C,IAAsD,OAAlE;AACD,WA7BD,MA6BO,IAAI8D,aAAJ,EAAmB;AACxB;AACA,gBAAI,CAACF,KAAK,IAAI,CAAV,IAAe,CAAC,CAApB,EAAuBnkC,KAAK,CAAChO,IAAN,CAAW,IAAX,EAAiB,IAAjB,EAAuB,IAAvB;AACxB;;AAEDqyC,UAAAA,aAAa,GAAG,IAAhB,CAtC+B,CAwC/B;;AACA,cAAI9D,SAAS,GAAG,IAAhB,EAAsB;AACpB,gBAAI,CAAC4D,KAAK,IAAI,CAAV,IAAe,CAAnB,EAAsB;AACtBnkC,YAAAA,KAAK,CAAChO,IAAN,CAAWuuC,SAAX;AACD,WAHD,MAGO,IAAIA,SAAS,GAAG,KAAhB,EAAuB;AAC5B,gBAAI,CAAC4D,KAAK,IAAI,CAAV,IAAe,CAAnB,EAAsB;AACtBnkC,YAAAA,KAAK,CAAChO,IAAN,CACEuuC,SAAS,IAAI,GAAb,GAAmB,IADrB,EAEEA,SAAS,GAAG,IAAZ,GAAmB,IAFrB;AAID,WANM,MAMA,IAAIA,SAAS,GAAG,OAAhB,EAAyB;AAC9B,gBAAI,CAAC4D,KAAK,IAAI,CAAV,IAAe,CAAnB,EAAsB;AACtBnkC,YAAAA,KAAK,CAAChO,IAAN,CACEuuC,SAAS,IAAI,GAAb,GAAmB,IADrB,EAEEA,SAAS,IAAI,GAAb,GAAmB,IAAnB,GAA0B,IAF5B,EAGEA,SAAS,GAAG,IAAZ,GAAmB,IAHrB;AAKD,WAPM,MAOA,IAAIA,SAAS,GAAG,QAAhB,EAA0B;AAC/B,gBAAI,CAAC4D,KAAK,IAAI,CAAV,IAAe,CAAnB,EAAsB;AACtBnkC,YAAAA,KAAK,CAAChO,IAAN,CACEuuC,SAAS,IAAI,IAAb,GAAoB,IADtB,EAEEA,SAAS,IAAI,GAAb,GAAmB,IAAnB,GAA0B,IAF5B,EAGEA,SAAS,IAAI,GAAb,GAAmB,IAAnB,GAA0B,IAH5B,EAIEA,SAAS,GAAG,IAAZ,GAAmB,IAJrB;AAMD,WARM,MAQA;AACL,kBAAM,IAAI38C,KAAJ,CAAU,oBAAV,CAAN;AACD;AACF;;AAED,eAAOoc,KAAP;AACD;;AAED,eAAS8/B,YAAT,CAAuB5L,GAAvB,EAA4B;AAC1B,YAAIoQ,SAAS,GAAG,EAAhB;;AACA,aAAK,IAAIhhD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4wC,GAAG,CAACjwC,MAAxB,EAAgC,EAAEX,CAAlC,EAAqC;AACnC;AACAghD,UAAAA,SAAS,CAACtyC,IAAV,CAAekiC,GAAG,CAAC7C,UAAJ,CAAe/tC,CAAf,IAAoB,IAAnC;AACD;;AACD,eAAOghD,SAAP;AACD;;AAED,eAASpE,cAAT,CAAyBhM,GAAzB,EAA8BiQ,KAA9B,EAAqC;AACnC,YAAI3gD,CAAJ,EAAO+gD,EAAP,EAAWC,EAAX;AACA,YAAIF,SAAS,GAAG,EAAhB;;AACA,aAAK,IAAIhhD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4wC,GAAG,CAACjwC,MAAxB,EAAgC,EAAEX,CAAlC,EAAqC;AACnC,cAAI,CAAC6gD,KAAK,IAAI,CAAV,IAAe,CAAnB,EAAsB;AAEtB3gD,UAAAA,CAAC,GAAG0wC,GAAG,CAAC7C,UAAJ,CAAe/tC,CAAf,CAAJ;AACAihD,UAAAA,EAAE,GAAG/gD,CAAC,IAAI,CAAV;AACAghD,UAAAA,EAAE,GAAGhhD,CAAC,GAAG,GAAT;AACA8gD,UAAAA,SAAS,CAACtyC,IAAV,CAAewyC,EAAf;AACAF,UAAAA,SAAS,CAACtyC,IAAV,CAAeuyC,EAAf;AACD;;AAED,eAAOD,SAAP;AACD;;AAED,eAAS3G,aAAT,CAAwBzJ,GAAxB,EAA6B;AAC3B,eAAO/d,MAAM,CAACgkB,WAAP,CAAmB8J,WAAW,CAAC/P,GAAD,CAA9B,CAAP;AACD;;AAED,eAAS0L,UAAT,CAAqB6E,GAArB,EAA0BC,GAA1B,EAA+Bj6C,MAA/B,EAAuCxG,MAAvC,EAA+C;AAC7C,aAAK,IAAIX,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGW,MAApB,EAA4B,EAAEX,CAA9B,EAAiC;AAC/B,cAAKA,CAAC,GAAGmH,MAAJ,IAAci6C,GAAG,CAACzgD,MAAnB,IAA+BX,CAAC,IAAImhD,GAAG,CAACxgD,MAA5C,EAAqD;AACrDygD,UAAAA,GAAG,CAACphD,CAAC,GAAGmH,MAAL,CAAH,GAAkBg6C,GAAG,CAACnhD,CAAD,CAArB;AACD;;AACD,eAAOA,CAAP;AACD;;AAED,eAAS+5C,KAAT,CAAgBpkC,GAAhB,EAAqB;AACnB,eAAOA,GAAG,KAAKA,GAAf,CADmB,CACA;AACpB;AAEA,KA/vDD,EA+vDGjV,IA/vDH,CA+vDQ,IA/vDR,EA+vDa,OAAOw3C,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC,OAAO7tC,IAAP,KAAgB,WAAhB,GAA8BA,IAA9B,GAAqC,OAAOwL,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC,EA/vDpI,EA+vDuI1V,OAAO,CAAC,QAAD,CAAP,CAAkBwC,MA/vDzJ;AAgwDC,GAjwDQ,EAiwDP;AAAC,iBAAY,EAAb;AAAgB,cAAS,EAAzB;AAA4B,eAAU,EAAtC;AAAyC,eAAU;AAAnD,GAjwDO,CAl+bic;AAmufhZ,MAAG,CAAC,UAASxC,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,aAASwpB,YAAT,GAAwB;AACtB,WAAK2W,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAA/B;AACA,WAAKygB,aAAL,GAAqB,KAAKA,aAAL,IAAsBv3C,SAA3C;AACD;;AACDlJ,IAAAA,MAAM,CAACH,OAAP,GAAiBwpB,YAAjB,CA1B8F,CA4B9F;;AACAA,IAAAA,YAAY,CAACA,YAAb,GAA4BA,YAA5B;AAEAA,IAAAA,YAAY,CAAChnB,SAAb,CAAuB29B,OAAvB,GAAiC92B,SAAjC;AACAmgB,IAAAA,YAAY,CAAChnB,SAAb,CAAuBo+C,aAAvB,GAAuCv3C,SAAvC,CAhC8F,CAkC9F;AACA;;AACAmgB,IAAAA,YAAY,CAACq3B,mBAAb,GAAmC,EAAnC,CApC8F,CAsC9F;AACA;;AACAr3B,IAAAA,YAAY,CAAChnB,SAAb,CAAuBs+C,eAAvB,GAAyC,UAAS1hD,CAAT,EAAY;AACnD,UAAI,CAAC2hD,QAAQ,CAAC3hD,CAAD,CAAT,IAAgBA,CAAC,GAAG,CAApB,IAAyBs9B,KAAK,CAACt9B,CAAD,CAAlC,EACE,MAAMs5C,SAAS,CAAC,6BAAD,CAAf;AACF,WAAKkI,aAAL,GAAqBxhD,CAArB;AACA,aAAO,IAAP;AACD,KALD;;AAOAoqB,IAAAA,YAAY,CAAChnB,SAAb,CAAuB0gB,IAAvB,GAA8B,UAASnM,IAAT,EAAe;AAC3C,UAAIiqC,EAAJ,EAAQC,OAAR,EAAiBxK,GAAjB,EAAsBrZ,IAAtB,EAA4B79B,CAA5B,EAA+B8/B,SAA/B;AAEA,UAAI,CAAC,KAAKc,OAAV,EACE,KAAKA,OAAL,GAAe,EAAf,CAJyC,CAM3C;;AACA,UAAIppB,IAAI,KAAK,OAAb,EAAsB;AACpB,YAAI,CAAC,KAAKopB,OAAL,CAAat8B,KAAd,IACCq9C,QAAQ,CAAC,KAAK/gB,OAAL,CAAat8B,KAAd,CAAR,IAAgC,CAAC,KAAKs8B,OAAL,CAAat8B,KAAb,CAAmB3D,MADzD,EACkE;AAChE8gD,UAAAA,EAAE,GAAG5gD,SAAS,CAAC,CAAD,CAAd;;AACA,cAAI4gD,EAAE,YAAYnhD,KAAlB,EAAyB;AACvB,kBAAMmhD,EAAN,CADuB,CACb;AACX,WAFD,MAEO;AACL;AACA,gBAAIl3C,GAAG,GAAG,IAAIjK,KAAJ,CAAU,2CAA2CmhD,EAA3C,GAAgD,GAA1D,CAAV;AACAl3C,YAAAA,GAAG,CAAC4oB,OAAJ,GAAcsuB,EAAd;AACA,kBAAMl3C,GAAN;AACD;AACF;AACF;;AAEDm3C,MAAAA,OAAO,GAAG,KAAK9gB,OAAL,CAAappB,IAAb,CAAV;AAEA,UAAIoqC,WAAW,CAACF,OAAD,CAAf,EACE,OAAO,KAAP;;AAEF,UAAIG,UAAU,CAACH,OAAD,CAAd,EAAyB;AACvB,gBAAQ7gD,SAAS,CAACF,MAAlB;AACE;AACA,eAAK,CAAL;AACE+gD,YAAAA,OAAO,CAAChhD,IAAR,CAAa,IAAb;AACA;;AACF,eAAK,CAAL;AACEghD,YAAAA,OAAO,CAAChhD,IAAR,CAAa,IAAb,EAAmBG,SAAS,CAAC,CAAD,CAA5B;AACA;;AACF,eAAK,CAAL;AACE6gD,YAAAA,OAAO,CAAChhD,IAAR,CAAa,IAAb,EAAmBG,SAAS,CAAC,CAAD,CAA5B,EAAiCA,SAAS,CAAC,CAAD,CAA1C;AACA;AACF;;AACA;AACEg9B,YAAAA,IAAI,GAAG9J,KAAK,CAAC9wB,SAAN,CAAgB+S,KAAhB,CAAsBtV,IAAtB,CAA2BG,SAA3B,EAAsC,CAAtC,CAAP;AACA6gD,YAAAA,OAAO,CAAC5gD,KAAR,CAAc,IAAd,EAAoB+8B,IAApB;AAdJ;AAgBD,OAjBD,MAiBO,IAAI8jB,QAAQ,CAACD,OAAD,CAAZ,EAAuB;AAC5B7jB,QAAAA,IAAI,GAAG9J,KAAK,CAAC9wB,SAAN,CAAgB+S,KAAhB,CAAsBtV,IAAtB,CAA2BG,SAA3B,EAAsC,CAAtC,CAAP;AACAi/B,QAAAA,SAAS,GAAG4hB,OAAO,CAAC1rC,KAAR,EAAZ;AACAkhC,QAAAA,GAAG,GAAGpX,SAAS,CAACn/B,MAAhB;;AACA,aAAKX,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGk3C,GAAhB,EAAqBl3C,CAAC,EAAtB,EACE8/B,SAAS,CAAC9/B,CAAD,CAAT,CAAac,KAAb,CAAmB,IAAnB,EAAyB+8B,IAAzB;AACH;;AAED,aAAO,IAAP;AACD,KArDD;;AAuDA5T,IAAAA,YAAY,CAAChnB,SAAb,CAAuBu7B,WAAvB,GAAqC,UAAShnB,IAAT,EAAeqpB,QAAf,EAAyB;AAC5D,UAAIia,CAAJ;AAEA,UAAI,CAAC+G,UAAU,CAAChhB,QAAD,CAAf,EACE,MAAMsY,SAAS,CAAC,6BAAD,CAAf;AAEF,UAAI,CAAC,KAAKvY,OAAV,EACE,KAAKA,OAAL,GAAe,EAAf,CAP0D,CAS5D;AACA;;AACA,UAAI,KAAKA,OAAL,CAAakhB,WAAjB,EACE,KAAKn+B,IAAL,CAAU,aAAV,EAAyBnM,IAAzB,EACUqqC,UAAU,CAAChhB,QAAQ,CAACA,QAAV,CAAV,GACAA,QAAQ,CAACA,QADT,GACoBA,QAF9B;AAIF,UAAI,CAAC,KAAKD,OAAL,CAAappB,IAAb,CAAL,EACE;AACA,aAAKopB,OAAL,CAAappB,IAAb,IAAqBqpB,QAArB,CAFF,KAGK,IAAI8gB,QAAQ,CAAC,KAAK/gB,OAAL,CAAappB,IAAb,CAAD,CAAZ,EACH;AACA,aAAKopB,OAAL,CAAappB,IAAb,EAAmB9I,IAAnB,CAAwBmyB,QAAxB,EAFG,KAIH;AACA,aAAKD,OAAL,CAAappB,IAAb,IAAqB,CAAC,KAAKopB,OAAL,CAAappB,IAAb,CAAD,EAAqBqpB,QAArB,CAArB,CAxB0D,CA0B5D;;AACA,UAAI8gB,QAAQ,CAAC,KAAK/gB,OAAL,CAAappB,IAAb,CAAD,CAAR,IAAgC,CAAC,KAAKopB,OAAL,CAAappB,IAAb,EAAmBuqC,MAAxD,EAAgE;AAC9D,YAAI,CAACH,WAAW,CAAC,KAAKP,aAAN,CAAhB,EAAsC;AACpCvG,UAAAA,CAAC,GAAG,KAAKuG,aAAT;AACD,SAFD,MAEO;AACLvG,UAAAA,CAAC,GAAG7wB,YAAY,CAACq3B,mBAAjB;AACD;;AAED,YAAIxG,CAAC,IAAIA,CAAC,GAAG,CAAT,IAAc,KAAKla,OAAL,CAAappB,IAAb,EAAmB7W,MAAnB,GAA4Bm6C,CAA9C,EAAiD;AAC/C,eAAKla,OAAL,CAAappB,IAAb,EAAmBuqC,MAAnB,GAA4B,IAA5B;AACAC,UAAAA,OAAO,CAAC19C,KAAR,CAAc,kDACA,qCADA,GAEA,kDAFd,EAGc,KAAKs8B,OAAL,CAAappB,IAAb,EAAmB7W,MAHjC;;AAIA,cAAI,OAAOqhD,OAAO,CAACC,KAAf,KAAyB,UAA7B,EAAyC;AACvC;AACAD,YAAAA,OAAO,CAACC,KAAR;AACD;AACF;AACF;;AAED,aAAO,IAAP;AACD,KAhDD;;AAkDAh4B,IAAAA,YAAY,CAAChnB,SAAb,CAAuBugB,EAAvB,GAA4ByG,YAAY,CAAChnB,SAAb,CAAuBu7B,WAAnD;;AAEAvU,IAAAA,YAAY,CAAChnB,SAAb,CAAuBi/C,IAAvB,GAA8B,UAAS1qC,IAAT,EAAeqpB,QAAf,EAAyB;AACrD,UAAI,CAACghB,UAAU,CAAChhB,QAAD,CAAf,EACE,MAAMsY,SAAS,CAAC,6BAAD,CAAf;AAEF,UAAIgJ,KAAK,GAAG,KAAZ;;AAEA,eAASC,CAAT,GAAa;AACX,aAAKrpC,cAAL,CAAoBvB,IAApB,EAA0B4qC,CAA1B;;AAEA,YAAI,CAACD,KAAL,EAAY;AACVA,UAAAA,KAAK,GAAG,IAAR;AACAthB,UAAAA,QAAQ,CAAC//B,KAAT,CAAe,IAAf,EAAqBD,SAArB;AACD;AACF;;AAEDuhD,MAAAA,CAAC,CAACvhB,QAAF,GAAaA,QAAb;AACA,WAAKrd,EAAL,CAAQhM,IAAR,EAAc4qC,CAAd;AAEA,aAAO,IAAP;AACD,KAnBD,CA1J8F,CA+K9F;;;AACAn4B,IAAAA,YAAY,CAAChnB,SAAb,CAAuB8V,cAAvB,GAAwC,UAASvB,IAAT,EAAeqpB,QAAf,EAAyB;AAC/D,UAAIrZ,IAAJ,EAAUriB,QAAV,EAAoBxE,MAApB,EAA4BX,CAA5B;AAEA,UAAI,CAAC6hD,UAAU,CAAChhB,QAAD,CAAf,EACE,MAAMsY,SAAS,CAAC,6BAAD,CAAf;AAEF,UAAI,CAAC,KAAKvY,OAAN,IAAiB,CAAC,KAAKA,OAAL,CAAappB,IAAb,CAAtB,EACE,OAAO,IAAP;AAEFgQ,MAAAA,IAAI,GAAG,KAAKoZ,OAAL,CAAappB,IAAb,CAAP;AACA7W,MAAAA,MAAM,GAAG6mB,IAAI,CAAC7mB,MAAd;AACAwE,MAAAA,QAAQ,GAAG,CAAC,CAAZ;;AAEA,UAAIqiB,IAAI,KAAKqZ,QAAT,IACCghB,UAAU,CAACr6B,IAAI,CAACqZ,QAAN,CAAV,IAA6BrZ,IAAI,CAACqZ,QAAL,KAAkBA,QADpD,EAC+D;AAC7D,eAAO,KAAKD,OAAL,CAAappB,IAAb,CAAP;AACA,YAAI,KAAKopB,OAAL,CAAa7nB,cAAjB,EACE,KAAK4K,IAAL,CAAU,gBAAV,EAA4BnM,IAA5B,EAAkCqpB,QAAlC;AAEH,OAND,MAMO,IAAI8gB,QAAQ,CAACn6B,IAAD,CAAZ,EAAoB;AACzB,aAAKxnB,CAAC,GAAGW,MAAT,EAAiBX,CAAC,KAAK,CAAvB,GAA2B;AACzB,cAAIwnB,IAAI,CAACxnB,CAAD,CAAJ,KAAY6gC,QAAZ,IACCrZ,IAAI,CAACxnB,CAAD,CAAJ,CAAQ6gC,QAAR,IAAoBrZ,IAAI,CAACxnB,CAAD,CAAJ,CAAQ6gC,QAAR,KAAqBA,QAD9C,EACyD;AACvD17B,YAAAA,QAAQ,GAAGnF,CAAX;AACA;AACD;AACF;;AAED,YAAImF,QAAQ,GAAG,CAAf,EACE,OAAO,IAAP;;AAEF,YAAIqiB,IAAI,CAAC7mB,MAAL,KAAgB,CAApB,EAAuB;AACrB6mB,UAAAA,IAAI,CAAC7mB,MAAL,GAAc,CAAd;AACA,iBAAO,KAAKigC,OAAL,CAAappB,IAAb,CAAP;AACD,SAHD,MAGO;AACLgQ,UAAAA,IAAI,CAACyZ,MAAL,CAAY97B,QAAZ,EAAsB,CAAtB;AACD;;AAED,YAAI,KAAKy7B,OAAL,CAAa7nB,cAAjB,EACE,KAAK4K,IAAL,CAAU,gBAAV,EAA4BnM,IAA5B,EAAkCqpB,QAAlC;AACH;;AAED,aAAO,IAAP;AACD,KA3CD;;AA6CA5W,IAAAA,YAAY,CAAChnB,SAAb,CAAuBy4B,kBAAvB,GAA4C,UAASlkB,IAAT,EAAe;AACzD,UAAI/U,GAAJ,EAASq9B,SAAT;AAEA,UAAI,CAAC,KAAKc,OAAV,EACE,OAAO,IAAP,CAJuD,CAMzD;;AACA,UAAI,CAAC,KAAKA,OAAL,CAAa7nB,cAAlB,EAAkC;AAChC,YAAIlY,SAAS,CAACF,MAAV,KAAqB,CAAzB,EACE,KAAKigC,OAAL,GAAe,EAAf,CADF,KAEK,IAAI,KAAKA,OAAL,CAAappB,IAAb,CAAJ,EACH,OAAO,KAAKopB,OAAL,CAAappB,IAAb,CAAP;AACF,eAAO,IAAP;AACD,OAbwD,CAezD;;;AACA,UAAI3W,SAAS,CAACF,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,aAAK8B,GAAL,IAAY,KAAKm+B,OAAjB,EAA0B;AACxB,cAAIn+B,GAAG,KAAK,gBAAZ,EAA8B;AAC9B,eAAKi5B,kBAAL,CAAwBj5B,GAAxB;AACD;;AACD,aAAKi5B,kBAAL,CAAwB,gBAAxB;AACA,aAAKkF,OAAL,GAAe,EAAf;AACA,eAAO,IAAP;AACD;;AAEDd,MAAAA,SAAS,GAAG,KAAKc,OAAL,CAAappB,IAAb,CAAZ;;AAEA,UAAIqqC,UAAU,CAAC/hB,SAAD,CAAd,EAA2B;AACzB,aAAK/mB,cAAL,CAAoBvB,IAApB,EAA0BsoB,SAA1B;AACD,OAFD,MAEO,IAAIA,SAAJ,EAAe;AACpB;AACA,eAAOA,SAAS,CAACn/B,MAAjB,EACE,KAAKoY,cAAL,CAAoBvB,IAApB,EAA0BsoB,SAAS,CAACA,SAAS,CAACn/B,MAAV,GAAmB,CAApB,CAAnC;AACH;;AACD,aAAO,KAAKigC,OAAL,CAAappB,IAAb,CAAP;AAEA,aAAO,IAAP;AACD,KAtCD;;AAwCAyS,IAAAA,YAAY,CAAChnB,SAAb,CAAuB68B,SAAvB,GAAmC,UAAStoB,IAAT,EAAe;AAChD,UAAI24B,GAAJ;AACA,UAAI,CAAC,KAAKvP,OAAN,IAAiB,CAAC,KAAKA,OAAL,CAAappB,IAAb,CAAtB,EACE24B,GAAG,GAAG,EAAN,CADF,KAEK,IAAI0R,UAAU,CAAC,KAAKjhB,OAAL,CAAappB,IAAb,CAAD,CAAd,EACH24B,GAAG,GAAG,CAAC,KAAKvP,OAAL,CAAappB,IAAb,CAAD,CAAN,CADG,KAGH24B,GAAG,GAAG,KAAKvP,OAAL,CAAappB,IAAb,EAAmBxB,KAAnB,EAAN;AACF,aAAOm6B,GAAP;AACD,KATD;;AAWAlmB,IAAAA,YAAY,CAAChnB,SAAb,CAAuBo/C,aAAvB,GAAuC,UAAS7qC,IAAT,EAAe;AACpD,UAAI,KAAKopB,OAAT,EAAkB;AAChB,YAAI0hB,UAAU,GAAG,KAAK1hB,OAAL,CAAappB,IAAb,CAAjB;AAEA,YAAIqqC,UAAU,CAACS,UAAD,CAAd,EACE,OAAO,CAAP,CADF,KAEK,IAAIA,UAAJ,EACH,OAAOA,UAAU,CAAC3hD,MAAlB;AACH;;AACD,aAAO,CAAP;AACD,KAVD;;AAYAspB,IAAAA,YAAY,CAACo4B,aAAb,GAA6B,UAASj4B,OAAT,EAAkB5S,IAAlB,EAAwB;AACnD,aAAO4S,OAAO,CAACi4B,aAAR,CAAsB7qC,IAAtB,CAAP;AACD,KAFD;;AAIA,aAASqqC,UAAT,CAAoB/+C,GAApB,EAAyB;AACvB,aAAO,OAAOA,GAAP,KAAe,UAAtB;AACD;;AAED,aAAS0+C,QAAT,CAAkB1+C,GAAlB,EAAuB;AACrB,aAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;;AAED,aAAS6+C,QAAT,CAAkB7+C,GAAlB,EAAuB;AACrB,aAAO,OAAOA,GAAP,KAAe,QAAf,IAA2BA,GAAG,KAAK,IAA1C;AACD;;AAED,aAAS8+C,WAAT,CAAqB9+C,GAArB,EAA0B;AACxB,aAAOA,GAAG,KAAK,KAAK,CAApB;AACD;AAEA,GAhT4D,EAgT3D,EAhT2D,CAnuf6Y;AAmhgBpc,MAAG,CAAC,UAAS3C,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1CA,IAAAA,OAAO,CAACwjB,IAAR,GAAe,UAAUzgB,MAAV,EAAkB2D,MAAlB,EAA0Bo7C,IAA1B,EAAgCC,IAAhC,EAAsCC,MAAtC,EAA8C;AAC3D,UAAI7iD,CAAJ,EAAOk7C,CAAP;AACA,UAAI4H,IAAI,GAAID,MAAM,GAAG,CAAV,GAAeD,IAAf,GAAsB,CAAjC;AACA,UAAIG,IAAI,GAAG,CAAC,KAAKD,IAAN,IAAc,CAAzB;AACA,UAAIE,KAAK,GAAGD,IAAI,IAAI,CAApB;AACA,UAAIE,KAAK,GAAG,CAAC,CAAb;AACA,UAAI7iD,CAAC,GAAGuiD,IAAI,GAAIE,MAAM,GAAG,CAAb,GAAkB,CAA9B;AACA,UAAI18C,CAAC,GAAGw8C,IAAI,GAAG,CAAC,CAAJ,GAAQ,CAApB;AACA,UAAI/7C,CAAC,GAAGhD,MAAM,CAAC2D,MAAM,GAAGnH,CAAV,CAAd;AAEAA,MAAAA,CAAC,IAAI+F,CAAL;AAEAnG,MAAAA,CAAC,GAAG4G,CAAC,GAAI,CAAC,KAAM,CAACq8C,KAAR,IAAkB,CAA3B;AACAr8C,MAAAA,CAAC,KAAM,CAACq8C,KAAR;AACAA,MAAAA,KAAK,IAAIH,IAAT;;AACA,aAAOG,KAAK,GAAG,CAAf,EAAkBjjD,CAAC,GAAIA,CAAC,GAAG,GAAL,GAAY4D,MAAM,CAAC2D,MAAM,GAAGnH,CAAV,CAAtB,EAAoCA,CAAC,IAAI+F,CAAzC,EAA4C88C,KAAK,IAAI,CAAvE,EAA0E,CAAE;;AAE5E/H,MAAAA,CAAC,GAAGl7C,CAAC,GAAI,CAAC,KAAM,CAACijD,KAAR,IAAkB,CAA3B;AACAjjD,MAAAA,CAAC,KAAM,CAACijD,KAAR;AACAA,MAAAA,KAAK,IAAIL,IAAT;;AACA,aAAOK,KAAK,GAAG,CAAf,EAAkB/H,CAAC,GAAIA,CAAC,GAAG,GAAL,GAAYt3C,MAAM,CAAC2D,MAAM,GAAGnH,CAAV,CAAtB,EAAoCA,CAAC,IAAI+F,CAAzC,EAA4C88C,KAAK,IAAI,CAAvE,EAA0E,CAAE;;AAE5E,UAAIjjD,CAAC,KAAK,CAAV,EAAa;AACXA,QAAAA,CAAC,GAAG,IAAIgjD,KAAR;AACD,OAFD,MAEO,IAAIhjD,CAAC,KAAK+iD,IAAV,EAAgB;AACrB,eAAO7H,CAAC,GAAGgI,GAAH,GAAU,CAACt8C,CAAC,GAAG,CAAC,CAAJ,GAAQ,CAAV,IAAes6C,QAAjC;AACD,OAFM,MAEA;AACLhG,QAAAA,CAAC,GAAGA,CAAC,GAAGp1C,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAY47C,IAAZ,CAAR;AACA5iD,QAAAA,CAAC,GAAGA,CAAC,GAAGgjD,KAAR;AACD;;AACD,aAAO,CAACp8C,CAAC,GAAG,CAAC,CAAJ,GAAQ,CAAV,IAAes0C,CAAf,GAAmBp1C,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAYhH,CAAC,GAAG4iD,IAAhB,CAA1B;AACD,KA/BD;;AAiCA/hD,IAAAA,OAAO,CAAC6G,KAAR,GAAgB,UAAU9D,MAAV,EAAkB0G,KAAlB,EAAyB/C,MAAzB,EAAiCo7C,IAAjC,EAAuCC,IAAvC,EAA6CC,MAA7C,EAAqD;AACnE,UAAI7iD,CAAJ,EAAOk7C,CAAP,EAAU56C,CAAV;AACA,UAAIwiD,IAAI,GAAID,MAAM,GAAG,CAAV,GAAeD,IAAf,GAAsB,CAAjC;AACA,UAAIG,IAAI,GAAG,CAAC,KAAKD,IAAN,IAAc,CAAzB;AACA,UAAIE,KAAK,GAAGD,IAAI,IAAI,CAApB;AACA,UAAII,EAAE,GAAIP,IAAI,KAAK,EAAT,GAAc98C,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAY,CAAC,EAAb,IAAmBlB,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAY,CAAC,EAAb,CAAjC,GAAoD,CAA9D;AACA,UAAI5G,CAAC,GAAGuiD,IAAI,GAAG,CAAH,GAAQE,MAAM,GAAG,CAA7B;AACA,UAAI18C,CAAC,GAAGw8C,IAAI,GAAG,CAAH,GAAO,CAAC,CAApB;AACA,UAAI/7C,CAAC,GAAG0D,KAAK,GAAG,CAAR,IAAcA,KAAK,KAAK,CAAV,IAAe,IAAIA,KAAJ,GAAY,CAAzC,GAA8C,CAA9C,GAAkD,CAA1D;AAEAA,MAAAA,KAAK,GAAGxE,IAAI,CAACqX,GAAL,CAAS7S,KAAT,CAAR;;AAEA,UAAIizB,KAAK,CAACjzB,KAAD,CAAL,IAAgBA,KAAK,KAAK42C,QAA9B,EAAwC;AACtChG,QAAAA,CAAC,GAAG3d,KAAK,CAACjzB,KAAD,CAAL,GAAe,CAAf,GAAmB,CAAvB;AACAtK,QAAAA,CAAC,GAAG+iD,IAAJ;AACD,OAHD,MAGO;AACL/iD,QAAAA,CAAC,GAAG8F,IAAI,CAACC,KAAL,CAAWD,IAAI,CAAC6iB,GAAL,CAASre,KAAT,IAAkBxE,IAAI,CAACs9C,GAAlC,CAAJ;;AACA,YAAI94C,KAAK,IAAIhK,CAAC,GAAGwF,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAY,CAAChH,CAAb,CAAR,CAAL,GAAgC,CAApC,EAAuC;AACrCA,UAAAA,CAAC;AACDM,UAAAA,CAAC,IAAI,CAAL;AACD;;AACD,YAAIN,CAAC,GAAGgjD,KAAJ,IAAa,CAAjB,EAAoB;AAClB14C,UAAAA,KAAK,IAAI64C,EAAE,GAAG7iD,CAAd;AACD,SAFD,MAEO;AACLgK,UAAAA,KAAK,IAAI64C,EAAE,GAAGr9C,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAY,IAAIg8C,KAAhB,CAAd;AACD;;AACD,YAAI14C,KAAK,GAAGhK,CAAR,IAAa,CAAjB,EAAoB;AAClBN,UAAAA,CAAC;AACDM,UAAAA,CAAC,IAAI,CAAL;AACD;;AAED,YAAIN,CAAC,GAAGgjD,KAAJ,IAAaD,IAAjB,EAAuB;AACrB7H,UAAAA,CAAC,GAAG,CAAJ;AACAl7C,UAAAA,CAAC,GAAG+iD,IAAJ;AACD,SAHD,MAGO,IAAI/iD,CAAC,GAAGgjD,KAAJ,IAAa,CAAjB,EAAoB;AACzB9H,UAAAA,CAAC,GAAG,CAAE5wC,KAAK,GAAGhK,CAAT,GAAc,CAAf,IAAoBwF,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAY47C,IAAZ,CAAxB;AACA5iD,UAAAA,CAAC,GAAGA,CAAC,GAAGgjD,KAAR;AACD,SAHM,MAGA;AACL9H,UAAAA,CAAC,GAAG5wC,KAAK,GAAGxE,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAYg8C,KAAK,GAAG,CAApB,CAAR,GAAiCl9C,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAY47C,IAAZ,CAArC;AACA5iD,UAAAA,CAAC,GAAG,CAAJ;AACD;AACF;;AAED,aAAO4iD,IAAI,IAAI,CAAf,EAAkBh/C,MAAM,CAAC2D,MAAM,GAAGnH,CAAV,CAAN,GAAqB86C,CAAC,GAAG,IAAzB,EAA+B96C,CAAC,IAAI+F,CAApC,EAAuC+0C,CAAC,IAAI,GAA5C,EAAiD0H,IAAI,IAAI,CAA3E,EAA8E,CAAE;;AAEhF5iD,MAAAA,CAAC,GAAIA,CAAC,IAAI4iD,IAAN,GAAc1H,CAAlB;AACA4H,MAAAA,IAAI,IAAIF,IAAR;;AACA,aAAOE,IAAI,GAAG,CAAd,EAAiBl/C,MAAM,CAAC2D,MAAM,GAAGnH,CAAV,CAAN,GAAqBJ,CAAC,GAAG,IAAzB,EAA+BI,CAAC,IAAI+F,CAApC,EAAuCnG,CAAC,IAAI,GAA5C,EAAiD8iD,IAAI,IAAI,CAA1E,EAA6E,CAAE;;AAE/El/C,MAAAA,MAAM,CAAC2D,MAAM,GAAGnH,CAAT,GAAa+F,CAAd,CAAN,IAA0BS,CAAC,GAAG,GAA9B;AACD,KAlDD;AAoDC,GAtFQ,EAsFP,EAtFO,CAnhgBic;AAymgBpc,MAAG,CAAC,UAASrG,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1C,QAAIyC,QAAQ,GAAG,GAAGA,QAAlB;;AAEAtC,IAAAA,MAAM,CAACH,OAAP,GAAiBszB,KAAK,CAAC6D,OAAN,IAAiB,UAAU6f,GAAV,EAAe;AAC/C,aAAOv0C,QAAQ,CAACxC,IAAT,CAAc+2C,GAAd,KAAsB,gBAA7B;AACD,KAFD;AAIC,GAPQ,EAOP,EAPO,CAzmgBic;AAgngBpc,MAAG,CAAC,UAASt3C,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1C,KAAC,UAASA,OAAT,EAAkB;AACjB;;AAEA,eAASm3B,OAAT,CAAiB7I,GAAjB,EAAsB;AACpB,YAAIA,GAAG,KAAK,IAAZ,EAAkB;AAChB,iBAAO1tB,MAAM,CAAC4B,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+BquB,GAA/B,MAAwC,gBAA/C;AACD,SAFD,MAEO;AACL,iBAAO,KAAP;AACD;AACF;;AAED,eAAS4yB,QAAT,CAAkB5yB,GAAlB,EAAuB;AACrB,YAAIA,GAAG,KAAK,IAAZ,EAAkB;AAChB,iBAAO1tB,MAAM,CAAC4B,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+BquB,GAA/B,MAAwC,iBAA/C;AACD,SAFD,MAEO;AACL,iBAAO,KAAP;AACD;AACF;;AAED,eAASyQ,eAAT,CAAyByjB,KAAzB,EAAgCC,MAAhC,EAAwC;AACtC;AACA,YAAID,KAAK,KAAKC,MAAd,EAAsB;AACpB,iBAAO,IAAP;AACD,SAJqC,CAMtC;;;AACA,YAAIC,SAAS,GAAG9hD,MAAM,CAAC4B,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+BuiD,KAA/B,CAAhB;;AACA,YAAIE,SAAS,KAAK9hD,MAAM,CAAC4B,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+BwiD,MAA/B,CAAlB,EAA0D;AACxD,iBAAO,KAAP;AACD,SAVqC,CAWtC;AACA;;;AACA,YAAItrB,OAAO,CAACqrB,KAAD,CAAP,KAAmB,IAAvB,EAA6B;AAC3B;AACA,cAAIA,KAAK,CAACtiD,MAAN,KAAiBuiD,MAAM,CAACviD,MAA5B,EAAoC;AAClC,mBAAO,KAAP;AACD;;AACD,eAAK,IAAIX,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGijD,KAAK,CAACtiD,MAA1B,EAAkCX,CAAC,EAAnC,EAAuC;AACrC,gBAAIw/B,eAAe,CAACyjB,KAAK,CAACjjD,CAAD,CAAN,EAAWkjD,MAAM,CAACljD,CAAD,CAAjB,CAAf,KAAyC,KAA7C,EAAoD;AAClD,qBAAO,KAAP;AACD;AACF;;AACD,iBAAO,IAAP;AACD;;AACD,YAAI2hD,QAAQ,CAACsB,KAAD,CAAR,KAAoB,IAAxB,EAA8B;AAC5B;AACA,cAAIG,QAAQ,GAAG,EAAf;;AACA,eAAK,IAAI3gD,GAAT,IAAgBwgD,KAAhB,EAAuB;AACrB,gBAAIjhD,cAAc,CAACtB,IAAf,CAAoBuiD,KAApB,EAA2BxgD,GAA3B,CAAJ,EAAqC;AACnC,kBAAI+8B,eAAe,CAACyjB,KAAK,CAACxgD,GAAD,CAAN,EAAaygD,MAAM,CAACzgD,GAAD,CAAnB,CAAf,KAA6C,KAAjD,EAAwD;AACtD,uBAAO,KAAP;AACD;;AACD2gD,cAAAA,QAAQ,CAAC3gD,GAAD,CAAR,GAAgB,IAAhB;AACD;AACF,WAV2B,CAW5B;AACA;;;AACA,eAAK,IAAI4gD,IAAT,IAAiBH,MAAjB,EAAyB;AACvB,gBAAIlhD,cAAc,CAACtB,IAAf,CAAoBwiD,MAApB,EAA4BG,IAA5B,CAAJ,EAAuC;AACrC,kBAAID,QAAQ,CAACC,IAAD,CAAR,KAAmB,IAAvB,EAA6B;AAC3B,uBAAO,KAAP;AACD;AACF;AACF;;AACD,iBAAO,IAAP;AACD;;AACD,eAAO,KAAP;AACD;;AAED,eAASC,OAAT,CAAiBv0B,GAAjB,EAAsB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,YAAIA,GAAG,KAAK,EAAR,IAAcA,GAAG,KAAK,KAAtB,IAA+BA,GAAG,KAAK,IAA3C,EAAiD;AAC7C,iBAAO,IAAP;AACH,SAFD,MAEO,IAAI6I,OAAO,CAAC7I,GAAD,CAAP,IAAgBA,GAAG,CAACpuB,MAAJ,KAAe,CAAnC,EAAsC;AACzC;AACA,iBAAO,IAAP;AACH,SAHM,MAGA,IAAIghD,QAAQ,CAAC5yB,GAAD,CAAZ,EAAmB;AACtB;AACA,eAAK,IAAItsB,GAAT,IAAgBssB,GAAhB,EAAqB;AACjB;AACA;AACA;AACA,gBAAIA,GAAG,CAAC/sB,cAAJ,CAAmBS,GAAnB,CAAJ,EAA6B;AAC3B,qBAAO,KAAP;AACD;AACJ;;AACD,iBAAO,IAAP;AACH,SAXM,MAWA;AACH,iBAAO,KAAP;AACH;AACF;;AAED,eAAS8gD,SAAT,CAAmBx0B,GAAnB,EAAwB;AACtB,YAAI9kB,IAAI,GAAG5I,MAAM,CAAC4I,IAAP,CAAY8kB,GAAZ,CAAX;AACA,YAAIod,MAAM,GAAG,EAAb;;AACA,aAAK,IAAInsC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiK,IAAI,CAACtJ,MAAzB,EAAiCX,CAAC,EAAlC,EAAsC;AACpCmsC,UAAAA,MAAM,CAACz9B,IAAP,CAAYqgB,GAAG,CAAC9kB,IAAI,CAACjK,CAAD,CAAL,CAAf;AACD;;AACD,eAAOmsC,MAAP;AACD;;AAED,eAAS//B,KAAT,CAAe/L,CAAf,EAAkByF,CAAlB,EAAqB;AACjB,YAAI09C,MAAM,GAAG,EAAb;;AACA,aAAK,IAAI/gD,GAAT,IAAgBpC,CAAhB,EAAmB;AACfmjD,UAAAA,MAAM,CAAC/gD,GAAD,CAAN,GAAcpC,CAAC,CAACoC,GAAD,CAAf;AACH;;AACD,aAAK,IAAI4gD,IAAT,IAAiBv9C,CAAjB,EAAoB;AAChB09C,UAAAA,MAAM,CAACH,IAAD,CAAN,GAAev9C,CAAC,CAACu9C,IAAD,CAAhB;AACH;;AACD,eAAOG,MAAP;AACH;;AAED,UAAIC,QAAJ;;AACA,UAAI,OAAO1rC,MAAM,CAAC9U,SAAP,CAAiBwgD,QAAxB,KAAqC,UAAzC,EAAqD;AACnDA,QAAAA,QAAQ,GAAG,UAAS7S,GAAT,EAAc;AACvB,iBAAOA,GAAG,CAAC6S,QAAJ,EAAP;AACD,SAFD;AAGD,OAJD,MAIO;AACLA,QAAAA,QAAQ,GAAG,UAAS7S,GAAT,EAAc;AACvB,iBAAOA,GAAG,CAAC5qB,KAAJ,CAAU,UAAV,EAAsB,CAAtB,CAAP;AACD,SAFD;AAGD,OAjIgB,CAmIjB;;;AACA,UAAI09B,WAAW,GAAG,CAAlB;AACA,UAAIC,QAAQ,GAAG,CAAf;AACA,UAAIC,WAAW,GAAG,CAAlB;AACA,UAAIC,UAAU,GAAG,CAAjB;AACA,UAAIC,WAAW,GAAG,CAAlB;AACA,UAAIC,YAAY,GAAG,CAAnB;AACA,UAAIC,WAAW,GAAG,CAAlB;AACA,UAAIC,SAAS,GAAG,CAAhB;AACA,UAAIC,iBAAiB,GAAG,CAAxB;AACA,UAAIC,iBAAiB,GAAG,CAAxB;AAEA,UAAIC,OAAO,GAAG,KAAd;AACA,UAAIC,sBAAsB,GAAG,oBAA7B;AACA,UAAIC,oBAAoB,GAAG,kBAA3B;AACA,UAAIC,YAAY,GAAG,UAAnB;AACA,UAAIC,UAAU,GAAG,QAAjB;AACA,UAAIC,SAAS,GAAG,OAAhB;AACA,UAAIC,SAAS,GAAG,OAAhB;AACA,UAAIC,UAAU,GAAG,QAAjB;AACA,UAAIC,UAAU,GAAG,QAAjB;AACA,UAAIC,WAAW,GAAG,SAAlB;AACA,UAAIC,UAAU,GAAG,QAAjB;AACA,UAAIC,QAAQ,GAAG,MAAf;AACA,UAAIC,MAAM,GAAG,IAAb;AACA,UAAIC,OAAO,GAAG,KAAd;AACA,UAAIC,MAAM,GAAG,IAAb;AACA,UAAIC,MAAM,GAAG,IAAb;AACA,UAAIC,MAAM,GAAG,IAAb;AACA,UAAIC,OAAO,GAAG,KAAd;AACA,UAAIC,OAAO,GAAG,KAAd;AACA,UAAIC,MAAM,GAAG,IAAb;AACA,UAAIC,WAAW,GAAG,SAAlB;AACA,UAAIC,QAAQ,GAAG,MAAf;AACA,UAAIC,UAAU,GAAG,QAAjB;AACA,UAAIC,OAAO,GAAG,KAAd;AACA,UAAIC,OAAO,GAAG,KAAd;AACA,UAAIC,UAAU,GAAG,QAAjB;AACA,UAAIC,YAAY,GAAG,UAAnB;AACA,UAAIC,UAAU,GAAE,QAAhB;AACA,UAAIC,WAAW,GAAE,SAAjB,CA3KiB,CA6KjB;AACA;AACA;AACA;AACA;;AAEA,UAAIC,WAAW,GAAG;AAChB,aAAKN,OADW;AAEhB,aAAKF,QAFW;AAGhB,aAAKhB,SAHW;AAIhB,aAAKC,SAJW;AAKhB,aAAKmB,UALW;AAMhB,aAAKlB,UANW;AAOhB,aAAKJ,YAPW;AAQhB,aAAKwB,UARW;AAShB,aAAKvB,UATW;AAUhB,aAAKK;AAVW,OAAlB;AAaA,UAAIqB,kBAAkB,GAAG;AACrB,aAAK,IADgB;AAErB,aAAK,IAFgB;AAGrB,aAAK,IAHgB;AAIrB,aAAK;AAJgB,OAAzB;AAOA,UAAIC,SAAS,GAAG;AACZ,aAAK,IADO;AAEZ,cAAM,IAFM;AAGZ,cAAM;AAHM,OAAhB;;AAOA,eAASC,OAAT,CAAiBtY,EAAjB,EAAqB;AACjB,eAAQA,EAAE,IAAI,GAAN,IAAaA,EAAE,IAAI,GAApB,IACCA,EAAE,IAAI,GAAN,IAAaA,EAAE,IAAI,GADpB,IAEAA,EAAE,KAAK,GAFd;AAGH;;AAED,eAASuY,KAAT,CAAevY,EAAf,EAAmB;AACf,eAAQA,EAAE,IAAI,GAAN,IAAaA,EAAE,IAAI,GAApB,IACAA,EAAE,KAAK,GADd;AAEH;;AACD,eAASwY,UAAT,CAAoBxY,EAApB,EAAwB;AACpB,eAAQA,EAAE,IAAI,GAAN,IAAaA,EAAE,IAAI,GAApB,IACCA,EAAE,IAAI,GAAN,IAAaA,EAAE,IAAI,GADpB,IAECA,EAAE,IAAI,GAAN,IAAaA,EAAE,IAAI,GAFpB,IAGAA,EAAE,KAAK,GAHd;AAIH;;AAED,eAASyY,KAAT,GAAiB,CAChB;;AACDA,MAAAA,KAAK,CAACtjD,SAAN,GAAkB;AACdujD,QAAAA,QAAQ,EAAE,UAASljC,MAAT,EAAiB;AACvB,cAAImjC,MAAM,GAAG,EAAb;AACA,eAAKC,QAAL,GAAgB,CAAhB;AACA,cAAI9U,KAAJ;AACA,cAAI/K,UAAJ;AACA,cAAIh0B,KAAJ;;AACA,iBAAO,KAAK6zC,QAAL,GAAgBpjC,MAAM,CAAC3iB,MAA9B,EAAsC;AAClC,gBAAIylD,OAAO,CAAC9iC,MAAM,CAAC,KAAKojC,QAAN,CAAP,CAAX,EAAoC;AAChC9U,cAAAA,KAAK,GAAG,KAAK8U,QAAb;AACA7f,cAAAA,UAAU,GAAG,KAAK8f,0BAAL,CAAgCrjC,MAAhC,CAAb;AACAmjC,cAAAA,MAAM,CAAC/3C,IAAP,CAAY;AAAC8I,gBAAAA,IAAI,EAAE6sC,sBAAP;AACCn6C,gBAAAA,KAAK,EAAE28B,UADR;AAEC+K,gBAAAA,KAAK,EAAEA;AAFR,eAAZ;AAGH,aAND,MAMO,IAAIqU,WAAW,CAAC3iC,MAAM,CAAC,KAAKojC,QAAN,CAAP,CAAX,KAAuC58C,SAA3C,EAAsD;AACzD28C,cAAAA,MAAM,CAAC/3C,IAAP,CAAY;AAAC8I,gBAAAA,IAAI,EAAEyuC,WAAW,CAAC3iC,MAAM,CAAC,KAAKojC,QAAN,CAAP,CAAlB;AACAx8C,gBAAAA,KAAK,EAAEoZ,MAAM,CAAC,KAAKojC,QAAN,CADb;AAEA9U,gBAAAA,KAAK,EAAE,KAAK8U;AAFZ,eAAZ;AAGA,mBAAKA,QAAL;AACH,aALM,MAKA,IAAIL,KAAK,CAAC/iC,MAAM,CAAC,KAAKojC,QAAN,CAAP,CAAT,EAAkC;AACrC7zC,cAAAA,KAAK,GAAG,KAAK+zC,cAAL,CAAoBtjC,MAApB,CAAR;AACAmjC,cAAAA,MAAM,CAAC/3C,IAAP,CAAYmE,KAAZ;AACH,aAHM,MAGA,IAAIyQ,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,GAA9B,EAAmC;AACtC;AACA;AACA7zC,cAAAA,KAAK,GAAG,KAAKg0C,gBAAL,CAAsBvjC,MAAtB,CAAR;AACAmjC,cAAAA,MAAM,CAAC/3C,IAAP,CAAYmE,KAAZ;AACH,aALM,MAKA,IAAIyQ,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,IAA9B,EAAoC;AACvC9U,cAAAA,KAAK,GAAG,KAAK8U,QAAb;AACA7f,cAAAA,UAAU,GAAG,KAAKigB,wBAAL,CAA8BxjC,MAA9B,CAAb;AACAmjC,cAAAA,MAAM,CAAC/3C,IAAP,CAAY;AAAC8I,gBAAAA,IAAI,EAAE8sC,oBAAP;AACCp6C,gBAAAA,KAAK,EAAE28B,UADR;AAEC+K,gBAAAA,KAAK,EAAEA;AAFR,eAAZ;AAGH,aANM,MAMA,IAAItuB,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,GAA9B,EAAmC;AACtC9U,cAAAA,KAAK,GAAG,KAAK8U,QAAb;AACA7f,cAAAA,UAAU,GAAG,KAAKkgB,wBAAL,CAA8BzjC,MAA9B,CAAb;AACAmjC,cAAAA,MAAM,CAAC/3C,IAAP,CAAY;AAAC8I,gBAAAA,IAAI,EAAEwuC,WAAP;AACC97C,gBAAAA,KAAK,EAAE28B,UADR;AAEC+K,gBAAAA,KAAK,EAAEA;AAFR,eAAZ;AAGH,aANM,MAMA,IAAItuB,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,GAA9B,EAAmC;AACtC9U,cAAAA,KAAK,GAAG,KAAK8U,QAAb;;AACA,kBAAIM,OAAO,GAAG,KAAKC,eAAL,CAAqB3jC,MAArB,CAAd;;AACAmjC,cAAAA,MAAM,CAAC/3C,IAAP,CAAY;AAAC8I,gBAAAA,IAAI,EAAEwuC,WAAP;AACC97C,gBAAAA,KAAK,EAAE88C,OADR;AAECpV,gBAAAA,KAAK,EAAEA;AAFR,eAAZ;AAGH,aANM,MAMA,IAAIsU,kBAAkB,CAAC5iC,MAAM,CAAC,KAAKojC,QAAN,CAAP,CAAlB,KAA8C58C,SAAlD,EAA6D;AAChE28C,cAAAA,MAAM,CAAC/3C,IAAP,CAAY,KAAKw4C,gBAAL,CAAsB5jC,MAAtB,CAAZ;AACH,aAFM,MAEA,IAAI6iC,SAAS,CAAC7iC,MAAM,CAAC,KAAKojC,QAAN,CAAP,CAAT,KAAqC58C,SAAzC,EAAoD;AACvD;AACA,mBAAK48C,QAAL;AACH,aAHM,MAGA,IAAIpjC,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,GAA9B,EAAmC;AACtC9U,cAAAA,KAAK,GAAG,KAAK8U,QAAb;AACA,mBAAKA,QAAL;;AACA,kBAAIpjC,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,GAA9B,EAAmC;AAC/B,qBAAKA,QAAL;AACAD,gBAAAA,MAAM,CAAC/3C,IAAP,CAAY;AAAC8I,kBAAAA,IAAI,EAAEytC,OAAP;AAAgB/6C,kBAAAA,KAAK,EAAE,IAAvB;AAA6B0nC,kBAAAA,KAAK,EAAEA;AAApC,iBAAZ;AACH,eAHD,MAGO;AACH6U,gBAAAA,MAAM,CAAC/3C,IAAP,CAAY;AAAC8I,kBAAAA,IAAI,EAAEstC,UAAP;AAAmB56C,kBAAAA,KAAK,EAAE,GAA1B;AAA+B0nC,kBAAAA,KAAK,EAAEA;AAAtC,iBAAZ;AACH;AACJ,aATM,MASA,IAAItuB,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,GAA9B,EAAmC;AACtC9U,cAAAA,KAAK,GAAG,KAAK8U,QAAb;AACA,mBAAKA,QAAL;;AACA,kBAAIpjC,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,GAA9B,EAAmC;AAC/B,qBAAKA,QAAL;AACAD,gBAAAA,MAAM,CAAC/3C,IAAP,CAAY;AAAC8I,kBAAAA,IAAI,EAAEwtC,MAAP;AAAe96C,kBAAAA,KAAK,EAAE,IAAtB;AAA4B0nC,kBAAAA,KAAK,EAAEA;AAAnC,iBAAZ;AACH,eAHD,MAGO;AACH6U,gBAAAA,MAAM,CAAC/3C,IAAP,CAAY;AAAC8I,kBAAAA,IAAI,EAAEutC,QAAP;AAAiB76C,kBAAAA,KAAK,EAAE,GAAxB;AAA6B0nC,kBAAAA,KAAK,EAAEA;AAApC,iBAAZ;AACH;AACJ,aATM,MASA;AACH,kBAAIttC,KAAK,GAAG,IAAIhE,KAAJ,CAAU,uBAAuBgjB,MAAM,CAAC,KAAKojC,QAAN,CAAvC,CAAZ;AACApiD,cAAAA,KAAK,CAACsG,IAAN,GAAa,YAAb;AACA,oBAAMtG,KAAN;AACH;AACJ;;AACD,iBAAOmiD,MAAP;AACH,SA3Ea;AA6EdE,QAAAA,0BAA0B,EAAE,UAASrjC,MAAT,EAAiB;AACzC,cAAIsuB,KAAK,GAAG,KAAK8U,QAAjB;AACA,eAAKA,QAAL;;AACA,iBAAO,KAAKA,QAAL,GAAgBpjC,MAAM,CAAC3iB,MAAvB,IAAiC2lD,UAAU,CAAChjC,MAAM,CAAC,KAAKojC,QAAN,CAAP,CAAlD,EAA2E;AACvE,iBAAKA,QAAL;AACH;;AACD,iBAAOpjC,MAAM,CAACtN,KAAP,CAAa47B,KAAb,EAAoB,KAAK8U,QAAzB,CAAP;AACH,SApFa;AAsFdI,QAAAA,wBAAwB,EAAE,UAASxjC,MAAT,EAAiB;AACvC,cAAIsuB,KAAK,GAAG,KAAK8U,QAAjB;AACA,eAAKA,QAAL;AACA,cAAIS,SAAS,GAAG7jC,MAAM,CAAC3iB,MAAvB;;AACA,iBAAO2iB,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,IAA1B,IAAkC,KAAKA,QAAL,GAAgBS,SAAzD,EAAoE;AAChE;AACA,gBAAIC,OAAO,GAAG,KAAKV,QAAnB;;AACA,gBAAIpjC,MAAM,CAAC8jC,OAAD,CAAN,KAAoB,IAApB,KAA6B9jC,MAAM,CAAC8jC,OAAO,GAAG,CAAX,CAAN,KAAwB,IAAxB,IACA9jC,MAAM,CAAC8jC,OAAO,GAAG,CAAX,CAAN,KAAwB,IADrD,CAAJ,EACgE;AAC5DA,cAAAA,OAAO,IAAI,CAAX;AACH,aAHD,MAGO;AACHA,cAAAA,OAAO;AACV;;AACD,iBAAKV,QAAL,GAAgBU,OAAhB;AACH;;AACD,eAAKV,QAAL;AACA,iBAAOj7C,IAAI,CAACC,KAAL,CAAW4X,MAAM,CAACtN,KAAP,CAAa47B,KAAb,EAAoB,KAAK8U,QAAzB,CAAX,CAAP;AACH,SAvGa;AAyGdK,QAAAA,wBAAwB,EAAE,UAASzjC,MAAT,EAAiB;AACvC,cAAIsuB,KAAK,GAAG,KAAK8U,QAAjB;AACA,eAAKA,QAAL;AACA,cAAIS,SAAS,GAAG7jC,MAAM,CAAC3iB,MAAvB;;AACA,iBAAO2iB,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,GAA1B,IAAiC,KAAKA,QAAL,GAAgBS,SAAxD,EAAmE;AAC/D;AACA,gBAAIC,OAAO,GAAG,KAAKV,QAAnB;;AACA,gBAAIpjC,MAAM,CAAC8jC,OAAD,CAAN,KAAoB,IAApB,KAA6B9jC,MAAM,CAAC8jC,OAAO,GAAG,CAAX,CAAN,KAAwB,IAAxB,IACA9jC,MAAM,CAAC8jC,OAAO,GAAG,CAAX,CAAN,KAAwB,GADrD,CAAJ,EAC+D;AAC3DA,cAAAA,OAAO,IAAI,CAAX;AACH,aAHD,MAGO;AACHA,cAAAA,OAAO;AACV;;AACD,iBAAKV,QAAL,GAAgBU,OAAhB;AACH;;AACD,eAAKV,QAAL;AACA,cAAIM,OAAO,GAAG1jC,MAAM,CAACtN,KAAP,CAAa47B,KAAK,GAAG,CAArB,EAAwB,KAAK8U,QAAL,GAAgB,CAAxC,CAAd;AACA,iBAAOM,OAAO,CAAC75B,OAAR,CAAgB,KAAhB,EAAuB,GAAvB,CAAP;AACH,SA3Ha;AA6Hdy5B,QAAAA,cAAc,EAAE,UAAStjC,MAAT,EAAiB;AAC7B,cAAIsuB,KAAK,GAAG,KAAK8U,QAAjB;AACA,eAAKA,QAAL;AACA,cAAIS,SAAS,GAAG7jC,MAAM,CAAC3iB,MAAvB;;AACA,iBAAO0lD,KAAK,CAAC/iC,MAAM,CAAC,KAAKojC,QAAN,CAAP,CAAL,IAAgC,KAAKA,QAAL,GAAgBS,SAAvD,EAAkE;AAC9D,iBAAKT,QAAL;AACH;;AACD,cAAIx8C,KAAK,GAAGkT,QAAQ,CAACkG,MAAM,CAACtN,KAAP,CAAa47B,KAAb,EAAoB,KAAK8U,QAAzB,CAAD,CAApB;AACA,iBAAO;AAAClvC,YAAAA,IAAI,EAAEotC,UAAP;AAAmB16C,YAAAA,KAAK,EAAEA,KAA1B;AAAiC0nC,YAAAA,KAAK,EAAEA;AAAxC,WAAP;AACH,SAtIa;AAwIdiV,QAAAA,gBAAgB,EAAE,UAASvjC,MAAT,EAAiB;AAC/B,cAAIsuB,KAAK,GAAG,KAAK8U,QAAjB;AACA,eAAKA,QAAL;;AACA,cAAIpjC,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,GAA9B,EAAmC;AAC/B,iBAAKA,QAAL;AACA,mBAAO;AAAClvC,cAAAA,IAAI,EAAEkuC,UAAP;AAAmBx7C,cAAAA,KAAK,EAAE,IAA1B;AAAgC0nC,cAAAA,KAAK,EAAEA;AAAvC,aAAP;AACH,WAHD,MAGO,IAAItuB,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,GAA9B,EAAmC;AACtC,iBAAKA,QAAL;AACA,mBAAO;AAAClvC,cAAAA,IAAI,EAAEguC,WAAP;AAAoBt7C,cAAAA,KAAK,EAAE,IAA3B;AAAiC0nC,cAAAA,KAAK,EAAEA;AAAxC,aAAP;AACH,WAHM,MAGA;AACH,mBAAO;AAACp6B,cAAAA,IAAI,EAAEsuC,YAAP;AAAqB57C,cAAAA,KAAK,EAAE,GAA5B;AAAiC0nC,cAAAA,KAAK,EAAEA;AAAxC,aAAP;AACH;AACJ,SApJa;AAsJdsV,QAAAA,gBAAgB,EAAE,UAAS5jC,MAAT,EAAiB;AAC/B,cAAIsuB,KAAK,GAAG,KAAK8U,QAAjB;AACA,cAAIW,YAAY,GAAG/jC,MAAM,CAACsuB,KAAD,CAAzB;AACA,eAAK8U,QAAL;;AACA,cAAIW,YAAY,KAAK,GAArB,EAA0B;AACtB,gBAAI/jC,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,GAA9B,EAAmC;AAC/B,mBAAKA,QAAL;AACA,qBAAO;AAAClvC,gBAAAA,IAAI,EAAE+tC,MAAP;AAAer7C,gBAAAA,KAAK,EAAE,IAAtB;AAA4B0nC,gBAAAA,KAAK,EAAEA;AAAnC,eAAP;AACH,aAHD,MAGO;AACL,qBAAO;AAACp6B,gBAAAA,IAAI,EAAEouC,OAAP;AAAgB17C,gBAAAA,KAAK,EAAE,GAAvB;AAA4B0nC,gBAAAA,KAAK,EAAEA;AAAnC,eAAP;AACD;AACJ,WAPD,MAOO,IAAIyV,YAAY,KAAK,GAArB,EAA0B;AAC7B,gBAAI/jC,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,GAA9B,EAAmC;AAC/B,mBAAKA,QAAL;AACA,qBAAO;AAAClvC,gBAAAA,IAAI,EAAE8tC,OAAP;AAAgBp7C,gBAAAA,KAAK,EAAE,IAAvB;AAA6B0nC,gBAAAA,KAAK,EAAEA;AAApC,eAAP;AACH,aAHD,MAGO;AACH,qBAAO;AAACp6B,gBAAAA,IAAI,EAAE4tC,MAAP;AAAel7C,gBAAAA,KAAK,EAAE,GAAtB;AAA2B0nC,gBAAAA,KAAK,EAAEA;AAAlC,eAAP;AACH;AACJ,WAPM,MAOA,IAAIyV,YAAY,KAAK,GAArB,EAA0B;AAC7B,gBAAI/jC,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,GAA9B,EAAmC;AAC/B,mBAAKA,QAAL;AACA,qBAAO;AAAClvC,gBAAAA,IAAI,EAAE6tC,OAAP;AAAgBn7C,gBAAAA,KAAK,EAAE,IAAvB;AAA6B0nC,gBAAAA,KAAK,EAAEA;AAApC,eAAP;AACH,aAHD,MAGO;AACH,qBAAO;AAACp6B,gBAAAA,IAAI,EAAE2tC,MAAP;AAAej7C,gBAAAA,KAAK,EAAE,GAAtB;AAA2B0nC,gBAAAA,KAAK,EAAEA;AAAlC,eAAP;AACH;AACJ,WAPM,MAOA,IAAIyV,YAAY,KAAK,GAArB,EAA0B;AAC7B,gBAAI/jC,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,GAA9B,EAAmC;AAC/B,mBAAKA,QAAL;AACA,qBAAO;AAAClvC,gBAAAA,IAAI,EAAE0tC,MAAP;AAAeh7C,gBAAAA,KAAK,EAAE,IAAtB;AAA4B0nC,gBAAAA,KAAK,EAAEA;AAAnC,eAAP;AACH;AACJ;AACJ,SArLa;AAuLdqV,QAAAA,eAAe,EAAE,UAAS3jC,MAAT,EAAiB;AAC9B,eAAKojC,QAAL;AACA,cAAI9U,KAAK,GAAG,KAAK8U,QAAjB;AACA,cAAIS,SAAS,GAAG7jC,MAAM,CAAC3iB,MAAvB;AACA,cAAIqmD,OAAJ;;AACA,iBAAM1jC,MAAM,CAAC,KAAKojC,QAAN,CAAN,KAA0B,GAA1B,IAAiC,KAAKA,QAAL,GAAgBS,SAAvD,EAAkE;AAC9D;AACA,gBAAIC,OAAO,GAAG,KAAKV,QAAnB;;AACA,gBAAIpjC,MAAM,CAAC8jC,OAAD,CAAN,KAAoB,IAApB,KAA6B9jC,MAAM,CAAC8jC,OAAO,GAAG,CAAX,CAAN,KAAwB,IAAxB,IACA9jC,MAAM,CAAC8jC,OAAO,GAAG,CAAX,CAAN,KAAwB,GADrD,CAAJ,EAC+D;AAC3DA,cAAAA,OAAO,IAAI,CAAX;AACH,aAHD,MAGO;AACHA,cAAAA,OAAO;AACV;;AACD,iBAAKV,QAAL,GAAgBU,OAAhB;AACH;;AACD,cAAIE,aAAa,GAAG7D,QAAQ,CAACngC,MAAM,CAACtN,KAAP,CAAa47B,KAAb,EAAoB,KAAK8U,QAAzB,CAAD,CAA5B;AACAY,UAAAA,aAAa,GAAGA,aAAa,CAACn6B,OAAd,CAAsB,KAAtB,EAA6B,GAA7B,CAAhB;;AACA,cAAI,KAAKo6B,cAAL,CAAoBD,aAApB,CAAJ,EAAwC;AACpCN,YAAAA,OAAO,GAAGv7C,IAAI,CAACC,KAAL,CAAW47C,aAAX,CAAV;AACH,WAFD,MAEO;AACH;AACAN,YAAAA,OAAO,GAAGv7C,IAAI,CAACC,KAAL,CAAW,OAAO47C,aAAP,GAAuB,IAAlC,CAAV;AACH,WAvB6B,CAwB9B;;;AACA,eAAKZ,QAAL;AACA,iBAAOM,OAAP;AACH,SAlNa;AAoNdO,QAAAA,cAAc,EAAE,UAASD,aAAT,EAAwB;AACpC,cAAIE,aAAa,GAAG,MAApB;AACA,cAAIC,YAAY,GAAG,CAAC,MAAD,EAAS,OAAT,EAAkB,MAAlB,CAAnB;AACA,cAAIC,aAAa,GAAG,aAApB;;AAEA,cAAIJ,aAAa,KAAK,EAAtB,EAA0B;AACtB,mBAAO,KAAP;AACH,WAFD,MAEO,IAAIE,aAAa,CAACxkD,OAAd,CAAsBskD,aAAa,CAAC,CAAD,CAAnC,KAA2C,CAA/C,EAAkD;AACrD,mBAAO,IAAP;AACH,WAFM,MAEA,IAAIG,YAAY,CAACzkD,OAAb,CAAqBskD,aAArB,KAAuC,CAA3C,EAA8C;AACjD,mBAAO,IAAP;AACH,WAFM,MAEA,IAAII,aAAa,CAAC1kD,OAAd,CAAsBskD,aAAa,CAAC,CAAD,CAAnC,KAA2C,CAA/C,EAAkD;AACrD,gBAAI;AACA77C,cAAAA,IAAI,CAACC,KAAL,CAAW47C,aAAX;AACA,qBAAO,IAAP;AACH,aAHD,CAGE,OAAOK,EAAP,EAAW;AACT,qBAAO,KAAP;AACH;AACJ,WAPM,MAOA;AACH,mBAAO,KAAP;AACH;AACJ;AAzOa,OAAlB;AA4OI,UAAIC,YAAY,GAAG,EAAnB;AACAA,MAAAA,YAAY,CAACxD,OAAD,CAAZ,GAAwB,CAAxB;AACAwD,MAAAA,YAAY,CAACvD,sBAAD,CAAZ,GAAuC,CAAvC;AACAuD,MAAAA,YAAY,CAACtD,oBAAD,CAAZ,GAAqC,CAArC;AACAsD,MAAAA,YAAY,CAACrD,YAAD,CAAZ,GAA6B,CAA7B;AACAqD,MAAAA,YAAY,CAACpD,UAAD,CAAZ,GAA2B,CAA3B;AACAoD,MAAAA,YAAY,CAACnD,SAAD,CAAZ,GAA0B,CAA1B;AACAmD,MAAAA,YAAY,CAACjD,UAAD,CAAZ,GAA2B,CAA3B;AACAiD,MAAAA,YAAY,CAAChD,UAAD,CAAZ,GAA2B,CAA3B;AACAgD,MAAAA,YAAY,CAAC/C,WAAD,CAAZ,GAA4B,CAA5B;AACA+C,MAAAA,YAAY,CAAC9C,UAAD,CAAZ,GAA2B,CAA3B;AACA8C,MAAAA,YAAY,CAAC7C,QAAD,CAAZ,GAAyB,CAAzB;AACA6C,MAAAA,YAAY,CAAC5C,MAAD,CAAZ,GAAuB,CAAvB;AACA4C,MAAAA,YAAY,CAAC3C,OAAD,CAAZ,GAAwB,CAAxB;AACA2C,MAAAA,YAAY,CAAC1C,MAAD,CAAZ,GAAuB,CAAvB;AACA0C,MAAAA,YAAY,CAACzC,MAAD,CAAZ,GAAuB,CAAvB;AACAyC,MAAAA,YAAY,CAACxC,MAAD,CAAZ,GAAuB,CAAvB;AACAwC,MAAAA,YAAY,CAACvC,OAAD,CAAZ,GAAwB,CAAxB;AACAuC,MAAAA,YAAY,CAACtC,OAAD,CAAZ,GAAwB,CAAxB;AACAsC,MAAAA,YAAY,CAACrC,MAAD,CAAZ,GAAuB,CAAvB;AACAqC,MAAAA,YAAY,CAACpC,WAAD,CAAZ,GAA4B,CAA5B;AACAoC,MAAAA,YAAY,CAACnC,QAAD,CAAZ,GAAyB,EAAzB;AACAmC,MAAAA,YAAY,CAAClC,UAAD,CAAZ,GAA2B,EAA3B;AACAkC,MAAAA,YAAY,CAACjC,OAAD,CAAZ,GAAwB,EAAxB;AACAiC,MAAAA,YAAY,CAAChC,OAAD,CAAZ,GAAwB,EAAxB;AACAgC,MAAAA,YAAY,CAAC/B,UAAD,CAAZ,GAA2B,EAA3B;AACA+B,MAAAA,YAAY,CAAC9B,YAAD,CAAZ,GAA6B,EAA7B;AACA8B,MAAAA,YAAY,CAAC7B,UAAD,CAAZ,GAA2B,EAA3B;;AAEJ,eAASx8C,MAAT,GAAkB,CACjB;;AAEDA,MAAAA,MAAM,CAACtG,SAAP,GAAmB;AACfyI,QAAAA,KAAK,EAAE,UAASm8C,UAAT,EAAqB;AACxB,eAAKC,WAAL,CAAiBD,UAAjB;;AACA,eAAK3xC,KAAL,GAAa,CAAb;AACA,cAAI6xC,GAAG,GAAG,KAAKF,UAAL,CAAgB,CAAhB,CAAV;;AACA,cAAI,KAAKG,UAAL,CAAgB,CAAhB,MAAuB5D,OAA3B,EAAoC;AAChC,gBAAItkD,CAAC,GAAG,KAAKmoD,eAAL,CAAqB,CAArB,CAAR;;AACA,gBAAI3jD,KAAK,GAAG,IAAIhE,KAAJ,CACR,4BAA4BR,CAAC,CAAC0X,IAA9B,GAAqC,WAArC,GAAmD1X,CAAC,CAACoK,KAD7C,CAAZ;AAEA5F,YAAAA,KAAK,CAACsG,IAAN,GAAa,aAAb;AACA,kBAAMtG,KAAN;AACH;;AACD,iBAAOyjD,GAAP;AACH,SAbc;AAefD,QAAAA,WAAW,EAAE,UAASD,UAAT,EAAqB;AAC9B,cAAIK,KAAK,GAAG,IAAI3B,KAAJ,EAAZ;AACA,cAAIE,MAAM,GAAGyB,KAAK,CAAC1B,QAAN,CAAeqB,UAAf,CAAb;AACApB,UAAAA,MAAM,CAAC/3C,IAAP,CAAY;AAAC8I,YAAAA,IAAI,EAAE4sC,OAAP;AAAgBl6C,YAAAA,KAAK,EAAE,EAAvB;AAA2B0nC,YAAAA,KAAK,EAAEiW,UAAU,CAAClnD;AAA7C,WAAZ;AACA,eAAK8lD,MAAL,GAAcA,MAAd;AACH,SApBc;AAsBfoB,QAAAA,UAAU,EAAE,UAASM,GAAT,EAAc;AACtB,cAAIC,SAAS,GAAG,KAAKH,eAAL,CAAqB,CAArB,CAAhB;;AACA,eAAKI,QAAL;;AACA,cAAIC,IAAI,GAAG,KAAKC,GAAL,CAASH,SAAT,CAAX;;AACA,cAAII,YAAY,GAAG,KAAKR,UAAL,CAAgB,CAAhB,CAAnB;;AACA,iBAAOG,GAAG,GAAGP,YAAY,CAACY,YAAD,CAAzB,EAAyC;AACrC,iBAAKH,QAAL;;AACAC,YAAAA,IAAI,GAAG,KAAKG,GAAL,CAASD,YAAT,EAAuBF,IAAvB,CAAP;AACAE,YAAAA,YAAY,GAAG,KAAKR,UAAL,CAAgB,CAAhB,CAAf;AACH;;AACD,iBAAOM,IAAP;AACH,SAjCc;AAmCfN,QAAAA,UAAU,EAAE,UAASnrC,MAAT,EAAiB;AACzB,iBAAO,KAAK4pC,MAAL,CAAY,KAAKvwC,KAAL,GAAa2G,MAAzB,EAAiCrF,IAAxC;AACH,SArCc;AAuCfywC,QAAAA,eAAe,EAAE,UAASprC,MAAT,EAAiB;AAC9B,iBAAO,KAAK4pC,MAAL,CAAY,KAAKvwC,KAAL,GAAa2G,MAAzB,CAAP;AACH,SAzCc;AA2CfwrC,QAAAA,QAAQ,EAAE,YAAW;AACjB,eAAKnyC,KAAL;AACH,SA7Cc;AA+CfqyC,QAAAA,GAAG,EAAE,UAAS11C,KAAT,EAAgB;AACnB,cAAIy1C,IAAJ;AACA,cAAII,KAAJ;AACA,cAAIb,UAAJ;;AACA,kBAAQh1C,KAAK,CAAC2E,IAAd;AACE,iBAAKwuC,WAAL;AACE,qBAAO;AAACxuC,gBAAAA,IAAI,EAAE,SAAP;AAAkBtN,gBAAAA,KAAK,EAAE2I,KAAK,CAAC3I;AAA/B,eAAP;;AACF,iBAAKm6C,sBAAL;AACE,qBAAO;AAAC7sC,gBAAAA,IAAI,EAAE,OAAP;AAAgB5M,gBAAAA,IAAI,EAAEiI,KAAK,CAAC3I;AAA5B,eAAP;;AACF,iBAAKo6C,oBAAL;AACE,kBAAIqE,IAAI,GAAG;AAACnxC,gBAAAA,IAAI,EAAE,OAAP;AAAgB5M,gBAAAA,IAAI,EAAEiI,KAAK,CAAC3I;AAA5B,eAAX;;AACA,kBAAI,KAAK89C,UAAL,CAAgB,CAAhB,MAAuBjC,UAA3B,EAAuC;AACnC,sBAAM,IAAIzlD,KAAJ,CAAU,mDAAV,CAAN;AACH,eAFD,MAEO;AACH,uBAAOqoD,IAAP;AACH;;AACD;;AACF,iBAAK/C,OAAL;AACE8C,cAAAA,KAAK,GAAG,KAAKb,UAAL,CAAgBD,YAAY,CAACgB,GAA7B,CAAR;AACA,qBAAO;AAACpxC,gBAAAA,IAAI,EAAE,eAAP;AAAwBk+B,gBAAAA,QAAQ,EAAE,CAACgT,KAAD;AAAlC,eAAP;;AACF,iBAAKjD,QAAL;AACE6C,cAAAA,IAAI,GAAG;AAAC9wC,gBAAAA,IAAI,EAAE;AAAP,eAAP;AACAkxC,cAAAA,KAAK,GAAG,IAAR;;AACA,kBAAI,KAAKV,UAAL,CAAgB,CAAhB,MAAuBzD,YAA3B,EAAyC;AACrC;AACA;AACAmE,gBAAAA,KAAK,GAAG;AAAClxC,kBAAAA,IAAI,EAAE;AAAP,iBAAR;AACH,eAJD,MAIO;AACHkxC,gBAAAA,KAAK,GAAG,KAAKG,mBAAL,CAAyBjB,YAAY,CAACkB,IAAtC,CAAR;AACH;;AACD,qBAAO;AAACtxC,gBAAAA,IAAI,EAAE,iBAAP;AAA0Bk+B,gBAAAA,QAAQ,EAAE,CAAC4S,IAAD,EAAOI,KAAP;AAApC,eAAP;;AACF,iBAAKhD,UAAL;AACE,qBAAO,KAAK+C,GAAL,CAAS51C,KAAK,CAAC2E,IAAf,EAAqB;AAACA,gBAAAA,IAAI,EAAE;AAAP,eAArB,CAAP;;AACF,iBAAKquC,UAAL;AACE,qBAAO,KAAKkD,qBAAL,EAAP;;AACF,iBAAKvD,WAAL;AACE8C,cAAAA,IAAI,GAAG;AAAC9wC,gBAAAA,IAAI,EAAEguC,WAAP;AAAoB9P,gBAAAA,QAAQ,EAAE,CAAC;AAACl+B,kBAAAA,IAAI,EAAE;AAAP,iBAAD;AAA9B,eAAP;AACAkxC,cAAAA,KAAK,GAAG,KAAKG,mBAAL,CAAyBjB,YAAY,CAACoB,OAAtC,CAAR;AACA,qBAAO;AAACxxC,gBAAAA,IAAI,EAAE,YAAP;AAAqBk+B,gBAAAA,QAAQ,EAAE,CAAC4S,IAAD,EAAOI,KAAP;AAA/B,eAAP;;AACF,iBAAK5C,YAAL;AACE,kBAAI,KAAKkC,UAAL,CAAgB,CAAhB,MAAuBpD,UAAvB,IAAqC,KAAKoD,UAAL,CAAgB,CAAhB,MAAuBtD,SAAhE,EAA2E;AACvEgE,gBAAAA,KAAK,GAAG,KAAKO,qBAAL,EAAR;AACA,uBAAO,KAAKC,eAAL,CAAqB;AAAC1xC,kBAAAA,IAAI,EAAE;AAAP,iBAArB,EAAyCkxC,KAAzC,CAAP;AACH,eAHD,MAGO,IAAI,KAAKV,UAAL,CAAgB,CAAhB,MAAuBvC,QAAvB,IACA,KAAKuC,UAAL,CAAgB,CAAhB,MAAuBzD,YAD3B,EACyC;AAC5C,qBAAK8D,QAAL;;AACA,qBAAKA,QAAL;;AACAK,gBAAAA,KAAK,GAAG,KAAKG,mBAAL,CAAyBjB,YAAY,CAACkB,IAAtC,CAAR;AACA,uBAAO;AAACtxC,kBAAAA,IAAI,EAAE,YAAP;AACCk+B,kBAAAA,QAAQ,EAAE,CAAC;AAACl+B,oBAAAA,IAAI,EAAE;AAAP,mBAAD,EAAqBkxC,KAArB;AADX,iBAAP;AAEH,eAPM,MAOA;AACH,uBAAO,KAAKS,qBAAL,EAAP;AACH;;AACD;;AACF,iBAAKtE,WAAL;AACE,qBAAO;AAACrtC,gBAAAA,IAAI,EAAEqtC;AAAP,eAAP;;AACF,iBAAKC,UAAL;AACE+C,cAAAA,UAAU,GAAG,KAAKA,UAAL,CAAgBD,YAAY,CAACwB,MAA7B,CAAb;AACA,qBAAO;AAAC5xC,gBAAAA,IAAI,EAAE,qBAAP;AAA8Bk+B,gBAAAA,QAAQ,EAAE,CAACmS,UAAD;AAAxC,eAAP;;AACF,iBAAK9B,UAAL;AACE,kBAAIloB,IAAI,GAAG,EAAX;;AACA,qBAAO,KAAKmqB,UAAL,CAAgB,CAAhB,MAAuBxD,UAA9B,EAA0C;AACxC,oBAAI,KAAKwD,UAAL,CAAgB,CAAhB,MAAuBnD,WAA3B,EAAwC;AACtCgD,kBAAAA,UAAU,GAAG;AAACrwC,oBAAAA,IAAI,EAAEqtC;AAAP,mBAAb;;AACA,uBAAKwD,QAAL;AACD,iBAHD,MAGO;AACLR,kBAAAA,UAAU,GAAG,KAAKA,UAAL,CAAgB,CAAhB,CAAb;AACD;;AACDhqB,gBAAAA,IAAI,CAACnvB,IAAL,CAAUm5C,UAAV;AACD;;AACD,mBAAKwB,MAAL,CAAY7E,UAAZ;;AACA,qBAAO3mB,IAAI,CAAC,CAAD,CAAX;;AACF;AACE,mBAAKyrB,WAAL,CAAiBz2C,KAAjB;;AArEJ;AAuED,SA1Hc;AA4Hf41C,QAAAA,GAAG,EAAE,UAASc,SAAT,EAAoBjB,IAApB,EAA0B;AAC7B,cAAII,KAAJ;;AACA,kBAAOa,SAAP;AACE,iBAAK5D,OAAL;AACE,kBAAIwC,GAAG,GAAGP,YAAY,CAAC4B,GAAvB;;AACA,kBAAI,KAAKxB,UAAL,CAAgB,CAAhB,MAAuBvC,QAA3B,EAAqC;AACjCiD,gBAAAA,KAAK,GAAG,KAAKe,YAAL,CAAkBtB,GAAlB,CAAR;AACA,uBAAO;AAAC3wC,kBAAAA,IAAI,EAAE,eAAP;AAAwBk+B,kBAAAA,QAAQ,EAAE,CAAC4S,IAAD,EAAOI,KAAP;AAAlC,iBAAP;AACH,eAHD,MAGO;AACH;AACA,qBAAKL,QAAL;;AACAK,gBAAAA,KAAK,GAAG,KAAKG,mBAAL,CAAyBV,GAAzB,CAAR;AACA,uBAAO;AAAC3wC,kBAAAA,IAAI,EAAE,iBAAP;AAA0Bk+B,kBAAAA,QAAQ,EAAE,CAAC4S,IAAD,EAAOI,KAAP;AAApC,iBAAP;AACH;;AACD;;AACF,iBAAK3D,QAAL;AACE2D,cAAAA,KAAK,GAAG,KAAKb,UAAL,CAAgBD,YAAY,CAAC8B,IAA7B,CAAR;AACA,qBAAO;AAAClyC,gBAAAA,IAAI,EAAEutC,QAAP;AAAiBrP,gBAAAA,QAAQ,EAAE,CAAC4S,IAAD,EAAOI,KAAP;AAA3B,eAAP;;AACF,iBAAK1D,MAAL;AACE0D,cAAAA,KAAK,GAAG,KAAKb,UAAL,CAAgBD,YAAY,CAAC+B,EAA7B,CAAR;AACA,qBAAO;AAACnyC,gBAAAA,IAAI,EAAE,cAAP;AAAuBk+B,gBAAAA,QAAQ,EAAE,CAAC4S,IAAD,EAAOI,KAAP;AAAjC,eAAP;;AACF,iBAAKzD,OAAL;AACEyD,cAAAA,KAAK,GAAG,KAAKb,UAAL,CAAgBD,YAAY,CAACgC,GAA7B,CAAR;AACA,qBAAO;AAACpyC,gBAAAA,IAAI,EAAE,eAAP;AAAwBk+B,gBAAAA,QAAQ,EAAE,CAAC4S,IAAD,EAAOI,KAAP;AAAlC,eAAP;;AACF,iBAAK3C,UAAL;AACE,kBAAIn7C,IAAI,GAAG09C,IAAI,CAAC19C,IAAhB;AACA,kBAAIizB,IAAI,GAAG,EAAX;AACA,kBAAIgqB,UAAJ,EAAgBc,IAAhB;;AACA,qBAAO,KAAKX,UAAL,CAAgB,CAAhB,MAAuBxD,UAA9B,EAA0C;AACxC,oBAAI,KAAKwD,UAAL,CAAgB,CAAhB,MAAuBnD,WAA3B,EAAwC;AACtCgD,kBAAAA,UAAU,GAAG;AAACrwC,oBAAAA,IAAI,EAAEqtC;AAAP,mBAAb;;AACA,uBAAKwD,QAAL;AACD,iBAHD,MAGO;AACLR,kBAAAA,UAAU,GAAG,KAAKA,UAAL,CAAgB,CAAhB,CAAb;AACD;;AACD,oBAAI,KAAKG,UAAL,CAAgB,CAAhB,MAAuBvD,SAA3B,EAAsC;AACpC,uBAAK4E,MAAL,CAAY5E,SAAZ;AACD;;AACD5mB,gBAAAA,IAAI,CAACnvB,IAAL,CAAUm5C,UAAV;AACD;;AACD,mBAAKwB,MAAL,CAAY7E,UAAZ;;AACAmE,cAAAA,IAAI,GAAG;AAACnxC,gBAAAA,IAAI,EAAE,UAAP;AAAmB5M,gBAAAA,IAAI,EAAEA,IAAzB;AAA+B8qC,gBAAAA,QAAQ,EAAE7X;AAAzC,eAAP;AACA,qBAAO8qB,IAAP;;AACF,iBAAKjD,UAAL;AACE,kBAAImE,SAAS,GAAG,KAAKhC,UAAL,CAAgB,CAAhB,CAAhB;;AACA,mBAAKwB,MAAL,CAAY9E,YAAZ;;AACA,kBAAI,KAAKyD,UAAL,CAAgB,CAAhB,MAAuBxC,WAA3B,EAAwC;AACtCkD,gBAAAA,KAAK,GAAG;AAAClxC,kBAAAA,IAAI,EAAE;AAAP,iBAAR;AACD,eAFD,MAEO;AACLkxC,gBAAAA,KAAK,GAAG,KAAKG,mBAAL,CAAyBjB,YAAY,CAACkC,MAAtC,CAAR;AACD;;AACD,qBAAO;AAACtyC,gBAAAA,IAAI,EAAE,kBAAP;AAA2Bk+B,gBAAAA,QAAQ,EAAE,CAAC4S,IAAD,EAAOI,KAAP,EAAcmB,SAAd;AAArC,eAAP;;AACF,iBAAKrE,WAAL;AACE,kBAAIuE,QAAQ,GAAG;AAACvyC,gBAAAA,IAAI,EAAEguC,WAAP;AAAoB9P,gBAAAA,QAAQ,EAAE,CAAC4S,IAAD;AAA9B,eAAf;;AACA,kBAAI0B,SAAS,GAAG,KAAKnB,mBAAL,CAAyBjB,YAAY,CAACoB,OAAtC,CAAhB;;AACA,qBAAO;AAACxxC,gBAAAA,IAAI,EAAE,YAAP;AAAqBk+B,gBAAAA,QAAQ,EAAE,CAACqU,QAAD,EAAWC,SAAX;AAA/B,eAAP;;AACF,iBAAK9E,MAAL;AACA,iBAAKK,MAAL;AACA,iBAAKJ,MAAL;AACA,iBAAKE,OAAL;AACA,iBAAKD,MAAL;AACA,iBAAKE,OAAL;AACE,qBAAO,KAAK2E,gBAAL,CAAsB3B,IAAtB,EAA4BiB,SAA5B,CAAP;;AACF,iBAAKzD,YAAL;AACE,kBAAIjzC,KAAK,GAAG,KAAKo1C,eAAL,CAAqB,CAArB,CAAZ;;AACA,kBAAIp1C,KAAK,CAAC2E,IAAN,KAAeotC,UAAf,IAA6B/xC,KAAK,CAAC2E,IAAN,KAAektC,SAAhD,EAA2D;AACvDgE,gBAAAA,KAAK,GAAG,KAAKO,qBAAL,EAAR;AACA,uBAAO,KAAKC,eAAL,CAAqBZ,IAArB,EAA2BI,KAA3B,CAAP;AACH,eAHD,MAGO;AACH,qBAAKW,MAAL,CAAY5D,QAAZ;;AACA,qBAAK4D,MAAL,CAAY9E,YAAZ;;AACAmE,gBAAAA,KAAK,GAAG,KAAKG,mBAAL,CAAyBjB,YAAY,CAACkB,IAAtC,CAAR;AACA,uBAAO;AAACtxC,kBAAAA,IAAI,EAAE,YAAP;AAAqBk+B,kBAAAA,QAAQ,EAAE,CAAC4S,IAAD,EAAOI,KAAP;AAA/B,iBAAP;AACH;;AACD;;AACF;AACE,mBAAKY,WAAL,CAAiB,KAAKrB,eAAL,CAAqB,CAArB,CAAjB;;AA1EJ;AA4ED,SA1Mc;AA4MfoB,QAAAA,MAAM,EAAE,UAASa,SAAT,EAAoB;AACxB,cAAI,KAAKlC,UAAL,CAAgB,CAAhB,MAAuBkC,SAA3B,EAAsC;AAClC,iBAAK7B,QAAL;AACH,WAFD,MAEO;AACH,gBAAIvoD,CAAC,GAAG,KAAKmoD,eAAL,CAAqB,CAArB,CAAR;;AACA,gBAAI3jD,KAAK,GAAG,IAAIhE,KAAJ,CAAU,cAAc4pD,SAAd,GAA0B,SAA1B,GAAsCpqD,CAAC,CAAC0X,IAAlD,CAAZ;AACAlT,YAAAA,KAAK,CAACsG,IAAN,GAAa,aAAb;AACA,kBAAMtG,KAAN;AACH;AACJ,SArNc;AAuNfglD,QAAAA,WAAW,EAAE,UAASz2C,KAAT,EAAgB;AACzB,cAAIvO,KAAK,GAAG,IAAIhE,KAAJ,CAAU,oBACAuS,KAAK,CAAC2E,IADN,GACa,OADb,GAEA3E,KAAK,CAAC3I,KAFN,GAEc,IAFxB,CAAZ;AAGA5F,UAAAA,KAAK,CAACsG,IAAN,GAAa,aAAb;AACA,gBAAMtG,KAAN;AACH,SA7Nc;AAgOf2kD,QAAAA,qBAAqB,EAAE,YAAW;AAC9B,cAAI,KAAKjB,UAAL,CAAgB,CAAhB,MAAuBtD,SAAvB,IAAoC,KAAKsD,UAAL,CAAgB,CAAhB,MAAuBtD,SAA/D,EAA0E;AACtE,mBAAO,KAAKyF,qBAAL,EAAP;AACH,WAFD,MAEO;AACH,gBAAIxB,IAAI,GAAG;AACPnxC,cAAAA,IAAI,EAAE,OADC;AAEPtN,cAAAA,KAAK,EAAE,KAAK+9C,eAAL,CAAqB,CAArB,EAAwB/9C;AAFxB,aAAX;;AAGA,iBAAKm+C,QAAL;;AACA,iBAAKgB,MAAL,CAAY9E,YAAZ;;AACA,mBAAOoE,IAAP;AACH;AACJ,SA3Oc;AA6OfO,QAAAA,eAAe,EAAE,UAASZ,IAAT,EAAeI,KAAf,EAAsB;AACnC,cAAI0B,SAAS,GAAG;AAAC5yC,YAAAA,IAAI,EAAE,iBAAP;AAA0Bk+B,YAAAA,QAAQ,EAAE,CAAC4S,IAAD,EAAOI,KAAP;AAApC,WAAhB;;AACA,cAAIA,KAAK,CAAClxC,IAAN,KAAe,OAAnB,EAA4B;AACxB,mBAAO;AACHA,cAAAA,IAAI,EAAE,YADH;AAEHk+B,cAAAA,QAAQ,EAAE,CAAC0U,SAAD,EAAY,KAAKvB,mBAAL,CAAyBjB,YAAY,CAACkB,IAAtC,CAAZ;AAFP,aAAP;AAIH,WALD,MAKO;AACH,mBAAOsB,SAAP;AACH;AACJ,SAvPc;AAyPfD,QAAAA,qBAAqB,EAAE,YAAW;AAC9B;AACA;AACA,cAAItyB,KAAK,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAAZ;AACA,cAAI3hB,KAAK,GAAG,CAAZ;;AACA,cAAIsyC,YAAY,GAAG,KAAKR,UAAL,CAAgB,CAAhB,CAAnB;;AACA,iBAAOQ,YAAY,KAAKjE,YAAjB,IAAiCruC,KAAK,GAAG,CAAhD,EAAmD;AAC/C,gBAAIsyC,YAAY,KAAK9D,SAArB,EAAgC;AAC5BxuC,cAAAA,KAAK;;AACL,mBAAKmyC,QAAL;AACH,aAHD,MAGO,IAAIG,YAAY,KAAK5D,UAArB,EAAiC;AACpC/sB,cAAAA,KAAK,CAAC3hB,KAAD,CAAL,GAAe,KAAK+xC,eAAL,CAAqB,CAArB,EAAwB/9C,KAAvC;;AACA,mBAAKm+C,QAAL;AACH,aAHM,MAGA;AACH,kBAAIvoD,CAAC,GAAG,KAAKkoD,UAAL,CAAgB,CAAhB,CAAR;;AACA,kBAAI1jD,KAAK,GAAG,IAAIhE,KAAJ,CAAU,qCACAR,CAAC,CAACoK,KADF,GACU,GADV,GACgBpK,CAAC,CAAC0X,IADlB,GACyB,GADnC,CAAZ;AAEAlT,cAAAA,KAAK,CAACsG,IAAN,GAAa,aAAb;AACA,oBAAMtG,KAAN;AACH;;AACDkkD,YAAAA,YAAY,GAAG,KAAKR,UAAL,CAAgB,CAAhB,CAAf;AACH;;AACD,eAAKqB,MAAL,CAAY9E,YAAZ;;AACA,iBAAO;AACH/sC,YAAAA,IAAI,EAAE,OADH;AAEHk+B,YAAAA,QAAQ,EAAE7d;AAFP,WAAP;AAIH,SApRc;AAsRfoyB,QAAAA,gBAAgB,EAAE,UAAS3B,IAAT,EAAe+B,UAAf,EAA2B;AAC3C,cAAI3B,KAAK,GAAG,KAAKb,UAAL,CAAgBD,YAAY,CAACyC,UAAD,CAA5B,CAAZ;AACA,iBAAO;AAAC7yC,YAAAA,IAAI,EAAE,YAAP;AAAqB5M,YAAAA,IAAI,EAAEy/C,UAA3B;AAAuC3U,YAAAA,QAAQ,EAAE,CAAC4S,IAAD,EAAOI,KAAP;AAAjD,WAAP;AACD,SAzRc;AA2Rfe,QAAAA,YAAY,EAAE,UAAStB,GAAT,EAAc;AACxB,cAAImC,SAAS,GAAG,KAAKtC,UAAL,CAAgB,CAAhB,CAAhB;;AACA,cAAIuC,UAAU,GAAG,CAAClG,sBAAD,EAAyBC,oBAAzB,EAA+CmB,QAA/C,CAAjB;;AACA,cAAI8E,UAAU,CAACvnD,OAAX,CAAmBsnD,SAAnB,KAAiC,CAArC,EAAwC;AACpC,mBAAO,KAAKzC,UAAL,CAAgBM,GAAhB,CAAP;AACH,WAFD,MAEO,IAAImC,SAAS,KAAKxE,YAAlB,EAAgC;AACnC,iBAAKuD,MAAL,CAAYvD,YAAZ;;AACA,mBAAO,KAAKqD,qBAAL,EAAP;AACH,WAHM,MAGA,IAAImB,SAAS,KAAKzE,UAAlB,EAA8B;AACjC,iBAAKwD,MAAL,CAAYxD,UAAZ;;AACA,mBAAO,KAAKkD,qBAAL,EAAP;AACH;AACJ,SAvSc;AAySfF,QAAAA,mBAAmB,EAAE,UAASV,GAAT,EAAc;AAC/B,cAAIO,KAAJ;;AACA,cAAId,YAAY,CAAC,KAAKI,UAAL,CAAgB,CAAhB,CAAD,CAAZ,GAAmC,EAAvC,EAA2C;AACvCU,YAAAA,KAAK,GAAG;AAAClxC,cAAAA,IAAI,EAAE;AAAP,aAAR;AACH,WAFD,MAEO,IAAI,KAAKwwC,UAAL,CAAgB,CAAhB,MAAuBlC,YAA3B,EAAyC;AAC5C4C,YAAAA,KAAK,GAAG,KAAKb,UAAL,CAAgBM,GAAhB,CAAR;AACH,WAFM,MAEA,IAAI,KAAKH,UAAL,CAAgB,CAAhB,MAAuBtC,UAA3B,EAAuC;AAC1CgD,YAAAA,KAAK,GAAG,KAAKb,UAAL,CAAgBM,GAAhB,CAAR;AACH,WAFM,MAEA,IAAI,KAAKH,UAAL,CAAgB,CAAhB,MAAuBrC,OAA3B,EAAoC;AACvC,iBAAK0D,MAAL,CAAY1D,OAAZ;;AACA+C,YAAAA,KAAK,GAAG,KAAKe,YAAL,CAAkBtB,GAAlB,CAAR;AACH,WAHM,MAGA;AACH,gBAAIroD,CAAC,GAAG,KAAKmoD,eAAL,CAAqB,CAArB,CAAR;;AACA,gBAAI3jD,KAAK,GAAG,IAAIhE,KAAJ,CAAU,qCACAR,CAAC,CAACoK,KADF,GACU,GADV,GACgBpK,CAAC,CAAC0X,IADlB,GACyB,GADnC,CAAZ;AAEAlT,YAAAA,KAAK,CAACsG,IAAN,GAAa,aAAb;AACA,kBAAMtG,KAAN;AACH;;AACD,iBAAOokD,KAAP;AACH,SA5Tc;AA8TfS,QAAAA,qBAAqB,EAAE,YAAW;AAC9B,cAAIqB,WAAW,GAAG,EAAlB;;AACA,iBAAO,KAAKxC,UAAL,CAAgB,CAAhB,MAAuBzD,YAA9B,EAA4C;AACxC,gBAAIsD,UAAU,GAAG,KAAKA,UAAL,CAAgB,CAAhB,CAAjB;AACA2C,YAAAA,WAAW,CAAC97C,IAAZ,CAAiBm5C,UAAjB;;AACA,gBAAI,KAAKG,UAAL,CAAgB,CAAhB,MAAuBvD,SAA3B,EAAsC;AAClC,mBAAK4E,MAAL,CAAY5E,SAAZ;;AACA,kBAAI,KAAKuD,UAAL,CAAgB,CAAhB,MAAuBzD,YAA3B,EAAyC;AACvC,sBAAM,IAAIjkD,KAAJ,CAAU,2BAAV,CAAN;AACD;AACJ;AACJ;;AACD,eAAK+oD,MAAL,CAAY9E,YAAZ;;AACA,iBAAO;AAAC/sC,YAAAA,IAAI,EAAE,iBAAP;AAA0Bk+B,YAAAA,QAAQ,EAAE8U;AAApC,WAAP;AACH,SA5Uc;AA8UfzB,QAAAA,qBAAqB,EAAE,YAAW;AAChC,cAAI0B,KAAK,GAAG,EAAZ;AACA,cAAIC,eAAe,GAAG,CAACrG,sBAAD,EAAyBC,oBAAzB,CAAtB;AACA,cAAIqG,QAAJ,EAAc1xB,OAAd,EAAuB/uB,KAAvB,EAA8By+C,IAA9B;;AACA,mBAAS;AACPgC,YAAAA,QAAQ,GAAG,KAAK1C,eAAL,CAAqB,CAArB,CAAX;;AACA,gBAAIyC,eAAe,CAAC1nD,OAAhB,CAAwB2nD,QAAQ,CAACnzC,IAAjC,IAAyC,CAA7C,EAAgD;AAC9C,oBAAM,IAAIlX,KAAJ,CAAU,yCACAqqD,QAAQ,CAACnzC,IADnB,CAAN;AAED;;AACDyhB,YAAAA,OAAO,GAAG0xB,QAAQ,CAACzgD,KAAnB;;AACA,iBAAKm+C,QAAL;;AACA,iBAAKgB,MAAL,CAAY3E,SAAZ;;AACAx6C,YAAAA,KAAK,GAAG,KAAK29C,UAAL,CAAgB,CAAhB,CAAR;AACAc,YAAAA,IAAI,GAAG;AAACnxC,cAAAA,IAAI,EAAE,cAAP;AAAuB5M,cAAAA,IAAI,EAAEquB,OAA7B;AAAsC/uB,cAAAA,KAAK,EAAEA;AAA7C,aAAP;AACAugD,YAAAA,KAAK,CAAC/7C,IAAN,CAAWi6C,IAAX;;AACA,gBAAI,KAAKX,UAAL,CAAgB,CAAhB,MAAuBvD,SAA3B,EAAsC;AACpC,mBAAK4E,MAAL,CAAY5E,SAAZ;AACD,aAFD,MAEO,IAAI,KAAKuD,UAAL,CAAgB,CAAhB,MAAuBrD,UAA3B,EAAuC;AAC5C,mBAAK0E,MAAL,CAAY1E,UAAZ;;AACA;AACD;AACF;;AACD,iBAAO;AAACntC,YAAAA,IAAI,EAAE,iBAAP;AAA0Bk+B,YAAAA,QAAQ,EAAE+U;AAApC,WAAP;AACD;AAtWc,OAAnB;;AA0WA,eAASG,eAAT,CAAyBC,OAAzB,EAAkC;AAChC,aAAKA,OAAL,GAAeA,OAAf;AACD;;AAEDD,MAAAA,eAAe,CAAC3nD,SAAhB,GAA4B;AACxBumB,QAAAA,MAAM,EAAE,UAASm/B,IAAT,EAAez+C,KAAf,EAAsB;AAC1B,iBAAO,KAAK4gD,KAAL,CAAWnC,IAAX,EAAiBz+C,KAAjB,CAAP;AACH,SAHuB;AAKxB4gD,QAAAA,KAAK,EAAE,UAASnC,IAAT,EAAez+C,KAAf,EAAsB;AACzB,cAAI6gD,OAAJ,EAAa3D,OAAb,EAAsB9vC,MAAtB,EAA8B2rC,KAA9B,EAAqCC,MAArC,EAA6C8H,KAA7C,EAAoD1C,IAApD,EAA0DI,KAA1D,EAAiEuC,SAAjE,EAA4EjrD,CAA5E;;AACA,kBAAQ2oD,IAAI,CAACnxC,IAAb;AACE,iBAAK,OAAL;AACE,kBAAItN,KAAK,KAAK,IAAd,EAAqB;AACjB,uBAAO,IAAP;AACH,eAFD,MAEO,IAAIy3C,QAAQ,CAACz3C,KAAD,CAAZ,EAAqB;AACxB8gD,gBAAAA,KAAK,GAAG9gD,KAAK,CAACy+C,IAAI,CAAC/9C,IAAN,CAAb;;AACA,oBAAIogD,KAAK,KAAKlhD,SAAd,EAAyB;AACrB,yBAAO,IAAP;AACH,iBAFD,MAEO;AACH,yBAAOkhD,KAAP;AACH;AACJ,eAPM,MAOA;AACL,uBAAO,IAAP;AACD;;AACD;;AACF,iBAAK,eAAL;AACE1zC,cAAAA,MAAM,GAAG,KAAKwzC,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BxrC,KAA7B,CAAT;;AACA,mBAAKlK,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG2oD,IAAI,CAACjT,QAAL,CAAc/0C,MAA9B,EAAsCX,CAAC,EAAvC,EAA2C;AACvCsX,gBAAAA,MAAM,GAAG,KAAKwzC,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6Bp+B,MAA7B,CAAT;;AACA,oBAAIA,MAAM,KAAK,IAAf,EAAqB;AACjB,yBAAO,IAAP;AACH;AACJ;;AACD,qBAAOA,MAAP;;AACF,iBAAK,iBAAL;AACEgxC,cAAAA,IAAI,GAAG,KAAKwC,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BxrC,KAA7B,CAAP;AACAw+C,cAAAA,KAAK,GAAG,KAAKoC,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6B4S,IAA7B,CAAR;AACA,qBAAOI,KAAP;;AACF,iBAAK,OAAL;AACE,kBAAI,CAAC9wB,OAAO,CAAC1tB,KAAD,CAAZ,EAAqB;AACnB,uBAAO,IAAP;AACD;;AACD,kBAAIgM,KAAK,GAAGyyC,IAAI,CAACz+C,KAAjB;;AACA,kBAAIgM,KAAK,GAAG,CAAZ,EAAe;AACbA,gBAAAA,KAAK,GAAGhM,KAAK,CAACvJ,MAAN,GAAeuV,KAAvB;AACD;;AACDoB,cAAAA,MAAM,GAAGpN,KAAK,CAACgM,KAAD,CAAd;;AACA,kBAAIoB,MAAM,KAAKxN,SAAf,EAA0B;AACxBwN,gBAAAA,MAAM,GAAG,IAAT;AACD;;AACD,qBAAOA,MAAP;;AACF,iBAAK,OAAL;AACE,kBAAI,CAACsgB,OAAO,CAAC1tB,KAAD,CAAZ,EAAqB;AACnB,uBAAO,IAAP;AACD;;AACD,kBAAIghD,WAAW,GAAGvC,IAAI,CAACjT,QAAL,CAAc1/B,KAAd,CAAoB,CAApB,CAAlB;AACA,kBAAIm1C,QAAQ,GAAG,KAAKC,kBAAL,CAAwBlhD,KAAK,CAACvJ,MAA9B,EAAsCuqD,WAAtC,CAAf;AACA,kBAAItZ,KAAK,GAAGuZ,QAAQ,CAAC,CAAD,CAApB;AACA,kBAAIE,IAAI,GAAGF,QAAQ,CAAC,CAAD,CAAnB;AACA,kBAAIG,IAAI,GAAGH,QAAQ,CAAC,CAAD,CAAnB;AACA7zC,cAAAA,MAAM,GAAG,EAAT;;AACA,kBAAIg0C,IAAI,GAAG,CAAX,EAAc;AACV,qBAAKtrD,CAAC,GAAG4xC,KAAT,EAAgB5xC,CAAC,GAAGqrD,IAApB,EAA0BrrD,CAAC,IAAIsrD,IAA/B,EAAqC;AACjCh0C,kBAAAA,MAAM,CAAC5I,IAAP,CAAYxE,KAAK,CAAClK,CAAD,CAAjB;AACH;AACJ,eAJD,MAIO;AACH,qBAAKA,CAAC,GAAG4xC,KAAT,EAAgB5xC,CAAC,GAAGqrD,IAApB,EAA0BrrD,CAAC,IAAIsrD,IAA/B,EAAqC;AACjCh0C,kBAAAA,MAAM,CAAC5I,IAAP,CAAYxE,KAAK,CAAClK,CAAD,CAAjB;AACH;AACJ;;AACD,qBAAOsX,MAAP;;AACF,iBAAK,YAAL;AACE;AACA,kBAAI66B,IAAI,GAAG,KAAK2Y,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BxrC,KAA7B,CAAX;;AACA,kBAAI,CAAC0tB,OAAO,CAACua,IAAD,CAAZ,EAAoB;AAClB,uBAAO,IAAP;AACD;;AACD8Y,cAAAA,SAAS,GAAG,EAAZ;;AACA,mBAAKjrD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGmyC,IAAI,CAACxxC,MAArB,EAA6BX,CAAC,EAA9B,EAAkC;AAChConD,gBAAAA,OAAO,GAAG,KAAK0D,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BvD,IAAI,CAACnyC,CAAD,CAAjC,CAAV;;AACA,oBAAIonD,OAAO,KAAK,IAAhB,EAAsB;AACpB6D,kBAAAA,SAAS,CAACv8C,IAAV,CAAe04C,OAAf;AACD;AACF;;AACD,qBAAO6D,SAAP;;AACF,iBAAK,iBAAL;AACE;AACA9Y,cAAAA,IAAI,GAAG,KAAK2Y,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BxrC,KAA7B,CAAP;;AACA,kBAAI,CAACy3C,QAAQ,CAACxP,IAAD,CAAb,EAAqB;AACnB,uBAAO,IAAP;AACD;;AACD8Y,cAAAA,SAAS,GAAG,EAAZ;AACA,kBAAI9e,MAAM,GAAGoX,SAAS,CAACpR,IAAD,CAAtB;;AACA,mBAAKnyC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGmsC,MAAM,CAACxrC,MAAvB,EAA+BX,CAAC,EAAhC,EAAoC;AAClConD,gBAAAA,OAAO,GAAG,KAAK0D,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BvJ,MAAM,CAACnsC,CAAD,CAAnC,CAAV;;AACA,oBAAIonD,OAAO,KAAK,IAAhB,EAAsB;AACpB6D,kBAAAA,SAAS,CAACv8C,IAAV,CAAe04C,OAAf;AACD;AACF;;AACD,qBAAO6D,SAAP;;AACF,iBAAK,kBAAL;AACE9Y,cAAAA,IAAI,GAAG,KAAK2Y,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BxrC,KAA7B,CAAP;;AACA,kBAAI,CAAC0tB,OAAO,CAACua,IAAD,CAAZ,EAAoB;AAClB,uBAAO,IAAP;AACD;;AACD,kBAAIoZ,QAAQ,GAAG,EAAf;AACA,kBAAIC,YAAY,GAAG,EAAnB;;AACA,mBAAKxrD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGmyC,IAAI,CAACxxC,MAArB,EAA6BX,CAAC,EAA9B,EAAkC;AAChC+qD,gBAAAA,OAAO,GAAG,KAAKD,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BvD,IAAI,CAACnyC,CAAD,CAAjC,CAAV;;AACA,oBAAI,CAACsjD,OAAO,CAACyH,OAAD,CAAZ,EAAuB;AACrBQ,kBAAAA,QAAQ,CAAC78C,IAAT,CAAcyjC,IAAI,CAACnyC,CAAD,CAAlB;AACD;AACF;;AACD,mBAAK,IAAIg8C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuP,QAAQ,CAAC5qD,MAA7B,EAAqCq7C,CAAC,EAAtC,EAA0C;AACxCoL,gBAAAA,OAAO,GAAG,KAAK0D,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6B6V,QAAQ,CAACvP,CAAD,CAArC,CAAV;;AACA,oBAAIoL,OAAO,KAAK,IAAhB,EAAsB;AACpBoE,kBAAAA,YAAY,CAAC98C,IAAb,CAAkB04C,OAAlB;AACD;AACF;;AACD,qBAAOoE,YAAP;;AACF,iBAAK,YAAL;AACEvI,cAAAA,KAAK,GAAG,KAAK6H,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BxrC,KAA7B,CAAR;AACAg5C,cAAAA,MAAM,GAAG,KAAK4H,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BxrC,KAA7B,CAAT;;AACA,sBAAOy+C,IAAI,CAAC/9C,IAAZ;AACE,qBAAKs6C,MAAL;AACE5tC,kBAAAA,MAAM,GAAGkoB,eAAe,CAACyjB,KAAD,EAAQC,MAAR,CAAxB;AACA;;AACF,qBAAKqC,MAAL;AACEjuC,kBAAAA,MAAM,GAAG,CAACkoB,eAAe,CAACyjB,KAAD,EAAQC,MAAR,CAAzB;AACA;;AACF,qBAAKiC,MAAL;AACE7tC,kBAAAA,MAAM,GAAG2rC,KAAK,GAAGC,MAAjB;AACA;;AACF,qBAAKmC,OAAL;AACE/tC,kBAAAA,MAAM,GAAG2rC,KAAK,IAAIC,MAAlB;AACA;;AACF,qBAAKkC,MAAL;AACE9tC,kBAAAA,MAAM,GAAG2rC,KAAK,GAAGC,MAAjB;AACA;;AACF,qBAAKoC,OAAL;AACEhuC,kBAAAA,MAAM,GAAG2rC,KAAK,IAAIC,MAAlB;AACA;;AACF;AACE,wBAAM,IAAI5iD,KAAJ,CAAU,yBAAyBqoD,IAAI,CAAC/9C,IAAxC,CAAN;AApBJ;;AAsBA,qBAAO0M,MAAP;;AACF,iBAAKkuC,WAAL;AACE,kBAAIiG,QAAQ,GAAG,KAAKX,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BxrC,KAA7B,CAAf;;AACA,kBAAI,CAAC0tB,OAAO,CAAC6zB,QAAD,CAAZ,EAAwB;AACtB,uBAAO,IAAP;AACD;;AACD,kBAAIjI,MAAM,GAAG,EAAb;;AACA,mBAAKxjD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGyrD,QAAQ,CAAC9qD,MAAzB,EAAiCX,CAAC,EAAlC,EAAsC;AACpConD,gBAAAA,OAAO,GAAGqE,QAAQ,CAACzrD,CAAD,CAAlB;;AACA,oBAAI43B,OAAO,CAACwvB,OAAD,CAAX,EAAsB;AACpB5D,kBAAAA,MAAM,CAAC90C,IAAP,CAAY5N,KAAZ,CAAkB0iD,MAAlB,EAA0B4D,OAA1B;AACD,iBAFD,MAEO;AACL5D,kBAAAA,MAAM,CAAC90C,IAAP,CAAY04C,OAAZ;AACD;AACF;;AACD,qBAAO5D,MAAP;;AACF,iBAAK,UAAL;AACE,qBAAOt5C,KAAP;;AACF,iBAAK,iBAAL;AACE,kBAAIA,KAAK,KAAK,IAAd,EAAoB;AAClB,uBAAO,IAAP;AACD;;AACD+gD,cAAAA,SAAS,GAAG,EAAZ;;AACA,mBAAKjrD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG2oD,IAAI,CAACjT,QAAL,CAAc/0C,MAA9B,EAAsCX,CAAC,EAAvC,EAA2C;AACvCirD,gBAAAA,SAAS,CAACv8C,IAAV,CAAe,KAAKo8C,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc11C,CAAd,CAAX,EAA6BkK,KAA7B,CAAf;AACH;;AACD,qBAAO+gD,SAAP;;AACF,iBAAK,iBAAL;AACE,kBAAI/gD,KAAK,KAAK,IAAd,EAAoB;AAClB,uBAAO,IAAP;AACD;;AACD+gD,cAAAA,SAAS,GAAG,EAAZ;AACA,kBAAIlW,KAAJ;;AACA,mBAAK/0C,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG2oD,IAAI,CAACjT,QAAL,CAAc/0C,MAA9B,EAAsCX,CAAC,EAAvC,EAA2C;AACzC+0C,gBAAAA,KAAK,GAAG4T,IAAI,CAACjT,QAAL,CAAc11C,CAAd,CAAR;AACAirD,gBAAAA,SAAS,CAAClW,KAAK,CAACnqC,IAAP,CAAT,GAAwB,KAAKkgD,KAAL,CAAW/V,KAAK,CAAC7qC,KAAjB,EAAwBA,KAAxB,CAAxB;AACD;;AACD,qBAAO+gD,SAAP;;AACF,iBAAK,cAAL;AACEF,cAAAA,OAAO,GAAG,KAAKD,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BxrC,KAA7B,CAAV;;AACA,kBAAIo5C,OAAO,CAACyH,OAAD,CAAX,EAAsB;AAClBA,gBAAAA,OAAO,GAAG,KAAKD,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BxrC,KAA7B,CAAV;AACH;;AACD,qBAAO6gD,OAAP;;AACF,iBAAK,eAAL;AACE9H,cAAAA,KAAK,GAAG,KAAK6H,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BxrC,KAA7B,CAAR;;AAEA,kBAAIo5C,OAAO,CAACL,KAAD,CAAP,KAAmB,IAAvB,EAA6B;AAC3B,uBAAOA,KAAP;AACD;;AACD,qBAAO,KAAK6H,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BxrC,KAA7B,CAAP;;AACF,iBAAK,eAAL;AACE+4C,cAAAA,KAAK,GAAG,KAAK6H,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BxrC,KAA7B,CAAR;AACA,qBAAOo5C,OAAO,CAACL,KAAD,CAAd;;AACF,iBAAK,SAAL;AACE,qBAAO0F,IAAI,CAACz+C,KAAZ;;AACF,iBAAK66C,QAAL;AACEuD,cAAAA,IAAI,GAAG,KAAKwC,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6BxrC,KAA7B,CAAP;AACA,qBAAO,KAAK4gD,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAX,EAA6B4S,IAA7B,CAAP;;AACF,iBAAKzD,WAAL;AACE,qBAAO36C,KAAP;;AACF,iBAAK,UAAL;AACE,kBAAIwhD,YAAY,GAAG,EAAnB;;AACA,mBAAK1rD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG2oD,IAAI,CAACjT,QAAL,CAAc/0C,MAA9B,EAAsCX,CAAC,EAAvC,EAA2C;AACvC0rD,gBAAAA,YAAY,CAACh9C,IAAb,CAAkB,KAAKo8C,KAAL,CAAWnC,IAAI,CAACjT,QAAL,CAAc11C,CAAd,CAAX,EAA6BkK,KAA7B,CAAlB;AACH;;AACD,qBAAO,KAAK2gD,OAAL,CAAac,YAAb,CAA0BhD,IAAI,CAAC/9C,IAA/B,EAAqC8gD,YAArC,CAAP;;AACF,iBAAK,qBAAL;AACE,kBAAIE,OAAO,GAAGjD,IAAI,CAACjT,QAAL,CAAc,CAAd,CAAd,CADF,CAEE;AACA;;AACAkW,cAAAA,OAAO,CAACC,YAAR,GAAuB/G,UAAvB;AACA,qBAAO8G,OAAP;;AACF;AACE,oBAAM,IAAItrD,KAAJ,CAAU,wBAAwBqoD,IAAI,CAACnxC,IAAvC,CAAN;AAjNJ;AAmNH,SA1NuB;AA4NxB4zC,QAAAA,kBAAkB,EAAE,UAASU,WAAT,EAAsBZ,WAAtB,EAAmC;AACrD,cAAItZ,KAAK,GAAGsZ,WAAW,CAAC,CAAD,CAAvB;AACA,cAAIG,IAAI,GAAGH,WAAW,CAAC,CAAD,CAAtB;AACA,cAAII,IAAI,GAAGJ,WAAW,CAAC,CAAD,CAAtB;AACA,cAAIC,QAAQ,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAAf;;AACA,cAAIG,IAAI,KAAK,IAAb,EAAmB;AACjBA,YAAAA,IAAI,GAAG,CAAP;AACD,WAFD,MAEO,IAAIA,IAAI,KAAK,CAAb,EAAgB;AACrB,gBAAIhnD,KAAK,GAAG,IAAIhE,KAAJ,CAAU,iCAAV,CAAZ;AACAgE,YAAAA,KAAK,CAACsG,IAAN,GAAa,cAAb;AACA,kBAAMtG,KAAN;AACD;;AACD,cAAIynD,iBAAiB,GAAGT,IAAI,GAAG,CAAP,GAAW,IAAX,GAAkB,KAA1C;;AAEA,cAAI1Z,KAAK,KAAK,IAAd,EAAoB;AAChBA,YAAAA,KAAK,GAAGma,iBAAiB,GAAGD,WAAW,GAAG,CAAjB,GAAqB,CAA9C;AACH,WAFD,MAEO;AACHla,YAAAA,KAAK,GAAG,KAAKoa,aAAL,CAAmBF,WAAnB,EAAgCla,KAAhC,EAAuC0Z,IAAvC,CAAR;AACH;;AAED,cAAID,IAAI,KAAK,IAAb,EAAmB;AACfA,YAAAA,IAAI,GAAGU,iBAAiB,GAAG,CAAC,CAAJ,GAAQD,WAAhC;AACH,WAFD,MAEO;AACHT,YAAAA,IAAI,GAAG,KAAKW,aAAL,CAAmBF,WAAnB,EAAgCT,IAAhC,EAAsCC,IAAtC,CAAP;AACH;;AACDH,UAAAA,QAAQ,CAAC,CAAD,CAAR,GAAcvZ,KAAd;AACAuZ,UAAAA,QAAQ,CAAC,CAAD,CAAR,GAAcE,IAAd;AACAF,UAAAA,QAAQ,CAAC,CAAD,CAAR,GAAcG,IAAd;AACA,iBAAOH,QAAP;AACD,SAzPuB;AA2PxBa,QAAAA,aAAa,EAAE,UAASF,WAAT,EAAsBG,WAAtB,EAAmCX,IAAnC,EAAyC;AACpD,cAAIW,WAAW,GAAG,CAAlB,EAAqB;AACjBA,YAAAA,WAAW,IAAIH,WAAf;;AACA,gBAAIG,WAAW,GAAG,CAAlB,EAAqB;AACjBA,cAAAA,WAAW,GAAGX,IAAI,GAAG,CAAP,GAAW,CAAC,CAAZ,GAAgB,CAA9B;AACH;AACJ,WALD,MAKO,IAAIW,WAAW,IAAIH,WAAnB,EAAgC;AACnCG,YAAAA,WAAW,GAAGX,IAAI,GAAG,CAAP,GAAWQ,WAAW,GAAG,CAAzB,GAA6BA,WAA3C;AACH;;AACD,iBAAOG,WAAP;AACH;AArQuB,OAA5B;;AAyQA,eAASC,OAAT,CAAiBC,WAAjB,EAA8B;AAC5B,aAAKC,YAAL,GAAoBD,WAApB;AACA,aAAKE,aAAL,GAAqB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAtvC,UAAAA,GAAG,EAAE;AAACuvC,YAAAA,KAAK,EAAE,KAAKC,YAAb;AAA2BC,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAAC+yB,WAAD;AAAR,aAAD;AAAvC,WAdY;AAejB+I,UAAAA,GAAG,EAAE;AAACH,YAAAA,KAAK,EAAE,KAAKI,YAAb;AAA2BF,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACuzB,iBAAD;AAAR,aAAD;AAAvC,WAfY;AAgBjByI,UAAAA,IAAI,EAAE;AAACL,YAAAA,KAAK,EAAE,KAAKM,aAAb;AAA4BJ,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAAC+yB,WAAD;AAAR,aAAD;AAAxC,WAhBW;AAiBjBmJ,UAAAA,QAAQ,EAAE;AACNP,YAAAA,KAAK,EAAE,KAAKQ,iBADN;AAENN,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACizB,WAAD,EAAcC,UAAd;AAAR,aAAD,EACA;AAAClzB,cAAAA,KAAK,EAAE,CAACgzB,QAAD;AAAR,aADA;AAFN,WAjBO;AAqBjB,uBAAa;AACT2I,YAAAA,KAAK,EAAE,KAAKS,iBADH;AAETP,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACizB,WAAD;AAAR,aAAD,EAAyB;AAACjzB,cAAAA,KAAK,EAAE,CAACizB,WAAD;AAAR,aAAzB;AAFH,WArBI;AAwBjBj+C,UAAAA,KAAK,EAAE;AAAC2mD,YAAAA,KAAK,EAAE,KAAKU,cAAb;AAA6BR,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAAC+yB,WAAD;AAAR,aAAD;AAAzC,WAxBU;AAyBjB/iD,UAAAA,MAAM,EAAE;AACJ2rD,YAAAA,KAAK,EAAE,KAAKW,eADR;AAEJT,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACizB,WAAD,EAAcC,UAAd,EAA0BC,WAA1B;AAAR,aAAD;AAFR,WAzBS;AA4BjBp8B,UAAAA,GAAG,EAAE;AACD4kC,YAAAA,KAAK,EAAE,KAAKY,YADX;AAEDV,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACqzB,WAAD;AAAR,aAAD,EAAyB;AAACrzB,cAAAA,KAAK,EAAE,CAACkzB,UAAD;AAAR,aAAzB;AAFX,WA5BY;AA+BjB10B,UAAAA,GAAG,EAAE;AACDm9B,YAAAA,KAAK,EAAE,KAAKa,YADX;AAEDX,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACuzB,iBAAD,EAAoBC,iBAApB;AAAR,aAAD;AAFX,WA/BY;AAkCjB,mBAAS;AACLmI,YAAAA,KAAK,EAAE,KAAKc,cADP;AAELZ,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACmzB,WAAD,CAAR;AAAuBuJ,cAAAA,QAAQ,EAAE;AAAjC,aAAD;AAFP,WAlCQ;AAsCjB,oBAAU;AACRf,YAAAA,KAAK,EAAE,KAAKgB,cADJ;AAERd,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACkzB,UAAD;AAAR,aAAD,EAAwB;AAAClzB,cAAAA,KAAK,EAAE,CAACqzB,WAAD;AAAR,aAAxB;AAFJ,WAtCO;AA0CjBuJ,UAAAA,GAAG,EAAE;AAACjB,YAAAA,KAAK,EAAE,KAAKkB,YAAb;AAA2BhB,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACuzB,iBAAD;AAAR,aAAD;AAAvC,WA1CY;AA2CjB,yBAAe;AACXoI,YAAAA,KAAK,EAAE,KAAKmB,mBADD;AAEXjB,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACizB,WAAD;AAAR,aAAD,EAAyB;AAACjzB,cAAAA,KAAK,EAAE,CAACizB,WAAD;AAAR,aAAzB;AAFD,WA3CE;AA8CjB10B,UAAAA,GAAG,EAAE;AACDo9B,YAAAA,KAAK,EAAE,KAAKoB,YADX;AAEDlB,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACuzB,iBAAD,EAAoBC,iBAApB;AAAR,aAAD;AAFX,WA9CY;AAiDjB,oBAAU;AACRmI,YAAAA,KAAK,EAAE,KAAKqB,cADJ;AAERnB,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACkzB,UAAD;AAAR,aAAD,EAAwB;AAAClzB,cAAAA,KAAK,EAAE,CAACqzB,WAAD;AAAR,aAAxB;AAFJ,WAjDO;AAqDjBxsC,UAAAA,IAAI,EAAE;AAAC80C,YAAAA,KAAK,EAAE,KAAKsB,aAAb;AAA4BpB,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACgzB,QAAD;AAAR,aAAD;AAAxC,WArDW;AAsDjB15C,UAAAA,IAAI,EAAE;AAACqiD,YAAAA,KAAK,EAAE,KAAKuB,aAAb;AAA4BrB,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACmzB,WAAD;AAAR,aAAD;AAAxC,WAtDW;AAuDjB3X,UAAAA,MAAM,EAAE;AAACmgB,YAAAA,KAAK,EAAE,KAAKwB,eAAb;AAA8BtB,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACmzB,WAAD;AAAR,aAAD;AAA1C,WAvDS;AAwDjBhsB,UAAAA,IAAI,EAAE;AAACw0B,YAAAA,KAAK,EAAE,KAAKyB,aAAb;AAA4BvB,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACwzB,iBAAD,EAAoBD,iBAApB;AAAR,aAAD;AAAxC,WAxDW;AAyDjB,qBAAW;AACToI,YAAAA,KAAK,EAAE,KAAK0B,eADH;AAETxB,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACkzB,UAAD;AAAR,aAAD,EAAwB;AAAClzB,cAAAA,KAAK,EAAE,CAACqzB,WAAD;AAAR,aAAxB;AAFH,WAzDM;AA6DjBtuC,UAAAA,IAAI,EAAE;AACF42C,YAAAA,KAAK,EAAE,KAAK2B,aADV;AAEFzB,YAAAA,UAAU,EAAE,CACR;AAAC77B,cAAAA,KAAK,EAAE,CAACizB,WAAD;AAAR,aADQ,EAER;AAACjzB,cAAAA,KAAK,EAAE,CAACwzB,iBAAD;AAAR,aAFQ;AAFV,WA7DW;AAoEjB+J,UAAAA,OAAO,EAAE;AACL5B,YAAAA,KAAK,EAAE,KAAK6B,gBADP;AAEL3B,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACizB,WAAD,EAAcC,UAAd;AAAR,aAAD;AAFP,WApEQ;AAuEjB,sBAAY;AAACyI,YAAAA,KAAK,EAAE,KAAK8B,gBAAb;AAA+B5B,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACgzB,QAAD;AAAR,aAAD;AAA3C,WAvEK;AAwEjB,uBAAa;AAAC2I,YAAAA,KAAK,EAAE,KAAK+B,iBAAb;AAAgC7B,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACgzB,QAAD;AAAR,aAAD;AAA5C,WAxEI;AAyEjB,uBAAa;AAAC2I,YAAAA,KAAK,EAAE,KAAKgC,iBAAb;AAAgC9B,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACgzB,QAAD;AAAR,aAAD;AAA5C,WAzEI;AA0EjB,sBAAY;AACR2I,YAAAA,KAAK,EAAE,KAAKiC,gBADJ;AAER/B,YAAAA,UAAU,EAAE,CAAC;AAAC77B,cAAAA,KAAK,EAAE,CAACgzB,QAAD,CAAR;AAAoB0J,cAAAA,QAAQ,EAAE;AAA9B,aAAD;AAFJ;AA1EK,SAArB;AA+ED;;AAEDnB,MAAAA,OAAO,CAACjpD,SAAR,GAAoB;AAClB0oD,QAAAA,YAAY,EAAE,UAAS/gD,IAAT,EAAe8gD,YAAf,EAA6B;AACzC,cAAI8C,aAAa,GAAG,KAAKnC,aAAL,CAAmBzhD,IAAnB,CAApB;;AACA,cAAI4jD,aAAa,KAAK1kD,SAAtB,EAAiC;AAC7B,kBAAM,IAAIxJ,KAAJ,CAAU,uBAAuBsK,IAAvB,GAA8B,IAAxC,CAAN;AACH;;AACD,eAAK6jD,aAAL,CAAmB7jD,IAAnB,EAAyB8gD,YAAzB,EAAuC8C,aAAa,CAAChC,UAArD;;AACA,iBAAOgC,aAAa,CAAClC,KAAd,CAAoB5rD,IAApB,CAAyB,IAAzB,EAA+BgrD,YAA/B,CAAP;AACD,SARiB;AAUlB+C,QAAAA,aAAa,EAAE,UAAS7jD,IAAT,EAAeizB,IAAf,EAAqBmL,SAArB,EAAgC;AAC3C;AACA;AACA;AACA;AACA;AACA,cAAI0lB,UAAJ;;AACA,cAAI1lB,SAAS,CAACA,SAAS,CAACroC,MAAV,GAAmB,CAApB,CAAT,CAAgC0sD,QAApC,EAA8C;AAC1C,gBAAIxvB,IAAI,CAACl9B,MAAL,GAAcqoC,SAAS,CAACroC,MAA5B,EAAoC;AAChC+tD,cAAAA,UAAU,GAAG1lB,SAAS,CAACroC,MAAV,KAAqB,CAArB,GAAyB,WAAzB,GAAuC,YAApD;AACA,oBAAM,IAAIL,KAAJ,CAAU,oBAAoBsK,IAApB,GAA2B,KAA3B,GACA,gBADA,GACmBo+B,SAAS,CAACroC,MAD7B,GACsC+tD,UADtC,GAEA,gBAFA,GAEmB7wB,IAAI,CAACl9B,MAFlC,CAAN;AAGH;AACJ,WAPD,MAOO,IAAIk9B,IAAI,CAACl9B,MAAL,KAAgBqoC,SAAS,CAACroC,MAA9B,EAAsC;AACzC+tD,YAAAA,UAAU,GAAG1lB,SAAS,CAACroC,MAAV,KAAqB,CAArB,GAAyB,WAAzB,GAAuC,YAApD;AACA,kBAAM,IAAIL,KAAJ,CAAU,oBAAoBsK,IAApB,GAA2B,KAA3B,GACA,QADA,GACWo+B,SAAS,CAACroC,MADrB,GAC8B+tD,UAD9B,GAEA,gBAFA,GAEmB7wB,IAAI,CAACl9B,MAFlC,CAAN;AAGH;;AACD,cAAIguD,WAAJ;AACA,cAAIC,UAAJ;AACA,cAAIC,WAAJ;;AACA,eAAK,IAAI7uD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgpC,SAAS,CAACroC,MAA9B,EAAsCX,CAAC,EAAvC,EAA2C;AACvC6uD,YAAAA,WAAW,GAAG,KAAd;AACAF,YAAAA,WAAW,GAAG3lB,SAAS,CAAChpC,CAAD,CAAT,CAAa2wB,KAA3B;AACAi+B,YAAAA,UAAU,GAAG,KAAKE,YAAL,CAAkBjxB,IAAI,CAAC79B,CAAD,CAAtB,CAAb;;AACA,iBAAK,IAAIg8C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2S,WAAW,CAAChuD,MAAhC,EAAwCq7C,CAAC,EAAzC,EAA6C;AACzC,kBAAI,KAAK+S,YAAL,CAAkBH,UAAlB,EAA8BD,WAAW,CAAC3S,CAAD,CAAzC,EAA8Cne,IAAI,CAAC79B,CAAD,CAAlD,CAAJ,EAA4D;AACxD6uD,gBAAAA,WAAW,GAAG,IAAd;AACA;AACH;AACJ;;AACD,gBAAI,CAACA,WAAL,EAAkB;AACd,oBAAM,IAAIvuD,KAAJ,CAAU,gBAAgBsK,IAAhB,GAAuB,KAAvB,GACA,oBADA,IACwB5K,CAAC,GAAG,CAD5B,IAEA,cAFA,GAEiB2uD,WAFjB,GAGA,qBAHA,GAGwBC,UAHxB,GAIA,WAJV,CAAN;AAKH;AACJ;AACJ,SAnDiB;AAqDlBG,QAAAA,YAAY,EAAE,UAASlV,MAAT,EAAiB1a,QAAjB,EAA2B6vB,QAA3B,EAAqC;AAC/C,cAAI7vB,QAAQ,KAAKwkB,QAAjB,EAA2B;AACvB,mBAAO,IAAP;AACH;;AACD,cAAIxkB,QAAQ,KAAKglB,iBAAb,IACAhlB,QAAQ,KAAK+kB,iBADb,IAEA/kB,QAAQ,KAAK0kB,UAFjB,EAE6B;AACzB;AACA;AACA;AACA;AACA,gBAAI1kB,QAAQ,KAAK0kB,UAAjB,EAA6B;AACzB,qBAAOhK,MAAM,KAAKgK,UAAlB;AACH,aAFD,MAEO,IAAIhK,MAAM,KAAKgK,UAAf,EAA2B;AAC9B;AACA;AACA,kBAAIoL,OAAJ;;AACA,kBAAI9vB,QAAQ,KAAK+kB,iBAAjB,EAAoC;AAClC+K,gBAAAA,OAAO,GAAGvL,WAAV;AACD,eAFD,MAEO,IAAIvkB,QAAQ,KAAKglB,iBAAjB,EAAoC;AACzC8K,gBAAAA,OAAO,GAAGrL,WAAV;AACD;;AACD,mBAAK,IAAI5jD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgvD,QAAQ,CAACruD,MAA7B,EAAqCX,CAAC,EAAtC,EAA0C;AACtC,oBAAI,CAAC,KAAK+uD,YAAL,CACG,KAAKD,YAAL,CAAkBE,QAAQ,CAAChvD,CAAD,CAA1B,CADH,EACmCivD,OADnC,EAEoBD,QAAQ,CAAChvD,CAAD,CAF5B,CAAL,EAEuC;AACnC,yBAAO,KAAP;AACH;AACJ;;AACD,qBAAO,IAAP;AACH;AACJ,WA3BD,MA2BO;AACH,mBAAO65C,MAAM,KAAK1a,QAAlB;AACH;AACJ,SAvFiB;AAwFlB2vB,QAAAA,YAAY,EAAE,UAAS//B,GAAT,EAAc;AACxB,kBAAQ1tB,MAAM,CAAC4B,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+BquB,GAA/B,CAAR;AACI,iBAAK,iBAAL;AACE,qBAAO60B,WAAP;;AACF,iBAAK,iBAAL;AACE,qBAAOF,WAAP;;AACF,iBAAK,gBAAL;AACE,qBAAOG,UAAP;;AACF,iBAAK,kBAAL;AACE,qBAAOE,YAAP;;AACF,iBAAK,eAAL;AACE,qBAAOE,SAAP;;AACF,iBAAK,iBAAL;AACE;AACA;AACA,kBAAIl1B,GAAG,CAAC88B,YAAJ,KAAqB/G,UAAzB,EAAqC;AACnC,uBAAOd,WAAP;AACD,eAFD,MAEO;AACL,uBAAOF,WAAP;AACD;;AAlBP;AAoBH,SA7GiB;AA+GlB2J,QAAAA,mBAAmB,EAAE,UAAS/B,YAAT,EAAuB;AACxC,iBAAOA,YAAY,CAAC,CAAD,CAAZ,CAAgBhQ,WAAhB,CAA4BgQ,YAAY,CAAC,CAAD,CAAxC,MAAiD,CAAxD;AACH,SAjHiB;AAmHlBqB,QAAAA,iBAAiB,EAAE,UAASrB,YAAT,EAAuB;AACtC,cAAIwD,SAAS,GAAGxD,YAAY,CAAC,CAAD,CAA5B;AACA,cAAIryB,MAAM,GAAGqyB,YAAY,CAAC,CAAD,CAAzB;AACA,iBAAOwD,SAAS,CAAClsD,OAAV,CAAkBq2B,MAAlB,EAA0B61B,SAAS,CAACvuD,MAAV,GAAmB04B,MAAM,CAAC14B,MAApD,MAAgE,CAAC,CAAxE;AACH,SAvHiB;AAyHlBwtD,QAAAA,gBAAgB,EAAE,UAASzC,YAAT,EAAuB;AACrC,cAAI32B,QAAQ,GAAG,KAAK+5B,YAAL,CAAkBpD,YAAY,CAAC,CAAD,CAA9B,CAAf;;AACA,cAAI32B,QAAQ,KAAK6uB,WAAjB,EAA8B;AAC5B,gBAAIuL,WAAW,GAAGzD,YAAY,CAAC,CAAD,CAA9B;AACA,gBAAI0D,WAAW,GAAG,EAAlB;;AACA,iBAAK,IAAIpvD,CAAC,GAAGmvD,WAAW,CAACxuD,MAAZ,GAAqB,CAAlC,EAAqCX,CAAC,IAAI,CAA1C,EAA6CA,CAAC,EAA9C,EAAkD;AAC9CovD,cAAAA,WAAW,IAAID,WAAW,CAACnvD,CAAD,CAA1B;AACH;;AACD,mBAAOovD,WAAP;AACD,WAPD,MAOO;AACL,gBAAIC,aAAa,GAAG3D,YAAY,CAAC,CAAD,CAAZ,CAAgB11C,KAAhB,CAAsB,CAAtB,CAApB;AACAq5C,YAAAA,aAAa,CAACnB,OAAd;AACA,mBAAOmB,aAAP;AACD;AACJ,SAvIiB;AAyIlB9C,QAAAA,YAAY,EAAE,UAASb,YAAT,EAAuB;AACnC,iBAAOhmD,IAAI,CAACqX,GAAL,CAAS2uC,YAAY,CAAC,CAAD,CAArB,CAAP;AACD,SA3IiB;AA6IlBkB,QAAAA,aAAa,EAAE,UAASlB,YAAT,EAAuB;AAClC,iBAAOhmD,IAAI,CAACinD,IAAL,CAAUjB,YAAY,CAAC,CAAD,CAAtB,CAAP;AACH,SA/IiB;AAiJlBgB,QAAAA,YAAY,EAAE,UAAShB,YAAT,EAAuB;AACjC,cAAI6B,GAAG,GAAG,CAAV;AACA,cAAI+B,UAAU,GAAG5D,YAAY,CAAC,CAAD,CAA7B;;AACA,eAAK,IAAI1rD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsvD,UAAU,CAAC3uD,MAA/B,EAAuCX,CAAC,EAAxC,EAA4C;AACxCutD,YAAAA,GAAG,IAAI+B,UAAU,CAACtvD,CAAD,CAAjB;AACH;;AACD,iBAAOutD,GAAG,GAAG+B,UAAU,CAAC3uD,MAAxB;AACH,SAxJiB;AA0JlBmsD,QAAAA,iBAAiB,EAAE,UAASpB,YAAT,EAAuB;AACtC,iBAAOA,YAAY,CAAC,CAAD,CAAZ,CAAgB1oD,OAAhB,CAAwB0oD,YAAY,CAAC,CAAD,CAApC,KAA4C,CAAnD;AACH,SA5JiB;AA8JlBsB,QAAAA,cAAc,EAAE,UAAStB,YAAT,EAAuB;AACnC,iBAAOhmD,IAAI,CAACC,KAAL,CAAW+lD,YAAY,CAAC,CAAD,CAAvB,CAAP;AACH,SAhKiB;AAkKlBuB,QAAAA,eAAe,EAAE,UAASvB,YAAT,EAAuB;AACrC,cAAI,CAAC/J,QAAQ,CAAC+J,YAAY,CAAC,CAAD,CAAb,CAAb,EAAgC;AAC9B,mBAAOA,YAAY,CAAC,CAAD,CAAZ,CAAgB/qD,MAAvB;AACD,WAFD,MAEO;AACL;AACA;AACA,mBAAOU,MAAM,CAAC4I,IAAP,CAAYyhD,YAAY,CAAC,CAAD,CAAxB,EAA6B/qD,MAApC;AACD;AACH,SA1KiB;AA4KlBusD,QAAAA,YAAY,EAAE,UAASxB,YAAT,EAAuB;AACnC,cAAI6D,MAAM,GAAG,EAAb;AACA,cAAIpD,WAAW,GAAG,KAAKC,YAAvB;AACA,cAAIoD,UAAU,GAAG9D,YAAY,CAAC,CAAD,CAA7B;AACA,cAAIvX,QAAQ,GAAGuX,YAAY,CAAC,CAAD,CAA3B;;AACA,eAAK,IAAI1rD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGm0C,QAAQ,CAACxzC,MAA7B,EAAqCX,CAAC,EAAtC,EAA0C;AACtCuvD,YAAAA,MAAM,CAAC7gD,IAAP,CAAYy9C,WAAW,CAACrB,KAAZ,CAAkB0E,UAAlB,EAA8Brb,QAAQ,CAACn0C,CAAD,CAAtC,CAAZ;AACH;;AACD,iBAAOuvD,MAAP;AACD,SArLiB;AAuLlBnC,QAAAA,cAAc,EAAE,UAAS1B,YAAT,EAAuB;AACrC,cAAIlI,MAAM,GAAG,EAAb;;AACA,eAAK,IAAIxjD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0rD,YAAY,CAAC/qD,MAAjC,EAAyCX,CAAC,EAA1C,EAA8C;AAC5C,gBAAIonD,OAAO,GAAGsE,YAAY,CAAC1rD,CAAD,CAA1B;;AACA,iBAAK,IAAIyC,GAAT,IAAgB2kD,OAAhB,EAAyB;AACvB5D,cAAAA,MAAM,CAAC/gD,GAAD,CAAN,GAAc2kD,OAAO,CAAC3kD,GAAD,CAArB;AACD;AACF;;AACD,iBAAO+gD,MAAP;AACD,SAhMiB;AAkMlB2J,QAAAA,YAAY,EAAE,UAASzB,YAAT,EAAuB;AACnC,cAAIA,YAAY,CAAC,CAAD,CAAZ,CAAgB/qD,MAAhB,GAAyB,CAA7B,EAAgC;AAC9B,gBAAIo0B,QAAQ,GAAG,KAAK+5B,YAAL,CAAkBpD,YAAY,CAAC,CAAD,CAAZ,CAAgB,CAAhB,CAAlB,CAAf;;AACA,gBAAI32B,QAAQ,KAAK2uB,WAAjB,EAA8B;AAC5B,qBAAOh+C,IAAI,CAACypB,GAAL,CAASruB,KAAT,CAAe4E,IAAf,EAAqBgmD,YAAY,CAAC,CAAD,CAAjC,CAAP;AACD,aAFD,MAEO;AACL,kBAAIvX,QAAQ,GAAGuX,YAAY,CAAC,CAAD,CAA3B;AACA,kBAAI+D,UAAU,GAAGtb,QAAQ,CAAC,CAAD,CAAzB;;AACA,mBAAK,IAAIn0C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGm0C,QAAQ,CAACxzC,MAA7B,EAAqCX,CAAC,EAAtC,EAA0C;AACtC,oBAAIyvD,UAAU,CAACC,aAAX,CAAyBvb,QAAQ,CAACn0C,CAAD,CAAjC,IAAwC,CAA5C,EAA+C;AAC3CyvD,kBAAAA,UAAU,GAAGtb,QAAQ,CAACn0C,CAAD,CAArB;AACH;AACJ;;AACD,qBAAOyvD,UAAP;AACD;AACF,WAdD,MAcO;AACH,mBAAO,IAAP;AACH;AACF,SApNiB;AAsNlB/B,QAAAA,YAAY,EAAE,UAAShC,YAAT,EAAuB;AACnC,cAAIA,YAAY,CAAC,CAAD,CAAZ,CAAgB/qD,MAAhB,GAAyB,CAA7B,EAAgC;AAC9B,gBAAIo0B,QAAQ,GAAG,KAAK+5B,YAAL,CAAkBpD,YAAY,CAAC,CAAD,CAAZ,CAAgB,CAAhB,CAAlB,CAAf;;AACA,gBAAI32B,QAAQ,KAAK2uB,WAAjB,EAA8B;AAC5B,qBAAOh+C,IAAI,CAACwpB,GAAL,CAASpuB,KAAT,CAAe4E,IAAf,EAAqBgmD,YAAY,CAAC,CAAD,CAAjC,CAAP;AACD,aAFD,MAEO;AACL,kBAAIvX,QAAQ,GAAGuX,YAAY,CAAC,CAAD,CAA3B;AACA,kBAAIiE,UAAU,GAAGxb,QAAQ,CAAC,CAAD,CAAzB;;AACA,mBAAK,IAAIn0C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGm0C,QAAQ,CAACxzC,MAA7B,EAAqCX,CAAC,EAAtC,EAA0C;AACtC,oBAAIm0C,QAAQ,CAACn0C,CAAD,CAAR,CAAY0vD,aAAZ,CAA0BC,UAA1B,IAAwC,CAA5C,EAA+C;AAC3CA,kBAAAA,UAAU,GAAGxb,QAAQ,CAACn0C,CAAD,CAArB;AACH;AACJ;;AACD,qBAAO2vD,UAAP;AACD;AACF,WAdD,MAcO;AACL,mBAAO,IAAP;AACD;AACF,SAxOiB;AA0OlBnC,QAAAA,YAAY,EAAE,UAAS9B,YAAT,EAAuB;AACnC,cAAI6B,GAAG,GAAG,CAAV;AACA,cAAIqC,SAAS,GAAGlE,YAAY,CAAC,CAAD,CAA5B;;AACA,eAAK,IAAI1rD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4vD,SAAS,CAACjvD,MAA9B,EAAsCX,CAAC,EAAvC,EAA2C;AACzCutD,YAAAA,GAAG,IAAIqC,SAAS,CAAC5vD,CAAD,CAAhB;AACD;;AACD,iBAAOutD,GAAP;AACD,SAjPiB;AAmPlBK,QAAAA,aAAa,EAAE,UAASlC,YAAT,EAAuB;AAClC,kBAAQ,KAAKoD,YAAL,CAAkBpD,YAAY,CAAC,CAAD,CAA9B,CAAR;AACE,iBAAKhI,WAAL;AACE,qBAAO,QAAP;;AACF,iBAAKE,WAAL;AACE,qBAAO,QAAP;;AACF,iBAAKC,UAAL;AACE,qBAAO,OAAP;;AACF,iBAAKC,WAAL;AACE,qBAAO,QAAP;;AACF,iBAAKC,YAAL;AACE,qBAAO,SAAP;;AACF,iBAAKC,WAAL;AACE,qBAAO,QAAP;;AACF,iBAAKC,SAAL;AACE,qBAAO,MAAP;AAdJ;AAgBH,SApQiB;AAsQlB4J,QAAAA,aAAa,EAAE,UAASnC,YAAT,EAAuB;AAClC,iBAAOrqD,MAAM,CAAC4I,IAAP,CAAYyhD,YAAY,CAAC,CAAD,CAAxB,CAAP;AACH,SAxQiB;AA0QlBoC,QAAAA,eAAe,EAAE,UAASpC,YAAT,EAAuB;AACpC,cAAI38B,GAAG,GAAG28B,YAAY,CAAC,CAAD,CAAtB;AACA,cAAIzhD,IAAI,GAAG5I,MAAM,CAAC4I,IAAP,CAAY8kB,GAAZ,CAAX;AACA,cAAIod,MAAM,GAAG,EAAb;;AACA,eAAK,IAAInsC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiK,IAAI,CAACtJ,MAAzB,EAAiCX,CAAC,EAAlC,EAAsC;AAClCmsC,YAAAA,MAAM,CAACz9B,IAAP,CAAYqgB,GAAG,CAAC9kB,IAAI,CAACjK,CAAD,CAAL,CAAf;AACH;;AACD,iBAAOmsC,MAAP;AACH,SAlRiB;AAoRlB8hB,QAAAA,aAAa,EAAE,UAASvC,YAAT,EAAuB;AAClC,cAAImE,QAAQ,GAAGnE,YAAY,CAAC,CAAD,CAA3B;AACA,cAAIoE,QAAQ,GAAGpE,YAAY,CAAC,CAAD,CAA3B;AACA,iBAAOoE,QAAQ,CAACp6C,IAAT,CAAcm6C,QAAd,CAAP;AACH,SAxRiB;AA0RlBzB,QAAAA,gBAAgB,EAAE,UAAS1C,YAAT,EAAuB;AACrC,cAAI,KAAKoD,YAAL,CAAkBpD,YAAY,CAAC,CAAD,CAA9B,MAAuC7H,UAA3C,EAAuD;AACnD,mBAAO6H,YAAY,CAAC,CAAD,CAAnB;AACH,WAFD,MAEO;AACH,mBAAO,CAACA,YAAY,CAAC,CAAD,CAAb,CAAP;AACH;AACJ,SAhSiB;AAkSlB2C,QAAAA,iBAAiB,EAAE,UAAS3C,YAAT,EAAuB;AACtC,cAAI,KAAKoD,YAAL,CAAkBpD,YAAY,CAAC,CAAD,CAA9B,MAAuC9H,WAA3C,EAAwD;AACpD,mBAAO8H,YAAY,CAAC,CAAD,CAAnB;AACH,WAFD,MAEO;AACH,mBAAOjgD,IAAI,CAACsgB,SAAL,CAAe2/B,YAAY,CAAC,CAAD,CAA3B,CAAP;AACH;AACJ,SAxSiB;AA0SlB4C,QAAAA,iBAAiB,EAAE,UAAS5C,YAAT,EAAuB;AACtC,cAAI32B,QAAQ,GAAG,KAAK+5B,YAAL,CAAkBpD,YAAY,CAAC,CAAD,CAA9B,CAAf;;AACA,cAAIqE,cAAJ;;AACA,cAAIh7B,QAAQ,KAAK2uB,WAAjB,EAA8B;AAC1B,mBAAOgI,YAAY,CAAC,CAAD,CAAnB;AACH,WAFD,MAEO,IAAI32B,QAAQ,KAAK6uB,WAAjB,EAA8B;AACjCmM,YAAAA,cAAc,GAAG,CAACrE,YAAY,CAAC,CAAD,CAA9B;;AACA,gBAAI,CAACvuB,KAAK,CAAC4yB,cAAD,CAAV,EAA4B;AACxB,qBAAOA,cAAP;AACH;AACJ;;AACD,iBAAO,IAAP;AACH,SAtTiB;AAwTlBxB,QAAAA,gBAAgB,EAAE,UAAS7C,YAAT,EAAuB;AACrC,eAAK,IAAI1rD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0rD,YAAY,CAAC/qD,MAAjC,EAAyCX,CAAC,EAA1C,EAA8C;AAC1C,gBAAI,KAAK8uD,YAAL,CAAkBpD,YAAY,CAAC1rD,CAAD,CAA9B,MAAuCikD,SAA3C,EAAsD;AAClD,qBAAOyH,YAAY,CAAC1rD,CAAD,CAAnB;AACH;AACJ;;AACD,iBAAO,IAAP;AACH,SA/TiB;AAiUlB+tD,QAAAA,aAAa,EAAE,UAASrC,YAAT,EAAuB;AAClC,cAAIsE,WAAW,GAAGtE,YAAY,CAAC,CAAD,CAAZ,CAAgB11C,KAAhB,CAAsB,CAAtB,CAAlB;AACAg6C,UAAAA,WAAW,CAACl4B,IAAZ;AACA,iBAAOk4B,WAAP;AACH,SArUiB;AAuUlBhC,QAAAA,eAAe,EAAE,UAAStC,YAAT,EAAuB;AACpC,cAAIsE,WAAW,GAAGtE,YAAY,CAAC,CAAD,CAAZ,CAAgB11C,KAAhB,CAAsB,CAAtB,CAAlB;;AACA,cAAIg6C,WAAW,CAACrvD,MAAZ,KAAuB,CAA3B,EAA8B;AAC1B,mBAAOqvD,WAAP;AACH;;AACD,cAAI7D,WAAW,GAAG,KAAKC,YAAvB;AACA,cAAIoD,UAAU,GAAG9D,YAAY,CAAC,CAAD,CAA7B;;AACA,cAAIuE,YAAY,GAAG,KAAKnB,YAAL,CACf3C,WAAW,CAACrB,KAAZ,CAAkB0E,UAAlB,EAA8BQ,WAAW,CAAC,CAAD,CAAzC,CADe,CAAnB;;AAEA,cAAI,CAACtM,WAAD,EAAcE,WAAd,EAA2B5gD,OAA3B,CAAmCitD,YAAnC,IAAmD,CAAvD,EAA0D;AACtD,kBAAM,IAAI3vD,KAAJ,CAAU,WAAV,CAAN;AACH;;AACD,cAAIu4C,IAAI,GAAG,IAAX,CAZoC,CAapC;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,cAAIqX,SAAS,GAAG,EAAhB;;AACA,eAAK,IAAIlwD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgwD,WAAW,CAACrvD,MAAhC,EAAwCX,CAAC,EAAzC,EAA6C;AAC3CkwD,YAAAA,SAAS,CAACxhD,IAAV,CAAe,CAAC1O,CAAD,EAAIgwD,WAAW,CAAChwD,CAAD,CAAf,CAAf;AACD;;AACDkwD,UAAAA,SAAS,CAACp4B,IAAV,CAAe,UAASz3B,CAAT,EAAYyF,CAAZ,EAAe;AAC5B,gBAAIqqD,KAAK,GAAGhE,WAAW,CAACrB,KAAZ,CAAkB0E,UAAlB,EAA8BnvD,CAAC,CAAC,CAAD,CAA/B,CAAZ;AACA,gBAAI+vD,KAAK,GAAGjE,WAAW,CAACrB,KAAZ,CAAkB0E,UAAlB,EAA8B1pD,CAAC,CAAC,CAAD,CAA/B,CAAZ;;AACA,gBAAI+yC,IAAI,CAACiW,YAAL,CAAkBqB,KAAlB,MAA6BF,YAAjC,EAA+C;AAC3C,oBAAM,IAAI3vD,KAAJ,CACF,yBAAyB2vD,YAAzB,GAAwC,aAAxC,GACApX,IAAI,CAACiW,YAAL,CAAkBqB,KAAlB,CAFE,CAAN;AAGH,aAJD,MAIO,IAAItX,IAAI,CAACiW,YAAL,CAAkBsB,KAAlB,MAA6BH,YAAjC,EAA+C;AAClD,oBAAM,IAAI3vD,KAAJ,CACF,yBAAyB2vD,YAAzB,GAAwC,aAAxC,GACApX,IAAI,CAACiW,YAAL,CAAkBsB,KAAlB,CAFE,CAAN;AAGH;;AACD,gBAAID,KAAK,GAAGC,KAAZ,EAAmB;AACjB,qBAAO,CAAP;AACD,aAFD,MAEO,IAAID,KAAK,GAAGC,KAAZ,EAAmB;AACxB,qBAAO,CAAC,CAAR;AACD,aAFM,MAEA;AACL;AACA;AACA;AACA,qBAAO/vD,CAAC,CAAC,CAAD,CAAD,GAAOyF,CAAC,CAAC,CAAD,CAAf;AACD;AACF,WAtBD,EAxBoC,CA+CpC;;AACA,eAAK,IAAIk2C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkU,SAAS,CAACvvD,MAA9B,EAAsCq7C,CAAC,EAAvC,EAA2C;AACzCgU,YAAAA,WAAW,CAAChU,CAAD,CAAX,GAAiBkU,SAAS,CAAClU,CAAD,CAAT,CAAa,CAAb,CAAjB;AACD;;AACD,iBAAOgU,WAAP;AACH,SA3XiB;AA6XlB1C,QAAAA,cAAc,EAAE,UAAS5B,YAAT,EAAuB;AACrC,cAAI8D,UAAU,GAAG9D,YAAY,CAAC,CAAD,CAA7B;AACA,cAAI2E,aAAa,GAAG3E,YAAY,CAAC,CAAD,CAAhC;AACA,cAAI4E,WAAW,GAAG,KAAKC,iBAAL,CAAuBf,UAAvB,EAAmC,CAAC9L,WAAD,EAAcE,WAAd,CAAnC,CAAlB;AACA,cAAI4M,SAAS,GAAG,CAAC1P,QAAjB;AACA,cAAI2P,SAAJ;AACA,cAAIrJ,OAAJ;;AACA,eAAK,IAAIpnD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqwD,aAAa,CAAC1vD,MAAlC,EAA0CX,CAAC,EAA3C,EAA+C;AAC7ConD,YAAAA,OAAO,GAAGkJ,WAAW,CAACD,aAAa,CAACrwD,CAAD,CAAd,CAArB;;AACA,gBAAIonD,OAAO,GAAGoJ,SAAd,EAAyB;AACvBA,cAAAA,SAAS,GAAGpJ,OAAZ;AACAqJ,cAAAA,SAAS,GAAGJ,aAAa,CAACrwD,CAAD,CAAzB;AACD;AACF;;AACD,iBAAOywD,SAAP;AACD,SA5YiB;AA8YlB9C,QAAAA,cAAc,EAAE,UAASjC,YAAT,EAAuB;AACrC,cAAI8D,UAAU,GAAG9D,YAAY,CAAC,CAAD,CAA7B;AACA,cAAI2E,aAAa,GAAG3E,YAAY,CAAC,CAAD,CAAhC;AACA,cAAI4E,WAAW,GAAG,KAAKC,iBAAL,CAAuBf,UAAvB,EAAmC,CAAC9L,WAAD,EAAcE,WAAd,CAAnC,CAAlB;AACA,cAAI8M,SAAS,GAAG5P,QAAhB;AACA,cAAI6P,SAAJ;AACA,cAAIvJ,OAAJ;;AACA,eAAK,IAAIpnD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqwD,aAAa,CAAC1vD,MAAlC,EAA0CX,CAAC,EAA3C,EAA+C;AAC7ConD,YAAAA,OAAO,GAAGkJ,WAAW,CAACD,aAAa,CAACrwD,CAAD,CAAd,CAArB;;AACA,gBAAIonD,OAAO,GAAGsJ,SAAd,EAAyB;AACvBA,cAAAA,SAAS,GAAGtJ,OAAZ;AACAuJ,cAAAA,SAAS,GAAGN,aAAa,CAACrwD,CAAD,CAAzB;AACD;AACF;;AACD,iBAAO2wD,SAAP;AACD,SA7ZiB;AA+ZlBJ,QAAAA,iBAAiB,EAAE,UAASf,UAAT,EAAqBoB,YAArB,EAAmC;AACpD,cAAI/X,IAAI,GAAG,IAAX;AACA,cAAIsT,WAAW,GAAG,KAAKC,YAAvB;;AACA,cAAIyE,OAAO,GAAG,UAAStqD,CAAT,EAAY;AACxB,gBAAI6gD,OAAO,GAAG+E,WAAW,CAACrB,KAAZ,CAAkB0E,UAAlB,EAA8BjpD,CAA9B,CAAd;;AACA,gBAAIqqD,YAAY,CAAC5tD,OAAb,CAAqB61C,IAAI,CAACiW,YAAL,CAAkB1H,OAAlB,CAArB,IAAmD,CAAvD,EAA0D;AACxD,kBAAI18C,GAAG,GAAG,gCAAgCkmD,YAAhC,GACA,aADA,GACgB/X,IAAI,CAACiW,YAAL,CAAkB1H,OAAlB,CAD1B;;AAEA,oBAAM,IAAI9mD,KAAJ,CAAUoK,GAAV,CAAN;AACD;;AACD,mBAAO08C,OAAP;AACD,WARD;;AASA,iBAAOyJ,OAAP;AACD;AA5aiB,OAApB;;AAgbA,eAASC,OAAT,CAAiBxtC,MAAjB,EAAyB;AACvB,YAAIlH,MAAM,GAAG,IAAI7S,MAAJ,EAAb;AACA,YAAIw+C,GAAG,GAAG3rC,MAAM,CAAC1Q,KAAP,CAAa4X,MAAb,CAAV;AACA,eAAOykC,GAAP;AACD;;AAED,eAASvB,QAAT,CAAkBljC,MAAlB,EAA0B;AACtB,YAAI4kC,KAAK,GAAG,IAAI3B,KAAJ,EAAZ;AACA,eAAO2B,KAAK,CAAC1B,QAAN,CAAeljC,MAAf,CAAP;AACH;;AAED,eAASkG,MAAT,CAAgBpmB,IAAhB,EAAsBykD,UAAtB,EAAkC;AAC9B,YAAIzrC,MAAM,GAAG,IAAI7S,MAAJ,EAAb,CAD8B,CAE9B;AACA;AACA;;AACA,YAAIshD,OAAO,GAAG,IAAIqB,OAAJ,EAAd;AACA,YAAIC,WAAW,GAAG,IAAIvB,eAAJ,CAAoBC,OAApB,CAAlB;AACAA,QAAAA,OAAO,CAACuB,YAAR,GAAuBD,WAAvB;AACA,YAAIxD,IAAI,GAAGvsC,MAAM,CAAC1Q,KAAP,CAAam8C,UAAb,CAAX;AACA,eAAOsE,WAAW,CAAC3iC,MAAZ,CAAmBm/B,IAAnB,EAAyBvlD,IAAzB,CAAP;AACH;;AAED3C,MAAAA,OAAO,CAAC+lD,QAAR,GAAmBA,QAAnB;AACA/lD,MAAAA,OAAO,CAACqwD,OAAR,GAAkBA,OAAlB;AACArwD,MAAAA,OAAO,CAAC+oB,MAAR,GAAiBA,MAAjB;AACA/oB,MAAAA,OAAO,CAAC++B,eAAR,GAA0BA,eAA1B;AACD,KAloDD,EAkoDG,OAAO/+B,OAAP,KAAmB,WAAnB,GAAiC,KAAK25B,QAAL,GAAgB,EAAjD,GAAsD35B,OAloDzD;AAooDC,GAroDQ,EAqoDP,EAroDO,CAhngBic;AAqvjBpc,MAAG,CAAC,UAASN,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1C;AACA,QAAIkI,OAAO,GAAG/H,MAAM,CAACH,OAAP,GAAiB,EAA/B,CAF0C,CAI1C;AACA;AACA;AACA;;AAEA,QAAIswD,gBAAJ;AACA,QAAIC,kBAAJ;;AAEA,aAASC,gBAAT,GAA4B;AACxB,YAAM,IAAI3wD,KAAJ,CAAU,iCAAV,CAAN;AACH;;AACD,aAAS4wD,mBAAT,GAAgC;AAC5B,YAAM,IAAI5wD,KAAJ,CAAU,mCAAV,CAAN;AACH;;AACA,iBAAY;AACT,UAAI;AACA,YAAI,OAAOsmB,UAAP,KAAsB,UAA1B,EAAsC;AAClCmqC,UAAAA,gBAAgB,GAAGnqC,UAAnB;AACH,SAFD,MAEO;AACHmqC,UAAAA,gBAAgB,GAAGE,gBAAnB;AACH;AACJ,OAND,CAME,OAAOrxD,CAAP,EAAU;AACRmxD,QAAAA,gBAAgB,GAAGE,gBAAnB;AACH;;AACD,UAAI;AACA,YAAI,OAAOE,YAAP,KAAwB,UAA5B,EAAwC;AACpCH,UAAAA,kBAAkB,GAAGG,YAArB;AACH,SAFD,MAEO;AACHH,UAAAA,kBAAkB,GAAGE,mBAArB;AACH;AACJ,OAND,CAME,OAAOtxD,CAAP,EAAU;AACRoxD,QAAAA,kBAAkB,GAAGE,mBAArB;AACH;AACJ,KAnBA,GAAD;;AAoBA,aAASE,UAAT,CAAoBC,GAApB,EAAyB;AACrB,UAAIN,gBAAgB,KAAKnqC,UAAzB,EAAqC;AACjC;AACA,eAAOA,UAAU,CAACyqC,GAAD,EAAM,CAAN,CAAjB;AACH,OAJoB,CAKrB;;;AACA,UAAI,CAACN,gBAAgB,KAAKE,gBAArB,IAAyC,CAACF,gBAA3C,KAAgEnqC,UAApE,EAAgF;AAC5EmqC,QAAAA,gBAAgB,GAAGnqC,UAAnB;AACA,eAAOA,UAAU,CAACyqC,GAAD,EAAM,CAAN,CAAjB;AACH;;AACD,UAAI;AACA;AACA,eAAON,gBAAgB,CAACM,GAAD,EAAM,CAAN,CAAvB;AACH,OAHD,CAGE,OAAMzxD,CAAN,EAAQ;AACN,YAAI;AACA;AACA,iBAAOmxD,gBAAgB,CAACrwD,IAAjB,CAAsB,IAAtB,EAA4B2wD,GAA5B,EAAiC,CAAjC,CAAP;AACH,SAHD,CAGE,OAAMzxD,CAAN,EAAQ;AACN;AACA,iBAAOmxD,gBAAgB,CAACrwD,IAAjB,CAAsB,IAAtB,EAA4B2wD,GAA5B,EAAiC,CAAjC,CAAP;AACH;AACJ;AAGJ;;AACD,aAASC,eAAT,CAAyBC,MAAzB,EAAiC;AAC7B,UAAIP,kBAAkB,KAAKG,YAA3B,EAAyC;AACrC;AACA,eAAOA,YAAY,CAACI,MAAD,CAAnB;AACH,OAJ4B,CAK7B;;;AACA,UAAI,CAACP,kBAAkB,KAAKE,mBAAvB,IAA8C,CAACF,kBAAhD,KAAuEG,YAA3E,EAAyF;AACrFH,QAAAA,kBAAkB,GAAGG,YAArB;AACA,eAAOA,YAAY,CAACI,MAAD,CAAnB;AACH;;AACD,UAAI;AACA;AACA,eAAOP,kBAAkB,CAACO,MAAD,CAAzB;AACH,OAHD,CAGE,OAAO3xD,CAAP,EAAS;AACP,YAAI;AACA;AACA,iBAAOoxD,kBAAkB,CAACtwD,IAAnB,CAAwB,IAAxB,EAA8B6wD,MAA9B,CAAP;AACH,SAHD,CAGE,OAAO3xD,CAAP,EAAS;AACP;AACA;AACA,iBAAOoxD,kBAAkB,CAACtwD,IAAnB,CAAwB,IAAxB,EAA8B6wD,MAA9B,CAAP;AACH;AACJ;AAIJ;;AACD,QAAIC,KAAK,GAAG,EAAZ;AACA,QAAIC,QAAQ,GAAG,KAAf;AACA,QAAIC,YAAJ;AACA,QAAIC,UAAU,GAAG,CAAC,CAAlB;;AAEA,aAASC,eAAT,GAA2B;AACvB,UAAI,CAACH,QAAD,IAAa,CAACC,YAAlB,EAAgC;AAC5B;AACH;;AACDD,MAAAA,QAAQ,GAAG,KAAX;;AACA,UAAIC,YAAY,CAAC/wD,MAAjB,EAAyB;AACrB6wD,QAAAA,KAAK,GAAGE,YAAY,CAAC/rC,MAAb,CAAoB6rC,KAApB,CAAR;AACH,OAFD,MAEO;AACHG,QAAAA,UAAU,GAAG,CAAC,CAAd;AACH;;AACD,UAAIH,KAAK,CAAC7wD,MAAV,EAAkB;AACdkxD,QAAAA,UAAU;AACb;AACJ;;AAED,aAASA,UAAT,GAAsB;AAClB,UAAIJ,QAAJ,EAAc;AACV;AACH;;AACD,UAAI9kD,OAAO,GAAGykD,UAAU,CAACQ,eAAD,CAAxB;AACAH,MAAAA,QAAQ,GAAG,IAAX;AAEA,UAAIva,GAAG,GAAGsa,KAAK,CAAC7wD,MAAhB;;AACA,aAAMu2C,GAAN,EAAW;AACPwa,QAAAA,YAAY,GAAGF,KAAf;AACAA,QAAAA,KAAK,GAAG,EAAR;;AACA,eAAO,EAAEG,UAAF,GAAeza,GAAtB,EAA2B;AACvB,cAAIwa,YAAJ,EAAkB;AACdA,YAAAA,YAAY,CAACC,UAAD,CAAZ,CAAyBG,GAAzB;AACH;AACJ;;AACDH,QAAAA,UAAU,GAAG,CAAC,CAAd;AACAza,QAAAA,GAAG,GAAGsa,KAAK,CAAC7wD,MAAZ;AACH;;AACD+wD,MAAAA,YAAY,GAAG,IAAf;AACAD,MAAAA,QAAQ,GAAG,KAAX;AACAH,MAAAA,eAAe,CAAC3kD,OAAD,CAAf;AACH;;AAEDhE,IAAAA,OAAO,CAACg0B,QAAR,GAAmB,UAAU00B,GAAV,EAAe;AAC9B,UAAIxzB,IAAI,GAAG,IAAI9J,KAAJ,CAAUlzB,SAAS,CAACF,MAAV,GAAmB,CAA7B,CAAX;;AACA,UAAIE,SAAS,CAACF,MAAV,GAAmB,CAAvB,EAA0B;AACtB,aAAK,IAAIX,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGa,SAAS,CAACF,MAA9B,EAAsCX,CAAC,EAAvC,EAA2C;AACvC69B,UAAAA,IAAI,CAAC79B,CAAC,GAAG,CAAL,CAAJ,GAAca,SAAS,CAACb,CAAD,CAAvB;AACH;AACJ;;AACDwxD,MAAAA,KAAK,CAAC9iD,IAAN,CAAW,IAAIqjD,IAAJ,CAASV,GAAT,EAAcxzB,IAAd,CAAX;;AACA,UAAI2zB,KAAK,CAAC7wD,MAAN,KAAiB,CAAjB,IAAsB,CAAC8wD,QAA3B,EAAqC;AACjCL,QAAAA,UAAU,CAACS,UAAD,CAAV;AACH;AACJ,KAXD,CAtI0C,CAmJ1C;;;AACA,aAASE,IAAT,CAAcV,GAAd,EAAmBjhB,KAAnB,EAA0B;AACtB,WAAKihB,GAAL,GAAWA,GAAX;AACA,WAAKjhB,KAAL,GAAaA,KAAb;AACH;;AACD2hB,IAAAA,IAAI,CAAC9uD,SAAL,CAAe6uD,GAAf,GAAqB,YAAY;AAC7B,WAAKT,GAAL,CAASvwD,KAAT,CAAe,IAAf,EAAqB,KAAKsvC,KAA1B;AACH,KAFD;;AAGAznC,IAAAA,OAAO,CAACqpD,KAAR,GAAgB,SAAhB;AACArpD,IAAAA,OAAO,CAACa,OAAR,GAAkB,IAAlB;AACAb,IAAAA,OAAO,CAACoS,GAAR,GAAc,EAAd;AACApS,IAAAA,OAAO,CAACspD,IAAR,GAAe,EAAf;AACAtpD,IAAAA,OAAO,CAAC5G,OAAR,GAAkB,EAAlB,CA/J0C,CA+JpB;;AACtB4G,IAAAA,OAAO,CAAC89B,QAAR,GAAmB,EAAnB;;AAEA,aAASxK,IAAT,GAAgB,CAAE;;AAElBtzB,IAAAA,OAAO,CAAC6a,EAAR,GAAayY,IAAb;AACAtzB,IAAAA,OAAO,CAAC61B,WAAR,GAAsBvC,IAAtB;AACAtzB,IAAAA,OAAO,CAACu5C,IAAR,GAAejmB,IAAf;AACAtzB,IAAAA,OAAO,CAACupD,GAAR,GAAcj2B,IAAd;AACAtzB,IAAAA,OAAO,CAACoQ,cAAR,GAAyBkjB,IAAzB;AACAtzB,IAAAA,OAAO,CAAC+yB,kBAAR,GAA6BO,IAA7B;AACAtzB,IAAAA,OAAO,CAACgb,IAAR,GAAesY,IAAf;AACAtzB,IAAAA,OAAO,CAACwpD,eAAR,GAA0Bl2B,IAA1B;AACAtzB,IAAAA,OAAO,CAACypD,mBAAR,GAA8Bn2B,IAA9B;;AAEAtzB,IAAAA,OAAO,CAACm3B,SAAR,GAAoB,UAAUl1B,IAAV,EAAgB;AAAE,aAAO,EAAP;AAAW,KAAjD;;AAEAjC,IAAAA,OAAO,CAAC0pD,OAAR,GAAkB,UAAUznD,IAAV,EAAgB;AAC9B,YAAM,IAAItK,KAAJ,CAAU,kCAAV,CAAN;AACH,KAFD;;AAIAqI,IAAAA,OAAO,CAAC2pD,GAAR,GAAc,YAAY;AAAE,aAAO,GAAP;AAAY,KAAxC;;AACA3pD,IAAAA,OAAO,CAAC4pD,KAAR,GAAgB,UAAU/W,GAAV,EAAe;AAC3B,YAAM,IAAIl7C,KAAJ,CAAU,gCAAV,CAAN;AACH,KAFD;;AAGAqI,IAAAA,OAAO,CAAC6pD,KAAR,GAAgB,YAAW;AAAE,aAAO,CAAP;AAAW,KAAxC;AAEC,GA1LQ,EA0LP,EA1LO,CArvjBic;AA+6jBpc,MAAG,CAAC,UAASryD,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1C,KAAC,UAAUy3C,MAAV,EAAiB;AAClB;AACA;;AAAE,iBAASua,IAAT,EAAe;AAEf;AACA,YAAIC,WAAW,GAAG,OAAOjyD,OAAP,IAAkB,QAAlB,IAA8BA,OAA9B,IAChB,CAACA,OAAO,CAACkyD,QADO,IACKlyD,OADvB;AAEA,YAAImyD,UAAU,GAAG,OAAOhyD,MAAP,IAAiB,QAAjB,IAA6BA,MAA7B,IACf,CAACA,MAAM,CAAC+xD,QADO,IACK/xD,MADtB;AAEA,YAAIiyD,UAAU,GAAG,OAAO3a,MAAP,IAAiB,QAAjB,IAA6BA,MAA9C;;AACA,YACE2a,UAAU,CAAC3a,MAAX,KAAsB2a,UAAtB,IACAA,UAAU,CAACh9C,MAAX,KAAsBg9C,UADtB,IAEAA,UAAU,CAACxoD,IAAX,KAAoBwoD,UAHtB,EAIE;AACAJ,UAAAA,IAAI,GAAGI,UAAP;AACD;AAED;AACJ;AACA;AACA;AACA;;;AACI,YAAIC,QAAJ;;AAEA;AACAC,QAAAA,MAAM,GAAG,UAHT;AAAA,YAGqB;;AAErB;AACA5gB,QAAAA,IAAI,GAAG,EANP;AAAA,YAOA6gB,IAAI,GAAG,CAPP;AAAA,YAQAC,IAAI,GAAG,EARP;AAAA,YASAC,IAAI,GAAG,EATP;AAAA,YAUAC,IAAI,GAAG,GAVP;AAAA,YAWAC,WAAW,GAAG,EAXd;AAAA,YAYAC,QAAQ,GAAG,GAZX;AAAA,YAYgB;AAChBC,QAAAA,SAAS,GAAG,GAbZ;AAAA,YAaiB;;AAEjB;AACAC,QAAAA,aAAa,GAAG,OAhBhB;AAAA,YAiBAC,aAAa,GAAG,cAjBhB;AAAA,YAiBgC;AAChCC,QAAAA,eAAe,GAAG,2BAlBlB;AAAA,YAkB+C;;AAE/C;AACAtlC,QAAAA,MAAM,GAAG;AACP,sBAAY,iDADL;AAEP,uBAAa,gDAFN;AAGP,2BAAiB;AAHV,SArBT;;AA2BA;AACAulC,QAAAA,aAAa,GAAGvhB,IAAI,GAAG6gB,IA5BvB;AAAA,YA6BArtD,KAAK,GAAGD,IAAI,CAACC,KA7Bb;AAAA,YA8BAguD,kBAAkB,GAAG57C,MAAM,CAAC2lC,YA9B5B;;AAgCA;AACAj7C,QAAAA,GAjCA;AAmCA;;AAEA;AACJ;AACA;AACA;AACA;AACA;;AACI,iBAAS6B,KAAT,CAAekT,IAAf,EAAqB;AACnB,gBAAMshC,UAAU,CAAC3qB,MAAM,CAAC3W,IAAD,CAAP,CAAhB;AACD;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AACI,iBAASkQ,GAAT,CAAa0oB,KAAb,EAAoB79B,EAApB,EAAwB;AACtB,cAAI5R,MAAM,GAAGyvC,KAAK,CAACzvC,MAAnB;AACA,cAAI2W,MAAM,GAAG,EAAb;;AACA,iBAAO3W,MAAM,EAAb,EAAiB;AACf2W,YAAAA,MAAM,CAAC3W,MAAD,CAAN,GAAiB4R,EAAE,CAAC69B,KAAK,CAACzvC,MAAD,CAAN,CAAnB;AACD;;AACD,iBAAO2W,MAAP;AACD;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACI,iBAASs8C,SAAT,CAAmB/xC,MAAnB,EAA2BtP,EAA3B,EAA+B;AAC7B,cAAIslB,KAAK,GAAGhW,MAAM,CAACzM,KAAP,CAAa,GAAb,CAAZ;AACA,cAAIkC,MAAM,GAAG,EAAb;;AACA,cAAIugB,KAAK,CAACl3B,MAAN,GAAe,CAAnB,EAAsB;AACpB;AACA;AACA2W,YAAAA,MAAM,GAAGugB,KAAK,CAAC,CAAD,CAAL,GAAW,GAApB;AACAhW,YAAAA,MAAM,GAAGgW,KAAK,CAAC,CAAD,CAAd;AACD,WAR4B,CAS7B;;;AACAhW,UAAAA,MAAM,GAAGA,MAAM,CAACsL,OAAP,CAAesmC,eAAf,EAAgC,MAAhC,CAAT;AACA,cAAI19B,MAAM,GAAGlU,MAAM,CAACzM,KAAP,CAAa,GAAb,CAAb;AACA,cAAIy+C,OAAO,GAAGnsC,GAAG,CAACqO,MAAD,EAASxjB,EAAT,CAAH,CAAgBmD,IAAhB,CAAqB,GAArB,CAAd;AACA,iBAAO4B,MAAM,GAAGu8C,OAAhB;AACD;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACI,iBAASC,UAAT,CAAoBjyC,MAApB,EAA4B;AAC1B,cAAI7D,MAAM,GAAG,EAAb;AAAA,cACI+1C,OAAO,GAAG,CADd;AAAA,cAEIpzD,MAAM,GAAGkhB,MAAM,CAAClhB,MAFpB;AAAA,cAGIuJ,KAHJ;AAAA,cAII8pD,KAJJ;;AAKA,iBAAOD,OAAO,GAAGpzD,MAAjB,EAAyB;AACvBuJ,YAAAA,KAAK,GAAG2X,MAAM,CAACksB,UAAP,CAAkBgmB,OAAO,EAAzB,CAAR;;AACA,gBAAI7pD,KAAK,IAAI,MAAT,IAAmBA,KAAK,IAAI,MAA5B,IAAsC6pD,OAAO,GAAGpzD,MAApD,EAA4D;AAC1D;AACAqzD,cAAAA,KAAK,GAAGnyC,MAAM,CAACksB,UAAP,CAAkBgmB,OAAO,EAAzB,CAAR;;AACA,kBAAI,CAACC,KAAK,GAAG,MAAT,KAAoB,MAAxB,EAAgC;AAAE;AAChCh2C,gBAAAA,MAAM,CAACtP,IAAP,CAAY,CAAC,CAACxE,KAAK,GAAG,KAAT,KAAmB,EAApB,KAA2B8pD,KAAK,GAAG,KAAnC,IAA4C,OAAxD;AACD,eAFD,MAEO;AACL;AACA;AACAh2C,gBAAAA,MAAM,CAACtP,IAAP,CAAYxE,KAAZ;AACA6pD,gBAAAA,OAAO;AACR;AACF,aAXD,MAWO;AACL/1C,cAAAA,MAAM,CAACtP,IAAP,CAAYxE,KAAZ;AACD;AACF;;AACD,iBAAO8T,MAAP;AACD;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AACI,iBAASi2C,UAAT,CAAoB7jB,KAApB,EAA2B;AACzB,iBAAO1oB,GAAG,CAAC0oB,KAAD,EAAQ,UAASlmC,KAAT,EAAgB;AAChC,gBAAI8T,MAAM,GAAG,EAAb;;AACA,gBAAI9T,KAAK,GAAG,MAAZ,EAAoB;AAClBA,cAAAA,KAAK,IAAI,OAAT;AACA8T,cAAAA,MAAM,IAAI21C,kBAAkB,CAACzpD,KAAK,KAAK,EAAV,GAAe,KAAf,GAAuB,MAAxB,CAA5B;AACAA,cAAAA,KAAK,GAAG,SAASA,KAAK,GAAG,KAAzB;AACD;;AACD8T,YAAAA,MAAM,IAAI21C,kBAAkB,CAACzpD,KAAD,CAA5B;AACA,mBAAO8T,MAAP;AACD,WATS,CAAH,CASJtI,IATI,CASC,EATD,CAAP;AAUD;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACI,iBAASw+C,YAAT,CAAsBjX,SAAtB,EAAiC;AAC/B,cAAIA,SAAS,GAAG,EAAZ,GAAiB,EAArB,EAAyB;AACvB,mBAAOA,SAAS,GAAG,EAAnB;AACD;;AACD,cAAIA,SAAS,GAAG,EAAZ,GAAiB,EAArB,EAAyB;AACvB,mBAAOA,SAAS,GAAG,EAAnB;AACD;;AACD,cAAIA,SAAS,GAAG,EAAZ,GAAiB,EAArB,EAAyB;AACvB,mBAAOA,SAAS,GAAG,EAAnB;AACD;;AACD,iBAAO9K,IAAP;AACD;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACI,iBAASgiB,YAAT,CAAsBC,KAAtB,EAA6BC,IAA7B,EAAmC;AACjC;AACA;AACA,iBAAOD,KAAK,GAAG,EAAR,GAAa,MAAMA,KAAK,GAAG,EAAd,CAAb,IAAkC,CAACC,IAAI,IAAI,CAAT,KAAe,CAAjD,CAAP;AACD;AAED;AACJ;AACA;AACA;AACA;;;AACI,iBAASC,KAAT,CAAexsC,KAAf,EAAsBysC,SAAtB,EAAiCC,SAAjC,EAA4C;AAC1C,cAAI7sD,CAAC,GAAG,CAAR;AACAmgB,UAAAA,KAAK,GAAG0sC,SAAS,GAAG7uD,KAAK,CAACmiB,KAAK,GAAGqrC,IAAT,CAAR,GAAyBrrC,KAAK,IAAI,CAAnD;AACAA,UAAAA,KAAK,IAAIniB,KAAK,CAACmiB,KAAK,GAAGysC,SAAT,CAAd;;AACA;AAAK;AAAyBzsC,UAAAA,KAAK,GAAG4rC,aAAa,GAAGT,IAAhB,IAAwB,CAA9D,EAAiEtrD,CAAC,IAAIwqC,IAAtE,EAA4E;AAC1ErqB,YAAAA,KAAK,GAAGniB,KAAK,CAACmiB,KAAK,GAAG4rC,aAAT,CAAb;AACD;;AACD,iBAAO/tD,KAAK,CAACgC,CAAC,GAAG,CAAC+rD,aAAa,GAAG,CAAjB,IAAsB5rC,KAAtB,IAA+BA,KAAK,GAAGorC,IAAvC,CAAL,CAAZ;AACD;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACI,iBAASpgC,MAAT,CAAgBpuB,KAAhB,EAAuB;AACrB;AACA,cAAIsZ,MAAM,GAAG,EAAb;AAAA,cACIy2C,WAAW,GAAG/vD,KAAK,CAAC/D,MADxB;AAAA,cAEIiF,GAFJ;AAAA,cAGI5F,CAAC,GAAG,CAHR;AAAA,cAIIH,CAAC,GAAGwzD,QAJR;AAAA,cAKIqB,IAAI,GAAGtB,WALX;AAAA,cAMIuB,KANJ;AAAA,cAOI3Y,CAPJ;AAAA,cAQI9lC,KARJ;AAAA,cASI0+C,IATJ;AAAA,cAUIltD,CAVJ;AAAA,cAWIC,CAXJ;AAAA,cAYIysD,KAZJ;AAAA,cAaIt0D,CAbJ;;AAcI;AACA+0D,UAAAA,UAfJ,CAFqB,CAmBrB;AACA;AACA;;AAEAF,UAAAA,KAAK,GAAGjwD,KAAK,CAACg3C,WAAN,CAAkB4X,SAAlB,CAAR;;AACA,cAAIqB,KAAK,GAAG,CAAZ,EAAe;AACbA,YAAAA,KAAK,GAAG,CAAR;AACD;;AAED,eAAK3Y,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG2Y,KAAhB,EAAuB,EAAE3Y,CAAzB,EAA4B;AAC1B;AACA,gBAAIt3C,KAAK,CAACqpC,UAAN,CAAiBiO,CAAjB,KAAuB,IAA3B,EAAiC;AAC/B13C,cAAAA,KAAK,CAAC,WAAD,CAAL;AACD;;AACD0Z,YAAAA,MAAM,CAACtP,IAAP,CAAYhK,KAAK,CAACqpC,UAAN,CAAiBiO,CAAjB,CAAZ;AACD,WAlCoB,CAoCrB;AACA;;;AAEA,eAAK9lC,KAAK,GAAGy+C,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAArC,EAAwCz+C,KAAK,GAAGu+C,WAAhD;AAA6D;AAA2B;AAEtF;AACA;AACA;AACA;AACA;AACA,iBAAKG,IAAI,GAAG50D,CAAP,EAAU0H,CAAC,GAAG,CAAd,EAAiBC,CAAC,GAAGwqC,IAA1B;AAAgC;AAAoBxqC,YAAAA,CAAC,IAAIwqC,IAAzD,EAA+D;AAE7D,kBAAIj8B,KAAK,IAAIu+C,WAAb,EAA0B;AACxBnwD,gBAAAA,KAAK,CAAC,eAAD,CAAL;AACD;;AAED8vD,cAAAA,KAAK,GAAGF,YAAY,CAACxvD,KAAK,CAACqpC,UAAN,CAAiB73B,KAAK,EAAtB,CAAD,CAApB;;AAEA,kBAAIk+C,KAAK,IAAIjiB,IAAT,IAAiBiiB,KAAK,GAAGzuD,KAAK,CAAC,CAACotD,MAAM,GAAG/yD,CAAV,IAAe0H,CAAhB,CAAlC,EAAsD;AACpDpD,gBAAAA,KAAK,CAAC,UAAD,CAAL;AACD;;AAEDtE,cAAAA,CAAC,IAAIo0D,KAAK,GAAG1sD,CAAb;AACA5H,cAAAA,CAAC,GAAG6H,CAAC,IAAI+sD,IAAL,GAAY1B,IAAZ,GAAoBrrD,CAAC,IAAI+sD,IAAI,GAAGzB,IAAZ,GAAmBA,IAAnB,GAA0BtrD,CAAC,GAAG+sD,IAAtD;;AAEA,kBAAIN,KAAK,GAAGt0D,CAAZ,EAAe;AACb;AACD;;AAED+0D,cAAAA,UAAU,GAAG1iB,IAAI,GAAGryC,CAApB;;AACA,kBAAI4H,CAAC,GAAG/B,KAAK,CAACotD,MAAM,GAAG8B,UAAV,CAAb,EAAoC;AAClCvwD,gBAAAA,KAAK,CAAC,UAAD,CAAL;AACD;;AAEDoD,cAAAA,CAAC,IAAImtD,UAAL;AAED;;AAEDjvD,YAAAA,GAAG,GAAGoY,MAAM,CAACrd,MAAP,GAAgB,CAAtB;AACA+zD,YAAAA,IAAI,GAAGJ,KAAK,CAACt0D,CAAC,GAAG40D,IAAL,EAAWhvD,GAAX,EAAgBgvD,IAAI,IAAI,CAAxB,CAAZ,CApCsF,CAsCtF;AACA;;AACA,gBAAIjvD,KAAK,CAAC3F,CAAC,GAAG4F,GAAL,CAAL,GAAiBmtD,MAAM,GAAGlzD,CAA9B,EAAiC;AAC/ByE,cAAAA,KAAK,CAAC,UAAD,CAAL;AACD;;AAEDzE,YAAAA,CAAC,IAAI8F,KAAK,CAAC3F,CAAC,GAAG4F,GAAL,CAAV;AACA5F,YAAAA,CAAC,IAAI4F,GAAL,CA7CsF,CA+CtF;;AACAoY,YAAAA,MAAM,CAACijB,MAAP,CAAcjhC,CAAC,EAAf,EAAmB,CAAnB,EAAsBH,CAAtB;AAED;;AAED,iBAAOo0D,UAAU,CAACj2C,MAAD,CAAjB;AACD;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACI,iBAASkV,MAAT,CAAgBxuB,KAAhB,EAAuB;AACrB,cAAI7E,CAAJ;AAAA,cACIioB,KADJ;AAAA,cAEIgtC,cAFJ;AAAA,cAGIC,WAHJ;AAAA,cAIIL,IAJJ;AAAA,cAKI1Y,CALJ;AAAA,cAMIlB,CANJ;AAAA,cAOIx0C,CAPJ;AAAA,cAQIqB,CARJ;AAAA,cASI7H,CATJ;AAAA,cAUIk1D,YAVJ;AAAA,cAWIh3C,MAAM,GAAG,EAXb;;AAYI;AACAy2C,UAAAA,WAbJ;;AAcI;AACAQ,UAAAA,qBAfJ;AAAA,cAgBIJ,UAhBJ;AAAA,cAiBIK,OAjBJ,CADqB,CAoBrB;;AACAxwD,UAAAA,KAAK,GAAGovD,UAAU,CAACpvD,KAAD,CAAlB,CArBqB,CAuBrB;;AACA+vD,UAAAA,WAAW,GAAG/vD,KAAK,CAAC/D,MAApB,CAxBqB,CA0BrB;;AACAd,UAAAA,CAAC,GAAGwzD,QAAJ;AACAvrC,UAAAA,KAAK,GAAG,CAAR;AACA4sC,UAAAA,IAAI,GAAGtB,WAAP,CA7BqB,CA+BrB;;AACA,eAAKpX,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGyY,WAAhB,EAA6B,EAAEzY,CAA/B,EAAkC;AAChCgZ,YAAAA,YAAY,GAAGtwD,KAAK,CAACs3C,CAAD,CAApB;;AACA,gBAAIgZ,YAAY,GAAG,IAAnB,EAAyB;AACvBh3C,cAAAA,MAAM,CAACtP,IAAP,CAAYilD,kBAAkB,CAACqB,YAAD,CAA9B;AACD;AACF;;AAEDF,UAAAA,cAAc,GAAGC,WAAW,GAAG/2C,MAAM,CAACrd,MAAtC,CAvCqB,CAyCrB;AACA;AAEA;;AACA,cAAIo0D,WAAJ,EAAiB;AACf/2C,YAAAA,MAAM,CAACtP,IAAP,CAAY4kD,SAAZ;AACD,WA/CoB,CAiDrB;;;AACA,iBAAOwB,cAAc,GAAGL,WAAxB,EAAqC;AAEnC;AACA;AACA,iBAAK3Z,CAAC,GAAGiY,MAAJ,EAAY/W,CAAC,GAAG,CAArB,EAAwBA,CAAC,GAAGyY,WAA5B,EAAyC,EAAEzY,CAA3C,EAA8C;AAC5CgZ,cAAAA,YAAY,GAAGtwD,KAAK,CAACs3C,CAAD,CAApB;;AACA,kBAAIgZ,YAAY,IAAIn1D,CAAhB,IAAqBm1D,YAAY,GAAGla,CAAxC,EAA2C;AACzCA,gBAAAA,CAAC,GAAGka,YAAJ;AACD;AACF,aATkC,CAWnC;AACA;;;AACAC,YAAAA,qBAAqB,GAAGH,cAAc,GAAG,CAAzC;;AACA,gBAAIha,CAAC,GAAGj7C,CAAJ,GAAQ8F,KAAK,CAAC,CAACotD,MAAM,GAAGjrC,KAAV,IAAmBmtC,qBAApB,CAAjB,EAA6D;AAC3D3wD,cAAAA,KAAK,CAAC,UAAD,CAAL;AACD;;AAEDwjB,YAAAA,KAAK,IAAI,CAACgzB,CAAC,GAAGj7C,CAAL,IAAUo1D,qBAAnB;AACAp1D,YAAAA,CAAC,GAAGi7C,CAAJ;;AAEA,iBAAKkB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGyY,WAAhB,EAA6B,EAAEzY,CAA/B,EAAkC;AAChCgZ,cAAAA,YAAY,GAAGtwD,KAAK,CAACs3C,CAAD,CAApB;;AAEA,kBAAIgZ,YAAY,GAAGn1D,CAAf,IAAoB,EAAEioB,KAAF,GAAUirC,MAAlC,EAA0C;AACxCzuD,gBAAAA,KAAK,CAAC,UAAD,CAAL;AACD;;AAED,kBAAI0wD,YAAY,IAAIn1D,CAApB,EAAuB;AACrB;AACA,qBAAKyG,CAAC,GAAGwhB,KAAJ,EAAWngB,CAAC,GAAGwqC,IAApB;AAA0B;AAAoBxqC,gBAAAA,CAAC,IAAIwqC,IAAnD,EAAyD;AACvDryC,kBAAAA,CAAC,GAAG6H,CAAC,IAAI+sD,IAAL,GAAY1B,IAAZ,GAAoBrrD,CAAC,IAAI+sD,IAAI,GAAGzB,IAAZ,GAAmBA,IAAnB,GAA0BtrD,CAAC,GAAG+sD,IAAtD;;AACA,sBAAIpuD,CAAC,GAAGxG,CAAR,EAAW;AACT;AACD;;AACDo1D,kBAAAA,OAAO,GAAG5uD,CAAC,GAAGxG,CAAd;AACA+0D,kBAAAA,UAAU,GAAG1iB,IAAI,GAAGryC,CAApB;AACAke,kBAAAA,MAAM,CAACtP,IAAP,CACEilD,kBAAkB,CAACQ,YAAY,CAACr0D,CAAC,GAAGo1D,OAAO,GAAGL,UAAf,EAA2B,CAA3B,CAAb,CADpB;AAGAvuD,kBAAAA,CAAC,GAAGX,KAAK,CAACuvD,OAAO,GAAGL,UAAX,CAAT;AACD;;AAED72C,gBAAAA,MAAM,CAACtP,IAAP,CAAYilD,kBAAkB,CAACQ,YAAY,CAAC7tD,CAAD,EAAI,CAAJ,CAAb,CAA9B;AACAouD,gBAAAA,IAAI,GAAGJ,KAAK,CAACxsC,KAAD,EAAQmtC,qBAAR,EAA+BH,cAAc,IAAIC,WAAjD,CAAZ;AACAjtC,gBAAAA,KAAK,GAAG,CAAR;AACA,kBAAEgtC,cAAF;AACD;AACF;;AAED,cAAEhtC,KAAF;AACA,cAAEjoB,CAAF;AAED;;AACD,iBAAOme,MAAM,CAACtI,IAAP,CAAY,EAAZ,CAAP;AACD;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACI,iBAASy/C,SAAT,CAAmBzwD,KAAnB,EAA0B;AACxB,iBAAOkvD,SAAS,CAAClvD,KAAD,EAAQ,UAASmd,MAAT,EAAiB;AACvC,mBAAO0xC,aAAa,CAAC7+B,IAAd,CAAmB7S,MAAnB,IACHiR,MAAM,CAACjR,MAAM,CAAC7L,KAAP,CAAa,CAAb,EAAgBzT,WAAhB,EAAD,CADH,GAEHsf,MAFJ;AAGD,WAJe,CAAhB;AAKD;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACI,iBAASuzC,OAAT,CAAiB1wD,KAAjB,EAAwB;AACtB,iBAAOkvD,SAAS,CAAClvD,KAAD,EAAQ,UAASmd,MAAT,EAAiB;AACvC,mBAAO2xC,aAAa,CAAC9+B,IAAd,CAAmB7S,MAAnB,IACH,SAASqR,MAAM,CAACrR,MAAD,CADZ,GAEHA,MAFJ;AAGD,WAJe,CAAhB;AAKD;AAED;;AAEA;;;AACAixC,QAAAA,QAAQ,GAAG;AACT;AACN;AACA;AACA;AACA;AACM,qBAAW,OANF;;AAOT;AACN;AACA;AACA;AACA;AACA;AACA;AACM,kBAAQ;AACN,sBAAUgB,UADJ;AAEN,sBAAUG;AAFJ,WAdC;AAkBT,oBAAUnhC,MAlBD;AAmBT,oBAAUI,MAnBD;AAoBT,qBAAWkiC,OApBF;AAqBT,uBAAaD;AArBJ,SAAX;AAwBA;AACA;AACA;;AACA,YACE,OAAOE,MAAP,IAAiB,UAAjB,IACA,OAAOA,MAAM,CAACC,GAAd,IAAqB,QADrB,IAEAD,MAAM,CAACC,GAHT,EAIE;AACAD,UAAAA,MAAM,CAAC,UAAD,EAAa,YAAW;AAC5B,mBAAOvC,QAAP;AACD,WAFK,CAAN;AAGD,SARD,MAQO,IAAIJ,WAAW,IAAIE,UAAnB,EAA+B;AACpC,cAAIhyD,MAAM,CAACH,OAAP,IAAkBiyD,WAAtB,EAAmC;AAAE;AACnCE,YAAAA,UAAU,CAACnyD,OAAX,GAAqBqyD,QAArB;AACD,WAFD,MAEO;AAAE;AACP,iBAAKrwD,GAAL,IAAYqwD,QAAZ,EAAsB;AACpBA,cAAAA,QAAQ,CAAC9wD,cAAT,CAAwBS,GAAxB,MAAiCiwD,WAAW,CAACjwD,GAAD,CAAX,GAAmBqwD,QAAQ,CAACrwD,GAAD,CAA5D;AACD;AACF;AACF,SARM,MAQA;AAAE;AACPgwD,UAAAA,IAAI,CAACK,QAAL,GAAgBA,QAAhB;AACD;AAEF,OAhhBC,EAghBA,IAhhBA,CAAD;AAkhBA,KAphBD,EAohBGpyD,IAphBH,CAohBQ,IAphBR,EAohBa,OAAOw3C,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC,OAAO7tC,IAAP,KAAgB,WAAhB,GAA8BA,IAA9B,GAAqC,OAAOwL,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC,EAphBpI;AAqhBC,GAthBQ,EAshBP,EAthBO,CA/6jBic;AAq8kBpc,MAAG,CAAC,UAAS1V,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,iBAtB0C,CAwB1C;AACA;AACA;;AACA,aAASuB,cAAT,CAAwB+sB,GAAxB,EAA6B0hB,IAA7B,EAAmC;AACjC,aAAOpvC,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqCquB,GAArC,EAA0C0hB,IAA1C,CAAP;AACD;;AAED7vC,IAAAA,MAAM,CAACH,OAAP,GAAiB,UAASgrC,EAAT,EAAaG,GAAb,EAAkB2pB,EAAlB,EAAsB1rD,OAAtB,EAA+B;AAC9C+hC,MAAAA,GAAG,GAAGA,GAAG,IAAI,GAAb;AACA2pB,MAAAA,EAAE,GAAGA,EAAE,IAAI,GAAX;AACA,UAAIxmC,GAAG,GAAG,EAAV;;AAEA,UAAI,OAAO0c,EAAP,KAAc,QAAd,IAA0BA,EAAE,CAAC9qC,MAAH,KAAc,CAA5C,EAA+C;AAC7C,eAAOouB,GAAP;AACD;;AAED,UAAIymC,MAAM,GAAG,KAAb;AACA/pB,MAAAA,EAAE,GAAGA,EAAE,CAACr2B,KAAH,CAASw2B,GAAT,CAAL;AAEA,UAAI6pB,OAAO,GAAG,IAAd;;AACA,UAAI5rD,OAAO,IAAI,OAAOA,OAAO,CAAC4rD,OAAf,KAA2B,QAA1C,EAAoD;AAClDA,QAAAA,OAAO,GAAG5rD,OAAO,CAAC4rD,OAAlB;AACD;;AAED,UAAIve,GAAG,GAAGzL,EAAE,CAAC9qC,MAAb,CAjB8C,CAkB9C;;AACA,UAAI80D,OAAO,GAAG,CAAV,IAAeve,GAAG,GAAGue,OAAzB,EAAkC;AAChCve,QAAAA,GAAG,GAAGue,OAAN;AACD;;AAED,WAAK,IAAIz1D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGk3C,GAApB,EAAyB,EAAEl3C,CAA3B,EAA8B;AAC5B,YAAIuG,CAAC,GAAGklC,EAAE,CAACzrC,CAAD,CAAF,CAAMmtB,OAAN,CAAcqoC,MAAd,EAAsB,KAAtB,CAAR;AAAA,YACInlB,GAAG,GAAG9pC,CAAC,CAACvD,OAAF,CAAUuyD,EAAV,CADV;AAAA,YAEIG,IAFJ;AAAA,YAEUC,IAFV;AAAA,YAEgBhuD,CAFhB;AAAA,YAEmBwwB,CAFnB;;AAIA,YAAIkY,GAAG,IAAI,CAAX,EAAc;AACZqlB,UAAAA,IAAI,GAAGnvD,CAAC,CAAC8Y,MAAF,CAAS,CAAT,EAAYgxB,GAAZ,CAAP;AACAslB,UAAAA,IAAI,GAAGpvD,CAAC,CAAC8Y,MAAF,CAASgxB,GAAG,GAAG,CAAf,CAAP;AACD,SAHD,MAGO;AACLqlB,UAAAA,IAAI,GAAGnvD,CAAP;AACAovD,UAAAA,IAAI,GAAG,EAAP;AACD;;AAEDhuD,QAAAA,CAAC,GAAGuiC,kBAAkB,CAACwrB,IAAD,CAAtB;AACAv9B,QAAAA,CAAC,GAAG+R,kBAAkB,CAACyrB,IAAD,CAAtB;;AAEA,YAAI,CAAC3zD,cAAc,CAAC+sB,GAAD,EAAMpnB,CAAN,CAAnB,EAA6B;AAC3BonB,UAAAA,GAAG,CAACpnB,CAAD,CAAH,GAASwwB,CAAT;AACD,SAFD,MAEO,IAAIP,OAAO,CAAC7I,GAAG,CAACpnB,CAAD,CAAJ,CAAX,EAAqB;AAC1BonB,UAAAA,GAAG,CAACpnB,CAAD,CAAH,CAAO+G,IAAP,CAAYypB,CAAZ;AACD,SAFM,MAEA;AACLpJ,UAAAA,GAAG,CAACpnB,CAAD,CAAH,GAAS,CAAConB,GAAG,CAACpnB,CAAD,CAAJ,EAASwwB,CAAT,CAAT;AACD;AACF;;AAED,aAAOpJ,GAAP;AACD,KAjDD;;AAmDA,QAAI6I,OAAO,GAAG7D,KAAK,CAAC6D,OAAN,IAAiB,UAAUg+B,EAAV,EAAc;AAC3C,aAAOv0D,MAAM,CAAC4B,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+Bk1D,EAA/B,MAAuC,gBAA9C;AACD,KAFD;AAIC,GAtFQ,EAsFP,EAtFO,CAr8kBic;AA2hlBpc,MAAG,CAAC,UAASz1D,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,QAAIo1D,kBAAkB,GAAG,UAAS19B,CAAT,EAAY;AACnC,cAAQ,OAAOA,CAAf;AACE,aAAK,QAAL;AACE,iBAAOA,CAAP;;AAEF,aAAK,SAAL;AACE,iBAAOA,CAAC,GAAG,MAAH,GAAY,OAApB;;AAEF,aAAK,QAAL;AACE,iBAAO0kB,QAAQ,CAAC1kB,CAAD,CAAR,GAAcA,CAAd,GAAkB,EAAzB;;AAEF;AACE,iBAAO,EAAP;AAXJ;AAaD,KAdD;;AAgBAv3B,IAAAA,MAAM,CAACH,OAAP,GAAiB,UAASsuB,GAAT,EAAc6c,GAAd,EAAmB2pB,EAAnB,EAAuB3qD,IAAvB,EAA6B;AAC5CghC,MAAAA,GAAG,GAAGA,GAAG,IAAI,GAAb;AACA2pB,MAAAA,EAAE,GAAGA,EAAE,IAAI,GAAX;;AACA,UAAIxmC,GAAG,KAAK,IAAZ,EAAkB;AAChBA,QAAAA,GAAG,GAAGjlB,SAAN;AACD;;AAED,UAAI,OAAOilB,GAAP,KAAe,QAAnB,EAA6B;AAC3B,eAAOrH,GAAG,CAACouC,UAAU,CAAC/mC,GAAD,CAAX,EAAkB,UAASpnB,CAAT,EAAY;AACtC,cAAIouD,EAAE,GAAGnoB,kBAAkB,CAACioB,kBAAkB,CAACluD,CAAD,CAAnB,CAAlB,GAA4C4tD,EAArD;;AACA,cAAI39B,OAAO,CAAC7I,GAAG,CAACpnB,CAAD,CAAJ,CAAX,EAAqB;AACnB,mBAAO+f,GAAG,CAACqH,GAAG,CAACpnB,CAAD,CAAJ,EAAS,UAASwwB,CAAT,EAAY;AAC7B,qBAAO49B,EAAE,GAAGnoB,kBAAkB,CAACioB,kBAAkB,CAAC19B,CAAD,CAAnB,CAA9B;AACD,aAFS,CAAH,CAEJziB,IAFI,CAECk2B,GAFD,CAAP;AAGD,WAJD,MAIO;AACL,mBAAOmqB,EAAE,GAAGnoB,kBAAkB,CAACioB,kBAAkB,CAAC9mC,GAAG,CAACpnB,CAAD,CAAJ,CAAnB,CAA9B;AACD;AACF,SATS,CAAH,CASJ+N,IATI,CASCk2B,GATD,CAAP;AAWD;;AAED,UAAI,CAAChhC,IAAL,EAAW,OAAO,EAAP;AACX,aAAOgjC,kBAAkB,CAACioB,kBAAkB,CAACjrD,IAAD,CAAnB,CAAlB,GAA+C2qD,EAA/C,GACA3nB,kBAAkB,CAACioB,kBAAkB,CAAC9mC,GAAD,CAAnB,CADzB;AAED,KAxBD;;AA0BA,QAAI6I,OAAO,GAAG7D,KAAK,CAAC6D,OAAN,IAAiB,UAAUg+B,EAAV,EAAc;AAC3C,aAAOv0D,MAAM,CAAC4B,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+Bk1D,EAA/B,MAAuC,gBAA9C;AACD,KAFD;;AAIA,aAASluC,GAAT,CAAckuC,EAAd,EAAkB31D,CAAlB,EAAqB;AACnB,UAAI21D,EAAE,CAACluC,GAAP,EAAY,OAAOkuC,EAAE,CAACluC,GAAH,CAAOznB,CAAP,CAAP;AACZ,UAAIkqC,GAAG,GAAG,EAAV;;AACA,WAAK,IAAInqC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG41D,EAAE,CAACj1D,MAAvB,EAA+BX,CAAC,EAAhC,EAAoC;AAClCmqC,QAAAA,GAAG,CAACz7B,IAAJ,CAASzO,CAAC,CAAC21D,EAAE,CAAC51D,CAAD,CAAH,EAAQA,CAAR,CAAV;AACD;;AACD,aAAOmqC,GAAP;AACD;;AAED,QAAI2rB,UAAU,GAAGz0D,MAAM,CAAC4I,IAAP,IAAe,UAAU8kB,GAAV,EAAe;AAC7C,UAAIob,GAAG,GAAG,EAAV;;AACA,WAAK,IAAI1nC,GAAT,IAAgBssB,GAAhB,EAAqB;AACnB,YAAI1tB,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqCquB,GAArC,EAA0CtsB,GAA1C,CAAJ,EAAoD0nC,GAAG,CAACz7B,IAAJ,CAASjM,GAAT;AACrD;;AACD,aAAO0nC,GAAP;AACD,KAND;AAQC,GAvFQ,EAuFP,EAvFO,CA3hlBic;AAknlBpc,MAAG,CAAC,UAAShqC,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1C;;AAEAA,IAAAA,OAAO,CAACqyB,MAAR,GAAiBryB,OAAO,CAACiL,KAAR,GAAgBvL,OAAO,CAAC,UAAD,CAAxC;AACAM,IAAAA,OAAO,CAACyyB,MAAR,GAAiBzyB,OAAO,CAACsrB,SAAR,GAAoB5rB,OAAO,CAAC,UAAD,CAA5C;AAEC,GANQ,EAMP;AAAC,gBAAW,EAAZ;AAAe,gBAAW;AAA1B,GANO,CAlnlBic;AAwnlBza,MAAG,CAAC,UAASA,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,iBAtBqE,CAwBrE;AACA;AACA;;AACA,aAASuB,cAAT,CAAwB+sB,GAAxB,EAA6B0hB,IAA7B,EAAmC;AACjC,aAAOpvC,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqCquB,GAArC,EAA0C0hB,IAA1C,CAAP;AACD;;AAED7vC,IAAAA,MAAM,CAACH,OAAP,GAAiB,UAASgrC,EAAT,EAAaG,GAAb,EAAkB2pB,EAAlB,EAAsB1rD,OAAtB,EAA+B;AAC9C+hC,MAAAA,GAAG,GAAGA,GAAG,IAAI,GAAb;AACA2pB,MAAAA,EAAE,GAAGA,EAAE,IAAI,GAAX;AACA,UAAIxmC,GAAG,GAAG,EAAV;;AAEA,UAAI,OAAO0c,EAAP,KAAc,QAAd,IAA0BA,EAAE,CAAC9qC,MAAH,KAAc,CAA5C,EAA+C;AAC7C,eAAOouB,GAAP;AACD;;AAED,UAAIymC,MAAM,GAAG,KAAb;AACA/pB,MAAAA,EAAE,GAAGA,EAAE,CAACr2B,KAAH,CAASw2B,GAAT,CAAL;AAEA,UAAI6pB,OAAO,GAAG,IAAd;;AACA,UAAI5rD,OAAO,IAAI,OAAOA,OAAO,CAAC4rD,OAAf,KAA2B,QAA1C,EAAoD;AAClDA,QAAAA,OAAO,GAAG5rD,OAAO,CAAC4rD,OAAlB;AACD;;AAED,UAAIve,GAAG,GAAGzL,EAAE,CAAC9qC,MAAb,CAjB8C,CAkB9C;;AACA,UAAI80D,OAAO,GAAG,CAAV,IAAeve,GAAG,GAAGue,OAAzB,EAAkC;AAChCve,QAAAA,GAAG,GAAGue,OAAN;AACD;;AAED,WAAK,IAAIz1D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGk3C,GAApB,EAAyB,EAAEl3C,CAA3B,EAA8B;AAC5B,YAAIuG,CAAC,GAAGklC,EAAE,CAACzrC,CAAD,CAAF,CAAMmtB,OAAN,CAAcqoC,MAAd,EAAsB,KAAtB,CAAR;AAAA,YACInlB,GAAG,GAAG9pC,CAAC,CAACvD,OAAF,CAAUuyD,EAAV,CADV;AAAA,YAEIG,IAFJ;AAAA,YAEUC,IAFV;AAAA,YAEgBhuD,CAFhB;AAAA,YAEmBwwB,CAFnB;;AAIA,YAAIkY,GAAG,IAAI,CAAX,EAAc;AACZqlB,UAAAA,IAAI,GAAGnvD,CAAC,CAAC8Y,MAAF,CAAS,CAAT,EAAYgxB,GAAZ,CAAP;AACAslB,UAAAA,IAAI,GAAGpvD,CAAC,CAAC8Y,MAAF,CAASgxB,GAAG,GAAG,CAAf,CAAP;AACD,SAHD,MAGO;AACLqlB,UAAAA,IAAI,GAAGnvD,CAAP;AACAovD,UAAAA,IAAI,GAAG,EAAP;AACD;;AAEDhuD,QAAAA,CAAC,GAAGuiC,kBAAkB,CAACwrB,IAAD,CAAtB;AACAv9B,QAAAA,CAAC,GAAG+R,kBAAkB,CAACyrB,IAAD,CAAtB;;AAEA,YAAI,CAAC3zD,cAAc,CAAC+sB,GAAD,EAAMpnB,CAAN,CAAnB,EAA6B;AAC3BonB,UAAAA,GAAG,CAACpnB,CAAD,CAAH,GAASwwB,CAAT;AACD,SAFD,MAEO,IAAIpE,KAAK,CAAC6D,OAAN,CAAc7I,GAAG,CAACpnB,CAAD,CAAjB,CAAJ,EAA2B;AAChConB,UAAAA,GAAG,CAACpnB,CAAD,CAAH,CAAO+G,IAAP,CAAYypB,CAAZ;AACD,SAFM,MAEA;AACLpJ,UAAAA,GAAG,CAACpnB,CAAD,CAAH,GAAS,CAAConB,GAAG,CAACpnB,CAAD,CAAJ,EAASwwB,CAAT,CAAT;AACD;AACF;;AAED,aAAOpJ,GAAP;AACD,KAjDD;AAmDC,GAlFmC,EAkFlC,EAlFkC,CAxnlBsa;AA0slBpc,MAAG,CAAC,UAAS5uB,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,QAAIo1D,kBAAkB,GAAG,UAAS19B,CAAT,EAAY;AACnC,cAAQ,OAAOA,CAAf;AACE,aAAK,QAAL;AACE,iBAAOA,CAAP;;AAEF,aAAK,SAAL;AACE,iBAAOA,CAAC,GAAG,MAAH,GAAY,OAApB;;AAEF,aAAK,QAAL;AACE,iBAAO0kB,QAAQ,CAAC1kB,CAAD,CAAR,GAAcA,CAAd,GAAkB,EAAzB;;AAEF;AACE,iBAAO,EAAP;AAXJ;AAaD,KAdD;;AAgBAv3B,IAAAA,MAAM,CAACH,OAAP,GAAiB,UAASsuB,GAAT,EAAc6c,GAAd,EAAmB2pB,EAAnB,EAAuB3qD,IAAvB,EAA6B;AAC5CghC,MAAAA,GAAG,GAAGA,GAAG,IAAI,GAAb;AACA2pB,MAAAA,EAAE,GAAGA,EAAE,IAAI,GAAX;;AACA,UAAIxmC,GAAG,KAAK,IAAZ,EAAkB;AAChBA,QAAAA,GAAG,GAAGjlB,SAAN;AACD;;AAED,UAAI,OAAOilB,GAAP,KAAe,QAAnB,EAA6B;AAC3B,eAAO1tB,MAAM,CAAC4I,IAAP,CAAY8kB,GAAZ,EAAiBrH,GAAjB,CAAqB,UAAS/f,CAAT,EAAY;AACtC,cAAIouD,EAAE,GAAGnoB,kBAAkB,CAACioB,kBAAkB,CAACluD,CAAD,CAAnB,CAAlB,GAA4C4tD,EAArD;;AACA,cAAIxhC,KAAK,CAAC6D,OAAN,CAAc7I,GAAG,CAACpnB,CAAD,CAAjB,CAAJ,EAA2B;AACzB,mBAAOonB,GAAG,CAACpnB,CAAD,CAAH,CAAO+f,GAAP,CAAW,UAASyQ,CAAT,EAAY;AAC5B,qBAAO49B,EAAE,GAAGnoB,kBAAkB,CAACioB,kBAAkB,CAAC19B,CAAD,CAAnB,CAA9B;AACD,aAFM,EAEJziB,IAFI,CAECk2B,GAFD,CAAP;AAGD,WAJD,MAIO;AACL,mBAAOmqB,EAAE,GAAGnoB,kBAAkB,CAACioB,kBAAkB,CAAC9mC,GAAG,CAACpnB,CAAD,CAAJ,CAAnB,CAA9B;AACD;AACF,SATM,EASJ+N,IATI,CASCk2B,GATD,CAAP;AAWD;;AAED,UAAI,CAAChhC,IAAL,EAAW,OAAO,EAAP;AACX,aAAOgjC,kBAAkB,CAACioB,kBAAkB,CAACjrD,IAAD,CAAnB,CAAlB,GAA+C2qD,EAA/C,GACA3nB,kBAAkB,CAACioB,kBAAkB,CAAC9mC,GAAD,CAAnB,CADzB;AAED,KAxBD;AA0BC,GAlEQ,EAkEP,EAlEO,CA1slBic;AA4wlBpc,MAAG,CAAC,UAAS5uB,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1CI,IAAAA,SAAS,CAAC,CAAD,CAAT,CAAa,EAAb,EAAiB,CAAjB,EAAoBC,KAApB,CAA0BL,OAA1B,EAAkCI,SAAlC;AACC,GAFQ,EAEP;AAAC,gBAAW,EAAZ;AAAe,gBAAW,EAA1B;AAA6B,WAAM;AAAnC,GAFO,CA5wlBic;AA8wlBha,MAAG,CAAC,UAASV,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC9E,KAAC,UAAU6sC,YAAV,EAAuB0oB,cAAvB,EAAsC;AACvC,UAAIr5B,QAAQ,GAAGx8B,OAAO,CAAC,oBAAD,CAAP,CAA8Bw8B,QAA7C;;AACA,UAAI77B,KAAK,GAAGm1D,QAAQ,CAAChzD,SAAT,CAAmBnC,KAA/B;AACA,UAAIkV,KAAK,GAAG+d,KAAK,CAAC9wB,SAAN,CAAgB+S,KAA5B;AACA,UAAIkgD,YAAY,GAAG,EAAnB;AACA,UAAIC,eAAe,GAAG,CAAtB,CALuC,CAOvC;;AAEA11D,MAAAA,OAAO,CAACmmB,UAAR,GAAqB,YAAW;AAC9B,eAAO,IAAIwvC,OAAJ,CAAYt1D,KAAK,CAACJ,IAAN,CAAWkmB,UAAX,EAAuB/Q,MAAvB,EAA+BhV,SAA/B,CAAZ,EAAuDswD,YAAvD,CAAP;AACD,OAFD;;AAGA1wD,MAAAA,OAAO,CAAC41D,WAAR,GAAsB,YAAW;AAC/B,eAAO,IAAID,OAAJ,CAAYt1D,KAAK,CAACJ,IAAN,CAAW21D,WAAX,EAAwBxgD,MAAxB,EAAgChV,SAAhC,CAAZ,EAAwDy1D,aAAxD,CAAP;AACD,OAFD;;AAGA71D,MAAAA,OAAO,CAAC0wD,YAAR,GACA1wD,OAAO,CAAC61D,aAAR,GAAwB,UAAS3pD,OAAT,EAAkB;AAAEA,QAAAA,OAAO,CAAC4pD,KAAR;AAAkB,OAD9D;;AAGA,eAASH,OAAT,CAAiBpjD,EAAjB,EAAqBwjD,OAArB,EAA8B;AAC5B,aAAKC,GAAL,GAAWzjD,EAAX;AACA,aAAK0jD,QAAL,GAAgBF,OAAhB;AACD;;AACDJ,MAAAA,OAAO,CAACnzD,SAAR,CAAkB0zD,KAAlB,GAA0BP,OAAO,CAACnzD,SAAR,CAAkB2zD,GAAlB,GAAwB,YAAW,CAAE,CAA/D;;AACAR,MAAAA,OAAO,CAACnzD,SAAR,CAAkBszD,KAAlB,GAA0B,YAAW;AACnC,aAAKG,QAAL,CAAch2D,IAAd,CAAmBmV,MAAnB,EAA2B,KAAK4gD,GAAhC;AACD,OAFD,CAvBuC,CA2BvC;;;AACAh2D,MAAAA,OAAO,CAACo2D,MAAR,GAAiB,UAASj9B,IAAT,EAAek9B,KAAf,EAAsB;AACrC3F,QAAAA,YAAY,CAACv3B,IAAI,CAACm9B,cAAN,CAAZ;AACAn9B,QAAAA,IAAI,CAACo9B,YAAL,GAAoBF,KAApB;AACD,OAHD;;AAKAr2D,MAAAA,OAAO,CAACw2D,QAAR,GAAmB,UAASr9B,IAAT,EAAe;AAChCu3B,QAAAA,YAAY,CAACv3B,IAAI,CAACm9B,cAAN,CAAZ;AACAn9B,QAAAA,IAAI,CAACo9B,YAAL,GAAoB,CAAC,CAArB;AACD,OAHD;;AAKAv2D,MAAAA,OAAO,CAACy2D,YAAR,GAAuBz2D,OAAO,CAAC26B,MAAR,GAAiB,UAASxB,IAAT,EAAe;AACrDu3B,QAAAA,YAAY,CAACv3B,IAAI,CAACm9B,cAAN,CAAZ;AAEA,YAAID,KAAK,GAAGl9B,IAAI,CAACo9B,YAAjB;;AACA,YAAIF,KAAK,IAAI,CAAb,EAAgB;AACdl9B,UAAAA,IAAI,CAACm9B,cAAL,GAAsBnwC,UAAU,CAAC,SAASuwC,SAAT,GAAqB;AACpD,gBAAIv9B,IAAI,CAACw9B,UAAT,EACEx9B,IAAI,CAACw9B,UAAL;AACH,WAH+B,EAG7BN,KAH6B,CAAhC;AAID;AACF,OAVD,CAtCuC,CAkDvC;;;AACAr2D,MAAAA,OAAO,CAAC6sC,YAAR,GAAuB,OAAOA,YAAP,KAAwB,UAAxB,GAAqCA,YAArC,GAAoD,UAAS/6B,EAAT,EAAa;AACtF,YAAIS,EAAE,GAAGmjD,eAAe,EAAxB;AACA,YAAIt4B,IAAI,GAAGh9B,SAAS,CAACF,MAAV,GAAmB,CAAnB,GAAuB,KAAvB,GAA+BqV,KAAK,CAACtV,IAAN,CAAWG,SAAX,EAAsB,CAAtB,CAA1C;AAEAq1D,QAAAA,YAAY,CAACljD,EAAD,CAAZ,GAAmB,IAAnB;AAEA2pB,QAAAA,QAAQ,CAAC,SAAS06B,UAAT,GAAsB;AAC7B,cAAInB,YAAY,CAACljD,EAAD,CAAhB,EAAsB;AACpB;AACA;AACA,gBAAI6qB,IAAJ,EAAU;AACRtrB,cAAAA,EAAE,CAACzR,KAAH,CAAS,IAAT,EAAe+8B,IAAf;AACD,aAFD,MAEO;AACLtrB,cAAAA,EAAE,CAAC7R,IAAH,CAAQ,IAAR;AACD,aAPmB,CAQpB;;;AACAD,YAAAA,OAAO,CAACu1D,cAAR,CAAuBhjD,EAAvB;AACD;AACF,SAZO,CAAR;AAcA,eAAOA,EAAP;AACD,OArBD;AAuBAvS,MAAAA,OAAO,CAACu1D,cAAR,GAAyB,OAAOA,cAAP,KAA0B,UAA1B,GAAuCA,cAAvC,GAAwD,UAAShjD,EAAT,EAAa;AAC5F,eAAOkjD,YAAY,CAACljD,EAAD,CAAnB;AACD,OAFD;AAGC,KA7ED,EA6EGtS,IA7EH,CA6EQ,IA7ER,EA6EaP,OAAO,CAAC,QAAD,CAAP,CAAkBmtC,YA7E/B,EA6E4CntC,OAAO,CAAC,QAAD,CAAP,CAAkB61D,cA7E9D;AA8EC,GA/E4C,EA+E3C;AAAC,0BAAqB,EAAtB;AAAyB,cAAS;AAAlC,GA/E2C,CA9wlB6Z;AA61lBja,MAAG,CAAC,UAAS71D,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,QAAIqyD,QAAQ,GAAG3yD,OAAO,CAAC,UAAD,CAAtB;;AAEAM,IAAAA,OAAO,CAACiL,KAAR,GAAgBkd,QAAhB;AACAnoB,IAAAA,OAAO,CAACyK,OAAR,GAAkBosD,UAAlB;AACA72D,IAAAA,OAAO,CAAC82D,aAAR,GAAwBC,gBAAxB;AACA/2D,IAAAA,OAAO,CAAC+xB,MAAR,GAAiByW,SAAjB;AAEAxoC,IAAAA,OAAO,CAACg3D,GAAR,GAAcA,GAAd;;AAEA,aAASA,GAAT,GAAe;AACb,WAAK3uC,QAAL,GAAgB,IAAhB;AACA,WAAK4uC,OAAL,GAAe,IAAf;AACA,WAAK5uB,IAAL,GAAY,IAAZ;AACA,WAAK7mB,IAAL,GAAY,IAAZ;AACA,WAAK4G,IAAL,GAAY,IAAZ;AACA,WAAKpE,QAAL,GAAgB,IAAhB;AACA,WAAK3gB,IAAL,GAAY,IAAZ;AACA,WAAK0lB,MAAL,GAAc,IAAd;AACA,WAAKC,KAAL,GAAa,IAAb;AACA,WAAKF,QAAL,GAAgB,IAAhB;AACA,WAAKhe,IAAL,GAAY,IAAZ;AACA,WAAK8e,IAAL,GAAY,IAAZ;AACD,KA5C4E,CA8C7E;AAEA;AACA;;;AACA,QAAIstC,eAAe,GAAG,mBAAtB;AAAA,QACIC,WAAW,GAAG,UADlB;AAAA,QAGI;AACA;AACAC,IAAAA,MAAM,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,IAA1B,EAAgC,IAAhC,EAAsC,IAAtC,CALb;AAAA,QAOI;AACAC,IAAAA,MAAM,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,IAAhB,EAAsB,GAAtB,EAA2B,GAA3B,EAAgCnyC,MAAhC,CAAuCkyC,MAAvC,CARb;AAAA,QAUI;AACAE,IAAAA,UAAU,GAAG,CAAC,IAAD,EAAOpyC,MAAP,CAAcmyC,MAAd,CAXjB;AAAA,QAYI;AACA;AACA;AACA;AACAE,IAAAA,YAAY,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0BryC,MAA1B,CAAiCoyC,UAAjC,CAhBnB;AAAA,QAiBIE,eAAe,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAjBtB;AAAA,QAkBIC,cAAc,GAAG,GAlBrB;AAAA,QAmBIC,mBAAmB,GAAG,uBAnB1B;AAAA,QAoBIC,iBAAiB,GAAG,6BApBxB;AAAA,QAqBI;AACAC,IAAAA,cAAc,GAAG;AACf,oBAAc,IADC;AAEf,qBAAe;AAFA,KAtBrB;AAAA,QA0BI;AACAC,IAAAA,gBAAgB,GAAG;AACjB,oBAAc,IADG;AAEjB,qBAAe;AAFE,KA3BvB;AAAA,QA+BI;AACAC,IAAAA,eAAe,GAAG;AAChB,cAAQ,IADQ;AAEhB,eAAS,IAFO;AAGhB,aAAO,IAHS;AAIhB,gBAAU,IAJM;AAKhB,cAAQ,IALQ;AAMhB,eAAS,IANO;AAOhB,gBAAU,IAPM;AAQhB,cAAQ,IARQ;AAShB,iBAAW,IATK;AAUhB,eAAS;AAVO,KAhCtB;AAAA,QA4CIvvD,WAAW,GAAG7I,OAAO,CAAC,aAAD,CA5CzB;;AA8CA,aAASyoB,QAAT,CAAkB7f,GAAlB,EAAuByvD,gBAAvB,EAAyCC,iBAAzC,EAA4D;AAC1D,UAAI1vD,GAAG,IAAI44C,QAAQ,CAAC54C,GAAD,CAAf,IAAwBA,GAAG,YAAY0uD,GAA3C,EAAgD,OAAO1uD,GAAP;AAEhD,UAAI3I,CAAC,GAAG,IAAIq3D,GAAJ,EAAR;AACAr3D,MAAAA,CAAC,CAACsL,KAAF,CAAQ3C,GAAR,EAAayvD,gBAAb,EAA+BC,iBAA/B;AACA,aAAOr4D,CAAP;AACD;;AAEDq3D,IAAAA,GAAG,CAACx0D,SAAJ,CAAcyI,KAAd,GAAsB,UAAS3C,GAAT,EAAcyvD,gBAAd,EAAgCC,iBAAhC,EAAmD;AACvE,UAAI,CAACC,QAAQ,CAAC3vD,GAAD,CAAb,EAAoB;AAClB,cAAM,IAAIowC,SAAJ,CAAc,2CAA2C,OAAOpwC,GAAhE,CAAN;AACD;;AAED,UAAIggC,IAAI,GAAGhgC,GAAX,CALuE,CAOvE;AACA;;AACAggC,MAAAA,IAAI,GAAGA,IAAI,CAACiC,IAAL,EAAP;AAEA,UAAI2tB,KAAK,GAAGhB,eAAe,CAACiB,IAAhB,CAAqB7vB,IAArB,CAAZ;;AACA,UAAI4vB,KAAJ,EAAW;AACTA,QAAAA,KAAK,GAAGA,KAAK,CAAC,CAAD,CAAb;AACA,YAAIE,UAAU,GAAGF,KAAK,CAACp2D,WAAN,EAAjB;AACA,aAAKumB,QAAL,GAAgB+vC,UAAhB;AACA9vB,QAAAA,IAAI,GAAGA,IAAI,CAAC1pB,MAAL,CAAYs5C,KAAK,CAACh4D,MAAlB,CAAP;AACD,OAjBsE,CAmBvE;AACA;AACA;AACA;;;AACA,UAAI83D,iBAAiB,IAAIE,KAArB,IAA8B5vB,IAAI,CAAC/iB,KAAL,CAAW,sBAAX,CAAlC,EAAsE;AACpE,YAAI0xC,OAAO,GAAG3uB,IAAI,CAAC1pB,MAAL,CAAY,CAAZ,EAAe,CAAf,MAAsB,IAApC;;AACA,YAAIq4C,OAAO,IAAI,EAAEiB,KAAK,IAAIL,gBAAgB,CAACK,KAAD,CAA3B,CAAf,EAAoD;AAClD5vB,UAAAA,IAAI,GAAGA,IAAI,CAAC1pB,MAAL,CAAY,CAAZ,CAAP;AACA,eAAKq4C,OAAL,GAAe,IAAf;AACD;AACF;;AAED,UAAI,CAACY,gBAAgB,CAACK,KAAD,CAAjB,KACCjB,OAAO,IAAKiB,KAAK,IAAI,CAACJ,eAAe,CAACI,KAAD,CADtC,CAAJ,EACqD;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA,YAAIG,OAAO,GAAG,CAAC,CAAf;;AACA,aAAK,IAAI94D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGi4D,eAAe,CAACt3D,MAApC,EAA4CX,CAAC,EAA7C,EAAiD;AAC/C,cAAI+4D,GAAG,GAAGhwB,IAAI,CAAC/lC,OAAL,CAAai1D,eAAe,CAACj4D,CAAD,CAA5B,CAAV;AACA,cAAI+4D,GAAG,KAAK,CAAC,CAAT,KAAeD,OAAO,KAAK,CAAC,CAAb,IAAkBC,GAAG,GAAGD,OAAvC,CAAJ,EACEA,OAAO,GAAGC,GAAV;AACH,SAvBkD,CAyBnD;AACA;;;AACA,YAAIjwB,IAAJ,EAAUkwB,MAAV;;AACA,YAAIF,OAAO,KAAK,CAAC,CAAjB,EAAoB;AAClB;AACAE,UAAAA,MAAM,GAAGjwB,IAAI,CAAC2S,WAAL,CAAiB,GAAjB,CAAT;AACD,SAHD,MAGO;AACL;AACA;AACAsd,UAAAA,MAAM,GAAGjwB,IAAI,CAAC2S,WAAL,CAAiB,GAAjB,EAAsBod,OAAtB,CAAT;AACD,SAnCkD,CAqCnD;AACA;;;AACA,YAAIE,MAAM,KAAK,CAAC,CAAhB,EAAmB;AACjBlwB,UAAAA,IAAI,GAAGC,IAAI,CAAC/yB,KAAL,CAAW,CAAX,EAAcgjD,MAAd,CAAP;AACAjwB,UAAAA,IAAI,GAAGA,IAAI,CAAC/yB,KAAL,CAAWgjD,MAAM,GAAG,CAApB,CAAP;AACA,eAAKlwB,IAAL,GAAYoB,kBAAkB,CAACpB,IAAD,CAA9B;AACD,SA3CkD,CA6CnD;;;AACAgwB,QAAAA,OAAO,GAAG,CAAC,CAAX;;AACA,aAAK,IAAI94D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGg4D,YAAY,CAACr3D,MAAjC,EAAyCX,CAAC,EAA1C,EAA8C;AAC5C,cAAI+4D,GAAG,GAAGhwB,IAAI,CAAC/lC,OAAL,CAAag1D,YAAY,CAACh4D,CAAD,CAAzB,CAAV;AACA,cAAI+4D,GAAG,KAAK,CAAC,CAAT,KAAeD,OAAO,KAAK,CAAC,CAAb,IAAkBC,GAAG,GAAGD,OAAvC,CAAJ,EACEA,OAAO,GAAGC,GAAV;AACH,SAnDkD,CAoDnD;;;AACA,YAAID,OAAO,KAAK,CAAC,CAAjB,EACEA,OAAO,GAAG/vB,IAAI,CAACpoC,MAAf;AAEF,aAAKshB,IAAL,GAAY8mB,IAAI,CAAC/yB,KAAL,CAAW,CAAX,EAAc8iD,OAAd,CAAZ;AACA/vB,QAAAA,IAAI,GAAGA,IAAI,CAAC/yB,KAAL,CAAW8iD,OAAX,CAAP,CAzDmD,CA2DnD;;AACA,aAAKG,SAAL,GA5DmD,CA8DnD;AACA;;AACA,aAAKx0C,QAAL,GAAgB,KAAKA,QAAL,IAAiB,EAAjC,CAhEmD,CAkEnD;AACA;;AACA,YAAIy0C,YAAY,GAAG,KAAKz0C,QAAL,CAAc,CAAd,MAAqB,GAArB,IACf,KAAKA,QAAL,CAAc,KAAKA,QAAL,CAAc9jB,MAAd,GAAuB,CAArC,MAA4C,GADhD,CApEmD,CAuEnD;;AACA,YAAI,CAACu4D,YAAL,EAAmB;AACjB,cAAIC,SAAS,GAAG,KAAK10C,QAAL,CAAcrP,KAAd,CAAoB,IAApB,CAAhB;;AACA,eAAK,IAAIpV,CAAC,GAAG,CAAR,EAAWo5D,CAAC,GAAGD,SAAS,CAACx4D,MAA9B,EAAsCX,CAAC,GAAGo5D,CAA1C,EAA6Cp5D,CAAC,EAA9C,EAAkD;AAChD,gBAAIguC,IAAI,GAAGmrB,SAAS,CAACn5D,CAAD,CAApB;AACA,gBAAI,CAACguC,IAAL,EAAW;;AACX,gBAAI,CAACA,IAAI,CAAChoB,KAAL,CAAWmyC,mBAAX,CAAL,EAAsC;AACpC,kBAAIkB,OAAO,GAAG,EAAd;;AACA,mBAAK,IAAIrd,CAAC,GAAG,CAAR,EAAWr0C,CAAC,GAAGqmC,IAAI,CAACrtC,MAAzB,EAAiCq7C,CAAC,GAAGr0C,CAArC,EAAwCq0C,CAAC,EAAzC,EAA6C;AAC3C,oBAAIhO,IAAI,CAACD,UAAL,CAAgBiO,CAAhB,IAAqB,GAAzB,EAA8B;AAC5B;AACA;AACA;AACAqd,kBAAAA,OAAO,IAAI,GAAX;AACD,iBALD,MAKO;AACLA,kBAAAA,OAAO,IAAIrrB,IAAI,CAACgO,CAAD,CAAf;AACD;AACF,eAXmC,CAYpC;;;AACA,kBAAI,CAACqd,OAAO,CAACrzC,KAAR,CAAcmyC,mBAAd,CAAL,EAAyC;AACvC,oBAAImB,UAAU,GAAGH,SAAS,CAACnjD,KAAV,CAAgB,CAAhB,EAAmBhW,CAAnB,CAAjB;AACA,oBAAIu5D,OAAO,GAAGJ,SAAS,CAACnjD,KAAV,CAAgBhW,CAAC,GAAG,CAApB,CAAd;AACA,oBAAIw5D,GAAG,GAAGxrB,IAAI,CAAChoB,KAAL,CAAWoyC,iBAAX,CAAV;;AACA,oBAAIoB,GAAJ,EAAS;AACPF,kBAAAA,UAAU,CAAC5qD,IAAX,CAAgB8qD,GAAG,CAAC,CAAD,CAAnB;AACAD,kBAAAA,OAAO,CAACttD,OAAR,CAAgButD,GAAG,CAAC,CAAD,CAAnB;AACD;;AACD,oBAAID,OAAO,CAAC54D,MAAZ,EAAoB;AAClBooC,kBAAAA,IAAI,GAAG,MAAMwwB,OAAO,CAAC7jD,IAAR,CAAa,GAAb,CAAN,GAA0BqzB,IAAjC;AACD;;AACD,qBAAKtkB,QAAL,GAAgB60C,UAAU,CAAC5jD,IAAX,CAAgB,GAAhB,CAAhB;AACA;AACD;AACF;AACF;AACF;;AAED,YAAI,KAAK+O,QAAL,CAAc9jB,MAAd,GAAuBu3D,cAA3B,EAA2C;AACzC,eAAKzzC,QAAL,GAAgB,EAAhB;AACD,SAFD,MAEO;AACL;AACA,eAAKA,QAAL,GAAgB,KAAKA,QAAL,CAAcliB,WAAd,EAAhB;AACD;;AAED,YAAI,CAAC22D,YAAL,EAAmB;AACjB;AACA;AACA;AACA;AACA,cAAIO,WAAW,GAAG,KAAKh1C,QAAL,CAAcrP,KAAd,CAAoB,GAApB,CAAlB;AACA,cAAIskD,MAAM,GAAG,EAAb;;AACA,eAAK,IAAI15D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGy5D,WAAW,CAAC94D,MAAhC,EAAwC,EAAEX,CAA1C,EAA6C;AAC3C,gBAAIwG,CAAC,GAAGizD,WAAW,CAACz5D,CAAD,CAAnB;AACA05D,YAAAA,MAAM,CAAChrD,IAAP,CAAYlI,CAAC,CAACwf,KAAF,CAAQ,gBAAR,IACR,SAAS8sC,QAAQ,CAAC5/B,MAAT,CAAgB1sB,CAAhB,CADD,GACsBA,CADlC;AAED;;AACD,eAAKie,QAAL,GAAgBi1C,MAAM,CAAChkD,IAAP,CAAY,GAAZ,CAAhB;AACD;;AAED,YAAIlV,CAAC,GAAG,KAAKqoB,IAAL,GAAY,MAAM,KAAKA,IAAvB,GAA8B,EAAtC;AACA,YAAIiiB,CAAC,GAAG,KAAKrmB,QAAL,IAAiB,EAAzB;AACA,aAAKxC,IAAL,GAAY6oB,CAAC,GAAGtqC,CAAhB;AACA,aAAK6pB,IAAL,IAAa,KAAKpI,IAAlB,CArImD,CAuInD;AACA;;AACA,YAAIi3C,YAAJ,EAAkB;AAChB,eAAKz0C,QAAL,GAAgB,KAAKA,QAAL,CAAcpF,MAAd,CAAqB,CAArB,EAAwB,KAAKoF,QAAL,CAAc9jB,MAAd,GAAuB,CAA/C,CAAhB;;AACA,cAAIooC,IAAI,CAAC,CAAD,CAAJ,KAAY,GAAhB,EAAqB;AACnBA,YAAAA,IAAI,GAAG,MAAMA,IAAb;AACD;AACF;AACF,OA/KsE,CAiLvE;AACA;;;AACA,UAAI,CAACsvB,cAAc,CAACQ,UAAD,CAAnB,EAAiC;AAE/B;AACA;AACA;AACA,aAAK,IAAI74D,CAAC,GAAG,CAAR,EAAWo5D,CAAC,GAAGrB,UAAU,CAACp3D,MAA/B,EAAuCX,CAAC,GAAGo5D,CAA3C,EAA8Cp5D,CAAC,EAA/C,EAAmD;AACjD,cAAI25D,EAAE,GAAG5B,UAAU,CAAC/3D,CAAD,CAAnB;AACA,cAAI45D,GAAG,GAAGhsB,kBAAkB,CAAC+rB,EAAD,CAA5B;;AACA,cAAIC,GAAG,KAAKD,EAAZ,EAAgB;AACdC,YAAAA,GAAG,GAAG/rB,MAAM,CAAC8rB,EAAD,CAAZ;AACD;;AACD5wB,UAAAA,IAAI,GAAGA,IAAI,CAAC3zB,KAAL,CAAWukD,EAAX,EAAejkD,IAAf,CAAoBkkD,GAApB,CAAP;AACD;AACF,OAhMsE,CAmMvE;;;AACA,UAAI91D,IAAI,GAAGilC,IAAI,CAAC/lC,OAAL,CAAa,GAAb,CAAX;;AACA,UAAIc,IAAI,KAAK,CAAC,CAAd,EAAiB;AACf;AACA,aAAKA,IAAL,GAAYilC,IAAI,CAAC1pB,MAAL,CAAYvb,IAAZ,CAAZ;AACAilC,QAAAA,IAAI,GAAGA,IAAI,CAAC/yB,KAAL,CAAW,CAAX,EAAclS,IAAd,CAAP;AACD;;AACD,UAAI+1D,EAAE,GAAG9wB,IAAI,CAAC/lC,OAAL,CAAa,GAAb,CAAT;;AACA,UAAI62D,EAAE,KAAK,CAAC,CAAZ,EAAe;AACb,aAAKrwC,MAAL,GAAcuf,IAAI,CAAC1pB,MAAL,CAAYw6C,EAAZ,CAAd;AACA,aAAKpwC,KAAL,GAAasf,IAAI,CAAC1pB,MAAL,CAAYw6C,EAAE,GAAG,CAAjB,CAAb;;AACA,YAAIrB,gBAAJ,EAAsB;AACpB,eAAK/uC,KAAL,GAAazgB,WAAW,CAAC0C,KAAZ,CAAkB,KAAK+d,KAAvB,CAAb;AACD;;AACDsf,QAAAA,IAAI,GAAGA,IAAI,CAAC/yB,KAAL,CAAW,CAAX,EAAc6jD,EAAd,CAAP;AACD,OAPD,MAOO,IAAIrB,gBAAJ,EAAsB;AAC3B;AACA,aAAKhvC,MAAL,GAAc,EAAd;AACA,aAAKC,KAAL,GAAa,EAAb;AACD;;AACD,UAAIsf,IAAJ,EAAU,KAAKxf,QAAL,GAAgBwf,IAAhB;;AACV,UAAIwvB,eAAe,CAACM,UAAD,CAAf,IACA,KAAKp0C,QADL,IACiB,CAAC,KAAK8E,QAD3B,EACqC;AACnC,aAAKA,QAAL,GAAgB,GAAhB;AACD,OA3NsE,CA6NvE;;;AACA,UAAI,KAAKA,QAAL,IAAiB,KAAKC,MAA1B,EAAkC;AAChC,YAAIhpB,CAAC,GAAG,KAAK+oB,QAAL,IAAiB,EAAzB;AACA,YAAI/iB,CAAC,GAAG,KAAKgjB,MAAL,IAAe,EAAvB;AACA,aAAKje,IAAL,GAAY/K,CAAC,GAAGgG,CAAhB;AACD,OAlOsE,CAoOvE;;;AACA,WAAK6jB,IAAL,GAAY,KAAKmI,MAAL,EAAZ;AACA,aAAO,IAAP;AACD,KAvOD,CAxG6E,CAiV7E;;;AACA,aAASyW,SAAT,CAAmBla,GAAnB,EAAwB;AACtB;AACA;AACA;AACA;AACA,UAAI2pC,QAAQ,CAAC3pC,GAAD,CAAZ,EAAmBA,GAAG,GAAGnG,QAAQ,CAACmG,GAAD,CAAd;AACnB,UAAI,EAAEA,GAAG,YAAY0oC,GAAjB,CAAJ,EAA2B,OAAOA,GAAG,CAACx0D,SAAJ,CAAcuvB,MAAd,CAAqB9xB,IAArB,CAA0BquB,GAA1B,CAAP;AAC3B,aAAOA,GAAG,CAACyD,MAAJ,EAAP;AACD;;AAEDilC,IAAAA,GAAG,CAACx0D,SAAJ,CAAcuvB,MAAd,GAAuB,YAAW;AAChC,UAAIsW,IAAI,GAAG,KAAKA,IAAL,IAAa,EAAxB;;AACA,UAAIA,IAAJ,EAAU;AACRA,QAAAA,IAAI,GAAG8E,kBAAkB,CAAC9E,IAAD,CAAzB;AACAA,QAAAA,IAAI,GAAGA,IAAI,CAAC3b,OAAL,CAAa,MAAb,EAAqB,GAArB,CAAP;AACA2b,QAAAA,IAAI,IAAI,GAAR;AACD;;AAED,UAAIhgB,QAAQ,GAAG,KAAKA,QAAL,IAAiB,EAAhC;AAAA,UACIS,QAAQ,GAAG,KAAKA,QAAL,IAAiB,EADhC;AAAA,UAEIzlB,IAAI,GAAG,KAAKA,IAAL,IAAa,EAFxB;AAAA,UAGIme,IAAI,GAAG,KAHX;AAAA,UAIIwH,KAAK,GAAG,EAJZ;;AAMA,UAAI,KAAKxH,IAAT,EAAe;AACbA,QAAAA,IAAI,GAAG6mB,IAAI,GAAG,KAAK7mB,IAAnB;AACD,OAFD,MAEO,IAAI,KAAKwC,QAAT,EAAmB;AACxBxC,QAAAA,IAAI,GAAG6mB,IAAI,IAAI,KAAKrkB,QAAL,CAAczhB,OAAd,CAAsB,GAAtB,MAA+B,CAAC,CAAhC,GACX,KAAKyhB,QADM,GAEX,MAAM,KAAKA,QAAX,GAAsB,GAFf,CAAX;;AAGA,YAAI,KAAKoE,IAAT,EAAe;AACb5G,UAAAA,IAAI,IAAI,MAAM,KAAK4G,IAAnB;AACD;AACF;;AAED,UAAI,KAAKY,KAAL,IACAk4B,QAAQ,CAAC,KAAKl4B,KAAN,CADR,IAEApoB,MAAM,CAAC4I,IAAP,CAAY,KAAKwf,KAAjB,EAAwB9oB,MAF5B,EAEoC;AAClC8oB,QAAAA,KAAK,GAAGzgB,WAAW,CAAC+iB,SAAZ,CAAsB,KAAKtC,KAA3B,CAAR;AACD;;AAED,UAAID,MAAM,GAAG,KAAKA,MAAL,IAAgBC,KAAK,IAAK,MAAMA,KAAhC,IAA2C,EAAxD;AAEA,UAAIX,QAAQ,IAAIA,QAAQ,CAACzJ,MAAT,CAAgB,CAAC,CAAjB,MAAwB,GAAxC,EAA6CyJ,QAAQ,IAAI,GAAZ,CAjCb,CAmChC;AACA;;AACA,UAAI,KAAK4uC,OAAL,IACA,CAAC,CAAC5uC,QAAD,IAAayvC,eAAe,CAACzvC,QAAD,CAA7B,KAA4C7G,IAAI,KAAK,KADzD,EACgE;AAC9DA,QAAAA,IAAI,GAAG,QAAQA,IAAI,IAAI,EAAhB,CAAP;AACA,YAAIsH,QAAQ,IAAIA,QAAQ,CAACuwC,MAAT,CAAgB,CAAhB,MAAuB,GAAvC,EAA4CvwC,QAAQ,GAAG,MAAMA,QAAjB;AAC7C,OAJD,MAIO,IAAI,CAACtH,IAAL,EAAW;AAChBA,QAAAA,IAAI,GAAG,EAAP;AACD;;AAED,UAAIne,IAAI,IAAIA,IAAI,CAACg2D,MAAL,CAAY,CAAZ,MAAmB,GAA/B,EAAoCh2D,IAAI,GAAG,MAAMA,IAAb;AACpC,UAAI0lB,MAAM,IAAIA,MAAM,CAACswC,MAAP,CAAc,CAAd,MAAqB,GAAnC,EAAwCtwC,MAAM,GAAG,MAAMA,MAAf;AAExCD,MAAAA,QAAQ,GAAGA,QAAQ,CAAC4D,OAAT,CAAiB,OAAjB,EAA0B,UAASnH,KAAT,EAAgB;AACnD,eAAO4nB,kBAAkB,CAAC5nB,KAAD,CAAzB;AACD,OAFU,CAAX;AAGAwD,MAAAA,MAAM,GAAGA,MAAM,CAAC2D,OAAP,CAAe,GAAf,EAAoB,KAApB,CAAT;AAEA,aAAOrE,QAAQ,GAAG7G,IAAX,GAAkBsH,QAAlB,GAA6BC,MAA7B,GAAsC1lB,IAA7C;AACD,KAtDD;;AAwDA,aAASwzD,UAAT,CAAoByC,MAApB,EAA4BC,QAA5B,EAAsC;AACpC,aAAOpxC,QAAQ,CAACmxC,MAAD,EAAS,KAAT,EAAgB,IAAhB,CAAR,CAA8B7uD,OAA9B,CAAsC8uD,QAAtC,CAAP;AACD;;AAEDvC,IAAAA,GAAG,CAACx0D,SAAJ,CAAciI,OAAd,GAAwB,UAAS8uD,QAAT,EAAmB;AACzC,aAAO,KAAKzC,aAAL,CAAmB3uC,QAAQ,CAACoxC,QAAD,EAAW,KAAX,EAAkB,IAAlB,CAA3B,EAAoDxnC,MAApD,EAAP;AACD,KAFD;;AAIA,aAASglC,gBAAT,CAA0BuC,MAA1B,EAAkCC,QAAlC,EAA4C;AAC1C,UAAI,CAACD,MAAL,EAAa,OAAOC,QAAP;AACb,aAAOpxC,QAAQ,CAACmxC,MAAD,EAAS,KAAT,EAAgB,IAAhB,CAAR,CAA8BxC,aAA9B,CAA4CyC,QAA5C,CAAP;AACD;;AAEDvC,IAAAA,GAAG,CAACx0D,SAAJ,CAAcs0D,aAAd,GAA8B,UAASyC,QAAT,EAAmB;AAC/C,UAAItB,QAAQ,CAACsB,QAAD,CAAZ,EAAwB;AACtB,YAAIC,GAAG,GAAG,IAAIxC,GAAJ,EAAV;AACAwC,QAAAA,GAAG,CAACvuD,KAAJ,CAAUsuD,QAAV,EAAoB,KAApB,EAA2B,IAA3B;AACAA,QAAAA,QAAQ,GAAGC,GAAX;AACD;;AAED,UAAI3iD,MAAM,GAAG,IAAImgD,GAAJ,EAAb;AACAp2D,MAAAA,MAAM,CAAC4I,IAAP,CAAY,IAAZ,EAAkB6kB,OAAlB,CAA0B,UAASnnB,CAAT,EAAY;AACpC2P,QAAAA,MAAM,CAAC3P,CAAD,CAAN,GAAY,KAAKA,CAAL,CAAZ;AACD,OAFD,EAEG,IAFH,EAR+C,CAY/C;AACA;;AACA2P,MAAAA,MAAM,CAACxT,IAAP,GAAck2D,QAAQ,CAACl2D,IAAvB,CAd+C,CAgB/C;;AACA,UAAIk2D,QAAQ,CAAC3vC,IAAT,KAAkB,EAAtB,EAA0B;AACxB/S,QAAAA,MAAM,CAAC+S,IAAP,GAAc/S,MAAM,CAACkb,MAAP,EAAd;AACA,eAAOlb,MAAP;AACD,OApB8C,CAsB/C;;;AACA,UAAI0iD,QAAQ,CAACtC,OAAT,IAAoB,CAACsC,QAAQ,CAAClxC,QAAlC,EAA4C;AAC1C;AACAznB,QAAAA,MAAM,CAAC4I,IAAP,CAAY+vD,QAAZ,EAAsBlrC,OAAtB,CAA8B,UAASnnB,CAAT,EAAY;AACxC,cAAIA,CAAC,KAAK,UAAV,EACE2P,MAAM,CAAC3P,CAAD,CAAN,GAAYqyD,QAAQ,CAACryD,CAAD,CAApB;AACH,SAHD,EAF0C,CAO1C;;AACA,YAAI4wD,eAAe,CAACjhD,MAAM,CAACwR,QAAR,CAAf,IACAxR,MAAM,CAACmN,QADP,IACmB,CAACnN,MAAM,CAACiS,QAD/B,EACyC;AACvCjS,UAAAA,MAAM,CAAC/L,IAAP,GAAc+L,MAAM,CAACiS,QAAP,GAAkB,GAAhC;AACD;;AAEDjS,QAAAA,MAAM,CAAC+S,IAAP,GAAc/S,MAAM,CAACkb,MAAP,EAAd;AACA,eAAOlb,MAAP;AACD;;AAED,UAAI0iD,QAAQ,CAAClxC,QAAT,IAAqBkxC,QAAQ,CAAClxC,QAAT,KAAsBxR,MAAM,CAACwR,QAAtD,EAAgE;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAI,CAACyvC,eAAe,CAACyB,QAAQ,CAAClxC,QAAV,CAApB,EAAyC;AACvCznB,UAAAA,MAAM,CAAC4I,IAAP,CAAY+vD,QAAZ,EAAsBlrC,OAAtB,CAA8B,UAASnnB,CAAT,EAAY;AACxC2P,YAAAA,MAAM,CAAC3P,CAAD,CAAN,GAAYqyD,QAAQ,CAACryD,CAAD,CAApB;AACD,WAFD;AAGA2P,UAAAA,MAAM,CAAC+S,IAAP,GAAc/S,MAAM,CAACkb,MAAP,EAAd;AACA,iBAAOlb,MAAP;AACD;;AAEDA,QAAAA,MAAM,CAACwR,QAAP,GAAkBkxC,QAAQ,CAAClxC,QAA3B;;AACA,YAAI,CAACkxC,QAAQ,CAAC/3C,IAAV,IAAkB,CAACq2C,gBAAgB,CAAC0B,QAAQ,CAAClxC,QAAV,CAAvC,EAA4D;AAC1D,cAAIoxC,OAAO,GAAG,CAACF,QAAQ,CAACzwC,QAAT,IAAqB,EAAtB,EAA0BnU,KAA1B,CAAgC,GAAhC,CAAd;;AACA,iBAAO8kD,OAAO,CAACv5D,MAAR,IAAkB,EAAEq5D,QAAQ,CAAC/3C,IAAT,GAAgBi4C,OAAO,CAAC9yD,KAAR,EAAlB,CAAzB,CAA4D;;AAC5D,cAAI,CAAC4yD,QAAQ,CAAC/3C,IAAd,EAAoB+3C,QAAQ,CAAC/3C,IAAT,GAAgB,EAAhB;AACpB,cAAI,CAAC+3C,QAAQ,CAACv1C,QAAd,EAAwBu1C,QAAQ,CAACv1C,QAAT,GAAoB,EAApB;AACxB,cAAIy1C,OAAO,CAAC,CAAD,CAAP,KAAe,EAAnB,EAAuBA,OAAO,CAACjuD,OAAR,CAAgB,EAAhB;AACvB,cAAIiuD,OAAO,CAACv5D,MAAR,GAAiB,CAArB,EAAwBu5D,OAAO,CAACjuD,OAAR,CAAgB,EAAhB;AACxBqL,UAAAA,MAAM,CAACiS,QAAP,GAAkB2wC,OAAO,CAACxkD,IAAR,CAAa,GAAb,CAAlB;AACD,SARD,MAQO;AACL4B,UAAAA,MAAM,CAACiS,QAAP,GAAkBywC,QAAQ,CAACzwC,QAA3B;AACD;;AACDjS,QAAAA,MAAM,CAACkS,MAAP,GAAgBwwC,QAAQ,CAACxwC,MAAzB;AACAlS,QAAAA,MAAM,CAACmS,KAAP,GAAeuwC,QAAQ,CAACvwC,KAAxB;AACAnS,QAAAA,MAAM,CAAC2K,IAAP,GAAc+3C,QAAQ,CAAC/3C,IAAT,IAAiB,EAA/B;AACA3K,QAAAA,MAAM,CAACwxB,IAAP,GAAckxB,QAAQ,CAAClxB,IAAvB;AACAxxB,QAAAA,MAAM,CAACmN,QAAP,GAAkBu1C,QAAQ,CAACv1C,QAAT,IAAqBu1C,QAAQ,CAAC/3C,IAAhD;AACA3K,QAAAA,MAAM,CAACuR,IAAP,GAAcmxC,QAAQ,CAACnxC,IAAvB,CAlC8D,CAmC9D;;AACA,YAAIvR,MAAM,CAACiS,QAAP,IAAmBjS,MAAM,CAACkS,MAA9B,EAAsC;AACpC,cAAIhpB,CAAC,GAAG8W,MAAM,CAACiS,QAAP,IAAmB,EAA3B;AACA,cAAI/iB,CAAC,GAAG8Q,MAAM,CAACkS,MAAP,IAAiB,EAAzB;AACAlS,UAAAA,MAAM,CAAC/L,IAAP,GAAc/K,CAAC,GAAGgG,CAAlB;AACD;;AACD8Q,QAAAA,MAAM,CAACogD,OAAP,GAAiBpgD,MAAM,CAACogD,OAAP,IAAkBsC,QAAQ,CAACtC,OAA5C;AACApgD,QAAAA,MAAM,CAAC+S,IAAP,GAAc/S,MAAM,CAACkb,MAAP,EAAd;AACA,eAAOlb,MAAP;AACD;;AAED,UAAI6iD,WAAW,GAAI7iD,MAAM,CAACiS,QAAP,IAAmBjS,MAAM,CAACiS,QAAP,CAAgBuwC,MAAhB,CAAuB,CAAvB,MAA8B,GAApE;AAAA,UACIM,QAAQ,GACJJ,QAAQ,CAAC/3C,IAAT,IACA+3C,QAAQ,CAACzwC,QAAT,IAAqBywC,QAAQ,CAACzwC,QAAT,CAAkBuwC,MAAlB,CAAyB,CAAzB,MAAgC,GAH7D;AAAA,UAKIO,UAAU,GAAID,QAAQ,IAAID,WAAZ,IACC7iD,MAAM,CAAC2K,IAAP,IAAe+3C,QAAQ,CAACzwC,QAN3C;AAAA,UAOI+wC,aAAa,GAAGD,UAPpB;AAAA,UAQIE,OAAO,GAAGjjD,MAAM,CAACiS,QAAP,IAAmBjS,MAAM,CAACiS,QAAP,CAAgBnU,KAAhB,CAAsB,GAAtB,CAAnB,IAAiD,EAR/D;AAAA,UASI8kD,OAAO,GAAGF,QAAQ,CAACzwC,QAAT,IAAqBywC,QAAQ,CAACzwC,QAAT,CAAkBnU,KAAlB,CAAwB,GAAxB,CAArB,IAAqD,EATnE;AAAA,UAUIolD,SAAS,GAAGljD,MAAM,CAACwR,QAAP,IAAmB,CAACyvC,eAAe,CAACjhD,MAAM,CAACwR,QAAR,CAVnD,CAtF+C,CAkG/C;AACA;AACA;AACA;AACA;;AACA,UAAI0xC,SAAJ,EAAe;AACbljD,QAAAA,MAAM,CAACmN,QAAP,GAAkB,EAAlB;AACAnN,QAAAA,MAAM,CAACuR,IAAP,GAAc,IAAd;;AACA,YAAIvR,MAAM,CAAC2K,IAAX,EAAiB;AACf,cAAIs4C,OAAO,CAAC,CAAD,CAAP,KAAe,EAAnB,EAAuBA,OAAO,CAAC,CAAD,CAAP,GAAajjD,MAAM,CAAC2K,IAApB,CAAvB,KACKs4C,OAAO,CAACtuD,OAAR,CAAgBqL,MAAM,CAAC2K,IAAvB;AACN;;AACD3K,QAAAA,MAAM,CAAC2K,IAAP,GAAc,EAAd;;AACA,YAAI+3C,QAAQ,CAAClxC,QAAb,EAAuB;AACrBkxC,UAAAA,QAAQ,CAACv1C,QAAT,GAAoB,IAApB;AACAu1C,UAAAA,QAAQ,CAACnxC,IAAT,GAAgB,IAAhB;;AACA,cAAImxC,QAAQ,CAAC/3C,IAAb,EAAmB;AACjB,gBAAIi4C,OAAO,CAAC,CAAD,CAAP,KAAe,EAAnB,EAAuBA,OAAO,CAAC,CAAD,CAAP,GAAaF,QAAQ,CAAC/3C,IAAtB,CAAvB,KACKi4C,OAAO,CAACjuD,OAAR,CAAgB+tD,QAAQ,CAAC/3C,IAAzB;AACN;;AACD+3C,UAAAA,QAAQ,CAAC/3C,IAAT,GAAgB,IAAhB;AACD;;AACDo4C,QAAAA,UAAU,GAAGA,UAAU,KAAKH,OAAO,CAAC,CAAD,CAAP,KAAe,EAAf,IAAqBK,OAAO,CAAC,CAAD,CAAP,KAAe,EAAzC,CAAvB;AACD;;AAED,UAAIH,QAAJ,EAAc;AACZ;AACA9iD,QAAAA,MAAM,CAAC2K,IAAP,GAAe+3C,QAAQ,CAAC/3C,IAAT,IAAiB+3C,QAAQ,CAAC/3C,IAAT,KAAkB,EAApC,GACA+3C,QAAQ,CAAC/3C,IADT,GACgB3K,MAAM,CAAC2K,IADrC;AAEA3K,QAAAA,MAAM,CAACmN,QAAP,GAAmBu1C,QAAQ,CAACv1C,QAAT,IAAqBu1C,QAAQ,CAACv1C,QAAT,KAAsB,EAA5C,GACAu1C,QAAQ,CAACv1C,QADT,GACoBnN,MAAM,CAACmN,QAD7C;AAEAnN,QAAAA,MAAM,CAACkS,MAAP,GAAgBwwC,QAAQ,CAACxwC,MAAzB;AACAlS,QAAAA,MAAM,CAACmS,KAAP,GAAeuwC,QAAQ,CAACvwC,KAAxB;AACA8wC,QAAAA,OAAO,GAAGL,OAAV,CARY,CASZ;AACD,OAVD,MAUO,IAAIA,OAAO,CAACv5D,MAAZ,EAAoB;AACzB;AACA;AACA,YAAI,CAAC45D,OAAL,EAAcA,OAAO,GAAG,EAAV;AACdA,QAAAA,OAAO,CAAClkC,GAAR;AACAkkC,QAAAA,OAAO,GAAGA,OAAO,CAAC50C,MAAR,CAAeu0C,OAAf,CAAV;AACA5iD,QAAAA,MAAM,CAACkS,MAAP,GAAgBwwC,QAAQ,CAACxwC,MAAzB;AACAlS,QAAAA,MAAM,CAACmS,KAAP,GAAeuwC,QAAQ,CAACvwC,KAAxB;AACD,OARM,MAQA,IAAI,CAACgxC,iBAAiB,CAACT,QAAQ,CAACxwC,MAAV,CAAtB,EAAyC;AAC9C;AACA;AACA;AACA,YAAIgxC,SAAJ,EAAe;AACbljD,UAAAA,MAAM,CAACmN,QAAP,GAAkBnN,MAAM,CAAC2K,IAAP,GAAcs4C,OAAO,CAACnzD,KAAR,EAAhC,CADa,CAEb;AACA;AACA;;AACA,cAAIszD,UAAU,GAAGpjD,MAAM,CAAC2K,IAAP,IAAe3K,MAAM,CAAC2K,IAAP,CAAYjf,OAAZ,CAAoB,GAApB,IAA2B,CAA1C,GACAsU,MAAM,CAAC2K,IAAP,CAAY7M,KAAZ,CAAkB,GAAlB,CADA,GACyB,KAD1C;;AAEA,cAAIslD,UAAJ,EAAgB;AACdpjD,YAAAA,MAAM,CAACwxB,IAAP,GAAc4xB,UAAU,CAACtzD,KAAX,EAAd;AACAkQ,YAAAA,MAAM,CAAC2K,IAAP,GAAc3K,MAAM,CAACmN,QAAP,GAAkBi2C,UAAU,CAACtzD,KAAX,EAAhC;AACD;AACF;;AACDkQ,QAAAA,MAAM,CAACkS,MAAP,GAAgBwwC,QAAQ,CAACxwC,MAAzB;AACAlS,QAAAA,MAAM,CAACmS,KAAP,GAAeuwC,QAAQ,CAACvwC,KAAxB,CAjB8C,CAkB9C;;AACA,YAAI,CAACkxC,MAAM,CAACrjD,MAAM,CAACiS,QAAR,CAAP,IAA4B,CAACoxC,MAAM,CAACrjD,MAAM,CAACkS,MAAR,CAAvC,EAAwD;AACtDlS,UAAAA,MAAM,CAAC/L,IAAP,GAAc,CAAC+L,MAAM,CAACiS,QAAP,GAAkBjS,MAAM,CAACiS,QAAzB,GAAoC,EAArC,KACCjS,MAAM,CAACkS,MAAP,GAAgBlS,MAAM,CAACkS,MAAvB,GAAgC,EADjC,CAAd;AAED;;AACDlS,QAAAA,MAAM,CAAC+S,IAAP,GAAc/S,MAAM,CAACkb,MAAP,EAAd;AACA,eAAOlb,MAAP;AACD;;AAED,UAAI,CAACijD,OAAO,CAAC55D,MAAb,EAAqB;AACnB;AACA;AACA2W,QAAAA,MAAM,CAACiS,QAAP,GAAkB,IAAlB,CAHmB,CAInB;;AACA,YAAIjS,MAAM,CAACkS,MAAX,EAAmB;AACjBlS,UAAAA,MAAM,CAAC/L,IAAP,GAAc,MAAM+L,MAAM,CAACkS,MAA3B;AACD,SAFD,MAEO;AACLlS,UAAAA,MAAM,CAAC/L,IAAP,GAAc,IAAd;AACD;;AACD+L,QAAAA,MAAM,CAAC+S,IAAP,GAAc/S,MAAM,CAACkb,MAAP,EAAd;AACA,eAAOlb,MAAP;AACD,OApL8C,CAsL/C;AACA;AACA;;;AACA,UAAIsjD,IAAI,GAAGL,OAAO,CAACvkD,KAAR,CAAc,CAAC,CAAf,EAAkB,CAAlB,CAAX;AACA,UAAI6kD,gBAAgB,GAChB,CAACvjD,MAAM,CAAC2K,IAAP,IAAe+3C,QAAQ,CAAC/3C,IAAzB,MAAmC24C,IAAI,KAAK,GAAT,IAAgBA,IAAI,KAAK,IAA5D,KACAA,IAAI,KAAK,EAFb,CA1L+C,CA8L/C;AACA;;AACA,UAAIE,EAAE,GAAG,CAAT;;AACA,WAAK,IAAI96D,CAAC,GAAGu6D,OAAO,CAAC55D,MAArB,EAA6BX,CAAC,IAAI,CAAlC,EAAqCA,CAAC,EAAtC,EAA0C;AACxC46D,QAAAA,IAAI,GAAGL,OAAO,CAACv6D,CAAD,CAAd;;AACA,YAAI46D,IAAI,IAAI,GAAZ,EAAiB;AACfL,UAAAA,OAAO,CAACt5B,MAAR,CAAejhC,CAAf,EAAkB,CAAlB;AACD,SAFD,MAEO,IAAI46D,IAAI,KAAK,IAAb,EAAmB;AACxBL,UAAAA,OAAO,CAACt5B,MAAR,CAAejhC,CAAf,EAAkB,CAAlB;AACA86D,UAAAA,EAAE;AACH,SAHM,MAGA,IAAIA,EAAJ,EAAQ;AACbP,UAAAA,OAAO,CAACt5B,MAAR,CAAejhC,CAAf,EAAkB,CAAlB;AACA86D,UAAAA,EAAE;AACH;AACF,OA5M8C,CA8M/C;;;AACA,UAAI,CAACT,UAAD,IAAe,CAACC,aAApB,EAAmC;AACjC,eAAOQ,EAAE,EAAT,EAAaA,EAAb,EAAiB;AACfP,UAAAA,OAAO,CAACtuD,OAAR,CAAgB,IAAhB;AACD;AACF;;AAED,UAAIouD,UAAU,IAAIE,OAAO,CAAC,CAAD,CAAP,KAAe,EAA7B,KACC,CAACA,OAAO,CAAC,CAAD,CAAR,IAAeA,OAAO,CAAC,CAAD,CAAP,CAAWT,MAAX,CAAkB,CAAlB,MAAyB,GADzC,CAAJ,EACmD;AACjDS,QAAAA,OAAO,CAACtuD,OAAR,CAAgB,EAAhB;AACD;;AAED,UAAI4uD,gBAAgB,IAAKN,OAAO,CAAC7kD,IAAR,CAAa,GAAb,EAAkB2J,MAAlB,CAAyB,CAAC,CAA1B,MAAiC,GAA1D,EAAgE;AAC9Dk7C,QAAAA,OAAO,CAAC7rD,IAAR,CAAa,EAAb;AACD;;AAED,UAAIqsD,UAAU,GAAGR,OAAO,CAAC,CAAD,CAAP,KAAe,EAAf,IACZA,OAAO,CAAC,CAAD,CAAP,IAAcA,OAAO,CAAC,CAAD,CAAP,CAAWT,MAAX,CAAkB,CAAlB,MAAyB,GAD5C,CA9N+C,CAiO/C;;AACA,UAAIU,SAAJ,EAAe;AACbljD,QAAAA,MAAM,CAACmN,QAAP,GAAkBnN,MAAM,CAAC2K,IAAP,GAAc84C,UAAU,GAAG,EAAH,GACVR,OAAO,CAAC55D,MAAR,GAAiB45D,OAAO,CAACnzD,KAAR,EAAjB,GAAmC,EADnE,CADa,CAGb;AACA;AACA;;AACA,YAAIszD,UAAU,GAAGpjD,MAAM,CAAC2K,IAAP,IAAe3K,MAAM,CAAC2K,IAAP,CAAYjf,OAAZ,CAAoB,GAApB,IAA2B,CAA1C,GACAsU,MAAM,CAAC2K,IAAP,CAAY7M,KAAZ,CAAkB,GAAlB,CADA,GACyB,KAD1C;;AAEA,YAAIslD,UAAJ,EAAgB;AACdpjD,UAAAA,MAAM,CAACwxB,IAAP,GAAc4xB,UAAU,CAACtzD,KAAX,EAAd;AACAkQ,UAAAA,MAAM,CAAC2K,IAAP,GAAc3K,MAAM,CAACmN,QAAP,GAAkBi2C,UAAU,CAACtzD,KAAX,EAAhC;AACD;AACF;;AAEDizD,MAAAA,UAAU,GAAGA,UAAU,IAAK/iD,MAAM,CAAC2K,IAAP,IAAes4C,OAAO,CAAC55D,MAAnD;;AAEA,UAAI05D,UAAU,IAAI,CAACU,UAAnB,EAA+B;AAC7BR,QAAAA,OAAO,CAACtuD,OAAR,CAAgB,EAAhB;AACD;;AAED,UAAI,CAACsuD,OAAO,CAAC55D,MAAb,EAAqB;AACnB2W,QAAAA,MAAM,CAACiS,QAAP,GAAkB,IAAlB;AACAjS,QAAAA,MAAM,CAAC/L,IAAP,GAAc,IAAd;AACD,OAHD,MAGO;AACL+L,QAAAA,MAAM,CAACiS,QAAP,GAAkBgxC,OAAO,CAAC7kD,IAAR,CAAa,GAAb,CAAlB;AACD,OA3P8C,CA6P/C;;;AACA,UAAI,CAACilD,MAAM,CAACrjD,MAAM,CAACiS,QAAR,CAAP,IAA4B,CAACoxC,MAAM,CAACrjD,MAAM,CAACkS,MAAR,CAAvC,EAAwD;AACtDlS,QAAAA,MAAM,CAAC/L,IAAP,GAAc,CAAC+L,MAAM,CAACiS,QAAP,GAAkBjS,MAAM,CAACiS,QAAzB,GAAoC,EAArC,KACCjS,MAAM,CAACkS,MAAP,GAAgBlS,MAAM,CAACkS,MAAvB,GAAgC,EADjC,CAAd;AAED;;AACDlS,MAAAA,MAAM,CAACwxB,IAAP,GAAckxB,QAAQ,CAAClxB,IAAT,IAAiBxxB,MAAM,CAACwxB,IAAtC;AACAxxB,MAAAA,MAAM,CAACogD,OAAP,GAAiBpgD,MAAM,CAACogD,OAAP,IAAkBsC,QAAQ,CAACtC,OAA5C;AACApgD,MAAAA,MAAM,CAAC+S,IAAP,GAAc/S,MAAM,CAACkb,MAAP,EAAd;AACA,aAAOlb,MAAP;AACD,KAtQD;;AAwQAmgD,IAAAA,GAAG,CAACx0D,SAAJ,CAAcg2D,SAAd,GAA0B,YAAW;AACnC,UAAIh3C,IAAI,GAAG,KAAKA,IAAhB;AACA,UAAI4G,IAAI,GAAG+uC,WAAW,CAACgB,IAAZ,CAAiB32C,IAAjB,CAAX;;AACA,UAAI4G,IAAJ,EAAU;AACRA,QAAAA,IAAI,GAAGA,IAAI,CAAC,CAAD,CAAX;;AACA,YAAIA,IAAI,KAAK,GAAb,EAAkB;AAChB,eAAKA,IAAL,GAAYA,IAAI,CAACxJ,MAAL,CAAY,CAAZ,CAAZ;AACD;;AACD4C,QAAAA,IAAI,GAAGA,IAAI,CAAC5C,MAAL,CAAY,CAAZ,EAAe4C,IAAI,CAACthB,MAAL,GAAckoB,IAAI,CAACloB,MAAlC,CAAP;AACD;;AACD,UAAIshB,IAAJ,EAAU,KAAKwC,QAAL,GAAgBxC,IAAhB;AACX,KAXD;;AAaA,aAASy2C,QAAT,CAAkB51D,GAAlB,EAAuB;AACrB,aAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;;AAED,aAAS6+C,QAAT,CAAkB7+C,GAAlB,EAAuB;AACrB,aAAO,OAAOA,GAAP,KAAe,QAAf,IAA2BA,GAAG,KAAK,IAA1C;AACD;;AAED,aAAS63D,MAAT,CAAgB73D,GAAhB,EAAqB;AACnB,aAAOA,GAAG,KAAK,IAAf;AACD;;AACD,aAAS23D,iBAAT,CAA2B33D,GAA3B,EAAgC;AAC9B,aAAQA,GAAG,IAAI,IAAf;AACD;AAEA,GArsB2C,EAqsB1C;AAAC,gBAAW,EAAZ;AAAe,mBAAc;AAA7B,GArsB0C,CA71lB8Z;AAkinBta,MAAG,CAAC,UAAS3C,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACxE,QAAI,OAAOY,MAAM,CAACksB,MAAd,KAAyB,UAA7B,EAAyC;AACvC;AACA3sB,MAAAA,MAAM,CAACH,OAAP,GAAiB,SAASu6D,QAAT,CAAkB/pB,IAAlB,EAAwBgqB,SAAxB,EAAmC;AAClDhqB,QAAAA,IAAI,CAACiqB,MAAL,GAAcD,SAAd;AACAhqB,QAAAA,IAAI,CAAChuC,SAAL,GAAiB5B,MAAM,CAACksB,MAAP,CAAc0tC,SAAS,CAACh4D,SAAxB,EAAmC;AAClD2G,UAAAA,WAAW,EAAE;AACXM,YAAAA,KAAK,EAAE+mC,IADI;AAEXtvC,YAAAA,UAAU,EAAE,KAFD;AAGXmvC,YAAAA,QAAQ,EAAE,IAHC;AAIXlvC,YAAAA,YAAY,EAAE;AAJH;AADqC,SAAnC,CAAjB;AAQD,OAVD;AAWD,KAbD,MAaO;AACL;AACAhB,MAAAA,MAAM,CAACH,OAAP,GAAiB,SAASu6D,QAAT,CAAkB/pB,IAAlB,EAAwBgqB,SAAxB,EAAmC;AAClDhqB,QAAAA,IAAI,CAACiqB,MAAL,GAAcD,SAAd;;AACA,YAAIE,QAAQ,GAAG,YAAY,CAAE,CAA7B;;AACAA,QAAAA,QAAQ,CAACl4D,SAAT,GAAqBg4D,SAAS,CAACh4D,SAA/B;AACAguC,QAAAA,IAAI,CAAChuC,SAAL,GAAiB,IAAIk4D,QAAJ,EAAjB;AACAlqB,QAAAA,IAAI,CAAChuC,SAAL,CAAe2G,WAAf,GAA6BqnC,IAA7B;AACD,OAND;AAOD;AAEA,GAzBsC,EAyBrC,EAzBqC,CAlinBma;AA2jnBpc,MAAG,CAAC,UAAS9wC,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1CG,IAAAA,MAAM,CAACH,OAAP,GAAiB,SAASkc,QAAT,CAAkB7Z,GAAlB,EAAuB;AACtC,aAAOA,GAAG,IAAI,OAAOA,GAAP,KAAe,QAAtB,IACF,OAAOA,GAAG,CAACoL,IAAX,KAAoB,UADlB,IAEF,OAAOpL,GAAG,CAACmwB,IAAX,KAAoB,UAFlB,IAGF,OAAOnwB,GAAG,CAACgc,SAAX,KAAyB,UAH9B;AAID,KALD;AAMC,GAPQ,EAOP,EAPO,CA3jnBic;AAkknBpc,MAAG,CAAC,UAAS3e,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC1C,KAAC,UAAUkI,OAAV,EAAkBuvC,MAAlB,EAAyB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,UAAIkjB,YAAY,GAAG,UAAnB;;AACA36D,MAAAA,OAAO,CAAC+xB,MAAR,GAAiB,UAASvyB,CAAT,EAAY;AAC3B,YAAI,CAACy4D,QAAQ,CAACz4D,CAAD,CAAb,EAAkB;AAChB,cAAIo7D,OAAO,GAAG,EAAd;;AACA,eAAK,IAAIr7D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGa,SAAS,CAACF,MAA9B,EAAsCX,CAAC,EAAvC,EAA2C;AACzCq7D,YAAAA,OAAO,CAAC3sD,IAAR,CAAa0Z,OAAO,CAACvnB,SAAS,CAACb,CAAD,CAAV,CAApB;AACD;;AACD,iBAAOq7D,OAAO,CAAC3lD,IAAR,CAAa,GAAb,CAAP;AACD;;AAED,YAAI1V,CAAC,GAAG,CAAR;AACA,YAAI69B,IAAI,GAAGh9B,SAAX;AACA,YAAIq2C,GAAG,GAAGrZ,IAAI,CAACl9B,MAAf;AACA,YAAIiwC,GAAG,GAAG74B,MAAM,CAAC9X,CAAD,CAAN,CAAUktB,OAAV,CAAkBiuC,YAAlB,EAAgC,UAAS70D,CAAT,EAAY;AACpD,cAAIA,CAAC,KAAK,IAAV,EAAgB,OAAO,GAAP;AAChB,cAAIvG,CAAC,IAAIk3C,GAAT,EAAc,OAAO3wC,CAAP;;AACd,kBAAQA,CAAR;AACE,iBAAK,IAAL;AAAW,qBAAOwR,MAAM,CAAC8lB,IAAI,CAAC79B,CAAC,EAAF,CAAL,CAAb;;AACX,iBAAK,IAAL;AAAW,qBAAOm8C,MAAM,CAACte,IAAI,CAAC79B,CAAC,EAAF,CAAL,CAAb;;AACX,iBAAK,IAAL;AACE,kBAAI;AACF,uBAAOyL,IAAI,CAACsgB,SAAL,CAAe8R,IAAI,CAAC79B,CAAC,EAAF,CAAnB,CAAP;AACD,eAFD,CAEE,OAAO4V,CAAP,EAAU;AACV,uBAAO,YAAP;AACD;;AACH;AACE,qBAAOrP,CAAP;AAVJ;AAYD,SAfS,CAAV;;AAgBA,aAAK,IAAIA,CAAC,GAAGs3B,IAAI,CAAC79B,CAAD,CAAjB,EAAsBA,CAAC,GAAGk3C,GAA1B,EAA+B3wC,CAAC,GAAGs3B,IAAI,CAAC,EAAE79B,CAAH,CAAvC,EAA8C;AAC5C,cAAI26D,MAAM,CAACp0D,CAAD,CAAN,IAAa,CAACo7C,QAAQ,CAACp7C,CAAD,CAA1B,EAA+B;AAC7BqqC,YAAAA,GAAG,IAAI,MAAMrqC,CAAb;AACD,WAFD,MAEO;AACLqqC,YAAAA,GAAG,IAAI,MAAMxoB,OAAO,CAAC7hB,CAAD,CAApB;AACD;AACF;;AACD,eAAOqqC,GAAP;AACD,OApCD,CAvB0B,CA8D1B;AACA;AACA;;;AACAnwC,MAAAA,OAAO,CAAC66D,SAAR,GAAoB,UAAS/oD,EAAT,EAAa7H,GAAb,EAAkB;AACpC;AACA,YAAIk3C,WAAW,CAAC1J,MAAM,CAACvvC,OAAR,CAAf,EAAiC;AAC/B,iBAAO,YAAW;AAChB,mBAAOlI,OAAO,CAAC66D,SAAR,CAAkB/oD,EAAlB,EAAsB7H,GAAtB,EAA2B5J,KAA3B,CAAiC,IAAjC,EAAuCD,SAAvC,CAAP;AACD,WAFD;AAGD;;AAED,YAAI8H,OAAO,CAAC4yD,aAAR,KAA0B,IAA9B,EAAoC;AAClC,iBAAOhpD,EAAP;AACD;;AAED,YAAIwvC,MAAM,GAAG,KAAb;;AACA,iBAASyZ,UAAT,GAAsB;AACpB,cAAI,CAACzZ,MAAL,EAAa;AACX,gBAAIp5C,OAAO,CAAC8yD,gBAAZ,EAA8B;AAC5B,oBAAM,IAAIn7D,KAAJ,CAAUoK,GAAV,CAAN;AACD,aAFD,MAEO,IAAI/B,OAAO,CAAC+yD,gBAAZ,EAA8B;AACnC1Z,cAAAA,OAAO,CAACC,KAAR,CAAcv3C,GAAd;AACD,aAFM,MAEA;AACLs3C,cAAAA,OAAO,CAAC19C,KAAR,CAAcoG,GAAd;AACD;;AACDq3C,YAAAA,MAAM,GAAG,IAAT;AACD;;AACD,iBAAOxvC,EAAE,CAACzR,KAAH,CAAS,IAAT,EAAeD,SAAf,CAAP;AACD;;AAED,eAAO26D,UAAP;AACD,OA5BD;;AA+BA,UAAIG,MAAM,GAAG,EAAb;AACA,UAAIC,YAAJ;;AACAn7D,MAAAA,OAAO,CAACo7D,QAAR,GAAmB,UAAS13D,GAAT,EAAc;AAC/B,YAAIy9C,WAAW,CAACga,YAAD,CAAf,EACEA,YAAY,GAAGjzD,OAAO,CAACoS,GAAR,CAAY+gD,UAAZ,IAA0B,EAAzC;AACF33D,QAAAA,GAAG,GAAGA,GAAG,CAAC20B,WAAJ,EAAN;;AACA,YAAI,CAAC6iC,MAAM,CAACx3D,GAAD,CAAX,EAAkB;AAChB,cAAI,IAAIswB,MAAJ,CAAW,QAAQtwB,GAAR,GAAc,KAAzB,EAAgC,GAAhC,EAAqCuwB,IAArC,CAA0CknC,YAA1C,CAAJ,EAA6D;AAC3D,gBAAIG,GAAG,GAAGpzD,OAAO,CAACozD,GAAlB;;AACAJ,YAAAA,MAAM,CAACx3D,GAAD,CAAN,GAAc,YAAW;AACvB,kBAAIuG,GAAG,GAAGjK,OAAO,CAAC+xB,MAAR,CAAe1xB,KAAf,CAAqBL,OAArB,EAA8BI,SAA9B,CAAV;AACAmhD,cAAAA,OAAO,CAAC19C,KAAR,CAAc,WAAd,EAA2BH,GAA3B,EAAgC43D,GAAhC,EAAqCrxD,GAArC;AACD,aAHD;AAID,WAND,MAMO;AACLixD,YAAAA,MAAM,CAACx3D,GAAD,CAAN,GAAc,YAAW,CAAE,CAA3B;AACD;AACF;;AACD,eAAOw3D,MAAM,CAACx3D,GAAD,CAAb;AACD,OAhBD;AAmBA;AACF;AACA;AACA;AACA;AACA;AACA;;AACE;;;AACA,eAASikB,OAAT,CAAiB2G,GAAjB,EAAsBuiB,IAAtB,EAA4B;AAC1B;AACA,YAAI0qB,GAAG,GAAG;AACRC,UAAAA,IAAI,EAAE,EADE;AAERC,UAAAA,OAAO,EAAEC;AAFD,SAAV,CAF0B,CAM1B;;AACA,YAAIt7D,SAAS,CAACF,MAAV,IAAoB,CAAxB,EAA2Bq7D,GAAG,CAACI,KAAJ,GAAYv7D,SAAS,CAAC,CAAD,CAArB;AAC3B,YAAIA,SAAS,CAACF,MAAV,IAAoB,CAAxB,EAA2Bq7D,GAAG,CAACK,MAAJ,GAAax7D,SAAS,CAAC,CAAD,CAAtB;;AAC3B,YAAIy7D,SAAS,CAAChrB,IAAD,CAAb,EAAqB;AACnB;AACA0qB,UAAAA,GAAG,CAACO,UAAJ,GAAiBjrB,IAAjB;AACD,SAHD,MAGO,IAAIA,IAAJ,EAAU;AACf;AACA7wC,UAAAA,OAAO,CAAC+7D,OAAR,CAAgBR,GAAhB,EAAqB1qB,IAArB;AACD,SAfyB,CAgB1B;;;AACA,YAAIsQ,WAAW,CAACoa,GAAG,CAACO,UAAL,CAAf,EAAiCP,GAAG,CAACO,UAAJ,GAAiB,KAAjB;AACjC,YAAI3a,WAAW,CAACoa,GAAG,CAACI,KAAL,CAAf,EAA4BJ,GAAG,CAACI,KAAJ,GAAY,CAAZ;AAC5B,YAAIxa,WAAW,CAACoa,GAAG,CAACK,MAAL,CAAf,EAA6BL,GAAG,CAACK,MAAJ,GAAa,KAAb;AAC7B,YAAIza,WAAW,CAACoa,GAAG,CAACS,aAAL,CAAf,EAAoCT,GAAG,CAACS,aAAJ,GAAoB,IAApB;AACpC,YAAIT,GAAG,CAACK,MAAR,EAAgBL,GAAG,CAACE,OAAJ,GAAcQ,gBAAd;AAChB,eAAOC,WAAW,CAACX,GAAD,EAAMjtC,GAAN,EAAWitC,GAAG,CAACI,KAAf,CAAlB;AACD;;AACD37D,MAAAA,OAAO,CAAC2nB,OAAR,GAAkBA,OAAlB,CArJ0B,CAwJ1B;;AACAA,MAAAA,OAAO,CAACi0C,MAAR,GAAiB;AACf,gBAAS,CAAC,CAAD,EAAI,EAAJ,CADM;AAEf,kBAAW,CAAC,CAAD,EAAI,EAAJ,CAFI;AAGf,qBAAc,CAAC,CAAD,EAAI,EAAJ,CAHC;AAIf,mBAAY,CAAC,CAAD,EAAI,EAAJ,CAJG;AAKf,iBAAU,CAAC,EAAD,EAAK,EAAL,CALK;AAMf,gBAAS,CAAC,EAAD,EAAK,EAAL,CANM;AAOf,iBAAU,CAAC,EAAD,EAAK,EAAL,CAPK;AAQf,gBAAS,CAAC,EAAD,EAAK,EAAL,CARM;AASf,gBAAS,CAAC,EAAD,EAAK,EAAL,CATM;AAUf,iBAAU,CAAC,EAAD,EAAK,EAAL,CAVK;AAWf,mBAAY,CAAC,EAAD,EAAK,EAAL,CAXG;AAYf,eAAQ,CAAC,EAAD,EAAK,EAAL,CAZO;AAaf,kBAAW,CAAC,EAAD,EAAK,EAAL;AAbI,OAAjB,CAzJ0B,CAyK1B;;AACAj0C,MAAAA,OAAO,CAACw0C,MAAR,GAAiB;AACf,mBAAW,MADI;AAEf,kBAAU,QAFK;AAGf,mBAAW,QAHI;AAIf,qBAAa,MAJE;AAKf,gBAAQ,MALO;AAMf,kBAAU,OANK;AAOf,gBAAQ,SAPO;AAQf;AACA,kBAAU;AATK,OAAjB;;AAaA,eAASF,gBAAT,CAA0B9rB,GAA1B,EAA+BisB,SAA/B,EAA0C;AACxC,YAAIC,KAAK,GAAG10C,OAAO,CAACw0C,MAAR,CAAeC,SAAf,CAAZ;;AAEA,YAAIC,KAAJ,EAAW;AACT,iBAAO,YAAY10C,OAAO,CAACi0C,MAAR,CAAeS,KAAf,EAAsB,CAAtB,CAAZ,GAAuC,GAAvC,GAA6ClsB,GAA7C,GACA,SADA,GACYxoB,OAAO,CAACi0C,MAAR,CAAeS,KAAf,EAAsB,CAAtB,CADZ,GACuC,GAD9C;AAED,SAHD,MAGO;AACL,iBAAOlsB,GAAP;AACD;AACF;;AAGD,eAASurB,cAAT,CAAwBvrB,GAAxB,EAA6BisB,SAA7B,EAAwC;AACtC,eAAOjsB,GAAP;AACD;;AAGD,eAASmsB,WAAT,CAAqB3sB,KAArB,EAA4B;AAC1B,YAAItsC,IAAI,GAAG,EAAX;AAEAssC,QAAAA,KAAK,CAACthB,OAAN,CAAc,UAASnZ,GAAT,EAAc06B,GAAd,EAAmB;AAC/BvsC,UAAAA,IAAI,CAAC6R,GAAD,CAAJ,GAAY,IAAZ;AACD,SAFD;AAIA,eAAO7R,IAAP;AACD;;AAGD,eAAS64D,WAAT,CAAqBX,GAArB,EAA0B9xD,KAA1B,EAAiC8yD,YAAjC,EAA+C;AAC7C;AACA;AACA,YAAIhB,GAAG,CAACS,aAAJ,IACAvyD,KADA,IAEA23C,UAAU,CAAC33C,KAAK,CAACke,OAAP,CAFV,IAGA;AACAle,QAAAA,KAAK,CAACke,OAAN,KAAkB3nB,OAAO,CAAC2nB,OAJ1B,IAKA;AACA,UAAEle,KAAK,CAACN,WAAN,IAAqBM,KAAK,CAACN,WAAN,CAAkB3G,SAAlB,KAAgCiH,KAAvD,CANJ,EAMmE;AACjE,cAAIimC,GAAG,GAAGjmC,KAAK,CAACke,OAAN,CAAc40C,YAAd,EAA4BhB,GAA5B,CAAV;;AACA,cAAI,CAACtD,QAAQ,CAACvoB,GAAD,CAAb,EAAoB;AAClBA,YAAAA,GAAG,GAAGwsB,WAAW,CAACX,GAAD,EAAM7rB,GAAN,EAAW6sB,YAAX,CAAjB;AACD;;AACD,iBAAO7sB,GAAP;AACD,SAf4C,CAiB7C;;;AACA,YAAI8sB,SAAS,GAAGC,eAAe,CAAClB,GAAD,EAAM9xD,KAAN,CAA/B;;AACA,YAAI+yD,SAAJ,EAAe;AACb,iBAAOA,SAAP;AACD,SArB4C,CAuB7C;;;AACA,YAAIhzD,IAAI,GAAG5I,MAAM,CAAC4I,IAAP,CAAYC,KAAZ,CAAX;AACA,YAAIizD,WAAW,GAAGJ,WAAW,CAAC9yD,IAAD,CAA7B;;AAEA,YAAI+xD,GAAG,CAACO,UAAR,EAAoB;AAClBtyD,UAAAA,IAAI,GAAG5I,MAAM,CAAC+7D,mBAAP,CAA2BlzD,KAA3B,CAAP;AACD,SA7B4C,CA+B7C;AACA;;;AACA,YAAIqpC,OAAO,CAACrpC,KAAD,CAAP,KACID,IAAI,CAACjH,OAAL,CAAa,SAAb,KAA2B,CAA3B,IAAgCiH,IAAI,CAACjH,OAAL,CAAa,aAAb,KAA+B,CADnE,CAAJ,EAC2E;AACzE,iBAAOq6D,WAAW,CAACnzD,KAAD,CAAlB;AACD,SApC4C,CAsC7C;;;AACA,YAAID,IAAI,CAACtJ,MAAL,KAAgB,CAApB,EAAuB;AACrB,cAAIkhD,UAAU,CAAC33C,KAAD,CAAd,EAAuB;AACrB,gBAAIU,IAAI,GAAGV,KAAK,CAACU,IAAN,GAAa,OAAOV,KAAK,CAACU,IAA1B,GAAiC,EAA5C;AACA,mBAAOoxD,GAAG,CAACE,OAAJ,CAAY,cAActxD,IAAd,GAAqB,GAAjC,EAAsC,SAAtC,CAAP;AACD;;AACD,cAAI0yD,QAAQ,CAACpzD,KAAD,CAAZ,EAAqB;AACnB,mBAAO8xD,GAAG,CAACE,OAAJ,CAAYznC,MAAM,CAACxxB,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+BwJ,KAA/B,CAAZ,EAAmD,QAAnD,CAAP;AACD;;AACD,cAAIqzD,MAAM,CAACrzD,KAAD,CAAV,EAAmB;AACjB,mBAAO8xD,GAAG,CAACE,OAAJ,CAAYnrD,IAAI,CAAC9N,SAAL,CAAeC,QAAf,CAAwBxC,IAAxB,CAA6BwJ,KAA7B,CAAZ,EAAiD,MAAjD,CAAP;AACD;;AACD,cAAIqpC,OAAO,CAACrpC,KAAD,CAAX,EAAoB;AAClB,mBAAOmzD,WAAW,CAACnzD,KAAD,CAAlB;AACD;AACF;;AAED,YAAIioC,IAAI,GAAG,EAAX;AAAA,YAAe/B,KAAK,GAAG,KAAvB;AAAA,YAA8BotB,MAAM,GAAG,CAAC,GAAD,EAAM,GAAN,CAAvC,CAvD6C,CAyD7C;;AACA,YAAI5lC,OAAO,CAAC1tB,KAAD,CAAX,EAAoB;AAClBkmC,UAAAA,KAAK,GAAG,IAAR;AACAotB,UAAAA,MAAM,GAAG,CAAC,GAAD,EAAM,GAAN,CAAT;AACD,SA7D4C,CA+D7C;;;AACA,YAAI3b,UAAU,CAAC33C,KAAD,CAAd,EAAuB;AACrB,cAAIrK,CAAC,GAAGqK,KAAK,CAACU,IAAN,GAAa,OAAOV,KAAK,CAACU,IAA1B,GAAiC,EAAzC;AACAunC,UAAAA,IAAI,GAAG,eAAetyC,CAAf,GAAmB,GAA1B;AACD,SAnE4C,CAqE7C;;;AACA,YAAIy9D,QAAQ,CAACpzD,KAAD,CAAZ,EAAqB;AACnBioC,UAAAA,IAAI,GAAG,MAAM1d,MAAM,CAACxxB,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+BwJ,KAA/B,CAAb;AACD,SAxE4C,CA0E7C;;;AACA,YAAIqzD,MAAM,CAACrzD,KAAD,CAAV,EAAmB;AACjBioC,UAAAA,IAAI,GAAG,MAAMphC,IAAI,CAAC9N,SAAL,CAAeqvB,WAAf,CAA2B5xB,IAA3B,CAAgCwJ,KAAhC,CAAb;AACD,SA7E4C,CA+E7C;;;AACA,YAAIqpC,OAAO,CAACrpC,KAAD,CAAX,EAAoB;AAClBioC,UAAAA,IAAI,GAAG,MAAMkrB,WAAW,CAACnzD,KAAD,CAAxB;AACD;;AAED,YAAID,IAAI,CAACtJ,MAAL,KAAgB,CAAhB,KAAsB,CAACyvC,KAAD,IAAUlmC,KAAK,CAACvJ,MAAN,IAAgB,CAAhD,CAAJ,EAAwD;AACtD,iBAAO68D,MAAM,CAAC,CAAD,CAAN,GAAYrrB,IAAZ,GAAmBqrB,MAAM,CAAC,CAAD,CAAhC;AACD;;AAED,YAAIR,YAAY,GAAG,CAAnB,EAAsB;AACpB,cAAIM,QAAQ,CAACpzD,KAAD,CAAZ,EAAqB;AACnB,mBAAO8xD,GAAG,CAACE,OAAJ,CAAYznC,MAAM,CAACxxB,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+BwJ,KAA/B,CAAZ,EAAmD,QAAnD,CAAP;AACD,WAFD,MAEO;AACL,mBAAO8xD,GAAG,CAACE,OAAJ,CAAY,UAAZ,EAAwB,SAAxB,CAAP;AACD;AACF;;AAEDF,QAAAA,GAAG,CAACC,IAAJ,CAASvtD,IAAT,CAAcxE,KAAd;AAEA,YAAI8T,MAAJ;;AACA,YAAIoyB,KAAJ,EAAW;AACTpyB,UAAAA,MAAM,GAAGy/C,WAAW,CAACzB,GAAD,EAAM9xD,KAAN,EAAa8yD,YAAb,EAA2BG,WAA3B,EAAwClzD,IAAxC,CAApB;AACD,SAFD,MAEO;AACL+T,UAAAA,MAAM,GAAG/T,IAAI,CAACyd,GAAL,CAAS,UAASjlB,GAAT,EAAc;AAC9B,mBAAOi7D,cAAc,CAAC1B,GAAD,EAAM9xD,KAAN,EAAa8yD,YAAb,EAA2BG,WAA3B,EAAwC16D,GAAxC,EAA6C2tC,KAA7C,CAArB;AACD,WAFQ,CAAT;AAGD;;AAED4rB,QAAAA,GAAG,CAACC,IAAJ,CAAS5lC,GAAT;AAEA,eAAOsnC,oBAAoB,CAAC3/C,MAAD,EAASm0B,IAAT,EAAeqrB,MAAf,CAA3B;AACD;;AAGD,eAASN,eAAT,CAAyBlB,GAAzB,EAA8B9xD,KAA9B,EAAqC;AACnC,YAAI03C,WAAW,CAAC13C,KAAD,CAAf,EACE,OAAO8xD,GAAG,CAACE,OAAJ,CAAY,WAAZ,EAAyB,WAAzB,CAAP;;AACF,YAAIxD,QAAQ,CAACxuD,KAAD,CAAZ,EAAqB;AACnB,cAAI0zD,MAAM,GAAG,OAAOnyD,IAAI,CAACsgB,SAAL,CAAe7hB,KAAf,EAAsBijB,OAAtB,CAA8B,QAA9B,EAAwC,EAAxC,EACsBA,OADtB,CAC8B,IAD9B,EACoC,KADpC,EAEsBA,OAFtB,CAE8B,MAF9B,EAEsC,GAFtC,CAAP,GAEoD,IAFjE;AAGA,iBAAO6uC,GAAG,CAACE,OAAJ,CAAY0B,MAAZ,EAAoB,QAApB,CAAP;AACD;;AACD,YAAIpc,QAAQ,CAACt3C,KAAD,CAAZ,EACE,OAAO8xD,GAAG,CAACE,OAAJ,CAAY,KAAKhyD,KAAjB,EAAwB,QAAxB,CAAP;AACF,YAAIoyD,SAAS,CAACpyD,KAAD,CAAb,EACE,OAAO8xD,GAAG,CAACE,OAAJ,CAAY,KAAKhyD,KAAjB,EAAwB,SAAxB,CAAP,CAZiC,CAanC;;AACA,YAAIywD,MAAM,CAACzwD,KAAD,CAAV,EACE,OAAO8xD,GAAG,CAACE,OAAJ,CAAY,MAAZ,EAAoB,MAApB,CAAP;AACH;;AAGD,eAASmB,WAAT,CAAqBnzD,KAArB,EAA4B;AAC1B,eAAO,MAAM5J,KAAK,CAAC2C,SAAN,CAAgBC,QAAhB,CAAyBxC,IAAzB,CAA8BwJ,KAA9B,CAAN,GAA6C,GAApD;AACD;;AAGD,eAASuzD,WAAT,CAAqBzB,GAArB,EAA0B9xD,KAA1B,EAAiC8yD,YAAjC,EAA+CG,WAA/C,EAA4DlzD,IAA5D,EAAkE;AAChE,YAAI+T,MAAM,GAAG,EAAb;;AACA,aAAK,IAAIhe,CAAC,GAAG,CAAR,EAAWo5D,CAAC,GAAGlvD,KAAK,CAACvJ,MAA1B,EAAkCX,CAAC,GAAGo5D,CAAtC,EAAyC,EAAEp5D,CAA3C,EAA8C;AAC5C,cAAIgC,cAAc,CAACkI,KAAD,EAAQ6N,MAAM,CAAC/X,CAAD,CAAd,CAAlB,EAAsC;AACpCge,YAAAA,MAAM,CAACtP,IAAP,CAAYgvD,cAAc,CAAC1B,GAAD,EAAM9xD,KAAN,EAAa8yD,YAAb,EAA2BG,WAA3B,EACtBplD,MAAM,CAAC/X,CAAD,CADgB,EACX,IADW,CAA1B;AAED,WAHD,MAGO;AACLge,YAAAA,MAAM,CAACtP,IAAP,CAAY,EAAZ;AACD;AACF;;AACDzE,QAAAA,IAAI,CAAC6kB,OAAL,CAAa,UAASrsB,GAAT,EAAc;AACzB,cAAI,CAACA,GAAG,CAACujB,KAAJ,CAAU,OAAV,CAAL,EAAyB;AACvBhI,YAAAA,MAAM,CAACtP,IAAP,CAAYgvD,cAAc,CAAC1B,GAAD,EAAM9xD,KAAN,EAAa8yD,YAAb,EAA2BG,WAA3B,EACtB16D,GADsB,EACjB,IADiB,CAA1B;AAED;AACF,SALD;AAMA,eAAOub,MAAP;AACD;;AAGD,eAAS0/C,cAAT,CAAwB1B,GAAxB,EAA6B9xD,KAA7B,EAAoC8yD,YAApC,EAAkDG,WAAlD,EAA+D16D,GAA/D,EAAoE2tC,KAApE,EAA2E;AACzE,YAAIxlC,IAAJ,EAAUgmC,GAAV,EAAeitB,IAAf;AACAA,QAAAA,IAAI,GAAGx8D,MAAM,CAACy8D,wBAAP,CAAgC5zD,KAAhC,EAAuCzH,GAAvC,KAA+C;AAAEyH,UAAAA,KAAK,EAAEA,KAAK,CAACzH,GAAD;AAAd,SAAtD;;AACA,YAAIo7D,IAAI,CAACt8D,GAAT,EAAc;AACZ,cAAIs8D,IAAI,CAAC15D,GAAT,EAAc;AACZysC,YAAAA,GAAG,GAAGorB,GAAG,CAACE,OAAJ,CAAY,iBAAZ,EAA+B,SAA/B,CAAN;AACD,WAFD,MAEO;AACLtrB,YAAAA,GAAG,GAAGorB,GAAG,CAACE,OAAJ,CAAY,UAAZ,EAAwB,SAAxB,CAAN;AACD;AACF,SAND,MAMO;AACL,cAAI2B,IAAI,CAAC15D,GAAT,EAAc;AACZysC,YAAAA,GAAG,GAAGorB,GAAG,CAACE,OAAJ,CAAY,UAAZ,EAAwB,SAAxB,CAAN;AACD;AACF;;AACD,YAAI,CAACl6D,cAAc,CAACm7D,WAAD,EAAc16D,GAAd,CAAnB,EAAuC;AACrCmI,UAAAA,IAAI,GAAG,MAAMnI,GAAN,GAAY,GAAnB;AACD;;AACD,YAAI,CAACmuC,GAAL,EAAU;AACR,cAAIorB,GAAG,CAACC,IAAJ,CAASj5D,OAAT,CAAiB66D,IAAI,CAAC3zD,KAAtB,IAA+B,CAAnC,EAAsC;AACpC,gBAAIywD,MAAM,CAACqC,YAAD,CAAV,EAA0B;AACxBpsB,cAAAA,GAAG,GAAG+rB,WAAW,CAACX,GAAD,EAAM6B,IAAI,CAAC3zD,KAAX,EAAkB,IAAlB,CAAjB;AACD,aAFD,MAEO;AACL0mC,cAAAA,GAAG,GAAG+rB,WAAW,CAACX,GAAD,EAAM6B,IAAI,CAAC3zD,KAAX,EAAkB8yD,YAAY,GAAG,CAAjC,CAAjB;AACD;;AACD,gBAAIpsB,GAAG,CAAC5tC,OAAJ,CAAY,IAAZ,IAAoB,CAAC,CAAzB,EAA4B;AAC1B,kBAAIotC,KAAJ,EAAW;AACTQ,gBAAAA,GAAG,GAAGA,GAAG,CAACx7B,KAAJ,CAAU,IAAV,EAAgBsS,GAAhB,CAAoB,UAASY,IAAT,EAAe;AACvC,yBAAO,OAAOA,IAAd;AACD,iBAFK,EAEH5S,IAFG,CAEE,IAFF,EAEQ2J,MAFR,CAEe,CAFf,CAAN;AAGD,eAJD,MAIO;AACLuxB,gBAAAA,GAAG,GAAG,OAAOA,GAAG,CAACx7B,KAAJ,CAAU,IAAV,EAAgBsS,GAAhB,CAAoB,UAASY,IAAT,EAAe;AAC9C,yBAAO,QAAQA,IAAf;AACD,iBAFY,EAEV5S,IAFU,CAEL,IAFK,CAAb;AAGD;AACF;AACF,WAjBD,MAiBO;AACLk7B,YAAAA,GAAG,GAAGorB,GAAG,CAACE,OAAJ,CAAY,YAAZ,EAA0B,SAA1B,CAAN;AACD;AACF;;AACD,YAAIta,WAAW,CAACh3C,IAAD,CAAf,EAAuB;AACrB,cAAIwlC,KAAK,IAAI3tC,GAAG,CAACujB,KAAJ,CAAU,OAAV,CAAb,EAAiC;AAC/B,mBAAO4qB,GAAP;AACD;;AACDhmC,UAAAA,IAAI,GAAGa,IAAI,CAACsgB,SAAL,CAAe,KAAKtpB,GAApB,CAAP;;AACA,cAAImI,IAAI,CAACob,KAAL,CAAW,8BAAX,CAAJ,EAAgD;AAC9Cpb,YAAAA,IAAI,GAAGA,IAAI,CAACyU,MAAL,CAAY,CAAZ,EAAezU,IAAI,CAACjK,MAAL,GAAc,CAA7B,CAAP;AACAiK,YAAAA,IAAI,GAAGoxD,GAAG,CAACE,OAAJ,CAAYtxD,IAAZ,EAAkB,MAAlB,CAAP;AACD,WAHD,MAGO;AACLA,YAAAA,IAAI,GAAGA,IAAI,CAACuiB,OAAL,CAAa,IAAb,EAAmB,KAAnB,EACKA,OADL,CACa,MADb,EACqB,GADrB,EAEKA,OAFL,CAEa,UAFb,EAEyB,GAFzB,CAAP;AAGAviB,YAAAA,IAAI,GAAGoxD,GAAG,CAACE,OAAJ,CAAYtxD,IAAZ,EAAkB,QAAlB,CAAP;AACD;AACF;;AAED,eAAOA,IAAI,GAAG,IAAP,GAAcgmC,GAArB;AACD;;AAGD,eAAS+sB,oBAAT,CAA8B3/C,MAA9B,EAAsCm0B,IAAtC,EAA4CqrB,MAA5C,EAAoD;AAClD,YAAIO,WAAW,GAAG,CAAlB;AACA,YAAIp9D,MAAM,GAAGqd,MAAM,CAACggD,MAAP,CAAc,UAASC,IAAT,EAAeC,GAAf,EAAoB;AAC7CH,UAAAA,WAAW;AACX,cAAIG,GAAG,CAACl7D,OAAJ,CAAY,IAAZ,KAAqB,CAAzB,EAA4B+6D,WAAW;AACvC,iBAAOE,IAAI,GAAGC,GAAG,CAAC/wC,OAAJ,CAAY,iBAAZ,EAA+B,EAA/B,EAAmCxsB,MAA1C,GAAmD,CAA1D;AACD,SAJY,EAIV,CAJU,CAAb;;AAMA,YAAIA,MAAM,GAAG,EAAb,EAAiB;AACf,iBAAO68D,MAAM,CAAC,CAAD,CAAN,IACCrrB,IAAI,KAAK,EAAT,GAAc,EAAd,GAAmBA,IAAI,GAAG,KAD3B,IAEA,GAFA,GAGAn0B,MAAM,CAACtI,IAAP,CAAY,OAAZ,CAHA,GAIA,GAJA,GAKA8nD,MAAM,CAAC,CAAD,CALb;AAMD;;AAED,eAAOA,MAAM,CAAC,CAAD,CAAN,GAAYrrB,IAAZ,GAAmB,GAAnB,GAAyBn0B,MAAM,CAACtI,IAAP,CAAY,IAAZ,CAAzB,GAA6C,GAA7C,GAAmD8nD,MAAM,CAAC,CAAD,CAAhE;AACD,OA7byB,CAgc1B;AACA;;;AACA,eAAS5lC,OAAT,CAAiBumC,EAAjB,EAAqB;AACnB,eAAOpqC,KAAK,CAAC6D,OAAN,CAAcumC,EAAd,CAAP;AACD;;AACD19D,MAAAA,OAAO,CAACm3B,OAAR,GAAkBA,OAAlB;;AAEA,eAAS0kC,SAAT,CAAmBx5D,GAAnB,EAAwB;AACtB,eAAO,OAAOA,GAAP,KAAe,SAAtB;AACD;;AACDrC,MAAAA,OAAO,CAAC67D,SAAR,GAAoBA,SAApB;;AAEA,eAAS3B,MAAT,CAAgB73D,GAAhB,EAAqB;AACnB,eAAOA,GAAG,KAAK,IAAf;AACD;;AACDrC,MAAAA,OAAO,CAACk6D,MAAR,GAAiBA,MAAjB;;AAEA,eAASF,iBAAT,CAA2B33D,GAA3B,EAAgC;AAC9B,eAAOA,GAAG,IAAI,IAAd;AACD;;AACDrC,MAAAA,OAAO,CAACg6D,iBAAR,GAA4BA,iBAA5B;;AAEA,eAASjZ,QAAT,CAAkB1+C,GAAlB,EAAuB;AACrB,eAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;;AACDrC,MAAAA,OAAO,CAAC+gD,QAAR,GAAmBA,QAAnB;;AAEA,eAASkX,QAAT,CAAkB51D,GAAlB,EAAuB;AACrB,eAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;;AACDrC,MAAAA,OAAO,CAACi4D,QAAR,GAAmBA,QAAnB;;AAEA,eAAS0F,QAAT,CAAkBt7D,GAAlB,EAAuB;AACrB,eAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;;AACDrC,MAAAA,OAAO,CAAC29D,QAAR,GAAmBA,QAAnB;;AAEA,eAASxc,WAAT,CAAqB9+C,GAArB,EAA0B;AACxB,eAAOA,GAAG,KAAK,KAAK,CAApB;AACD;;AACDrC,MAAAA,OAAO,CAACmhD,WAAR,GAAsBA,WAAtB;;AAEA,eAAS0b,QAAT,CAAkBe,EAAlB,EAAsB;AACpB,eAAO1c,QAAQ,CAAC0c,EAAD,CAAR,IAAgBC,cAAc,CAACD,EAAD,CAAd,KAAuB,iBAA9C;AACD;;AACD59D,MAAAA,OAAO,CAAC68D,QAAR,GAAmBA,QAAnB;;AAEA,eAAS3b,QAAT,CAAkB7+C,GAAlB,EAAuB;AACrB,eAAO,OAAOA,GAAP,KAAe,QAAf,IAA2BA,GAAG,KAAK,IAA1C;AACD;;AACDrC,MAAAA,OAAO,CAACkhD,QAAR,GAAmBA,QAAnB;;AAEA,eAAS4b,MAAT,CAAgBx3D,CAAhB,EAAmB;AACjB,eAAO47C,QAAQ,CAAC57C,CAAD,CAAR,IAAeu4D,cAAc,CAACv4D,CAAD,CAAd,KAAsB,eAA5C;AACD;;AACDtF,MAAAA,OAAO,CAAC88D,MAAR,GAAiBA,MAAjB;;AAEA,eAAShqB,OAAT,CAAiB3zC,CAAjB,EAAoB;AAClB,eAAO+hD,QAAQ,CAAC/hD,CAAD,CAAR,KACF0+D,cAAc,CAAC1+D,CAAD,CAAd,KAAsB,gBAAtB,IAA0CA,CAAC,YAAYU,KADrD,CAAP;AAED;;AACDG,MAAAA,OAAO,CAAC8yC,OAAR,GAAkBA,OAAlB;;AAEA,eAASsO,UAAT,CAAoB/+C,GAApB,EAAyB;AACvB,eAAO,OAAOA,GAAP,KAAe,UAAtB;AACD;;AACDrC,MAAAA,OAAO,CAACohD,UAAR,GAAqBA,UAArB;;AAEA,eAAS0c,WAAT,CAAqBz7D,GAArB,EAA0B;AACxB,eAAOA,GAAG,KAAK,IAAR,IACA,OAAOA,GAAP,KAAe,SADf,IAEA,OAAOA,GAAP,KAAe,QAFf,IAGA,OAAOA,GAAP,KAAe,QAHf,IAIA,OAAOA,GAAP,KAAe,QAJf,IAI4B;AAC5B,eAAOA,GAAP,KAAe,WALtB;AAMD;;AACDrC,MAAAA,OAAO,CAAC89D,WAAR,GAAsBA,WAAtB;AAEA99D,MAAAA,OAAO,CAACkc,QAAR,GAAmBxc,OAAO,CAAC,oBAAD,CAA1B;;AAEA,eAASm+D,cAAT,CAAwBv+D,CAAxB,EAA2B;AACzB,eAAOsB,MAAM,CAAC4B,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+BX,CAA/B,CAAP;AACD;;AAGD,eAASy+D,GAAT,CAAa3+D,CAAb,EAAgB;AACd,eAAOA,CAAC,GAAG,EAAJ,GAAS,MAAMA,CAAC,CAACqD,QAAF,CAAW,EAAX,CAAf,GAAgCrD,CAAC,CAACqD,QAAF,CAAW,EAAX,CAAvC;AACD;;AAGD,UAAIu7D,MAAM,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,KAAlD,EAAyD,KAAzD,EACC,KADD,EACQ,KADR,EACe,KADf,CAAb,CA1hB0B,CA6hB1B;;AACA,eAASC,SAAT,GAAqB;AACnB,YAAI34D,CAAC,GAAG,IAAIgL,IAAJ,EAAR;AACA,YAAI8W,IAAI,GAAG,CAAC22C,GAAG,CAACz4D,CAAC,CAAC44D,QAAF,EAAD,CAAJ,EACCH,GAAG,CAACz4D,CAAC,CAAC64D,UAAF,EAAD,CADJ,EAECJ,GAAG,CAACz4D,CAAC,CAAC84D,UAAF,EAAD,CAFJ,EAEsBnpD,IAFtB,CAE2B,GAF3B,CAAX;AAGA,eAAO,CAAC3P,CAAC,CAAC6K,OAAF,EAAD,EAAc6tD,MAAM,CAAC14D,CAAC,CAAC+4D,QAAF,EAAD,CAApB,EAAoCj3C,IAApC,EAA0CnS,IAA1C,CAA+C,GAA/C,CAAP;AACD,OApiByB,CAuiB1B;;;AACAjV,MAAAA,OAAO,CAAC8nB,GAAR,GAAc,YAAW;AACvBy5B,QAAAA,OAAO,CAACz5B,GAAR,CAAY,SAAZ,EAAuBm2C,SAAS,EAAhC,EAAoCj+D,OAAO,CAAC+xB,MAAR,CAAe1xB,KAAf,CAAqBL,OAArB,EAA8BI,SAA9B,CAApC;AACD,OAFD;AAKA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACEJ,MAAAA,OAAO,CAACu6D,QAAR,GAAmB76D,OAAO,CAAC,UAAD,CAA1B;;AAEAM,MAAAA,OAAO,CAAC+7D,OAAR,GAAkB,UAASuC,MAAT,EAAiBz+C,GAAjB,EAAsB;AACtC;AACA,YAAI,CAACA,GAAD,IAAQ,CAACqhC,QAAQ,CAACrhC,GAAD,CAArB,EAA4B,OAAOy+C,MAAP;AAE5B,YAAI90D,IAAI,GAAG5I,MAAM,CAAC4I,IAAP,CAAYqW,GAAZ,CAAX;AACA,YAAItgB,CAAC,GAAGiK,IAAI,CAACtJ,MAAb;;AACA,eAAOX,CAAC,EAAR,EAAY;AACV++D,UAAAA,MAAM,CAAC90D,IAAI,CAACjK,CAAD,CAAL,CAAN,GAAkBsgB,GAAG,CAACrW,IAAI,CAACjK,CAAD,CAAL,CAArB;AACD;;AACD,eAAO++D,MAAP;AACD,OAVD;;AAYA,eAAS/8D,cAAT,CAAwB+sB,GAAxB,EAA6B0hB,IAA7B,EAAmC;AACjC,eAAOpvC,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqCquB,GAArC,EAA0C0hB,IAA1C,CAAP;AACD;AAEA,KA5kBD,EA4kBG/vC,IA5kBH,CA4kBQ,IA5kBR,EA4kBaP,OAAO,CAAC,UAAD,CA5kBpB,EA4kBiC,OAAO+3C,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC,OAAO7tC,IAAP,KAAgB,WAAhB,GAA8BA,IAA9B,GAAqC,OAAOwL,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC,EA5kBxJ;AA6kBC,GA9kBQ,EA8kBP;AAAC,0BAAqB,EAAtB;AAAyB,gBAAW,EAApC;AAAuC,gBAAW;AAAlD,GA9kBO,CAlknBic;AAgpoBjZ,MAAG,CAAC,UAAS1V,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC7F,QAAIu+D,EAAE,GAAG7+D,OAAO,CAAC,MAAD,CAAhB;;AACA,QAAI4gB,EAAE,GAAG5gB,OAAO,CAAC,MAAD,CAAhB;;AAEA,QAAI2gB,IAAI,GAAGC,EAAX;AACAD,IAAAA,IAAI,CAACk+C,EAAL,GAAUA,EAAV;AACAl+C,IAAAA,IAAI,CAACC,EAAL,GAAUA,EAAV;AAEAngB,IAAAA,MAAM,CAACH,OAAP,GAAiBqgB,IAAjB;AAEC,GAV2D,EAU1D;AAAC,YAAO,GAAR;AAAY,YAAO;AAAnB,GAV0D,CAhpoB8Y;AA0poB/a,MAAG,CAAC,UAAS3gB,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC/D;AACF;AACA;AACA;AACE,QAAIw+D,SAAS,GAAG,EAAhB;;AACA,SAAK,IAAIj/D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,GAApB,EAAyB,EAAEA,CAA3B,EAA8B;AAC5Bi/D,MAAAA,SAAS,CAACj/D,CAAD,CAAT,GAAe,CAACA,CAAC,GAAG,KAAL,EAAYkD,QAAZ,CAAqB,EAArB,EAAyBmc,MAAzB,CAAgC,CAAhC,CAAf;AACD;;AAED,aAAS6/C,WAAT,CAAqBtsC,GAArB,EAA0BzrB,MAA1B,EAAkC;AAChC,UAAInH,CAAC,GAAGmH,MAAM,IAAI,CAAlB;AACA,UAAIg4D,GAAG,GAAGF,SAAV,CAFgC,CAGhC;;AACA,aAAQ,CAACE,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CAAJ,EAAgBm/D,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CAAnB,EACRm/D,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CADK,EACOm/D,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CADV,EACsB,GADtB,EAERm/D,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CAFK,EAEOm/D,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CAFV,EAEsB,GAFtB,EAGRm/D,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CAHK,EAGOm/D,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CAHV,EAGsB,GAHtB,EAIRm/D,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CAJK,EAIOm/D,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CAJV,EAIsB,GAJtB,EAKRm/D,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CALK,EAKOm/D,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CALV,EAMRm/D,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CANK,EAMOm/D,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CANV,EAORm/D,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CAPK,EAOOm/D,GAAG,CAACvsC,GAAG,CAAC5yB,CAAC,EAAF,CAAJ,CAPV,CAAD,CAOwB0V,IAPxB,CAO6B,EAP7B,CAAP;AAQD;;AAED9U,IAAAA,MAAM,CAACH,OAAP,GAAiBy+D,WAAjB;AAEC,GA1B6B,EA0B5B,EA1B4B,CA1poB4a;AAoroBpc,OAAI,CAAC,UAAS/+D,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC3C;AACA;AACA;AACA;AAEA;AACA;AACA,QAAI2+D,eAAe,GAAI,OAAOv2D,MAAP,IAAkB,WAAlB,IAAiCA,MAAM,CAACu2D,eAAxC,IAA2Dv2D,MAAM,CAACu2D,eAAP,CAAuBC,IAAvB,CAA4Bx2D,MAA5B,CAA5D,IACC,OAAOy2D,QAAP,IAAoB,WAApB,IAAmC,OAAOzpD,MAAM,CAACypD,QAAP,CAAgBF,eAAvB,IAA0C,UAA7E,IAA2FE,QAAQ,CAACF,eAAT,CAAyBC,IAAzB,CAA8BC,QAA9B,CADlH;;AAGA,QAAIF,eAAJ,EAAqB;AACnB;AACA,UAAIG,KAAK,GAAG,IAAIh8D,UAAJ,CAAe,EAAf,CAAZ,CAFmB,CAEa;;AAEhC3C,MAAAA,MAAM,CAACH,OAAP,GAAiB,SAAS++D,SAAT,GAAqB;AACpCJ,QAAAA,eAAe,CAACG,KAAD,CAAf;AACA,eAAOA,KAAP;AACD,OAHD;AAID,KARD,MAQO;AACL;AACA;AACA;AACA;AACA,UAAIE,IAAI,GAAG,IAAI1rC,KAAJ,CAAU,EAAV,CAAX;;AAEAnzB,MAAAA,MAAM,CAACH,OAAP,GAAiB,SAASi/D,OAAT,GAAmB;AAClC,aAAK,IAAI1/D,CAAC,GAAG,CAAR,EAAWL,CAAhB,EAAmBK,CAAC,GAAG,EAAvB,EAA2BA,CAAC,EAA5B,EAAgC;AAC9B,cAAI,CAACA,CAAC,GAAG,IAAL,MAAe,CAAnB,EAAsBL,CAAC,GAAG+F,IAAI,CAAC0sC,MAAL,KAAgB,WAApB;AACtBqtB,UAAAA,IAAI,CAACz/D,CAAD,CAAJ,GAAUL,CAAC,MAAM,CAACK,CAAC,GAAG,IAAL,KAAc,CAApB,CAAD,GAA0B,IAApC;AACD;;AAED,eAAOy/D,IAAP;AACD,OAPD;AAQD;AAEA,GApCS,EAoCR,EApCQ,CAproBgc;AAwtoBpc,OAAI,CAAC,UAASt/D,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC3C,QAAIk/D,GAAG,GAAGx/D,OAAO,CAAC,WAAD,CAAjB;;AACA,QAAI++D,WAAW,GAAG/+D,OAAO,CAAC,mBAAD,CAAzB,CAF2C,CAI3C;AACA;AACA;AACA;;;AAEA,QAAIy/D,OAAJ;;AACA,QAAIC,SAAJ,CAV2C,CAY3C;;;AACA,QAAIC,UAAU,GAAG,CAAjB;AACA,QAAIC,UAAU,GAAG,CAAjB,CAd2C,CAgB3C;;AACA,aAASf,EAAT,CAAYn1D,OAAZ,EAAqB+oB,GAArB,EAA0BzrB,MAA1B,EAAkC;AAChC,UAAInH,CAAC,GAAG4yB,GAAG,IAAIzrB,MAAP,IAAiB,CAAzB;AACA,UAAIrB,CAAC,GAAG8sB,GAAG,IAAI,EAAf;AAEA/oB,MAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACA,UAAI8+C,IAAI,GAAG9+C,OAAO,CAAC8+C,IAAR,IAAgBiX,OAA3B;AACA,UAAII,QAAQ,GAAGn2D,OAAO,CAACm2D,QAAR,KAAqBl2D,SAArB,GAAiCD,OAAO,CAACm2D,QAAzC,GAAoDH,SAAnE,CANgC,CAQhC;AACA;AACA;;AACA,UAAIlX,IAAI,IAAI,IAAR,IAAgBqX,QAAQ,IAAI,IAAhC,EAAsC;AACpC,YAAIC,SAAS,GAAGN,GAAG,EAAnB;;AACA,YAAIhX,IAAI,IAAI,IAAZ,EAAkB;AAChB;AACAA,UAAAA,IAAI,GAAGiX,OAAO,GAAG,CACfK,SAAS,CAAC,CAAD,CAAT,GAAe,IADA,EAEfA,SAAS,CAAC,CAAD,CAFM,EAEDA,SAAS,CAAC,CAAD,CAFR,EAEaA,SAAS,CAAC,CAAD,CAFtB,EAE2BA,SAAS,CAAC,CAAD,CAFpC,EAEyCA,SAAS,CAAC,CAAD,CAFlD,CAAjB;AAID;;AACD,YAAID,QAAQ,IAAI,IAAhB,EAAsB;AACpB;AACAA,UAAAA,QAAQ,GAAGH,SAAS,GAAG,CAACI,SAAS,CAAC,CAAD,CAAT,IAAgB,CAAhB,GAAoBA,SAAS,CAAC,CAAD,CAA9B,IAAqC,MAA5D;AACD;AACF,OAxB+B,CA0BhC;AACA;AACA;AACA;;;AACA,UAAInJ,KAAK,GAAGjtD,OAAO,CAACitD,KAAR,KAAkBhtD,SAAlB,GAA8BD,OAAO,CAACitD,KAAtC,GAA8C,IAAI/lD,IAAJ,GAAWF,OAAX,EAA1D,CA9BgC,CAgChC;AACA;;AACA,UAAIqvD,KAAK,GAAGr2D,OAAO,CAACq2D,KAAR,KAAkBp2D,SAAlB,GAA8BD,OAAO,CAACq2D,KAAtC,GAA8CH,UAAU,GAAG,CAAvE,CAlCgC,CAoChC;;AACA,UAAII,EAAE,GAAIrJ,KAAK,GAAGgJ,UAAT,GAAuB,CAACI,KAAK,GAAGH,UAAT,IAAqB,KAArD,CArCgC,CAuChC;;AACA,UAAII,EAAE,GAAG,CAAL,IAAUt2D,OAAO,CAACm2D,QAAR,KAAqBl2D,SAAnC,EAA8C;AAC5Ck2D,QAAAA,QAAQ,GAAGA,QAAQ,GAAG,CAAX,GAAe,MAA1B;AACD,OA1C+B,CA4ChC;AACA;;;AACA,UAAI,CAACG,EAAE,GAAG,CAAL,IAAUrJ,KAAK,GAAGgJ,UAAnB,KAAkCj2D,OAAO,CAACq2D,KAAR,KAAkBp2D,SAAxD,EAAmE;AACjEo2D,QAAAA,KAAK,GAAG,CAAR;AACD,OAhD+B,CAkDhC;;;AACA,UAAIA,KAAK,IAAI,KAAb,EAAoB;AAClB,cAAM,IAAI5/D,KAAJ,CAAU,kDAAV,CAAN;AACD;;AAEDw/D,MAAAA,UAAU,GAAGhJ,KAAb;AACAiJ,MAAAA,UAAU,GAAGG,KAAb;AACAL,MAAAA,SAAS,GAAGG,QAAZ,CAzDgC,CA2DhC;;AACAlJ,MAAAA,KAAK,IAAI,cAAT,CA5DgC,CA8DhC;;AACA,UAAIsJ,EAAE,GAAG,CAAC,CAACtJ,KAAK,GAAG,SAAT,IAAsB,KAAtB,GAA8BoJ,KAA/B,IAAwC,WAAjD;AACAp6D,MAAAA,CAAC,CAAC9F,CAAC,EAAF,CAAD,GAASogE,EAAE,KAAK,EAAP,GAAY,IAArB;AACAt6D,MAAAA,CAAC,CAAC9F,CAAC,EAAF,CAAD,GAASogE,EAAE,KAAK,EAAP,GAAY,IAArB;AACAt6D,MAAAA,CAAC,CAAC9F,CAAC,EAAF,CAAD,GAASogE,EAAE,KAAK,CAAP,GAAW,IAApB;AACAt6D,MAAAA,CAAC,CAAC9F,CAAC,EAAF,CAAD,GAASogE,EAAE,GAAG,IAAd,CAnEgC,CAqEhC;;AACA,UAAIC,GAAG,GAAIvJ,KAAK,GAAG,WAAR,GAAsB,KAAvB,GAAgC,SAA1C;AACAhxD,MAAAA,CAAC,CAAC9F,CAAC,EAAF,CAAD,GAASqgE,GAAG,KAAK,CAAR,GAAY,IAArB;AACAv6D,MAAAA,CAAC,CAAC9F,CAAC,EAAF,CAAD,GAASqgE,GAAG,GAAG,IAAf,CAxEgC,CA0EhC;;AACAv6D,MAAAA,CAAC,CAAC9F,CAAC,EAAF,CAAD,GAASqgE,GAAG,KAAK,EAAR,GAAa,GAAb,GAAmB,IAA5B,CA3EgC,CA2EE;;AAClCv6D,MAAAA,CAAC,CAAC9F,CAAC,EAAF,CAAD,GAASqgE,GAAG,KAAK,EAAR,GAAa,IAAtB,CA5EgC,CA8EhC;;AACAv6D,MAAAA,CAAC,CAAC9F,CAAC,EAAF,CAAD,GAASggE,QAAQ,KAAK,CAAb,GAAiB,IAA1B,CA/EgC,CAiFhC;;AACAl6D,MAAAA,CAAC,CAAC9F,CAAC,EAAF,CAAD,GAASggE,QAAQ,GAAG,IAApB,CAlFgC,CAoFhC;;AACA,WAAK,IAAIngE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuB,EAAEA,CAAzB,EAA4B;AAC1BiG,QAAAA,CAAC,CAAC9F,CAAC,GAAGH,CAAL,CAAD,GAAW8oD,IAAI,CAAC9oD,CAAD,CAAf;AACD;;AAED,aAAO+yB,GAAG,GAAGA,GAAH,GAASssC,WAAW,CAACp5D,CAAD,CAA9B;AACD;;AAEDlF,IAAAA,MAAM,CAACH,OAAP,GAAiBu+D,EAAjB;AAEC,GA/GS,EA+GR;AAAC,yBAAoB,EAArB;AAAwB,iBAAY;AAApC,GA/GQ,CAxtoBgc;AAu0oB9Z,OAAI,CAAC,UAAS7+D,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACjF,QAAIk/D,GAAG,GAAGx/D,OAAO,CAAC,WAAD,CAAjB;;AACA,QAAI++D,WAAW,GAAG/+D,OAAO,CAAC,mBAAD,CAAzB;;AAEA,aAAS4gB,EAAT,CAAYlX,OAAZ,EAAqB+oB,GAArB,EAA0BzrB,MAA1B,EAAkC;AAChC,UAAInH,CAAC,GAAG4yB,GAAG,IAAIzrB,MAAP,IAAiB,CAAzB;;AAEA,UAAI,OAAO0C,OAAP,IAAmB,QAAvB,EAAiC;AAC/B+oB,QAAAA,GAAG,GAAG/oB,OAAO,KAAK,QAAZ,GAAuB,IAAIkqB,KAAJ,CAAU,EAAV,CAAvB,GAAuC,IAA7C;AACAlqB,QAAAA,OAAO,GAAG,IAAV;AACD;;AACDA,MAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,UAAI41D,IAAI,GAAG51D,OAAO,CAACuoC,MAAR,IAAkB,CAACvoC,OAAO,CAAC81D,GAAR,IAAeA,GAAhB,GAA7B,CATgC,CAWhC;;AACAF,MAAAA,IAAI,CAAC,CAAD,CAAJ,GAAWA,IAAI,CAAC,CAAD,CAAJ,GAAU,IAAX,GAAmB,IAA7B;AACAA,MAAAA,IAAI,CAAC,CAAD,CAAJ,GAAWA,IAAI,CAAC,CAAD,CAAJ,GAAU,IAAX,GAAmB,IAA7B,CAbgC,CAehC;;AACA,UAAI7sC,GAAJ,EAAS;AACP,aAAK,IAAIxsB,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAG,EAAtB,EAA0B,EAAEA,EAA5B,EAAgC;AAC9BwsB,UAAAA,GAAG,CAAC5yB,CAAC,GAAGoG,EAAL,CAAH,GAAcq5D,IAAI,CAACr5D,EAAD,CAAlB;AACD;AACF;;AAED,aAAOwsB,GAAG,IAAIssC,WAAW,CAACO,IAAD,CAAzB;AACD;;AAED7+D,IAAAA,MAAM,CAACH,OAAP,GAAiBsgB,EAAjB;AAEC,GA/B+C,EA+B9C;AAAC,yBAAoB,EAArB;AAAwB,iBAAY;AAApC,GA/B8C,CAv0oB0Z;AAs2oB9Z,OAAI,CAAC,UAAS5gB,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AACjF;;AACAY,IAAAA,MAAM,CAACC,cAAP,CAAsBb,OAAtB,EAA+B,YAA/B,EAA6C;AAAEyJ,MAAAA,KAAK,EAAE;AAAT,KAA7C;;AACA,QAAIo2D,KAAK,GAAGngE,OAAO,CAAC,aAAD,CAAnB;;AACA,QAAIogE,UAAU,GAAG,IAAjB;AACA;AACF;AACA;;AACE,QAAIxwD,aAAa;AAAG;AAAe,gBAAY;AAC3C,eAASA,aAAT,CAAuBywD,OAAvB,EAAgC;AAC5B,YAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,UAAAA,OAAO,GAAGD,UAAV;AAAuB;;AACjD,aAAKC,OAAL,GAAeA,OAAf;AACA,aAAKC,KAAL,GAAa,IAAIH,KAAK,CAACI,QAAV,CAAmBF,OAAnB,CAAb;AACH;;AACD;AACAn/D,MAAAA,MAAM,CAACC,cAAP,CAAsByO,aAAa,CAAC9M,SAApC,EAA+C,MAA/C,EAAuD;AACnD1B,QAAAA,GAAG,EAAE,YAAY;AACb,iBAAO,KAAKk/D,KAAL,CAAW9/D,MAAlB;AACH,SAHkD;AAInDgB,QAAAA,UAAU,EAAE,IAJuC;AAKnDC,QAAAA,YAAY,EAAE;AALqC,OAAvD;;AAOAmO,MAAAA,aAAa,CAAC9M,SAAd,CAAwBmW,GAAxB,GAA8B,UAAU3W,GAAV,EAAeyH,KAAf,EAAsB;AAClD,YAAIy2D,SAAS,GAAG,OAAOl+D,GAAP,KAAe,QAAf,GAA0BsN,aAAa,CAAC6J,YAAd,CAA2BnX,GAA3B,CAA1B,GAA4DA,GAA5E;AACE,YAAIm+D,cAAc,GAAG,KAAKC,aAAL,CAAmB32D,KAAnB,CAArB;AACA,aAAKu2D,KAAL,CAAWrnD,GAAX,CAAeunD,SAAf,EAA0BC,cAA1B;AACH,OAJD;;AAKA7wD,MAAAA,aAAa,CAAC9M,SAAd,CAAwB1B,GAAxB,GAA8B,UAAUkB,GAAV,EAAe;AAC3C,YAAIk+D,SAAS,GAAG,OAAOl+D,GAAP,KAAe,QAAf,GAA0BsN,aAAa,CAAC6J,YAAd,CAA2BnX,GAA3B,CAA1B,GAA4DA,GAA5E;AACE,YAAI62B,GAAG,GAAGvoB,IAAI,CAACuoB,GAAL,EAAV;AACA,YAAIwnC,OAAO,GAAG,KAAKL,KAAL,CAAWl/D,GAAX,CAAeo/D,SAAf,CAAd;;AACA,YAAIG,OAAJ,EAAa;AACT,eAAK,IAAI9gE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8gE,OAAO,CAACngE,MAA5B,EAAoCX,CAAC,EAArC,EAAyC;AACrC,gBAAI+gE,MAAM,GAAGD,OAAO,CAAC9gE,CAAD,CAApB;;AACA,gBAAI+gE,MAAM,CAACC,MAAP,GAAgB1nC,GAApB,EAAyB;AACrB,mBAAKmnC,KAAL,CAAWzmD,MAAX,CAAkB2mD,SAAlB;AACA,qBAAO72D,SAAP;AACH;AACJ;AACJ;;AACD,eAAOg3D,OAAP;AACH,OAdD;;AAeA/wD,MAAAA,aAAa,CAAC6J,YAAd,GAA6B,UAAUnX,GAAV,EAAe;AACxC,YAAI0U,WAAW,GAAG,EAAlB;AACA,YAAI8pD,eAAe,GAAG5/D,MAAM,CAAC4I,IAAP,CAAYxH,GAAZ,EAAiBq1B,IAAjB,EAAtB;;AACA,aAAK,IAAI93B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGihE,eAAe,CAACtgE,MAApC,EAA4CX,CAAC,EAA7C,EAAiD;AAC7C,cAAIkhE,cAAc,GAAGD,eAAe,CAACjhE,CAAD,CAApC;AACA,cAAIyC,GAAG,CAACy+D,cAAD,CAAH,KAAwBp3D,SAA5B,EACI;AACJqN,UAAAA,WAAW,CAACzI,IAAZ,CAAiBjM,GAAG,CAACy+D,cAAD,CAApB;AACH;;AACD,eAAO/pD,WAAW,CAACzB,IAAZ,CAAiB,GAAjB,CAAP;AACH,OAVD;;AAWA3F,MAAAA,aAAa,CAAC9M,SAAd,CAAwB49D,aAAxB,GAAwC,UAAUxoD,SAAV,EAAqB;AACzD,YAAIihB,GAAG,GAAGvoB,IAAI,CAACuoB,GAAL,EAAV;AACA,eAAOjhB,SAAS,CAACqP,GAAV,CAAc,UAAUjb,QAAV,EAAoB;AAAE,iBAAQ;AAC/C8L,YAAAA,OAAO,EAAE9L,QAAQ,CAAC8L,OAAT,IAAoB,EADkB;AAE/CyoD,YAAAA,MAAM,EAAE1nC,GAAG,GAAG,CAAC7sB,QAAQ,CAAC4M,oBAAT,IAAiC,CAAlC,IAAuC,EAAvC,GAA4C;AAFX,WAAR;AAGtC,SAHE,CAAP;AAIH,OAND;;AAOAtJ,MAAAA,aAAa,CAAC9M,SAAd,CAAwBk+D,KAAxB,GAAgC,YAAY;AACxC,aAAKV,KAAL,CAAWU,KAAX;AACH,OAFD;;AAGApxD,MAAAA,aAAa,CAAC9M,SAAd,CAAwB+W,MAAxB,GAAiC,UAAUvX,GAAV,EAAe;AAC9C,YAAIk+D,SAAS,GAAG,OAAOl+D,GAAP,KAAe,QAAf,GAA0BsN,aAAa,CAAC6J,YAAd,CAA2BnX,GAA3B,CAA1B,GAA4DA,GAA5E;AACE,aAAKg+D,KAAL,CAAWzmD,MAAX,CAAkB2mD,SAAlB;AACH,OAHD;;AAIA,aAAO5wD,aAAP;AACH,KA5DkC,EAAnC;;AA6DAtP,IAAAA,OAAO,CAACsP,aAAR,GAAwBA,aAAxB;AACC,GAtE+C,EAsE9C;AAAC,mBAAc;AAAf,GAtE8C,CAt2oB0Z;AA46oBnb,OAAI,CAAC,UAAS5P,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC5D;;AACAY,IAAAA,MAAM,CAACC,cAAP,CAAsBb,OAAtB,EAA+B,YAA/B,EAA6C;AAAEyJ,MAAAA,KAAK,EAAE;AAAT,KAA7C;;AACA,QAAIk3D,cAAc;AAAG;AAAe,gBAAY;AAC5C,eAASA,cAAT,CAAwB3+D,GAAxB,EAA6ByH,KAA7B,EAAoC;AAChC,aAAKzH,GAAL,GAAWA,GAAX;AACA,aAAKyH,KAAL,GAAaA,KAAb;AACH;;AACD,aAAOk3D,cAAP;AACH,KANmC,EAApC;;AAOA,QAAIV,QAAQ;AAAG;AAAe,gBAAY;AACtC,eAASA,QAAT,CAAkBnyB,IAAlB,EAAwB;AACpB,aAAK8yB,OAAL,GAAe,EAAf;AACA,aAAK9yB,IAAL,GAAY,CAAZ;;AACA,YAAI,OAAOA,IAAP,KAAgB,QAAhB,IAA4BA,IAAI,GAAG,CAAvC,EAA0C;AACtC,gBAAM,IAAIjuC,KAAJ,CAAU,wCAAV,CAAN;AACH;;AACD,aAAKghE,SAAL,GAAiB/yB,IAAjB;AACH;;AACDltC,MAAAA,MAAM,CAACC,cAAP,CAAsBo/D,QAAQ,CAACz9D,SAA/B,EAA0C,QAA1C,EAAoD;AAChD1B,QAAAA,GAAG,EAAE,YAAY;AACb,iBAAO,KAAKgtC,IAAZ;AACH,SAH+C;AAIhD5sC,QAAAA,UAAU,EAAE,IAJoC;AAKhDC,QAAAA,YAAY,EAAE;AALkC,OAApD;;AAOA8+D,MAAAA,QAAQ,CAACz9D,SAAT,CAAmBs+D,aAAnB,GAAmC,UAAU5Y,IAAV,EAAgB;AAC/C,YAAI,CAAC,KAAK6Y,UAAV,EAAsB;AAClB,eAAKC,QAAL,GAAgB9Y,IAAhB;AACH,SAFD,MAGK;AACD,eAAK6Y,UAAL,CAAgBvD,IAAhB,GAAuBtV,IAAvB;AACAA,UAAAA,IAAI,CAAC+Y,IAAL,GAAY,KAAKF,UAAjB;AACH;;AACD,aAAKA,UAAL,GAAkB7Y,IAAlB;AACA,aAAKpa,IAAL;AACH,OAVD;;AAWAmyB,MAAAA,QAAQ,CAACz9D,SAAT,CAAmB0+D,cAAnB,GAAoC,YAAY;AAC5C,YAAI,CAAC,KAAKF,QAAV,EAAoB;AAChB,iBAAO33D,SAAP;AACH;;AACD,YAAI6+C,IAAI,GAAG,KAAK8Y,QAAhB;AACA,YAAIG,QAAQ,GAAGjZ,IAAI,CAACsV,IAApB;;AACA,YAAI2D,QAAJ,EAAc;AACVA,UAAAA,QAAQ,CAACF,IAAT,GAAgB53D,SAAhB;AACH;;AACD6+C,QAAAA,IAAI,CAACsV,IAAL,GAAYn0D,SAAZ;AACA,aAAK23D,QAAL,GAAgBG,QAAhB;AACA,aAAKrzB,IAAL;AACA,eAAOoa,IAAP;AACH,OAbD;;AAcA+X,MAAAA,QAAQ,CAACz9D,SAAT,CAAmB4+D,cAAnB,GAAoC,UAAUlZ,IAAV,EAAgB;AAChD,YAAI,KAAK6Y,UAAL,KAAoB7Y,IAAxB,EAA8B;AAC1B,eAAK6Y,UAAL,GAAkB7Y,IAAI,CAAC+Y,IAAvB;AACH;;AACD,YAAI,KAAKD,QAAL,KAAkB9Y,IAAtB,EAA4B;AACxB,eAAK8Y,QAAL,GAAgB9Y,IAAI,CAACsV,IAArB;AACH;;AACD,YAAItV,IAAI,CAACsV,IAAT,EAAe;AACXtV,UAAAA,IAAI,CAACsV,IAAL,CAAUyD,IAAV,GAAiB/Y,IAAI,CAAC+Y,IAAtB;AACH;;AACD,YAAI/Y,IAAI,CAAC+Y,IAAT,EAAe;AACX/Y,UAAAA,IAAI,CAAC+Y,IAAL,CAAUzD,IAAV,GAAiBtV,IAAI,CAACsV,IAAtB;AACH;;AACDtV,QAAAA,IAAI,CAAC+Y,IAAL,GAAY53D,SAAZ;AACA6+C,QAAAA,IAAI,CAACsV,IAAL,GAAYn0D,SAAZ;AACA,aAAKykC,IAAL;AACH,OAhBD;;AAiBAmyB,MAAAA,QAAQ,CAACz9D,SAAT,CAAmB1B,GAAnB,GAAyB,UAAUkB,GAAV,EAAe;AACpC,YAAI,KAAK4+D,OAAL,CAAa5+D,GAAb,CAAJ,EAAuB;AACnB,cAAIkmD,IAAI,GAAG,KAAK0Y,OAAL,CAAa5+D,GAAb,CAAX;AACA,eAAKo/D,cAAL,CAAoBlZ,IAApB;AACA,eAAK4Y,aAAL,CAAmB5Y,IAAnB;AACA,iBAAOA,IAAI,CAACz+C,KAAZ;AACH;AACJ,OAPD;;AAQAw2D,MAAAA,QAAQ,CAACz9D,SAAT,CAAmB+W,MAAnB,GAA4B,UAAUvX,GAAV,EAAe;AACvC,YAAI,KAAK4+D,OAAL,CAAa5+D,GAAb,CAAJ,EAAuB;AACnB,cAAIkmD,IAAI,GAAG,KAAK0Y,OAAL,CAAa5+D,GAAb,CAAX;AACA,eAAKo/D,cAAL,CAAoBlZ,IAApB;AACA,iBAAO,KAAK0Y,OAAL,CAAa5+D,GAAb,CAAP;AACH;AACJ,OAND;;AAOAi+D,MAAAA,QAAQ,CAACz9D,SAAT,CAAmBmW,GAAnB,GAAyB,UAAU3W,GAAV,EAAeyH,KAAf,EAAsB;AAC3C,YAAI,KAAKm3D,OAAL,CAAa5+D,GAAb,CAAJ,EAAuB;AACnB,eAAKuX,MAAL,CAAYvX,GAAZ;AACH,SAFD,MAGK,IAAI,KAAK8rC,IAAL,KAAc,KAAK+yB,SAAvB,EAAkC;AACnC,cAAIG,QAAQ,GAAG,KAAKE,cAAL,EAAf;AACA,cAAIG,KAAK,GAAGL,QAAQ,CAACh/D,GAArB;AACA,iBAAO,KAAK4+D,OAAL,CAAaS,KAAb,CAAP;AACH;;AACD,YAAIC,OAAO,GAAG,IAAIX,cAAJ,CAAmB3+D,GAAnB,EAAwByH,KAAxB,CAAd;AACA,aAAKm3D,OAAL,CAAa5+D,GAAb,IAAoBs/D,OAApB;AACA,aAAKR,aAAL,CAAmBQ,OAAnB;AACH,OAZD;;AAaArB,MAAAA,QAAQ,CAACz9D,SAAT,CAAmBk+D,KAAnB,GAA2B,YAAY;AACnC,YAAIl3D,IAAI,GAAG5I,MAAM,CAAC4I,IAAP,CAAY,KAAKo3D,OAAjB,CAAX;;AACA,aAAK,IAAIrhE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiK,IAAI,CAACtJ,MAAzB,EAAiCX,CAAC,EAAlC,EAAsC;AAClC,cAAIyC,GAAG,GAAGwH,IAAI,CAACjK,CAAD,CAAd;AACA,cAAI2oD,IAAI,GAAG,KAAK0Y,OAAL,CAAa5+D,GAAb,CAAX;AACA,eAAKo/D,cAAL,CAAoBlZ,IAApB;AACA,iBAAO,KAAK0Y,OAAL,CAAa5+D,GAAb,CAAP;AACH;AACJ,OARD;;AASA,aAAOi+D,QAAP;AACH,KAhG6B,EAA9B;;AAiGAjgE,IAAAA,OAAO,CAACigE,QAAR,GAAmBA,QAAnB;AACC,GA5G0B,EA4GzB,EA5GyB,CA56oB+a;AAwhpBpc,OAAI,CAAC,UAASvgE,OAAT,EAAiBS,MAAjB,EAAwBH,OAAxB,EAAgC;AAC3C;AACA;AACA;AACAN,IAAAA,OAAO,CAAC,kBAAD,CAAP;;AAEA,QAAIY,GAAG,GAAGZ,OAAO,CAAC,QAAD,CAAjB;;AAEA,QAAI,OAAO0V,MAAP,KAAkB,WAAtB,EAAmCA,MAAM,CAAC9U,GAAP,GAAaA,GAAb;;AACnC,QAAI,OAAOH,MAAP,KAAkB,WAAtB,EAAmC;AAC/B;AACN;AACA;AACMA,MAAAA,MAAM,CAACH,OAAP,GAAiBM,GAAjB;AACH;;AACD,QAAI,OAAOsJ,IAAP,KAAgB,WAApB,EAAiCA,IAAI,CAACtJ,GAAL,GAAWA,GAAX;AAEjC;AACF;AACA;AACA;AACA;;AAAK,QAAI,CAACM,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqCK,GAArC,EAA0C,SAA1C,CAAL,EAA2D;AAC5DA,MAAAA,GAAG,CAACE,SAAJ,CAAcC,QAAd,CAAuB,SAAvB,IAAoC,EAApC;AACAH,MAAAA,GAAG,CAACihE,OAAJ,GAAcjhE,GAAG,CAACC,OAAJ,CAAYI,aAAZ,CAA0B,SAA1B,EAAqC,CAAE,YAAF,CAArC,CAAd;AACD;;AACDL,IAAAA,GAAG,CAACE,SAAJ,CAAcC,QAAd,CAAuB,SAAvB,EAAkC,YAAlC,IAAkDf,OAAO,CAAC,gCAAD,CAAzD;;AAEA,QAAI,CAACkB,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqCK,GAArC,EAA0C,KAA1C,CAAL,EAAuD;AACrDA,MAAAA,GAAG,CAACE,SAAJ,CAAcC,QAAd,CAAuB,KAAvB,IAAgC,EAAhC;AACAH,MAAAA,GAAG,CAACc,GAAJ,GAAUd,GAAG,CAACC,OAAJ,CAAYI,aAAZ,CAA0B,KAA1B,EAAiC,CAAE,YAAF,CAAjC,CAAV;;AACAjB,MAAAA,OAAO,CAAC,gBAAD,CAAP;AACD;;AACDY,IAAAA,GAAG,CAACE,SAAJ,CAAcC,QAAd,CAAuB,KAAvB,EAA8B,YAA9B,IAA8Cf,OAAO,CAAC,4BAAD,CAArD;AAGC,GAnCS,EAmCR;AAAC,sCAAiC,CAAlC;AAAoC,kCAA6B,CAAjE;AAAmE,wBAAmB,EAAtF;AAAyF,cAAS,EAAlG;AAAqG,sBAAiB;AAAtH,GAnCQ;AAxhpBgc,CAA5c,EA2jpBgI,EA3jpBhI,EA2jpBmI,CAAC,GAAD,CA3jpBnI;AA8jpBA;;AAEA,CAAC,YAAW;AACT,MAAI67D,GAAG,GAAG,IAAV;;AAEF,MAAIiG,OAAO,GAAG,YAAW;AACxB,QAAI,CAACA,OAAO,CAACxB,KAAR,CAAcz+D,cAAd,CAA6BnB,SAAS,CAAC,CAAD,CAAtC,CAAL,EAAiD;AAChDohE,MAAAA,OAAO,CAACxB,KAAR,CAAc5/D,SAAS,CAAC,CAAD,CAAvB,IAA8BohE,OAAO,CAACv2D,KAAR,CAAc7K,SAAS,CAAC,CAAD,CAAvB,CAA9B;AACA;;AACD,WAAOohE,OAAO,CAACzvC,MAAR,CAAe9xB,IAAf,CAAoB,IAApB,EAA0BuhE,OAAO,CAACxB,KAAR,CAAc5/D,SAAS,CAAC,CAAD,CAAvB,CAA1B,EAAuDA,SAAvD,CAAP;AACA,GALD;;AAOAohE,EAAAA,OAAO,CAACzvC,MAAR,GAAiB,UAAS0vC,UAAT,EAAqBjQ,IAArB,EAA2B;AAC3C,QAAIkQ,MAAM,GAAG,CAAb;AAAA,QAAgBC,WAAW,GAAGF,UAAU,CAACvhE,MAAzC;AAAA,QAAiD0hE,SAAS,GAAG,EAA7D;AAAA,QAAiEv/D,GAAjE;AAAA,QAAsEkb,MAAM,GAAG,EAA/E;AAAA,QAAmFhe,CAAnF;AAAA,QAAsF2H,CAAtF;AAAA,QAAyFqe,KAAzF;AAAA,QAAgGw4C,GAAhG;AAAA,QAAqG8D,aAArG;AAAA,QAAoHC,UAApH;;AACA,SAAKviE,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGoiE,WAAhB,EAA6BpiE,CAAC,EAA9B,EAAkC;AACjCqiE,MAAAA,SAAS,GAAGG,QAAQ,CAACN,UAAU,CAACliE,CAAD,CAAX,CAApB;;AACA,UAAIqiE,SAAS,KAAK,QAAlB,EAA4B;AAC3BrkD,QAAAA,MAAM,CAACtP,IAAP,CAAYwzD,UAAU,CAACliE,CAAD,CAAtB;AACA,OAFD,MAGK,IAAIqiE,SAAS,KAAK,OAAlB,EAA2B;AAC/Br8C,QAAAA,KAAK,GAAGk8C,UAAU,CAACliE,CAAD,CAAlB,CAD+B,CACR;;AACvB,YAAIgmB,KAAK,CAAC,CAAD,CAAT,EAAc;AAAE;AACfljB,UAAAA,GAAG,GAAGmvD,IAAI,CAACkQ,MAAD,CAAV;;AACA,eAAKx6D,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGqe,KAAK,CAAC,CAAD,CAAL,CAASrlB,MAAzB,EAAiCgH,CAAC,EAAlC,EAAsC;AACrC,gBAAI,CAAC7E,GAAG,CAACd,cAAJ,CAAmBgkB,KAAK,CAAC,CAAD,CAAL,CAASre,CAAT,CAAnB,CAAL,EAAsC;AACrC,oBAAMs6D,OAAO,CAAC,wCAAD,EAA2Cj8C,KAAK,CAAC,CAAD,CAAL,CAASre,CAAT,CAA3C,CAAb;AACA;;AACD7E,YAAAA,GAAG,GAAGA,GAAG,CAACkjB,KAAK,CAAC,CAAD,CAAL,CAASre,CAAT,CAAD,CAAT;AACA;AACD,SARD,MASK,IAAIqe,KAAK,CAAC,CAAD,CAAT,EAAc;AAAE;AACpBljB,UAAAA,GAAG,GAAGmvD,IAAI,CAACjsC,KAAK,CAAC,CAAD,CAAN,CAAV;AACA,SAFI,MAGA;AAAE;AACNljB,UAAAA,GAAG,GAAGmvD,IAAI,CAACkQ,MAAM,EAAP,CAAV;AACA;;AAED,YAAI,OAAOztC,IAAP,CAAY1O,KAAK,CAAC,CAAD,CAAjB,KAA0Bw8C,QAAQ,CAAC1/D,GAAD,CAAR,IAAiB,QAA/C,EAA0D;AACzD,gBAAMm/D,OAAO,CAAC,yCAAD,EAA4CO,QAAQ,CAAC1/D,GAAD,CAApD,CAAb;AACA;;AACD,gBAAQkjB,KAAK,CAAC,CAAD,CAAb;AACC,eAAK,GAAL;AAAUljB,YAAAA,GAAG,GAAGA,GAAG,CAACI,QAAJ,CAAa,CAAb,CAAN;AAAuB;;AACjC,eAAK,GAAL;AAAUJ,YAAAA,GAAG,GAAGiV,MAAM,CAAC2lC,YAAP,CAAoB56C,GAApB,CAAN;AAAgC;;AAC1C,eAAK,GAAL;AAAUA,YAAAA,GAAG,GAAGsa,QAAQ,CAACta,GAAD,EAAM,EAAN,CAAd;AAAyB;;AACnC,eAAK,GAAL;AAAUA,YAAAA,GAAG,GAAGkjB,KAAK,CAAC,CAAD,CAAL,GAAWljB,GAAG,CAAC2/D,aAAJ,CAAkBz8C,KAAK,CAAC,CAAD,CAAvB,CAAX,GAAyCljB,GAAG,CAAC2/D,aAAJ,EAA/C;AAAoE;;AAC9E,eAAK,GAAL;AAAU3/D,YAAAA,GAAG,GAAGkjB,KAAK,CAAC,CAAD,CAAL,GAAW2M,UAAU,CAAC7vB,GAAD,CAAV,CAAgB4/D,OAAhB,CAAwB18C,KAAK,CAAC,CAAD,CAA7B,CAAX,GAA+C2M,UAAU,CAAC7vB,GAAD,CAA/D;AAAsE;;AAChF,eAAK,GAAL;AAAUA,YAAAA,GAAG,GAAGA,GAAG,CAACI,QAAJ,CAAa,CAAb,CAAN;AAAuB;;AACjC,eAAK,GAAL;AAAUJ,YAAAA,GAAG,GAAI,CAACA,GAAG,GAAGiV,MAAM,CAACjV,GAAD,CAAb,KAAuBkjB,KAAK,CAAC,CAAD,CAA5B,GAAkCljB,GAAG,CAAC2oB,SAAJ,CAAc,CAAd,EAAiBzF,KAAK,CAAC,CAAD,CAAtB,CAAlC,GAA+DljB,GAAtE;AAA4E;;AACtF,eAAK,GAAL;AAAUA,YAAAA,GAAG,GAAGA,GAAG,KAAK,CAAd;AAAiB;;AAC3B,eAAK,GAAL;AAAUA,YAAAA,GAAG,GAAGA,GAAG,CAACI,QAAJ,CAAa,EAAb,CAAN;AAAwB;;AAClC,eAAK,GAAL;AAAUJ,YAAAA,GAAG,GAAGA,GAAG,CAACI,QAAJ,CAAa,EAAb,EAAiB41B,WAAjB,EAAN;AAAsC;AAVjD;;AAYAh2B,QAAAA,GAAG,GAAI,QAAQ4xB,IAAR,CAAa1O,KAAK,CAAC,CAAD,CAAlB,KAA0BA,KAAK,CAAC,CAAD,CAA/B,IAAsCljB,GAAG,IAAI,CAA7C,GAAiD,MAAKA,GAAtD,GAA4DA,GAAnE;AACAw/D,QAAAA,aAAa,GAAGt8C,KAAK,CAAC,CAAD,CAAL,GAAWA,KAAK,CAAC,CAAD,CAAL,IAAY,GAAZ,GAAkB,GAAlB,GAAwBA,KAAK,CAAC,CAAD,CAAL,CAAS8zC,MAAT,CAAgB,CAAhB,CAAnC,GAAwD,GAAxE;AACAyI,QAAAA,UAAU,GAAGv8C,KAAK,CAAC,CAAD,CAAL,GAAWjO,MAAM,CAACjV,GAAD,CAAN,CAAYnC,MAApC;AACA69D,QAAAA,GAAG,GAAGx4C,KAAK,CAAC,CAAD,CAAL,GAAW28C,UAAU,CAACL,aAAD,EAAgBC,UAAhB,CAArB,GAAmD,EAAzD;AACAvkD,QAAAA,MAAM,CAACtP,IAAP,CAAYsX,KAAK,CAAC,CAAD,CAAL,GAAWljB,GAAG,GAAG07D,GAAjB,GAAuBA,GAAG,GAAG17D,GAAzC;AACA;AACD;;AACD,WAAOkb,MAAM,CAACtI,IAAP,CAAY,EAAZ,CAAP;AACA,GAhDD;;AAkDAusD,EAAAA,OAAO,CAACxB,KAAR,GAAgB,EAAhB;;AAEAwB,EAAAA,OAAO,CAACv2D,KAAR,GAAgB,UAASk3D,GAAT,EAAc;AAC7B,QAAIC,IAAI,GAAGD,GAAX;AAAA,QAAgB58C,KAAK,GAAG,EAAxB;AAAA,QAA4Bk8C,UAAU,GAAG,EAAzC;AAAA,QAA6CY,SAAS,GAAG,CAAzD;;AACA,WAAOD,IAAP,EAAa;AACZ,UAAI,CAAC78C,KAAK,GAAG,YAAY4yC,IAAZ,CAAiBiK,IAAjB,CAAT,MAAqC,IAAzC,EAA+C;AAC9CX,QAAAA,UAAU,CAACxzD,IAAX,CAAgBsX,KAAK,CAAC,CAAD,CAArB;AACA,OAFD,MAGK,IAAI,CAACA,KAAK,GAAG,WAAW4yC,IAAX,CAAgBiK,IAAhB,CAAT,MAAoC,IAAxC,EAA8C;AAClDX,QAAAA,UAAU,CAACxzD,IAAX,CAAgB,GAAhB;AACA,OAFI,MAGA,IAAI,CAACsX,KAAK,GAAG,uFAAuF4yC,IAAvF,CAA4FiK,IAA5F,CAAT,MAAgH,IAApH,EAA0H;AAC9H,YAAI78C,KAAK,CAAC,CAAD,CAAT,EAAc;AACb88C,UAAAA,SAAS,IAAI,CAAb;AACA,cAAIC,UAAU,GAAG,EAAjB;AAAA,cAAqBC,iBAAiB,GAAGh9C,KAAK,CAAC,CAAD,CAA9C;AAAA,cAAmDi9C,WAAW,GAAG,EAAjE;;AACA,cAAI,CAACA,WAAW,GAAG,sBAAsBrK,IAAtB,CAA2BoK,iBAA3B,CAAf,MAAkE,IAAtE,EAA4E;AAC3ED,YAAAA,UAAU,CAACr0D,IAAX,CAAgBu0D,WAAW,CAAC,CAAD,CAA3B;;AACA,mBAAO,CAACD,iBAAiB,GAAGA,iBAAiB,CAACv3C,SAAlB,CAA4Bw3C,WAAW,CAAC,CAAD,CAAX,CAAetiE,MAA3C,CAArB,MAA6E,EAApF,EAAwF;AACvF,kBAAI,CAACsiE,WAAW,GAAG,wBAAwBrK,IAAxB,CAA6BoK,iBAA7B,CAAf,MAAoE,IAAxE,EAA8E;AAC7ED,gBAAAA,UAAU,CAACr0D,IAAX,CAAgBu0D,WAAW,CAAC,CAAD,CAA3B;AACA,eAFD,MAGK,IAAI,CAACA,WAAW,GAAG,aAAarK,IAAb,CAAkBoK,iBAAlB,CAAf,MAAyD,IAA7D,EAAmE;AACvED,gBAAAA,UAAU,CAACr0D,IAAX,CAAgBu0D,WAAW,CAAC,CAAD,CAA3B;AACA,eAFI,MAGA;AACJ,sBAAM,gBAAN;AACA;AACD;AACD,WAbD,MAcK;AACJ,kBAAM,gBAAN;AACA;;AACDj9C,UAAAA,KAAK,CAAC,CAAD,CAAL,GAAW+8C,UAAX;AACA,SArBD,MAsBK;AACJD,UAAAA,SAAS,IAAI,CAAb;AACA;;AACD,YAAIA,SAAS,KAAK,CAAlB,EAAqB;AACpB,gBAAM,2EAAN;AACA;;AACDZ,QAAAA,UAAU,CAACxzD,IAAX,CAAgBsX,KAAhB;AACA,OA9BI,MA+BA;AACJ,cAAM,gBAAN;AACA;;AACD68C,MAAAA,IAAI,GAAGA,IAAI,CAACp3C,SAAL,CAAezF,KAAK,CAAC,CAAD,CAAL,CAASrlB,MAAxB,CAAP;AACA;;AACD,WAAOuhE,UAAP;AACA,GA9CD;;AAgDA,MAAIgB,QAAQ,GAAG,UAASN,GAAT,EAAc3Q,IAAd,EAAoBkR,KAApB,EAA2B;AACzCA,IAAAA,KAAK,GAAGlR,IAAI,CAACj8C,KAAL,CAAW,CAAX,CAAR;;AACAmtD,IAAAA,KAAK,CAACliC,MAAN,CAAa,CAAb,EAAgB,CAAhB,EAAmB2hC,GAAnB;;AACA,WAAOX,OAAO,CAACnhE,KAAR,CAAc,IAAd,EAAoBqiE,KAApB,CAAP;AACA,GAJD;AAMA;AACD;AACA;;;AACC,WAASX,QAAT,CAAkBY,QAAlB,EAA4B;AAC3B,WAAO/hE,MAAM,CAAC4B,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+B0iE,QAA/B,EAAyCptD,KAAzC,CAA+C,CAA/C,EAAkD,CAAC,CAAnD,EAAsDzT,WAAtD,EAAP;AACA;;AAED,WAASogE,UAAT,CAAoBj+D,KAApB,EAA2B2+D,UAA3B,EAAuC;AACtC,SAAK,IAAIrlD,MAAM,GAAG,EAAlB,EAAsBqlD,UAAU,GAAG,CAAnC,EAAsCrlD,MAAM,CAAC,EAAEqlD,UAAH,CAAN,GAAuB3+D,KAA7D,EAAoE;AAAC;AAAiB;;AACtF,WAAOsZ,MAAM,CAACtI,IAAP,CAAY,EAAZ,CAAP;AACA;AAED;AACD;AACA;;;AACCsmD,EAAAA,GAAG,CAACiG,OAAJ,GAAcA,OAAd;AACAjG,EAAAA,GAAG,CAACkH,QAAJ,GAAeA,QAAf;AACA,CArID;AAwIA;AACA;AACA;AACA;AACA;;;AACA,CAAC,YAAY;AACX,MAAIhrB,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;AACAprB,EAAAA,MAAM,CAACqrB,IAAP,GAAcD,OAAd,CAJW,CAMX;;AACA,MAAIE,oCAAoC,GAAG,IAA3C,CAPW,CASX;;AACA,MAAIC,2BAA2B,GAAG,IAAlC,CAVW,CAYX;;AACA,MAAIC,yBAAyB,GAAG,OAAhC;AAEA;AACF;AACA;;AACE,MAAIC,QAAQ,GAAG;AACbC,IAAAA,IAAI,EAAE,MADO;AAEbC,IAAAA,KAAK,EAAE,OAFM;AAGbC,IAAAA,KAAK,EAAE,OAHM;AAIbC,IAAAA,IAAI,EAAE,MAJO;AAKbC,IAAAA,GAAG,EAAE,KALQ;AAMbC,IAAAA,IAAI,EAAE,MANO;AAObC,IAAAA,KAAK,EAAE,OAPM;AAQbC,IAAAA,QAAQ,EAAE;AARG,GAAf;AAWA;AACF;AACA;;AACE,MAAIC,YAAY,GAAG;AACjBC,IAAAA,GAAG,EAAE,KADY;AAEjBC,IAAAA,SAAS,EAAE,WAFM;AAGjBC,IAAAA,IAAI,EAAE,MAHW;AAIjBC,IAAAA,IAAI,EAAE;AAJW,GAAnB;AAOA;AACF;AACA;AACA;AACA;;AACE,MAAIC,aAAa,GAAG;AAClBb,IAAAA,IAAI,EAAE,CADY;AAElBC,IAAAA,KAAK,EAAE,EAFW;AAGlBC,IAAAA,KAAK,EAAE,EAHW;AAIlBC,IAAAA,IAAI,EAAE,EAJY;AAKlBC,IAAAA,GAAG,EAAE,EALa;AAMlBC,IAAAA,IAAI,EAAE,EANY;AAOlBC,IAAAA,KAAK,EAAE,GAPW;AAQlBC,IAAAA,QAAQ,EAAE;AARQ,GAApB;AAYA;AACF;AACA;;AACE,MAAIO,kBAAkB,GAAG;AACvBb,IAAAA,KAAK,EAAE,UAAU1uB,IAAV,EAAgB;AAAE6M,MAAAA,OAAO,CAAC2iB,IAAR,CAAaxvB,IAAb;AAAqB,KADvB;AAEvB2uB,IAAAA,KAAK,EAAE,UAAU3uB,IAAV,EAAgB;AAAE6M,MAAAA,OAAO,CAAC2iB,IAAR,CAAaxvB,IAAb;AAAqB,KAFvB;AAGvB4uB,IAAAA,IAAI,EAAE,UAAU5uB,IAAV,EAAgB;AAAE6M,MAAAA,OAAO,CAAC2iB,IAAR,CAAaxvB,IAAb;AAAqB,KAHtB;AAIvB6uB,IAAAA,GAAG,EAAE,UAAU7uB,IAAV,EAAgB;AAAE6M,MAAAA,OAAO,CAACz5B,GAAR,CAAY4sB,IAAZ;AAAoB,KAJpB;AAKvByuB,IAAAA,IAAI,EAAE,UAAUzuB,IAAV,EAAgB;AAAE6M,MAAAA,OAAO,CAACz5B,GAAR,CAAY4sB,IAAZ;AAAoB,KALrB;AAMvB8uB,IAAAA,IAAI,EAAE,UAAU9uB,IAAV,EAAgB;AAAE6M,MAAAA,OAAO,CAAC4iB,IAAR,CAAazvB,IAAb;AAAqB,KANtB;AAOvB+uB,IAAAA,KAAK,EAAE,UAAU/uB,IAAV,EAAgB;AAAE6M,MAAAA,OAAO,CAAC19C,KAAR,CAAc6wC,IAAd;AAAsB,KAPxB;AAQvBgvB,IAAAA,QAAQ,EAAE,UAAUhvB,IAAV,EAAgB;AAAE6M,MAAAA,OAAO,CAAC19C,KAAR,CAAc6wC,IAAd;AAAsB;AAR3B,GAAzB;AAWA;AACF;AACA;;AAEE,MAAI0vB,mBAAmB,GAAG,UAAUC,SAAV,EAAqB;AAC7C,WAAOzjE,MAAM,CAAC8qC,MAAP,CAAci4B,YAAd,EAA4BphE,OAA5B,CAAoC8hE,SAApC,MAAmD,CAAC,CAA3D;AACD,GAFD;AAIA;AACF;AACA;;;AACE,MAAIC,iBAAiB,GAAG,UAAUC,UAAV,EAAsB;AAC5C,QAAInnC,IAAI,GAAG9J,KAAK,CAAC9wB,SAAN,CAAgB+S,KAAhB,CAAsBtV,IAAtB,CAA2BskE,UAA3B,EAAuC,CAAvC,CAAX;AACA,QAAIC,QAAQ,GAAGpnC,IAAI,CAACz2B,KAAL,EAAf;AACA,QAAIorB,MAAJ;AACA,QAAIsyC,SAAJ;;AAEA,QAAID,mBAAmB,CAACI,QAAD,CAAvB,EAAmC;AACjCH,MAAAA,SAAS,GAAGG,QAAZ;AACAzyC,MAAAA,MAAM,GAAGqL,IAAI,CAACz2B,KAAL,EAAT;AACD,KAHD,MAGO;AACL;AACAorB,MAAAA,MAAM,GAAGyyC,QAAT;AACAH,MAAAA,SAAS,GAAGV,YAAY,CAACC,GAAzB;AACD;;AAED,WAAO;AACL7xC,MAAAA,MAAM,EAAEA,MADH;AAELsyC,MAAAA,SAAS,EAAEA,SAFN;AAGLjnC,MAAAA,IAAI,EAAEA;AAHD,KAAP;AAKD,GApBD;AAsBA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACE,MAAIqnC,QAAQ,GAAG,UAAUJ,SAAV,EAAqBK,KAArB,EAA4BhwB,IAA5B,EAAkCiwB,QAAlC,EAA4C;AACzD,SAAKN,SAAL,GAAiBA,SAAjB;AACA,SAAKK,KAAL,GAAaA,KAAb;AACA,SAAKhwB,IAAL,GAAYA,IAAZ;AACA,SAAKttB,IAAL,GAAY,IAAI9W,IAAJ,EAAZ;AACA,SAAKs0D,SAAL,GAAiB,IAAjB;AACA,SAAKhK,OAAL,GAAe,EAAf;AACA,SAAK/yC,IAAL,GAAY,CAAZ;AACA,SAAK88C,QAAL,GAAgBA,QAAhB;AACD,GATD;;AAWAF,EAAAA,QAAQ,CAAC5rB,UAAT,GAAsB,UAAUvqB,GAAV,EAAe;AACnC,QAAIgnB,KAAK,GAAG,IAAImvB,QAAJ,CAAad,YAAY,CAACC,GAA1B,EAA+Bt1C,GAAG,CAACo2C,KAAnC,EAA0Cp2C,GAAG,CAAComB,IAA9C,EAAoDpmB,GAAG,CAACq2C,QAAxD,CAAZ,CADmC,CAGnC;;AACA,QAAI/jE,MAAM,CAAC4B,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+BquB,GAAG,CAAClH,IAAnC,MAA6C,eAAjD,EAAkE;AAChEkuB,MAAAA,KAAK,CAACluB,IAAN,GAAa,IAAI9W,IAAJ,CAASge,GAAG,CAAClH,IAAJ,CAAShX,OAAT,EAAT,CAAb;AACD,KAFD,MAEO,IAAI,OAAOke,GAAG,CAAClH,IAAX,KAAoB,QAAxB,EAAkC;AACvCkuB,MAAAA,KAAK,CAACluB,IAAN,GAAa,IAAI9W,IAAJ,CAASge,GAAG,CAAClH,IAAb,CAAb;AACD,KAFM,MAEA,IAAI,OAAOkH,GAAG,CAAClH,IAAX,KAAoB,QAAxB,EAAkC;AACvCkuB,MAAAA,KAAK,CAACluB,IAAN,GAAa9W,IAAI,CAACrF,KAAL,CAAWqjB,GAAG,CAAClH,IAAf,CAAb;AACD,KAFM,MAEA;AACLkuB,MAAAA,KAAK,CAACluB,IAAN,GAAa,IAAI9W,IAAJ,EAAb;AACD;;AACDglC,IAAAA,KAAK,CAACsvB,SAAN,GAAkBt2C,GAAG,CAACs2C,SAAtB;AACAtvB,IAAAA,KAAK,CAACslB,OAAN,GAAgBtsC,GAAG,CAACssC,OAApB;AACA,WAAOtlB,KAAP;AACD,GAhBD;AAkBA;AACF;AACA;;;AACE,MAAIuvB,mBAAmB,GAAG,UAASliE,IAAT,EAAe;AACvC,QAAI0yB,KAAK,GAAG,gBAAZ;;AACA,QAAG1yB,IAAI,IAAI,OAAOA,IAAP,KAAgB,QAA3B,EAAqC;AACnC/B,MAAAA,MAAM,CAAC4I,IAAP,CAAY7G,IAAZ,EAAkB0rB,OAAlB,CAA0B,UAASrsB,GAAT,EAAc;AACtC,YAAI,OAAOW,IAAI,CAACX,GAAD,CAAX,KAAqB,QAAzB,EAAmC;AACjC6iE,UAAAA,mBAAmB,CAACliE,IAAI,CAACX,GAAD,CAAL,CAAnB;AACD;;AAED,YAAG,OAAOW,IAAI,CAACX,GAAD,CAAX,KAAqB,QAArB,KAAkCA,GAAG,KAAK,KAAR,IAAiBA,GAAG,KAAK,MAA3D,CAAH,EAAuE;AACrEW,UAAAA,IAAI,CAACX,GAAD,CAAJ,GAAYW,IAAI,CAACX,GAAD,CAAJ,CAAU0qB,OAAV,CAAkB2I,KAAlB,EAAyB,YAAzB,CAAZ;AACD;AACF,OARD;AASD;AAEF,GAdD;AAgBA;AACF;AACA;AACA;;;AACE,MAAIyvC,eAAe,GAAG,UAAU3lE,CAAV,EAAa;AACjC,SAAK4X,IAAL,GAAa5X,CAAC,YAAYU,KAAd,GAAuBV,CAAC,CAACgL,IAAzB,GAAgChL,CAAC,CAACW,IAAF,IAAUc,MAAM,CAAC4B,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+Bd,CAA/B,CAAtD;AACA,SAAK+K,OAAL,GAAe/K,CAAC,CAAC+K,OAAjB;AACA,SAAKkmC,KAAL,GAAajxC,CAAC,CAACixC,KAAF,GAAUjxC,CAAC,CAACixC,KAAF,CAAQz7B,KAAR,CAAc,IAAd,CAAV,GAAgC,EAA7C;AACD,GAJD;AAMA;AACF;AACA;AACA;;;AACE8vD,EAAAA,QAAQ,CAACjiE,SAAT,CAAmBC,QAAnB,GAA8B,YAAY;AACxC,WAAOogE,OAAO,CAACrB,OAAR,CAAgB,eAAhB,EACL,KAAKpxD,OAAL,MAAkB,KAAKA,OAAL,GAAeq+B,WAAjC,GAA+C,KAAKr+B,OAAL,GAAeq+B,WAAf,EAA/C,GAA8E,KADzE,EAEL,KAAKs2B,QAAL,EAFK,EAGL,KAAKC,OAAL,EAHK,CAAP;AAID,GALD;AAOA;AACF;AACA;;;AACEP,EAAAA,QAAQ,CAACjiE,SAAT,CAAmB4N,OAAnB,GAA6B,YAAY;AACvC,WAAO,KAAKgX,IAAZ;AACD,GAFD;AAIA;AACF;AACA;;;AACEq9C,EAAAA,QAAQ,CAACjiE,SAAT,CAAmBuiE,QAAnB,GAA8B,YAAY;AACxC,WAAO,KAAKL,KAAZ;AACD,GAFD;AAIA;AACF;AACA;;;AACED,EAAAA,QAAQ,CAACjiE,SAAT,CAAmBwiE,OAAnB,GAA6B,YAAY;AACvC,WAAO,KAAKtwB,IAAZ;AACD,GAFD;AAIA;AACF;AACA;;;AACE+vB,EAAAA,QAAQ,CAACjiE,SAAT,CAAmByiE,YAAnB,GAAkC,YAAY;AAC5C,WAAO,KAAKZ,SAAZ;AACD,GAFD;AAIA;AACF;AACA;AACA;;;AACEI,EAAAA,QAAQ,CAACjiE,SAAT,CAAmB0iE,aAAnB,GAAmC,UAAU/lE,CAAV,EAAa;AAC9C,SAAKylE,SAAL,GAAiB,IAAIE,eAAJ,CAAoB3lE,CAApB,CAAjB;AACA,WAAO,IAAP;AACD,GAHD;AAKA;AACF;AACA;AACA;;;AACEslE,EAAAA,QAAQ,CAACjiE,SAAT,CAAmB2iE,UAAnB,GAAgC,UAAU72C,GAAV,EAAe;AAC7C,QAAI82C,SAAS,GAAGvC,OAAO,CAACwC,QAAR,CAAiB/2C,GAAjB,CAAhB;AACAu2C,IAAAA,mBAAmB,CAACO,SAAD,CAAnB;AACA,SAAKxK,OAAL,CAAa3sD,IAAb,CAAkBm3D,SAAlB;AACA,WAAO,IAAP;AACD,GALD;AAOA;AACF;AACA;AACA;;;AACEX,EAAAA,QAAQ,CAACjiE,SAAT,CAAmB8iE,uBAAnB,GAA6C,YAAY;AACvDzC,IAAAA,OAAO,CAAC0C,MAAR,GAAiBC,wBAAjB,CAA0Cv3D,IAA1C,CAA+C,IAA/C;;AACA,WAAO,IAAP;AACD,GAHD;AAKA;AACF;AACA;;;AACE,MAAIwY,MAAM,GAAG,YAAY;AACvB,SAAKg/C,KAAL,GAAa,EAAb;AACA,SAAKC,WAAL,GAAmB,EAAnB;AACA,SAAKC,WAAL,GAAmB,EAAnB;AACA,SAAKH,wBAAL,GAAgC,EAAhC;AACA,SAAKI,UAAL,GAAkB5B,aAAa,CAACV,IAAhC;AACA,SAAKuC,SAAL,GAAiB7B,aAAa,CAACV,IAA/B;AACA,SAAKwC,UAAL,GAAkB,CAAlB;AACA,SAAKC,gBAAL,GAAwB,CAAxB;AACA,SAAKC,aAAL,GAAqB,IAArB;AACA,SAAKC,SAAL,GAAiB,IAAI31D,IAAJ,GAAWF,OAAX,KAAuB,GAAvB,GAA6BnL,IAAI,CAAC0sC,MAAL,GAAclvC,QAAd,CAAuB,EAAvB,EAA2B8S,KAA3B,CAAiC,CAAjC,CAA9C;AACA,SAAK2wD,kBAAL,CAAwBjD,yBAAxB;AACD,GAZD;AAcA;AACF;AACA;AACA;AACA;;;AACEx8C,EAAAA,MAAM,CAACjkB,SAAP,CAAiB0jE,kBAAjB,GAAsC,UAAUC,QAAV,EAAoB;AACxD,QAAIv8D,IAAI,GAAG,IAAX;;AAEA,QAAI,CAAE,KAAKo8D,aAAP,IAAyBG,QAAQ,KAAK,KAAKJ,gBAA/C,EAAiE;AAC/D,UAAI,KAAKC,aAAT,EAAwB;AACtBvuB,QAAAA,MAAM,CAACoe,aAAP,CAAqB,KAAKmQ,aAA1B;AACD;;AACD,WAAKD,gBAAL,GAAwBI,QAAxB;AACA,WAAKH,aAAL,GAAqBvuB,MAAM,CAACme,WAAP,CAAmB,YAAY;AAClD,aAAK8P,WAAL,GAAmB,KAAKD,KAAxB;AACA,aAAKA,KAAL,GAAa,EAAb;AACA77D,QAAAA,IAAI,CAACs6D,IAAL,CAAU,6BAAV;AACD,OAJoB,EAIlB,KAAK6B,gBAJa,CAArB;AAKD,KAVD,MAUO;AACL,WAAK5B,IAAL,CAAU,iDAAV,EAA6D,KAAK4B,gBAAlE;AACD;AACF,GAhBD;AAkBA;AACF;AACA;AACA;;;AACEt/C,EAAAA,MAAM,CAACjkB,SAAP,CAAiB4jE,WAAjB,GAA+B,UAAU1B,KAAV,EAAiB;AAC9C,QAAIA,KAAK,IAAIV,aAAb,EAA4B;AAC1B,WAAK6B,SAAL,GAAiB7B,aAAa,CAACU,KAAD,CAA9B;AACD,KAFD,MAEO;AACL,YAAM,IAAI7kE,KAAJ,CAAU,4BAA4B6kE,KAAtC,CAAN;AACD;AACF,GAND;AAQA;AACF;AACA;AACA;;;AACEj+C,EAAAA,MAAM,CAACjkB,SAAP,CAAiB6jE,YAAjB,GAAgC,UAAU3B,KAAV,EAAiB;AAC/C,QAAIA,KAAK,IAAIV,aAAb,EAA4B;AAC1B,WAAK4B,UAAL,GAAkB5B,aAAa,CAACU,KAAD,CAA/B;AACD,KAFD,MAEO;AACL,YAAM,IAAI7kE,KAAJ,CAAU,4BAA4B6kE,KAAtC,CAAN;AACD;AACF,GAND;AAQA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;AACEj+C,EAAAA,MAAM,CAACjkB,SAAP,CAAiBqE,KAAjB,GAAyB,UAAUw9D,SAAV,EAAqBK,KAArB,EAA4BhwB,IAA5B,EAAkC;AACzD,QAAI4xB,QAAQ,GAAG,IAAI7B,QAAJ,CAAaJ,SAAb,EAAwBK,KAAxB,EAA+BhwB,IAA/B,EAAqC,KAAK6xB,WAAL,EAArC,CAAf;AACA1B,IAAAA,mBAAmB,CAACyB,QAAD,CAAnB;AACA,SAAKE,WAAL,CAAiBF,QAAjB;AACA,WAAOA,QAAP;AACD,GALD;;AAOA7/C,EAAAA,MAAM,CAACjkB,SAAP,CAAiBgkE,WAAjB,GAA+B,UAAUF,QAAV,EAAoB;AACjD,SAAKb,KAAL,CAAWx3D,IAAX,CAAgBq4D,QAAhB,EADiD,CAGjD;AACA;;;AACA,QAAI3C,YAAY,CAACE,SAAb,KAA2ByC,QAAQ,CAACjC,SAAxC,EAAmD;AACjD,WAAKsB,WAAL,CAAiB13D,IAAjB,CAAsBq4D,QAAtB;AACD;;AAED,QAAIA,QAAQ,CAAC5B,KAAT,IAAkBV,aAAlB,IACFA,aAAa,CAACsC,QAAQ,CAAC5B,KAAV,CAAb,IAAiC,KAAKmB,SADxC,EACmD;AAEjD,UAAI7B,aAAa,CAACsC,QAAQ,CAAC5B,KAAV,CAAb,IAAiC,KAAKkB,UAA1C,EAAsD;AACpD3B,QAAAA,kBAAkB,CAACqC,QAAQ,CAACvB,QAAT,EAAD,CAAlB,CAAwCuB,QAAQ,CAAC7jE,QAAT,EAAxC;AACD;;AAED6jE,MAAAA,QAAQ,CAACz+C,IAAT,GAAgB,KAAKi+C,UAAL,EAAhB;AACD;AACF,GAlBD;;AAoBAr/C,EAAAA,MAAM,CAACjkB,SAAP,CAAiBikE,4BAAjB,GAAgD,UAAUH,QAAV,EAAoB;AAClE,SAAKd,wBAAL,CAA8Bv3D,IAA9B,CAAmCq4D,QAAnC;;AAEA,QAAIA,QAAQ,CAAC5B,KAAT,IAAkBV,aAAlB,IACFA,aAAa,CAACsC,QAAQ,CAAC5B,KAAV,CAAb,IAAiC,KAAKmB,SADxC,EACmD;AAEjD,UAAI7B,aAAa,CAACsC,QAAQ,CAAC5B,KAAV,CAAb,IAAiC,KAAKkB,UAA1C,EAAsD;AACpD3B,QAAAA,kBAAkB,CAACqC,QAAQ,CAACvB,QAAT,EAAD,CAAlB,CAAwCuB,QAAQ,CAAC7jE,QAAT,EAAxC;AACD;;AAED6jE,MAAAA,QAAQ,CAACz+C,IAAT,GAAgB,KAAKi+C,UAAL,EAAhB;AACD;AACF,GAZD;AAcA;AACF;AACA;;;AACEr/C,EAAAA,MAAM,CAACjkB,SAAP,CAAiBkkE,YAAjB,GAAgC,YAAY;AAC1C,SAAK,IAAI5gE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK2/D,KAAL,CAAWvlE,MAA/B,EAAuC4F,CAAC,EAAxC,EAA4C;AAC1C,UAAI,KAAK2/D,KAAL,CAAW3/D,CAAX,EAAc80D,OAAlB,EAA2B;AACzB,eAAO,KAAK6K,KAAL,CAAW3/D,CAAX,EAAc80D,OAArB;AACD;AACF;AACF,GAND;AAQA;AACF;AACA;;;AACEn0C,EAAAA,MAAM,CAACjkB,SAAP,CAAiBmkE,eAAjB,GAAmC,YAAY;AAC7C,SAAK,IAAI7gE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK2/D,KAAL,CAAWvlE,MAA/B,EAAuC4F,CAAC,EAAxC,EAA4C;AAC1C,UAAI,KAAK2/D,KAAL,CAAW3/D,CAAX,EAAc8+D,SAAlB,EAA6B;AAC3B,eAAO,KAAKa,KAAL,CAAW3/D,CAAX,EAAc8+D,SAArB;AACD;AACF;AACF,GAND;;AAQAn+C,EAAAA,MAAM,CAACjkB,SAAP,CAAiBg/C,KAAjB,GAAyB,YAAY;AACnC,QAAIolB,OAAO,GAAGtC,iBAAiB,CAAClkE,SAAD,CAA/B;AACA,WAAO,KAAKyG,KAAL,CAAW+/D,OAAO,CAACvC,SAAnB,EAA8BnB,QAAQ,CAACE,KAAvC,EAA8CP,OAAO,CAACJ,QAAR,CAAiBmE,OAAO,CAAC70C,MAAzB,EAAiC60C,OAAO,CAACxpC,IAAzC,CAA9C,CAAP;AACD,GAHD;;AAKA3W,EAAAA,MAAM,CAACjkB,SAAP,CAAiBqkE,KAAjB,GAAyB,YAAY;AACnC,QAAID,OAAO,GAAGtC,iBAAiB,CAAClkE,SAAD,CAA/B;AACA,WAAO,KAAKyG,KAAL,CAAW+/D,OAAO,CAACvC,SAAnB,EAA8BnB,QAAQ,CAACG,KAAvC,EAA8CR,OAAO,CAACJ,QAAR,CAAiBmE,OAAO,CAAC70C,MAAzB,EAAiC60C,OAAO,CAACxpC,IAAzC,CAA9C,CAAP;AACD,GAHD;;AAKA3W,EAAAA,MAAM,CAACjkB,SAAP,CAAiB0hE,IAAjB,GAAwB,YAAY;AAClC,QAAI0C,OAAO,GAAGtC,iBAAiB,CAAClkE,SAAD,CAA/B;AACA,WAAO,KAAKyG,KAAL,CAAW+/D,OAAO,CAACvC,SAAnB,EAA8BnB,QAAQ,CAACI,IAAvC,EAA6CT,OAAO,CAACJ,QAAR,CAAiBmE,OAAO,CAAC70C,MAAzB,EAAiC60C,OAAO,CAACxpC,IAAzC,CAA7C,CAAP;AACD,GAHD;;AAKA3W,EAAAA,MAAM,CAACjkB,SAAP,CAAiBslB,GAAjB,GAAuB,YAAY;AACjC,QAAI8+C,OAAO,GAAGtC,iBAAiB,CAAClkE,SAAD,CAA/B;AACA,WAAO,KAAKyG,KAAL,CAAW+/D,OAAO,CAACvC,SAAnB,EAA8BnB,QAAQ,CAACK,GAAvC,EAA4CV,OAAO,CAACJ,QAAR,CAAiBmE,OAAO,CAAC70C,MAAzB,EAAiC60C,OAAO,CAACxpC,IAAzC,CAA5C,CAAP;AACD,GAHD;;AAKA3W,EAAAA,MAAM,CAACjkB,SAAP,CAAiByxB,IAAjB,GAAwB,YAAY;AAClC,QAAI2yC,OAAO,GAAGtC,iBAAiB,CAAClkE,SAAD,CAA/B;AACA,WAAO,KAAKyG,KAAL,CAAW+/D,OAAO,CAACvC,SAAnB,EAA8BnB,QAAQ,CAACC,IAAvC,EAA6CN,OAAO,CAACJ,QAAR,CAAiBmE,OAAO,CAAC70C,MAAzB,EAAiC60C,OAAO,CAACxpC,IAAzC,CAA7C,CAAP;AACD,GAHD;;AAKA3W,EAAAA,MAAM,CAACjkB,SAAP,CAAiB2hE,IAAjB,GAAwB,YAAY;AAClC,QAAIyC,OAAO,GAAGtC,iBAAiB,CAAClkE,SAAD,CAA/B;AACA,WAAO,KAAKyG,KAAL,CAAW+/D,OAAO,CAACvC,SAAnB,EAA8BnB,QAAQ,CAACM,IAAvC,EAA6CX,OAAO,CAACJ,QAAR,CAAiBmE,OAAO,CAAC70C,MAAzB,EAAiC60C,OAAO,CAACxpC,IAAzC,CAA7C,CAAP;AACD,GAHD;;AAKA3W,EAAAA,MAAM,CAACjkB,SAAP,CAAiBqB,KAAjB,GAAyB,YAAY;AACnC,QAAI+iE,OAAO,GAAGtC,iBAAiB,CAAClkE,SAAD,CAA/B;AACA,WAAO,KAAKyG,KAAL,CAAW+/D,OAAO,CAACvC,SAAnB,EAA8BnB,QAAQ,CAACO,KAAvC,EAA8CZ,OAAO,CAACJ,QAAR,CAAiBmE,OAAO,CAAC70C,MAAzB,EAAiC60C,OAAO,CAACxpC,IAAzC,CAA9C,CAAP;AACD,GAHD;;AAKA3W,EAAAA,MAAM,CAACjkB,SAAP,CAAiBskE,QAAjB,GAA4B,YAAY;AACtC,QAAIF,OAAO,GAAGtC,iBAAiB,CAAClkE,SAAD,CAA/B;AACA,WAAO,KAAKyG,KAAL,CAAW+/D,OAAO,CAACvC,SAAnB,EAA8BnB,QAAQ,CAACO,KAAvC,EAA8CZ,OAAO,CAACJ,QAAR,CAAiBmE,OAAO,CAAC70C,MAAzB,EAAiC60C,OAAO,CAACxpC,IAAzC,CAA9C,CAAP;AACD,GAHD;AAKA;AACF;AACA;;;AACE3W,EAAAA,MAAM,CAACjkB,SAAP,CAAiBC,QAAjB,GAA4B,YAAY;AACtC,QAAIskE,KAAK,GAAG,EAAZ;;AACA,SAAK,IAAIjhE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK2/D,KAAL,CAAWvlE,MAA/B,EAAuC4F,CAAC,EAAxC,EAA4C;AAC1CihE,MAAAA,KAAK,CAAC94D,IAAN,CAAW,KAAKw3D,KAAL,CAAW3/D,CAAX,EAAcrD,QAAd,EAAX;AACD;;AAED,WAAOskE,KAAK,CAAC9xD,IAAN,CAAW,IAAX,CAAP;AACD,GAPD;AASA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACEwR,EAAAA,MAAM,CAACjkB,SAAP,CAAiBwkE,QAAjB,GAA4B,UAAS59D,OAAT,EAAkB;AAC5C,QAAI69D,OAAO,GAAG,WAAd;AACA,QAAIC,gBAAgB,GAAG,KAAvB;;AAEA,QAAI,OAAO99D,OAAP,KAAmB,QAAvB,EAAiC;AAC/B69D,MAAAA,OAAO,GAAG79D,OAAO,CAAC69D,OAAR,IAAmBA,OAA7B;AACAC,MAAAA,gBAAgB,GAAG99D,OAAO,CAAC89D,gBAAR,IAA4BA,gBAA/C;AACD,KAHD,MAIK,IAAI,OAAO99D,OAAP,KAAmB,QAAvB,EAAiC;AACpC69D,MAAAA,OAAO,GAAG79D,OAAO,IAAI69D,OAArB;AACD;;AAED,QAAIr9D,IAAI,GAAG,IAAX;;AACA,QAAIu9D,IAAI,GAAG,KAAKzB,WAAL,CAAiBxgD,MAAjB,CAAwB,KAAKugD,KAA7B,CAAX;;AACA,QAAIyB,gBAAJ,EAAsB;AACpBC,MAAAA,IAAI,GAAGA,IAAI,CAACtyD,MAAL,CAAY,UAASygC,KAAT,EAAgB;AACjC,eAAO0uB,aAAa,CAAC1uB,KAAK,CAACovB,KAAP,CAAb,IAA8B96D,IAAI,CAACi8D,SAA1C;AACD,OAFM,CAAP;AAGD;;AAED,QAAIuB,OAAO,GAAG,IAAI3vB,MAAM,CAAC9iB,IAAX,CAAgB,CAAC3pB,IAAI,CAACsgB,SAAL,CAAe67C,IAAf,EAAqB99D,SAArB,EAAgC,CAAhC,CAAD,CAAhB,EAAsD,CAAC,YAAD,CAAtD,CAAd;AACA,QAAIg+D,YAAY,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAnB;AACA,QAAIN,OAAO,GAAGA,OAAO,IAAI,WAAzB;AACAI,IAAAA,YAAY,CAACz9C,IAAb,GAAoB6tB,MAAM,CAAC+vB,GAAP,CAAWC,eAAX,CAA2BL,OAA3B,CAApB;AACAC,IAAAA,YAAY,CAACL,QAAb,GAAwBC,OAAO,GAAG,MAAlC;AACAK,IAAAA,QAAQ,CAAC5rD,IAAT,CAAcgsD,WAAd,CAA0BL,YAA1B;AACAA,IAAAA,YAAY,CAACM,KAAb;AACAL,IAAAA,QAAQ,CAAC5rD,IAAT,CAAcksD,WAAd,CAA0BP,YAA1B;AACD,GA5BD;;AA8BA5gD,EAAAA,MAAM,CAACjkB,SAAP,CAAiBqlE,uBAAjB,GAA2C,UAAUC,OAAV,EAAmB;AAC5D,QAAI,CAACjF,OAAO,CAACkF,wBAAb,EAAuC;AACrClF,MAAAA,OAAO,CAACkF,wBAAR,GAAmC,IAAnC;AACA;;AACAtwB,MAAAA,MAAM,CAACme,WAAP,CAAmBiN,OAAO,CAACmF,KAAR,CAAc,IAAd,EAAoB,KAAKC,wBAAzB,EAAmDH,OAAnD,CAAnB,EAAgF/E,oCAAhF;AACD;AACF,GAND;;AAQAt8C,EAAAA,MAAM,CAACjkB,SAAP,CAAiBylE,wBAAjB,GAA4C,UAAUH,OAAV,EAAmB;AAC7D,QAAII,UAAU,GAAG,KAAKvC,WAAL,CAAiBpwD,KAAjB,EAAjB;;AACA,SAAKowD,WAAL,GAAmB,EAAnB;AACA9C,IAAAA,OAAO,CAACsF,QAAR,CAAiBtF,OAAO,CAACuF,YAAR,CAAqBC,SAAtC,EAAiD,YAAY;AAC3D,UAAIH,UAAU,CAAChoE,MAAX,GAAoB,CAAxB,EAA2B;AACzB4nE,QAAAA,OAAO,CAACQ,YAAR,CAAqBzF,OAAO,CAAC0F,SAAR,CAAkBF,SAAvC,EAAkDH,UAAlD;AACD;AACF,KAJD;AAKD,GARD;;AAUAzhD,EAAAA,MAAM,CAACjkB,SAAP,CAAiB+jE,WAAjB,GAA+B,YAAY;AACzC,WAAO,KAAKN,SAAZ;AACD,GAFD;;AAIAx/C,EAAAA,MAAM,CAACjkB,SAAP,CAAiBgmE,oCAAjB,GAAwD,YAAY;AAClE/wB,IAAAA,MAAM,CAACme,WAAP,CAAmBiN,OAAO,CAACmF,KAAR,CAAc,IAAd,EAAoB,KAAKS,4BAAzB,CAAnB,EAA2EzF,2BAA3E;AACD,GAFD;;AAIAv8C,EAAAA,MAAM,CAACjkB,SAAP,CAAiBimE,4BAAjB,GAAgD,YAAY;AAC1D,QAAItB,IAAI,GAAG,EAAX,CAD0D,CAG1D;AACA;AACA;AACA;;AACA,QAAI,KAAK3B,wBAAL,CAA8BtlE,MAA9B,GAAuC,EAA3C,EAA+C;AAC7C;AACD,KAFD,MAEO,IAAI,KAAKslE,wBAAL,CAA8BtlE,MAA9B,GAAuC,GAA3C,EAAgD;AACrDinE,MAAAA,IAAI,GAAG,KAAK3B,wBAAL,CAA8BhlC,MAA9B,CAAqC,CAArC,EAAwC,GAAxC,CAAP;AACD,KAFM,MAEA;AACL2mC,MAAAA,IAAI,GAAG,KAAK3B,wBAAZ;AACA,WAAKA,wBAAL,GAAgC,EAAhC;AACD;;AAED3C,IAAAA,OAAO,CAAC6F,qBAAR,CAA8BvB,IAA9B;AACD,GAjBD;;AAmBA,MAAIwB,uBAAuB,GAAG,UAAUb,OAAV,EAAmB;AAC/CrhD,IAAAA,MAAM,CAACxmB,IAAP,CAAY,IAAZ;AACA,SAAK6nE,OAAL,GAAeA,OAAf;AAEArwB,IAAAA,MAAM,CAACme,WAAP,CAAmBiN,OAAO,CAACmF,KAAR,CAAc,IAAd,EAAoB,KAAKY,mBAAzB,CAAnB,EACED,uBAAuB,CAACE,iBAD1B,EAJ+C,CAO/C;AACA;;AACApxB,IAAAA,MAAM,CAACoe,aAAP,CAAqB,KAAKmQ,aAA1B;AACA,SAAKA,aAAL,GAAqB,IAArB;AACD,GAXD,CAngBW,CA+gBX;;;AACA2C,EAAAA,uBAAuB,CAACE,iBAAxB,GAA4C,IAA5C;AACAF,EAAAA,uBAAuB,CAACnmE,SAAxB,GAAoC5B,MAAM,CAACksB,MAAP,CAAcrG,MAAM,CAACjkB,SAArB,CAApC;AACAmmE,EAAAA,uBAAuB,CAACnmE,SAAxB,CAAkC2G,WAAlC,GAAgDw/D,uBAAhD;;AAEAA,EAAAA,uBAAuB,CAACnmE,SAAxB,CAAkCsmE,kBAAlC,GAAuD,UAAU3B,IAAV,EAAgB;AACrE,QAAIv9D,IAAI,GAAG,IAAX;AACAu9D,IAAAA,IAAI,CAAC94C,OAAL,CAAa,UAAUvG,GAAV,EAAe;AAC1Ble,MAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAAC0F,SAAR,CAAkBhF,GAA9C,EAAmDz7C,GAAnD;AACD,KAFD;AAGD,GALD;;AAOA6gD,EAAAA,uBAAuB,CAACnmE,SAAxB,CAAkComE,mBAAlC,GAAwD,YAAY;AAClE,QAAIh/D,IAAI,GAAG,IAAX;;AAEA,SAAK67D,KAAL,CAAWp3C,OAAX,CAAmB,UAAUvG,GAAV,EAAe;AAChCle,MAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAAC0F,SAAR,CAAkBhF,GAA9C,EAAmDz7C,GAAnD;AACD,KAFD;;AAGA,SAAK29C,KAAL,GAAa,EAAb;;AAEA,SAAK,IAAIlmE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKimE,wBAAL,CAA8BtlE,MAAlD,EAA0DX,CAAC,EAA3D,EAA+D;AAC7D,WAAKuoE,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAAC0F,SAAR,CAAkBS,yBAA9C,EAAyE,KAAKxD,wBAAL,CAA8BjmE,CAA9B,CAAzE;AACD;;AAED,SAAKimE,wBAAL,GAAgC,EAAhC;AACD,GAbD;AAeA;;;AACA3C,EAAAA,OAAO,CAACoG,UAAR,GAAqB,IAAIxiD,MAAJ,EAArB;AAEA;;AACA,MAAI8+C,MAAM,GAAG,YAAY;AACvB,WAAO1C,OAAO,CAACoG,UAAf;AACD,GAFD;;AAIApG,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACAA,EAAAA,OAAO,CAAC0C,MAAR,GAAiBA,MAAjB;AACA1C,EAAAA,OAAO,CAAC4B,QAAR,GAAmBA,QAAnB;AACA5B,EAAAA,OAAO,CAACp8C,MAAR,GAAiBA,MAAjB;AACAo8C,EAAAA,OAAO,CAACK,QAAR,GAAmBA,QAAnB;AACAL,EAAAA,OAAO,CAACc,YAAR,GAAuBA,YAAvB;AACAd,EAAAA,OAAO,CAAC8F,uBAAR,GAAkCA,uBAAlC;AACD,CAzjBD;AA2jBA;AACA;AACA;AACA;AACA;;;AACA,CAAC,YAAY;AACX,MAAIlxB,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;AACAprB,EAAAA,MAAM,CAACqrB,IAAP,GAAcD,OAAd;AAEA,MAAIn6C,SAAS,GAAGqkB,SAAS,CAACrkB,SAA1B;AACA,MAAIwgD,cAAc,GAAG,KAAK,EAAL,GAAU,EAAV,GAAe,IAApC;AACA,MAAIC,oBAAoB,GAAG,GAA3B;AACA,MAAIC,mBAAmB,GAAG,GAA1B;AAEA;AACF;AACA;;AACEvG,EAAAA,OAAO,CAACrB,OAAR,GAAkB/pB,MAAM,CAAC+pB,OAAzB;AACAqB,EAAAA,OAAO,CAACJ,QAAR,GAAmBhrB,MAAM,CAACgrB,QAA1B;AACA,SAAOhrB,MAAM,CAAC+pB,OAAd;AACA,SAAO/pB,MAAM,CAACgrB,QAAd;AAEAI,EAAAA,OAAO,CAACwG,iBAAR,GAA4B;AAC1BC,IAAAA,OAAO,EAAE,GADiB;AAE1BC,IAAAA,iBAAiB,EAAE,GAFO;AAG1BC,IAAAA,qBAAqB,EAAE;AAHG,GAA5B;AAMA3G,EAAAA,OAAO,CAAC4G,eAAR,GAA0B;AACxBC,IAAAA,UAAU,EAAE,YADY;AAExBC,IAAAA,UAAU,EAAE;AAFY,GAA1B;AAKA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACE9G,EAAAA,OAAO,CAACmF,KAAR,GAAgB,YAAY;AAC1B,QAAI5qC,IAAI,GAAG9J,KAAK,CAAC9wB,SAAN,CAAgB+S,KAAhB,CAAsBtV,IAAtB,CAA2BG,SAA3B,CAAX;AACA,QAAIwpE,KAAK,GAAGxsC,IAAI,CAACz2B,KAAL,EAAZ;AACA,QAAI2hB,MAAM,GAAG8U,IAAI,CAACz2B,KAAL,EAAb;AAEAk8D,IAAAA,OAAO,CAACgH,aAAR,CAAsBD,KAAtB,EAA6B,OAA7B;AACA/G,IAAAA,OAAO,CAACgH,aAAR,CAAsBvhD,MAAtB,EAA8B,QAA9B;AACAu6C,IAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmB94B,MAAnB,CAAnB,EAA+C,2BAA/C;AAEA,WAAO,YAAY;AACjB,UAAIyhD,WAAW,GAAGz2C,KAAK,CAAC9wB,SAAN,CAAgB+S,KAAhB,CAAsBtV,IAAtB,CAA2BG,SAA3B,CAAlB;AACA,aAAOkoB,MAAM,CAACjoB,KAAP,CAAaupE,KAAb,EAAoBxsC,IAAI,CAAClY,MAAL,CAAY6kD,WAAZ,CAApB,CAAP;AACD,KAHD;AAID,GAbD;AAeA;AACF;AACA;AACA;;;AACElH,EAAAA,OAAO,CAACzhB,UAAR,GAAqB,UAAU9yB,GAAV,EAAe;AAClC,WAAO,CAAC,EAAEA,GAAG,IAAIA,GAAG,CAACnlB,WAAX,IAA0BmlB,GAAG,CAACruB,IAA9B,IAAsCquB,GAAG,CAACjuB,KAA5C,CAAR;AACD,GAFD;AAIA;AACF;AACA;;;AACEwiE,EAAAA,OAAO,CAAC1rC,OAAR,GAAkB,UAAU7I,GAAV,EAAe;AAC/B,WAAO1tB,MAAM,CAAC4B,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+BquB,GAA/B,MAAwC,gBAA/C;AACD,GAFD;AAIA;AACF;AACA;AACA;;;AACEu0C,EAAAA,OAAO,CAACr5D,IAAR,GAAe,UAAUyd,GAAV,EAAe;AAC5B,QAAIzd,IAAI,GAAG,EAAX;AAEAq5D,IAAAA,OAAO,CAACgH,aAAR,CAAsB5iD,GAAtB,EAA2B,KAA3B;;AAEA,SAAK,IAAI/f,CAAT,IAAc+f,GAAd,EAAmB;AACjBzd,MAAAA,IAAI,CAACyE,IAAL,CAAU/G,CAAV;AACD;;AAED,WAAOsC,IAAP;AACD,GAVD;AAYA;AACF;AACA;AACA;;;AACEq5D,EAAAA,OAAO,CAACn3B,MAAR,GAAiB,UAAUzkB,GAAV,EAAe;AAC9B,QAAIykB,MAAM,GAAG,EAAb;AAEAm3B,IAAAA,OAAO,CAACgH,aAAR,CAAsB5iD,GAAtB,EAA2B,KAA3B;;AAEA,SAAK,IAAI/f,CAAT,IAAc+f,GAAd,EAAmB;AACjBykB,MAAAA,MAAM,CAACz9B,IAAP,CAAYgZ,GAAG,CAAC/f,CAAD,CAAf;AACD;;AAED,WAAOwkC,MAAP;AACD,GAVD;AAYA;AACF;AACA;;;AACEm3B,EAAAA,OAAO,CAACmH,OAAR,GAAkB,UAAU/iD,GAAV,EAAe;AAC/B,QAAI+iD,OAAO,GAAG,EAAd;;AAEA,SAAK,IAAI9iE,CAAT,IAAc+f,GAAd,EAAmB;AACjB+iD,MAAAA,OAAO,CAAC/7D,IAAR,CAAa;AAAEjM,QAAAA,GAAG,EAAEkF,CAAP;AAAUuC,QAAAA,KAAK,EAAEwd,GAAG,CAAC/f,CAAD;AAApB,OAAb;AACD;;AAED,WAAO8iE,OAAP;AACD,GARD;AAUA;AACF;AACA;AACA;;;AACEnH,EAAAA,OAAO,CAACl3D,KAAR,GAAgB,YAAY;AAC1B,QAAIs+D,OAAO,GAAG32C,KAAK,CAAC9wB,SAAN,CAAgB+S,KAAhB,CAAsBtV,IAAtB,CAA2BG,SAA3B,EAAsC,CAAtC,CAAd;AACA,QAAI8pE,SAAS,GAAG,EAAhB;AAEAD,IAAAA,OAAO,CAAC57C,OAAR,CAAgB,UAAUpH,GAAV,EAAe;AAC7B47C,MAAAA,OAAO,CAACmH,OAAR,CAAgB/iD,GAAhB,EAAqBoH,OAArB,CAA6B,UAAU87C,EAAV,EAAc;AACzCD,QAAAA,SAAS,CAACC,EAAE,CAACnoE,GAAJ,CAAT,GAAoBmoE,EAAE,CAAC1gE,KAAvB;AACD,OAFD;AAGD,KAJD;AAMA,WAAOygE,SAAP;AACD,GAXD;;AAaArH,EAAAA,OAAO,CAAChqC,GAAR,GAAc,YAAY;AACxB,WAAO,IAAIvoB,IAAJ,GAAWF,OAAX,EAAP;AACD,GAFD;;AAIAyyD,EAAAA,OAAO,CAACuH,IAAR,GAAe,UAAUz6B,KAAV,EAAiB06B,SAAjB,EAA4B;AACzC,SAAK,IAAIvkE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6pC,KAAK,CAACzvC,MAA1B,EAAkC4F,CAAC,EAAnC,EAAuC;AACrC,UAAIukE,SAAS,CAAC16B,KAAK,CAAC7pC,CAAD,CAAN,CAAb,EAAyB;AACvB,eAAO6pC,KAAK,CAAC7pC,CAAD,CAAZ;AACD;AACF;;AAED,WAAO,IAAP;AACD,GARD;;AAUA+8D,EAAAA,OAAO,CAACzW,QAAR,GAAmB,UAAU99B,GAAV,EAAe7kB,KAAf,EAAsB;AACvC,QAAI6kB,GAAG,YAAYgF,KAAnB,EAA0B;AACxB,aAAOuvC,OAAO,CAACuH,IAAR,CAAa97C,GAAb,EAAkB,UAAUoJ,CAAV,EAAa;AAAE,eAAOA,CAAC,KAAKjuB,KAAb;AAAqB,OAAtD,KAA2D,IAAlE;AAED,KAHD,MAGO;AACL,aAAQA,KAAK,IAAI6kB,GAAjB;AACD;AACF,GAPD;;AASAu0C,EAAAA,OAAO,CAACyH,aAAR,GAAwB,UAAUh8C,GAAV,EAAe7kB,KAAf,EAAsB;AAC5C,QAAI6kB,GAAG,YAAYgF,KAAnB,EAA0B;AACxB,aAAOuvC,OAAO,CAACuH,IAAR,CAAa97C,GAAb,EAAkB,UAAUoJ,CAAV,EAAa;AAAE,eAAOA,CAAC,KAAKjuB,KAAb;AAAqB,OAAtD,KAA2D,IAAlE;AAED,KAHD,MAGO;AACL,aAAOo5D,OAAO,CAACuH,IAAR,CAAavH,OAAO,CAACn3B,MAAR,CAAepd,GAAf,CAAb,EAAkC,UAAUoJ,CAAV,EAAa;AAAE,eAAOA,CAAC,KAAKjuB,KAAb;AAAqB,OAAtE,KAA2E,IAAlF;AACD;AACF,GAPD;AASA;AACF;AACA;AACA;;;AACEo5D,EAAAA,OAAO,CAAC0H,QAAR,GAAmB,YAAY;AAC7B,WAAO1H,OAAO,CAACrB,OAAR,CAAgB,OAAhB,EAAyBqB,OAAO,CAAChqC,GAAR,EAAzB,EAAwC5zB,IAAI,CAAC0sC,MAAL,GAAclvC,QAAd,CAAuB,EAAvB,EAA2B8S,KAA3B,CAAiC,CAAjC,CAAxC,CAAP;AACD,GAFD;AAIA;AACF;AACA;AACA;AACA;AACA;AACA;;;AACEstD,EAAAA,OAAO,CAAC2H,QAAR,GAAmB,UAAU9+B,MAAV,EAAkB;AACnC,QAAI++B,OAAO,GAAG,EAAd;AAEA/+B,IAAAA,MAAM,CAACrd,OAAP,CAAe,UAAU5kB,KAAV,EAAiB;AAC9B,UAAIzH,GAAG,GAAGyH,KAAK,CAACijB,OAAN,CAAc,gBAAd,EAAgC,UAAU5mB,CAAV,EAAa2zC,CAAb,EAAgB;AAAE,eAAOA,CAAC,CAACphB,WAAF,KAAkB,GAAzB;AAA+B,OAAjF,EACP3L,OADO,CACC,IADD,EACO,EADP,CAAV;AAGA+9C,MAAAA,OAAO,CAACzoE,GAAD,CAAP,GAAeyH,KAAf;AACD,KALD;AAOA,WAAOghE,OAAP;AACD,GAXD;;AAaA5H,EAAAA,OAAO,CAAC6H,kBAAR,GAA6B,UAAU/hD,MAAV,EAAkB+iB,MAAlB,EAA0B;AACrD,QAAI++B,OAAO,GAAG5H,OAAO,CAAC2H,QAAR,CAAiB9+B,MAAjB,CAAd;AACAm3B,IAAAA,OAAO,CAACr5D,IAAR,CAAaihE,OAAb,EAAsBp8C,OAAtB,CAA8B,UAAUrsB,GAAV,EAAe;AAC3CyoE,MAAAA,OAAO,CAACzoE,GAAD,CAAP,GAAe6gE,OAAO,CAACrB,OAAR,CAAgB,QAAhB,EAA0B74C,MAA1B,EAAkC8hD,OAAO,CAACzoE,GAAD,CAAzC,CAAf;AACD,KAFD;AAGA,WAAOyoE,OAAP;AACD,GAND;;AAQA5H,EAAAA,OAAO,CAAC8H,yBAAR,GAAoC,UAAUhiD,MAAV,EAAkB+iB,MAAlB,EAA0BmnB,SAA1B,EAAqC;AACvE,QAAI4X,OAAO,GAAG5H,OAAO,CAAC2H,QAAR,CAAiB9+B,MAAjB,CAAd;AACAm3B,IAAAA,OAAO,CAACr5D,IAAR,CAAaihE,OAAb,EAAsBp8C,OAAtB,CAA8B,UAAUrsB,GAAV,EAAe;AAC3CyoE,MAAAA,OAAO,CAACzoE,GAAD,CAAP,GAAe6gE,OAAO,CAACrB,OAAR,CAAgB,OAAK3O,SAAL,GAAe,IAA/B,EAAqClqC,MAArC,EAA6C8hD,OAAO,CAACzoE,GAAD,CAApD,CAAf;AACD,KAFD;AAGA,WAAOyoE,OAAP;AACD,GAND;AAQA;AACF;AACA;;;AACE5H,EAAAA,OAAO,CAAC+H,eAAR,GAA0B,YAAY;AACpC,WAAOliD,SAAS,CAACnmB,OAAV,CAAkB,QAAlB,MAAgC,CAAC,CAAxC;AACD,GAFD;;AAIAsgE,EAAAA,OAAO,CAACgI,gBAAR,GAA2B,YAAY;AACrC,WAAOniD,SAAS,CAACnmB,OAAV,CAAkB,SAAlB,MAAiC,CAAC,CAAzC;AACD,GAFD;;AAIAsgE,EAAAA,OAAO,CAACiI,cAAR,GAAyB,YAAY;AACnC,WAAOpiD,SAAS,CAACnmB,OAAV,CAAkB,OAAlB,MAA+B,CAAC,CAAvC;AACD,GAFD;;AAIAsgE,EAAAA,OAAO,CAACkI,uBAAR,GAAkC,YAAY;AAC5C,QAAIC,aAAa,GAAGtiD,SAAS,CAACsC,SAAV,CAAoBtC,SAAS,CAACnmB,OAAV,CAAkB,QAAlB,IAA8B,CAAlD,CAApB;;AACA,QAAIyoE,aAAJ,EAAmB;AACjB,aAAO94C,UAAU,CAAC84C,aAAD,CAAjB;AACD,KAFD,MAEO;AACL,aAAO,CAAC,CAAR;AACD;AACF,GAPD;;AASAnI,EAAAA,OAAO,CAACoI,wBAAR,GAAmC,YAAY;AAC7C,QAAIC,cAAc,GAAGxiD,SAAS,CAACsC,SAAV,CAAoBtC,SAAS,CAACnmB,OAAV,CAAkB,SAAlB,IAA+B,CAAnD,CAArB;;AACA,QAAI2oE,cAAJ,EAAoB;AAClB,aAAOh5C,UAAU,CAACg5C,cAAD,CAAjB;AACD,KAFD,MAEO;AACL,aAAO,CAAC,CAAR;AACD;AACF,GAPD;;AASArI,EAAAA,OAAO,CAACsI,aAAR,GAAwB,UAAUC,MAAV,EAAkB;AACxC,QAAIC,SAAS,GAAG,CACd;AACE94D,MAAAA,EAAE,EAAE,OADN;AAEEijB,MAAAA,KAAK,EAAE;AAFT,KADc,EAKd;AACEjjB,MAAAA,EAAE,EAAE,OADN;AAEEijB,MAAAA,KAAK,EAAE;AAFT,KALc,EASd;AACEjjB,MAAAA,EAAE,EAAE,OADN;AAEEijB,MAAAA,KAAK,EAAE;AAFT,KATc,EAad;AACEjjB,MAAAA,EAAE,EAAE,OADN;AAEEijB,MAAAA,KAAK,EAAE;AAFT,KAbc,EAiBd;AACEjjB,MAAAA,EAAE,EAAE,OADN;AAEEijB,MAAAA,KAAK,EAAE;AAFT,KAjBc,EAqBd;AACEjjB,MAAAA,EAAE,EAAE,OADN;AAEEijB,MAAAA,KAAK,EAAE;AAFT,KArBc,EAyBd;AACEjjB,MAAAA,EAAE,EAAE,OADN;AAEEijB,MAAAA,KAAK,EAAE;AAFT,KAzBc,EA6Bd;AACEjjB,MAAAA,EAAE,EAAE,OADN;AAEEijB,MAAAA,KAAK,EAAE;AAFT,KA7Bc,EAiCd;AACEjjB,MAAAA,EAAE,EAAE,OADN;AAEEijB,MAAAA,KAAK,EAAE;AAFT,KAjCc,EAqCd;AACEjjB,MAAAA,EAAE,EAAE,OADN;AAEEijB,MAAAA,KAAK,EAAE;AAFT,KArCc,CAAhB;AA0CA,WAAO61C,SAAS,CAACpkD,GAAV,CAAc,UAASqkD,QAAT,EAAkB;AAAE,aAAOA,QAAQ,CAAC/4D,EAAhB;AAAmB,KAArD,EAAuDipC,QAAvD,CAAgE4vB,MAAhE,CAAP;AACD,GA5CD;;AA8CAvI,EAAAA,OAAO,CAAC0I,sBAAR,GAAiC,YAAY;AAC3C,QAAIC,aAAa,GAAG9iD,SAAS,CAACnmB,OAAV,CAAkB,OAAlB,CAApB;AACA,QAAIkpE,YAAY,GAAI/iD,SAAS,CAACnmB,OAAV,CAAkB,SAAlB,MAAiC,CAAC,CAAnC,GAAwCmmB,SAAS,CAACsC,SAAV,CAAoBwgD,aAAa,GAAG,CAApC,CAAxC,GAAiF9iD,SAAS,CAACsC,SAAV,CAAoBwgD,aAAa,GAAG,CAApC,CAApG;;AACA,QAAIC,YAAJ,EAAkB;AAChB,aAAOv5C,UAAU,CAACu5C,YAAD,CAAjB;AACD,KAFD,MAEO;AACL,aAAO,CAAC,CAAR;AACD;AACF,GARD;AAUA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACE5I,EAAAA,OAAO,CAACptD,KAAR,GAAgB,UAAU8X,QAAV,EAAoBm+C,OAApB,EAA6B;AAC3C,QAAIzkD,GAAG,GAAG,EAAV;AAEAsG,IAAAA,QAAQ,CAACc,OAAT,CAAiB,UAAU8K,IAAV,EAAgB;AAC/BlS,MAAAA,GAAG,CAACykD,OAAO,CAACvyC,IAAD,CAAR,CAAH,GAAqBA,IAArB;AACD,KAFD;AAIA,WAAOlS,GAAP;AACD,GARD;AAUA;AACF;AACA;AACA;;;AACE47C,EAAAA,OAAO,CAACn/D,GAAR,GAAc,UAAUioE,OAAV,EAAmB;AAC/B,QAAIC,MAAM,GAAG,EAAb;AAEAD,IAAAA,OAAO,CAACt9C,OAAR,CAAgB,UAAUrsB,GAAV,EAAe;AAC7B4pE,MAAAA,MAAM,CAAC5pE,GAAD,CAAN,GAAc,CAAd;AACD,KAFD;AAIA,WAAO4pE,MAAP;AACD,GARD;AAUA;AACF;AACA;AACA;;;AACE/I,EAAAA,OAAO,CAACgJ,kBAAR,GAA6B,UAAUC,IAAV,EAAgBC,IAAhB,EAAsB;AACjD,QAAIC,OAAO,GAAG,EAAd;AAEAnJ,IAAAA,OAAO,CAACr5D,IAAR,CAAauiE,IAAb,EAAmB19C,OAAnB,CAA2B,UAAUrsB,GAAV,EAAe;AACxC,UAAI,EAAEA,GAAG,IAAI8pE,IAAT,CAAJ,EAAoB;AAClBE,QAAAA,OAAO,CAAChqE,GAAD,CAAP,GAAe+pE,IAAI,CAAC/pE,GAAD,CAAnB;AACD;AACF,KAJD;AAMA,WAAOgqE,OAAP;AACD,GAVD;AAYA;AACF;AACA;;;AACEnJ,EAAAA,OAAO,CAACiH,UAAR,GAAqB,UAAUmC,OAAV,EAAmB/hE,OAAnB,EAA4B;AAC/C,QAAI,CAAC+hE,OAAL,EAAc;AACZ,YAAM,IAAIpJ,OAAO,CAACqJ,UAAZ,CAAuBhiE,OAAvB,CAAN;AACD;AACF,GAJD;AAMA;AACF;AACA;;;AACE24D,EAAAA,OAAO,CAACgH,aAAR,GAAwB,UAAUpgE,KAAV,EAAiBU,IAAjB,EAAuB;AAC7C04D,IAAAA,OAAO,CAACiH,UAAR,CAAmBrgE,KAAK,IAAI,IAAT,IAAiB,OAAOA,KAAP,KAAiBJ,SAArD,EACEw5D,OAAO,CAACrB,OAAR,CAAgB,qBAAhB,EAAuCr3D,IAAI,IAAI,SAA/C,CADF;AAEA,WAAOV,KAAP;AACD,GAJD;;AAMAo5D,EAAAA,OAAO,CAACwC,QAAR,GAAmB,UAAU3kB,GAAV,EAAe;AAChC,WAAO11C,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACsgB,SAAL,CAAeo1B,GAAf,CAAX,CAAP;AACD,GAFD;AAIA;AACF;AACA;AACA;;;AACEmiB,EAAAA,OAAO,CAACsJ,UAAR,GAAqB,YAAY;AAC/B,QAAItgD,QAAQ,GAAG4rB,MAAM,CAAC5rB,QAAtB;AACA,WAAOg3C,OAAO,CAACrB,OAAR,CAAgB,WAAhB,EAA6B31C,QAAQ,CAACxD,QAAtC,EAAgDwD,QAAQ,CAAC7H,QAAzD,EAAmE6H,QAAQ,CAACzD,IAA5E,CAAP;AACD,GAHD;;AAKAy6C,EAAAA,OAAO,CAACuJ,kBAAR,GAA6B,UAAS9jE,GAAT,EAAc;AACzC,QAAI+f,QAAQ,GAAGovB,MAAM,CAAC5rB,QAAP,CAAgBxD,QAA/B;;AACA,QAAI/f,GAAG,CAACsW,MAAJ,CAAW,CAAX,EAAcyJ,QAAQ,CAACnoB,MAAvB,MAAmCmoB,QAAvC,EAAiD;AAC/C,aAAOw6C,OAAO,CAACrB,OAAR,CAAgB,QAAhB,EAA0Bn5C,QAA1B,EAAoC/f,GAApC,CAAP;AACD;;AACD,WAAOA,GAAP;AACD,GAND;AAQA;AACF;AACA;AACA;;;AACEu6D,EAAAA,OAAO,CAACwJ,QAAR,GAAmB,YAAY;AAC7B,QAAI;AACF,aAAOj3D,MAAM,CAACxL,IAAP,KAAgBwL,MAAM,CAACk3D,GAA9B;AACD,KAFD,CAEE,OAAOntE,CAAP,EAAU;AACV,aAAO,IAAP;AACD;AACF,GAND;;AAQA0jE,EAAAA,OAAO,CAAC0J,qBAAR,GAAgC,YAAY;AAC1C,WAAO1J,OAAO,CAAC2J,qBAAR,GAAgC,CAAvC;AACD,GAFD;;AAIA3J,EAAAA,OAAO,CAAC4J,KAAR,GAAgB,UAAUzgE,QAAV,EAAoB5C,OAApB,EAA6BsjE,aAA7B,EAA4CC,QAA5C,EAAsD;AACpEA,IAAAA,QAAQ,GAAGA,QAAQ,IAAI,CAAvB;AACAD,IAAAA,aAAa,GAAGA,aAAa,IAAI,IAAjC;AACAtjE,IAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACA,WAAO,IAAIyE,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AAC5C,eAAS2uC,SAAT,CAAmBD,QAAnB,EAA6B;AAC3BF,QAAAA,KAAK,CAACzgE,QAAD,EAAW5C,OAAX,CAAL,CAAyByjE,IAAzB,CAA8B,UAAUnjC,GAAV,EAAe;AAC3C,cAAIA,GAAG,CAACjiB,MAAJ,KAAeo7C,OAAO,CAACwG,iBAAR,CAA0BC,OAA7C,EAAsD;AACpD7+D,YAAAA,OAAO,CAACi/B,GAAG,CAACojC,IAAJ,EAAD,CAAP;AACD,WAFD,MAEO,IAAIH,QAAQ,KAAK,CAAb,KAAmBjjC,GAAG,CAACjiB,MAAJ,IAAco7C,OAAO,CAACwG,iBAAR,CAA0BG,qBAAxC,IAAiE9/B,GAAG,CAACjiB,MAAJ,KAAeo7C,OAAO,CAACwG,iBAAR,CAA0BE,iBAA7H,CAAJ,EAAqJ;AAC1JpjD,YAAAA,UAAU,CAAC,YAAY;AACrBymD,cAAAA,SAAS,CAAC,EAAED,QAAH,CAAT;AACD,aAFS,EAEPD,aAFO,CAAV;AAGD,WAJM,MAIA;AACLzuC,YAAAA,MAAM,CAACyL,GAAD,CAAN;AACD;AACF,SAVD,EAUGqjC,KAVH,CAUS,UAAU5tE,CAAV,EAAa;AACpB8+B,UAAAA,MAAM,CAAC9+B,CAAD,CAAN;AACD,SAZD;AAaD;;AACDytE,MAAAA,SAAS,CAACD,QAAD,CAAT;AACD,KAjBM,CAAP;AAkBD,GAtBD;AAwBA;AACF;AACA;AACA;AACA;AACA;;;AACE9J,EAAAA,OAAO,CAACmK,OAAR,GAAkB,UAAUC,IAAV,EAAgBP,aAAhB,EAA+BC,QAA/B,EAAyC5rC,SAAzC,EAAoD;AACpE8hC,IAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmB6rB,IAAnB,CAAnB,EAA6C,yBAA7C;AACA,QAAIrjE,IAAI,GAAG,IAAX;AACA,QAAIsjE,KAAK,GAAG,CAAZ;AAEAD,IAAAA,IAAI,CAAC;AACHpzC,MAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB,YAAIo+B,SAAS,IAAIA,SAAS,CAAClH,OAA3B,EAAoC;AAClCkH,UAAAA,SAAS,CAAClH,OAAV,CAAkBl3B,IAAlB;AACD;AACF,OALE;AAMHwqE,MAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAenH,IAAf,EAAqB;AAC5B,YAAIgqE,QAAQ,GAAG,CAAf,EAAkB;AAChB,cAAIxG,QAAQ,GAAGuG,aAAa,GAAG,CAAhB,GAAoBznE,IAAI,CAAC0sC,MAAL,EAAnC;AACA8F,UAAAA,MAAM,CAACtxB,UAAP,CAAkB,YAAY;AAC5Bvc,YAAAA,IAAI,CAACojE,OAAL,CAAaC,IAAb,EAAmB9G,QAAQ,GAAG+G,KAA9B,EAAqC,EAAEP,QAAvC,EAAiD5rC,SAAjD;AACD,WAFD,EAEGolC,QAFH;AAGD,SALD,MAKO;AACL,cAAIplC,SAAS,IAAIA,SAAS,CAACosC,OAA3B,EAAoC;AAClCpsC,YAAAA,SAAS,CAACosC,OAAV,CAAkBrjE,GAAlB,EAAuBnH,IAAvB;AACD;AACF;AACF;AAjBE,KAAD,CAAJ;AAmBD,GAxBD;;AA0BAkgE,EAAAA,OAAO,CAACuK,aAAR,GAAwB,UAAUC,UAAV,EAAsB;AAC5C,QAAIC,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAACG,OAAJ,CAAY5K,OAAO,CAAC0F,SAAR,CAAkBmF,aAA9B,EAA6CL,UAA7C;AACD,GAHD;;AAKAxK,EAAAA,OAAO,CAAC8K,qBAAR,GAAgC,UAASC,KAAT,EAAgB;AAC9C,QAAIN,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAACG,OAAJ,CAAY5K,OAAO,CAAC0F,SAAR,CAAkBsF,eAA9B,EAA+CD,KAA/C;AACD,GAHD;;AAKA/K,EAAAA,OAAO,CAACiL,sBAAR,GAAiC,UAASC,MAAT,EAAiB;AAChD,QAAIT,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAACG,OAAJ,CAAY5K,OAAO,CAAC0F,SAAR,CAAkByF,gBAA9B,EAAgDD,MAAhD;AACD,GAHD;;AAKAlL,EAAAA,OAAO,CAAC6F,qBAAR,GAAgC,UAASvB,IAAT,EAAe;AAC7C,QAAImG,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAACG,OAAJ,CAAY5K,OAAO,CAAC0F,SAAR,CAAkB0F,gBAA9B,EAAgD9G,IAAhD;AACD,GAHD;AAKA;AACF;AACA;;;AACEtE,EAAAA,OAAO,CAACqL,YAAR,GAAuB,YAAY,CAAG,CAAtC;;AAEArL,EAAAA,OAAO,CAACqL,YAAR,CAAqB1rE,SAArB,CAA+BioB,IAA/B,GAAsC,UAAUniB,GAAV,EAAe6B,IAAf,EAAqBf,OAArB,EAA8B;AAClE,QAAIyjE,IAAI,GAAG,KAAKsB,uBAAL,CAA6BhkE,IAA7B,CAAX;;AACA,QAAI0uB,GAAG,GAAG,IAAIvoB,IAAJ,GAAWF,OAAX,EAAV;AACA,QAAIg+D,GAAG,GAAG,IAAV;;AACA,QAAIv1C,GAAG,GAAGg0C,IAAN,GAAa3D,cAAjB,EAAiC;AAC/B,UAAI9/D,OAAJ,EAAa;AACX;AACA;AACA,YAAIilE,MAAM,GAAGjlE,OAAO,CAACilE,MAAR,IAAkBlF,oBAA/B;AACA,YAAImF,KAAK,GAAGllE,OAAO,CAACklE,KAAR,IAAiBlF,mBAA7B;AACA,YAAIkD,GAAG,GAAGljE,OAAO,CAACkjE,GAAR,IAAe,CAAzB;AACA,YAAIzkB,IAAI,GAAGz+C,OAAO,CAACy+C,IAAR,IAAgB,CAA3B;AACAumB,QAAAA,GAAG,GAAGh5D,MAAM,CAACqV,IAAP,CAAY,EAAZ,EAAgBtgB,IAAhB,EAAsB,WAASmkE,KAAT,GAAe,WAAf,GAA2BD,MAA3B,GAAkC,QAAlC,GAA2C/B,GAA3C,GAA+C,SAA/C,GAAyDzkB,IAA/E,CAAN;;AACA,YAAIumB,GAAG,CAACviD,QAAJ,KAAiBvjB,GAArB,EAA0B;AACxB8lE,UAAAA,GAAG,GAAGh5D,MAAM,CAACqV,IAAP,CAAYniB,GAAZ,EAAiB6B,IAAjB,EAAuB,WAASmkE,KAAT,GAAe,WAAf,GAA2BD,MAA3B,GAAkC,QAAlC,GAA2C/B,GAA3C,GAA+C,SAA/C,GAAyDzkB,IAAhF,CAAN;AACD;AACF,OAXD,MAWO;AACLumB,QAAAA,GAAG,GAAGh5D,MAAM,CAACqV,IAAP,CAAY,EAAZ,EAAgBtgB,IAAhB,CAAN;;AACA,YAAIikE,GAAG,CAACviD,QAAJ,KAAiBvjB,GAArB,EAA0B;AACxB8lE,UAAAA,GAAG,GAAGh5D,MAAM,CAACqV,IAAP,CAAYniB,GAAZ,EAAiB6B,IAAjB,CAAN;AACD;AACF;;AACD,WAAKokE,uBAAL,CAA6BpkE,IAA7B,EAAmC0uB,GAAnC;AACD;;AACD,WAAOu1C,GAAP;AACD,GAzBD;;AA2BAvL,EAAAA,OAAO,CAACqL,YAAR,CAAqB1rE,SAArB,CAA+BuI,KAA/B,GAAuC,UAAUZ,IAAV,EAAgB;AACrD,QAAInI,GAAG,GAAG,KAAKwsE,mBAAL,CAAyBrkE,IAAzB,CAAV;;AACAstC,IAAAA,MAAM,CAACpiC,YAAP,CAAoBo5D,UAApB,CAA+BzsE,GAA/B;AACD,GAHD;;AAKA6gE,EAAAA,OAAO,CAACqL,YAAR,CAAqB1rE,SAArB,CAA+B2rE,uBAA/B,GAAyD,UAAUhkE,IAAV,EAAgB;AACvE,QAAInI,GAAG,GAAG,KAAKwsE,mBAAL,CAAyBrkE,IAAzB,CAAV;;AACA,QAAIV,KAAK,GAAGguC,MAAM,CAACpiC,YAAP,CAAoBq5D,OAApB,CAA4B1sE,GAA5B,CAAZ;;AAEA,QAAIyH,KAAJ,EAAW;AACT,aAAOkT,QAAQ,CAAClT,KAAD,EAAQ,EAAR,CAAf;AAED,KAHD,MAGO;AACL,aAAO,CAAP;AACD;AACF,GAVD;;AAYAo5D,EAAAA,OAAO,CAACqL,YAAR,CAAqB1rE,SAArB,CAA+B+rE,uBAA/B,GAAyD,UAAUpkE,IAAV,EAAgBwkE,EAAhB,EAAoB;AAC3E,QAAI3sE,GAAG,GAAG,KAAKwsE,mBAAL,CAAyBrkE,IAAzB,CAAV;;AACAstC,IAAAA,MAAM,CAACpiC,YAAP,CAAoBu5D,OAApB,CAA4B5sE,GAA5B,EAAiC,KAAK2sE,EAAtC;AACD,GAHD;;AAKA9L,EAAAA,OAAO,CAACqL,YAAR,CAAqB1rE,SAArB,CAA+BgsE,mBAA/B,GAAqD,UAAUrkE,IAAV,EAAgB;AACnE,WAAO,0BAA0BA,IAAjC;AACD,GAFD;AAIA;AACF;AACA;;;AACE,MAAI0kE,sBAAsB,GAAGhM,OAAO,CAAC2H,QAAR,CAAiB,CAC5C,SAD4C,EAE5C,QAF4C,EAG5C,SAH4C,CAAjB,CAA7B;AAMA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAACiM,mBAAR,GAA8B,YAAY;AACxC,SAAK/d,KAAL,GAAa,EAAb;AACA,SAAKge,UAAL,GAAkBF,sBAAsB,CAACG,OAAzC;AACD,GAHD;;AAKAnM,EAAAA,OAAO,CAACiM,mBAAR,CAA4BtsE,SAA5B,CAAsCysE,iBAAtC,GAA0D,YAAY;AACpE,QAAIrlE,IAAI,GAAG,IAAX;;AACA,QAAI,EAAE,kBAAkB6tC,MAApB,CAAJ,EAAiC;AAC/BorB,MAAAA,OAAO,CAAC0C,MAAR,GAAiBpB,IAAjB,CAAsB,6CAAtB,EAAqEmB,uBAArE;AACA,WAAKyJ,UAAL,GAAkBF,sBAAsB,CAACK,MAAzC;AAED,KAJD,MAIO,IAAIz3B,MAAM,CAAC03B,YAAP,CAAoBJ,UAApB,KAAmCF,sBAAsB,CAACK,MAA9D,EAAsE;AAC3ErM,MAAAA,OAAO,CAAC0C,MAAR,GAAiBpB,IAAjB,CAAsB,sDAAtB,EAA8EmB,uBAA9E;AACA,WAAKyJ,UAAL,GAAkBF,sBAAsB,CAACK,MAAzC;AAED,KAJM,MAIA,IAAI,KAAKH,UAAL,KAAoBF,sBAAsB,CAACO,OAA/C,EAAwD;AAC7D33B,MAAAA,MAAM,CAAC03B,YAAP,CAAoBF,iBAApB,GAAwCpC,IAAxC,CAA6C,UAAUkC,UAAV,EAAsB;AACjEnlE,QAAAA,IAAI,CAACmlE,UAAL,GAAkBA,UAAlB;;AACA,YAAIA,UAAU,KAAKF,sBAAsB,CAACO,OAA1C,EAAmD;AACjDxlE,UAAAA,IAAI,CAACylE,WAAL;AAED,SAHD,MAGO;AACLzlE,UAAAA,IAAI,CAACmnD,KAAL,GAAa,EAAb;AACD;AACF,OARD;AASD;AACF,GArBD;;AAuBA8R,EAAAA,OAAO,CAACiM,mBAAR,CAA4BtsE,SAA5B,CAAsC8sE,IAAtC,GAA6C,UAAU/d,KAAV,EAAiBnoD,OAAjB,EAA0B;AACrE,QAAI,KAAK2lE,UAAL,KAAoBF,sBAAsB,CAACO,OAA/C,EAAwD;AACtD,aAAO,KAAKG,SAAL,CAAe;AAAEhe,QAAAA,KAAK,EAAEA,KAAT;AAAgBnoD,QAAAA,OAAO,EAAEA;AAAzB,OAAf,CAAP;AAED,KAHD,MAGO,IAAI,KAAK2lE,UAAL,KAAoBF,sBAAsB,CAACK,MAA/C,EAAuD;AAC5DrM,MAAAA,OAAO,CAAC0C,MAAR,GAAiBpB,IAAjB,CAAsB,8BAAtB,EACGmB,uBADH,GAEGH,UAFH,CAEc;AACV5T,QAAAA,KAAK,EAAEA,KADG;AAEVnoD,QAAAA,OAAO,EAAEA;AAFC,OAFd;AAOD,KARM,MAQA;AACL,UAAImI,MAAM,GAAG;AAAEggD,QAAAA,KAAK,EAAEA,KAAT;AAAgBnoD,QAAAA,OAAO,EAAEA;AAAzB,OAAb;AACAy5D,MAAAA,OAAO,CAAC0C,MAAR,GAAiBpB,IAAjB,CAAsB,6DAAtB,EACGgB,UADH,CACc5zD,MADd,EAEG+zD,uBAFH;AAGA,WAAKvU,KAAL,CAAW9iD,IAAX,CAAgBsD,MAAhB;AACD;AACF,GAnBD;;AAqBAsxD,EAAAA,OAAO,CAACiM,mBAAR,CAA4BtsE,SAA5B,CAAsC6sE,WAAtC,GAAoD,YAAY;AAC9D,QAAIzlE,IAAI,GAAG,IAAX;AACA,QAAI4lE,aAAa,GAAG,KAAKze,KAAL,CAAW9pC,GAAX,CAAe,UAAU1V,MAAV,EAAkB;AACnD,aAAO3H,IAAI,CAAC2lE,SAAL,CAAeh+D,MAAf,CAAP;AACD,KAFmB,CAApB;AAGA,SAAKw/C,KAAL,GAAa,EAAb;AACA,WAAOye,aAAP;AACD,GAPD;;AASA3M,EAAAA,OAAO,CAACiM,mBAAR,CAA4BtsE,SAA5B,CAAsC+sE,SAAtC,GAAkD,UAAUh+D,MAAV,EAAkB;AAClE,QAAIk+D,YAAY,GAAG,IAAIh4B,MAAM,CAAC03B,YAAX,CAAwB59D,MAAM,CAACggD,KAA/B,EAAsChgD,MAAM,CAACnI,OAA7C,CAAnB;;AACA,QAAImI,MAAM,CAACnI,OAAP,CAAesmE,OAAnB,EAA4B;AAC1BD,MAAAA,YAAY,CAACE,OAAb,GAAuB,YAAY;AACjCp+D,QAAAA,MAAM,CAACnI,OAAP,CAAesmE,OAAf,CAAuBzvE,IAAvB,CAA4BwvE,YAA5B;AACD,OAFD;AAGD;;AACD,WAAOA,YAAP;AACD,GARD;;AAUA5M,EAAAA,OAAO,CAAC+M,SAAR,GAAoB,UAAU79C,MAAV,EAAkBqL,IAAlB,EAAwB;AAC1Cqa,IAAAA,MAAM,CAAC53C,KAAP,CAAaI,IAAb,CAAkB,IAAlB,EAAwB4iE,OAAO,CAACJ,QAAR,CAAiB1wC,MAAjB,EAAyBqL,IAAzB,CAAxB;AACD,GAFD;;AAGAylC,EAAAA,OAAO,CAAC+M,SAAR,CAAkBptE,SAAlB,GAA8B5B,MAAM,CAACksB,MAAP,CAAcjtB,KAAK,CAAC2C,SAApB,CAA9B;AACAqgE,EAAAA,OAAO,CAAC+M,SAAR,CAAkBptE,SAAlB,CAA4B2G,WAA5B,GAA0C05D,OAAO,CAAC+M,SAAlD;;AAEA/M,EAAAA,OAAO,CAACqJ,UAAR,GAAqB,YAAY;AAC/B,QAAI9uC,IAAI,GAAG9J,KAAK,CAAC9wB,SAAN,CAAgB+S,KAAhB,CAAsBtV,IAAtB,CAA2BG,SAA3B,EAAsC,CAAtC,CAAX;AACA,QAAI2xB,MAAM,GAAGqL,IAAI,CAACz2B,KAAL,EAAb;AACAk8D,IAAAA,OAAO,CAAC+M,SAAR,CAAkB3vE,IAAlB,CAAuB,IAAvB,EAA6B8xB,MAA7B,EAAqCqL,IAArC;AACD,GAJD;;AAKAylC,EAAAA,OAAO,CAACqJ,UAAR,CAAmB1pE,SAAnB,GAA+B5B,MAAM,CAACksB,MAAP,CAAc+1C,OAAO,CAAC+M,SAAR,CAAkBptE,SAAhC,CAA/B;AACAqgE,EAAAA,OAAO,CAACqJ,UAAR,CAAmB1pE,SAAnB,CAA6B2G,WAA7B,GAA2C05D,OAAO,CAACqJ,UAAnD;;AAEArJ,EAAAA,OAAO,CAACgN,mBAAR,GAA8B,YAAY;AACxC,QAAIzyC,IAAI,GAAG9J,KAAK,CAAC9wB,SAAN,CAAgB+S,KAAhB,CAAsBtV,IAAtB,CAA2BG,SAA3B,EAAsC,CAAtC,CAAX;AACA,QAAI2xB,MAAM,GAAGqL,IAAI,CAACz2B,KAAL,EAAb;AACAk8D,IAAAA,OAAO,CAAC+M,SAAR,CAAkB3vE,IAAlB,CAAuB,IAAvB,EAA6B8xB,MAA7B,EAAqCqL,IAArC;AACD,GAJD;;AAKAylC,EAAAA,OAAO,CAACgN,mBAAR,CAA4BrtE,SAA5B,GAAwC5B,MAAM,CAACksB,MAAP,CAAc+1C,OAAO,CAAC+M,SAAR,CAAkBptE,SAAhC,CAAxC;AACAqgE,EAAAA,OAAO,CAACgN,mBAAR,CAA4BrtE,SAA5B,CAAsC2G,WAAtC,GAAoD05D,OAAO,CAACgN,mBAA5D;;AAEAhN,EAAAA,OAAO,CAACiN,UAAR,GAAqB,YAAY;AAC/B,QAAI1yC,IAAI,GAAG9J,KAAK,CAAC9wB,SAAN,CAAgB+S,KAAhB,CAAsBtV,IAAtB,CAA2BG,SAA3B,EAAsC,CAAtC,CAAX;AACA,QAAI2xB,MAAM,GAAGqL,IAAI,CAACz2B,KAAL,EAAb;AACAk8D,IAAAA,OAAO,CAAC+M,SAAR,CAAkB3vE,IAAlB,CAAuB,IAAvB,EAA6B8xB,MAA7B,EAAqCqL,IAArC;AACD,GAJD;;AAKAylC,EAAAA,OAAO,CAACiN,UAAR,CAAmBttE,SAAnB,GAA+B5B,MAAM,CAACksB,MAAP,CAAc+1C,OAAO,CAAC+M,SAAR,CAAkBptE,SAAhC,CAA/B;AACAqgE,EAAAA,OAAO,CAACiN,UAAR,CAAmBttE,SAAnB,CAA6B2G,WAA7B,GAA2C05D,OAAO,CAACiN,UAAnD;;AAEAjN,EAAAA,OAAO,CAACkN,YAAR,GAAuB,UAASh5D,IAAT,EAAe7M,OAAf,EAAwBJ,GAAxB,EAA4B;AACjD,QAAIjG,KAAK,GAAG,EAAZ;AACAA,IAAAA,KAAK,CAACkT,IAAN,GAAaA,IAAb;AACAlT,IAAAA,KAAK,CAACqG,OAAN,GAAgBA,OAAhB;AACArG,IAAAA,KAAK,CAACusC,KAAN,GAAcvwC,KAAK,CAACqK,OAAD,CAAnB;AACArG,IAAAA,KAAK,CAACiG,GAAN,GAAYA,GAAZ;AACA,WAAOjG,KAAP;AACD,GAPD,CAzoBW,CAkpBX;;;AACAg/D,EAAAA,OAAO,CAACmN,KAAR,GAAgB,YAAY;AAC1B,QAAIlI,OAAO,GAAGjF,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,EAAd;AACA,WAAOnI,OAAO,CAAC39D,IAAR,KAAiB,4BAAxB;AACD,GAHD;AAID,CAvpBD;AAypBA;AACA;AACA;AACA;AACA;;;AACA,CAAC,YAAY;AACX,MAAIstC,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;AAEA,MAAIqN,UAAU,GAAG,SAAjB;AAEA;AACF;AACA;;AACE,MAAI3H,SAAS,GAAG1F,OAAO,CAAC2H,QAAR,CAAiB,CAC/B,aAD+B,EAE/B,aAF+B,EAG/B,MAH+B,EAI/B,aAJ+B,EAK/B,cAL+B,EAM/B,WAN+B,EAO/B,eAP+B,EAQ/B,OAR+B,EAS/B,WAT+B,EAU/B,KAV+B,EAW/B,gBAX+B,EAY/B,iBAZ+B,EAa/B,aAb+B,EAc/B,WAd+B,EAe/B,YAf+B,EAgB/B,WAhB+B,EAiB/B,4BAjB+B,EAkB/B,WAlB+B,EAmB/B,YAnB+B,EAoB/B,eApB+B,EAqB/B,iBArB+B,EAsB/B,kBAtB+B,EAuB/B,kBAvB+B,EAwB/B,2BAxB+B,EAyB/B,MAzB+B,EA0B/B,cA1B+B,EA2B/B,uBA3B+B,CAAjB,CAAhB;AA8BA;AACF;AACA;;AACE,MAAIpC,YAAY,GAAGvF,OAAO,CAAC6H,kBAAR,CAA2B,SAA3B,EAAsC,CACvD,YADuD,EAEvD,UAFuD,EAGvD,WAHuD,EAIvD,UAJuD,EAKvD,SALuD,CAAtC,CAAnB;AAQA;AACF;AACA;;AACE,MAAIyF,WAAW,GAAGtN,OAAO,CAAC6H,kBAAR,CAA2B,OAA3B,EAAoC,CACpD,MADoD,EAEpD,QAFoD,EAGpD,SAHoD,EAIpD,UAJoD,EAKpD,cALoD,EAMpD,SANoD,EAOpD,iBAPoD,EAQpD,SARoD,EASpD,OAToD,EAUpD,iBAVoD,EAWpD,2BAXoD,EAYpD,6BAZoD,EAapD,cAboD,EAcpD,KAdoD,EAepD,aAfoD,EAgBpD,4BAhBoD,CAApC,CAAlB;AAmBA;AACF;AACA;;AACE,MAAI0F,eAAe,GAAGvN,OAAO,CAAC6H,kBAAR,CAA2B,WAA3B,EAAwC,CAC5D,cAD4D,EAE5D,iBAF4D,EAG5D,kBAH4D,EAI5D,kBAJ4D,EAK5D,iBAL4D,EAM5D,iBAN4D,EAO5D,qBAP4D,EAQ5D,sBAR4D,EAS5D,aAT4D,EAU5D,MAV4D,EAW5D,WAX4D,CAAxC,CAAtB;AAcA;AACF;AACA;;AACE,MAAI2F,aAAa,GAAGxN,OAAO,CAAC6H,kBAAR,CAA2B,SAA3B,EAAsC,CACxD,MADwD,EAExD,SAFwD,EAGxD,WAHwD,EAIxD,UAJwD,EAKxD,SALwD,EAMxD,YANwD,EAOxD,WAPwD,EAQxD,QARwD,EASxD,KATwD,EAUxD,MAVwD,EAWxD,OAXwD,EAYxD,OAZwD,EAaxD,UAbwD,CAAtC,CAApB;AAiBA;AACF;AACA;;AACE,MAAI4F,gBAAgB,GAAGzN,OAAO,CAAC6H,kBAAR,CAA2B,YAA3B,EAAyC,CAC9D,cAD8D,EAE9D,wBAF8D,CAAzC,CAAvB;AAKA;AACF;AACA;;AACE,MAAI6F,mBAAmB,GAAG1N,OAAO,CAAC6H,kBAAR,CAA2B,eAA3B,EAA4C,CACpE,WADoE,EAEpE,oBAFoE,EAGpE,uBAHoE,EAIpE,mBAJoE,EAKpE,wBALoE,EAMpE,2BANoE,EAOpE,uBAPoE,CAA5C,CAA1B;AAUA;AACF;AACA;;AACE,MAAI8F,YAAY,GAAG,YAAY,CAAG,CAAlC;;AACAA,EAAAA,YAAY,CAACC,aAAb,GAA6B,UAAU15D,IAAV,EAAgBuR,MAAhB,EAAwB/W,MAAxB,EAAgC;AAC3D,WAAO;AACL4d,MAAAA,KAAK,EAAEpY,IADF;AAELof,MAAAA,SAAS,EAAE0sC,OAAO,CAAC0H,QAAR,EAFN;AAGLjiD,MAAAA,MAAM,EAAEA,MAHH;AAIL/W,MAAAA,MAAM,EAAEA;AAJH,KAAP;AAMD,GAPD;;AASAi/D,EAAAA,YAAY,CAACE,cAAb,GAA8B,UAAU35D,IAAV,EAAgBR,OAAhB,EAAyB5T,IAAzB,EAA+BmH,GAA/B,EAAoC;AAChE,WAAO;AACLqlB,MAAAA,KAAK,EAAEpY,IADF;AAELof,MAAAA,SAAS,EAAE5f,OAAO,CAAC4f,SAFd;AAGLxzB,MAAAA,IAAI,EAAEA,IAHD;AAILmH,MAAAA,GAAG,EAAEA,GAAG,IAAI;AAJP,KAAP;AAMD,GAPD;AASA;AACF;AACA;;;AACE,MAAI6mE,YAAY,GAAG,UAAUC,MAAV,EAAkBzzC,SAAlB,EAA6B39B,CAA7B,EAAgC;AACjD,SAAKoxE,MAAL,GAAcA,MAAd;AACA,SAAKr+D,EAAL,GAAUswD,OAAO,CAAC0H,QAAR,EAAV;AACA,SAAKptC,SAAL,GAAiBA,SAAjB;AACA,SAAK39B,CAAL,GAASA,CAAT;AACD,GALD;AAOA;AACF;AACA;AACA;;;AACEmxE,EAAAA,YAAY,CAACnuE,SAAb,CAAuBquE,WAAvB,GAAqC,YAAY;AAC/C,SAAKD,MAAL,CAAYC,WAAZ,CAAwB,KAAK1zC,SAA7B,EAAwC,KAAK5qB,EAA7C;AACD,GAFD;AAIA;AACF;AACA;;;AACE,MAAIu+D,eAAe,GAAG,YAAY;AAChC,SAAKC,QAAL,GAAgB,EAAhB;AACA,SAAKC,eAAL,GAAuB,EAAvB;AACD,GAHD;AAKA;AACF;AACA;AACA;;;AACEF,EAAAA,eAAe,CAACtuE,SAAhB,CAA0ByuE,SAA1B,GAAsC,UAAU9zC,SAAV,EAAqB39B,CAArB,EAAwB;AAC5D,QAAI0/C,GAAG,GAAG,IAAIyxB,YAAJ,CAAiB,IAAjB,EAAuBxzC,SAAvB,EAAkC39B,CAAlC,CAAV;AAEA,SAAKuxE,QAAL,CAAc7xB,GAAG,CAAC3sC,EAAlB,IAAwB2sC,GAAxB;AACA,QAAIgyB,OAAO,GAAG,KAAKF,eAAL,CAAqB7zC,SAArB,KAAmC,EAAjD;AACA+zC,IAAAA,OAAO,CAACjjE,IAAR,CAAaixC,GAAb;AACA,SAAK8xB,eAAL,CAAqB7zC,SAArB,IAAkC+zC,OAAlC;AACA,WAAOhyB,GAAP;AACD,GARD;AAUA;AACF;AACA;;;AACE4xB,EAAAA,eAAe,CAACtuE,SAAhB,CAA0BquE,WAA1B,GAAwC,UAAU1zC,SAAV,EAAqBg0C,KAArB,EAA4B;AAClE,QAAItO,OAAO,CAACzW,QAAR,CAAiB,KAAK4kB,eAAtB,EAAuC7zC,SAAvC,CAAJ,EAAuD;AACrD,WAAK6zC,eAAL,CAAqB7zC,SAArB,IAAkC,KAAK6zC,eAAL,CAAqB7zC,SAArB,EAAgCtoB,MAAhC,CAAuC,UAAU9O,CAAV,EAAa;AAAE,eAAOA,CAAC,CAACwM,EAAF,KAAS4+D,KAAhB;AAAwB,OAA9E,CAAlC;;AAEA,UAAI,KAAKH,eAAL,CAAqB7zC,SAArB,EAAgCj9B,MAAhC,GAAyC,CAA7C,EAAgD;AAC9C,eAAO,KAAK8wE,eAAL,CAAqB7zC,SAArB,CAAP;AACD;AACF;;AAED,QAAI0lC,OAAO,CAACzW,QAAR,CAAiB,KAAK2kB,QAAtB,EAAgCI,KAAhC,CAAJ,EAA4C;AAC1C,aAAO,KAAKJ,QAAL,CAAcI,KAAd,CAAP;AACD;AACF,GAZD;AAcA;AACF;AACA;;;AACEL,EAAAA,eAAe,CAACtuE,SAAhB,CAA0B4uE,mBAA1B,GAAgD,YAAY;AAC1D,WAAOvO,OAAO,CAACn3B,MAAR,CAAe,KAAKslC,eAApB,EAAqCzT,MAArC,CAA4C,UAAU39D,CAAV,EAAayF,CAAb,EAAgB;AACjE,aAAOzF,CAAC,CAACslB,MAAF,CAAS7f,CAAT,CAAP;AACD,KAFM,EAEJ,EAFI,CAAP;AAGD,GAJD;AAMA;AACF;AACA;AACA;;;AACEyrE,EAAAA,eAAe,CAACtuE,SAAhB,CAA0B6uE,gBAA1B,GAA6C,UAAUl0C,SAAV,EAAqB;AAChE,WAAO,KAAK6zC,eAAL,CAAqB7zC,SAArB,KAAmC,EAA1C;AACD,GAFD;AAIA;AACF;AACA;AACA;;;AACE,MAAIm0C,QAAQ,GAAG,UAAUC,QAAV,EAAoB;AACjC,QAAIhgE,MAAM,GAAGggE,QAAQ,IAAI,EAAzB;AAEA,SAAKX,MAAL,GAAc,IAAIE,eAAJ,EAAd;AACA,SAAKU,SAAL,GAAiBjgE,MAAM,CAACigE,SAAP,IAAoB,KAArC;AACD,GALD;AAOA;AACF;AACA;AACA;;;AACEF,EAAAA,QAAQ,CAAC9uE,SAAT,CAAmByuE,SAAnB,GAA+B,UAAU9zC,SAAV,EAAqB39B,CAArB,EAAwB;AACrDqjE,IAAAA,OAAO,CAACgH,aAAR,CAAsB1sC,SAAtB,EAAiC,WAAjC;AACA0lC,IAAAA,OAAO,CAACgH,aAAR,CAAsBrqE,CAAtB,EAAyB,GAAzB;AACAqjE,IAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmB5hD,CAAnB,CAAnB,EAA0C,sBAA1C;AACA,WAAO,KAAKoxE,MAAL,CAAYK,SAAZ,CAAsB9zC,SAAtB,EAAiC39B,CAAjC,CAAP;AACD,GALD;AAOA;AACF;AACA;;;AACE8xE,EAAAA,QAAQ,CAAC9uE,SAAT,CAAmBivE,YAAnB,GAAkC,UAAUjyE,CAAV,EAAa;AAC7CqjE,IAAAA,OAAO,CAACgH,aAAR,CAAsBrqE,CAAtB,EAAyB,GAAzB;AACAqjE,IAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmB5hD,CAAnB,CAAnB,EAA0C,sBAA1C;AACA,WAAO,KAAKoxE,MAAL,CAAYK,SAAZ,CAAsBf,UAAtB,EAAkC1wE,CAAlC,CAAP;AACD,GAJD;AAMA;AACF;AACA;AACA;;;AACE8xE,EAAAA,QAAQ,CAAC9uE,SAAT,CAAmB6uE,gBAAnB,GAAsC,UAAUl0C,SAAV,EAAqB;AACzD,WAAO,KAAKyzC,MAAL,CAAYS,gBAAZ,CAA6Bl0C,SAA7B,CAAP;AACD,GAFD;AAIA;AACF;AACA;AACA;AACA;;;AACEm0C,EAAAA,QAAQ,CAAC9uE,SAAT,CAAmBirE,OAAnB,GAA6B,UAAUtwC,SAAV,EAAqBx6B,IAArB,EAA2B;AACtDkgE,IAAAA,OAAO,CAACgH,aAAR,CAAsB1sC,SAAtB,EAAiC,WAAjC;AACA,QAAIvzB,IAAI,GAAG,IAAX;AACA,QAAI8nE,YAAY,GAAG,KAAKd,MAAL,CAAYS,gBAAZ,CAA6BnB,UAA7B,CAAnB;AACA,QAAIyB,SAAS,GAAG,KAAKf,MAAL,CAAYS,gBAAZ,CAA6Bl0C,SAA7B,CAAhB;;AAEA,QAAI,KAAKq0C,SAAL,IACAr0C,SAAS,KAAK0lC,OAAO,CAAC0F,SAAR,CAAkBhF,GADhC,IAEApmC,SAAS,KAAK0lC,OAAO,CAAC0F,SAAR,CAAkBqJ,eAFhC,IAGAz0C,SAAS,KAAK0lC,OAAO,CAAC0F,SAAR,CAAkBsJ,UAHhC,IAIA10C,SAAS,KAAK0lC,OAAO,CAAC0F,SAAR,CAAkBS,yBAJpC,EAKE;AACAnG,MAAAA,OAAO,CAAC0C,MAAR,GAAiB/jB,KAAjB,CAAuB,sBAAvB,EAA+CrkB,SAA/C,EAA0DmoC,uBAA1D;AACD;;AAED,QACEnoC,SAAS,CAAC20C,UAAV,CAAqBjP,OAAO,CAACwN,aAAR,CAAsB0B,QAA3C,KACApvE,IADA,IAEAA,IAAI,CAACqvE,SAFL,IAGA,EAAErvE,IAAI,YAAYkgE,OAAO,CAACoP,OAA1B,CAJF,EAKE;AACAtvE,MAAAA,IAAI,GAAG,IAAIkgE,OAAO,CAACoP,OAAZ,CAAoBtvE,IAAI,CAACqvE,SAAzB,CAAP;AACD;;AAEDN,IAAAA,YAAY,CAACxsD,MAAb,CAAoBysD,SAApB,EAA+BtjD,OAA/B,CAAuC,UAAU6wB,GAAV,EAAe;AACpD,UAAI;AACFA,QAAAA,GAAG,CAAC1/C,CAAJ,CAAMmD,IAAI,IAAI,IAAd,EAAoBw6B,SAApB,EAA+BvzB,IAA/B;AACD,OAFD,CAEE,OAAOzK,CAAP,EAAU;AACV0jE,QAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,4BAAvB,EAAqDs5B,SAArD,EAAgE+nC,aAAhE,CAA8E/lE,CAA9E,EAAiFmmE,uBAAjF;AACD;AACF,KAND;AAOD,GA/BD;AAiCA;AACF;AACA;AACA;AACA;AACA;;;AACEgM,EAAAA,QAAQ,CAAC9uE,SAAT,CAAmB0vE,MAAnB,GAA4B,YAAY;AACtC,QAAItoE,IAAI,GAAG,IAAX;AACA,WAAO,UAAUjH,IAAV,EAAgBwsB,KAAhB,EAAuB;AAC5BvlB,MAAAA,IAAI,CAAC6jE,OAAL,CAAat+C,KAAb,EAAoBxsB,IAApB;AACD,KAFD;AAGD,GALD;AAOA;AACF;AACA;;;AACE2uE,EAAAA,QAAQ,CAAC9uE,SAAT,CAAmB2vE,cAAnB,GAAoC,YAAY;AAC9C,SAAKvB,MAAL,CAAYQ,mBAAZ,GAAkC/iD,OAAlC,CAA0C,UAAU6wB,GAAV,EAAe;AACvDA,MAAAA,GAAG,CAAC2xB,WAAJ;AACD,KAFD;AAGD,GAJD;;AAMAhO,EAAAA,OAAO,CAACyO,QAAR,GAAmBA,QAAnB;AACAzO,EAAAA,OAAO,CAAC2N,YAAR,GAAuBA,YAAvB;AACA3N,EAAAA,OAAO,CAAC0F,SAAR,GAAoBA,SAApB;AACA1F,EAAAA,OAAO,CAACsN,WAAR,GAAsBA,WAAtB;AACAtN,EAAAA,OAAO,CAAC0N,mBAAR,GAA8BA,mBAA9B;AACA1N,EAAAA,OAAO,CAACyN,gBAAR,GAA2BA,gBAA3B;AACAzN,EAAAA,OAAO,CAACuP,iBAAR,GAA4B9B,gBAA5B,CA5UW,CA4UmC;;AAC9CzN,EAAAA,OAAO,CAACwN,aAAR,GAAwBA,aAAxB;AACAxN,EAAAA,OAAO,CAACuN,eAAR,GAA0BA,eAA1B;AACAvN,EAAAA,OAAO,CAACuF,YAAR,GAAuBA,YAAvB;AACD,CAhVD;AAkVA;AACA;AACA;AACA;AACA;;;AACA,CAAC,YAAW;AACT,MAAI3wB,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;AACAprB,EAAAA,MAAM,CAACqrB,IAAP,GAAcD,OAAd;AAEA;AACH;AACA;AACA;AACA;AACA;;AACG,MAAInuC,MAAM,GAAG,YAAW,CAAE,CAA1B;AAEA;AACH;AACA;;;AACGA,EAAAA,MAAM,CAAClyB,SAAP,CAAiBqW,IAAjB,GAAwB,UAAS3O,OAAT,EAAkB;AACvC,UAAM,IAAI24D,OAAO,CAACgN,mBAAZ,EAAN;AACF,GAFD;AAIA;AACH;AACA;AACA;;;AACGn7C,EAAAA,MAAM,CAAClyB,SAAP,CAAiB6vE,SAAjB,GAA6B,UAAS7yE,CAAT,EAAY;AACtC,UAAM,IAAIqjE,OAAO,CAACgN,mBAAZ,EAAN;AACF,GAFD;AAIA;AACH;AACA;AACA;AACA;;;AACG,MAAIyC,UAAU,GAAG,YAAW;AACzB59C,IAAAA,MAAM,CAACz0B,IAAP,CAAY,IAAZ;AACF,GAFD;;AAGAqyE,EAAAA,UAAU,CAAC9vE,SAAX,GAAuB5B,MAAM,CAACksB,MAAP,CAAc4H,MAAM,CAAClyB,SAArB,CAAvB;AACA8vE,EAAAA,UAAU,CAAC9vE,SAAX,CAAqB2G,WAArB,GAAmCmpE,UAAnC;;AAEAA,EAAAA,UAAU,CAAC9vE,SAAX,CAAqB6vE,SAArB,GAAiC,UAAS7yE,CAAT,EAAY,CAAE,CAA/C;;AACA8yE,EAAAA,UAAU,CAAC9vE,SAAX,CAAqBqW,IAArB,GAA4B,UAAS3O,OAAT,EAAkB,CAAE,CAAhD;AAEA;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;;AACG,MAAIqoE,YAAY,GAAG,UAASnE,GAAT,EAAc10C,MAAd,EAAsB;AACtChF,IAAAA,MAAM,CAACz0B,IAAP,CAAY,IAAZ;AACA,SAAKmV,MAAL,GAAcg5D,GAAd;AACA,SAAK10C,MAAL,GAAcA,MAAM,IAAI,GAAxB;AACF,GAJD;;AAKA64C,EAAAA,YAAY,CAAC/vE,SAAb,GAAyB5B,MAAM,CAACksB,MAAP,CAAc4H,MAAM,CAAClyB,SAArB,CAAzB;AACA+vE,EAAAA,YAAY,CAAC/vE,SAAb,CAAuB2G,WAAvB,GAAqCopE,YAArC;;AAEAA,EAAAA,YAAY,CAAC/vE,SAAb,CAAuBqW,IAAvB,GAA8B,UAAS3O,OAAT,EAAkB;AAC7C,SAAKkL,MAAL,CAAYo9D,WAAZ,CAAwBtoE,OAAxB,EAAiC,KAAKwvB,MAAtC;AACF,GAFD;;AAIA64C,EAAAA,YAAY,CAAC/vE,SAAb,CAAuB6vE,SAAvB,GAAmC,UAAS7yE,CAAT,EAAY;AAC5C,SAAK4V,MAAL,CAAY4U,gBAAZ,CAA6B,SAA7B,EAAwCxqB,CAAxC;AACF,GAFD;AAIA;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACG,MAAIizE,cAAc,GAAG,UAASC,QAAT,EAAmBC,SAAnB,EAA8Bj5C,MAA9B,EAAsC;AACxDhF,IAAAA,MAAM,CAACz0B,IAAP,CAAY,IAAZ;AACA,SAAKgE,KAAL,GAAayuE,QAAb;AACA,SAAKn1D,MAAL,GAAco1D,SAAd;AACA,SAAKj5C,MAAL,GAAcA,MAAM,IAAI,GAAxB;AACF,GALD;;AAMA+4C,EAAAA,cAAc,CAACjwE,SAAf,GAA2B5B,MAAM,CAACksB,MAAP,CAAc4H,MAAM,CAAClyB,SAArB,CAA3B;AACAiwE,EAAAA,cAAc,CAACjwE,SAAf,CAAyB2G,WAAzB,GAAuCspE,cAAvC;;AAEAA,EAAAA,cAAc,CAACjwE,SAAf,CAAyBqW,IAAzB,GAAgC,UAAS3O,OAAT,EAAkB;AAC/C,SAAKqT,MAAL,CAAYi1D,WAAZ,CAAwBtoE,OAAxB,EAAiC,KAAKwvB,MAAtC;AACF,GAFD;;AAIA+4C,EAAAA,cAAc,CAACjwE,SAAf,CAAyB6vE,SAAzB,GAAqC,UAAS7yE,CAAT,EAAY;AAC9C,SAAKyE,KAAL,CAAW+lB,gBAAX,CAA4B,SAA5B,EAAuCxqB,CAAvC;AACF,GAFD;AAIA;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;;AACG,MAAIozE,UAAU,GAAG,UAASxqD,IAAT,EAAe;AAC7BsM,IAAAA,MAAM,CAACz0B,IAAP,CAAY,IAAZ;AACA,SAAKmoB,IAAL,GAAYA,IAAZ;AACA,SAAK7V,EAAL,GAAUswD,OAAO,CAAC0H,QAAR,EAAV;AACF,GAJD;;AAKAqI,EAAAA,UAAU,CAACpwE,SAAX,GAAuB5B,MAAM,CAACksB,MAAP,CAAc4H,MAAM,CAAClyB,SAArB,CAAvB;AACAowE,EAAAA,UAAU,CAACpwE,SAAX,CAAqB2G,WAArB,GAAmCypE,UAAnC;;AAEAA,EAAAA,UAAU,CAACpwE,SAAX,CAAqBqW,IAArB,GAA4B,UAAS3O,OAAT,EAAkB;AAC3C,SAAKke,IAAL,CAAUoqD,WAAV,CAAsBtoE,OAAtB;AACF,GAFD;;AAIA0oE,EAAAA,UAAU,CAACpwE,SAAX,CAAqB6vE,SAArB,GAAiC,UAAS7yE,CAAT,EAAY;AAC1C,SAAK4oB,IAAL,CAAU4B,gBAAV,CAA2B,SAA3B,EAAsCxqB,CAAtC;AACF,GAFD;;AAIAozE,EAAAA,UAAU,CAACpwE,SAAX,CAAqBuQ,KAArB,GAA6B,YAAW;AACrC,WAAO,KAAKR,EAAZ;AACF,GAFD;AAIA;AACH;AACA;AACA;AACA;AACA;AACA;;;AACG,MAAIsgE,iBAAiB,GAAG,UAAS72C,OAAT,EAAkB;AACvCtH,IAAAA,MAAM,CAACz0B,IAAP,CAAY,IAAZ;AACA,SAAK6yE,SAAL,GAAiB92C,OAAO,GACrB6mC,OAAO,CAACptD,KAAR,CAAcumB,OAAd,EAAuB,UAASj2B,CAAT,EAAY;AAAE,aAAOA,CAAC,CAACgN,KAAF,EAAP;AAAmB,KAAxD,CADqB,GACuC,EAD/D;AAEA,SAAKggE,gBAAL,GAAwB,EAAxB;AACF,GALD;;AAMAF,EAAAA,iBAAiB,CAACrwE,SAAlB,GAA8B5B,MAAM,CAACksB,MAAP,CAAc4H,MAAM,CAAClyB,SAArB,CAA9B;AACAqwE,EAAAA,iBAAiB,CAACrwE,SAAlB,CAA4B2G,WAA5B,GAA0C0pE,iBAA1C;AAEA;AACH;AACA;;AACGA,EAAAA,iBAAiB,CAACrwE,SAAlB,CAA4BqW,IAA5B,GAAmC,UAAS3O,OAAT,EAAkB;AAClD,SAAK8oE,UAAL,GAAkB3kD,OAAlB,CAA0B,UAASxL,MAAT,EAAiB;AACxC,UAAI;AACDA,QAAAA,MAAM,CAAChK,IAAP,CAAY3O,OAAZ;AAEF,OAHD,CAGE,OAAO/K,CAAP,EAAU,CACT;AACA;AACA;AACF;AACH,KATD;AAUF,GAXD;AAaA;AACH;AACA;AACA;;;AACG0zE,EAAAA,iBAAiB,CAACrwE,SAAlB,CAA4B6vE,SAA5B,GAAwC,UAAS7yE,CAAT,EAAY;AACjD,SAAKuzE,gBAAL,CAAsB9kE,IAAtB,CAA2BzO,CAA3B,EADiD,CAGjD;;AACA,SAAKwzE,UAAL,GAAkB3kD,OAAlB,CAA0B,UAASxL,MAAT,EAAiB;AACxCA,MAAAA,MAAM,CAACwvD,SAAP,CAAiB7yE,CAAjB;AACF,KAFD;AAGF,GAPD;AASA;AACH;AACA;;;AACGqzE,EAAAA,iBAAiB,CAACrwE,SAAlB,CAA4BywE,SAA5B,GAAwC,UAASpwD,MAAT,EAAiB;AACtD,QAAIjZ,IAAI,GAAG,IAAX;AACA,SAAKkpE,SAAL,CAAejwD,MAAM,CAAC9P,KAAP,EAAf,IAAiC8P,MAAjC,CAFsD,CAItD;;AACA,SAAKkwD,gBAAL,CAAsB1kD,OAAtB,CAA8B,UAAS6kD,eAAT,EAA0B;AACrDrwD,MAAAA,MAAM,CAACwvD,SAAP,CAAiBa,eAAjB;AACF,KAFD;AAGF,GARD;AAUA;AACH;AACA;AACA;AACA;;;AACGL,EAAAA,iBAAiB,CAACrwE,SAAlB,CAA4B2wE,YAA5B,GAA2C,UAAStwD,MAAT,EAAiB;AACzD,WAAO,KAAKiwD,SAAL,CAAejwD,MAAM,CAAC9P,KAAP,EAAf,CAAP;AACF,GAFD;AAIA;AACH;AACA;;;AACG8/D,EAAAA,iBAAiB,CAACrwE,SAAlB,CAA4BwwE,UAA5B,GAAyC,UAASnwD,MAAT,EAAiB;AACvD,WAAOggD,OAAO,CAACn3B,MAAR,CAAe,KAAKonC,SAApB,CAAP;AACF,GAFD;AAIA;AACH;AACA;;;AACGD,EAAAA,iBAAiB,CAACrwE,SAAlB,CAA4B4wE,gBAA5B,GAA+C,UAAShrD,IAAT,EAAe;AAC3D,WAAOy6C,OAAO,CAACuH,IAAR,CAAa,KAAK4I,UAAL,EAAb,EAAgC,UAASjtE,CAAT,EAAY;AAChD,aAAOA,CAAC,CAACqiB,IAAF,KAAWA,IAAlB;AACF,KAFM,CAAP;AAGF,GAJD;AAMA;AACH;AACA;AACA;AACA;AACA;AACA;;;AACG,MAAIirD,OAAO,GAAG,UAASlpE,IAAT,EAAempE,QAAf,EAAyBC,UAAzB,EAAqC;AAChD,SAAKppE,IAAL,GAAYA,IAAZ;AACA,SAAKmpE,QAAL,GAAgBA,QAAQ,IAAI,IAAIhB,UAAJ,EAA5B;AACA,SAAKiB,UAAL,GAAkBA,UAAU,IAAI,IAAIjB,UAAJ,EAAhC;AACA,SAAKkB,aAAL,GAAqB,IAAI3Q,OAAO,CAACyO,QAAZ,EAArB;AACA,SAAKmC,WAAL,GAAmB,IAAI5Q,OAAO,CAACyO,QAAZ,EAAnB;AAEA,SAAKgC,QAAL,CAAcjB,SAAd,CAAwBxP,OAAO,CAACmF,KAAR,CAAc,IAAd,EAAoB,KAAK0L,cAAzB,EAAyC,KAAKD,WAA9C,CAAxB;AACA,SAAKF,UAAL,CAAgBlB,SAAhB,CAA0BxP,OAAO,CAACmF,KAAR,CAAc,IAAd,EAAoB,KAAK0L,cAAzB,EAAyC,KAAKF,aAA9C,CAA1B;AACF,GATD;;AAWAH,EAAAA,OAAO,CAAC7wE,SAAR,CAAkBmxE,UAAlB,GAA+B,UAASx2C,SAAT,EAAoB39B,CAApB,EAAuB;AACnDqjE,IAAAA,OAAO,CAACgH,aAAR,CAAsB1sC,SAAtB,EAAiC,WAAjC;AACA0lC,IAAAA,OAAO,CAACgH,aAAR,CAAsBrqE,CAAtB,EAAyB,GAAzB;AACAqjE,IAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmB5hD,CAAnB,CAAnB,EAA0C,sBAA1C;AACA,WAAO,KAAKi0E,WAAL,CAAiBxC,SAAjB,CAA2B9zC,SAA3B,EAAsC39B,CAAtC,CAAP;AACF,GALD;;AAOA6zE,EAAAA,OAAO,CAAC7wE,SAAR,CAAkBoxE,aAAlB,GAAkC,UAASp0E,CAAT,EAAY;AAC3CqjE,IAAAA,OAAO,CAACgH,aAAR,CAAsBrqE,CAAtB,EAAyB,GAAzB;AACAqjE,IAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmB5hD,CAAnB,CAAnB,EAA0C,sBAA1C;AACA,WAAO,KAAKi0E,WAAL,CAAiBhC,YAAjB,CAA8BjyE,CAA9B,CAAP;AACF,GAJD;;AAMA6zE,EAAAA,OAAO,CAAC7wE,SAAR,CAAkBqxE,YAAlB,GAAiC,UAAS12C,SAAT,EAAoB39B,CAApB,EAAuB;AACrDqjE,IAAAA,OAAO,CAACgH,aAAR,CAAsB1sC,SAAtB,EAAiC,WAAjC;AACA0lC,IAAAA,OAAO,CAACgH,aAAR,CAAsBrqE,CAAtB,EAAyB,GAAzB;AACAqjE,IAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmB5hD,CAAnB,CAAnB,EAA0C,sBAA1C;AACA,WAAO,KAAKg0E,aAAL,CAAmBvC,SAAnB,CAA6B9zC,SAA7B,EAAwC39B,CAAxC,CAAP;AACF,GALD;;AAOA6zE,EAAAA,OAAO,CAAC7wE,SAAR,CAAkBsxE,eAAlB,GAAoC,UAASt0E,CAAT,EAAY;AAC7CqjE,IAAAA,OAAO,CAACgH,aAAR,CAAsBrqE,CAAtB,EAAyB,GAAzB;AACAqjE,IAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmB5hD,CAAnB,CAAnB,EAA0C,sBAA1C;AACA,WAAO,KAAKg0E,aAAL,CAAmB/B,YAAnB,CAAgCjyE,CAAhC,CAAP;AACF,GAJD;;AAMA6zE,EAAAA,OAAO,CAAC7wE,SAAR,CAAkB8lE,YAAlB,GAAiC,UAASnrC,SAAT,EAAoBx6B,IAApB,EAA0B;AACxDkgE,IAAAA,OAAO,CAACgH,aAAR,CAAsB1sC,SAAtB,EAAiC,WAAjC;AACA,SAAKm2C,QAAL,CAAcz6D,IAAd,CAAmB;AAACsW,MAAAA,KAAK,EAAEgO,SAAR;AAAmBx6B,MAAAA,IAAI,EAAEA;AAAzB,KAAnB;AACF,GAHD;;AAKA0wE,EAAAA,OAAO,CAAC7wE,SAAR,CAAkBumE,cAAlB,GAAmC,UAAS5rC,SAAT,EAAoBx6B,IAApB,EAA0B;AAC1DkgE,IAAAA,OAAO,CAACgH,aAAR,CAAsB1sC,SAAtB,EAAiC,WAAjC;AACA,SAAKo2C,UAAL,CAAgB16D,IAAhB,CAAqB;AAACsW,MAAAA,KAAK,EAAEgO,SAAR;AAAmBx6B,MAAAA,IAAI,EAAEA;AAAzB,KAArB;AACF,GAHD;;AAKA0wE,EAAAA,OAAO,CAAC7wE,SAAR,CAAkBkxE,cAAlB,GAAmC,UAASpG,GAAT,EAAcyG,YAAd,EAA4B;AAC5D,QAAI7pE,OAAO,GAAG6pE,YAAY,CAACpxE,IAA3B;;AACA,QAAIuH,OAAO,CAACilB,KAAZ,EAAmB;AAChBm+C,MAAAA,GAAG,CAACG,OAAJ,CAAYvjE,OAAO,CAACilB,KAApB,EAA2BjlB,OAAO,CAACvH,IAAnC;AACF;AACH,GALD;AAOA;AACH;AACA;AACA;AACA;AACA;;;AACG0wE,EAAAA,OAAO,CAAC7wE,SAAR,CAAkBwxE,YAAlB,GAAiC,YAAW;AACzC,QAAIpqE,IAAI,GAAG,IAAX;AACA,WAAO,UAASjH,IAAT,EAAew6B,SAAf,EAA0B;AAC9BvzB,MAAAA,IAAI,CAAC0pE,QAAL,CAAcz6D,IAAd,CAAmB;AAACsW,QAAAA,KAAK,EAAEgO,SAAR;AAAmBx6B,QAAAA,IAAI,EAAEA;AAAzB,OAAnB;AACF,KAFD;AAGF,GALD;AAOA;AACH;AACA;AACA;AACA;AACA;;;AACG0wE,EAAAA,OAAO,CAAC7wE,SAAR,CAAkByxE,cAAlB,GAAmC,YAAW;AAC3C,QAAIrqE,IAAI,GAAG,IAAX;AACA,WAAO,UAASjH,IAAT,EAAew6B,SAAf,EAA0B;AAC9BvzB,MAAAA,IAAI,CAAC2pE,UAAL,CAAgB16D,IAAhB,CAAqB;AAACsW,QAAAA,KAAK,EAAEgO,SAAR;AAAmBx6B,QAAAA,IAAI,EAAEA;AAAzB,OAArB;AACF,KAFD;AAGF,GALD;AAOA;AACH;AACA;;;AACG0wE,EAAAA,OAAO,CAAC7wE,SAAR,CAAkB0xE,QAAlB,GAA6B,YAAW;AACrC,SAAKT,WAAL,CAAiBtB,cAAjB;AACA,SAAKqB,aAAL,CAAmBrB,cAAnB;AACF,GAHD;AAKA;AACH;AACA;AACA;AACA;;;AACG,MAAIgC,aAAa,GAAG,UAAShqE,IAAT,EAAeiL,MAAf,EAAuBg/D,MAAvB,EAA+B16C,MAA/B,EAAuC;AACxD25C,IAAAA,OAAO,CAACpzE,IAAR,CAAa,IAAb,EAAmBkK,IAAnB,EAAyB,IAAIsoE,cAAJ,CAAmBr9D,MAAnB,EAA2Bg/D,MAAM,CAACC,aAAlC,EAAiD36C,MAAM,IAAI,GAA3D,CAAzB,EAA0F,IAA1F;AACF,GAFD;;AAGAy6C,EAAAA,aAAa,CAAC3xE,SAAd,GAA0B5B,MAAM,CAACksB,MAAP,CAAcumD,OAAO,CAAC7wE,SAAtB,CAA1B;AACA2xE,EAAAA,aAAa,CAAC3xE,SAAd,CAAwB2G,WAAxB,GAAsCgrE,aAAtC;AAEAtR,EAAAA,OAAO,CAACnuC,MAAR,GAAiBA,MAAjB;AACAmuC,EAAAA,OAAO,CAACyP,UAAR,GAAqBA,UAArB;AACAzP,EAAAA,OAAO,CAAC0P,YAAR,GAAuBA,YAAvB;AACA1P,EAAAA,OAAO,CAAC4P,cAAR,GAAyBA,cAAzB;AACA5P,EAAAA,OAAO,CAAC+P,UAAR,GAAqBA,UAArB;AACA/P,EAAAA,OAAO,CAACgQ,iBAAR,GAA4BA,iBAA5B;AACAhQ,EAAAA,OAAO,CAACwQ,OAAR,GAAkBA,OAAlB;AACAxQ,EAAAA,OAAO,CAACsR,aAAR,GAAwBA,aAAxB;AACF,CA/TD;AAiUA;AACA;AACA;AACA;AACA;;;AACA,CAAC,YAAW;AACT,MAAI18B,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;AACAprB,EAAAA,MAAM,CAACqrB,IAAP,GAAcD,OAAd;AAEA;AACH;AACA;;AACGA,EAAAA,OAAO,CAACyR,aAAR,GAAwBzR,OAAO,CAAC2H,QAAR,CAAiB,CACnC,kBADmC,EAEnC,eAFmC,EAGnC,gBAHmC,EAInC,yBAJmC,EAKnC,yBALmC,EAMnC,qBANmC,EAOnC,uBAPmC,EAQnC,0BARmC,EASnC,eATmC,EAUnC,uBAVmC,EAWnC,mBAXmC,EAYnC,cAZmC,EAanC,iBAbmC,EAcnC,gBAdmC,EAenC,eAfmC,EAgBnC,oBAhBmC,EAiBnC,yBAjBmC,EAkBnC,4BAlBmC,EAmBnC,mBAnBmC,EAoBnC,gBApBmC,EAqBnC,kBArBmC,EAsBnC,yBAtBmC,EAuBnC,uBAvBmC,EAwBnC,gBAxBmC,EAyBnC,YAzBmC,EA0BnC,yBA1BmC,EA2BnC,0BA3BmC,EA4BnC,cA5BmC,EA6BnC,iBA7BmC,EA8BnC,iBA9BmC,CAAjB,CAAxB;AAiCA;AACH;AACA;;AACG3H,EAAAA,OAAO,CAAC0R,qBAAR,GAAgC;AAC7BC,IAAAA,cAAc,EAAE,iCADa;AAE7BC,IAAAA,yBAAyB,EAAE,yCAFE;AAG7BC,IAAAA,6BAA6B,EAAE,yCAHF;AAI7BC,IAAAA,kBAAkB,EAAE,yCAJS;AAK7BC,IAAAA,uBAAuB,EAAE,uCALI;AAM7BC,IAAAA,wBAAwB,EAAE,yCANG;AAO7BC,IAAAA,sBAAsB,EAAE,uCAPK;AAQ7BC,IAAAA,qBAAqB,EAAE;AARM,GAAhC;AAWA;AACH;AACA;;AACGlS,EAAAA,OAAO,CAACmS,aAAR,GAAwBnS,OAAO,CAAC2H,QAAR,CAAiB,CACnC,cADmC,EAEnC,aAFmC,CAAjB,CAAxB;AAKA;AACH;AACA;;AACG,MAAIyK,UAAU,GAAG,YAAW,CAAE,CAA9B;;AACAA,EAAAA,UAAU,CAACC,eAAX,GAA6B;AAC1Br7C,IAAAA,OAAO,EAAE,YAAW,CAAG,CADG;AAE1BszC,IAAAA,OAAO,EAAE,YAAW,CAAG;AAFG,GAA7B;;AAKA8H,EAAAA,UAAU,CAACzyE,SAAX,CAAqBvC,IAArB,GAA4B,UAASqoB,MAAT,EAAiBipD,QAAjB,EAA2B4D,WAA3B,EAAwC;AACjEtS,IAAAA,OAAO,CAACgH,aAAR,CAAsBvhD,MAAtB,EAA8B,QAA9B;AACA,QAAI/W,MAAM,GAAGggE,QAAQ,IAAI,EAAzB;AACA,QAAIxwC,SAAS,GAAGo0C,WAAW,IAAIF,UAAU,CAACC,eAA1C;;AACA,SAAKE,SAAL,CAAe9sD,MAAf,EAAuB/W,MAAvB,EAA+BwvB,SAA/B;AACF,GALD;;AAOAk0C,EAAAA,UAAU,CAACzyE,SAAX,CAAqB4yE,SAArB,GAAiC,UAAS9sD,MAAT,EAAiB/W,MAAjB,EAAyBwvB,SAAzB,EAAoC;AAClE,UAAM,IAAI8hC,OAAO,CAACgN,mBAAZ,EAAN;AACF,GAFD;AAIA;AACH;AACA;;;AACG,MAAIwF,UAAU,GAAG,YAAW;AACzBJ,IAAAA,UAAU,CAACh1E,IAAX,CAAgB,IAAhB;AACF,GAFD;;AAGAo1E,EAAAA,UAAU,CAAC7yE,SAAX,GAAuB5B,MAAM,CAACksB,MAAP,CAAcmoD,UAAU,CAACzyE,SAAzB,CAAvB;AACA6yE,EAAAA,UAAU,CAAC7yE,SAAX,CAAqB2G,WAArB,GAAmCksE,UAAnC;;AAEAA,EAAAA,UAAU,CAAC7yE,SAAX,CAAqB4yE,SAArB,GAAiC,UAAS9sD,MAAT,EAAiB/W,MAAjB,EAAyBwvB,SAAzB,EAAoC;AAClE,QAAIA,SAAS,IAAIA,SAAS,CAACosC,OAA3B,EAAoC;AACjC,UAAIjjE,OAAO,GAAG24D,OAAO,CAACrB,OAAR,CAAgB,0CAAhB,EAA4Dl5C,MAA5D,CAAd;AACAyY,MAAAA,SAAS,CAACosC,OAAV,CAAkB,IAAItK,OAAO,CAACqJ,UAAZ,CAAuBhiE,OAAvB,CAAlB,EAAmD;AAACA,QAAAA,OAAO,EAAEA;AAAV,OAAnD;AACF;AACH,GALD;AAOA;AACH;AACA;;;AACG,MAAIorE,yBAAyB,GAAG,UAASxN,OAAT,EAAkByN,YAAlB,EAAgCC,aAAhC,EAA+C;AAC5EP,IAAAA,UAAU,CAACh1E,IAAX,CAAgB,IAAhB;AACA,SAAK6nE,OAAL,GAAeA,OAAf;AACA,SAAKyN,YAAL,GAAoBA,YAApB;AACA,SAAKC,aAAL,GAAqBA,aAArB;AACA,SAAKC,sBAAL,GAA8B,EAA9B;AAEA,SAAK3N,OAAL,CAAa6L,UAAb,CAAwB6B,aAAxB,EAAuC3S,OAAO,CAACmF,KAAR,CAAc,IAAd,EAAoB,KAAK0N,eAAzB,CAAvC;AACF,GARD;;AAUAJ,EAAAA,yBAAyB,CAAC9yE,SAA1B,GAAsC5B,MAAM,CAACksB,MAAP,CAAcmoD,UAAU,CAACzyE,SAAzB,CAAtC;AACA8yE,EAAAA,yBAAyB,CAAC9yE,SAA1B,CAAoC2G,WAApC,GAAkDmsE,yBAAlD;;AAEAA,EAAAA,yBAAyB,CAAC9yE,SAA1B,CAAoC4yE,SAApC,GAAgD,UAAS9sD,MAAT,EAAiB/W,MAAjB,EAAyBwvB,SAAzB,EAAoC;AACjF,QAAIxqB,OAAO,GAAGssD,OAAO,CAAC2N,YAAR,CAAqBC,aAArB,CAAmC,KAAK8E,YAAxC,EAAsDjtD,MAAtD,EAA8D/W,MAA9D,CAAd;AACA,SAAKkkE,sBAAL,CAA4Bl/D,OAAO,CAAC4f,SAApC,IAAiD4K,SAAjD;AACA,SAAK+mC,OAAL,CAAaQ,YAAb,CAA0B/xD,OAAO,CAAC4Y,KAAlC,EAAyC5Y,OAAzC;AACF,GAJD;;AAMA++D,EAAAA,yBAAyB,CAAC9yE,SAA1B,CAAoCmzE,uBAApC,GAA8D,UAASx/C,SAAT,EAAoB;AAC/E,QAAI4K,SAAS,GAAG,KAAK00C,sBAAL,CAA4Bt/C,SAA5B,KAA0C,IAA1D;;AAEA,QAAI4K,SAAS,IAAI,IAAjB,EAAuB;AACpB,aAAO,KAAK00C,sBAAL,CAA4Bt/C,SAA5B,CAAP;AACF;;AAED,WAAO4K,SAAP;AACF,GARD;;AAUAu0C,EAAAA,yBAAyB,CAAC9yE,SAA1B,CAAoCkzE,eAApC,GAAsD,UAAS/yE,IAAT,EAAe;AAClE,QAAIo+B,SAAS,GAAG,KAAK40C,uBAAL,CAA6BhzE,IAAI,CAACwzB,SAAlC,CAAhB;;AACA,QAAI4K,SAAS,IAAI,IAAjB,EAAuB;AACpB;AACF;;AAED,QAAIp+B,IAAI,CAACmH,GAAL,IAAYi3B,SAAS,CAACosC,OAA1B,EAAmC;AAChCpsC,MAAAA,SAAS,CAACosC,OAAV,CAAkBxqE,IAAI,CAACmH,GAAvB,EAA4BnH,IAAI,CAACA,IAAjC;AAEF,KAHD,MAGO,IAAIo+B,SAAS,CAAClH,OAAd,EAAuB;AAC3BkH,MAAAA,SAAS,CAAClH,OAAV,CAAkBl3B,IAAI,CAACA,IAAvB;AACF;AACH,GAZD;AAcA;AACH;AACA;;;AACG,MAAIizE,qBAAqB,GAAG,UAAS9N,OAAT,EAAkB;AAC3CwN,IAAAA,yBAAyB,CAACr1E,IAA1B,CAA+B,IAA/B,EAAqC6nE,OAArC,EAA8CjF,OAAO,CAAC0F,SAAR,CAAkBsN,WAAhE,EAA6EhT,OAAO,CAAC0F,SAAR,CAAkBuN,YAA/F;AACF,GAFD;;AAGAF,EAAAA,qBAAqB,CAACpzE,SAAtB,GAAkC5B,MAAM,CAACksB,MAAP,CAAcwoD,yBAAyB,CAAC9yE,SAAxC,CAAlC;AACAozE,EAAAA,qBAAqB,CAACpzE,SAAtB,CAAgC2G,WAAhC,GAA8CysE,qBAA9C;AAEA;AACH;AACA;;AACG,MAAIG,2BAA2B,GAAG,UAASjO,OAAT,EAAkB;AACjDwN,IAAAA,yBAAyB,CAACr1E,IAA1B,CAA+B,IAA/B,EAAqC6nE,OAArC,EAA8CjF,OAAO,CAAC0F,SAAR,CAAkByN,cAAhE,EAAgFnT,OAAO,CAAC0F,SAAR,CAAkBqJ,eAAlG;AACF,GAFD;;AAGAmE,EAAAA,2BAA2B,CAACvzE,SAA5B,GAAwC5B,MAAM,CAACksB,MAAP,CAAcwoD,yBAAyB,CAAC9yE,SAAxC,CAAxC;AACAuzE,EAAAA,2BAA2B,CAACvzE,SAA5B,CAAsC2G,WAAtC,GAAoD4sE,2BAApD;AAEA;AACH;AACA;;AACG,MAAIE,cAAc,GAAG,UAASC,cAAT,EAAyBC,SAAzB,EAAoCnqE,QAApC,EAA8C;AAChE62D,IAAAA,OAAO,CAACgH,aAAR,CAAsBqM,cAAtB,EAAsC,gBAAtC;AACArT,IAAAA,OAAO,CAACgH,aAAR,CAAsBsM,SAAtB,EAAiC,WAAjC;AACAtT,IAAAA,OAAO,CAACgH,aAAR,CAAsB79D,QAAtB,EAAgC,UAAhC;AACAipE,IAAAA,UAAU,CAACh1E,IAAX,CAAgB,IAAhB;AACA,SAAKm2E,WAAL,GAAmBvT,OAAO,CAACuJ,kBAAR,CAA2BpgE,QAA3B,CAAnB;AACA,SAAKmqE,SAAL,GAAiBA,SAAjB;AACA,SAAKD,cAAL,GAAsBA,cAAtB;AACF,GARD;;AAUAD,EAAAA,cAAc,CAACzzE,SAAf,GAA2B5B,MAAM,CAACksB,MAAP,CAAcmoD,UAAU,CAACzyE,SAAzB,CAA3B;AACAyzE,EAAAA,cAAc,CAACzzE,SAAf,CAAyB2G,WAAzB,GAAuC8sE,cAAvC;;AAEAA,EAAAA,cAAc,CAACzzE,SAAf,CAAyB4yE,SAAzB,GAAqC,UAAS9sD,MAAT,EAAiB/W,MAAjB,EAAyBwvB,SAAzB,EAAoC;AACtE,QAAIn3B,IAAI,GAAG,IAAX;AACA,QAAIysE,IAAI,GAAG,EAAX;AACAA,IAAAA,IAAI,CAACzsE,IAAI,CAACssE,cAAN,CAAJ,GAA4BtsE,IAAI,CAACusE,SAAjC;AACA,QAAI/sE,OAAO,GAAG;AACXkf,MAAAA,MAAM,EAAE,MADG;AAEX5M,MAAAA,IAAI,EAAE1Q,IAAI,CAACsgB,SAAL,CAAe/Z,MAAM,IAAI,EAAzB,CAFK;AAGXmI,MAAAA,OAAO,EAAE;AACH,kBAAU,kBADP;AAEH,wBAAgB,kBAFb;AAGH,wBAAgB4O,MAHb;AAIH,wBAAgBtd,IAAI,CAACsgB,SAAL,CAAe+qD,IAAf;AAJb;AAHE,KAAd;AAUAxT,IAAAA,OAAO,CAAC4J,KAAR,CAAc7iE,IAAI,CAACwsE,WAAnB,EAAgChtE,OAAhC,EAAyCyjE,IAAzC,CAA8C,UAASnjC,GAAT,EAAa;AACxD3I,MAAAA,SAAS,CAAClH,OAAV,CAAkB6P,GAAlB;AACF,KAFD,EAEGqjC,KAFH,CAES,UAASjjE,GAAT,EAAa;AACnBi3B,MAAAA,SAAS,CAACosC,OAAV,CAAkBrjE,GAAlB;AACF,KAJD;AAKF,GAnBD;AAoBA;AACH;AACA;;;AACG,MAAIwsE,SAAS,GAAG,UAASH,SAAT,EAAoBvqE,MAApB,EAA4B2qE,UAA5B,EAAwC;AACrD1T,IAAAA,OAAO,CAACgH,aAAR,CAAsBsM,SAAtB,EAAiC,WAAjC;AACAtT,IAAAA,OAAO,CAACgH,aAAR,CAAsBj+D,MAAtB,EAA8B,QAA9B;AACAqpE,IAAAA,UAAU,CAACh1E,IAAX,CAAgB,IAAhB;AACAK,IAAAA,GAAG,CAAC+N,MAAJ,CAAWtE,WAAX,GAAyB,IAAIzJ,GAAG,CAACoN,WAAR,CAAoB,EAApB,CAAzB;AACApN,IAAAA,GAAG,CAAC+N,MAAJ,CAAWzC,MAAX,GAAoBA,MAApB;AACA,SAAKuqE,SAAL,GAAiBA,SAAjB;AACA,QAAIK,OAAO,GAAG3T,OAAO,CAACsJ,UAAR,EAAd;AACA,QAAIiK,WAAW,GAAGG,UAAU,KACzBC,OAAO,CAACh7B,QAAR,CAAiB,cAAjB,IACKg7B,OAAO,GAAG,cADf,GAEKA,OAAO,GAAG,MAHU,CAA5B;AAKA,QAAIxqE,QAAQ,GAAG,IAAI1L,GAAG,CAACqlB,QAAR,CAAiBywD,WAAjB,CAAf;AACA,SAAKr8D,MAAL,GAAc,IAAIzZ,GAAG,CAACihE,OAAR,CAAgB;AAACv1D,MAAAA,QAAQ,EAAEA;AAAX,KAAhB,CAAd;AACF,GAfD;;AAgBAsqE,EAAAA,SAAS,CAAC9zE,SAAV,GAAsB5B,MAAM,CAACksB,MAAP,CAAcmoD,UAAU,CAACzyE,SAAzB,CAAtB;AACA8zE,EAAAA,SAAS,CAAC9zE,SAAV,CAAoB2G,WAApB,GAAkCmtE,SAAlC;;AAEAA,EAAAA,SAAS,CAAC9zE,SAAV,CAAoB4yE,SAApB,GAAgC,UAAS9sD,MAAT,EAAiB/W,MAAjB,EAAyBwvB,SAAzB,EAAoC;AACjE,QAAIn3B,IAAI,GAAG,IAAX;AACA,QAAIke,GAAG,GAAG+6C,OAAO,CAAC0C,MAAR,EAAV;;AAEA,QAAI,CAAE1C,OAAO,CAACzW,QAAR,CAAiB,KAAKryC,MAAtB,EAA8BuO,MAA9B,CAAN,EAA6C;AAC1C,UAAIpe,OAAO,GAAG24D,OAAO,CAACrB,OAAR,CAAgB,yCAAhB,EAA2Dl5C,MAA3D,CAAd;AACAyY,MAAAA,SAAS,CAACosC,OAAV,CAAkB,IAAItK,OAAO,CAACqJ,UAAZ,CAAuBhiE,OAAvB,CAAlB,EAAmD;AAACA,QAAAA,OAAO,EAAEA;AAAV,OAAnD;AAEF,KAJD,MAIO;AACJqH,MAAAA,MAAM,GAAG,KAAKklE,gBAAL,CAAsBnuD,MAAtB,EAA8B/W,MAA9B,CAAT;AAEAuW,MAAAA,GAAG,CAAC05B,KAAJ,CAAU,uCAAV,EAAmDl5B,MAAnD,EAA2Dg9C,uBAA3D;AAEA,WAAKvrD,MAAL,CAAYuO,MAAZ,EAAoB/W,MAApB,EACIwR,EADJ,CACO,OADP,EACgB,UAASxM,OAAT,EAAkB;AAC5BA,QAAAA,OAAO,CAACwB,WAAR,CAAoB2B,OAApB,CAA4B,cAA5B,IAA8C9P,IAAI,CAACusE,SAAnD;AACF,OAHJ,EAIIt9D,IAJJ,CAIS,UAAS/O,GAAT,EAAcnH,IAAd,EAAoB;AACvB,YAAI;AACD,cAAImH,GAAJ,EAAS;AACN,gBAAIA,GAAG,CAAChK,IAAJ,KAAa+iE,OAAO,CAAC6T,aAAR,CAAsBC,sBAAvC,EAA+D;AAC5D51C,cAAAA,SAAS,CAAC61C,WAAV;AACF,aAFD,MAEO,IAAI71C,SAAS,CAAC81C,YAAV,KAA2B/sE,GAAG,CAAChK,IAAJ,KAAa+iE,OAAO,CAAC6T,aAAR,CAAsBI,uBAAnC,IAA8DhtE,GAAG,CAAC+P,UAAJ,KAAmB,GAA5G,CAAJ,EAAsH;AAC1HknB,cAAAA,SAAS,CAAC81C,YAAV;AACF,aAFM,MAEA;AACJ;AACA;AACA;AACA,kBAAIhzE,KAAK,GAAG,EAAZ;AACAA,cAAAA,KAAK,CAACkT,IAAN,GAAajN,GAAG,CAAChK,IAAjB;AACA+D,cAAAA,KAAK,CAACqG,OAAN,GAAgBJ,GAAG,CAACI,OAApB;AACArG,cAAAA,KAAK,CAACusC,KAAN,GAActmC,GAAG,CAACsmC,KAAJ,GAAYtmC,GAAG,CAACsmC,KAAJ,CAAUz7B,KAAV,CAAgB,IAAhB,CAAZ,GAAoC,EAAlD;AACAosB,cAAAA,SAAS,CAACosC,OAAV,CAAkBtpE,KAAlB,EAAyBlB,IAAzB;AACF;;AAEDmlB,YAAAA,GAAG,CAAC05B,KAAJ,CAAU,0CAAV,EAAsDl5B,MAAtD,EAA8Dtd,IAAI,CAACsgB,SAAL,CAAexhB,GAAf,CAA9D,EAAmFw7D,uBAAnF;AAEF,WAlBD,MAkBO;AACJx9C,YAAAA,GAAG,CAAC05B,KAAJ,CAAU,0CAAV,EAAsDl5B,MAAtD,EAA8D68C,UAA9D,CAAyExiE,IAAzE,EAA+E2iE,uBAA/E;AACAvkC,YAAAA,SAAS,CAAClH,OAAV,CAAkBl3B,IAAlB;AACF;AACH,SAvBD,CAuBE,OAAOxD,CAAP,EAAU;AACT0jE,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,gDAAvB,EAAyEykB,MAAzE,EACO48C,aADP,CACqB/lE,CADrB,EACwBmmE,uBADxB;AAEF;AACH,OAhCJ;AAiCF;AACH,GA/CD;;AAiDAgR,EAAAA,SAAS,CAAC9zE,SAAV,CAAoBu0E,4BAApB,GAAmD,UAAUzuD,MAAV,EAAkB;AAClE,WAAOA,MAAM,KAAKu6C,OAAO,CAACyR,aAAR,CAAsB0C,gBAAjC,IACJ1uD,MAAM,KAAKu6C,OAAO,CAACyR,aAAR,CAAsB2C,aAD7B,IAEJ3uD,MAAM,KAAKu6C,OAAO,CAACyR,aAAR,CAAsB4C,cAF7B,IAGJ5uD,MAAM,KAAKu6C,OAAO,CAACyR,aAAR,CAAsB6C,mBAHpC;AAIF,GALD;;AAOAb,EAAAA,SAAS,CAAC9zE,SAAV,CAAoBi0E,gBAApB,GAAuC,UAASnuD,MAAT,EAAiB/W,MAAjB,EAAyB;AAC7D,YAAQ+W,MAAR;AACG,WAAKu6C,OAAO,CAACyR,aAAR,CAAsB8C,0BAA3B;AACG7lE,QAAAA,MAAM,CAAC8lE,aAAP,GAAuB,KAAKC,4BAAL,CAAkC/lE,MAAM,CAAC8lE,aAAzC,CAAvB;AACA;;AAEH,WAAKxU,OAAO,CAACyR,aAAR,CAAsBiD,2BAA3B;AACGhmE,QAAAA,MAAM,CAACimE,yBAAP,GAAmC,KAAKC,mCAAL,CAC7BlmE,MAAM,CAACimE,yBADsB,CAAnC;AAEA;;AAEH,WAAK3U,OAAO,CAACyR,aAAR,CAAsBoD,0BAA3B;AACGnmE,QAAAA,MAAM,CAACw8D,MAAP,GAAgB,KAAK4J,6BAAL,CAAmCpmE,MAAM,CAACw8D,MAA1C,CAAhB;AACA;;AAEH;AACG;AAfN;;AAkBA,QAAI,KAAKgJ,4BAAL,CAAkCzuD,MAAlC,CAAJ,EAA+C;AAC5C/W,MAAAA,MAAM,CAACqmE,cAAP,GAAwB;AACrBzB,QAAAA,SAAS,EAAE,KAAKA;AADK,OAAxB;AAGF;;AAED,WAAO5kE,MAAP;AACF,GA1BD;;AA4BA+kE,EAAAA,SAAS,CAAC9zE,SAAV,CAAoB80E,4BAApB,GAAmD,UAASjpE,MAAT,EAAiB;AACjE,WAAO;AACJlE,MAAAA,IAAI,EAAEkE,MAAM,CAAClE,IADT;AAEJ0tE,MAAAA,gBAAgB,EAAExpE,MAAM,CAACwpE,gBAFrB;AAGJC,MAAAA,mBAAmB,EAAEzpE,MAAM,CAACypE,mBAHxB;AAIJC,MAAAA,SAAS,EAAE1pE,MAAM,CAAC0pE,SAJd;AAKJC,MAAAA,cAAc,EAAE,KAAKC,wBAAL,CAA8B5pE,MAAM,CAAC2pE,cAArC,CALZ;AAMJE,MAAAA,gBAAgB,EAAE7pE,MAAM,CAAC6pE;AANrB,KAAP;AAQF,GATD;;AAWA5B,EAAAA,SAAS,CAAC9zE,SAAV,CAAoBy1E,wBAApB,GAA+C,UAASzwC,OAAT,EAAkB;AAC9D,WAAO;AACJr9B,MAAAA,IAAI,EAAEq9B,OAAO,CAACr9B,IADV;AAEJguE,MAAAA,iBAAiB,EAAE3wC,OAAO,CAAC2wC,iBAFvB;AAGJC,MAAAA,oBAAoB,EAAE,KAAKC,eAAL,CAAqB7wC,OAAO,CAAC4wC,oBAA7B;AAHlB,KAAP;AAKF,GAND;;AAQA9B,EAAAA,SAAS,CAAC9zE,SAAV,CAAoB61E,eAApB,GAAsC,UAAStnB,KAAT,EAAgB;AACnD,WAAO;AACJunB,MAAAA,QAAQ,EAAIvnB,KAAK,CAACunB,QADd;AAEJnuE,MAAAA,IAAI,EAAQ4mD,KAAK,CAAC5mD;AAFd,KAAP;AAIF,GALD;;AAOAmsE,EAAAA,SAAS,CAAC9zE,SAAV,CAAoBi1E,mCAApB,GAA0D,UAAS7J,KAAT,EAAgB;AACvEA,IAAAA,KAAK,CAACv/C,OAAN,CAAc,UAASkqD,IAAT,EAAe;AAC1B,UAAI,kBAAkBA,IAAtB,EAA4B;AACzBA,QAAAA,IAAI,CAACC,WAAL,GAAmBD,IAAI,CAACE,YAAxB;AACA,eAAOF,IAAI,CAACE,YAAZ;AACF;AACH,KALD;AAOA,WAAO7K,KAAP;AACF,GATD;;AAWA0I,EAAAA,SAAS,CAAC9zE,SAAV,CAAoBm1E,6BAApB,GAAoD,UAAS5J,MAAT,EAAiB;AAClE,QAAI,2BAA2BA,MAA/B,EAAuC;AACpCA,MAAAA,MAAM,CAAC2K,mBAAP,GAA6B3K,MAAM,CAAC4K,qBAApC;AACA,aAAO5K,MAAM,CAAC4K,qBAAd;AACF;;AAED,QAAI,0BAA0B5K,MAA9B,EAAsC;AACnCA,MAAAA,MAAM,CAAC6K,iBAAP,GAA2B7K,MAAM,CAAC8K,oBAAlC;AACA,aAAO9K,MAAM,CAAC8K,oBAAd;AACF;;AAED,QAAI,wBAAwB9K,MAA5B,EAAoC;AACjCA,MAAAA,MAAM,CAAC+K,gBAAP,GAA0B/K,MAAM,CAACgL,kBAAjC;AACA,aAAOhL,MAAM,CAACgL,kBAAd;AACF;;AAED,QAAI,uBAAuBhL,MAA3B,EAAmC;AAChCA,MAAAA,MAAM,CAACiL,cAAP,GAAwBjL,MAAM,CAACkL,iBAA/B;AACA,aAAOlL,MAAM,CAACkL,iBAAd;AACF;;AAEDlL,IAAAA,MAAM,CAACyJ,yBAAP,GAAmC,KAAKC,mCAAL,CAC7B1J,MAAM,CAACyJ,yBADsB,CAAnC;AAGA,WAAOzJ,MAAP;AACF,GAzBD;;AA2BAlL,EAAAA,OAAO,CAACoS,UAAR,GAAqBA,UAArB;AACApS,EAAAA,OAAO,CAACwS,UAAR,GAAqBA,UAArB;AACAxS,EAAAA,OAAO,CAAC+S,qBAAR,GAAgCA,qBAAhC;AACA/S,EAAAA,OAAO,CAACkT,2BAAR,GAAsCA,2BAAtC;AACAlT,EAAAA,OAAO,CAACyT,SAAR,GAAoBA,SAApB;AACAzT,EAAAA,OAAO,CAACoT,cAAR,GAAyBA,cAAzB;AAEF,CAzXD;AA2XA;AACA;AACA;AACA;AACA;;;AACA,CAAC,YAAW;AACT,MAAIx+B,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;AACAprB,EAAAA,MAAM,CAACqrB,IAAP,GAAcD,OAAd;AAEA;AACH;AACA;AACA;AACA;;AACG,MAAIqW,SAAS,GAAG,UAASC,SAAT,EAAoBC,OAApB,EAA6B;AAC1CvW,IAAAA,OAAO,CAACgH,aAAR,CAAsBsP,SAAtB,EAAiC,WAAjC;AACAtW,IAAAA,OAAO,CAACgH,aAAR,CAAsBuP,OAAtB,EAA+B,SAA/B;AACA,SAAKD,SAAL,GAAiBA,SAAjB;AACA,SAAKC,OAAL,GAAeA,OAAf;AACF,GALD;;AAOAF,EAAAA,SAAS,CAAC12E,SAAV,CAAoB62E,eAApB,GAAsC,UAAS3mD,OAAT,EAAkB;AACrD,UAAMmwC,OAAO,CAACgN,mBAAR,EAAN;AACF,GAFD;;AAIAqJ,EAAAA,SAAS,CAAC12E,SAAV,CAAoB82E,YAApB,GAAmC,YAAW;AAC3C,WAAO,KAAKH,SAAZ;AACF,GAFD;;AAIAD,EAAAA,SAAS,CAAC12E,SAAV,CAAoB+2E,UAApB,GAAiC,YAAW;AACzC,WAAO,KAAKH,OAAZ;AACF,GAFD;AAIA;AACH;AACA;AACA;AACA;AACA;;;AACG,MAAII,eAAe,GAAG,UAASL,SAAT,EAAoBC,OAApB,EAA6BK,YAA7B,EAA2C;AAC9D5W,IAAAA,OAAO,CAACgH,aAAR,CAAsBsP,SAAtB,EAAiC,WAAjC;AACAtW,IAAAA,OAAO,CAACgH,aAAR,CAAsBuP,OAAtB,EAA+B,SAA/B;AACAvW,IAAAA,OAAO,CAACgH,aAAR,CAAsB4P,YAAtB,EAAoC,cAApC;AACAP,IAAAA,SAAS,CAACj5E,IAAV,CAAe,IAAf,EAAqBk5E,SAArB,EAAgCC,OAAhC;AACA,SAAKK,YAAL,GAAoBA,YAApB;AACF,GAND;;AAOAD,EAAAA,eAAe,CAACh3E,SAAhB,GAA4B5B,MAAM,CAACksB,MAAP,CAAcosD,SAAS,CAAC12E,SAAxB,CAA5B;AACAg3E,EAAAA,eAAe,CAACh3E,SAAhB,CAA0B2G,WAA1B,GAAwCqwE,eAAxC;;AAEAA,EAAAA,eAAe,CAACh3E,SAAhB,CAA0B62E,eAA1B,GAA4C,UAAS3mD,OAAT,EAAkB;AAC3D,WAAO,KAAK+mD,YAAZ;AACF,GAFD;AAIA;AACH;AACA;AACA;AACA;AACA;;;AACG,MAAIC,mBAAmB,GAAG,UAASP,SAAT,EAAoBC,OAApB,EAA6B1N,OAA7B,EAAsC;AAC7D7I,IAAAA,OAAO,CAACgH,aAAR,CAAsBsP,SAAtB,EAAiC,WAAjC;AACAtW,IAAAA,OAAO,CAACgH,aAAR,CAAsBuP,OAAtB,EAA+B,SAA/B;AACAvW,IAAAA,OAAO,CAACgH,aAAR,CAAsB6B,OAAtB,EAA+B,SAA/B;AACA7I,IAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmBsqB,OAAnB,CAAnB,EAAgD,4BAAhD;AACAwN,IAAAA,SAAS,CAACj5E,IAAV,CAAe,IAAf,EAAqBk5E,SAArB,EAAgCC,OAAhC;AACA,SAAK1N,OAAL,GAAeA,OAAf;AACF,GAPD;;AAQAgO,EAAAA,mBAAmB,CAACl3E,SAApB,GAAgC5B,MAAM,CAACksB,MAAP,CAAcosD,SAAS,CAAC12E,SAAxB,CAAhC;AACAk3E,EAAAA,mBAAmB,CAACl3E,SAApB,CAA8B2G,WAA9B,GAA4CuwE,mBAA5C;;AAEAA,EAAAA,mBAAmB,CAACl3E,SAApB,CAA8B62E,eAA9B,GAAgD,UAAS3mD,OAAT,EAAkB;AAC/D,WAAO,KAAKg5C,OAAL,CAAah5C,OAAb,EAAsB,KAAK4mD,YAAL,EAAtB,EAA2C,KAAKC,UAAL,EAA3C,CAAP;AACF,GAFD;AAIA;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;;AACG,MAAII,UAAU,GAAG,YAAW;AACzB,SAAKC,OAAL,GAAe,EAAf;AACF,GAFD;;AAGAD,EAAAA,UAAU,CAACE,GAAX,GAAiB,SAAjB;;AAEAF,EAAAA,UAAU,CAACn3E,SAAX,CAAqBs3E,KAArB,GAA6B,UAASC,YAAT,EAAuBC,UAAvB,EAAmCC,QAAnC,EAA6C;AACvE,QAAIrwE,IAAI,GAAG,IAAX;;AAEA,QAAI,CAAEmwE,YAAN,EAAoB;AACjB,YAAM,IAAIl6E,KAAJ,CAAU,8BAAV,CAAN;AACF;;AAED,QAAI,CAAEm6E,UAAN,EAAkB;AACf,YAAM,IAAIn6E,KAAJ,CAAU,4BAAV,CAAN;AACF;;AAED,QAAI,CAAEo6E,QAAN,EAAgB;AACb,YAAM,IAAIp6E,KAAJ,CAAU,0BAAV,CAAN;AACF;;AAED,QAAIk6E,YAAY,YAAYzmD,KAA5B,EAAmC;AAChCymD,MAAAA,YAAY,CAAC1rD,OAAb,CAAqB,UAAS8qD,SAAT,EAAoB;AACtCvvE,QAAAA,IAAI,CAACkwE,KAAL,CAAWX,SAAX,EAAsBa,UAAtB,EAAkCC,QAAlC;AACF,OAFD;AAGF,KAJD,MAIO,IAAID,UAAU,YAAY1mD,KAA1B,EAAiC;AACrC0mD,MAAAA,UAAU,CAAC3rD,OAAX,CAAmB,UAAS+qD,OAAT,EAAkB;AAClCxvE,QAAAA,IAAI,CAACkwE,KAAL,CAAWC,YAAX,EAAyBX,OAAzB,EAAkCa,QAAlC;AACF,OAFD;AAGF,KAJM,MAIA;AACJ,UAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AACjC,aAAKC,eAAL,CAAqB,IAAIR,mBAAJ,CAAwBK,YAAxB,EAAsCC,UAAtC,EAAkDC,QAAlD,CAArB;AACF,OAFD,MAEO,IAAIA,QAAQ,YAAY3mD,KAAxB,EAA+B;AACnC,aAAK4mD,eAAL,CAAqB,IAAIV,eAAJ,CAAoBO,YAApB,EAAkCC,UAAlC,EAA8CC,QAA9C,CAArB;AACF,OAFM,MAEA;AACJ,aAAKC,eAAL,CAAqB,IAAIV,eAAJ,CAAoBO,YAApB,EAAkCC,UAAlC,EAA8C,CAACC,QAAD,CAA9C,CAArB;AACF;AACH;;AACD,WAAO,IAAP;AACF,GAjCD;;AAmCAN,EAAAA,UAAU,CAACn3E,SAAX,CAAqB62E,eAArB,GAAuC,UAAS3mD,OAAT,EAAkBymD,SAAlB,EAA6BC,OAA7B,EAAsC;AAC1EvW,IAAAA,OAAO,CAACgH,aAAR,CAAsBsP,SAAtB,EAAiC,WAAjC;AACAtW,IAAAA,OAAO,CAACgH,aAAR,CAAsBuP,OAAtB,EAA+B,SAA/B;AACA,QAAIK,YAAY,GAAG,EAAnB;AAEA,QAAIU,YAAY,GAAG,KAAKP,OAAL,CAAaD,UAAU,CAACE,GAAxB,KAAgC,EAAnD;AACA,QAAIO,KAAK,GAAG,KAAKR,OAAL,CAAaT,SAAb,KAA2B,EAAvC;AAEAM,IAAAA,YAAY,GAAGA,YAAY,CAACv0D,MAAb,CAAoB,KAAKm1D,uBAAL,CAC1BF,YAD0B,EACZznD,OADY,EACHymD,SADG,EACQC,OADR,CAApB,CAAf;AAEAK,IAAAA,YAAY,GAAGA,YAAY,CAACv0D,MAAb,CAAoB,KAAKm1D,uBAAL,CAC1BD,KAD0B,EACnB1nD,OADmB,EACVymD,SADU,EACCC,OADD,CAApB,CAAf;AAGA,WAAOK,YAAP;AACF,GAdD;;AAgBAE,EAAAA,UAAU,CAACn3E,SAAX,CAAqB03E,eAArB,GAAuC,UAASJ,KAAT,EAAgB;AACpD,QAAIM,KAAK,GAAG,KAAKR,OAAL,CAAaE,KAAK,CAACR,YAAN,EAAb,CAAZ;;AAEA,QAAI,CAAEc,KAAN,EAAa;AACVA,MAAAA,KAAK,GAAG,KAAKR,OAAL,CAAaE,KAAK,CAACR,YAAN,EAAb,IAAqC,EAA7C;AACF;;AAED,QAAIgB,SAAS,GAAGF,KAAK,CAACN,KAAK,CAACP,UAAN,EAAD,CAArB;;AAEA,QAAI,CAAEe,SAAN,EAAiB;AACdA,MAAAA,SAAS,GAAGF,KAAK,CAACN,KAAK,CAACP,UAAN,EAAD,CAAL,GAA4B,EAAxC;AACF;;AAEDe,IAAAA,SAAS,CAACrsE,IAAV,CAAe6rE,KAAf;AACF,GAdD;;AAgBAH,EAAAA,UAAU,CAACn3E,SAAX,CAAqB63E,uBAArB,GAA+C,UAASpzD,GAAT,EAAcyL,OAAd,EAAuBymD,SAAvB,EAAkCC,OAAlC,EAA2C;AACvF,QAAIkB,SAAS,GAAG,CAACrzD,GAAG,CAAC0yD,UAAU,CAACE,GAAZ,CAAH,IAAuB,EAAxB,EAA4B30D,MAA5B,CAAmC+B,GAAG,CAACmyD,OAAD,CAAH,IAAgB,EAAnD,CAAhB;AACA,WAAOkB,SAAS,CAAC/c,MAAV,CAAiB,UAASC,IAAT,EAAesc,KAAf,EAAsB;AAC3C,aAAOtc,IAAI,CAACt4C,MAAL,CAAY40D,KAAK,CAACT,eAAN,CAAsB3mD,OAAtB,CAAZ,CAAP;AACF,KAFM,EAEJ,EAFI,CAAP;AAGF,GALD;;AAOAmwC,EAAAA,OAAO,CAAC8W,UAAR,GAAqBA,UAArB;AAEF,CAhKD;AAkKA;AACA;AACA;AACA;AACA;;;AACA,CAAC,YAAY;AACX,MAAIliC,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;AACAprB,EAAAA,MAAM,CAACqrB,IAAP,GAAcD,OAAd;AAEA;AACF;AACA;;AACEA,EAAAA,OAAO,CAAC0X,cAAR,GAAyB1X,OAAO,CAAC2H,QAAR,CAAiB,CACxC,MADwC,EAExC,UAFwC,EAGxC,cAHwC,EAIxC,SAJwC,CAAjB,CAAzB;AAMA3H,EAAAA,OAAO,CAAC2X,eAAR,GAA0B3X,OAAO,CAAC0X,cAAlC;AAEA;AACF;AACA;;AACE1X,EAAAA,OAAO,CAAC4X,gBAAR,GAA2B5X,OAAO,CAAC2H,QAAR,CAAiB,CAC1C,MAD0C,EAE1C,MAF0C,EAG1C,eAH0C,EAI1C,iBAJ0C,EAK1C,SAL0C,EAM1C,SAN0C,EAO1C,kBAP0C,EAQ1C,aAR0C,CAAjB,CAA3B;AAWA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAAC6X,gBAAR,GAA2B7X,OAAO,CAAC2H,QAAR,CAAiB,CAC1C,OAD0C,EAE1C,aAF0C,EAG1C,iBAH0C,EAI1C,oBAJ0C,EAK1C,SAL0C,EAM1C,oBAN0C,EAO1C,uBAP0C,EAQ1C,eAR0C,EAS1C,kBAT0C,EAU1C,qBAV0C,EAW1C,iBAX0C,EAY1C,oBAZ0C,EAa1C,oBAb0C,EAc1C,4BAd0C,CAAjB,CAA3B;AAiBA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAAC8X,YAAR,GAAuB9X,OAAO,CAAC2H,QAAR,CAAiB,CACtC,cADsC,EAEtC,OAFsC,EAGtC,OAHsC,CAAjB,CAAvB;AAKA3H,EAAAA,OAAO,CAAC+X,WAAR,GAAsB/X,OAAO,CAAC8X,YAA9B;AAEA;AACF;AACA;;AACE9X,EAAAA,OAAO,CAACgY,cAAR,GAAyBhY,OAAO,CAAC2H,QAAR,CAAiB,CACxC,OADwC,EAExC,SAFwC,EAGxC,UAHwC,EAIxC,YAJwC,CAAjB,CAAzB;AAOA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAACiY,mBAAR,GAA8BjY,OAAO,CAAC2H,QAAR,CAAiB,CAC7C,MAD6C,EAE7C,YAF6C,EAG7C,WAH6C,EAI7C,MAJ6C,EAK7C,cAL6C,CAAjB,CAA9B;AAOA3H,EAAAA,OAAO,CAACkY,oBAAR,GAA+BlY,OAAO,CAACiY,mBAAvC;AAEAjY,EAAAA,OAAO,CAACmY,wBAAR,GAAmCnY,OAAO,CAACn/D,GAAR,CAAY,CAC7Cm/D,OAAO,CAACiY,mBAAR,CAA4BG,UADiB,EAE7CpY,OAAO,CAACiY,mBAAR,CAA4BI,SAFiB,EAG7CrY,OAAO,CAACiY,mBAAR,CAA4BK,IAHiB,CAAZ,CAAnC;AAMA;AACF;AACA;;AACEtY,EAAAA,OAAO,CAACuY,gBAAR,GAA2BvY,OAAO,CAAC2H,QAAR,CAAiB,CAC1C,MAD0C,EAE1C,UAF0C,EAG1C,SAH0C,EAI1C,YAJ0C,EAK1C,WAL0C,EAM1C,QAN0C,EAO1C,OAP0C,EAQ1C,OAR0C,CAAjB,CAA3B;AAUA3H,EAAAA,OAAO,CAACwY,iBAAR,GAA4BxY,OAAO,CAACuY,gBAApC;AAEAvY,EAAAA,OAAO,CAACyY,qBAAR,GAAgCzY,OAAO,CAAC2H,QAAR,CAAiB,CAC/C,UAD+C,EAE/C,SAF+C,EAG/C,YAH+C,EAI/C,WAJ+C,CAAjB,CAAhC;AAOA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAAC0Y,WAAR,GAAsB1Y,OAAO,CAAC2H,QAAR,CAAiB,CACrC,OADqC,EAErC,gBAFqC,EAGrC,MAHqC,EAIrC,MAJqC,CAAjB,CAAtB;AAOA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAAC2Y,uBAAR,GAAkC3Y,OAAO,CAAC2H,QAAR,CAAiB,CACjD,SADiD,EAEjD,UAFiD,EAGjD,UAHiD,EAIjD,gBAJiD,EAKjD,UALiD,EAMjD,KANiD,EAOjD,YAPiD,CAAjB,CAAlC;AAUA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAAC4Y,WAAR,GAAsB5Y,OAAO,CAAC2H,QAAR,CAAiB,CACrC,OADqC,EAErC,MAFqC,EAGrC,MAHqC,CAAjB,CAAtB;AAMA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAAC6Y,SAAR,GAAoB7Y,OAAO,CAAC2H,QAAR,CAAiB,CACnC,WADmC,EAEnC,MAFmC,EAGnC,MAHmC,CAAjB,CAApB;AAMA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAAC8Y,iBAAR,GAA4B9Y,OAAO,CAAC2H,QAAR,CAAiB,CAC3C,aAD2C,EAE3C,YAF2C,EAG3C,YAH2C,EAI3C,MAJ2C,CAAjB,CAA5B;AAOA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAAC+Y,mBAAR,GAA8B/Y,OAAO,CAAC2H,QAAR,CAAiB,CAC7C,qBAD6C,EAE7C,uBAF6C,EAG7C,8BAH6C,EAI7C,+BAJ6C,EAK7C,wBAL6C,EAM7C,iBAN6C,EAO7C,cAP6C,EAQ7C,8BAR6C,EAS7C,OAT6C,CAAjB,CAA9B;AAYA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAACgZ,iBAAR,GAA4BhZ,OAAO,CAAC2H,QAAR,CAAiB,CAC3C,qBAD2C,EAE3C,uBAF2C,EAG3C,2BAH2C,EAI3C,wBAJ2C,EAK3C,sBAL2C,EAM3C,yBAN2C,EAO3C,yBAP2C,EAQ3C,uBAR2C,EAS3C,0BAT2C,EAU3C,mCAV2C,EAW3C,SAX2C,CAAjB,CAA5B;AAcA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAAC6T,aAAR,GAAwB7T,OAAO,CAAC2H,QAAR,CAAiB,CACvC,uBADuC,EAEvC,uBAFuC,EAGvC,sBAHuC,EAIvC,0BAJuC,EAKvC,+BALuC,EAMvC,6BANuC,EAOvC,qBAPuC,EAQvC,8BARuC,EASvC,yBATuC,EAUvC,uBAVuC,EAWvC,wBAXuC,CAAjB,CAAxB;AAaA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAACiZ,sBAAR,GAAiCjZ,OAAO,CAAC2H,QAAR,CAAiB,CAChD,SADgD,EAEhD,OAFgD,CAAjB,CAAjC;AAKA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAACkZ,6BAAR,GAAwClZ,OAAO,CAAC2H,QAAR,CAAiB,CACvD,QADuD,EAEvD,QAFuD,EAGvD,mBAHuD,EAIvD,sBAJuD,EAKvD,mBALuD,EAMvD,yBANuD,CAAjB,CAAxC;AASA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAACmZ,iCAAR,GAA4CnZ,OAAO,CAAC2H,QAAR,CAAiB,CAC3D,eAD2D,EAE3D,kBAF2D,EAG3D,cAH2D,EAI3D,aAJ2D,EAK3D,UAL2D,EAM3D,OAN2D,CAAjB,CAA5C;AASA;AACF;AACA;;AACE3H,EAAAA,OAAO,CAACoZ,8BAAR,GAAyCpZ,OAAO,CAAC2H,QAAR,CAAiB,CACxD,mBADwD,EAExD,aAFwD,EAGxD,WAHwD,EAIxD,QAJwD,CAAjB,CAAzC;AAOA;AACF;AACA;;AACE,MAAI0R,KAAK,GAAG,YAAY;AACtB,QAAI,CAACrZ,OAAO,CAAC31B,KAAR,CAAcivC,WAAnB,EAAgC;AAC9B,YAAM,IAAItZ,OAAO,CAACiN,UAAZ,CAAuB,mCAAvB,CAAN;AACD;AACF,GAJD;;AAMAoM,EAAAA,KAAK,CAAC15E,SAAN,CAAgB45E,QAAhB,GAA2B,YAAY;AACrC,WAAOvZ,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCC,YAApC,EAAP;AACD,GAFD;;AAIAJ,EAAAA,KAAK,CAAC15E,SAAN,CAAgB+5E,iBAAhB,GAAoC,UAAUC,WAAV,EAAuB;AACzD,WAAO,IAAI3Z,OAAO,CAACoP,OAAZ,CAAoBuK,WAAW,CAACxK,SAAhC,CAAP;AACD,GAFD;;AAIAkK,EAAAA,KAAK,CAAC15E,SAAN,CAAgBi6E,gBAAhB,GAAmC,UAAUj9E,CAAV,EAAa;AAC9C,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAACsN,WAAR,CAAoBuM,eAAlC,EAAmDl9E,CAAnD;AACD,GAHD;;AAKA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgBm6E,SAAhB,GAA4B,UAAUn9E,CAAV,EAAa;AACvC,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAACsN,WAAR,CAAoByM,OAAlC,EAA2Cp9E,CAA3C;AACD,GAHD;;AAKA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgBq6E,UAAhB,GAA6B,UAAUr9E,CAAV,EAAa;AACxC,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAACsN,WAAR,CAAoB2M,QAAlC,EAA4Ct9E,CAA5C;AACD,GAHD;;AAKA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgBu6E,aAAhB,GAAgC,UAAUv9E,CAAV,EAAa;AAC3C,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAACsN,WAAR,CAAoB6M,YAAlC,EAAgDx9E,CAAhD;AACD,GAHD;;AAKA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgBy6E,SAAhB,GAA4B,UAAUz9E,CAAV,EAAa;AACvC,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAACsN,WAAR,CAAoB+M,OAAlC,EAA2C19E,CAA3C;AACD,GAHD;;AAKA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgB26E,OAAhB,GAA0B,UAAU39E,CAAV,EAAa;AACrC,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAACsN,WAAR,CAAoB1M,KAAlC,EAAyCjkE,CAAzC;AACD,GAHD;;AAKA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgB46E,gBAAhB,GAAmC,UAAU59E,CAAV,EAAa;AAC9C,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAACsN,WAAR,CAAoBkN,eAAlC,EAAmD79E,CAAnD;AACD,GAHD;;AAKA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgB86E,yBAAhB,GAA4C,UAAU99E,CAAV,EAAa;AACvD,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAACsN,WAAR,CAAoBoN,yBAAlC,EAA6D/9E,CAA7D;AACD,GAHD;;AAKA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgBg7E,2BAAhB,GAA8C,UAAUh+E,CAAV,EAAa;AACzD,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAACsN,WAAR,CAAoBsN,2BAAlC,EAA+Dj+E,CAA/D;AACD,GAHD;;AAKA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgBk7E,eAAhB,GAAkC,UAAUl+E,CAAV,EAAa;AAC7C,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAACsN,WAAR,CAAoBwN,GAAlC,EAAuCn+E,CAAvC;AACD,GAHD;;AAKA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgBo7E,aAAhB,GAAgC,UAAUp+E,CAAV,EAAa;AAC3C,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAACsN,WAAR,CAAoB0N,YAAlC,EAAgDr+E,CAAhD;AACD,GAHD;;AAKA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgBs7E,YAAhB,GAA+B,UAAUt+E,CAAV,EAAa;AAC1CqjE,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAACsN,WAAR,CAAoB4N,WAA1D,EAAuEv+E,CAAvE;AACD,GAFD;;AAIA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgBw7E,yBAAhB,GAA4C,UAAUx+E,CAAV,EAAa;AACvDqjE,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAACsN,WAAR,CAAoB8N,0BAA1D,EAAsFz+E,CAAtF;AACD,GAFD;;AAIA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgB07E,sBAAhB,GAAyC,UAAS1+E,CAAT,EAAW;AAClDqjE,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAAC0N,mBAAR,CAA4B4N,sBAAlE,EAA0F3+E,CAA1F;AACD,GAFD;;AAIA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgB47E,yBAAhB,GAA4C,UAAS5+E,CAAT,EAAW;AACrDqjE,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAAC0N,mBAAR,CAA4B8N,yBAAlE,EAA6F7+E,CAA7F;AACD,GAFD;;AAIA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgB87E,qBAAhB,GAAwC,UAAS9+E,CAAT,EAAW;AACjDqjE,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAAC0N,mBAAR,CAA4BgO,qBAAlE,EAAyF/+E,CAAzF;AACD,GAFD;;AAIA08E,EAAAA,KAAK,CAAC15E,SAAN,CAAgBg8E,IAAhB,GAAuB,YAAY;AACjC3b,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EACE;AACEtvD,MAAAA,KAAK,EAAE0zC,OAAO,CAAC0F,SAAR,CAAkBmW,IAD3B;AAEE/7E,MAAAA,IAAI,EAAE;AAAE67E,QAAAA,IAAI,EAAE;AAAR;AAFR,KADF;AAKD,GAND;;AAQAtC,EAAAA,KAAK,CAAC15E,SAAN,CAAgBm8E,MAAhB,GAAyB,YAAY;AACnC9b,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EACE;AACEtvD,MAAAA,KAAK,EAAE0zC,OAAO,CAAC0F,SAAR,CAAkBmW,IAD3B;AAEE/7E,MAAAA,IAAI,EAAE;AAAE67E,QAAAA,IAAI,EAAE;AAAR;AAFR,KADF;AAKD,GAND;;AAQAtC,EAAAA,KAAK,CAAC15E,SAAN,CAAgBo8E,gBAAhB,GAAmC,UAAUC,QAAV,EAAoB;AACrDhc,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EAAqE;AACnEtvD,MAAAA,KAAK,EAAE0zC,OAAO,CAAC0N,mBAAR,CAA4BuO,kBADgC;AAEnEn8E,MAAAA,IAAI,EAAE;AAAEk8E,QAAAA,QAAQ,EAAEA;AAAZ;AAF6D,KAArE;AAID,GALD;;AAOA3C,EAAAA,KAAK,CAAC15E,SAAN,CAAgBu8E,mBAAhB,GAAsC,UAAUF,QAAV,EAAoB;AACxDhc,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EAAqE;AACnEtvD,MAAAA,KAAK,EAAE0zC,OAAO,CAAC0N,mBAAR,CAA4ByO,qBADgC;AAEnEr8E,MAAAA,IAAI,EAAE;AAAEk8E,QAAAA,QAAQ,EAAEA;AAAZ;AAF6D,KAArE;AAID,GALD;;AAOA3C,EAAAA,KAAK,CAAC15E,SAAN,CAAgBy8E,eAAhB,GAAkC,UAAUJ,QAAV,EAAoB;AACpDhc,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EAAqE;AACnEtvD,MAAAA,KAAK,EAAE0zC,OAAO,CAAC0N,mBAAR,CAA4B2O,iBADgC;AAEnEv8E,MAAAA,IAAI,EAAE;AAAEk8E,QAAAA,QAAQ,EAAEA;AAAZ;AAF6D,KAArE;AAID,GALD;;AAOA3C,EAAAA,KAAK,CAAC15E,SAAN,CAAgB28E,QAAhB,GAA2B,YAAY;AACrC,WAAO,KAAK/C,QAAL,GAAgBgD,QAAhB,CAAyB/6E,KAAhC;AACD,GAFD;;AAIA63E,EAAAA,KAAK,CAAC15E,SAAN,CAAgB68E,oBAAhB,GAAuC,YAAY;AACjD,WAAO,KAAKjD,QAAL,GAAgBgD,QAAhB,CAAyBE,sBAAhC;AACD,GAFD;;AAIApD,EAAAA,KAAK,CAAC15E,SAAN,CAAgB+8E,SAAhB,GAA4BrD,KAAK,CAAC15E,SAAN,CAAgB28E,QAA5C;;AAEAjD,EAAAA,KAAK,CAAC15E,SAAN,CAAgBg9E,gBAAhB,GAAmC,YAAY;AAC7C,WAAO3c,OAAO,CAAChqC,GAAR,KAAgB,KAAKujD,QAAL,GAAgBgD,QAAhB,CAAyB/6E,KAAzB,CAA+Bo7E,cAA/B,CAA8CrvE,OAA9C,EAAhB,GAA0EyyD,OAAO,CAAC0K,IAAR,CAAamS,OAAb,EAAjF;AACD,GAFD;;AAIAxD,EAAAA,KAAK,CAAC15E,SAAN,CAAgBm9E,iBAAhB,GAAoCzD,KAAK,CAAC15E,SAAN,CAAgBg9E,gBAApD;;AAEAtD,EAAAA,KAAK,CAAC15E,SAAN,CAAgBo9E,cAAhB,GAAiC,YAAY;AAC3C,WAAO,KAAKC,gBAAL,GAAwBC,WAA/B;AACD,GAFD;;AAIA5D,EAAAA,KAAK,CAAC15E,SAAN,CAAgBu9E,WAAhB,GAA8B,UAAUC,iBAAV,EAA6B;AACzD,QAAIp2E,IAAI,GAAG,IAAX;AACA,WAAO,KAAKwyE,QAAL,GAAgBgD,QAAhB,CAAyBa,QAAzB,CAAkCh5D,GAAlC,CAAsC,UAAUu1D,WAAV,EAAuB;AAClE,aAAO5yE,IAAI,CAAC2yE,iBAAL,CAAuBC,WAAvB,CAAP;AACD,KAFM,EAEJ3nE,MAFI,CAEG,UAAUqrE,OAAV,EAAmB;AAC3B,aAAQ,CAACF,iBAAF,IAAwBE,OAAO,CAACC,OAAR,OAAsBH,iBAArD;AACD,KAJM,CAAP;AAKD,GAPD;;AASA9D,EAAAA,KAAK,CAAC15E,SAAN,CAAgBq9E,gBAAhB,GAAmC,YAAY;AAC7C,WAAO,KAAKzD,QAAL,GAAgB/E,aAAvB;AACD,GAFD;;AAIA6E,EAAAA,KAAK,CAAC15E,SAAN,CAAgB49E,cAAhB,GAAiC,YAAY;AAC3C,WAAO,KAAKP,gBAAL,GAAwBQ,WAA/B;AACD,GAFD;;AAIAnE,EAAAA,KAAK,CAAC15E,SAAN,CAAgB89E,iBAAhB,GAAoC,YAAY;AAC9C,WAAO,KAAKT,gBAAL,GAAwB7H,cAA/B;AACD,GAFD;;AAIAkE,EAAAA,KAAK,CAAC15E,SAAN,CAAgB+9E,qBAAhB,GAAwC,UAAUC,OAAV,EAAmB;AACzD,QAAIC,qBAAqB,GAAG,KAAKH,iBAAL,GAAyBG,qBAArD;;AACA,QAAI,CAACA,qBAAL,EAA4B;AAC1BA,MAAAA,qBAAqB,GAAG7/E,MAAM,CAAC4I,IAAP,CAAYq5D,OAAO,CAAC4Y,WAApB,EAAiCle,MAAjC,CAAwC,UAAUmjB,GAAV,EAAe1+E,GAAf,EAAoB;AAClF;AACA,YAAIA,GAAG,KAAK,MAAZ,EAAoB;AAClB0+E,UAAAA,GAAG,CAAC7d,OAAO,CAAC4Y,WAAR,CAAoBz5E,GAApB,CAAD,CAAH,GAAgC,CAAhC;AACD;;AACD,eAAO0+E,GAAP;AACD,OANuB,EAMrB,EANqB,CAAxB;AAOD;;AACD,WAAOF,OAAO,GACTC,qBAAqB,CAACD,OAAD,CAArB,IAAkC,CADzB,GAEVC,qBAFJ;AAGD,GAdD;;AAgBAvE,EAAAA,KAAK,CAAC15E,SAAN,CAAgBm+E,OAAhB,GAA0B,YAAY;AACpC,WAAO,KAAKd,gBAAL,GAAwB11E,IAA/B;AACD,GAFD;;AAIA+xE,EAAAA,KAAK,CAAC15E,SAAN,CAAgBo+E,YAAhB,GAA+B,YAAY;AACzC,WAAO,KAAKf,gBAAL,GAAwB9H,SAA/B;AACD,GAFD;;AAIAmE,EAAAA,KAAK,CAAC15E,SAAN,CAAgBq+E,oBAAhB,GAAuC,YAAY;AACjD,WAAO,KAAKhB,gBAAL,GAAwBiB,iBAA/B;AACD,GAFD;;AAIA5E,EAAAA,KAAK,CAAC15E,SAAN,CAAgBu+E,kBAAhB,GAAqC,YAAY;AAC/C,WAAO,KAAKlB,gBAAL,GAAwBhI,gBAA/B;AACD,GAFD;;AAIAqE,EAAAA,KAAK,CAAC15E,SAAN,CAAgBw+E,gBAAhB,GAAmC,UAAU3J,aAAV,EAAyBt2C,SAAzB,EAAoC;AACrE,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;;AACA,QAAI5J,aAAa,IAAIA,aAAa,CAACa,gBAA/B,IAAmD,CAACrV,OAAO,CAACsI,aAAR,CAAsBkM,aAAa,CAACa,gBAAd,CAA+B9M,MAArD,CAAxD,EAAsH;AACpH,UAAIrqC,SAAS,IAAIA,SAAS,CAACosC,OAA3B,EAAoC;AAClCpsC,QAAAA,SAAS,CAACosC,OAAV,CAAkBuN,gBAAgB,CAACwG,cAAnC;AACD;AACF,KAJD,MAIO;AACLnnE,MAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsB8C,0BAAlC,EAA8D;AAC5DC,QAAAA,aAAa,EAAExU,OAAO,CAACgH,aAAR,CAAsBwN,aAAtB,EAAqC,eAArC;AAD6C,OAA9D,EAEG;AACCx9C,QAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB;AACA;AACA,cAAImlE,OAAO,GAAGjF,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,EAAd;AACAnI,UAAAA,OAAO,CAACQ,YAAR,CAAqBzF,OAAO,CAAC0F,SAAR,CAAkB4Y,0BAAvC;;AAEA,cAAIpgD,SAAS,CAAClH,OAAd,EAAuB;AACrBkH,YAAAA,SAAS,CAAClH,OAAV,CAAkBl3B,IAAlB;AACD;AACF,SAVF;AAWCwqE,QAAAA,OAAO,EAAEpsC,SAAS,IAAIA,SAAS,CAACosC;AAXjC,OAFH;AAeD;AACF,GAvBD;;AAyBA+O,EAAAA,KAAK,CAAC15E,SAAN,CAAgB4+E,QAAhB,GAA2B,UAAU/8E,KAAV,EAAiB08B,SAAjB,EAA4B;AACrD,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACAlnE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsB+M,eAAlC,EAAmD;AACjDh9E,MAAAA,KAAK,EAAEw+D,OAAO,CAACgH,aAAR,CAAsBxlE,KAAtB,EAA6B,OAA7B;AAD0C,KAAnD,EAEG08B,SAFH;AAGD,GALD;;AAOAm7C,EAAAA,KAAK,CAAC15E,SAAN,CAAgB8+E,SAAhB,GAA4BpF,KAAK,CAAC15E,SAAN,CAAgB4+E,QAA5C;;AAEAlF,EAAAA,KAAK,CAAC15E,SAAN,CAAgBqgE,OAAhB,GAA0B,UAAU0T,UAAV,EAAsBhlE,MAAtB,EAA8B;AACtD,QAAIwI,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACA,QAAIj1E,QAAQ,GAAG,IAAI62D,OAAO,CAACl9C,QAAZ,CAAqB4wD,UAArB,CAAf,CAFsD,CAGtD;;AACA,WAAOvqE,QAAQ,CAACu1E,UAAhB;AAEAxnE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsBkN,uBAAlC,EAA2D;AACzDx1E,MAAAA,QAAQ,EAAE62D,OAAO,CAACgH,aAAR,CAAsB79D,QAAtB,EAAgC,UAAhC,CAD+C;AAEzDssE,MAAAA,QAAQ,EAAG/mE,MAAM,KAAKA,MAAM,CAAC+mE,QAAP,IAAmB/mE,MAAM,CAACkwE,OAA/B,CAAP,IAAmD,KAAKnB,iBAAL,GAAyBlI,oBAAzB,CAA8CE;AAFlD,KAA3D,EAGG/mE,MAAM,IAAI;AACTsoB,MAAAA,OAAO,EAAEtoB,MAAM,CAACsoB,OADP;AAETszC,MAAAA,OAAO,EAAE57D,MAAM,CAAC47D;AAFP,KAHb;AAOD,GAbD;;AAeA+O,EAAAA,KAAK,CAAC15E,SAAN,CAAgBk/E,eAAhB,GAAkC,YAAY;AAC5C,WAAO,KAAK7B,gBAAL,GAAwB7H,cAAxB,CAAuC2J,MAAvC,CAA8C16D,GAA9C,CAAkD,UAAU8pC,KAAV,EAAiB;AACxE,aAAOA,KAAK,CAACunB,QAAb;AACD,KAFM,CAAP;AAGD,GAJD;;AAMA4D,EAAAA,KAAK,CAAC15E,SAAN,CAAgBo/E,YAAhB,GAA+B,UAAUC,SAAV,EAAqB9gD,SAArB,EAAgC+gD,UAAhC,EAA4C;AACzE,QAAIl4E,IAAI,GAAG,IAAX;AACA,QAAImQ,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACApe,IAAAA,OAAO,CAACgH,aAAR,CAAsB9oC,SAAtB,EAAiC,WAAjC;AACA8hC,IAAAA,OAAO,CAACgH,aAAR,CAAsB9oC,SAAS,CAAClH,OAAhC,EAAyC,mBAAzC;AACA,QAAIkoD,QAAQ,GAAGD,UAAU,IAAI,EAA7B;AAEAC,IAAAA,QAAQ,CAACnqE,SAAT,GAAqBmqE,QAAQ,CAACnqE,SAAT,IAAsB,EAA3C;AACAmqE,IAAAA,QAAQ,CAACC,UAAT,GAAsBD,QAAQ,CAACC,UAAT,IAAuBnf,OAAO,CAACof,kBAArD,CARyE,CAUzE;AACA;;AACA,QAAI,CAACpf,OAAO,CAAC1rC,OAAR,CAAgB0qD,SAAhB,CAAL,EAAiC;AAC/BA,MAAAA,SAAS,GAAG,CAACA,SAAD,CAAZ;AACD;;AAED9nE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsB4N,aAAlC,EAAiD;AAC/CL,MAAAA,SAAS,EAAEA,SADoC;AAE/CM,MAAAA,SAAS,EAAEJ,QAAQ,CAACI,SAAT,IAAsB,IAFc;AAG/CH,MAAAA,UAAU,EAAED,QAAQ,CAACC;AAH0B,KAAjD,EAIG;AACCnoD,MAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB,YAAIA,IAAI,CAACw/E,SAAT,EAAoB;AAClBv4E,UAAAA,IAAI,CAACg4E,YAAL,CAAkBC,SAAlB,EAA6B9gD,SAA7B,EAAwC;AACtCohD,YAAAA,SAAS,EAAEx/E,IAAI,CAACw/E,SADsB;AAEtCH,YAAAA,UAAU,EAAED,QAAQ,CAACC,UAFiB;AAGtCpqE,YAAAA,SAAS,EAAEmqE,QAAQ,CAACnqE,SAAT,CAAmBsN,MAAnB,CAA0BviB,IAAI,CAACiV,SAA/B;AAH2B,WAAxC;AAKD,SAND,MAMO;AACLmqE,UAAAA,QAAQ,CAACnqE,SAAT,GAAqBmqE,QAAQ,CAACnqE,SAAT,CAAmBsN,MAAnB,CAA0BviB,IAAI,CAACiV,SAA/B,CAArB;AACA,cAAIA,SAAS,GAAGmqE,QAAQ,CAACnqE,SAAT,CAAmBqP,GAAnB,CAAuB,UAAUjb,QAAV,EAAoB;AACzD,mBAAO,IAAI62D,OAAO,CAACl9C,QAAZ,CAAqB3Z,QAArB,CAAP;AACD,WAFe,CAAhB;AAIA+0B,UAAAA,SAAS,CAAClH,OAAV,CAAkB;AAChBjiB,YAAAA,SAAS,EAAEA,SADK;AAEhBwqE,YAAAA,SAAS,EAAExqE;AAFK,WAAlB;AAID;AACF,OAnBF;AAoBCu1D,MAAAA,OAAO,EAAEpsC,SAAS,CAACosC;AApBpB,KAJH;AA0BD,GA1CD;;AA4CA+O,EAAAA,KAAK,CAAC15E,SAAN,CAAgB6/E,YAAhB,GAA+BnG,KAAK,CAAC15E,SAAN,CAAgBo/E,YAA/C;;AAEA1F,EAAAA,KAAK,CAAC15E,SAAN,CAAgB8/E,UAAhB,GAA6B,YAAY;AACvC,WAAO,IAAIzf,OAAO,CAAC0f,aAAZ,CAA0B,KAAKnG,QAAL,EAA1B,CAAP;AACD,GAFD;AAIA;AACF;AACA;;;AACE,MAAImG,aAAa,GAAG,UAAUC,SAAV,EAAqB;AACvC3f,IAAAA,OAAO,CAACqZ,KAAR,CAAcj8E,IAAd,CAAmB,IAAnB;AACA,SAAKuiF,SAAL,GAAiBA,SAAjB;AACD,GAHD;;AAIAD,EAAAA,aAAa,CAAC//E,SAAd,GAA0B5B,MAAM,CAACksB,MAAP,CAAcovD,KAAK,CAAC15E,SAApB,CAA1B;AACA+/E,EAAAA,aAAa,CAAC//E,SAAd,CAAwB2G,WAAxB,GAAsCo5E,aAAtC;;AAEAA,EAAAA,aAAa,CAAC//E,SAAd,CAAwB45E,QAAxB,GAAmC,YAAY;AAC7C,WAAO,KAAKoG,SAAZ;AACD,GAFD;;AAIAD,EAAAA,aAAa,CAAC//E,SAAd,CAAwB+5E,iBAAxB,GAA4C,UAAUC,WAAV,EAAuB;AACjE,WAAO,IAAI3Z,OAAO,CAAC4f,eAAZ,CAA4BjG,WAA5B,CAAP;AACD,GAFD;AAIA;AACF;AACA;;;AACE,MAAIvK,OAAO,GAAG,UAAUD,SAAV,EAAqB;AACjC,SAAKA,SAAL,GAAiBA,SAAjB;AACD,GAFD;;AAIAC,EAAAA,OAAO,CAACzvE,SAAR,CAAkB45E,QAAlB,GAA6B,YAAY;AACvC,WAAOvZ,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCqG,cAApC,CAAmD,KAAKC,YAAL,EAAnD,CAAP;AACD,GAFD;;AAIA1Q,EAAAA,OAAO,CAACzvE,SAAR,CAAkBogF,oBAAlB,GAAyC,UAAUC,cAAV,EAA0B;AACjE,QAAI,KAAK1C,OAAL,OAAmBtd,OAAO,CAAC0Y,WAAR,CAAoBzX,IAA3C,EAAiD;AAC/C,aAAO,IAAIjB,OAAO,CAACigB,cAAZ,CAA2B,KAAK9Q,SAAhC,EAA2C6Q,cAAc,CAACE,YAA1D,CAAP;AACD,KAFD,MAEO,IAAI,KAAK5C,OAAL,OAAmBtd,OAAO,CAAC0Y,WAAR,CAAoBxX,IAA3C,EAAiD;AACtD,aAAO,IAAIlB,OAAO,CAACmgB,cAAZ,CAA2B,KAAKhR,SAAhC,EAA2C6Q,cAAc,CAACE,YAA1D,CAAP;AACD,KAFM,MAEA;AACL,aAAO,IAAIlgB,OAAO,CAACogB,eAAZ,CAA4B,KAAKjR,SAAjC,EAA4C6Q,cAAc,CAACE,YAA3D,CAAP;AACD;AACF,GARD;;AAUA9Q,EAAAA,OAAO,CAACzvE,SAAR,CAAkB0gF,YAAlB,GAAiC,UAAU/lD,SAAV,EAAqB;AACpD,WAAO0lC,OAAO,CAAC0K,IAAR,CAAa4V,mBAAb,CAAiChmD,SAAjC,EAA4C,KAAKwlD,YAAL,EAA5C,CAAP;AACD,GAFD;;AAIA1Q,EAAAA,OAAO,CAACzvE,SAAR,CAAkBm6E,SAAlB,GAA8B,UAAUn9E,CAAV,EAAa;AACzC,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAc,KAAKiS,YAAL,CAAkBrgB,OAAO,CAACwN,aAAR,CAAsBuM,OAAxC,CAAd,EAAgEp9E,CAAhE;AACD,GAHD;;AAKAyyE,EAAAA,OAAO,CAACzvE,SAAR,CAAkB4gF,UAAlB,GAA+B,UAAU5jF,CAAV,EAAa;AAC1C,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAc,KAAKiS,YAAL,CAAkBrgB,OAAO,CAACwN,aAAR,CAAsBgT,QAAxC,CAAd,EAAiE7jF,CAAjE;AACD,GAHD;;AAKAyyE,EAAAA,OAAO,CAACzvE,SAAR,CAAkB8gF,YAAlB,GAAiC,UAAU9jF,CAAV,EAAa;AAC5C,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAc,KAAKiS,YAAL,CAAkBrgB,OAAO,CAACwN,aAAR,CAAsB4K,UAAxC,CAAd,EAAmEz7E,CAAnE;AACD,GAHD;;AAKAyyE,EAAAA,OAAO,CAACzvE,SAAR,CAAkB+gF,SAAlB,GAA8B,UAAU/jF,CAAV,EAAa;AACzC,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAc,KAAKiS,YAAL,CAAkBrgB,OAAO,CAACwN,aAAR,CAAsBmT,OAAxC,CAAd,EAAgEhkF,CAAhE;AACD,GAHD;;AAKAyyE,EAAAA,OAAO,CAACzvE,SAAR,CAAkBihF,UAAlB,GAA+B,UAAUjkF,CAAV,EAAa;AAC1C,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAc,KAAKiS,YAAL,CAAkBrgB,OAAO,CAACwN,aAAR,CAAsB0B,QAAxC,CAAd,EAAiEvyE,CAAjE;AACD,GAHD;;AAKAyyE,EAAAA,OAAO,CAACzvE,SAAR,CAAkBkhF,QAAlB,GAA6B,UAAUlkF,CAAV,EAAa;AACxC,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAc,KAAKiS,YAAL,CAAkBrgB,OAAO,CAACwN,aAAR,CAAsBsT,MAAxC,CAAd,EAA+DnkF,CAA/D;AACD,GAHD;;AAKAyyE,EAAAA,OAAO,CAACzvE,SAAR,CAAkBohF,OAAlB,GAA4B,UAAUpkF,CAAV,EAAa;AACvC,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAc,KAAKiS,YAAL,CAAkBrgB,OAAO,CAACwN,aAAR,CAAsBwT,KAAxC,CAAd,EAA8DrkF,CAA9D;AACA8tE,IAAAA,GAAG,CAAC2D,SAAJ,CAAc,KAAKiS,YAAL,CAAkBrgB,OAAO,CAACwN,aAAR,CAAsByT,SAAxC,CAAd,EAAkEtkF,CAAlE;AACD,GAJD;;AAMAyyE,EAAAA,OAAO,CAACzvE,SAAR,CAAkBuhF,SAAlB,GAA8B,UAAUvkF,CAAV,EAAa;AACzC,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAc,KAAKiS,YAAL,CAAkBrgB,OAAO,CAACwN,aAAR,CAAsByT,SAAxC,CAAd,EAAkEtkF,CAAlE;AACD,GAHD;;AAKAyyE,EAAAA,OAAO,CAACzvE,SAAR,CAAkBwhF,KAAlB,GAA0B,UAAUxkF,CAAV,EAAa;AACrC,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAc,KAAKiS,YAAL,CAAkBrgB,OAAO,CAACwN,aAAR,CAAsBsN,GAAxC,CAAd,EAA4Dn+E,CAA5D;AACD,GAHD;;AAKAyyE,EAAAA,OAAO,CAACzvE,SAAR,CAAkByhF,WAAlB,GAAgC,UAAUzkF,CAAV,EAAa;AAC3C,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAc,KAAKiS,YAAL,CAAkBrgB,OAAO,CAACwN,aAAR,CAAsB6K,SAAxC,CAAd,EAAkE17E,CAAlE;AACD,GAHD;;AAKAyyE,EAAAA,OAAO,CAACzvE,SAAR,CAAkB26E,OAAlB,GAA4B,UAAU39E,CAAV,EAAa;AACvC,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAc,KAAKiS,YAAL,CAAkBrgB,OAAO,CAACwN,aAAR,CAAsB5M,KAAxC,CAAd,EAA8DjkE,CAA9D;AACD,GAHD;;AAKAyyE,EAAAA,OAAO,CAACzvE,SAAR,CAAkBmgF,YAAlB,GAAiC,YAAY;AAC3C,WAAO,KAAK3Q,SAAZ;AACD,GAFD;;AAIAC,EAAAA,OAAO,CAACzvE,SAAR,CAAkB0hF,oBAAlB,GAAyC,YAAY;AACnD,WAAO,KAAK9H,QAAL,GAAgB+H,gBAAvB;AACD,GAFD;;AAGAlS,EAAAA,OAAO,CAACzvE,SAAR,CAAkB4hF,mBAAlB,GAAwCnS,OAAO,CAACzvE,SAAR,CAAkB0hF,oBAA1D;;AAEAjS,EAAAA,OAAO,CAACzvE,SAAR,CAAkB29E,OAAlB,GAA4B,YAAY;AACtC,WAAO,KAAK/D,QAAL,GAAgBrlE,IAAvB;AACD,GAFD;;AAIAk7D,EAAAA,OAAO,CAACzvE,SAAR,CAAkB6hF,kBAAlB,GAAuC,YAAW;AAChD,WAAO,KAAKjI,QAAL,GAAgBkI,eAAvB;AACD,GAFD;;AAIArS,EAAAA,OAAO,CAACzvE,SAAR,CAAkB28E,QAAlB,GAA6B,YAAY;AACvC,WAAO,KAAK/C,QAAL,GAAgB/3E,KAAvB;AACD,GAFD;;AAIA4tE,EAAAA,OAAO,CAACzvE,SAAR,CAAkB+8E,SAAlB,GAA8BtN,OAAO,CAACzvE,SAAR,CAAkB28E,QAAhD;;AAEAlN,EAAAA,OAAO,CAACzvE,SAAR,CAAkBg9E,gBAAlB,GAAqC,YAAY;AAC/C,WAAO3c,OAAO,CAAChqC,GAAR,KAAgB,KAAKujD,QAAL,GAAgB/3E,KAAhB,CAAsB45D,SAAtB,CAAgC7tD,OAAhC,EAAhB,GAA4DyyD,OAAO,CAAC0K,IAAR,CAAamS,OAAb,EAAnE;AACD,GAFD;;AAIAzN,EAAAA,OAAO,CAACzvE,SAAR,CAAkBm9E,iBAAlB,GAAsC1N,OAAO,CAACzvE,SAAR,CAAkBg9E,gBAAxD;;AAEAvN,EAAAA,OAAO,CAACzvE,SAAR,CAAkB+hF,QAAlB,GAA6B,YAAY;AACvC,WAAO,KAAKnI,QAAL,GAAgBrrB,KAAvB;AACD,GAFD;;AAIAkhB,EAAAA,OAAO,CAACzvE,SAAR,CAAkBgiF,iBAAlB,GAAsC,YAAY;AAChD,WAAO,KAAKpI,QAAL,GAAgBqI,cAAvB;AACD,GAFD;;AAIAxS,EAAAA,OAAO,CAACzvE,SAAR,CAAkBkiF,cAAlB,GAAmC,YAAY;AAC7C,QAAI96E,IAAI,GAAG,IAAX;AACA,WAAO,KAAKwyE,QAAL,GAAgBuI,WAAhB,CAA4B19D,GAA5B,CAAgC,UAAU29D,QAAV,EAAoB;AACzD,UAAIh7E,IAAI,CAACu2E,OAAL,OAAmBtd,OAAO,CAAC0Y,WAAR,CAAoBzX,IAA3C,EAAiD;AAC/C,eAAO,IAAIjB,OAAO,CAACigB,cAAZ,CAA2Bl5E,IAAI,CAACooE,SAAhC,EAA2C4S,QAAQ,CAAC7B,YAApD,CAAP;AACD,OAFD,MAEO,IAAIn5E,IAAI,CAACu2E,OAAL,OAAmBtd,OAAO,CAAC0Y,WAAR,CAAoBxX,IAA3C,EAAiD;AACtD,eAAO,IAAIlB,OAAO,CAACmgB,cAAZ,CAA2Bp5E,IAAI,CAACooE,SAAhC,EAA2C4S,QAAQ,CAAC7B,YAApD,CAAP;AACD,OAFM,MAEA;AACL,eAAO,IAAIlgB,OAAO,CAACogB,eAAZ,CAA4Br5E,IAAI,CAACooE,SAAjC,EAA4C4S,QAAQ,CAAC7B,YAArD,CAAP;AACD;AACF,KARM,CAAP;AASD,GAXD;;AAaA9Q,EAAAA,OAAO,CAACzvE,SAAR,CAAkBqiF,oBAAlB,GAAyC,YAAY;AACnD,WAAOhiB,OAAO,CAACuH,IAAR,CAAa,KAAKsa,cAAL,EAAb,EAAoC,UAAUI,IAAV,EAAgB;AACzD,aAAOA,IAAI,CAACC,mBAAL,EAAP;AACD,KAFM,KAED,IAFN;AAGD,GAJD;;AAMA9S,EAAAA,OAAO,CAACzvE,SAAR,CAAkBwiF,0BAAlB,GAA+C,YAAY;AACzD,QAAIC,WAAW,GAAG,KAAKJ,oBAAL,EAAlB;;AACA,QAAII,WAAW,IAAI,IAAf,IAAuBA,WAAW,CAACC,QAAZ,EAA3B,EAAmD;AACjD,aAAOD,WAAP;AACD,KAFD,MAEO;AACL,aAAO,IAAP;AACD;AACF,GAPD;;AASAhT,EAAAA,OAAO,CAACzvE,SAAR,CAAkB2iF,wBAAlB,GAA6C,YAAY;AACvD,WAAO,KAAKT,cAAL,GAAsB7vE,MAAtB,CAA6B,UAAUiwE,IAAV,EAAgB;AAClD,aAAO,CAACA,IAAI,CAACC,mBAAL,EAAD,IAA+BD,IAAI,CAAC3E,OAAL,OAAmBtd,OAAO,CAACgY,cAAR,CAAuBuK,KAAhF;AACD,KAFM,CAAP;AAGD,GAJD;;AAMAnT,EAAAA,OAAO,CAACzvE,SAAR,CAAkB6iF,mCAAlB,GAAwD,YAAY;AAClE,WAAO,KAAKF,wBAAL,GAAgCtwE,MAAhC,CAAuC,UAAUiwE,IAAV,EAAgB;AAC5D,aAAOA,IAAI,CAACI,QAAL,EAAP;AACD,KAFM,EAEJ,CAFI,KAEE,IAFT;AAGD,GAJD;;AAMAjT,EAAAA,OAAO,CAACzvE,SAAR,CAAkB8iF,kBAAlB,GAAuC,YAAY;AACjD,WAAOziB,OAAO,CAACuH,IAAR,CAAa,KAAKsa,cAAL,EAAb,EAAoC,UAAUI,IAAV,EAAgB;AACzD,UAAIS,QAAQ,GAAGT,IAAI,CAAC3E,OAAL,EAAf;AACA,aAAOoF,QAAQ,KAAK1iB,OAAO,CAACgY,cAAR,CAAuBuK,KAApC,IAA6CG,QAAQ,KAAK1iB,OAAO,CAACgY,cAAR,CAAuB2K,UAAxF;AACD,KAHM,CAAP;AAID,GALD;;AAOAvT,EAAAA,OAAO,CAACzvE,SAAR,CAAkBm+E,OAAlB,GAA4B,YAAY;AACtC,WAAO,KAAKvE,QAAL,GAAgBjyE,IAAvB;AACD,GAFD;;AAIA8nE,EAAAA,OAAO,CAACzvE,SAAR,CAAkBijF,kBAAlB,GAAuC,YAAY;AACjD,WAAO,KAAKrJ,QAAL,GAAgBsJ,eAAvB;AACD,GAFD;;AAIAzT,EAAAA,OAAO,CAACzvE,SAAR,CAAkBmjF,cAAlB,GAAmC,YAAY;AAC7C,WAAO,KAAKvJ,QAAL,GAAgBwJ,WAAvB;AACD,GAFD;;AAIA3T,EAAAA,OAAO,CAACzvE,SAAR,CAAkBqjF,aAAlB,GAAkC,YAAY;AAC5C,WAAO,KAAKzJ,QAAL,GAAgB0J,UAAvB;AACD,GAFD;;AAIA7T,EAAAA,OAAO,CAACzvE,SAAR,CAAkBujF,aAAlB,GAAkC,YAAY;AAC5C,WAAO,KAAK3J,QAAL,GAAgBnoC,UAAvB;AACD,GAFD;;AAIAg+B,EAAAA,OAAO,CAACzvE,SAAR,CAAkBwjF,kBAAlB,GAAuC,YAAY;AACjD,WAAO,KAAK5J,QAAL,GAAgB6J,eAAvB;AACD,GAFD;;AAIAhU,EAAAA,OAAO,CAACzvE,SAAR,CAAkB0jF,eAAlB,GAAoC,YAAY;AAC9C,WAAOrjB,OAAO,CAACuH,IAAR,CAAa,KAAKsa,cAAL,EAAb,EAAoC,UAAUI,IAAV,EAAgB;AACzD,aAAOA,IAAI,CAACqB,qBAAL,MAAgC,IAAvC;AACD,KAFM,KAED,IAFN;AAGD,GAJD;;AAMAlU,EAAAA,OAAO,CAACzvE,SAAR,CAAkB4jF,UAAlB,GAA+B,YAAY;AACzC,QAAIC,gBAAgB,GAAG,KAAKjK,QAAL,GAAgBiK,gBAAvC;;AACA,WAAQA,gBAAgB,KAAKxjB,OAAO,CAAC2Y,uBAAR,CAAgC8K,QAAtD,GAAkE,KAAlE,GAA0E,IAAjF;AACD,GAHD;;AAKArU,EAAAA,OAAO,CAACzvE,SAAR,CAAkB+jF,SAAlB,GAA8B,YAAY;AACxC,QAAIzB,IAAI,GAAG,KAAKD,oBAAL,EAAX,CADwC,CAGxC;;AACA,QAAIC,IAAI,CAAC0B,YAAL,OAAwB3jB,OAAO,CAAC6Y,SAAR,CAAkB3X,IAA9C,EAAoD;AAClD,aAAO,KAAKqiB,UAAL,EAAP;AACD;;AAED,WAAOtB,IAAI,GAAGA,IAAI,CAAC3E,OAAL,OAAmBtd,OAAO,CAACgY,cAAR,CAAuB4L,OAA7C,GAAuD,KAAlE;AACD,GATD;;AAWAxU,EAAAA,OAAO,CAACzvE,SAAR,CAAkBkkF,WAAlB,GAAgC,YAAY;AAC1C,WAAO,KAAKnH,SAAL,GAAiBxoE,IAAjB,KAA0B8rD,OAAO,CAACuY,gBAAR,CAAyBF,SAA1D;AACD,GAFD;;AAIAjJ,EAAAA,OAAO,CAACzvE,SAAR,CAAkBkqC,MAAlB,GAA2B,UAAU3L,SAAV,EAAqB;AAC9C,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACA,QAAIr3E,IAAI,GAAG,IAAX;AACA,QAAIooE,SAAS,GAAG,KAAK2Q,YAAL,EAAhB;AACA5oE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsBqS,cAAlC,EAAkD;AAChD3U,MAAAA,SAAS,EAAEA;AADqC,KAAlD,EAEG;AACCn4C,MAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB,YAAImlE,OAAO,GAAGjF,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,EAAd;AACAnI,QAAAA,OAAO,CAACQ,YAAR,CAAqBzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAAvC,EAAkD;AAChDtvD,UAAAA,KAAK,EAAE0zC,OAAO,CAACwN,aAAR,CAAsB0B,QADmB;AAEhDpvE,UAAAA,IAAI,EAAE,IAAIkgE,OAAO,CAACoP,OAAZ,CAAoBD,SAApB;AAF0C,SAAlD;AAIAlK,QAAAA,OAAO,CAACQ,YAAR,CAAqBzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAAvC,EAAkD;AAChDtvD,UAAAA,KAAK,EAAE0zC,OAAO,CAAC0K,IAAR,CAAa4V,mBAAb,CAAiCtgB,OAAO,CAACwN,aAAR,CAAsB0B,QAAvD,EAAiEnoE,IAAI,CAAC+4E,YAAL,EAAjE,CADyC;AAEhDhgF,UAAAA,IAAI,EAAE,IAAIkgE,OAAO,CAACoP,OAAZ,CAAoBD,SAApB;AAF0C,SAAlD,EANuB,CAWvB;AACA;AACA;AACA;AACA;AACA;;AACA,YAAIkO,OAAO,GAAG,IAAIrd,OAAO,CAACoP,OAAZ,CAAoBD,SAApB,CAAd;;AACA,YAAInP,OAAO,CAACgI,gBAAR,MAA8BqV,OAAO,CAACgG,eAAR,EAAlC,EAA6D;AAC3DrjB,UAAAA,OAAO,CAAC0K,IAAR,CAAaqZ,+BAAb;AACD;;AAED,YAAI7lD,SAAS,IAAIA,SAAS,CAAClH,OAA3B,EAAoC;AAClCkH,UAAAA,SAAS,CAAClH,OAAV,CAAkBl3B,IAAlB;AACD;AACF,OA1BF;AA2BCwqE,MAAAA,OAAO,EAAEpsC,SAAS,GAAGA,SAAS,CAACosC,OAAb,GAAuB;AA3B1C,KAFH;AA+BD,GAnCD;;AAqCA8E,EAAAA,OAAO,CAACzvE,SAAR,CAAkBqkF,OAAlB,GAA4B,YAAY;AACtChkB,IAAAA,OAAO,CAAC0C,MAAR,GAAiBpB,IAAjB,CAAsB,wCAAtB;AACD,GAFD;;AAIA8N,EAAAA,OAAO,CAACzvE,SAAR,CAAkBy7B,MAAlB,GAA2B,UAAU8C,SAAV,EAAqB;AAC9C,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACAlnE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsB4C,cAAlC,EAAkD;AAChDlF,MAAAA,SAAS,EAAE,KAAK2Q,YAAL;AADqC,KAAlD,EAEG5hD,SAFH;AAGD,GALD;;AAOAkxC,EAAAA,OAAO,CAACzvE,SAAR,CAAkBs3B,QAAlB,GAA6B,UAAUiH,SAAV,EAAqB;AAChD,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACAlnE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsB0C,gBAAlC,EAAoD;AAClDhF,MAAAA,SAAS,EAAE,KAAK2Q,YAAL;AADuC,KAApD,EAEG5hD,SAFH;AAGD,GALD;;AAOAkxC,EAAAA,OAAO,CAACzvE,SAAR,CAAkBuI,KAAlB,GAA0B,UAAUg2B,SAAV,EAAqB;AAC7C,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACAlnE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsB2C,aAAlC,EAAiD;AAC/CjF,MAAAA,SAAS,EAAE,KAAK2Q,YAAL;AADoC,KAAjD,EAEG5hD,SAFH;AAGD,GALD;;AAOAkxC,EAAAA,OAAO,CAACzvE,SAAR,CAAkBskF,WAAlB,GAAgC,UAAUC,SAAV,EAAqBnB,WAArB,EAAkC7kD,SAAlC,EAA6C;AAC3E,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACAlnE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsB0S,oBAAlC,EAAwD;AACtDhV,MAAAA,SAAS,EAAE,KAAK2Q,YAAL,EAD2C;AAEtDoE,MAAAA,SAAS,EAAEA,SAF2C;AAGtDnB,MAAAA,WAAW,EAAEA;AAHyC,KAAxD,EAIG7kD,SAJH;AAKD,GAPD;;AASAkxC,EAAAA,OAAO,CAACzvE,SAAR,CAAkBykF,aAAlB,GAAkC,UAAU1Q,UAAV,EAAsBx1C,SAAtB,EAAiC;AACjE,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACA,QAAIj1E,QAAQ,GAAG,IAAI62D,OAAO,CAACl9C,QAAZ,CAAqB4wD,UAArB,CAAf,CAFiE,CAGjE;;AACA,WAAOvqE,QAAQ,CAACu1E,UAAhB;AAEAxnE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsB4S,4BAAlC,EAAgE;AAC9DlV,MAAAA,SAAS,EAAE,KAAK2Q,YAAL,EADmD;AAE9D32E,MAAAA,QAAQ,EAAEA;AAFoD,KAAhE,EAGG+0B,SAHH;AAID,GAVD;;AAYAkxC,EAAAA,OAAO,CAACzvE,SAAR,CAAkB2kF,uBAAlB,GAA4C,UAAUpmD,SAAV,EAAqB;AAC/D,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACA,QAAI8B,YAAY,GAAG,IAAnB;AACA,QAAIqE,WAAW,GAAGvkB,OAAO,CAACuH,IAAR,CAAa,KAAKsa,cAAL,EAAb,EAAoC,UAAUI,IAAV,EAAgB;AACpE,aAAOA,IAAI,CAACvF,SAAL,GAAiBxoE,IAAjB,KAA0B8rD,OAAO,CAACiY,mBAAR,CAA4BK,IAA7D;AACD,KAFiB,CAAlB;;AAIA,QAAIiM,WAAW,IAAI,IAAnB,EAAyB;AACvBrE,MAAAA,YAAY,GAAGqE,WAAW,CAACC,eAAZ,EAAf;AAED,KAHD,MAGO;AACL,UAAIC,WAAW,GAAG,KAAK5C,cAAL,GAAsB7vE,MAAtB,CAA6B,UAAUiwE,IAAV,EAAgB;AAC7D,eAAOA,IAAI,CAACI,QAAL,EAAP;AACD,OAFiB,CAAlB;;AAGA,UAAIoC,WAAW,CAACpnF,MAAZ,GAAqB,CAAzB,EAA4B;AAC1B6iF,QAAAA,YAAY,GAAGuE,WAAW,CAAC,CAAD,CAAX,CAAeD,eAAf,EAAf;AACD;AACF;;AAEDttE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsBiT,yBAAlC,EAA6D;AAC3DvV,MAAAA,SAAS,EAAE,KAAK2Q,YAAL,EADgD;AAE3DI,MAAAA,YAAY,EAAEA;AAF6C,KAA7D,EAGGhiD,SAHH;AAID,GAvBD;;AAyBAkxC,EAAAA,OAAO,CAACzvE,SAAR,CAAkBglF,oBAAlB,GAAyC,UAAUhQ,yBAAV,EAAqCz2C,SAArC,EAAgD;AACvF,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AAEAlnE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsBiD,2BAAlC,EAA+D;AAC7DvF,MAAAA,SAAS,EAAE,KAAK2Q,YAAL,EADkD;AAE7D8E,MAAAA,UAAU,EAAEhwC,MAAM,CAACgwC,UAF0C;AAG7DjQ,MAAAA,yBAAyB,EAAEA;AAHkC,KAA/D,EAIGz2C,SAJH;AAMA8hC,IAAAA,OAAO,CAAC8K,qBAAR,CAA8B;AAC5BqE,MAAAA,SAAS,EAAE,KAAK2Q,YAAL,EADiB;AAE5B8E,MAAAA,UAAU,EAAEhwC,MAAM,CAACgwC,UAFS;AAG5B7Z,MAAAA,KAAK,EAAE4J;AAHqB,KAA9B;AAKD,GAdD;;AAgBAvF,EAAAA,OAAO,CAACzvE,SAAR,CAAkBklF,mBAAlB,GAAwC,UAAU3Z,MAAV,EAAkBhtC,SAAlB,EAA6B;AACnE,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACAlnE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsBoD,0BAAlC,EAA8D;AAC5D1F,MAAAA,SAAS,EAAE,KAAK2Q,YAAL,EADiD;AAE5D8E,MAAAA,UAAU,EAAEhwC,MAAM,CAACgwC,UAFyC;AAG5D1Z,MAAAA,MAAM,EAAEA;AAHoD,KAA9D,EAIGhtC,SAJH;AAMA8hC,IAAAA,OAAO,CAACiL,sBAAR,CAA+B;AAC7BkE,MAAAA,SAAS,EAAE,KAAK2Q,YAAL,EADkB;AAE7B8E,MAAAA,UAAU,EAAEhwC,MAAM,CAACgwC,UAFU;AAG7B1Z,MAAAA,MAAM,EAAEA;AAHqB,KAA/B;AAKD,GAbD;;AAeAkE,EAAAA,OAAO,CAACzvE,SAAR,CAAkBmlF,qBAAlB,GAA0C,UAAU5mD,SAAV,EAAqB;AAC7D,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACAlnE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsBsT,sBAAlC,EAA0D;AACxD5V,MAAAA,SAAS,EAAE,KAAK2Q,YAAL;AAD6C,KAA1D,EAEG5hD,SAFH;AAGD,GALD;;AAOAkxC,EAAAA,OAAO,CAACzvE,SAAR,CAAkB8/E,UAAlB,GAA+B,YAAY;AACzC,WAAO,IAAIzf,OAAO,CAAC4f,eAAZ,CAA4B,KAAKrG,QAAL,EAA5B,CAAP;AACD,GAFD;AAIA;AACF;AACA;;;AACE,MAAIqG,eAAe,GAAG,UAAUjG,WAAV,EAAuB;AAC3C3Z,IAAAA,OAAO,CAACoP,OAAR,CAAgBhyE,IAAhB,CAAqB,IAArB,EAA2Bu8E,WAAW,CAACxK,SAAvC;AACA,SAAKwK,WAAL,GAAmBA,WAAnB;AACD,GAHD;;AAIAiG,EAAAA,eAAe,CAACjgF,SAAhB,GAA4B5B,MAAM,CAACksB,MAAP,CAAcmlD,OAAO,CAACzvE,SAAtB,CAA5B;AACAigF,EAAAA,eAAe,CAACjgF,SAAhB,CAA0B2G,WAA1B,GAAwCs5E,eAAxC;;AAEAA,EAAAA,eAAe,CAACjgF,SAAhB,CAA0B45E,QAA1B,GAAqC,YAAY;AAC/C,WAAO,KAAKI,WAAZ;AACD,GAFD;;AAIAiG,EAAAA,eAAe,CAACjgF,SAAhB,CAA0BogF,oBAA1B,GAAiD,UAAUC,cAAV,EAA0B;AACzE,WAAO,IAAIhgB,OAAO,CAACglB,kBAAZ,CAA+BhF,cAA/B,CAAP;AACD,GAFD;AAIA;AACF;AACA;;;AACE,MAAIiF,UAAU,GAAG,UAAU9V,SAAV,EAAqB+Q,YAArB,EAAmC;AAClD,SAAK/Q,SAAL,GAAiBA,SAAjB;AACA,SAAK+Q,YAAL,GAAoBA,YAApB;;AACA,SAAKgF,oBAAL;AACD,GAJD;;AAMAD,EAAAA,UAAU,CAACtlF,SAAX,CAAqB45E,QAArB,GAAgC,YAAY;AAC1C,WAAOvZ,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoC2L,iBAApC,CACL,KAAKrF,YAAL,EADK,EACgB,KAAK0E,eAAL,EADhB,CAAP;AAED,GAHD;;AAKAS,EAAAA,UAAU,CAACtlF,SAAX,CAAqBmgF,YAArB,GAAoC,YAAY;AAC9C,WAAO,KAAK3Q,SAAZ;AACD,GAFD;;AAIA8V,EAAAA,UAAU,CAACtlF,SAAX,CAAqB6kF,eAArB,GAAuC,YAAY;AACjD,WAAO,KAAKtE,YAAZ;AACD,GAFD;;AAIA+E,EAAAA,UAAU,CAACtlF,SAAX,CAAqBylF,WAArB,GAAmC,YAAY;AAC7C,WAAO,IAAIplB,OAAO,CAACl9C,QAAZ,CAAqB,KAAKy2D,QAAL,GAAgBpwE,QAArC,CAAP;AACD,GAFD;;AAIA87E,EAAAA,UAAU,CAACtlF,SAAX,CAAqB0lF,UAArB,GAAkCJ,UAAU,CAACtlF,SAAX,CAAqBylF,WAAvD;;AAEAH,EAAAA,UAAU,CAACtlF,SAAX,CAAqB28E,QAArB,GAAgC,YAAY;AAC1C,WAAO,KAAK/C,QAAL,GAAgB/3E,KAAvB;AACD,GAFD;;AAIAyjF,EAAAA,UAAU,CAACtlF,SAAX,CAAqB+8E,SAArB,GAAiCuI,UAAU,CAACtlF,SAAX,CAAqB28E,QAAtD;;AAEA2I,EAAAA,UAAU,CAACtlF,SAAX,CAAqBg9E,gBAArB,GAAwC,YAAY;AAClD,WAAO3c,OAAO,CAAChqC,GAAR,KAAgB,KAAKujD,QAAL,GAAgB/3E,KAAhB,CAAsB45D,SAAtB,CAAgC7tD,OAAhC,EAAhB,GAA4DyyD,OAAO,CAAC0K,IAAR,CAAamS,OAAb,EAAnE;AACD,GAFD;;AAIAoI,EAAAA,UAAU,CAACtlF,SAAX,CAAqBm9E,iBAArB,GAAyCmI,UAAU,CAACtlF,SAAX,CAAqBg9E,gBAA9D;;AAEAsI,EAAAA,UAAU,CAACtlF,SAAX,CAAqB29E,OAArB,GAA+B,YAAY;AACzC,WAAO,KAAK/D,QAAL,GAAgBrlE,IAAvB;AACD,GAFD;;AAIA+wE,EAAAA,UAAU,CAACtlF,SAAX,CAAqBuiF,mBAArB,GAA2C,YAAY;AACrD,WAAO,KAAK3I,QAAL,GAAgB+L,OAAvB;AACD,GAFD;;AAIAL,EAAAA,UAAU,CAACtlF,SAAX,CAAqB0iF,QAArB,GAAgC,YAAY;AAC1C,WAAOriB,OAAO,CAACzW,QAAR,CAAiByW,OAAO,CAACmY,wBAAzB,EAAmD,KAAKuE,SAAL,GAAiBxoE,IAApE,CAAP;AACD,GAFD;;AAIA+wE,EAAAA,UAAU,CAACtlF,SAAX,CAAqBkkF,WAArB,GAAmC,YAAY;AAC7C,WAAO,KAAKnH,SAAL,GAAiBxoE,IAAjB,KAA0B8rD,OAAO,CAACiY,mBAAR,CAA4BI,SAA7D;AACD,GAFD;;AAIA4M,EAAAA,UAAU,CAACtlF,SAAX,CAAqB4lF,YAArB,GAAoC,YAAY;AAC9C,WAAO,KAAK7I,SAAL,GAAiBxoE,IAAjB,KAA0B8rD,OAAO,CAACiY,mBAAR,CAA4BG,UAA7D;AACD,GAFD;;AAIA6M,EAAAA,UAAU,CAACtlF,SAAX,CAAqB6lF,QAArB,GAAgC,YAAY;AAC1C,WAAO,KAAK9I,SAAL,GAAiBxoE,IAAjB,KAA0B8rD,OAAO,CAACiY,mBAAR,CAA4BK,IAA7D;AACD,GAFD;;AAIA2M,EAAAA,UAAU,CAACtlF,SAAX,CAAqB2jF,qBAArB,GAA6C,YAAY;AACvD,WAAO,KAAK/J,QAAL,GAAgBkM,kBAAvB;AACD,GAFD;AAIA;AACF;AACA;AACA;;;AACER,EAAAA,UAAU,CAACtlF,SAAX,CAAqB+lF,cAArB,GAAsC,YAAY;AAChD,WAAO,KAAKnM,QAAL,GAAgBoM,cAAvB;AACD,GAFD;;AAIAV,EAAAA,UAAU,CAACtlF,SAAX,CAAqBqkF,OAArB,GAA+B,UAAU9lD,SAAV,EAAqB;AAClD,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACAlnE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsBmU,kBAAlC,EAAsD;AACpDzW,MAAAA,SAAS,EAAE,KAAK2Q,YAAL,EADyC;AAEpDI,MAAAA,YAAY,EAAE,KAAKsE,eAAL;AAFsC,KAAtD,EAGGtmD,SAHH;AAID,GAND;;AAQA+mD,EAAAA,UAAU,CAACtlF,SAAX,CAAqBkmF,UAArB,GAAkC,UAAUC,MAAV,EAAkB5nD,SAAlB,EAA6B;AAC7D,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACAlnE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsBsU,WAAlC,EAA+C;AAC7C5W,MAAAA,SAAS,EAAE,KAAK2Q,YAAL,EADkC;AAE7CI,MAAAA,YAAY,EAAE,KAAKsE,eAAL,EAF+B;AAG7CsB,MAAAA,MAAM,EAAEA;AAHqC,KAA/C,EAIG5nD,SAJH;AAKD,GAPD;;AASA+mD,EAAAA,UAAU,CAACtlF,SAAX,CAAqBqmF,IAArB,GAA4B,UAAU9nD,SAAV,EAAqB;AAC/C,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACAlnE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsBwU,eAAlC,EAAmD;AACjD9W,MAAAA,SAAS,EAAE,KAAK2Q,YAAL,EADsC;AAEjDI,MAAAA,YAAY,EAAE,KAAKsE,eAAL;AAFmC,KAAnD,EAGGtmD,SAHH;AAID,GAND;;AAQA+mD,EAAAA,UAAU,CAACtlF,SAAX,CAAqBumF,MAArB,GAA8B,UAAUhoD,SAAV,EAAqB;AACjD,QAAIhnB,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACAlnE,IAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsB0U,iBAAlC,EAAqD;AACnDhX,MAAAA,SAAS,EAAE,KAAK2Q,YAAL,EADwC;AAEnDI,MAAAA,YAAY,EAAE,KAAKsE,eAAL;AAFqC,KAArD,EAGGtmD,SAHH;AAID,GAND;;AAQA+mD,EAAAA,UAAU,CAACtlF,SAAX,CAAqB8/E,UAArB,GAAkC,YAAY;AAC5C,WAAO,IAAIzf,OAAO,CAACglB,kBAAZ,CAA+B,KAAKzL,QAAL,EAA/B,CAAP;AACD,GAFD;;AAIA0L,EAAAA,UAAU,CAACtlF,SAAX,CAAqBulF,oBAArB,GAA4C,YAAY;AACtD,QAAI,KAAKkB,YAAL,EAAJ,EAAyB;AACvBpmB,MAAAA,OAAO,CAAC0K,IAAR,CAAa2b,YAAb,CAA0BpoF,GAA1B,CAA8B,IAA9B,EAAoCisE,KAApC,CAA0C,YAAY,CAAG,CAAzD;AACD;AACF,GAJD,CAjjCW,CAujCX;AACA;;;AACA+a,EAAAA,UAAU,CAACtlF,SAAX,CAAqB2mF,sBAArB,GAA8C,YAAY;AACxD,QAAIC,cAAc,GAAG,KAAKjJ,OAAL,EAArB;AACA,WAAOiJ,cAAc,KAAKvmB,OAAO,CAACgY,cAAR,CAAuBuK,KAA1C,IACFgE,cAAc,KAAKvmB,OAAO,CAACgY,cAAR,CAAuB2K,UAD/C;AAED,GAJD;AAMA;AACF;AACA;AACA;AACA;;;AACEsC,EAAAA,UAAU,CAACtlF,SAAX,CAAqB2mF,sBAArB,GAA8C,YAAY;AACxD,QAAIC,cAAc,GAAG,KAAKjJ,OAAL,EAArB;AACA,WAAOiJ,cAAc,KAAKvmB,OAAO,CAACgY,cAAR,CAAuBuK,KAA1C,IACFgE,cAAc,KAAKvmB,OAAO,CAACgY,cAAR,CAAuB2K,UAD/C;AAED,GAJD;AAMA;AACF;AACA;;;AAEE,MAAI6D,OAAO,GAAG,UAAUrX,SAAV,EAAqB;AACjC,SAAKA,SAAL,GAAiBA,SAAjB;AACD,GAFD;;AAIAqX,EAAAA,OAAO,CAAC7mF,SAAR,CAAkB8mF,YAAlB,GAAiC,YAAY;AAC3C,QAAI1/E,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAAC2/E,mBAAL;AACA,QAAIxvE,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACA,WAAO,IAAIpzE,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AAC5ClkB,MAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAAC0R,qBAAR,CAA8BC,cAA1C,EAA0D;AACxD,qBAAa5qE,IAAI,CAACooE,SADsC;AAExD,sBAAcnP,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCmN,aAApC,EAF0C;AAGxD,wBAAgB3mB,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCoN,eAApC;AAHwC,OAA1D,EAIK;AACD5vD,QAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB,cAAGA,IAAI,CAAC65E,WAAL,CAAiBkN,UAApB,EAAgC;AAC9B,gBAAIp7D,GAAG,GAAG;AACRq7D,cAAAA,SAAS,EAAEhnF,IAAI,CAAC65E,WAAL,CAAiBkN;AADpB,aAAV;AAGAj/E,YAAAA,OAAO,CAAC6jB,GAAD,CAAP;AACD,WALD,MAKO;AACL,gBAAIzqB,KAAK,GAAGg/D,OAAO,CAACkN,YAAR,CAAqBlN,OAAO,CAACgZ,iBAAR,CAA0B+N,mBAA/C,EAAoE,wCAApE,EAA8G9/E,GAA9G,CAAZ;AACAm0B,YAAAA,MAAM,CAACp6B,KAAD,CAAN;AACD;AAEF,SAZA;AAaDspE,QAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAe;AACtB+4D,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,sBAAvB,EACGshE,UADH,CACc;AACVr7D,YAAAA,GAAG,EAAEA;AADK,WADd;AAIA,cAAIjG,KAAK,GAAGg/D,OAAO,CAACkN,YAAR,CAAqBlN,OAAO,CAACgZ,iBAAR,CAA0BgO,qBAA/C,EAAsE,sBAAtE,EAA8F//E,GAA9F,CAAZ;AACAm0B,UAAAA,MAAM,CAACp6B,KAAD,CAAN;AACD;AApBA,OAJL;AA0BD,KA3BM,CAAP;AA4BD,GAhCD;;AAkCAwlF,EAAAA,OAAO,CAAC7mF,SAAR,CAAkBsnF,gBAAlB,GAAqC,YAAY;AAC/C,QAAIlgF,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAAC2/E,mBAAL;AACA,QAAIxvE,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACA,WAAO,IAAIpzE,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AAC5Cr0B,MAAAA,IAAI,CAAC0/E,YAAL,GAAoBzc,IAApB,CAAyB,UAASlqE,IAAT,EAAc;AACrCoX,QAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAAC0R,qBAAR,CAA8BI,kBAA1C,EAA8D;AAC5D,uBAAa9R,OAAO,CAACgH,aAAR,CAAsBlnE,IAAI,CAACgnF,SAA3B,EAAsC,WAAtC,CAD+C;AAE5D,sBAAa;AAF+C,SAA9D,EAGK;AACD9vD,UAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB8H,YAAAA,OAAO,CAAC9H,IAAD,CAAP;AACD,WAHA;AAIDwqE,UAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAe;AACtB+4D,YAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,yBAAvB,EACGshE,UADH,CACc;AACVr7D,cAAAA,GAAG,EAAEA;AADK,aADd;AAIA,gBAAIjG,KAAK,GAAGg/D,OAAO,CAACkN,YAAR,CAAqBlN,OAAO,CAACgZ,iBAAR,CAA0BkO,yBAA/C,EAA0E,0BAA1E,EAAsGjgF,GAAtG,CAAZ;AACAm0B,YAAAA,MAAM,CAACp6B,KAAD,CAAN;AACD;AAXA,SAHL;AAgBD,OAjBD,EAiBGkpE,KAjBH,CAiBS,UAASjjE,GAAT,EAAa;AACpBm0B,QAAAA,MAAM,CAACn0B,GAAD,CAAN;AACD,OAnBD;AAoBD,KArBM,CAAP;AAsBD,GA1BD;;AA4BAu/E,EAAAA,OAAO,CAAC7mF,SAAR,CAAkBwnF,aAAlB,GAAkC,YAAY;AAC5C,QAAIpgF,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAAC2/E,mBAAL;AACA,QAAIxvE,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACA,WAAO,IAAIpzE,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AAC5Cr0B,MAAAA,IAAI,CAAC0/E,YAAL,GAAoBzc,IAApB,CAAyB,UAASlqE,IAAT,EAAc;AACrCoX,QAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAAC0R,qBAAR,CAA8BK,uBAA1C,EAAmE;AACjE,uBAAa/R,OAAO,CAACgH,aAAR,CAAsBlnE,IAAI,CAACgnF,SAA3B,EAAsC,WAAtC,CADoD;AAEjE,sBAAa;AAFoD,SAAnE,EAGK;AACD9vD,UAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvBkgE,YAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,yBAAtB,EADuB,CAEvB;;AACAz5D,YAAAA,OAAO,CAAC9H,IAAD,CAAP;AACD,WALA;AAMDwqE,UAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAe;AACtB+4D,YAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,sBAAvB,EACGshE,UADH,CACc;AACVr7D,cAAAA,GAAG,EAAEA;AADK,aADd;AAIA,gBAAIjG,KAAK,GAAGg/D,OAAO,CAACkN,YAAR,CAAqBlN,OAAO,CAACgZ,iBAAR,CAA0BoO,sBAA/C,EAAuE,uBAAvE,EAAgGngF,GAAhG,CAAZ;AACAm0B,YAAAA,MAAM,CAACp6B,KAAD,CAAN;AACD;AAbA,SAHL;AAkBD,OAnBD,EAmBGkpE,KAnBH,CAmBS,UAASjjE,GAAT,EAAa;AACpBm0B,QAAAA,MAAM,CAACn0B,GAAD,CAAN;AACD,OArBD;AAsBD,KAvBM,CAAP;AAwBD,GA5BD;;AA8BAu/E,EAAAA,OAAO,CAAC7mF,SAAR,CAAkB0nF,YAAlB,GAAiC,YAAY;AAC3C,QAAItgF,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAAC2/E,mBAAL;AACA,QAAIxvE,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACA,WAAO,IAAIpzE,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AAC5ClkB,MAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAAC0R,qBAAR,CAA8BQ,qBAA1C,EAAiE;AAC/D,qBAAanrE,IAAI,CAACooE,SAD6C;AAE/D,sBAAcnP,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCmN,aAApC,EAFiD;AAG/D,6BAAqB3mB,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCoN,eAApC,EAH0C;AAI/D,uBAAenpF,GAAG,CAAC6H,IAAJ,CAASkY,IAAT,CAAcC,EAAd;AAJgD,OAAjE,EAKK;AACDuZ,QAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB,cAAGA,IAAI,CAACwnF,SAAR,EAAmB;AACjB1/E,YAAAA,OAAO,CAAC9H,IAAD,CAAP;AACD,WAFD,MAEO;AACLs7B,YAAAA,MAAM,CAACp+B,KAAK,CAAC,mDAAD,CAAN,CAAN;AACD;AACF,SAPA;AAQDstE,QAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAe;AACtB+4D,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,4BAAvB,EACGshE,UADH,CACc;AACVr7D,YAAAA,GAAG,EAAEA;AADK,WADd;AAIA,cAAIjG,KAAK,GAAGg/D,OAAO,CAACkN,YAAR,CAAqBlN,OAAO,CAACgZ,iBAAR,CAA0BuO,oBAA/C,EAAqE,4BAArE,EAAmGtgF,GAAnG,CAAZ;AACAm0B,UAAAA,MAAM,CAACp6B,KAAD,CAAN;AACD;AAfA,OALL;AAsBD,KAvBM,CAAP;AAwBD,GA5BD;;AA8BAwlF,EAAAA,OAAO,CAAC7mF,SAAR,CAAkB6nF,eAAlB,GAAoC,UAAUC,QAAV,EAAoB;AACtD,QAAI1gF,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAAC2/E,mBAAL;AACA,QAAIxvE,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACA,QAAIzE,WAAW,GAAG3Z,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCqG,cAApC,CAAmD,KAAK1Q,SAAxD,CAAlB;AACA,QAAIuY,YAAY,GAAG,GAAnB,CALsD,CAK9B;;AACxB,QAAI7d,aAAa,GAAG,IAApB;AACA,WAAO,IAAI7+D,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AAC5C,eAASusD,QAAT,GAAoB;AAClBzwE,QAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAAC0R,qBAAR,CAA8BG,6BAA1C,EAAyE;AACvE,6BAAmB8H,WAAW,CAAC2H,gBAAZ,IAAgC,KAAKnS;AADe,SAAzE,EAEG;AACDn4C,UAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB,gBAAG4nF,YAAY,OAAO,CAAtB,EAAyB;AACvB,kBAAG5nF,IAAI,CAAC8nF,eAAL,KAAyB5nB,OAAO,CAACiZ,sBAAR,CAA+B+H,KAAxD,IAAiElhF,IAAI,CAAC+nF,oBAAL,CAA0BC,QAA1B,KAAuC9nB,OAAO,CAACkZ,6BAAR,CAAsC6O,iBAAjJ,EAAmK;AACjKjoF,gBAAAA,IAAI,CAAC+nF,oBAAL,CAA0BC,QAA1B,GAAqC9nB,OAAO,CAACmZ,iCAAR,CAA0C6O,YAA/E;AACApgF,gBAAAA,OAAO,CAAC9H,IAAD,CAAP;AACD,eAHD,MAGM,IAAGA,IAAI,CAAC+nF,oBAAL,CAA0BC,QAA1B,KAAuC9nB,OAAO,CAACkZ,6BAAR,CAAsC6O,iBAAhF,EAAmG;AACvG,wBAAQjoF,IAAI,CAAC+nF,oBAAL,CAA0BC,QAAlC;AACE,uBAAK9nB,OAAO,CAACkZ,6BAAR,CAAsC+O,MAA3C;AACEnoF,oBAAAA,IAAI,CAAC+nF,oBAAL,CAA0BC,QAA1B,GAAqC9nB,OAAO,CAACmZ,iCAAR,CAA0C+O,aAA/E;AACA;;AACF,uBAAKloB,OAAO,CAACkZ,6BAAR,CAAsCiP,MAA3C;AACEroF,oBAAAA,IAAI,CAAC+nF,oBAAL,CAA0BC,QAA1B,GAAqC9nB,OAAO,CAACmZ,iCAAR,CAA0CiP,iBAA/E;AACA;;AACF,uBAAKpoB,OAAO,CAACkZ,6BAAR,CAAsCmP,iBAA3C;AACEvoF,oBAAAA,IAAI,CAAC+nF,oBAAL,CAA0BC,QAA1B,GAAqC9nB,OAAO,CAACmZ,iCAAR,CAA0CmP,SAA/E;AACA;;AACF,uBAAKtoB,OAAO,CAACkZ,6BAAR,CAAsCqP,oBAA3C;AACEzoF,oBAAAA,IAAI,CAAC+nF,oBAAL,CAA0BC,QAA1B,GAAqC9nB,OAAO,CAACmZ,iCAAR,CAA0CqP,YAA/E;AACA;;AACF;AACE1oF,oBAAAA,IAAI,CAAC+nF,oBAAL,CAA0BC,QAA1B,GAAqC9nB,OAAO,CAACmZ,iCAAR,CAA0CvY,KAA/E;AAdJ;;AAgBAh5D,gBAAAA,OAAO,CAAC9H,IAAD,CAAP;AACD,eAlBK,MAkBC;AACLwjB,gBAAAA,UAAU,CAACqkE,QAAD,EAAW9d,aAAX,CAAV;AACD;AACF,aAzBD,MAyBO;AACL7J,cAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,yBAAvB;AACA,kBAAIA,KAAK,GAAGg/D,OAAO,CAACkN,YAAR,CAAqBlN,OAAO,CAACgZ,iBAAR,CAA0ByP,OAA/C,EAAwD,yBAAxD,CAAZ;AACArtD,cAAAA,MAAM,CAACp6B,KAAD,CAAN;AACD;AACF,WAhCA;AAiCDspE,UAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAe;AACtB+4D,YAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,wBAAvB,EACGshE,UADH,CACc;AACVr7D,cAAAA,GAAG,EAAEA;AADK,aADd;AAIA,gBAAIjG,KAAK,GAAGg/D,OAAO,CAACkN,YAAR,CAAqBlN,OAAO,CAACgZ,iBAAR,CAA0B0P,uBAA/C,EAAwE,wBAAxE,EAAkGzhF,GAAlG,CAAZ;AACAm0B,YAAAA,MAAM,CAACp6B,KAAD,CAAN;AACD;AAxCA,SAFH;AA4CD;;AACD,UAAG,CAACymF,QAAJ,EAAa;AACXE,QAAAA,QAAQ;AACT,OAFD,MAEO;AACL5gF,QAAAA,IAAI,CAACsgF,YAAL,GAAoBrd,IAApB,CAAyB,UAASlqE,IAAT,EAAe;AACtC6nF,UAAAA,QAAQ;AACT,SAFD,EAEGzd,KAFH,CAES,UAASjjE,GAAT,EAAa;AACpBm0B,UAAAA,MAAM,CAACn0B,GAAD,CAAN;AACD,SAJD;AAKD;AACF,KAxDM,CAAP;AAyDD,GAhED;;AAkEAu/E,EAAAA,OAAO,CAAC7mF,SAAR,CAAkBgpF,eAAlB,GAAoC,YAAY;AAC9C,QAAI5hF,IAAI,GAAG,IAAX;AACA,QAAImQ,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACA,QAAIzE,WAAW,GAAG3Z,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCqG,cAApC,CAAmD,KAAK1Q,SAAxD,CAAlB;AACA,WAAO,IAAInkE,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AAC5ClkB,MAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAAC0R,qBAAR,CAA8BM,wBAA1C,EAAoE;AAClE,2BAAmB2H,WAAW,CAAC2H,gBAAZ,IAAgC,KAAKnS;AADU,OAApE,EAEG;AACDn4C,QAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB8H,UAAAA,OAAO,CAAC9H,IAAD,CAAP;AACD,SAHA;AAIDwqE,QAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAe;AACtB+4D,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,wBAAvB,EACGshE,UADH,CACc;AACVr7D,YAAAA,GAAG,EAAEA;AADK,WADd;AAIA,cAAIjG,KAAK,GAAGg/D,OAAO,CAACkN,YAAR,CAAqBlN,OAAO,CAACgZ,iBAAR,CAA0B4P,uBAA/C,EAAwE,wBAAxE,EAAkG3hF,GAAlG,CAAZ;AACAm0B,UAAAA,MAAM,CAACp6B,KAAD,CAAN;AACD;AAXA,OAFH;AAeD,KAhBM,CAAP;AAiBD,GArBD;;AAuBAwlF,EAAAA,OAAO,CAAC7mF,SAAR,CAAkBkpF,qBAAlB,GAA0C,YAAY;AACpD,QAAI9hF,IAAI,GAAG,IAAX;AACA,QAAI+hF,eAAe,GAAG,GAAtB,CAFoD,CAEzB;;AAC3B,QAAIjf,aAAa,GAAG,IAApB;AAEA,WAAO,IAAI7+D,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AAC5C,eAAS2tD,QAAT,GAAqB;AACnB,YAAGD,eAAe,OAAO,CAAzB,EAA4B;AAC1B/hF,UAAAA,IAAI,CAAC4hF,eAAL,GAAuB3e,IAAvB,CAA4B,UAASlqE,IAAT,EAAc;AACxC,oBAAOA,IAAI,CAACkpF,OAAL,CAAaC,wBAAb,CAAsCC,MAA7C;AACE,mBAAKlpB,OAAO,CAACoZ,8BAAR,CAAuC+P,SAA5C;AACEvhF,gBAAAA,OAAO,CAAC9H,IAAD,CAAP;AACA;;AACF,mBAAKkgE,OAAO,CAACoZ,8BAAR,CAAuCgQ,WAA5C;AACE9lE,gBAAAA,UAAU,CAACylE,QAAD,EAAWlf,aAAX,CAAV;AACA;;AACF,mBAAK7J,OAAO,CAACoZ,8BAAR,CAAuC2O,iBAA5C;AACE,oBAAGjoF,IAAI,CAACkpF,OAAL,CAAapB,eAAb,KAAiC5nB,OAAO,CAACiZ,sBAAR,CAA+B+H,KAAnE,EAA0E;AACxE19D,kBAAAA,UAAU,CAACylE,QAAD,EAAUlf,aAAV,CAAV;AACD,iBAFD,MAEO;AACL9iE,kBAAAA,IAAI,CAACsgF,YAAL,GAAoBrd,IAApB,CAAyB,UAASlqE,IAAT,EAAe;AACtCipF,oBAAAA,QAAQ;AACT,mBAFD,EAEG7e,KAFH,CAES,UAASjjE,GAAT,EAAcnH,IAAd,EAAmB;AAC1Bs7B,oBAAAA,MAAM,CAACn0B,GAAD,CAAN;AACD,mBAJD;AAKD;;AACD;;AACF;AACEm0B,gBAAAA,MAAM,CAACp+B,KAAK,CAAC8C,IAAI,CAACkpF,OAAL,CAAaC,wBAAb,CAAsCC,MAAvC,CAAN,CAAN;AAnBJ;AAqBD,WAtBD;AAuBD,SAxBD,MAwBO;AACLlpB,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,yBAAvB;AACA,cAAIA,KAAK,GAAGg/D,OAAO,CAACkN,YAAR,CAAqBlN,OAAO,CAACgZ,iBAAR,CAA0ByP,OAA/C,EAAwD,yBAAxD,CAAZ;AACArtD,UAAAA,MAAM,CAACp6B,KAAD,CAAN;AACD;AACF;;AACD+nF,MAAAA,QAAQ;AACT,KAjCM,CAAP;AAkCD,GAvCD;;AAyCAvC,EAAAA,OAAO,CAAC7mF,SAAR,CAAkB0pF,aAAlB,GAAkC,YAAY;AAC5C,QAAItiF,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAAC2/E,mBAAL;AACA,QAAIxvE,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACA,QAAIzE,WAAW,GAAG3Z,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCqG,cAApC,CAAmD,KAAK1Q,SAAxD,CAAlB;AACA,WAAO,IAAInkE,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AAC5ClkB,MAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAAC0R,qBAAR,CAA8BE,yBAA1C,EAAqE;AACnE,2BAAmB+H,WAAW,CAAC2H,gBAAZ,IAAgC,KAAKnS;AADW,OAArE,EAEK;AACDn4C,QAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB,cAAGA,IAAI,CAACopF,MAAL,KAAgBlpB,OAAO,CAACoZ,8BAAR,CAAuC+P,SAA1D,EAAqE;AACnEvhF,YAAAA,OAAO,CAAC9H,IAAD,CAAP;AACD,WAFD,MAEO;AACLiH,YAAAA,IAAI,CAAC8hF,qBAAL,GAA6B7e,IAA7B,CAAkC,UAASlqE,IAAT,EAAc;AAC9C8H,cAAAA,OAAO,CAAC9H,IAAD,CAAP;AACD,aAFD,EAEGoqE,KAFH,CAES,UAASjjE,GAAT,EAAa;AACpBm0B,cAAAA,MAAM,CAACn0B,GAAD,CAAN;AACD,aAJD;AAKD;AACF,SAXA;AAYDqjE,QAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAe;AACtB+4D,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,sBAAvB,EACGshE,UADH,CACc;AACVr7D,YAAAA,GAAG,EAAEA;AADK,WADd;AAIA,cAAIjG,KAAK,GAAGg/D,OAAO,CAACkN,YAAR,CAAqBlN,OAAO,CAACgZ,iBAAR,CAA0BsQ,qBAA/C,EAAsE,sBAAtE,EAA8FriF,GAA9F,CAAZ;AACAm0B,UAAAA,MAAM,CAACp6B,KAAD,CAAN;AACD;AAnBA,OAFL;AAuBD,KAxBM,CAAP;AAyBD,GA9BD;;AAgCAwlF,EAAAA,OAAO,CAAC7mF,SAAR,CAAkB4pF,eAAlB,GAAoC,UAAUzC,SAAV,EAAqB;AACvD,QAAI//E,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAAC2/E,mBAAL;AACA,QAAIxvE,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACA,QAAIzE,WAAW,GAAG3Z,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCqG,cAApC,CAAmD,KAAK1Q,SAAxD,CAAlB;AACA,WAAO,IAAInkE,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AAC5ClkB,MAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAAC0R,qBAAR,CAA8BO,sBAA1C,EAAkE;AAChE,2BAAmB0H,WAAW,CAAC2H,gBAAZ,IAAgC,KAAKnS,SADQ;AAEhE,qBAAanP,OAAO,CAACgH,aAAR,CAAsB8f,SAAtB,EAAiC,WAAjC;AAFmD,OAAlE,EAGK;AACD9vD,QAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB8H,UAAAA,OAAO,CAAC9H,IAAD,CAAP;AACD,SAHA;AAIDwqE,QAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAe;AACtB+4D,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,wBAAvB,EACGshE,UADH,CACc;AACVr7D,YAAAA,GAAG,EAAEA;AADK,WADd;AAIA,cAAIjG,KAAK,GAAGg/D,OAAO,CAACkN,YAAR,CAAqBlN,OAAO,CAACgZ,iBAAR,CAA0BwQ,wBAA/C,EAAyE,wBAAzE,EAAmGviF,GAAnG,CAAZ;AACAm0B,UAAAA,MAAM,CAACp6B,KAAD,CAAN;AACD;AAXA,OAHL;AAgBD,KAjBM,CAAP;AAkBD,GAvBD;;AAyBAwlF,EAAAA,OAAO,CAAC7mF,SAAR,CAAkB+mF,mBAAlB,GAAwC,YAAU;AAChD,QAAI3/E,IAAI,GAAG,IAAX;AACA,QAAI0iF,gBAAgB,GAAGzpB,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCqG,cAApC,CAAmD94E,IAAI,CAACooE,SAAxD,EAAmE2S,WAAnE,CAA+E9vE,MAA/E,CAAsF,UAAUiwE,IAAV,EAAgB;AAC3H,aAAOjiB,OAAO,CAACzW,QAAR,CAAiByW,OAAO,CAACmY,wBAAzB,EAAmD8J,IAAI,CAACzgF,KAAL,CAAW0S,IAA9D,CAAP;AACD,KAFsB,EAEpB7W,MAFoB,GAEX,CAFZ;;AAGA,QAAGosF,gBAAH,EAAoB;AAClB,YAAM,IAAIzpB,OAAO,CAACgN,mBAAZ,CAAgC,+CAAhC,CAAN;AACD;AACF,GARD;AAUA;AACF;AACA;AACA;AACA;AACA;;;AACE,MAAIoT,eAAe,GAAG,UAAUjR,SAAV,EAAqB+Q,YAArB,EAAmC;AACvD,SAAKwJ,qBAAL,GAA6B,IAAIlD,OAAJ,CAAYrX,SAAZ,CAA7B;AACA8V,IAAAA,UAAU,CAAC7nF,IAAX,CAAgB,IAAhB,EAAsB+xE,SAAtB,EAAiC+Q,YAAjC;AACD,GAHD;;AAKAE,EAAAA,eAAe,CAACzgF,SAAhB,GAA4B5B,MAAM,CAACksB,MAAP,CAAcg7D,UAAU,CAACtlF,SAAzB,CAA5B;AACAygF,EAAAA,eAAe,CAACzgF,SAAhB,CAA0B2G,WAA1B,GAAwC85E,eAAxC;AAEA;AACF;AACA;AACA;;AACEA,EAAAA,eAAe,CAACzgF,SAAhB,CAA0B2jF,qBAA1B,GAAkD,YAAY;AAC5D,WAAO,KAAK/J,QAAL,GAAgBkM,kBAAvB;AACD,GAFD;;AAIArF,EAAAA,eAAe,CAACzgF,SAAhB,CAA0BymF,YAA1B,GAAyC,YAAY;AACnD,WAAO,KAAK7M,QAAL,GAAgBkM,kBAAvB;AACD,GAFD;;AAIArF,EAAAA,eAAe,CAACzgF,SAAhB,CAA0BgkF,YAA1B,GAAyC,YAAY;AACnD,WAAO3jB,OAAO,CAAC6Y,SAAR,CAAkB7X,SAAzB;AACD,GAFD;;AAIAof,EAAAA,eAAe,CAACzgF,SAAhB,CAA0BgqF,kBAA1B,GAA+C,YAAY;AACzD,WAAO3pB,OAAO,CAAC0K,IAAR,CAAa2b,YAAb,CAA0BpoF,GAA1B,CAA8B,IAA9B,CAAP;AACD,GAFD;;AAIAmiF,EAAAA,eAAe,CAACzgF,SAAhB,CAA0BiqF,mBAA1B,GAAgD,YAAW;AACzD,WAAO,KAAKF,qBAAL,CAA2BjD,YAA3B,EAAP;AACD,GAFD;;AAIArG,EAAAA,eAAe,CAACzgF,SAAhB,CAA0BkqF,uBAA1B,GAAoD,YAAW;AAC7D,WAAO,KAAKH,qBAAL,CAA2BzC,gBAA3B,EAAP;AACD,GAFD;;AAIA7G,EAAAA,eAAe,CAACzgF,SAAhB,CAA0BmqF,oBAA1B,GAAiD,YAAW;AAE1D,WAAO,KAAKJ,qBAAL,CAA2BvC,aAA3B,EAAP;AACD,GAHD;;AAKA/G,EAAAA,eAAe,CAACzgF,SAAhB,CAA0BoqF,0BAA1B,GAAuD,UAAStC,QAAT,EAAmB;AACxE,WAAO,KAAKiC,qBAAL,CAA2BlC,eAA3B,CAA2CC,QAA3C,CAAP;AACD,GAFD;;AAIArH,EAAAA,eAAe,CAACzgF,SAAhB,CAA0BqqF,sBAA1B,GAAmD,YAAW;AAC5D,WAAO,KAAKN,qBAAL,CAA2BL,aAA3B,EAAP;AACD,GAFD;;AAIAjJ,EAAAA,eAAe,CAACzgF,SAAhB,CAA0BsqF,sBAA1B,GAAmD,UAASnD,SAAT,EAAoB;AACrE,WAAO,KAAK4C,qBAAL,CAA2BH,eAA3B,CAA2CzC,SAA3C,CAAP;AACD,GAFD;AAIA;AACF;AACA;AACA;AACA;AACA;;;AACE,MAAI7G,cAAc,GAAG,UAAU9Q,SAAV,EAAqB+Q,YAArB,EAAmC;AACtD+E,IAAAA,UAAU,CAAC7nF,IAAX,CAAgB,IAAhB,EAAsB+xE,SAAtB,EAAiC+Q,YAAjC;AACD,GAFD;;AAIAD,EAAAA,cAAc,CAACtgF,SAAf,GAA2B5B,MAAM,CAACksB,MAAP,CAAcg7D,UAAU,CAACtlF,SAAzB,CAA3B;AACAsgF,EAAAA,cAAc,CAACtgF,SAAf,CAAyB2G,WAAzB,GAAuC25E,cAAvC;;AAEAA,EAAAA,cAAc,CAACtgF,SAAf,CAAyBymF,YAAzB,GAAwC,YAAY;AAClD,QAAItmF,IAAI,GAAG,KAAKy5E,QAAL,GAAgB2Q,aAA3B;;AACA,QAAI,CAACpqF,IAAL,EAAW;AACT,aAAO,IAAP;AACD,KAFD,MAEO;AACL,UAAI65E,WAAW,GAAG3Z,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCqG,cAApC,CAAmD,KAAK1Q,SAAxD,CAAlB;AACA,UAAIgb,WAAW,GAAG;AAChBhb,QAAAA,SAAS,EAAE,KAAKA,SADA;AAEhBmS,QAAAA,gBAAgB,EAAE3H,WAAW,CAAC2H,gBAAZ,IAAgC,KAAKnS,SAFvC;AAGhBib,QAAAA,aAAa,EAAE,KAAKlK,YAHJ;AAIhBmK,QAAAA,kBAAkB,EAAErqB,OAAO,CAACmF,KAAR,CAAc,IAAd,EAAoB,KAAKklB,kBAAzB;AAJJ,OAAlB;;AAMA,UAAIvqF,IAAI,CAACkgF,cAAT,EAAyB;AACvB,YAAI;AACFmK,UAAAA,WAAW,CAACG,gBAAZ,GAA+BniF,IAAI,CAACC,KAAL,CAAWtI,IAAI,CAACkgF,cAAhB,EAAgCuK,6BAA/D;AACD,SAFD,CAEE,OAAOjuF,CAAP,EAAU;AACV0jE,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuBg/D,OAAO,CAACc,YAAR,CAAqBG,IAA5C,EAAkD,4BAAlD,EACGqB,UADH,CACcxiE,IADd,EAEGuiE,aAFH,CAEiB/lE,CAFjB,EAGGmmE,uBAHH;AAIA0nB,UAAAA,WAAW,CAACG,gBAAZ,GAA+B,IAA/B;AACD;AACF;;AACDH,MAAAA,WAAW,CAACG,gBAAZ,GAA+BH,WAAW,CAACG,gBAAZ,IAAgC,IAA/D;AACA;;AACAH,MAAAA,WAAW,CAACK,YAAZ,GAA2B,KAAKjR,QAAL,GAAgB2Q,aAA3C;AACA,aAAOC,WAAP;AACD;AACF,GA5BD;AA8BA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;AACElK,EAAAA,cAAc,CAACtgF,SAAf,CAAyB0qF,kBAAzB,GAA8C,YAAY;AACxDnzE,IAAAA,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAT;AACA,QAAIzE,WAAW,GAAG3Z,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCqG,cAApC,CAAmD,KAAK1Q,SAAxD,CAAlB;AACA,QAAIsb,gBAAgB,GAAG;AACrBC,MAAAA,aAAa,EAAE1qB,OAAO,CAAC4G,eAAR,CAAwBC,UADlB;AAErBujB,MAAAA,aAAa,EAAE,KAAKlK,YAFC;AAGrB/Q,MAAAA,SAAS,EAAEwK,WAAW,CAAC2H,gBAAZ,IAAgC,KAAKnS;AAH3B,KAAvB;AAKA,WAAO,IAAInkE,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AAC5ClkB,MAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsBkZ,gBAAlC,EAAoDF,gBAApD,EAAsE;AACpEzzD,QAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvBkgE,UAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,8BAAtB,EAAsDoB,uBAAtD;AACA76D,UAAAA,OAAO,CAAC9H,IAAD,CAAP;AACD,SAJmE;AAKpEwqE,QAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAenH,IAAf,EAAqB;AAC5BkgE,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,2BAAvB,EAAoDyhE,uBAApD,GACGH,UADH,CACc;AACVr7D,YAAAA,GAAG,EAAEA,GADK;AAEVnH,YAAAA,IAAI,EAAEA;AAFI,WADd;AAKAs7B,UAAAA,MAAM,CAACp+B,KAAK,CAAC,2BAAD,CAAN,CAAN;AACD;AAZmE,OAAtE;AAcD,KAfM,CAAP;AAgBD,GAxBD;;AA0BAijF,EAAAA,cAAc,CAACtgF,SAAf,CAAyBgkF,YAAzB,GAAwC,YAAY;AAClD,WAAO3jB,OAAO,CAAC6Y,SAAR,CAAkB5X,IAAzB;AACD,GAFD;;AAIAgf,EAAAA,cAAc,CAACtgF,SAAf,CAAyBgqF,kBAAzB,GAA8C,YAAY;AACxD,WAAO3pB,OAAO,CAAC0K,IAAR,CAAa2b,YAAb,CAA0BpoF,GAA1B,CAA8B,IAA9B,CAAP;AACD,GAFD;;AAIAgiF,EAAAA,cAAc,CAACtgF,SAAf,CAAyBulF,oBAAzB,GAAgD,YAAY;AAC1D;AACA,QAAI,KAAKoB,sBAAL,EAAJ,EAAmC;AACjCtmB,MAAAA,OAAO,CAAC0K,IAAR,CAAa2b,YAAb,CAA0BpoF,GAA1B,CAA8B,IAA9B,EAAoCisE,KAApC,CAA0C,YAAY,CAAG,CAAzD;AACD;AACF,GALD;AAOA;AACF;AACA;AACA;AACA;AACA;;;AACE,MAAIiW,cAAc,GAAG,UAAUhR,SAAV,EAAqB+Q,YAArB,EAAmC;AACtD+E,IAAAA,UAAU,CAAC7nF,IAAX,CAAgB,IAAhB,EAAsB+xE,SAAtB,EAAiC+Q,YAAjC;AACD,GAFD;;AAGAC,EAAAA,cAAc,CAACxgF,SAAf,GAA2B5B,MAAM,CAACksB,MAAP,CAAcg7D,UAAU,CAACtlF,SAAzB,CAA3B;AACAwgF,EAAAA,cAAc,CAACxgF,SAAf,CAAyB2G,WAAzB,GAAuC65E,cAAvC;;AAEAA,EAAAA,cAAc,CAACxgF,SAAf,CAAyBgkF,YAAzB,GAAwC,YAAY;AAClD,WAAO3jB,OAAO,CAAC6Y,SAAR,CAAkB3X,IAAzB;AACD,GAFD;;AAIAif,EAAAA,cAAc,CAACxgF,SAAf,CAAyBymF,YAAzB,GAAwC,YAAY;AAChD,QAAIzM,WAAW,GAAG3Z,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCqG,cAApC,CAAmD,KAAK1Q,SAAxD,CAAlB;AACA,QAAIgb,WAAW,GAAG;AAChBhb,MAAAA,SAAS,EAAE,KAAKA,SADA;AAEhBmS,MAAAA,gBAAgB,EAAE3H,WAAW,CAAC2H,gBAAZ,IAAgC,KAAKnS;AAFvC,KAAlB;AAIA,WAAOgb,WAAP;AACH,GAPD;;AASAhK,EAAAA,cAAc,CAACxgF,SAAf,CAAyBgqF,kBAAzB,GAA8C,YAAY;AACxD,WAAO3pB,OAAO,CAAC0K,IAAR,CAAa2b,YAAb,CAA0BpoF,GAA1B,CAA8B,IAA9B,CAAP;AACD,GAFD;AAIA;AACF;AACA;;;AACE,MAAI+mF,kBAAkB,GAAG,UAAUhF,cAAV,EAA0B;AACjDhgB,IAAAA,OAAO,CAACilB,UAAR,CAAmB7nF,IAAnB,CAAwB,IAAxB,EAA8B4iF,cAAc,CAAC7Q,SAA7C,EAAwD6Q,cAAc,CAACE,YAAvE;AACA,SAAKF,cAAL,GAAsBA,cAAtB;AACD,GAHD;;AAIAgF,EAAAA,kBAAkB,CAACrlF,SAAnB,GAA+B5B,MAAM,CAACksB,MAAP,CAAcg7D,UAAU,CAACtlF,SAAzB,CAA/B;AACAqlF,EAAAA,kBAAkB,CAACrlF,SAAnB,CAA6B2G,WAA7B,GAA2C0+E,kBAA3C;;AAEAA,EAAAA,kBAAkB,CAACrlF,SAAnB,CAA6B45E,QAA7B,GAAwC,YAAY;AAClD,WAAO,KAAKyG,cAAZ;AACD,GAFD;;AAIAgF,EAAAA,kBAAkB,CAACrlF,SAAnB,CAA6BulF,oBAA7B,GAAoD,YAAY,CAAG,CAAnE;;AAEA,MAAIpiE,QAAQ,GAAG,UAAU4rD,QAAV,EAAoB;AACjC,QAAIhgE,MAAM,GAAGggE,QAAQ,IAAI,EAAzB;AACA,SAAKkc,WAAL,GAAmBl8E,MAAM,CAACgwE,UAAP,IAAqBhwE,MAAM,CAACk8E,WAA5B,IAA2C,IAA9D;AACA,SAAKlM,UAAL,GAAkB,KAAKkM,WAAvB;AACA,SAAK12E,IAAL,GAAYxF,MAAM,CAACwF,IAAP,IAAe,IAA3B;AACA,SAAK5M,IAAL,GAAYoH,MAAM,CAACpH,IAAP,IAAe,IAA3B;AACA,SAAKujF,WAAL,GAAmBn8E,MAAM,CAACm8E,WAAP,IAAsB,IAAzC;AACA,SAAKC,UAAL,GAAkBp8E,MAAM,CAACo8E,UAAP,IAAqB,IAAvC;AACA,SAAK58B,KAAL,GAAax/C,MAAM,CAACw/C,KAAP,IAAgB,IAA7B;AACD,GATD;AAWA;AACF;AACA;;;AACEprC,EAAAA,QAAQ,CAACnjB,SAAT,CAAmBorF,gBAAnB,GAAsC,YAAY;AAChD,WAAO,KAAKF,WAAL,GAAmB,KAAKA,WAAL,CAAiBhhE,OAAjB,CAAyB,gBAAzB,EAA2C,IAA3C,CAAnB,GAAsE,EAA7E;AACD,GAFD;AAIA;AACF;AACA;;;AACE/G,EAAAA,QAAQ,CAACkoE,aAAT,GAAyB,UAAUzxE,MAAV,EAAkBjS,IAAlB,EAAwB;AAC/C,WAAO,IAAIwb,QAAJ,CAAa;AAClB5O,MAAAA,IAAI,EAAE8rD,OAAO,CAAC8X,YAAR,CAAqBmT,YADT;AAElBJ,MAAAA,WAAW,EAAEtxE,MAFK;AAGlBjS,MAAAA,IAAI,EAAEA,IAAI,IAAI;AAHI,KAAb,CAAP;AAKD,GAND;AAQA;AACF;AACA;;;AACE,MAAI4jF,cAAc,GAAG,UAAUC,SAAV,EAAqBxwE,YAArB,EAAmCywE,WAAnC,EAAgD;AACnE,SAAKD,SAAL,GAAiBA,SAAjB;AACA,SAAKxwE,YAAL,GAAoBA,YAApB;AACA,SAAKywE,WAAL,GAAmBA,WAAnB;AACD,GAJD;;AAKAF,EAAAA,cAAc,CAACvrF,SAAf,CAAyB0rF,YAAzB,GAAwC,YAAY;AAClD,WAAO,KAAKF,SAAZ;AACD,GAFD;;AAGAD,EAAAA,cAAc,CAACvrF,SAAf,CAAyB2rF,eAAzB,GAA2C,YAAY;AACrD,WAAO,KAAK3wE,YAAZ;AACD,GAFD;;AAGAuwE,EAAAA,cAAc,CAACvrF,SAAf,CAAyB4rF,cAAzB,GAA0C,YAAY;AACpD,WAAO,KAAKH,WAAZ;AACD,GAFD;AAIA;AACF;AACA;;;AACEprB,EAAAA,OAAO,CAAC31B,KAAR,GAAgB,UAAU1tC,CAAV,EAAa;AAC3B,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACA,QAAItuB,GAAG,GAAGouB,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAACsN,WAAR,CAAoB/rE,IAAlC,EAAwC5E,CAAxC,CAAV;;AACA,QAAIqjE,OAAO,CAAC31B,KAAR,CAAcivC,WAAlB,EAA+B;AAC7B38E,MAAAA,CAAC,CAAC,IAAIqjE,OAAO,CAACqZ,KAAZ,EAAD,CAAD;AACD;;AACD,WAAOh9B,GAAP;AACD,GAPD;;AAQA2jB,EAAAA,OAAO,CAAC31B,KAAR,CAAcivC,WAAd,GAA4B,KAA5B;;AAEAtZ,EAAAA,OAAO,CAACqd,OAAR,GAAkB,UAAU1gF,CAAV,EAAa;AAC7B,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACA,WAAOF,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAACwN,aAAR,CAAsBjsE,IAApC,EAA0C5E,CAA1C,CAAP;AACD,GAHD;;AAKAqjE,EAAAA,OAAO,CAACwrB,sBAAR,GAAiC,UAAU7uF,CAAV,EAAa;AAC5C,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACA,QAAItuB,GAAG,GAAGouB,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAACuN,eAAR,CAAwBke,YAAtC,EAAoD9uF,CAApD,CAAV;;AACA,QAAIqjE,OAAO,CAAC0rB,mBAAZ,EAAiC;AAC/B/uF,MAAAA,CAAC;AACF;;AACD,WAAO0/C,GAAP;AACD,GAPD;AASA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACE2jB,EAAAA,OAAO,CAACsF,QAAR,GAAmB,UAAUqmB,KAAV,EAAiBC,MAAjB,EAAyBC,MAAzB,EAAiC;AAClD7rB,IAAAA,OAAO,CAACgH,aAAR,CAAsB2kB,KAAtB,EAA6B,2BAA7B;AACA3rB,IAAAA,OAAO,CAACgH,aAAR,CAAsB4kB,MAAtB,EAA8B,mCAA9B;;AAEA,QAAI,CAAC5rB,OAAO,CAAC0K,IAAR,CAAaohB,YAAlB,EAAgC;AAC9B;AACA9rB,MAAAA,OAAO,CAAC0C,MAAR,GAAiBpB,IAAjB,CAAsB,0EAAtB,EAAkGqqB,KAAlG,EAAyGlpB,uBAAzG;;AACA,UAAIopB,MAAJ,EAAY;AACVA,QAAAA,MAAM;AACP;;AACD;AACD;;AAED,QAAIC,YAAY,GAAG9rB,OAAO,CAAC0K,IAAR,CAAaqhB,eAAb,EAAnB;AACAD,IAAAA,YAAY,CAAC1uF,IAAb,CAAkB4iE,OAAO,CAACmS,aAAR,CAAsB6Z,YAAxC,EAAsD;AACpDL,MAAAA,KAAK,EAAEA;AAD6C,KAAtD,EAEG;AACC30D,MAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB,YAAIA,IAAI,CAACmsF,QAAT,EAAmB;AACjBL,UAAAA,MAAM;AAEP,SAHD,MAGO,IAAIC,MAAJ,EAAY;AACjBA,UAAAA,MAAM;AACP;AACF;AARF,KAFH;AAYD,GA1BD;AA4BA;AACF;AACA;;;AACE7rB,EAAAA,OAAO,CAACksB,YAAR,GAAuB,UAAUP,KAAV,EAAiBQ,eAAjB,EAAkCC,eAAlC,EAAmD;AACxEpsB,IAAAA,OAAO,CAACgH,aAAR,CAAsB2kB,KAAtB,EAA6B,2BAA7B;;AAEA,QAAI,CAAC3rB,OAAO,CAAC0K,IAAR,CAAaohB,YAAlB,EAAgC;AAC9B;AACA9rB,MAAAA,OAAO,CAAC0C,MAAR,GAAiBpB,IAAjB,CAAsB,0EAAtB,EAAkGqqB,KAAlG;;AACA,UAAIS,eAAJ,EAAqB;AACnBA,QAAAA,eAAe;AAChB;AACF,KAND,MAMO;AACL,UAAIN,YAAY,GAAG9rB,OAAO,CAAC0K,IAAR,CAAaqhB,eAAb,EAAnB;AACAD,MAAAA,YAAY,CAAC1uF,IAAb,CAAkB4iE,OAAO,CAACmS,aAAR,CAAsBka,aAAxC,EAAuD;AACrDV,QAAAA,KAAK,EAAEA;AAD8C,OAAvD,EAEG;AACD30D,QAAAA,OAAO,EAAE,YAAY;AACnB,cAAIm1D,eAAJ,EAAqB;AACnBA,YAAAA,eAAe;AAChB;AACF;AALA,OAFH;AASD;AACF,GArBD;;AAuBAnsB,EAAAA,OAAO,CAACqZ,KAAR,GAAgBA,KAAhB;AACArZ,EAAAA,OAAO,CAAC0f,aAAR,GAAwBA,aAAxB;AACA1f,EAAAA,OAAO,CAACoP,OAAR,GAAkBA,OAAlB;AACApP,EAAAA,OAAO,CAAC4f,eAAR,GAA0BA,eAA1B;AACA;;AACA5f,EAAAA,OAAO,CAACilB,UAAR,GAAqB7E,eAArB;AACApgB,EAAAA,OAAO,CAACssB,cAAR,GAAyBrH,UAAzB;AACAjlB,EAAAA,OAAO,CAACogB,eAAR,GAA0BA,eAA1B;AACApgB,EAAAA,OAAO,CAACigB,cAAR,GAAyBA,cAAzB;AACAjgB,EAAAA,OAAO,CAACmgB,cAAR,GAAyBA,cAAzB;AACAngB,EAAAA,OAAO,CAACglB,kBAAR,GAA6BA,kBAA7B;AACAhlB,EAAAA,OAAO,CAACl9C,QAAR,GAAmBA,QAAnB;AACAk9C,EAAAA,OAAO,CAAC/qD,OAAR,GAAkB6N,QAAlB;AACAk9C,EAAAA,OAAO,CAACkrB,cAAR,GAAyBA,cAAzB;AAED,CA7uDD;;AAgvDA,CAAC,UAAS5uF,CAAT,EAAW;AAAC,MAAIC,CAAC,GAAC,EAAN;;AAAS,WAASC,CAAT,CAAWC,CAAX,EAAa;AAAC,QAAGF,CAAC,CAACE,CAAD,CAAJ,EAAQ,OAAOF,CAAC,CAACE,CAAD,CAAD,CAAKU,OAAZ;AAAoB,QAAId,CAAC,GAACE,CAAC,CAACE,CAAD,CAAD,GAAK;AAACC,MAAAA,CAAC,EAACD,CAAH;AAAKq5D,MAAAA,CAAC,EAAC,CAAC,CAAR;AAAU34D,MAAAA,OAAO,EAAC;AAAlB,KAAX;AAAiC,WAAOb,CAAC,CAACG,CAAD,CAAD,CAAKW,IAAL,CAAUf,CAAC,CAACc,OAAZ,EAAoBd,CAApB,EAAsBA,CAAC,CAACc,OAAxB,EAAgCX,CAAhC,GAAmCH,CAAC,CAACy5D,CAAF,GAAI,CAAC,CAAxC,EAA0Cz5D,CAAC,CAACc,OAAnD;AAA2D;;AAAAX,EAAAA,CAAC,CAACg7C,CAAF,GAAIl7C,CAAJ,EAAME,CAAC,CAACI,CAAF,GAAIL,CAAV,EAAYC,CAAC,CAACiG,CAAF,GAAI,UAASnG,CAAT,EAAWC,CAAX,EAAaE,CAAb,EAAe;AAACD,IAAAA,CAAC,CAACC,CAAF,CAAIH,CAAJ,EAAMC,CAAN,KAAUwB,MAAM,CAACC,cAAP,CAAsB1B,CAAtB,EAAwBC,CAAxB,EAA0B;AAAC8B,MAAAA,UAAU,EAAC,CAAC,CAAb;AAAeJ,MAAAA,GAAG,EAACxB;AAAnB,KAA1B,CAAV;AAA2D,GAA3F,EAA4FD,CAAC,CAACH,CAAF,GAAI,UAASC,CAAT,EAAW;AAAC,mBAAa,OAAO25C,MAApB,IAA4BA,MAAM,CAACs2C,WAAnC,IAAgDxuF,MAAM,CAACC,cAAP,CAAsB1B,CAAtB,EAAwB25C,MAAM,CAACs2C,WAA/B,EAA2C;AAAC3lF,MAAAA,KAAK,EAAC;AAAP,KAA3C,CAAhD,EAA6G7I,MAAM,CAACC,cAAP,CAAsB1B,CAAtB,EAAwB,YAAxB,EAAqC;AAACsK,MAAAA,KAAK,EAAC,CAAC;AAAR,KAArC,CAA7G;AAA8J,GAA1Q,EAA2QpK,CAAC,CAACA,CAAF,GAAI,UAASF,CAAT,EAAWC,CAAX,EAAa;AAAC,QAAG,IAAEA,CAAF,KAAMD,CAAC,GAACE,CAAC,CAACF,CAAD,CAAT,GAAc,IAAEC,CAAnB,EAAqB,OAAOD,CAAP;AAAS,QAAG,IAAEC,CAAF,IAAK,YAAU,OAAOD,CAAtB,IAAyBA,CAAzB,IAA4BA,CAAC,CAACkwF,UAAjC,EAA4C,OAAOlwF,CAAP;AAAS,QAAIG,CAAC,GAACsB,MAAM,CAACksB,MAAP,CAAc,IAAd,CAAN;AAA0B,QAAGztB,CAAC,CAACH,CAAF,CAAII,CAAJ,GAAOsB,MAAM,CAACC,cAAP,CAAsBvB,CAAtB,EAAwB,SAAxB,EAAkC;AAAC4B,MAAAA,UAAU,EAAC,CAAC,CAAb;AAAeuI,MAAAA,KAAK,EAACtK;AAArB,KAAlC,CAAP,EAAkE,IAAEC,CAAF,IAAK,YAAU,OAAOD,CAA3F,EAA6F,KAAI,IAAID,CAAR,IAAaC,CAAb,EAAeE,CAAC,CAACiG,CAAF,CAAIhG,CAAJ,EAAMJ,CAAN,EAAQ,UAASE,CAAT,EAAW;AAAC,aAAOD,CAAC,CAACC,CAAD,CAAR;AAAY,KAAxB,CAAyBw/D,IAAzB,CAA8B,IAA9B,EAAmC1/D,CAAnC,CAAR;AAA+C,WAAOI,CAAP;AAAS,GAA9iB,EAA+iBD,CAAC,CAACD,CAAF,GAAI,UAASD,CAAT,EAAW;AAAC,QAAIC,CAAC,GAACD,CAAC,IAAEA,CAAC,CAACkwF,UAAL,GAAgB,YAAU;AAAC,aAAOlwF,CAAC,CAACmwF,OAAT;AAAiB,KAA5C,GAA6C,YAAU;AAAC,aAAOnwF,CAAP;AAAS,KAAvE;AAAwE,WAAOE,CAAC,CAACiG,CAAF,CAAIlG,CAAJ,EAAM,GAAN,EAAUA,CAAV,GAAaA,CAApB;AAAsB,GAA7pB,EAA8pBC,CAAC,CAACC,CAAF,GAAI,UAASH,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAOwB,MAAM,CAAC4B,SAAP,CAAiBjB,cAAjB,CAAgCtB,IAAhC,CAAqCd,CAArC,EAAuCC,CAAvC,CAAP;AAAiD,GAAjuB,EAAkuBC,CAAC,CAACU,CAAF,GAAI,EAAtuB,EAAyuBV,CAAC,CAACA,CAAC,CAAC0G,CAAF,GAAI,CAAL,CAA1uB;AAAkvB,CAA74B,CAA84B,CAAC,UAAS5G,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC;;AAAa,MAAIC,CAAC,GAACD,CAAC,CAAC,CAAD,CAAP;AAAA,MAAWH,CAAC,GAAC,MAAb;AAAA,MAAoBK,CAAC,GAAC,eAAtB;AAAA,MAAsCE,CAAC,GAAC,OAAxC;AAAA,MAAgDsG,CAAC,GAAC,GAAlD;AAAA,MAAsDnG,CAAC,GAAC,eAAxD;AAAA,MAAwED,CAAC,GAAC,iBAA1E;AAAA,MAA4Fg5D,CAAC,GAAC,eAA9F;AAAA,MAA8Gn5D,CAAC,GAAC,WAAhH;AAAA,MAA4HO,CAAC,GAAC,cAA9H;;AAA6I,WAASuF,CAAT,CAAWnG,CAAX,EAAa;AAAC,WAAM,CAACmG,CAAC,GAAC,cAAY,OAAOwzC,MAAnB,IAA2B,YAAU,OAAOA,MAAM,CAAC/S,QAAnD,GAA4D,UAAS5mC,CAAT,EAAW;AAAC,aAAO,OAAOA,CAAd;AAAgB,KAAxF,GAAyF,UAASA,CAAT,EAAW;AAAC,aAAOA,CAAC,IAAE,cAAY,OAAO25C,MAAtB,IAA8B35C,CAAC,CAACgK,WAAF,KAAgB2vC,MAA9C,IAAsD35C,CAAC,KAAG25C,MAAM,CAACt2C,SAAjE,GAA2E,QAA3E,GAAoF,OAAOrD,CAAlG;AAAoG,KAA5M,EAA8MA,CAA9M,CAAN;AAAuN;;AAAA,MAAIkG,CAAC,GAAC;AAACykE,IAAAA,UAAU,EAAC,UAAS3qE,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAG,CAACD,CAAJ,EAAM,MAAM,IAAIU,KAAJ,CAAUT,CAAV,CAAN;AAAmB,KAAnD;AAAoDyqE,IAAAA,aAAa,EAAC,UAAS1qE,CAAT,EAAWC,CAAX,EAAa;AAAC,aAAOiG,CAAC,CAACykE,UAAF,CAAa,SAAO3qE,CAAP,IAAU,KAAK,CAAL,KAASmG,CAAC,CAACnG,CAAD,CAAjC,EAAqCyB,MAAM,CAACtB,CAAC,CAACkiE,OAAH,CAAN,CAAkB,qBAAlB,EAAwCpiE,CAAC,IAAE,SAA3C,CAArC,GAA4FD,CAAnG;AAAqG,KAArL;AAAsLowF,IAAAA,gBAAgB,EAAC,UAASpwF,CAAT,EAAW;AAAC,aAAM,YAAU,OAAOA,CAAjB,IAAoBA,CAAC,CAACe,MAAF,GAAS,CAAnC;AAAqC,KAAxP;AAAyPsvF,IAAAA,YAAY,EAAC,UAASrwF,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAG,CAACk0B,KAAK,CAAC6D,OAAN,CAAch4B,CAAd,CAAJ,EAAqB,MAAM,IAAIU,KAAJ,CAAUT,CAAC,GAAC,kBAAZ,CAAN;AAAsC,KAA/U;AAAgVgiD,IAAAA,UAAU,EAAC,UAASjiD,CAAT,EAAW;AAAC,aAAM,CAAC,EAAEA,CAAC,IAAEA,CAAC,CAACgK,WAAL,IAAkBhK,CAAC,CAACc,IAApB,IAA0Bd,CAAC,CAACkB,KAA9B,CAAP;AAA4C,KAAnZ;AAAoZ6gD,IAAAA,QAAQ,EAAC,UAAS/hD,CAAT,EAAW;AAAC,aAAM,EAAE,aAAWmG,CAAC,CAACnG,CAAD,CAAZ,IAAiB,SAAOA,CAA1B,CAAN;AAAmC,KAA5c;AAA6c84D,IAAAA,QAAQ,EAAC,UAAS94D,CAAT,EAAW;AAAC,aAAM,YAAU,OAAOA,CAAvB;AAAyB,KAA3f;AAA4f4hD,IAAAA,QAAQ,EAAC,UAAS5hD,CAAT,EAAW;AAAC,aAAM,YAAU,OAAOA,CAAvB;AAAyB;AAA1iB,GAAN;AAAA,MAAkjBwiD,CAAC,GAAC,IAAI3tB,MAAJ,CAAW,eAAX,CAApjB;AAAglB3uB,EAAAA,CAAC,CAACoqF,UAAF,GAAa,UAAStwF,CAAT,EAAW;AAAC,WAAOwiD,CAAC,CAAC1tB,IAAF,CAAO90B,CAAP,CAAP;AAAiB,GAA1C,EAA2CkG,CAAC,CAACqqF,uBAAF,GAA0B,UAASvwF,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAM;AAACmvF,MAAAA,KAAK,EAACrvF,CAAP;AAASwwF,MAAAA,OAAO,EAAC;AAACloE,QAAAA,MAAM,EAACroB,CAAC,GAAC,SAAD,GAAW,SAApB;AAA8BwwF,QAAAA,MAAM,EAACvwF;AAArC;AAAjB,KAAN;AAAgE,GAArJ,EAAsJgG,CAAC,CAACwqF,cAAF,GAAiB,UAAS1wF,CAAT,EAAWC,CAAX,EAAa;AAAC,QAAG,CAACiG,CAAC,CAAC67C,QAAF,CAAW/hD,CAAX,CAAJ,EAAkB,MAAM,IAAIU,KAAJ,CAAUT,CAAC,GAAC,oBAAZ,CAAN;AAAwC,GAA/O,EAAgPiG,CAAC,CAACyqF,SAAF,GAAY,UAAS3wF,CAAT,EAAW;AAAC,QAAIC,CAAC,GAACgB,SAAS,CAACF,MAAV,GAAiB,CAAjB,IAAoB,KAAK,CAAL,KAASE,SAAS,CAAC,CAAD,CAAtC,GAA0CA,SAAS,CAAC,CAAD,CAAnD,GAAuD,CAA7D;AAA+DhB,IAAAA,CAAC,GAAC6F,IAAI,CAACwpB,GAAL,CAASrvB,CAAT,EAAW,CAAX,CAAF;AAAgB,QAAIC,CAAC,GAAC4F,IAAI,CAAC0sC,MAAL,KAAc,EAAd,GAAiB,CAAjB,GAAmB,CAAC,CAA1B;AAA4B,WAAO1sC,IAAI,CAACC,KAAL,CAAW/F,CAAC,GAACE,CAAC,GAACF,CAAF,GAAI8F,IAAI,CAAC0sC,MAAL,EAAJ,GAAkBvyC,CAA/B,CAAP;AAAyC,GAA5Z,EAA6ZiG,CAAC,CAAC0qF,eAAF,GAAkB,YAAU;AAAC,WAAOhjD,SAAS,CAACijD,MAAjB;AAAwB,GAAld,EAAmd3qF,CAAC,CAAC4qF,gBAAF,GAAmB,UAAS9wF,CAAT,EAAW;AAAC,WAAM,EAAE,CAACA,CAAC,CAAC+wF,MAAH,IAAW,CAAC/wF,CAAC,CAAC+wF,MAAF,CAASn5E,IAAvB,KAA8B,sBAAoB5X,CAAC,CAAC+wF,MAAF,CAASn5E,IAAjE;AAAsE,GAAxjB;AAAyjB,MAAIsjC,CAAC,GAACh1C,CAAN;;AAAQ,WAASo0C,CAAT,CAAWt6C,CAAX,EAAa;AAAC,WAAM,CAACs6C,CAAC,GAAC,cAAY,OAAOX,MAAnB,IAA2B,YAAU,OAAOA,MAAM,CAAC/S,QAAnD,GAA4D,UAAS5mC,CAAT,EAAW;AAAC,aAAO,OAAOA,CAAd;AAAgB,KAAxF,GAAyF,UAASA,CAAT,EAAW;AAAC,aAAOA,CAAC,IAAE,cAAY,OAAO25C,MAAtB,IAA8B35C,CAAC,CAACgK,WAAF,KAAgB2vC,MAA9C,IAAsD35C,CAAC,KAAG25C,MAAM,CAACt2C,SAAjE,GAA2E,QAA3E,GAAoF,OAAOrD,CAAlG;AAAoG,KAA5M,EAA8MA,CAA9M,CAAN;AAAuN;;AAAA,WAASgxF,CAAT,CAAWhxF,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAM,CAACA,CAAD,IAAI,aAAWq6C,CAAC,CAACr6C,CAAD,CAAZ,IAAiB,cAAY,OAAOA,CAAxC,GAA0C,UAASD,CAAT,EAAW;AAAC,UAAG,KAAK,CAAL,KAASA,CAAZ,EAAc,MAAM,IAAIixF,cAAJ,CAAmB,2DAAnB,CAAN;AAAsF,aAAOjxF,CAAP;AAAS,KAAzH,CAA0HA,CAA1H,CAA1C,GAAuKC,CAA7K;AAA+K;;AAAA,WAAS8H,CAAT,CAAW/H,CAAX,EAAa;AAAC,WAAM,CAAC+H,CAAC,GAACtG,MAAM,CAACyvF,cAAP,GAAsBzvF,MAAM,CAACkmC,cAA7B,GAA4C,UAAS3nC,CAAT,EAAW;AAAC,aAAOA,CAAC,CAAC64C,SAAF,IAAap3C,MAAM,CAACkmC,cAAP,CAAsB3nC,CAAtB,CAApB;AAA6C,KAAxG,EAA0GA,CAA1G,CAAN;AAAmH;;AAAA,WAASkrC,CAAT,CAAWlrC,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAM,CAACirC,CAAC,GAACzpC,MAAM,CAACyvF,cAAP,IAAuB,UAASlxF,CAAT,EAAWC,CAAX,EAAa;AAAC,aAAOD,CAAC,CAAC64C,SAAF,GAAY54C,CAAZ,EAAcD,CAArB;AAAuB,KAA/D,EAAiEA,CAAjE,EAAmEC,CAAnE,CAAN;AAA4E;;AAAA,WAASs4B,CAAT,CAAWv4B,CAAX,EAAaC,CAAb,EAAe;AAAC,QAAG,EAAED,CAAC,YAAYC,CAAf,CAAH,EAAqB,MAAM,IAAIs5C,SAAJ,CAAc,mCAAd,CAAN;AAAyD;;AAAA,WAASzxC,CAAT,CAAW9H,CAAX,EAAaC,CAAb,EAAe;AAAC,SAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACD,CAAC,CAACc,MAAhB,EAAuBb,CAAC,EAAxB,EAA2B;AAAC,UAAIC,CAAC,GAACF,CAAC,CAACC,CAAD,CAAP;AAAWC,MAAAA,CAAC,CAAC4B,UAAF,GAAa5B,CAAC,CAAC4B,UAAF,IAAc,CAAC,CAA5B,EAA8B5B,CAAC,CAAC6B,YAAF,GAAe,CAAC,CAA9C,EAAgD,WAAU7B,CAAV,KAAcA,CAAC,CAAC+wC,QAAF,GAAW,CAAC,CAA1B,CAAhD,EAA6EzvC,MAAM,CAACC,cAAP,CAAsB1B,CAAtB,EAAwBG,CAAC,CAAC0C,GAA1B,EAA8B1C,CAA9B,CAA7E;AAA8G;AAAC;;AAAA,WAASgxF,CAAT,CAAWnxF,CAAX,EAAaC,CAAb,EAAeC,CAAf,EAAiB;AAAC,WAAOD,CAAC,IAAE6H,CAAC,CAAC9H,CAAC,CAACqD,SAAH,EAAapD,CAAb,CAAJ,EAAoBC,CAAC,IAAE4H,CAAC,CAAC9H,CAAD,EAAGE,CAAH,CAAxB,EAA8BF,CAArC;AAAuC;;AAAA,MAAIoxF,CAAC,GAAC,YAAU;AAAC,aAASpxF,CAAT,GAAY;AAACu4B,MAAAA,CAAC,CAAC,IAAD,EAAMv4B,CAAN,CAAD;AAAU;;AAAA,WAAOmxF,CAAC,CAACnxF,CAAD,EAAG,CAAC;AAAC6C,MAAAA,GAAG,EAAC,OAAL;AAAayH,MAAAA,KAAK,EAAC,UAAStK,CAAT,EAAW,CAAE;AAAhC,KAAD,EAAmC;AAAC6C,MAAAA,GAAG,EAAC,MAAL;AAAYyH,MAAAA,KAAK,EAAC,UAAStK,CAAT,EAAW,CAAE;AAA/B,KAAnC,EAAoE;AAAC6C,MAAAA,GAAG,EAAC,MAAL;AAAYyH,MAAAA,KAAK,EAAC,UAAStK,CAAT,EAAW,CAAE;AAA/B,KAApE,EAAqG;AAAC6C,MAAAA,GAAG,EAAC,OAAL;AAAayH,MAAAA,KAAK,EAAC,UAAStK,CAAT,EAAW,CAAE;AAAhC,KAArG,CAAH,CAAD,EAA6IA,CAApJ;AAAsJ,GAAxL,EAAN;AAAA,MAAiMqxF,CAAC,GAAC;AAACntB,IAAAA,KAAK,EAAC,EAAP;AAAUC,IAAAA,IAAI,EAAC,EAAf;AAAkBE,IAAAA,IAAI,EAAC,EAAvB;AAA0BC,IAAAA,KAAK,EAAC;AAAhC,GAAnM;AAAA,MAAuOgtB,CAAC,GAAC,YAAU;AAAC,aAAStxF,CAAT,GAAY;AAACu4B,MAAAA,CAAC,CAAC,IAAD,EAAMv4B,CAAN,CAAD,EAAU,KAAKuxF,kBAAL,EAAV,EAAoC,KAAKC,oBAAL,GAA0Bx7E,CAAC,EAA/D;AAAkE;;AAAA,WAAOm7E,CAAC,CAACnxF,CAAD,EAAG,CAAC;AAAC6C,MAAAA,GAAG,EAAC,qBAAL;AAA2ByH,MAAAA,KAAK,EAAC,UAAStK,CAAT,EAAWC,CAAX,EAAa;AAAC,YAAG,KAAKwxF,eAAL,EAAH,EAA0B,QAAOzxF,CAAP;AAAU,eAAKqxF,CAAC,CAACntB,KAAP;AAAa,mBAAO,KAAKwtB,aAAL,CAAmBhqB,KAAnB,CAAyBznE,CAAzB,CAAP;;AAAmC,eAAKoxF,CAAC,CAACltB,IAAP;AAAY,mBAAO,KAAKutB,aAAL,CAAmB3sB,IAAnB,CAAwB9kE,CAAxB,CAAP;;AAAkC,eAAKoxF,CAAC,CAAChtB,IAAP;AAAY,mBAAO,KAAKqtB,aAAL,CAAmB1sB,IAAnB,CAAwB/kE,CAAxB,CAAP;;AAAkC,eAAKoxF,CAAC,CAAC/sB,KAAP;AAAa,mBAAO,KAAKotB,aAAL,CAAmBhtF,KAAnB,CAAyBzE,CAAzB,CAAP;AAAnK;AAAuM;AAAhR,KAAD,EAAmR;AAAC4C,MAAAA,GAAG,EAAC,gBAAL;AAAsByH,MAAAA,KAAK,EAAC,UAAStK,CAAT,EAAW;AAAC,eAAOA,CAAC,IAAE,KAAK2xF,MAAf;AAAsB;AAA9D,KAAnR,EAAmV;AAAC9uF,MAAAA,GAAG,EAAC,iBAAL;AAAuByH,MAAAA,KAAK,EAAC,YAAU;AAAC,eAAO,SAAO,KAAKonF,aAAnB;AAAiC;AAAzE,KAAnV,EAA8Z;AAAC7uF,MAAAA,GAAG,EAAC,WAAL;AAAiByH,MAAAA,KAAK,EAAC,UAAStK,CAAT,EAAW;AAAC,YAAIC,CAAC,GAACD,CAAC,CAACwpB,MAAF,IAAU,EAAhB;AAAmB,eAAO,KAAKooE,gBAAL,KAAwBtxF,CAAxB,GAA0B,KAAKkxF,oBAA/B,GAAoD,IAAIK,CAAJ,CAAM5xF,CAAN,CAA3D;AAAoE;AAA1H,KAA9Z,EAA0hB;AAAC4C,MAAAA,GAAG,EAAC,oBAAL;AAA0ByH,MAAAA,KAAK,EAAC,UAAStK,CAAT,EAAW;AAAC,YAAIC,CAAC,GAACD,CAAC,IAAE,EAAT;AAAY,aAAK2xF,MAAL,GAAY1xF,CAAC,CAACslE,KAAF,IAAS8rB,CAAC,CAACntB,KAAvB,EAA6B,KAAKwtB,aAAL,GAAmBzxF,CAAC,CAACyM,MAAF,IAAU,IAA1D,EAA+D,KAAKklF,gBAAL,GAAsB7xF,CAArF,EAAuFE,CAAC,CAACynE,KAAF,KAAU,KAAKkqB,gBAAL,GAAsBtxF,CAAhC,CAAvF,EAA0HL,CAAC,CAACyM,MAAF,KAAW,KAAKklF,gBAAL,GAAsBxxF,CAAjC,CAA1H;AAA8J;AAAtN,KAA1hB,CAAH,CAAD,EAAwvBJ,CAA/vB;AAAiwB,GAA31B,EAAzO;AAAA,MAAukC8xF,CAAC,GAAC,YAAU;AAAC,aAAS9xF,CAAT,GAAY;AAACu4B,MAAAA,CAAC,CAAC,IAAD,EAAMv4B,CAAN,CAAD;AAAU;;AAAA,WAAOmxF,CAAC,CAACnxF,CAAD,EAAG,CAAC;AAAC6C,MAAAA,GAAG,EAAC,OAAL;AAAayH,MAAAA,KAAK,EAAC,YAAU,CAAE;AAA/B,KAAD,EAAkC;AAACzH,MAAAA,GAAG,EAAC,MAAL;AAAYyH,MAAAA,KAAK,EAAC,YAAU,CAAE;AAA9B,KAAlC,EAAkE;AAACzH,MAAAA,GAAG,EAAC,MAAL;AAAYyH,MAAAA,KAAK,EAAC,YAAU,CAAE;AAA9B,KAAlE,EAAkG;AAACzH,MAAAA,GAAG,EAAC,OAAL;AAAayH,MAAAA,KAAK,EAAC,YAAU,CAAE;AAA/B,KAAlG,CAAH,CAAD,EAAyItK,CAAhJ;AAAkJ,GAApL,EAAzkC;AAAA,MAAgwC6xF,CAAC,GAAC,UAAS7xF,CAAT,EAAW;AAAC,aAASC,CAAT,CAAWD,CAAX,EAAa;AAAC,UAAIE,CAAJ;AAAM,aAAOq4B,CAAC,CAAC,IAAD,EAAMt4B,CAAN,CAAD,EAAU,CAACC,CAAC,GAAC8wF,CAAC,CAAC,IAAD,EAAMjpF,CAAC,CAAC9H,CAAD,CAAD,CAAKa,IAAL,CAAU,IAAV,CAAN,CAAJ,EAA4B0oB,MAA5B,GAAmCxpB,CAAC,IAAE,EAAhD,EAAmDE,CAA1D;AAA4D;;AAAA,WAAO,UAASF,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAG,cAAY,OAAOA,CAAnB,IAAsB,SAAOA,CAAhC,EAAkC,MAAM,IAAIs5C,SAAJ,CAAc,oDAAd,CAAN;AAA0Ev5C,MAAAA,CAAC,CAACqD,SAAF,GAAY5B,MAAM,CAACksB,MAAP,CAAc1tB,CAAC,IAAEA,CAAC,CAACoD,SAAnB,EAA6B;AAAC2G,QAAAA,WAAW,EAAC;AAACM,UAAAA,KAAK,EAACtK,CAAP;AAASkxC,UAAAA,QAAQ,EAAC,CAAC,CAAnB;AAAqBlvC,UAAAA,YAAY,EAAC,CAAC;AAAnC;AAAb,OAA7B,CAAZ,EAA8F/B,CAAC,IAAEirC,CAAC,CAAClrC,CAAD,EAAGC,CAAH,CAAlG;AAAwG,KAAlO,CAAmOA,CAAnO,EAAqO6xF,CAArO,GAAwOX,CAAC,CAAClxF,CAAD,EAAG,CAAC;AAAC4C,MAAAA,GAAG,EAAC,OAAL;AAAayH,MAAAA,KAAK,EAAC,YAAU;AAAC,aAAI,IAAItK,CAAC,GAACiB,SAAS,CAACF,MAAhB,EAAuBd,CAAC,GAAC,IAAIk0B,KAAJ,CAAUn0B,CAAV,CAAzB,EAAsCE,CAAC,GAAC,CAA5C,EAA8CA,CAAC,GAACF,CAAhD,EAAkDE,CAAC,EAAnD,EAAsDD,CAAC,CAACC,CAAD,CAAD,GAAKe,SAAS,CAACf,CAAD,CAAd;;AAAkB,eAAO,KAAK6xF,IAAL,CAAUV,CAAC,CAACntB,KAAZ,EAAkBjkE,CAAlB,CAAP;AAA4B;AAAlI,KAAD,EAAqI;AAAC4C,MAAAA,GAAG,EAAC,MAAL;AAAYyH,MAAAA,KAAK,EAAC,YAAU;AAAC,aAAI,IAAItK,CAAC,GAACiB,SAAS,CAACF,MAAhB,EAAuBd,CAAC,GAAC,IAAIk0B,KAAJ,CAAUn0B,CAAV,CAAzB,EAAsCE,CAAC,GAAC,CAA5C,EAA8CA,CAAC,GAACF,CAAhD,EAAkDE,CAAC,EAAnD,EAAsDD,CAAC,CAACC,CAAD,CAAD,GAAKe,SAAS,CAACf,CAAD,CAAd;;AAAkB,eAAO,KAAK6xF,IAAL,CAAUV,CAAC,CAACltB,IAAZ,EAAiBlkE,CAAjB,CAAP;AAA2B;AAAhI,KAArI,EAAuQ;AAAC4C,MAAAA,GAAG,EAAC,MAAL;AAAYyH,MAAAA,KAAK,EAAC,YAAU;AAAC,aAAI,IAAItK,CAAC,GAACiB,SAAS,CAACF,MAAhB,EAAuBd,CAAC,GAAC,IAAIk0B,KAAJ,CAAUn0B,CAAV,CAAzB,EAAsCE,CAAC,GAAC,CAA5C,EAA8CA,CAAC,GAACF,CAAhD,EAAkDE,CAAC,EAAnD,EAAsDD,CAAC,CAACC,CAAD,CAAD,GAAKe,SAAS,CAACf,CAAD,CAAd;;AAAkB,eAAO,KAAK6xF,IAAL,CAAUV,CAAC,CAAChtB,IAAZ,EAAiBpkE,CAAjB,CAAP;AAA2B;AAAhI,KAAvQ,EAAyY;AAAC4C,MAAAA,GAAG,EAAC,OAAL;AAAayH,MAAAA,KAAK,EAAC,YAAU;AAAC,aAAI,IAAItK,CAAC,GAACiB,SAAS,CAACF,MAAhB,EAAuBd,CAAC,GAAC,IAAIk0B,KAAJ,CAAUn0B,CAAV,CAAzB,EAAsCE,CAAC,GAAC,CAA5C,EAA8CA,CAAC,GAACF,CAAhD,EAAkDE,CAAC,EAAnD,EAAsDD,CAAC,CAACC,CAAD,CAAD,GAAKe,SAAS,CAACf,CAAD,CAAd;;AAAkB,eAAO,KAAK6xF,IAAL,CAAUV,CAAC,CAAC/sB,KAAZ,EAAkBrkE,CAAlB,CAAP;AAA4B;AAAlI,KAAzY,EAA6gB;AAAC4C,MAAAA,GAAG,EAAC,YAAL;AAAkByH,MAAAA,KAAK,EAAC,UAAStK,CAAT,EAAW;AAAC,eAAOgyF,CAAC,CAACP,eAAF,MAAqBO,CAAC,CAACC,cAAF,CAAiBjyF,CAAjB,CAA5B;AAAgD;AAApF,KAA7gB,EAAmmB;AAAC6C,MAAAA,GAAG,EAAC,sBAAL;AAA4ByH,MAAAA,KAAK,EAAC,UAAStK,CAAT,EAAWC,CAAX,EAAa;AAAC,eAAO+xF,CAAC,CAACE,mBAAF,CAAsBlyF,CAAtB,EAAwBC,CAAxB,CAAP;AAAkC;AAAlF,KAAnmB,EAAurB;AAAC4C,MAAAA,GAAG,EAAC,MAAL;AAAYyH,MAAAA,KAAK,EAAC,UAAStK,CAAT,EAAWC,CAAX,EAAa;AAAC,YAAG,KAAKkyF,UAAL,CAAgBnyF,CAAhB,CAAH,EAAsB;AAAC,cAAIE,CAAC,GAAC,KAAKkyF,yBAAL,CAA+BnyF,CAA/B,CAAN;;AAAwC,iBAAO,KAAKoyF,oBAAL,CAA0BryF,CAA1B,EAA4BE,CAA5B,CAAP;AAAsC;AAAC;AAAtI,KAAvrB,EAA+zB;AAAC2C,MAAAA,GAAG,EAAC,2BAAL;AAAiCyH,MAAAA,KAAK,EAAC,UAAStK,CAAT,EAAW;AAAC,YAAIC,CAAC,GAAC,EAAN;AAAS,aAAKupB,MAAL,KAAcvpB,CAAC,IAAE,KAAKupB,MAAL,GAAY,GAA7B;;AAAkC,aAAI,IAAItpB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACF,CAAC,CAACe,MAAhB,EAAuBb,CAAC,EAAxB,EAA2B;AAAC,cAAIC,CAAC,GAACH,CAAC,CAACE,CAAD,CAAP;AAAWD,UAAAA,CAAC,IAAE,KAAKqyF,gBAAL,CAAsBnyF,CAAtB,IAAyB,GAA5B;AAAgC;;AAAA,eAAOF,CAAP;AAAS;AAA9K,KAA/zB,EAA++B;AAAC4C,MAAAA,GAAG,EAAC,kBAAL;AAAwByH,MAAAA,KAAK,EAAC,UAAStK,CAAT,EAAW;AAAC,YAAG;AAAC,cAAG,CAACA,CAAJ,EAAM,OAAM,EAAN;AAAS,cAAGk7C,CAAC,CAAC4d,QAAF,CAAW94D,CAAX,CAAH,EAAiB,OAAOA,CAAP;;AAAS,cAAGk7C,CAAC,CAAC6G,QAAF,CAAW/hD,CAAX,KAAek7C,CAAC,CAAC+G,UAAF,CAAajiD,CAAC,CAACsD,QAAf,CAAlB,EAA2C;AAAC,gBAAIrD,CAAC,GAACD,CAAC,CAACsD,QAAF,EAAN;AAAmB,gBAAG,sBAAoBrD,CAAvB,EAAyB,OAAOA,CAAP;AAAS;;AAAA,iBAAO4L,IAAI,CAACsgB,SAAL,CAAensB,CAAf,CAAP;AAAyB,SAAvK,CAAuK,OAAMC,CAAN,EAAQ;AAAC,iBAAOmiD,OAAO,CAAC19C,KAAR,CAAc,2CAAd,EAA0D1E,CAA1D,EAA4DC,CAA5D,GAA+D,EAAtE;AAAyE;AAAC;AAApS,KAA/+B,CAAH,CAAzO,EAAmgDA,CAA1gD;AAA4gD,GAAxmD,EAAlwC;AAAA,MAA62F+V,CAAC,GAAC,YAAU;AAAC,QAAIhW,CAAC,GAAC,IAAI8xF,CAAJ,EAAN;AAAY,WAAO9xF,CAAC,CAAC0nE,KAAF,GAAQtlB,OAAO,CAACslB,KAAhB,EAAsB1nE,CAAC,CAAC+kE,IAAF,GAAO3iB,OAAO,CAAC2iB,IAArC,EAA0C/kE,CAAC,CAACglE,IAAF,GAAO5iB,OAAO,CAAC4iB,IAAzD,EAA8DhlE,CAAC,CAAC0E,KAAF,GAAQ09C,OAAO,CAAC19C,KAA9E,EAAoF1E,CAA3F;AAA6F,GAAn+F;AAAA,MAAo+FgyF,CAAC,GAAC,IAAIV,CAAJ,EAAt+F;;AAA4+F,WAASiB,CAAT,CAAWvyF,CAAX,EAAaC,CAAb,EAAe;AAAC,SAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACD,CAAC,CAACc,MAAhB,EAAuBb,CAAC,EAAxB,EAA2B;AAAC,UAAIC,CAAC,GAACF,CAAC,CAACC,CAAD,CAAP;AAAWC,MAAAA,CAAC,CAAC4B,UAAF,GAAa5B,CAAC,CAAC4B,UAAF,IAAc,CAAC,CAA5B,EAA8B5B,CAAC,CAAC6B,YAAF,GAAe,CAAC,CAA9C,EAAgD,WAAU7B,CAAV,KAAcA,CAAC,CAAC+wC,QAAF,GAAW,CAAC,CAA1B,CAAhD,EAA6EzvC,MAAM,CAACC,cAAP,CAAsB1B,CAAtB,EAAwBG,CAAC,CAAC0C,GAA1B,EAA8B1C,CAA9B,CAA7E;AAA8G;AAAC;;AAAA,MAAIqyF,CAAC,GAAC,YAAU;AAAC,aAASxyF,CAAT,CAAWC,CAAX,EAAa;AAAC,UAAIC,CAAC,GAACe,SAAS,CAACF,MAAV,GAAiB,CAAjB,IAAoB,KAAK,CAAL,KAASE,SAAS,CAAC,CAAD,CAAtC,GAA0CA,SAAS,CAAC,CAAD,CAAnD,GAAuD2F,CAA7D;AAA+D,OAAC,UAAS5G,CAAT,EAAWC,CAAX,EAAa;AAAC,YAAG,EAAED,CAAC,YAAYC,CAAf,CAAH,EAAqB,MAAM,IAAIs5C,SAAJ,CAAc,mCAAd,CAAN;AAAyD,OAA5F,CAA6F,IAA7F,EAAkGv5C,CAAlG,CAAD,EAAsG,KAAKyyF,WAAL,GAAiB,CAAvH,EAAyH,KAAKC,QAAL,GAAczyF,CAAvI,EAAyI,KAAK0yF,qBAAL,GAA2B,CAAC,CAArK,EAAuK,KAAKC,YAAL,GAAkB1yF,CAAzL;AAA2L;;AAAA,QAAID,CAAJ,EAAMC,CAAN,EAAQC,CAAR;AAAU,WAAOF,CAAC,GAACD,CAAF,EAAI,CAACE,CAAC,GAAC,CAAC;AAAC2C,MAAAA,GAAG,EAAC,OAAL;AAAayH,MAAAA,KAAK,EAAC,YAAU;AAAC,YAAItK,CAAC,GAAC,IAAN;AAAW,aAAK2yF,qBAAL,KAA6B,KAAKA,qBAAL,GAA2B,CAAC,CAA5B,EAA8B3rE,UAAU,CAAC,YAAU;AAAChnB,UAAAA,CAAC,CAAC6yF,QAAF;AAAa,SAAzB,EAA0B,KAAKC,SAAL,EAA1B,CAArE;AAAkH;AAA3J,KAAD,EAA8J;AAACjwF,MAAAA,GAAG,EAAC,UAAL;AAAgByH,MAAAA,KAAK,EAAC,YAAU;AAAC,aAAKqoF,qBAAL,GAA2B,CAAC,CAA5B,EAA8B,KAAKD,QAAL,EAA9B,EAA8C,KAAKD,WAAL,EAA9C;AAAiE;AAAlG,KAA9J,EAAkQ;AAAC5vF,MAAAA,GAAG,EAAC,WAAL;AAAiByH,MAAAA,KAAK,EAAC,YAAU;AAAC,aAAKmoF,WAAL,GAAiB,CAAjB;AAAmB;AAArD,KAAlQ,EAAyT;AAAC5vF,MAAAA,GAAG,EAAC,WAAL;AAAiByH,MAAAA,KAAK,EAAC,YAAU;AAAC,YAAItK,CAAC,GAAC8F,IAAI,CAACkB,GAAL,CAAS,CAAT,EAAW,KAAKyrF,WAAhB,IAA6B,KAAKG,YAAxC;AAAqD,eAAO5yF,CAAC,IAAE,GAAH,GAAOA,CAAP,GAAS,GAAhB;AAAoB;AAA3G,KAAzT,CAAH,KAA4auyF,CAAC,CAACtyF,CAAC,CAACoD,SAAH,EAAanD,CAAb,CAAjb,EAAicC,CAAC,IAAEoyF,CAAC,CAACtyF,CAAD,EAAGE,CAAH,CAArc,EAA2cH,CAAld;AAAod,GAAjvB,EAAN;;AAA0vBE,EAAAA,CAAC,CAACiG,CAAF,CAAIlG,CAAJ,EAAM,GAAN,EAAU,YAAU;AAAC,WAAO8yF,CAAP;AAAS,GAA9B;;AAAgC,MAAIpsF,CAAC,GAAC,YAAU;AAAC,QAAI3G,CAAC,GAACgyF,CAAC,CAACgB,SAAF,CAAY,EAAZ,CAAN;AAAA,QAAsB/yF,CAAC,GAACi7C,CAAC,CAAC01C,eAAF,EAAxB;AAAA,QAA4C1wF,CAAC,GAAC;AAAC+yF,MAAAA,OAAO,EAAC,IAAT;AAAcC,MAAAA,SAAS,EAAC;AAAxB,KAA9C;AAAA,QAA4E/yF,CAAC,GAAC;AAACgzF,MAAAA,kBAAkB,EAAC,CAAC,CAArB;AAAuBC,MAAAA,mBAAmB,EAAC,CAAC,CAA5C;AAA8CC,MAAAA,sBAAsB,EAAC,GAArE;AAAyEC,MAAAA,wBAAwB,EAAC,IAAlG;AAAuGC,MAAAA,qBAAqB,EAAC,IAA7H;AAAkIC,MAAAA,6BAA6B,EAAC,IAAhK;AAAqKC,MAAAA,SAAS,EAAC;AAA/K,KAA9E;AAAA,QAAmQ1zF,CAAC,GAAC;AAAC2zF,MAAAA,0BAA0B,EAAC,CAA5B;AAA8BC,MAAAA,0BAA0B,EAAC,IAAzD;AAA8DC,MAAAA,0BAA0B,EAAC;AAAzF,KAArQ;AAAA,QAAoWxzF,CAAC,GAAC;AAACyzF,MAAAA,eAAe,EAAC,CAAC,CAAlB;AAAoBC,MAAAA,cAAc,EAAC;AAAnC,KAAtW;AAAA,QAA+YxzF,CAAC,GAAC;AAACyzF,MAAAA,WAAW,EAAC,IAAIC,GAAJ,EAAb;AAAqBC,MAAAA,qBAAqB,EAAC,IAA3C;AAAgDC,MAAAA,kBAAkB,EAAC,IAAIF,GAAJ,EAAnE;AAA2EG,MAAAA,mBAAmB,EAAC,IAAIH,GAAJ,EAA/F;AAAuG3E,MAAAA,KAAK,EAAC,IAAI+E,GAAJ,EAA7G;AAAqHC,MAAAA,UAAU,EAAC,IAAIL,GAAJ,EAAhI;AAAwIM,MAAAA,cAAc,EAAC,IAAIN,GAAJ,EAAvJ;AAA+JO,MAAAA,cAAc,EAAC,IAAIP,GAAJ,EAA9K;AAAsLQ,MAAAA,cAAc,EAAC,IAAIR,GAAJ,EAArM;AAA6MS,MAAAA,eAAe,EAAC,IAAIT,GAAJ;AAA7N,KAAjZ;AAAA,QAAunBptF,CAAC,GAAC;AAAC8tF,MAAAA,UAAU,EAAC,IAAZ;AAAiBC,MAAAA,aAAa,EAAC,IAA/B;AAAoCC,MAAAA,gBAAgB,EAAC,CAAC;AAAtD,KAAznB;AAAA,QAAkrBzuF,CAAC,GAAC;AAAC0uF,MAAAA,UAAU,EAAC,IAAIb,GAAJ,EAAZ;AAAoBc,MAAAA,OAAO,EAAC,IAAId,GAAJ,EAA5B;AAAoCe,MAAAA,mBAAmB,EAAC,IAAIf,GAAJ;AAAxD,KAAprB;AAAA,QAAqvB9tF,CAAC,GAAC;AAAC8uF,MAAAA,uBAAuB,EAAC,IAAzB;AAA8BC,MAAAA,gBAAgB,EAAC,CAAC,CAAhD;AAAkDC,MAAAA,qBAAqB,EAAC,IAAxE;AAA6EC,MAAAA,kCAAkC,EAAC,CAAhH;AAAkHC,MAAAA,4BAA4B,EAAC;AAA/I,KAAvvB;AAAA,QAAy4B5yC,CAAC,GAAC,IAAIgwC,CAAJ,CAAM,YAAU;AAAC6C,MAAAA,CAAC;AAAG,KAArB,CAA34B;AAAA,QAAk6B/6C,CAAC,GAAC,IAAI05C,GAAJ,CAAQ,CAACvzF,CAAD,EAAGD,CAAH,EAAKg5D,CAAL,CAAR,CAAp6B;AAAA,QAAq7Bw3B,CAAC,GAACv6B,WAAW,CAAC,YAAU;AAAC,UAAGx2D,CAAC,KAAGi7C,CAAC,CAAC01C,eAAF,EAAP,EAA2B;AAAC,YAAG,EAAE3wF,CAAC,GAACi7C,CAAC,CAAC01C,eAAF,EAAJ,CAAH,EAA4B,OAAO,KAAK0E,CAAC,CAACt1F,CAAC,CAAC+kE,IAAF,CAAO,iBAAP,CAAD,CAAb;AAAyC,YAAI7kE,CAAC,GAACmxF,CAAC,EAAP;AAAUpxF,QAAAA,CAAC,KAAG,CAACC,CAAD,IAAI4H,CAAC,CAAC5H,CAAD,EAAGq1F,SAAS,CAACC,OAAb,CAAL,IAA4B1tF,CAAC,CAAC5H,CAAD,EAAGq1F,SAAS,CAACE,MAAb,CAAhC,CAAD,KAAyDH,CAAC,CAACt1F,CAAC,CAAC+kE,IAAF,CAAO,gDAAP,CAAD,CAAD,EAA4DswB,CAAC,EAAtH;AAA0H;AAAC,KAAlP,EAAmP,GAAnP,CAAl8B;AAAA,QAA0rCttF,CAAC,GAAC,UAAS9H,CAAT,EAAWC,CAAX,EAAa;AAACD,MAAAA,CAAC,CAACivB,OAAF,CAAU,UAASjvB,CAAT,EAAW;AAAC,YAAG;AAACA,UAAAA,CAAC,CAACC,CAAD,CAAD;AAAK,SAAT,CAAS,OAAMD,CAAN,EAAQ;AAACq1F,UAAAA,CAAC,CAACt1F,CAAC,CAAC0E,KAAF,CAAQ,0BAAR,EAAmCzE,CAAnC,CAAD,CAAD;AAAyC;AAAC,OAAlF;AAAoF,KAA9xC;AAAA,QAA+xCirC,CAAC,GAAC,UAASlrC,CAAT,EAAW;AAAC,UAAG,SAAOA,CAAV,EAAY,OAAM,MAAN;;AAAa,cAAOA,CAAC,CAAC8qB,UAAT;AAAqB,aAAKyqE,SAAS,CAACzZ,UAAf;AAA0B,iBAAM,YAAN;;AAAmB,aAAKyZ,SAAS,CAACG,IAAf;AAAoB,iBAAM,MAAN;;AAAa,aAAKH,SAAS,CAACC,OAAf;AAAuB,iBAAM,SAAN;;AAAgB,aAAKD,SAAS,CAACE,MAAf;AAAsB,iBAAM,QAAN;;AAAe;AAAQ,iBAAM,WAAN;AAAvL;AAA0M,KAAhhD;AAAA,QAAihDl9D,CAAC,GAAC,YAAU;AAAC,UAAIt4B,CAAC,GAACgB,SAAS,CAACF,MAAV,GAAiB,CAAjB,IAAoB,KAAK,CAAL,KAASE,SAAS,CAAC,CAAD,CAAtC,GAA0CA,SAAS,CAAC,CAAD,CAAnD,GAAuD,EAA7D;AAAgEq0F,MAAAA,CAAC,CAACt1F,CAAC,CAAC0nE,KAAF,CAAQ,MAAIznE,CAAJ,GAAM,uBAAN,GAA8BirC,CAAC,CAAChrC,CAAC,CAAC+yF,OAAH,CAA/B,GAA2C,0BAA3C,GAAsE/nD,CAAC,CAAChrC,CAAC,CAACgzF,SAAH,CAA/E,CAAD,CAAD;AAAiG,KAA/rD;AAAA,QAAgsDprF,CAAC,GAAC,UAAS9H,CAAT,EAAWC,CAAX,EAAa;AAAC,aAAOD,CAAC,IAAEA,CAAC,CAAC8qB,UAAF,KAAe7qB,CAAzB;AAA2B,KAA3uD;AAAA,QAA4uDkxF,CAAC,GAAC,UAASnxF,CAAT,EAAW;AAAC,aAAO8H,CAAC,CAAC9H,CAAD,EAAGu1F,SAAS,CAACG,IAAb,CAAR;AAA2B,KAArxD;AAAA,QAAsxDtE,CAAC,GAAC,UAASpxF,CAAT,EAAW;AAAC,aAAO,SAAOA,CAAP,IAAU,KAAK,CAAL,KAASA,CAAC,CAAC8qB,UAArB,IAAiChjB,CAAC,CAAC9H,CAAD,EAAGu1F,SAAS,CAACE,MAAb,CAAzC;AAA8D,KAAl2D;AAAA,QAAm2DpE,CAAC,GAAC,YAAU;AAAC,aAAO,SAAOnxF,CAAC,CAACgzF,SAAT,GAAmBhzF,CAAC,CAACgzF,SAArB,GAA+BhzF,CAAC,CAAC+yF,OAAxC;AAAgD,KAAh6D;AAAA,QAAi6D3B,CAAC,GAAC,YAAU;AAAC,aAAOH,CAAC,CAACE,CAAC,EAAF,CAAR;AAAc,KAA57D;AAAA,QAA67DS,CAAC,GAAC,YAAU;AAAC,UAAG1xF,CAAC,CAACyzF,eAAL,EAAqB,OAAOyB,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,iCAAP,CAAD,CAAD,EAA6CtO,aAAa,CAACt2D,CAAC,CAAC0zF,cAAH,CAA1D,EAA6E1zF,CAAC,CAACyzF,eAAF,GAAkB,CAAC,CAAhG,EAAkG,KAAKwB,CAAC,EAA/G;AAAkH/D,MAAAA,CAAC,MAAIgE,CAAC,CAACt1F,CAAC,CAAC0nE,KAAF,CAAQ,mBAAR,CAAD,CAAD,EAAgC2pB,CAAC,GAAG33E,IAAJ,CAASi8E,CAAC,CAACn8B,CAAD,CAAV,CAAhC,EAA+Cp5D,CAAC,CAACyzF,eAAF,GAAkB,CAAC,CAAtE,KAA0EyB,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,sDAAP,CAAD,CAAD,EAAkEzsC,CAAC,CAAC,eAAD,CAAnE,EAAqF88D,CAAC,EAAhK,CAAD;AAAqK,KAAtvE;AAAA,QAAuvExD,CAAC,GAAC,YAAU;AAAC1xF,MAAAA,CAAC,CAACkzF,sBAAF,GAAyB,GAAzB,EAA6BjzF,CAAC,CAACyzF,eAAF,GAAkB,CAAC,CAAhD,EAAkD1zF,CAAC,CAACgzF,kBAAF,GAAqB,CAAC,CAAxE,EAA0E5hC,YAAY,CAACpxD,CAAC,CAACozF,qBAAH,CAAtF,EAAgH78B,aAAa,CAACt2D,CAAC,CAAC0zF,cAAH,CAA7H,EAAgJviC,YAAY,CAACpxD,CAAC,CAACmzF,wBAAH,CAA5J,EAAyL/hC,YAAY,CAACpxD,CAAC,CAACqzF,6BAAH,CAArM;AAAuO,KAA3+E;AAAA,QAA4+Ex9E,CAAC,GAAC,YAAU;AAAC9P,MAAAA,CAAC,CAACivF,kCAAF,GAAqC,CAArC,EAAuCjvF,CAAC,CAACkvF,4BAAF,GAA+B,CAAtE,EAAwE1+B,aAAa,CAACxwD,CAAC,CAAC8uF,uBAAH,CAArF,EAAiHt+B,aAAa,CAACxwD,CAAC,CAACgvF,qBAAH,CAA9H;AAAwJ,KAAjpF;AAAA,QAAkpF3C,CAAC,GAAC,YAAU;AAACxyF,MAAAA,CAAC,CAAC2zF,0BAAF,GAA6B,CAA7B,EAA+B3zF,CAAC,CAAC4zF,0BAAF,GAA6B,IAA5D,EAAiE5zF,CAAC,CAAC6zF,0BAAF,GAA6B,IAA9F;AAAmG,KAAlwF;AAAA,QAAmwFjtF,CAAC,GAAC,YAAU;AAAC,UAAG;AAAC2uF,QAAAA,CAAC,CAACt1F,CAAC,CAAC+kE,IAAF,CAAO,mCAAP,CAAD,CAAD,EAA+CxsC,CAAC,CAAC,iBAAD,CAAhD,EAAoE,SAAOp4B,CAAC,CAACszF,SAAT,IAAoBtzF,CAAC,CAACszF,SAAF,KAAc7yF,CAAlC,IAAqCmH,CAAC,CAACzH,CAAC,CAACg0F,cAAH,CAA1G,EAA6Hn0F,CAAC,CAACszF,SAAF,GAAYpzF,CAAzI;AAA2I,YAAIJ,CAAC,GAACkR,IAAI,CAACuoB,GAAL,EAAN;AAAiB3xB,QAAAA,CAAC,CAACzH,CAAC,CAACk0F,cAAH,EAAkB;AAACd,UAAAA,0BAA0B,EAAC3zF,CAAC,CAAC2zF,0BAA9B;AAAyDC,UAAAA,0BAA0B,EAAC5zF,CAAC,CAAC4zF,0BAAtF;AAAiHC,UAAAA,0BAA0B,EAAC7zF,CAAC,CAAC6zF,0BAA9I;AAAyKgC,UAAAA,yBAAyB,EAAC31F,CAAnM;AAAqM41F,UAAAA,aAAa,EAAC51F,CAAC,GAACF,CAAC,CAAC4zF,0BAAvN;AAAkPmC,UAAAA,qBAAqB,EAAC/1F,CAAC,CAAC6zF,0BAAF,GAA6B3zF,CAAC,GAACF,CAAC,CAAC6zF,0BAAjC,GAA4D;AAApU,SAAlB,CAAD,EAA8VrB,CAAC,EAA/V,EAAkWV,CAAC,EAAnW,EAAsWR,CAAC,GAAG0E,aAAJ,GAAkB5kF,IAAI,CAACuoB,GAAL,EAAxX,EAAmY,MAAIvzB,CAAC,CAAC0uF,UAAF,CAAalmD,IAAjB,IAAuBwiD,CAAC,CAACjxF,CAAC,CAACgzF,SAAH,CAAxB,IAAuC8C,CAAC,CAAC91F,CAAC,CAAC+yF,OAAH,EAAW,uCAAX,CAA3a,EAA+d,CAAC9sF,CAAC,CAAC0uF,UAAF,CAAalmD,IAAb,GAAkB,CAAlB,IAAqBxoC,CAAC,CAAC2uF,OAAF,CAAUnmD,IAAV,GAAe,CAArC,MAA0CwiD,CAAC,CAACjxF,CAAC,CAACgzF,SAAH,CAAD,IAAgBoC,CAAC,CAACt1F,CAAC,CAAC+kE,IAAF,CAAO,gEAAP,CAAD,CAAjB,EAA4F5+D,CAAC,CAAC0uF,UAAF,CAAa3lE,OAAb,CAAqB,UAASlvB,CAAT,EAAW;AAACmG,UAAAA,CAAC,CAAC4uF,mBAAF,CAAsBr0E,GAAtB,CAA0B1gB,CAA1B,GAA6BmG,CAAC,CAAC2uF,OAAF,CAAUp0E,GAAV,CAAc1gB,CAAd,CAA7B;AAA8C,SAA/E,CAA5F,EAA6KmG,CAAC,CAAC0uF,UAAF,CAAajpF,KAAb,EAA7K,EAAkMqqF,CAAC,EAA7O,CAA/d,EAAgtBnE,CAAC,EAAjtB,EAAotB1xF,CAAC,CAAC0zF,cAAF,GAAiBr9B,WAAW,CAACq7B,CAAD,EAAG,GAAH,CAAhvB;AAAwvB,YAAIrxF,CAAC,GAAC,MAAImG,CAAC,CAAC8tF,UAAF,CAAawB,kBAAb,CAAgCC,0BAA1C;AAAqEb,QAAAA,CAAC,CAACt1F,CAAC,CAAC0nE,KAAF,CAAQ,4DAA0DjnE,CAA1D,GAA4D,KAApE,CAAD,CAAD,EAA8EN,CAAC,CAACozF,qBAAF,GAAwBvsE,UAAU,CAAC,YAAU;AAACsuE,UAAAA,CAAC,CAACt1F,CAAC,CAAC0nE,KAAF,CAAQ,mDAAR,CAAD,CAAD,EAAgE2tB,CAAC,EAAjE;AAAoE,SAAhF,EAAiF50F,CAAjF,CAAhH;AAAoM,OAAjqC,CAAiqC,OAAMR,CAAN,EAAQ;AAACq1F,QAAAA,CAAC,CAACt1F,CAAC,CAAC0E,KAAF,CAAQ,+CAAR,EAAwDzE,CAAxD,CAAD,CAAD;AAA8D;AAAC,KAAz/H;AAAA,QAA0/H8yF,CAAC,GAAC,UAAS9yF,CAAT,EAAW;AAACs4B,MAAAA,CAAC,CAAC,kBAAD,CAAD,EAAsB+8D,CAAC,CAACt1F,CAAC,CAAC0E,KAAF,CAAQ,uCAAR,EAAgDmH,IAAI,CAACsgB,SAAL,CAAelsB,CAAf,CAAhD,CAAD,CAAvB,EAA4Fo1F,CAAC,EAA7F;AAAgG,KAAxmI;AAAA,QAAymIj5C,CAAC,GAAC,UAASn8C,CAAT,EAAW;AAAC,UAAIE,CAAC,GAAC0L,IAAI,CAACC,KAAL,CAAW7L,CAAC,CAACuD,IAAb,CAAN;;AAAyB,cAAOrD,CAAC,CAACkvF,KAAT;AAAgB,aAAK5uF,CAAL;AAAO,cAAG60F,CAAC,CAACt1F,CAAC,CAAC0nE,KAAF,CAAQ,qDAAR,EAA8DznE,CAAC,CAACuD,IAAhE,CAAD,CAAD,EAAyE0C,CAAC,CAAC+uF,gBAAF,GAAmB,CAAC,CAA7F,EAA+F/uF,CAAC,CAACkvF,4BAAF,GAA+B,CAA9H,EAAgI,cAAYj1F,CAAC,CAACqwF,OAAF,CAAUloE,MAAzJ,EAAgKpiB,CAAC,CAACivF,kCAAF,GAAqC,CAArC,EAAuCh1F,CAAC,CAACqwF,OAAF,CAAUC,MAAV,CAAiBvhE,OAAjB,CAAyB,UAASlvB,CAAT,EAAW;AAACmG,YAAAA,CAAC,CAAC4uF,mBAAF,CAAsBqB,MAAtB,CAA6Bp2F,CAA7B,GAAgCmG,CAAC,CAAC2uF,OAAF,CAAUsB,MAAV,CAAiBp2F,CAAjB,CAAhC,EAAoDmG,CAAC,CAAC0uF,UAAF,CAAan0E,GAAb,CAAiB1gB,CAAjB,CAApD;AAAwE,WAA7G,CAAvC,EAAsJ,MAAImG,CAAC,CAAC4uF,mBAAF,CAAsBpmD,IAA1B,GAA+BwiD,CAAC,CAACjxF,CAAC,CAACgzF,SAAH,CAAD,KAAiBoC,CAAC,CAACt1F,CAAC,CAAC+kE,IAAF,CAAO,gFAAP,CAAD,CAAD,EAA4FixB,CAAC,CAAC91F,CAAC,CAAC+yF,OAAH,EAAW,uCAAX,CAA9G,CAA/B,GAAkMgD,CAAC,EAAzV,EAA4VluF,CAAC,CAACzH,CAAC,CAAC4zF,kBAAH,EAAsB/zF,CAAtB,CAA7V,CAAhK,KAA0hB;AAAC,gBAAGu2D,aAAa,CAACxwD,CAAC,CAACgvF,qBAAH,CAAb,EAAuC,EAAEhvF,CAAC,CAACivF,kCAA3C,EAA8E,MAAIjvF,CAAC,CAACivF,kCAAvF,EAA0H,OAAOptF,CAAC,CAACzH,CAAC,CAAC6zF,mBAAH,EAAuBh0F,CAAvB,CAAD,EAA2B,MAAK+F,CAAC,CAACivF,kCAAF,GAAqC,CAA1C,CAAlC;AAA+EjvF,YAAAA,CAAC,CAACgvF,qBAAF,GAAwBz+B,WAAW,CAAC,YAAU;AAACw/B,cAAAA,CAAC;AAAG,aAAhB,EAAiB,GAAjB,CAAnC;AAAyD;AAAA;;AAAM,aAAKz8B,CAAL;AAAO87B,UAAAA,CAAC,CAACt1F,CAAC,CAAC0nE,KAAF,CAAQ,6BAAR,CAAD,CAAD,EAA0CtnE,CAAC,CAACyzF,eAAF,GAAkB,CAAC,CAA7D;AAA+D;;AAAM;AAAQ,cAAG1zF,CAAC,CAACkvF,KAAL,EAAW;AAAC,gBAAGiG,CAAC,CAACt1F,CAAC,CAAC0nE,KAAF,CAAQ,gCAA8BvnE,CAAC,CAACkvF,KAAxC,CAAD,CAAD,EAAkD8B,CAAC,CAACjxF,CAAC,CAAC+yF,OAAH,CAAD,IAAc9B,CAAC,CAACjxF,CAAC,CAACgzF,SAAH,CAAf,IAA8B,MAAI/sF,CAAC,CAAC4uF,mBAAF,CAAsBpmD,IAAxD,IAA8D,SAAOzuC,CAAC,CAAC+yF,OAA5H,EAAoI,OAAO,KAAKqC,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,gCAA8B7kE,CAAC,CAACkvF,KAAhC,GAAsC,uBAA7C,CAAD,CAAb;AAAqF,gBAAG,MAAI/uF,CAAC,CAAC+zF,UAAF,CAAa1lD,IAAjB,IAAuB,MAAIruC,CAAC,CAAC+uF,KAAF,CAAQ1gD,IAAtC,EAA2C,OAAO,KAAK2mD,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,2CAAP,EAAmD7kE,CAAC,CAACkvF,KAArD,CAAD,CAAb;AAA2EtnF,YAAAA,CAAC,CAACzH,CAAC,CAAC+zF,UAAH,EAAcl0F,CAAd,CAAD,EAAkBG,CAAC,CAAC+uF,KAAF,CAAQgH,GAAR,CAAYl2F,CAAC,CAACkvF,KAAd,KAAsBtnF,CAAC,CAACzH,CAAC,CAAC+uF,KAAF,CAAQ1tF,GAAR,CAAYxB,CAAC,CAACkvF,KAAd,CAAD,EAAsBlvF,CAAtB,CAAzC;AAAkE,WAA7Z,MAAkaA,CAAC,CAAC4K,OAAF,GAAUuqF,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,gCAAP,EAAwC7kE,CAAxC,CAAD,CAAX,GAAwDm1F,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,0BAAP,EAAkC7kE,CAAlC,CAAD,CAAzD;;AAAhzC;AAAi5C,KAAjiL;AAAA,QAAkiL81F,CAAC,GAAC,SAASh2F,CAAT,GAAY;AAAC,UAAGiG,CAAC,CAACkvF,4BAAF,GAA+B,CAAlC,EAAoC,OAAOE,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,mGAAP,CAAD,CAAD,EAA+G,KAAKj9D,CAAC,CAACzH,CAAC,CAAC6zF,mBAAH,EAAuBj5C,CAAC,CAACq1C,uBAAF,CAA0B9vF,CAA1B,EAA4B,CAAC,CAA7B,EAA+B0zB,KAAK,CAACua,IAAN,CAAWvoC,CAAC,CAAC2uF,OAAb,CAA/B,CAAvB,CAA5H;AAA0MxD,MAAAA,CAAC,MAAI56B,aAAa,CAACxwD,CAAC,CAAC8uF,uBAAH,CAAb,EAAyC3D,CAAC,GAAG33E,IAAJ,CAASi8E,CAAC,CAACl1F,CAAD,EAAG;AAACgwF,QAAAA,MAAM,EAACt8D,KAAK,CAACua,IAAN,CAAWvoC,CAAC,CAAC2uF,OAAb;AAAR,OAAH,CAAV,CAAzC,EAAuF5uF,CAAC,CAAC+uF,gBAAF,GAAmB,CAAC,CAA3G,EAA6G/uF,CAAC,CAAC8uF,uBAAF,GAA0Bv+B,WAAW,CAAC,YAAU;AAACvwD,QAAAA,CAAC,CAAC+uF,gBAAF,KAAqB,EAAE/uF,CAAC,CAACkvF,4BAAJ,EAAiCn1F,CAAC,EAAvD;AAA2D,OAAvE,EAAwE,GAAxE,CAAtJ,IAAoOq1F,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,0EAAP,CAAD,CAAtO;AAA2T,KAA1lM;AAAA,QAA2lMgxB,CAAC,GAAC,UAAS/1F,CAAT,EAAWC,CAAX,EAAa;AAAC4H,MAAAA,CAAC,CAAC7H,CAAD,EAAGs1F,SAAS,CAACzZ,UAAb,CAAD,IAA2Bh0E,CAAC,CAAC7H,CAAD,EAAGs1F,SAAS,CAACG,IAAb,CAA5B,GAA+Cz1F,CAAC,CAAC02D,KAAF,CAAQ,GAAR,EAAYz2D,CAAZ,CAA/C,GAA8Do1F,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,wDAAsD95B,CAAC,CAACjrC,CAAD,CAA9D,CAAD,CAA/D;AAAoI,KAA/uM;AAAA,QAAgvMq2F,CAAC,GAAC,UAASt2F,CAAT,EAAW;AAACg2F,MAAAA,CAAC,CAAC91F,CAAC,CAAC+yF,OAAH,EAAW,yBAAuBjzF,CAAlC,CAAD,EAAsCg2F,CAAC,CAAC91F,CAAC,CAACgzF,SAAH,EAAa,2BAAyBlzF,CAAtC,CAAvC;AAAgF,KAA90M;AAAA,QAA+0Mu2F,CAAC,GAAC,YAAU;AAACx2F,MAAAA,CAAC,CAAC2zF,0BAAF;AAA+B,UAAIzzF,CAAC,GAACi7C,CAAC,CAACy1C,SAAF,CAAYxwF,CAAC,CAACkzF,sBAAd,EAAqC,EAArC,CAAN;AAA+CliF,MAAAA,IAAI,CAACuoB,GAAL,KAAWz5B,CAAX,IAAc2G,CAAC,CAAC8tF,UAAF,CAAa8B,gBAA3B,IAA6ClB,CAAC,CAACt1F,CAAC,CAAC0nE,KAAF,CAAQ,wDAAsDznE,CAAtD,GAAwD,KAAhE,CAAD,CAAD,EAA0EE,CAAC,CAACmzF,wBAAF,GAA2BtsE,UAAU,CAAC,YAAU;AAAC,eAAOtgB,CAAC,EAAR;AAAW,OAAvB,EAAwBzG,CAAxB,CAA/G,EAA0IE,CAAC,CAACkzF,sBAAF,IAA0B,CAAjN,KAAqNiC,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,sDAAP,CAAD,CAAD,EAAkEqwB,CAAC,EAAxR;AAA4R,KAAtsN;AAAA,QAAusNoB,CAAC,GAAC,UAASx2F,CAAT,EAAW;AAAC4xF,MAAAA,CAAC,IAAG77E,CAAC,EAAJ,EAAOs/E,CAAC,CAACt1F,CAAC,CAAC0E,KAAF,CAAQ,iCAAR,CAAD,CAAR,EAAqDvE,CAAC,CAACizF,mBAAF,GAAsB,CAAC,CAA5E,EAA8EkD,CAAC,CAAC,+BAAD,CAA/E,EAAiH5/B,aAAa,CAACs6B,CAAD,CAA9H,EAAkIjpF,CAAC,CAACzH,CAAC,CAACyzF,WAAH,EAAe;AAACL,QAAAA,0BAA0B,EAAC3zF,CAAC,CAAC2zF,0BAA9B;AAAyDC,QAAAA,0BAA0B,EAAC5zF,CAAC,CAAC4zF,0BAAtF;AAAiH+C,QAAAA,MAAM,EAACz2F;AAAxH,OAAf,CAAnI,EAA8QsyF,CAAC,EAAhR;AAAmR,KAAx+N;AAAA,QAAy+NoD,CAAC,GAAC,UAAS31F,CAAT,EAAWC,CAAX,EAAa;AAAC,aAAO4L,IAAI,CAACsgB,SAAL,CAAe;AAACkjE,QAAAA,KAAK,EAACrvF,CAAP;AAASwwF,QAAAA,OAAO,EAACvwF;AAAjB,OAAf,CAAP;AAA2C,KAApiO;AAAA,QAAqiO02F,CAAC,GAAC,UAAS12F,CAAT,EAAW;AAAC,aAAM,CAAC,EAAEi7C,CAAC,CAAC6G,QAAF,CAAW9hD,CAAX,KAAei7C,CAAC,CAAC6G,QAAF,CAAW9hD,CAAC,CAACi2F,kBAAb,CAAf,IAAiDh7C,CAAC,CAACk1C,gBAAF,CAAmBnwF,CAAC,CAACi2F,kBAAF,CAAqB/sF,GAAxC,CAAjD,IAA+F+xC,CAAC,CAACo1C,UAAF,CAAarwF,CAAC,CAACi2F,kBAAF,CAAqB/sF,GAAlC,CAA/F,IAAuI,MAAIlJ,CAAC,CAACi2F,kBAAF,CAAqBC,0BAAzB,IAAqD,GAA9L,CAAD,KAAsMb,CAAC,CAACt1F,CAAC,CAAC0E,KAAF,CAAQ,4CAAR,EAAqDzE,CAArD,CAAD,CAAD,EAA2D,CAAC,CAAlQ,CAAN;AAA2Q,KAA9zO;AAAA,QAA+zOo1F,CAAC,GAAC,YAAU;AAAC,UAAGn6C,CAAC,CAAC01C,eAAF,EAAH;AAAuB,YAAGzwF,CAAC,CAACizF,mBAAL,EAAyBkC,CAAC,CAACt1F,CAAC,CAAC0nE,KAAF,CAAQ,yEAAR,CAAD,CAAD,CAAzB,KAAmH;AAAC,cAAG9gE,CAAC,CAACguF,gBAAL,EAAsB,OAAO/C,CAAC,IAAGyD,CAAC,CAACt1F,CAAC,CAAC+kE,IAAF,CAAO,iDAAP,CAAD,CAAJ,EAAgEhlE,CAAC,CAAC4zF,0BAAF,GAA6B5zF,CAAC,CAAC4zF,0BAAF,IAA8BxiF,IAAI,CAACuoB,GAAL,EAA3H,EAAsI9yB,CAAC,CAACguF,gBAAF,GAAmB,CAAC,CAA1J,EAA4JhuF,CAAC,CAAC+tF,aAAF,GAAgBr0F,CAAC,CAAC2zF,qBAAF,EAA5K,EAAsMrtF,CAAC,CAAC+tF,aAAF,CAAgBjnB,IAAhB,CAAqB,UAASztE,CAAT,EAAW;AAAC,mBAAO2G,CAAC,CAACguF,gBAAF,GAAmB,CAAC,CAApB,EAAsBU,CAAC,CAACt1F,CAAC,CAAC0nE,KAAF,CAAQ,yDAAR,EAAkEznE,CAAlE,CAAD,CAAvB,EAA8F02F,CAAC,CAAC12F,CAAD,CAAD,IAAM2G,CAAC,CAAC8tF,UAAF,GAAaz0F,CAAb,EAAe2G,CAAC,CAAC8tF,UAAF,CAAa8B,gBAAb,GAA8BrlF,IAAI,CAACuoB,GAAL,KAAW,IAAxD,EAA6D8oB,CAAC,CAACo0C,SAAF,EAA7D,EAA2ElwF,CAAC,EAAlF,KAAuF+vF,CAAC,CAAC,iDAA+Cx2F,CAAhD,CAAD,EAAoD;AAAC42F,cAAAA,yBAAyB,EAAC,CAAC;AAA5B,aAA3I,CAArG;AAAgR,WAAjT,EAAkT,UAAS52F,CAAT,EAAW;AAAC,mBAAO2G,CAAC,CAACguF,gBAAF,GAAmB,CAAC,CAApB,EAAsBU,CAAC,CAACt1F,CAAC,CAAC0E,KAAF,CAAQ,oDAAR,EAA6DzE,CAA7D,CAAD,CAAvB,EAAyFi7C,CAAC,CAAC41C,gBAAF,CAAmB7wF,CAAnB,MAAwBq1F,CAAC,CAACt1F,CAAC,CAAC+kE,IAAF,CAAO,0DAAP,CAAD,CAAD,EAAsEviB,CAAC,CAACs0C,KAAF,EAA9F,CAAzF,EAAkM;AAACD,cAAAA,yBAAyB,EAAC,CAAC;AAA5B,aAAzM;AAAwO,WAAtiB,CAA9M;AAAsvBvB,UAAAA,CAAC,CAACt1F,CAAC,CAAC0nE,KAAF,CAAQ,kFAAR,CAAD,CAAD;AAA+F;AAAt/B,aAA2/B4tB,CAAC,CAACt1F,CAAC,CAAC+kE,IAAF,CAAO,+DAAP,CAAD,CAAD;AAA2E,KAAl5Q;AAAA,QAAm5Qr+D,CAAC,GAAC,YAAU;AAAC,UAAGvG,CAAC,CAACizF,mBAAL,EAAyB,OAAOkC,CAAC,CAACt1F,CAAC,CAAC+kE,IAAF,CAAO,sDAAP,CAAD,CAAD,EAAkE;AAAC8xB,QAAAA,yBAAyB,EAAC,CAAC;AAA5B,OAAzE;AAAwG,UAAG,CAAC37C,CAAC,CAAC01C,eAAF,EAAJ,EAAwB,OAAO0E,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,4CAAP,CAAD,CAAD,EAAwD;AAAC6xB,QAAAA,yBAAyB,EAAC,CAAC;AAA5B,OAA/D;AAA8FvB,MAAAA,CAAC,CAACt1F,CAAC,CAAC+kE,IAAF,CAAO,gCAAP,CAAD,CAAD,EAA4CxsC,CAAC,CAAC,eAAD,CAA7C;;AAA+D,UAAG;AAAC,YAAGo+D,CAAC,CAAC/vF,CAAC,CAAC8tF,UAAH,CAAJ,EAAmB;AAAC,cAAIz0F,CAAC,GAAC,IAAN;AAAW,iBAAOkxF,CAAC,CAACjxF,CAAC,CAAC+yF,OAAH,CAAD,IAAcqC,CAAC,CAACt1F,CAAC,CAAC0nE,KAAF,CAAQ,2CAAR,CAAD,CAAD,EAAwD5/D,CAAC,CAAC5H,CAAC,CAACgzF,SAAH,EAAaqC,SAAS,CAACzZ,UAAvB,CAAD,KAAsCwZ,CAAC,CAACt1F,CAAC,CAAC0nE,KAAF,CAAQ,gDAAR,CAAD,CAAD,EAA6DxnE,CAAC,CAACgzF,SAAF,GAAY6D,CAAC,EAAhH,CAAxD,EAA4K92F,CAAC,GAACC,CAAC,CAACgzF,SAA9L,KAA0MprF,CAAC,CAAC5H,CAAC,CAAC+yF,OAAH,EAAWsC,SAAS,CAACzZ,UAArB,CAAD,KAAoCwZ,CAAC,CAACt1F,CAAC,CAAC0nE,KAAF,CAAQ,8CAAR,CAAD,CAAD,EAA2DxnE,CAAC,CAAC+yF,OAAF,GAAU8D,CAAC,EAA1G,GAA8G92F,CAAC,GAACC,CAAC,CAAC+yF,OAA5T,GAAqU9yF,CAAC,CAACqzF,6BAAF,GAAgCxsE,UAAU,CAAC,YAAU;AAACmqE,YAAAA,CAAC,CAAClxF,CAAD,CAAD,IAAMs2F,CAAC,EAAP;AAAU,WAAtB,EAAuB,GAAvB,CAA/W,EAA2Y;AAACM,YAAAA,yBAAyB,EAAC,CAAC;AAA5B,WAAlZ;AAAib;AAAC,OAArd,CAAqd,OAAM52F,CAAN,EAAQ;AAAC,eAAOq1F,CAAC,CAACt1F,CAAC,CAAC0E,KAAF,CAAQ,uCAAR,EAAgDzE,CAAhD,CAAD,CAAD,EAAsDw2F,CAAC,CAAC,yCAAuCx2F,CAAC,CAAC8K,OAA1C,CAAvD,EAA0G;AAAC8rF,UAAAA,yBAAyB,EAAC,CAAC;AAA5B,SAAjH;AAAgJ;AAAC,KAAr0S;AAAA,QAAs0SE,CAAC,GAAC,YAAU;AAAC,UAAI92F,CAAC,GAAC,IAAIs1F,SAAJ,CAAc3uF,CAAC,CAAC8tF,UAAF,CAAawB,kBAAb,CAAgC/sF,GAA9C,CAAN;AAAyD,aAAOlJ,CAAC,CAAC4qB,gBAAF,CAAmB,MAAnB,EAA0BlkB,CAA1B,GAA6B1G,CAAC,CAAC4qB,gBAAF,CAAmB,SAAnB,EAA6BuxB,CAA7B,CAA7B,EAA6Dn8C,CAAC,CAAC4qB,gBAAF,CAAmB,OAAnB,EAA2BkoE,CAA3B,CAA7D,EAA2F9yF,CAAC,CAAC4qB,gBAAF,CAAmB,OAAnB,EAA2B,UAASzqB,CAAT,EAAW;AAAC,eAAO,UAASH,CAAT,EAAWG,CAAX,EAAa;AAACk1F,UAAAA,CAAC,CAACt1F,CAAC,CAAC+kE,IAAF,CAAO,6BAAP,EAAqC9kE,CAArC,CAAD,CAAD,EAA2Cs4B,CAAC,CAAC,iCAAD,CAA5C,EAAgFxwB,CAAC,CAACzH,CAAC,CAACm0F,eAAH,EAAmB;AAACsB,YAAAA,aAAa,EAAC31F,CAAC,CAAC21F,aAAjB;AAA+BiB,YAAAA,cAAc,EAAC7lF,IAAI,CAACuoB,GAAL,EAA9C;AAAyDu9D,YAAAA,kBAAkB,EAAC9lF,IAAI,CAACuoB,GAAL,KAAWt5B,CAAC,CAAC21F,aAAzF;AAAuGp1F,YAAAA,IAAI,EAACV,CAAC,CAACU,IAA9G;AAAmH+1F,YAAAA,MAAM,EAACz2F,CAAC,CAACy2F;AAA5H,WAAnB,CAAjF,EAAyOtF,CAAC,CAAClxF,CAAC,CAAC+yF,OAAH,CAAD,KAAe/yF,CAAC,CAAC+yF,OAAF,GAAU,IAAzB,CAAzO,EAAwQ7B,CAAC,CAAClxF,CAAC,CAACgzF,SAAH,CAAD,KAAiBhzF,CAAC,CAACgzF,SAAF,GAAY,IAA7B,CAAxQ,EAA2S/yF,CAAC,CAACgzF,kBAAF,KAAuBhC,CAAC,CAACjxF,CAAC,CAAC+yF,OAAH,CAAD,IAAc9B,CAAC,CAACjxF,CAAC,CAACgzF,SAAH,CAAf,GAA6B9B,CAAC,CAAClxF,CAAC,CAAC+yF,OAAH,CAAD,IAAc9B,CAAC,CAACjxF,CAAC,CAACgzF,SAAH,CAAf,KAA+BoC,CAAC,CAACt1F,CAAC,CAAC+kE,IAAF,CAAO,oCAAP,CAAD,CAAD,EAAgD7kE,CAAC,CAAC+yF,OAAF,GAAU/yF,CAAC,CAACgzF,SAA5D,EAAsEhzF,CAAC,CAACgzF,SAAF,GAAY,IAAjH,CAA7B,IAAqJoC,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,oHAAP,CAAD,CAAD,EAAgI7kE,CAAC,CAACszF,SAAF,KAAc7yF,CAAd,GAAgB00F,CAAC,CAACt1F,CAAC,CAAC+kE,IAAF,CAAO,6CAAP,CAAD,CAAjB,IAA0Eh9D,CAAC,CAACzH,CAAC,CAACi0F,cAAH,EAAkB;AAACwB,YAAAA,aAAa,EAAC31F,CAAC,CAAC21F,aAAjB;AAA+BiB,YAAAA,cAAc,EAAC7lF,IAAI,CAACuoB,GAAL,EAA9C;AAAyDu9D,YAAAA,kBAAkB,EAAC9lF,IAAI,CAACuoB,GAAL,KAAWt5B,CAAC,CAAC21F,aAAzF;AAAuGp1F,YAAAA,IAAI,EAACV,CAAC,CAACU,IAA9G;AAAmH+1F,YAAAA,MAAM,EAACz2F,CAAC,CAACy2F;AAA5H,WAAlB,CAAD,EAAwJ32F,CAAC,CAAC6zF,0BAAF,GAA6BziF,IAAI,CAACuoB,GAAL,EAA/P,CAAhI,EAA2Yv5B,CAAC,CAACszF,SAAF,GAAY7yF,CAAvZ,EAAyZy0F,CAAC,EAA/iB,GAAmjB98D,CAAC,CAAC,gCAAD,CAA3kB,CAA3S;AAA05B,SAAx6B,CAAy6Bn4B,CAAz6B,EAA26BH,CAA36B,CAAP;AAAq7B,OAA59B,CAA3F,EAAyjCA,CAAhkC;AAAkkC,KAA98U;AAAA,QAA+8Uq1F,CAAC,GAAC,UAASt1F,CAAT,EAAW;AAAC,aAAOA,CAAC,IAAE,cAAY,OAAOA,CAAC,CAACmmE,uBAAxB,IAAiDnmE,CAAC,CAACmmE,uBAAF,EAAjD,EAA6EnmE,CAApF;AAAsF,KAAnjV;;AAAojV,SAAKk3F,IAAL,GAAU,UAASj3F,CAAT,EAAW;AAAC,UAAGi7C,CAAC,CAACyvB,UAAF,CAAazvB,CAAC,CAAC+G,UAAF,CAAahiD,CAAb,CAAb,EAA6B,oCAA7B,GAAmE,SAAOK,CAAC,CAAC2zF,qBAA/E,EAAqG,OAAO3zF,CAAC,CAAC2zF,qBAAF,GAAwBh0F,CAAxB,EAA0Bo1F,CAAC,EAAlC;AAAqCC,MAAAA,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,4CAAP,CAAD,CAAD;AAAwD,KAAxN,EAAyN,KAAKmyB,aAAL,GAAmB,UAASn3F,CAAT,EAAW;AAAC,aAAOk7C,CAAC,CAACyvB,UAAF,CAAazvB,CAAC,CAAC+G,UAAF,CAAajiD,CAAb,CAAb,EAA6B,uBAA7B,GAAsDM,CAAC,CAACyzF,WAAF,CAAcrzE,GAAd,CAAkB1gB,CAAlB,CAAtD,EAA2EG,CAAC,CAACizF,mBAAF,IAAuBpzF,CAAC,EAAnG,EAAsG,YAAU;AAAC,eAAOM,CAAC,CAACyzF,WAAF,CAAcqC,MAAd,CAAqBp2F,CAArB,CAAP;AAA+B,OAAvJ;AAAwJ,KAAhZ,EAAiZ,KAAKo3F,gBAAL,GAAsB,UAASp3F,CAAT,EAAW;AAAC,aAAOk7C,CAAC,CAACyvB,UAAF,CAAazvB,CAAC,CAAC+G,UAAF,CAAajiD,CAAb,CAAb,EAA6B,uBAA7B,GAAsDM,CAAC,CAACk0F,cAAF,CAAiB9zE,GAAjB,CAAqB1gB,CAArB,CAAtD,EAA8E,YAAU;AAAC,eAAOM,CAAC,CAACk0F,cAAF,CAAiB4B,MAAjB,CAAwBp2F,CAAxB,CAAP;AAAkC,OAAlI;AAAmI,KAAtjB,EAAujB,KAAKq3F,iBAAL,GAAuB,UAASr3F,CAAT,EAAW;AAAC,aAAOk7C,CAAC,CAACyvB,UAAF,CAAazvB,CAAC,CAAC+G,UAAF,CAAajiD,CAAb,CAAb,EAA6B,uBAA7B,GAAsDM,CAAC,CAACm0F,eAAF,CAAkB/zE,GAAlB,CAAsB1gB,CAAtB,CAAtD,EAA+E,YAAU;AAAC,eAAOM,CAAC,CAACm0F,eAAF,CAAkB2B,MAAlB,CAAyBp2F,CAAzB,CAAP;AAAmC,OAApI;AAAqI,KAA/tB,EAAguB,KAAKs3F,gBAAL,GAAsB,UAASt3F,CAAT,EAAW;AAAC,aAAOk7C,CAAC,CAACyvB,UAAF,CAAazvB,CAAC,CAAC+G,UAAF,CAAajiD,CAAb,CAAb,EAA6B,uBAA7B,GAAsDM,CAAC,CAACg0F,cAAF,CAAiB5zE,GAAjB,CAAqB1gB,CAArB,CAAtD,EAA8EsxF,CAAC,MAAItxF,CAAC,EAApF,EAAuF,YAAU;AAAC,eAAOM,CAAC,CAACg0F,cAAF,CAAiB8B,MAAjB,CAAwBp2F,CAAxB,CAAP;AAAkC,OAA3I;AAA4I,KAA94B,EAA+4B,KAAKu3F,gBAAL,GAAsB,UAASv3F,CAAT,EAAW;AAAC,aAAOk7C,CAAC,CAACyvB,UAAF,CAAazvB,CAAC,CAAC+G,UAAF,CAAajiD,CAAb,CAAb,EAA6B,uBAA7B,GAAsDM,CAAC,CAACi0F,cAAF,CAAiB7zE,GAAjB,CAAqB1gB,CAArB,CAAtD,EAA8EG,CAAC,CAACszF,SAAF,KAAc7yF,CAAd,IAAiBZ,CAAC,EAAhG,EAAmG,YAAU;AAAC,eAAOM,CAAC,CAACi0F,cAAF,CAAiB6B,MAAjB,CAAwBp2F,CAAxB,CAAP;AAAkC,OAAvJ;AAAwJ,KAAzkC,EAA0kC,KAAKw3F,oBAAL,GAA0B,UAASx3F,CAAT,EAAW;AAAC,aAAOk7C,CAAC,CAACyvB,UAAF,CAAazvB,CAAC,CAAC+G,UAAF,CAAajiD,CAAb,CAAb,EAA6B,uBAA7B,GAAsDM,CAAC,CAAC4zF,kBAAF,CAAqBxzE,GAArB,CAAyB1gB,CAAzB,CAAtD,EAAkF,YAAU;AAAC,eAAOM,CAAC,CAAC4zF,kBAAF,CAAqBkC,MAArB,CAA4Bp2F,CAA5B,CAAP;AAAsC,OAA1I;AAA2I,KAA3vC,EAA4vC,KAAKy3F,qBAAL,GAA2B,UAASz3F,CAAT,EAAW;AAAC,aAAOk7C,CAAC,CAACyvB,UAAF,CAAazvB,CAAC,CAAC+G,UAAF,CAAajiD,CAAb,CAAb,EAA6B,uBAA7B,GAAsDM,CAAC,CAAC6zF,mBAAF,CAAsBzzE,GAAtB,CAA0B1gB,CAA1B,CAAtD,EAAmF,YAAU;AAAC,eAAOM,CAAC,CAAC6zF,mBAAF,CAAsBiC,MAAtB,CAA6Bp2F,CAA7B,CAAP;AAAuC,OAA5I;AAA6I,KAAh7C,EAAi7C,KAAKkzE,SAAL,GAAe,UAASlzE,CAAT,EAAWC,CAAX,EAAa;AAAC,aAAOi7C,CAAC,CAACwvB,aAAF,CAAgB1qE,CAAhB,EAAkB,WAAlB,GAA+Bk7C,CAAC,CAACyvB,UAAF,CAAazvB,CAAC,CAAC+G,UAAF,CAAahiD,CAAb,CAAb,EAA6B,uBAA7B,CAA/B,EAAqFK,CAAC,CAAC+uF,KAAF,CAAQgH,GAAR,CAAYr2F,CAAZ,IAAeM,CAAC,CAAC+uF,KAAF,CAAQ1tF,GAAR,CAAY3B,CAAZ,EAAe0gB,GAAf,CAAmBzgB,CAAnB,CAAf,GAAqCK,CAAC,CAAC+uF,KAAF,CAAQ9qF,GAAR,CAAYvE,CAAZ,EAAc,IAAIg0F,GAAJ,CAAQ,CAAC/zF,CAAD,CAAR,CAAd,CAA1H,EAAsJ,YAAU;AAAC,eAAOK,CAAC,CAAC+uF,KAAF,CAAQ1tF,GAAR,CAAY3B,CAAZ,EAAeo2F,MAAf,CAAsBn2F,CAAtB,CAAP;AAAgC,OAAxM;AAAyM,KAAvpD,EAAwpD,KAAKy3F,YAAL,GAAkB,UAAS13F,CAAT,EAAW;AAAC,aAAOk7C,CAAC,CAACyvB,UAAF,CAAazvB,CAAC,CAAC+G,UAAF,CAAajiD,CAAb,CAAb,EAA6B,uBAA7B,GAAsDM,CAAC,CAAC+zF,UAAF,CAAa3zE,GAAb,CAAiB1gB,CAAjB,CAAtD,EAA0E,YAAU;AAAC,eAAOM,CAAC,CAAC+zF,UAAF,CAAa+B,MAAb,CAAoBp2F,CAApB,CAAP;AAA8B,OAA1H;AAA2H,KAAjzD,EAAkzD,KAAK23F,eAAL,GAAqB,UAAS33F,CAAT,EAAW;AAACk7C,MAAAA,CAAC,CAACwvB,aAAF,CAAgB1qE,CAAhB,EAAkB,QAAlB,GAA4Bk7C,CAAC,CAACm1C,YAAF,CAAerwF,CAAf,CAA5B,EAA8CA,CAAC,CAACkvB,OAAF,CAAU,UAASlvB,CAAT,EAAW;AAACmG,QAAAA,CAAC,CAAC0uF,UAAF,CAAawB,GAAb,CAAiBr2F,CAAjB,KAAqBmG,CAAC,CAAC2uF,OAAF,CAAUp0E,GAAV,CAAc1gB,CAAd,CAArB;AAAsC,OAA5D,CAA9C,EAA4GkG,CAAC,CAACkvF,4BAAF,GAA+B,CAA3I,EAA6Ia,CAAC,EAA9I;AAAiJ,KAAp+D,EAAq+D,KAAK2B,WAAL,GAAiB,UAAS33F,CAAT,EAAW;AAAC,UAAGi7C,CAAC,CAACw1C,cAAF,CAAiBzwF,CAAjB,EAAmB,SAAnB,GAA8B,KAAK,CAAL,KAASA,CAAC,CAACovF,KAAX,IAAkB/0C,CAAC,CAAC+7C,GAAF,CAAMp2F,CAAC,CAACovF,KAAR,CAAnD,EAAkEiG,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,oCAAP,EAA4C/kE,CAA5C,CAAD,CAAD,CAAlE,KAAwH;AAAC,YAAG;AAACA,UAAAA,CAAC,GAAC4L,IAAI,CAACsgB,SAAL,CAAelsB,CAAf,CAAF;AAAoB,SAAxB,CAAwB,OAAMC,CAAN,EAAQ;AAAC,iBAAO,KAAKo1F,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,yBAAP,EAAiC/kE,CAAjC,CAAD,CAAb;AAAmD;;AAAAqxF,QAAAA,CAAC,KAAGD,CAAC,GAAG33E,IAAJ,CAASzZ,CAAT,CAAH,GAAeq1F,CAAC,CAACt1F,CAAC,CAACglE,IAAF,CAAO,wDAAP,CAAD,CAAjB;AAAoF;AAAC,KAApyE,EAAqyE,KAAK6yB,cAAL,GAAoB,YAAU;AAAChG,MAAAA,CAAC,IAAG77E,CAAC,EAAJ,EAAO7V,CAAC,CAACgzF,kBAAF,GAAqB,CAAC,CAA7B,EAA+Bz8B,aAAa,CAACs6B,CAAD,CAA5C,EAAgDsF,CAAC,CAAC,iCAAD,CAAlD;AAAsF,KAA15E,EAA25E,KAAKwB,yBAAL,GAA+BrB,CAA17E;AAA47E,GAAjga;AAAA,MAAkga1D,CAAC,GAAC;AAACplE,IAAAA,MAAM,EAAC,YAAU;AAAC,aAAO,IAAIhnB,CAAJ,EAAP;AAAa,KAAhC;AAAiCoxF,IAAAA,eAAe,EAAC,UAAS/3F,CAAT,EAAW;AAAC,UAAIC,CAAC,GAACD,CAAC,CAACg4F,YAAR;AAAqBhG,MAAAA,CAAC,CAACT,kBAAF,CAAqBtxF,CAArB;AAAwB,KAA1G;AAA2G8jE,IAAAA,QAAQ,EAACstB,CAApH;AAAsH/pE,IAAAA,MAAM,EAAC8pE;AAA7H,GAApga;AAAooa,CAA/gnB,EAAghnB,UAASpxF,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,MAAIC,CAAJ;AAAM,GAAC,YAAU;AAAC;;AAAa,QAAIJ,CAAC,GAAC;AAACk4F,MAAAA,UAAU,EAAC,MAAZ;AAAmBC,MAAAA,QAAQ,EAAC,MAA5B;AAAmCC,MAAAA,QAAQ,EAAC,MAA5C;AAAmDC,MAAAA,aAAa,EAAC,MAAjE;AAAwEn7E,MAAAA,MAAM,EAAC,SAA/E;AAAyFo7E,MAAAA,WAAW,EAAC,cAArG;AAAoH1qB,MAAAA,IAAI,EAAC,KAAzH;AAA+H2qB,MAAAA,QAAQ,EAAC,MAAxI;AAA+I/iD,MAAAA,IAAI,EAAC,WAApJ;AAAgKgjD,MAAAA,MAAM,EAAC,UAAvK;AAAkLC,MAAAA,WAAW,EAAC,0FAA9L;AAAyR31F,MAAAA,GAAG,EAAC,qBAA7R;AAAmT41F,MAAAA,UAAU,EAAC,uBAA9T;AAAsVC,MAAAA,YAAY,EAAC,YAAnW;AAAgXn6D,MAAAA,IAAI,EAAC;AAArX,KAAN;;AAAoY,aAASn+B,CAAT,CAAWJ,CAAX,EAAa;AAAC,aAAO,UAASA,CAAT,EAAWC,CAAX,EAAa;AAAC,YAAIC,CAAJ;AAAA,YAAMC,CAAN;AAAA,YAAQG,CAAR;AAAA,YAAUsG,CAAV;AAAA,YAAYnG,CAAZ;AAAA,YAAcD,CAAd;AAAA,YAAgBg5D,CAAhB;AAAA,YAAkBn5D,CAAlB;AAAA,YAAoBO,CAApB;AAAA,YAAsBuF,CAAC,GAAC,CAAxB;AAAA,YAA0BD,CAAC,GAAClG,CAAC,CAACe,MAA9B;AAAA,YAAqCyhD,CAAC,GAAC,EAAvC;;AAA0C,aAAIriD,CAAC,GAAC,CAAN,EAAQA,CAAC,GAAC+F,CAAV,EAAY/F,CAAC,EAAb,EAAgB,IAAG,YAAU,OAAOH,CAAC,CAACG,CAAD,CAArB,EAAyBqiD,CAAC,IAAExiD,CAAC,CAACG,CAAD,CAAJ,CAAzB,KAAsC,IAAG,YAAU,OAAOH,CAAC,CAACG,CAAD,CAArB,EAAyB;AAAC,cAAG,CAACyG,CAAC,GAAC5G,CAAC,CAACG,CAAD,CAAJ,EAASkK,IAAZ,EAAiB,KAAInK,CAAC,GAACD,CAAC,CAACkG,CAAD,CAAH,EAAO7F,CAAC,GAAC,CAAb,EAAeA,CAAC,GAACsG,CAAC,CAACyD,IAAF,CAAOtJ,MAAxB,EAA+BT,CAAC,EAAhC,EAAmC;AAAC,gBAAG,QAAMJ,CAAT,EAAW,MAAM,IAAIQ,KAAJ,CAAUN,CAAC,CAAC,+DAAD,EAAiEwG,CAAC,CAACyD,IAAF,CAAO/J,CAAP,CAAjE,EAA2EsG,CAAC,CAACyD,IAAF,CAAO/J,CAAC,GAAC,CAAT,CAA3E,CAAX,CAAN;AAA0GJ,YAAAA,CAAC,GAACA,CAAC,CAAC0G,CAAC,CAACyD,IAAF,CAAO/J,CAAP,CAAD,CAAH;AAAe,WAAzL,MAA8LJ,CAAC,GAAC0G,CAAC,CAAC+xF,QAAF,GAAW14F,CAAC,CAAC2G,CAAC,CAAC+xF,QAAH,CAAZ,GAAyB14F,CAAC,CAACkG,CAAC,EAAF,CAA5B;AAAkC,cAAGpG,CAAC,CAACo4F,QAAF,CAAWrjE,IAAX,CAAgBluB,CAAC,CAACgR,IAAlB,KAAyB7X,CAAC,CAACq4F,aAAF,CAAgBtjE,IAAhB,CAAqBluB,CAAC,CAACgR,IAAvB,CAAzB,IAAuD1X,CAAC,YAAYm2D,QAApE,KAA+En2D,CAAC,GAACA,CAAC,EAAlF,GAAsFH,CAAC,CAACs4F,WAAF,CAAcvjE,IAAd,CAAmBluB,CAAC,CAACgR,IAArB,KAA4B,YAAU,OAAO1X,CAA7C,IAAgDq9B,KAAK,CAACr9B,CAAD,CAA9I,EAAkJ,MAAM,IAAIq5C,SAAJ,CAAcn5C,CAAC,CAAC,yCAAD,EAA2CF,CAA3C,CAAf,CAAN;;AAAoE,kBAAOH,CAAC,CAACkd,MAAF,CAAS6X,IAAT,CAAcluB,CAAC,CAACgR,IAAhB,MAAwBvX,CAAC,GAACH,CAAC,IAAE,CAA7B,GAAgC0G,CAAC,CAACgR,IAAzC;AAA+C,iBAAI,GAAJ;AAAQ1X,cAAAA,CAAC,GAACsd,QAAQ,CAACtd,CAAD,EAAG,EAAH,CAAR,CAAeoD,QAAf,CAAwB,CAAxB,CAAF;AAA6B;;AAAM,iBAAI,GAAJ;AAAQpD,cAAAA,CAAC,GAACiY,MAAM,CAAC2lC,YAAP,CAAoBtgC,QAAQ,CAACtd,CAAD,EAAG,EAAH,CAA5B,CAAF;AAAsC;;AAAM,iBAAI,GAAJ;AAAQ,iBAAI,GAAJ;AAAQA,cAAAA,CAAC,GAACsd,QAAQ,CAACtd,CAAD,EAAG,EAAH,CAAV;AAAiB;;AAAM,iBAAI,GAAJ;AAAQA,cAAAA,CAAC,GAAC2L,IAAI,CAACsgB,SAAL,CAAejsB,CAAf,EAAiB,IAAjB,EAAsB0G,CAAC,CAACuoE,KAAF,GAAQ3xD,QAAQ,CAAC5W,CAAC,CAACuoE,KAAH,CAAhB,GAA0B,CAAhD,CAAF;AAAqD;;AAAM,iBAAI,GAAJ;AAAQjvE,cAAAA,CAAC,GAAC0G,CAAC,CAACgyF,SAAF,GAAY7lE,UAAU,CAAC7yB,CAAD,CAAV,CAAc2iE,aAAd,CAA4Bj8D,CAAC,CAACgyF,SAA9B,CAAZ,GAAqD7lE,UAAU,CAAC7yB,CAAD,CAAV,CAAc2iE,aAAd,EAAvD;AAAqF;;AAAM,iBAAI,GAAJ;AAAQ3iE,cAAAA,CAAC,GAAC0G,CAAC,CAACgyF,SAAF,GAAY7lE,UAAU,CAAC7yB,CAAD,CAAV,CAAc4iE,OAAd,CAAsBl8D,CAAC,CAACgyF,SAAxB,CAAZ,GAA+C7lE,UAAU,CAAC7yB,CAAD,CAA3D;AAA+D;;AAAM,iBAAI,GAAJ;AAAQA,cAAAA,CAAC,GAAC0G,CAAC,CAACgyF,SAAF,GAAYzgF,MAAM,CAACokC,MAAM,CAACr8C,CAAC,CAAC24F,WAAF,CAAcjyF,CAAC,CAACgyF,SAAhB,CAAD,CAAP,CAAlB,GAAuD7lE,UAAU,CAAC7yB,CAAD,CAAnE;AAAuE;;AAAM,iBAAI,GAAJ;AAAQA,cAAAA,CAAC,GAAC,CAACsd,QAAQ,CAACtd,CAAD,EAAG,EAAH,CAAR,KAAiB,CAAlB,EAAqBoD,QAArB,CAA8B,CAA9B,CAAF;AAAmC;;AAAM,iBAAI,GAAJ;AAAQpD,cAAAA,CAAC,GAACiY,MAAM,CAACjY,CAAD,CAAR,EAAYA,CAAC,GAAC0G,CAAC,CAACgyF,SAAF,GAAY14F,CAAC,CAAC2rB,SAAF,CAAY,CAAZ,EAAcjlB,CAAC,CAACgyF,SAAhB,CAAZ,GAAuC14F,CAArD;AAAuD;;AAAM,iBAAI,GAAJ;AAAQA,cAAAA,CAAC,GAACiY,MAAM,CAAC,CAAC,CAACjY,CAAH,CAAR,EAAcA,CAAC,GAAC0G,CAAC,CAACgyF,SAAF,GAAY14F,CAAC,CAAC2rB,SAAF,CAAY,CAAZ,EAAcjlB,CAAC,CAACgyF,SAAhB,CAAZ,GAAuC14F,CAAvD;AAAyD;;AAAM,iBAAI,GAAJ;AAAQA,cAAAA,CAAC,GAACuB,MAAM,CAAC4B,SAAP,CAAiBC,QAAjB,CAA0BxC,IAA1B,CAA+BZ,CAA/B,EAAkCkW,KAAlC,CAAwC,CAAxC,EAA0C,CAAC,CAA3C,EAA8CzT,WAA9C,EAAF,EAA8DzC,CAAC,GAAC0G,CAAC,CAACgyF,SAAF,GAAY14F,CAAC,CAAC2rB,SAAF,CAAY,CAAZ,EAAcjlB,CAAC,CAACgyF,SAAhB,CAAZ,GAAuC14F,CAAvG;AAAyG;;AAAM,iBAAI,GAAJ;AAAQA,cAAAA,CAAC,GAACsd,QAAQ,CAACtd,CAAD,EAAG,EAAH,CAAR,KAAiB,CAAnB;AAAqB;;AAAM,iBAAI,GAAJ;AAAQA,cAAAA,CAAC,GAACA,CAAC,CAACod,OAAF,EAAF,EAAcpd,CAAC,GAAC0G,CAAC,CAACgyF,SAAF,GAAY14F,CAAC,CAAC2rB,SAAF,CAAY,CAAZ,EAAcjlB,CAAC,CAACgyF,SAAhB,CAAZ,GAAuC14F,CAAvD;AAAyD;;AAAM,iBAAI,GAAJ;AAAQA,cAAAA,CAAC,GAAC,CAACsd,QAAQ,CAACtd,CAAD,EAAG,EAAH,CAAR,KAAiB,CAAlB,EAAqBoD,QAArB,CAA8B,EAA9B,CAAF;AAAoC;;AAAM,iBAAI,GAAJ;AAAQpD,cAAAA,CAAC,GAAC,CAACsd,QAAQ,CAACtd,CAAD,EAAG,EAAH,CAAR,KAAiB,CAAlB,EAAqBoD,QAArB,CAA8B,EAA9B,EAAkC41B,WAAlC,EAAF;AAAr9B;;AAAugCn5B,UAAAA,CAAC,CAAC4tE,IAAF,CAAO74C,IAAP,CAAYluB,CAAC,CAACgR,IAAd,IAAoB4qC,CAAC,IAAEtiD,CAAvB,IAA0B,CAACH,CAAC,CAACkd,MAAF,CAAS6X,IAAT,CAAcluB,CAAC,CAACgR,IAAhB,CAAD,IAAwBvX,CAAC,IAAE,CAACuG,CAAC,CAAC23B,IAA9B,GAAmC39B,CAAC,GAAC,EAArC,IAAyCA,CAAC,GAACP,CAAC,GAAC,GAAD,GAAK,GAAR,EAAYH,CAAC,GAACA,CAAC,CAACoD,QAAF,GAAaiqB,OAAb,CAAqBxtB,CAAC,CAACw+B,IAAvB,EAA4B,EAA5B,CAAvD,GAAwF/9B,CAAC,GAACoG,CAAC,CAACkyF,QAAF,GAAW,QAAMlyF,CAAC,CAACkyF,QAAR,GAAiB,GAAjB,GAAqBlyF,CAAC,CAACkyF,QAAF,CAAW5+B,MAAX,CAAkB,CAAlB,CAAhC,GAAqD,GAA/I,EAAmJV,CAAC,GAAC5yD,CAAC,CAACuoE,KAAF,GAAQ,CAACvuE,CAAC,GAACV,CAAH,EAAMa,MAAnK,EAA0KN,CAAC,GAACmG,CAAC,CAACuoE,KAAF,IAAS3V,CAAC,GAAC,CAAX,GAAah5D,CAAC,CAACu4F,MAAF,CAASv/B,CAAT,CAAb,GAAyB,EAArM,EAAwMhX,CAAC,IAAE57C,CAAC,CAACoyF,KAAF,GAAQp4F,CAAC,GAACV,CAAF,GAAIO,CAAZ,GAAc,QAAMD,CAAN,GAAQI,CAAC,GAACH,CAAF,GAAIP,CAAZ,GAAcO,CAAC,GAACG,CAAF,GAAIV,CAArQ;AAAwQ;;AAAA,eAAOsiD,CAAP;AAAS,OAAt1D,CAAu1D,UAASxiD,CAAT,EAAW;AAAC,YAAG4G,CAAC,CAAC5G,CAAD,CAAJ,EAAQ,OAAO4G,CAAC,CAAC5G,CAAD,CAAR;AAAY,YAAIC,CAAJ;AAAA,YAAMC,CAAC,GAACF,CAAR;AAAA,YAAUG,CAAC,GAAC,EAAZ;AAAA,YAAeC,CAAC,GAAC,CAAjB;;AAAmB,eAAKF,CAAL,GAAQ;AAAC,cAAG,UAAQD,CAAC,GAACF,CAAC,CAACw1C,IAAF,CAAOyjB,IAAP,CAAY94D,CAAZ,CAAV,CAAH,EAA6BC,CAAC,CAAC2O,IAAF,CAAO7O,CAAC,CAAC,CAAD,CAAR,EAA7B,KAA+C,IAAG,UAAQA,CAAC,GAACF,CAAC,CAACw4F,MAAF,CAASv/B,IAAT,CAAc94D,CAAd,CAAV,CAAH,EAA+BC,CAAC,CAAC2O,IAAF,CAAO,GAAP,EAA/B,KAA+C;AAAC,gBAAG,UAAQ7O,CAAC,GAACF,CAAC,CAACy4F,WAAF,CAAcx/B,IAAd,CAAmB94D,CAAnB,CAAV,CAAH,EAAoC,MAAM,IAAI+4F,WAAJ,CAAgB,kCAAhB,CAAN;;AAA0D,gBAAGh5F,CAAC,CAAC,CAAD,CAAJ,EAAQ;AAACG,cAAAA,CAAC,IAAE,CAAH;AAAK,kBAAIE,CAAC,GAAC,EAAN;AAAA,kBAASG,CAAC,GAACR,CAAC,CAAC,CAAD,CAAZ;AAAA,kBAAgBO,CAAC,GAAC,EAAlB;AAAqB,kBAAG,UAAQA,CAAC,GAACT,CAAC,CAAC8C,GAAF,CAAMm2D,IAAN,CAAWv4D,CAAX,CAAV,CAAH,EAA4B,MAAM,IAAIw4F,WAAJ,CAAgB,8CAAhB,CAAN;;AAAsE,mBAAI34F,CAAC,CAACwO,IAAF,CAAOtO,CAAC,CAAC,CAAD,CAAR,CAAJ,EAAiB,QAAMC,CAAC,GAACA,CAAC,CAACorB,SAAF,CAAYrrB,CAAC,CAAC,CAAD,CAAD,CAAKO,MAAjB,CAAR,CAAjB,GAAoD,IAAG,UAAQP,CAAC,GAACT,CAAC,CAAC04F,UAAF,CAAaz/B,IAAb,CAAkBv4D,CAAlB,CAAV,CAAH,EAAmCH,CAAC,CAACwO,IAAF,CAAOtO,CAAC,CAAC,CAAD,CAAR,EAAnC,KAAoD;AAAC,oBAAG,UAAQA,CAAC,GAACT,CAAC,CAAC24F,YAAF,CAAe1/B,IAAf,CAAoBv4D,CAApB,CAAV,CAAH,EAAqC,MAAM,IAAIw4F,WAAJ,CAAgB,8CAAhB,CAAN;AAAsE34F,gBAAAA,CAAC,CAACwO,IAAF,CAAOtO,CAAC,CAAC,CAAD,CAAR;AAAa;;AAAAP,cAAAA,CAAC,CAAC,CAAD,CAAD,GAAKK,CAAL;AAAO,aAA7W,MAAkXF,CAAC,IAAE,CAAH;;AAAK,gBAAG,MAAIA,CAAP,EAAS,MAAM,IAAIM,KAAJ,CAAU,2EAAV,CAAN;AAA6FP,YAAAA,CAAC,CAAC2O,IAAF,CAAO;AAAC0pF,cAAAA,WAAW,EAACv4F,CAAC,CAAC,CAAD,CAAd;AAAkB04F,cAAAA,QAAQ,EAAC14F,CAAC,CAAC,CAAD,CAA5B;AAAgCoK,cAAAA,IAAI,EAACpK,CAAC,CAAC,CAAD,CAAtC;AAA0Cs+B,cAAAA,IAAI,EAACt+B,CAAC,CAAC,CAAD,CAAhD;AAAoD64F,cAAAA,QAAQ,EAAC74F,CAAC,CAAC,CAAD,CAA9D;AAAkE+4F,cAAAA,KAAK,EAAC/4F,CAAC,CAAC,CAAD,CAAzE;AAA6EkvE,cAAAA,KAAK,EAAClvE,CAAC,CAAC,CAAD,CAApF;AAAwF24F,cAAAA,SAAS,EAAC34F,CAAC,CAAC,CAAD,CAAnG;AAAuG2X,cAAAA,IAAI,EAAC3X,CAAC,CAAC,CAAD;AAA7G,aAAP;AAA0H;AAAAC,UAAAA,CAAC,GAACA,CAAC,CAAC2rB,SAAF,CAAY5rB,CAAC,CAAC,CAAD,CAAD,CAAKc,MAAjB,CAAF;AAA2B;;AAAA,eAAO6F,CAAC,CAAC5G,CAAD,CAAD,GAAKG,CAAZ;AAAc,OAAz3B,CAA03BH,CAA13B,CAAv1D,EAAotFiB,SAAptF,CAAP;AAAsuF;;AAAA,aAASX,CAAT,CAAWN,CAAX,EAAaC,CAAb,EAAe;AAAC,aAAOG,CAAC,CAACc,KAAF,CAAQ,IAAR,EAAa,CAAClB,CAAD,EAAI+lB,MAAJ,CAAW9lB,CAAC,IAAE,EAAd,CAAb,CAAP;AAAuC;;AAAA,QAAI2G,CAAC,GAACnF,MAAM,CAACksB,MAAP,CAAc,IAAd,CAAN;AAA0B1tB,IAAAA,CAAC,CAACoiE,OAAF,GAAUjiE,CAAV,EAAYH,CAAC,CAACqjE,QAAF,GAAWhjE,CAAvB,EAAyB,eAAa,OAAO2V,MAApB,KAA6BA,MAAM,CAACosD,OAAP,GAAejiE,CAAf,EAAiB6V,MAAM,CAACqtD,QAAP,GAAgBhjE,CAAjC,EAAmC,KAAK,CAAL,MAAUH,CAAC,GAAC,YAAU;AAAC,aAAM;AAACkiE,QAAAA,OAAO,EAACjiE,CAAT;AAAWkjE,QAAAA,QAAQ,EAAChjE;AAApB,OAAN;AAA6B,KAAxC,CAAyCQ,IAAzC,CAA8Cb,CAA9C,EAAgDC,CAAhD,EAAkDD,CAAlD,EAAoDD,CAApD,CAAZ,MAAsEA,CAAC,CAACa,OAAF,GAAUV,CAAhF,CAAhE,CAAzB;AAA6K,GAA94G,EAAD;AAAk5G,CAAx7tB,EAAy7tB,UAASH,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC;;AAAaA,EAAAA,CAAC,CAACH,CAAF,CAAIE,CAAJ,GAAO,UAASD,CAAT,EAAW;AAACE,IAAAA,CAAC,CAACiG,CAAF,CAAIlG,CAAJ,EAAM,kBAAN,EAAyB,YAAU;AAAC,aAAOF,CAAP;AAAS,KAA7C;AAA+C,QAAII,CAAC,GAACD,CAAC,CAAC,CAAD,CAAP;AAAWF,IAAAA,CAAC,CAAC0jE,OAAF,GAAU1jE,CAAC,CAAC0jE,OAAF,IAAW,EAArB,EAAwBA,OAAO,CAACw1B,gBAAR,GAAyB/4F,CAAC,CAACM,CAAnD;AAAqD,QAAIV,CAAC,GAACI,CAAC,CAACM,CAAR;AAAU,GAArI,CAAsIK,IAAtI,CAA2I,IAA3I,EAAgJZ,CAAC,CAAC,CAAD,CAAjJ,CAAP;AAA6J,CAAnnuB,EAAonuB,UAASF,CAAT,EAAWC,CAAX,EAAa;AAAC,MAAIC,CAAJ;;AAAMA,EAAAA,CAAC,GAAC,YAAU;AAAC,WAAO,IAAP;AAAY,GAAvB,EAAF;;AAA4B,MAAG;AAACA,IAAAA,CAAC,GAACA,CAAC,IAAE,IAAIm2D,QAAJ,CAAa,aAAb,GAAL;AAAmC,GAAvC,CAAuC,OAAMr2D,CAAN,EAAQ;AAAC,gBAAU,OAAOiW,MAAjB,KAA0B/V,CAAC,GAAC+V,MAA5B;AAAoC;;AAAAjW,EAAAA,CAAC,CAACa,OAAF,GAAUX,CAAV;AAAY,CAApwuB,CAA94B,CAAD;AAGA;AACA;AACA;AACA;AACA;;AACA,CAAC,YAAY;AACX,MAAIo4C,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;AACAprB,EAAAA,MAAM,CAACqrB,IAAP,GAAcD,OAAd;AAEAA,EAAAA,OAAO,CAAC0K,IAAR,GAAe,EAAf;AACA1K,EAAAA,OAAO,CAAC0K,IAAR,CAAa4O,WAAb,GAA2B,KAA3B;AACAtZ,EAAAA,OAAO,CAACvhE,OAAR,GAAkB,OAAlB;AACAuhE,EAAAA,OAAO,CAACof,kBAAR,GAA6B,GAA7B;AAEA,MAAIqW,eAAe,GAAG,IAAtB,CAXW,CAWiB;;AAC5B,MAAIC,eAAe,GAAG,IAAtB,CAZW,CAYiB;;AAC5B,MAAIC,gBAAgB,GAAG,IAAvB,CAbW,CAakB;;AAC7B,MAAIC,2BAA2B,GAAG,IAAlC,CAdW,CAc6B;;AAExC,MAAIC,wBAAwB,GAAG,iFAA/B;AACA,MAAIC,aAAa,GAAG;AAClB,iBAAa;AADK,GAApB;AAIA,MAAIC,kBAAkB,GAAG,iBAAzB;AACA,MAAIC,yBAAyB,GAAG,yBAAhC;AACA,MAAIC,wBAAwB,GAAG,IAA/B;AACA,MAAIC,mBAAmB,GAAG,CAA1B;AAEA,MAAIC,mCAAmC,GAAG,8BAA1C;AACA,MAAIC,4BAA4B,GAAG,sBAAnC;AACA,MAAIC,kCAAkC,GAAG,IAAzC;AACA,MAAIC,6BAA6B,GAAG,CAApC;AAEAt2B,EAAAA,OAAO,CAAC2J,qBAAR,GAAgC,CAAhC;AAEA;AACF;AACA;AACA;AACA;AACA;;AACE,MAAI4sB,cAAc,GAAG,UAAU7nF,MAAV,EAAkB;AACrC,QAAIqU,QAAQ,GAAG,oDAAf;AACAi9C,IAAAA,OAAO,CAACgH,aAAR,CAAsBjkD,QAAtB;;AAEA,QAAIrU,MAAM,CAAC8nF,QAAX,EAAqB;AACnB,aAAO9nF,MAAM,CAAC8nF,QAAd;AACD,KAFD,MAEO,IAAI9nF,MAAM,CAAC+nF,KAAX,EAAkB;AACvBxxE,MAAAA,GAAG,CAACq8C,IAAJ,CAAS,iPAAT;AACA,aAAOu0B,wBAAwB,CAC5BhsE,OADI,CACI,SADJ,EACenb,MAAM,CAAC+nF,KADtB,EAEJ5sE,OAFI,CAEI,aAFJ,EAEmBisE,aAAa,CAAC,WAAD,CAFhC,EAGJjsE,OAHI,CAGI,YAHJ,EAGkB+qB,MAAM,CAACtK,kBAAP,CACrBvnB,QADqB,CAHlB,CAAP;AAKD,KAPM,MAOA;AACL,aAAOrU,MAAM,CAACgoF,MAAd;AACD;AACF,GAhBD;AAkBA;AACF;AACA;AACA;;;AACE,MAAIC,WAAW,GAAG,UAAUjoF,MAAV,EAAkB;AAClC,QAAIqU,QAAQ,GAAG,oDAAf;AACAi9C,IAAAA,OAAO,CAACgH,aAAR,CAAsBjkD,QAAtB;;AACA,QAAIrU,MAAM,CAAC8nF,QAAX,EAAqB;AACnB,aAAO9nF,MAAM,CAAC8nF,QAAd;AACD,KAFD,MAEO,IAAI9nF,MAAM,CAAC+nF,KAAX,EAAkB;AACvBxxE,MAAAA,GAAG,CAACq8C,IAAJ,CAAS,iPAAT;AACA,aAAOu0B,wBAAwB,CAC5BhsE,OADI,CACI,SADJ,EACenb,MAAM,CAAC+nF,KADtB,EAEJ5sE,OAFI,CAEI,aAFJ,EAEmBisE,aAAa,CAAC,WAAD,CAFhC,EAGJjsE,OAHI,CAGI,YAHJ,EAGkB+qB,MAAM,CAACtK,kBAAP,CACrBvnB,QADqB,CAHlB,CAAP;AAKD,KAPM,MAOA;AACL,aAAOrU,MAAM,CAACgoF,MAAd;AACD;AACF,GAfD;AAiBA;AACF;AACA;;;AACE,WAASE,cAAT,CAAwBnxF,GAAxB,EAA6B;AAC3B,QAAIoxB,MAAM,GAAGpxB,GAAG,CAACid,KAAJ,CAAU,wDAAV,CAAb;AACA,WAAOmU,MAAM,CAACx5B,MAAP,GAAgBw5B,MAAM,CAAC,CAAD,CAAtB,GAA4B,EAAnC;AACD;AAED;AACF;AACA;;;AACEmpC,EAAAA,OAAO,CAAC0K,IAAR,CAAamsB,mBAAb,GAAmC,YAAY;AAC7C,QAAI72B,OAAO,CAAC0K,IAAR,CAAa4O,WAAjB,EAA8B;AAC5B,UAAIr0D,GAAG,GAAG+6C,OAAO,CAAC0C,MAAR,EAAV;AACAz9C,MAAAA,GAAG,CAACq8C,IAAJ,CAAS,sEAAT,EAAiFmB,uBAAjF;AACD;AACF,GALD;AAOA;AACF;AACA;AACA;;;AACEzC,EAAAA,OAAO,CAAC0K,IAAR,CAAa8oB,IAAb,GAAoB,UAAU9kF,MAAV,EAAkB;AACpCsxD,IAAAA,OAAO,CAAC0K,IAAR,CAAaosB,QAAb,GAAwB,IAAI92B,OAAO,CAACyO,QAAZ,EAAxB;AACAzO,IAAAA,OAAO,CAAC0K,IAAR,CAAaqsB,iBAAb,GAAiC,IAAIC,iBAAJ,CAAsBh3B,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAtB,CAAjC;AACA3K,IAAAA,OAAO,CAAC0K,IAAR,CAAausB,UAAb,CAAwBvoF,MAAxB;AACAsxD,IAAAA,OAAO,CAAC0K,IAAR,CAAawsB,kBAAb,CAAgCxoF,MAAhC;AACAsxD,IAAAA,OAAO,CAAC0K,IAAR,CAAa4O,WAAb,GAA2B,IAA3B;AACD,GAND;AAQA;AACF;AACA;AACA;AACA;;;AACEtZ,EAAAA,OAAO,CAAC0K,IAAR,CAAausB,UAAb,GAA0B,UAAUvoF,MAAV,EAAkB;AAC1CsxD,IAAAA,OAAO,CAACgH,aAAR,CAAsBt4D,MAAtB,EAA8B,QAA9B;AAEA,QAAI4kE,SAAS,GAAGtT,OAAO,CAACgH,aAAR,CAAsBt4D,MAAM,CAAC4kE,SAA7B,EAAwC,kBAAxC,CAAhB;AACA,QAAIvqE,MAAM,GAAGi3D,OAAO,CAACgH,aAAR,CAAsBt4D,MAAM,CAAC3F,MAA7B,EAAqC,eAArC,CAAb;AACA,QAAII,QAAQ,GAAGuF,MAAM,CAACvF,QAAP,IAAmB,IAAlC;AAEA62D,IAAAA,OAAO,CAAC0K,IAAR,CAAaxzD,MAAb,GAAsB,IAAI8oD,OAAO,CAACyT,SAAZ,CAAsBH,SAAtB,EAAiCvqE,MAAjC,EAAyCI,QAAzC,CAAtB;AACD,GARD;AAUA;AACF;AACA;AACA;AACA;;;AACE62D,EAAAA,OAAO,CAAC0K,IAAR,CAAawsB,kBAAb,GAAkC,UAAUxoF,MAAV,EAAkB;AAClDsxD,IAAAA,OAAO,CAACgH,aAAR,CAAsBt4D,MAAtB,EAA8B,QAA9B;AACA,QAAI4kE,SAAS,GAAGtT,OAAO,CAACgH,aAAR,CAAsBt4D,MAAM,CAAC4kE,SAA7B,EAAwC,kBAAxC,CAAhB;AACA,QAAID,cAAc,GAAGrT,OAAO,CAACgH,aAAR,CAAsBt4D,MAAM,CAAC2kE,cAA7B,EAA6C,uBAA7C,CAArB;AACA,QAAIlqE,QAAQ,GAAG62D,OAAO,CAACgH,aAAR,CAAsBt4D,MAAM,CAACyoF,gBAA7B,EAA+C,yBAA/C,CAAf;AAEAn3B,IAAAA,OAAO,CAAC0K,IAAR,CAAa0sB,cAAb,GAA8B,IAAIp3B,OAAO,CAACoT,cAAZ,CAA2BC,cAA3B,EAA2CC,SAA3C,EAAsDnqE,QAAtD,CAA9B;AACD,GAPD;AASA;AACF;AACA;;;AACE62D,EAAAA,OAAO,CAAC0K,IAAR,CAAa2sB,SAAb,GAAyB,YAAY;AACnCr3B,IAAAA,OAAO,CAAC0K,IAAR,CAAaxzD,MAAb,GAAsB,IAAI8oD,OAAO,CAACwS,UAAZ,EAAtB;AACAxS,IAAAA,OAAO,CAAC0K,IAAR,CAAa0sB,cAAb,GAA8B,IAAIp3B,OAAO,CAACwS,UAAZ,EAA9B;AACAxS,IAAAA,OAAO,CAAC0K,IAAR,CAAaohB,YAAb,GAA4B,IAAI9rB,OAAO,CAACwS,UAAZ,EAA5B;AACA,QAAI/H,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACA,QAAIF,GAAJ,EAASA,GAAG,CAAC6E,cAAJ;AACTtP,IAAAA,OAAO,CAAC0K,IAAR,CAAaD,GAAb,GAAmB,IAAIzK,OAAO,CAACyO,QAAZ,EAAnB;AACAzO,IAAAA,OAAO,CAAC0K,IAAR,CAAaqsB,iBAAb,GAAiC,IAAjC;AACA/2B,IAAAA,OAAO,CAAC0K,IAAR,CAAa4sB,gBAAb,GAAgC,IAAhC;AACAt3B,IAAAA,OAAO,CAAC0K,IAAR,CAAa+F,QAAb,GAAwB,IAAxB;AACAzQ,IAAAA,OAAO,CAAC0K,IAAR,CAAa6sB,gBAAb,GAAgC,IAAhC;AACAv3B,IAAAA,OAAO,CAAC31B,KAAR,CAAcivC,WAAd,GAA4B,KAA5B;AACAtZ,IAAAA,OAAO,CAAC0K,IAAR,CAAa4O,WAAb,GAA2B,KAA3B;AACD,GAbD;AAeA;AACF;AACA;AACA;;;AACEtZ,EAAAA,OAAO,CAAC0K,IAAR,CAAa8sB,wBAAb,GAAwC,IAAxC;;AAEAx3B,EAAAA,OAAO,CAAC0K,IAAR,CAAa+sB,2BAAb,GAA2C,YAAY;AACrD,WAAOz3B,OAAO,CAAC0K,IAAR,CAAa8sB,wBAApB;AACD,GAFD;;AAIAx3B,EAAAA,OAAO,CAAC0K,IAAR,CAAagtB,2BAAb,GAA2C,UAAU13E,MAAV,EAAkB;AAC3DggD,IAAAA,OAAO,CAAC0K,IAAR,CAAa8sB,wBAAb,GAAwCx3E,MAAxC;AACD,GAFD;;AAIAggD,EAAAA,OAAO,CAAC0K,IAAR,CAAaitB,mBAAb,GAAmC,UAAUjpF,MAAV,EAAkB;AACnDsxD,IAAAA,OAAO,CAACgH,aAAR,CAAsBt4D,MAAtB,EAA8B,QAA9B;;AAEA,QAAIkpF,oBAAoB,GAAG,UAAUC,gBAAV,EAA4B;AACrD73B,MAAAA,OAAO,CAACgH,aAAR,CAAsB6wB,gBAAtB,EAAwC,kBAAxC;AACA73B,MAAAA,OAAO,CAACgH,aAAR,CAAsB6wB,gBAAgB,CAACC,KAAvC,EAA8C,wBAA9C;AACA93B,MAAAA,OAAO,CAACiH,UAAR,CAAmB4wB,gBAAgB,CAACC,KAAjB,CAAuBC,WAAvB,IAAsCF,gBAAgB,CAACC,KAAjB,CAAuBE,QAAhF,EAA0F,qGAA1F;AACAh4B,MAAAA,OAAO,CAACgH,aAAR,CAAsB6wB,gBAAgB,CAACI,cAAvC,EAAuD,iCAAvD;AACAj4B,MAAAA,OAAO,CAACiH,UAAR,CAAmB4wB,gBAAgB,CAACI,cAAjB,CAAgCF,WAAhC,IAA+CF,gBAAgB,CAACI,cAAjB,CAAgCD,QAAlG,EAA4G,8GAA5G;AAEAh4B,MAAAA,OAAO,CAAC0K,IAAR,CAAawtB,eAAb,GAA+B,EAA/B;AAEAl4B,MAAAA,OAAO,CAAC31B,KAAR,CAAc,UAAUA,KAAV,EAAiB;AAC7BA,QAAAA,KAAK,CAACyvC,SAAN,CAAgB,YAAY;AAC1B9Z,UAAAA,OAAO,CAACsF,QAAR,CAAiBtF,OAAO,CAACuF,YAAR,CAAqB4yB,QAAtC,EAAgD,YAAY;AAC1D,gBAAI,CAACN,gBAAgB,CAACC,KAAjB,CAAuBE,QAAxB,IAAoC,CAACh4B,OAAO,CAAC0K,IAAR,CAAawtB,eAAb,CAA6BJ,KAAtE,EAA6E;AAC3E93B,cAAAA,OAAO,CAAC0K,IAAR,CAAawtB,eAAb,CAA6BJ,KAA7B,GACE,IAAI93B,OAAO,CAACo4B,mBAAZ,CAAgCP,gBAAgB,CAACC,KAAjD,CADF;AAEA93B,cAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,kCAAtB,EAA0DoB,uBAA1D;AACD;;AAED,gBAAI,CAACo1B,gBAAgB,CAACQ,IAAjB,CAAsBL,QAAvB,IAAmC,CAACh4B,OAAO,CAAC0K,IAAR,CAAawtB,eAAb,CAA6BG,IAArE,EAA2E;AACzEr4B,cAAAA,OAAO,CAAC0K,IAAR,CAAawtB,eAAb,CAA6BG,IAA7B,GACE,IAAIr4B,OAAO,CAACs4B,kBAAZ,CAA+BT,gBAAgB,CAACQ,IAAhD,CADF;AAEAr4B,cAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,iCAAtB,EAAyDoB,uBAAzD;AACD;;AAED,gBAAI,CAACo1B,gBAAgB,CAACU,IAAjB,CAAsBP,QAAvB,IAAmC,CAACh4B,OAAO,CAAC0K,IAAR,CAAawtB,eAAb,CAA6BK,IAArE,EAA2E;AACzEv4B,cAAAA,OAAO,CAAC0K,IAAR,CAAawtB,eAAb,CAA6BK,IAA7B,GACE,IAAIv4B,OAAO,CAACw4B,kBAAZ,CAA+BX,gBAAgB,CAACU,IAAhD,CADF;AAEEv4B,cAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,iCAAtB,EAAyDoB,uBAAzD;AACH;;AAED,gBAAI,CAACo1B,gBAAgB,CAACI,cAAjB,CAAgCD,QAAjC,IAA6C,CAACh4B,OAAO,CAAC0K,IAAR,CAAawtB,eAAb,CAA6BD,cAA/E,EAA+F;AAC7Fj4B,cAAAA,OAAO,CAAC0K,IAAR,CAAawtB,eAAb,CAA6BD,cAA7B,GACE,IAAIj4B,OAAO,CAACy4B,2BAAZ,CAAwCZ,gBAAgB,CAACI,cAAzD,CADF;AAEAj4B,cAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,0CAAtB,EAAkEoB,uBAAlE;AACD;AACF,WAxBD;AAyBD,SA1BD;AA2BD,OA5BD;AA8BAi2B,MAAAA,wBAAwB;AACzB,KAxCD;;AA0CA,QAAIC,WAAW,GAAG,UAAUjqF,MAAV,EAAkBkqF,WAAlB,EAA+B;AAC/C;AACA;AACAlqF,MAAAA,MAAM,CAACmqF,QAAP,GAAkBnqF,MAAM,CAACmqF,QAAP,IAAmB,EAArC;AACAnqF,MAAAA,MAAM,CAACmqF,QAAP,CAAgBf,KAAhB,GAAwBppF,MAAM,CAACmqF,QAAP,CAAgBf,KAAhB,IAAyB,EAAjD;AACAppF,MAAAA,MAAM,CAACmqF,QAAP,CAAgBZ,cAAhB,GAAiCvpF,MAAM,CAACmqF,QAAP,CAAgBZ,cAAhB,IAAkC,EAAnE;AACAvpF,MAAAA,MAAM,CAACmqF,QAAP,CAAgBR,IAAhB,GAAuB3pF,MAAM,CAACmqF,QAAP,CAAgBR,IAAhB,IAAwB;AAAEL,QAAAA,QAAQ,EAAE;AAAZ,OAA/C;AACAtpF,MAAAA,MAAM,CAACmqF,QAAP,CAAgBN,IAAhB,GAAuB7pF,MAAM,CAACmqF,QAAP,CAAgBN,IAAhB,IAAwB;AAAEP,QAAAA,QAAQ,EAAE;AAAZ,OAA/C;;AAEA,UAAIY,WAAW,CAACE,SAAhB,EAA2B;AACzB,YAAIF,WAAW,CAACE,SAAZ,CAAsBC,eAA1B,EAA2C;AACzCrqF,UAAAA,MAAM,CAACmqF,QAAP,CAAgBf,KAAhB,CAAsBE,QAAtB,GAAiC,IAAjC;AACAtpF,UAAAA,MAAM,CAACmqF,QAAP,CAAgBZ,cAAhB,CAA+BD,QAA/B,GAA0C,IAA1C;AACD;;AAED,YAAIY,WAAW,CAACE,SAAZ,CAAsBf,WAA1B,EAAuC;AACrCrpF,UAAAA,MAAM,CAACmqF,QAAP,CAAgBf,KAAhB,CAAsBC,WAAtB,GAAoCa,WAAW,CAACE,SAAZ,CAAsBf,WAA1D;AACArpF,UAAAA,MAAM,CAACmqF,QAAP,CAAgBZ,cAAhB,CAA+BF,WAA/B,GAA6Ca,WAAW,CAACE,SAAZ,CAAsBf,WAAnE;AACD;AACF;;AAED,UAAIa,WAAW,CAACP,IAAhB,EAAsB;AACpB,YAAIO,WAAW,CAACP,IAAZ,CAAiBU,eAArB,EAAsC;AACpCrqF,UAAAA,MAAM,CAACmqF,QAAP,CAAgBR,IAAhB,CAAqBL,QAArB,GAAgC,IAAhC;AACD;;AAED,YAAIY,WAAW,CAACP,IAAZ,CAAiBN,WAArB,EAAkC;AAChCrpF,UAAAA,MAAM,CAACmqF,QAAP,CAAgBR,IAAhB,CAAqBN,WAArB,GAAmCa,WAAW,CAACP,IAAZ,CAAiBN,WAApD;AACD;AACF,OA7B8C,CA+B/C;;;AACA,UAAIa,WAAW,CAACC,QAAhB,EAA0B;AACxBnqF,QAAAA,MAAM,CAACmqF,QAAP,CAAgBf,KAAhB,GAAwB93B,OAAO,CAACl3D,KAAR,CAAc4F,MAAM,CAACmqF,QAAP,CAAgBf,KAA9B,EACtBc,WAAW,CAACC,QAAZ,CAAqBf,KAArB,IAA8B,EADR,CAAxB;AAEAppF,QAAAA,MAAM,CAACmqF,QAAP,CAAgBZ,cAAhB,GAAiCj4B,OAAO,CAACl3D,KAAR,CAAc4F,MAAM,CAACmqF,QAAP,CAAgBZ,cAA9B,EAC/BW,WAAW,CAACC,QAAZ,CAAqBf,KAArB,IAA8B,EADC,CAAjC;AAEAppF,QAAAA,MAAM,CAACmqF,QAAP,CAAgBR,IAAhB,GAAuBr4B,OAAO,CAACl3D,KAAR,CAAc4F,MAAM,CAACmqF,QAAP,CAAgBR,IAA9B,EACrBO,WAAW,CAACC,QAAZ,CAAqBR,IAArB,IAA6B,EADR,CAAvB;AAED;AACF,KAxCD,CA7CmD,CAuFnD;AACA;;;AACAM,IAAAA,WAAW,CAACjqF,MAAD,EAASA,MAAT,CAAX;;AAEA,QAAIsxD,OAAO,CAACwJ,QAAR,EAAJ,EAAwB;AACtB;AACA,UAAIiB,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,MAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAAC0F,SAAR,CAAkBszB,SAAhC,EAA2C,UAAUl5F,IAAV,EAAgB;AACzD,aAAKkuE,WAAL,GADyD,CAEzD;AACA;;AACA2qB,QAAAA,WAAW,CAACjqF,MAAD,EAAS5O,IAAT,CAAX;AACA83F,QAAAA,oBAAoB,CAAClpF,MAAM,CAACmqF,QAAR,CAApB;AACD,OAND;AAQD,KAXD,MAWO;AACLjB,MAAAA,oBAAoB,CAAClpF,MAAM,CAACmqF,QAAR,CAApB;AACD;AACF,GAzGD;;AA2GA,MAAIH,wBAAwB,GAAG,YAAW;AACxC,QAAIjuB,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAAC0N,mBAAR,CAA4B2O,iBAA1C,EAA6DD,eAA7D;AACD,GAHD;;AAKA,MAAIA,eAAe,GAAG,UAAUt8E,IAAV,EAAe;AACnC,QAAGkgE,OAAO,CAACr5D,IAAR,CAAaq5D,OAAO,CAAC0K,IAAR,CAAawtB,eAA1B,EAA2C76F,MAA3C,KAAsD,CAAtD,IAA2D,CAACyC,IAA5D,IAAoE,CAACA,IAAI,CAACk8E,QAA7E,EAAsF;AACpF;AACD;;AACD,QAAIA,QAAQ,GAAGl8E,IAAI,CAACk8E,QAApB;;AACA,SAAK,IAAIid,YAAT,IAAyBj5B,OAAO,CAAC0K,IAAR,CAAawtB,eAAtC,EAAuD;AACrDl4B,MAAAA,OAAO,CAAC0K,IAAR,CAAawtB,eAAb,CAA6Be,YAA7B,EAA2CC,eAA3C,CAA2Dld,QAA3D;AACD;;AAEDhc,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EAAqE;AACnEtvD,MAAAA,KAAK,EAAE0zC,OAAO,CAAC0N,mBAAR,CAA4BgO,qBADgC;AAEnE57E,MAAAA,IAAI,EAAE;AAAEk8E,QAAAA,QAAQ,EAAEA;AAAZ;AAF6D,KAArE;AAID,GAbD;;AAeAhc,EAAAA,OAAO,CAAC0K,IAAR,CAAayuB,oBAAb,GAAoC,UAAUzqB,QAAV,EAAoB;AACtD,QAAIhgE,MAAM,GAAGggE,QAAQ,IAAI,EAAzB;;AAEA,QAAI0qB,6BAA6B,GAAG,UAAUC,iBAAV,EAA6B;AAC/D,UAAIC,eAAe,GAAGt5B,OAAO,CAACl3D,KAAR,CAAc4F,MAAM,CAACoqF,SAAP,IAAoB,EAAlC,EAAsCO,iBAAtC,CAAtB;AAEAr5B,MAAAA,OAAO,CAAC31B,KAAR,CAAc,UAAUA,KAAV,EAAiB;AAC7B,YAAI,CAACA,KAAK,CAACqzC,qBAAN,CAA4B1d,OAAO,CAAC4Y,WAAR,CAAoB2gB,KAAhD,CAAL,EAA6D;AAC3D;AACD;;AACDlvD,QAAAA,KAAK,CAACyvC,SAAN,CAAgB,YAAY;AAC1B,cAAIz9B,GAAG,GAAG,IAAV;AAEA2jB,UAAAA,OAAO,CAACsF,QAAR,CAAiBtF,OAAO,CAACuF,YAAR,CAAqBvE,SAAtC,EAAiD,YAAY;AAC3D,gBAAI,CAAChB,OAAO,CAAC0K,IAAR,CAAa4sB,gBAAd,IAAkCjtD,KAAK,CAAC6zC,kBAAN,EAAtC,EAAkE;AAChE;AACAle,cAAAA,OAAO,CAACksB,YAAR,CAAqBlsB,OAAO,CAACuF,YAAR,CAAqBC,SAA1C;AACAxF,cAAAA,OAAO,CAAC0K,IAAR,CAAa4sB,gBAAb,GAAgC,IAAIt3B,OAAO,CAACw5B,gBAAZ,CAA6BF,eAA7B,CAAhC;AACAj9C,cAAAA,GAAG,CAAC2xB,WAAJ;AACD;AACF,WAPD;AAQD,SAXD;AAYD,OAhBD;AAiBD,KApBD;AAsBA;AACJ;AACA;AACA;;;AACI,QAAIhO,OAAO,CAACwJ,QAAR,MAAsB,CAAC96D,MAAM,CAAC+qF,oBAAlC,EAAwD;AACtD,UAAIhvB,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,MAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAAC0F,SAAR,CAAkBszB,SAAhC,EAA2C,UAAUl5F,IAAV,EAAgB;AACzD,YAAIA,IAAI,CAACg5F,SAAL,IAAkBh5F,IAAI,CAACg5F,SAAL,CAAeW,oBAArC,EAA2D;AACzD,eAAKzrB,WAAL;AACAorB,UAAAA,6BAA6B,CAACt5F,IAAI,CAACg5F,SAAN,CAA7B;AACD;;AACDY,QAAAA,0CAA0C,CAAC55F,IAAI,CAACg5F,SAAN,CAA1C;AACD,OAND;AAOD,KATD,MASO;AACLM,MAAAA,6BAA6B,CAAC1qF,MAAD,CAA7B;AACAgrF,MAAAA,0CAA0C,CAAChrF,MAAD,CAA1C;AACD;;AAEDsxD,IAAAA,OAAO,CAAC31B,KAAR,CAAc,UAAUA,KAAV,EAAiB;AAC7B;AACA,UAAIA,KAAK,CAAC6zC,kBAAN,MAA8B7zC,KAAK,CAACqzC,qBAAN,CAA4B1d,OAAO,CAAC4Y,WAAR,CAAoB2gB,KAAhD,CAAlC,EAA0F;AACxFv5B,QAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EACE;AACEtvD,UAAAA,KAAK,EAAE0zC,OAAO,CAAC0F,SAAR,CAAkBmW;AAD3B,SADF;AAID;AACF,KARD;;AAUA,aAAS6d,0CAAT,CAAoDL,iBAApD,EAAuE;AACrE,UAAIC,eAAe,GAAGt5B,OAAO,CAACl3D,KAAR,CAAc4F,MAAM,CAACoqF,SAAP,IAAoB,EAAlC,EAAsCO,iBAAtC,CAAtB,CADqE,CAGrE;;AACAr5B,MAAAA,OAAO,CAAC0K,IAAR,CAAa4uB,eAAb,GAA+BA,eAA/B;;AAEA,UAAIt5B,OAAO,CAACgI,gBAAR,EAAJ,EAAgC;AAC9B;AACA;AACAhI,QAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAAC0F,SAAR,CAAkBqJ,eAAxD,EAAyE,UAAUloC,GAAV,EAAe;AACtF,cAAIA,GAAG,CAAC/mC,IAAJ,IAAY+mC,GAAG,CAAC/mC,IAAJ,CAAS6rF,KAAT,KAAmB3rB,OAAO,CAACuF,YAAR,CAAqBvE,SAApD,IAAiEn6B,GAAG,CAAC/mC,IAAJ,CAAS65F,QAA1E,IAAuF9yD,GAAG,CAAC/mC,IAAJ,CAAS85F,QAAT,KAAsB55B,OAAO,CAAC0K,IAAR,CAAamvB,YAA9H,EAA6I;AAC3I,gBAAI75B,OAAO,CAAC0K,IAAR,CAAa4sB,gBAAjB,EAAmC;AACjCt3B,cAAAA,OAAO,CAAC0K,IAAR,CAAa4sB,gBAAb,CAA8BwC,gBAA9B,CAA+C9rB,WAA/C;AACA,qBAAOhO,OAAO,CAAC0K,IAAR,CAAa4sB,gBAApB;AACD;;AACD,gBAAIyC,eAAe,GAAG/5B,OAAO,CAAC0K,IAAR,CAAa+sB,2BAAb,EAAtB;;AACA,gBAAIsC,eAAJ,EAAqB;AACnBA,cAAAA,eAAe,CAACC,SAAhB,GAA4BxuE,OAA5B,CAAoC,UAASyuE,KAAT,EAAgB;AAAEA,gBAAAA,KAAK,CAAClyC,IAAN;AAAe,eAArE;AACAiY,cAAAA,OAAO,CAAC0K,IAAR,CAAagtB,2BAAb,CAAyC,IAAzC;AACD;AACF;AACF,SAZD,EAH8B,CAiB9B;AACA;;AACA13B,QAAAA,OAAO,CAAC0K,IAAR,CAAaC,WAAb,GAA2ByD,SAA3B,CAAqCpO,OAAO,CAACyN,gBAAR,CAAyBysB,sBAA9D,EAAsF,YAAY;AAChGl6B,UAAAA,OAAO,CAACsF,QAAR,CAAiBtF,OAAO,CAACuF,YAAR,CAAqBvE,SAAtC,EAAiD,YAAY;AAC3D,gBAAIhB,OAAO,CAAC0K,IAAR,CAAa4sB,gBAAjB,EAAmC;AACjCt3B,cAAAA,OAAO,CAAC0K,IAAR,CAAa4sB,gBAAb,CAA8BjQ,YAA9B;AACD;AACF,WAJD,EAIG,YAAY;AACbrnB,YAAAA,OAAO,CAACksB,YAAR,CAAqBlsB,OAAO,CAACuF,YAAR,CAAqBvE,SAA1C,EAAqD,YAAY;AAC/DhB,cAAAA,OAAO,CAAC31B,KAAR,CAAc,UAAUA,KAAV,EAAiB;AAC7B,oBAAI,CAAC21B,OAAO,CAAC0K,IAAR,CAAa4sB,gBAAd,IAAkCjtD,KAAK,CAAC6zC,kBAAN,EAAtC,EAAkE;AAChEle,kBAAAA,OAAO,CAACksB,YAAR,CAAqBlsB,OAAO,CAACuF,YAAR,CAAqBC,SAA1C;AACAxF,kBAAAA,OAAO,CAAC0K,IAAR,CAAa4sB,gBAAb,GAAgC,IAAIt3B,OAAO,CAACw5B,gBAAZ,CAA6BF,eAA7B,CAAhC;AACAt5B,kBAAAA,OAAO,CAAC0K,IAAR,CAAa4sB,gBAAb,CAA8BjQ,YAA9B;AACD;AACF,eAND;AAOD,aARD;AASD,WAdD;AAeD,SAhBD,EAnB8B,CAqC9B;;AACArnB,QAAAA,OAAO,CAACqd,OAAR,CAAgB,UAAUzgF,CAAV,EAAa;AAC3BojE,UAAAA,OAAO,CAAC31B,KAAR,CAAc,UAAUA,KAAV,EAAiB;AAC7BztC,YAAAA,CAAC,CAACk9E,SAAF,CAAY,UAAUuD,OAAV,EAAmB;AAC7B,kBACErd,OAAO,CAAC0J,qBAAR,MACAjF,QAAQ,CAAC01B,eAAT,KAA6B,SAD7B,KAEC9c,OAAO,CAACX,SAAR,GAAoBxoE,IAApB,KAA6B8rD,OAAO,CAACwY,iBAAR,CAA0BJ,UAAvD,IAAqEiF,OAAO,CAACX,SAAR,GAAoBxoE,IAApB,KAA6B8rD,OAAO,CAACwY,iBAAR,CAA0BgI,QAF7H,CADF,EAIE;AACA,oBAAI4Z,cAAc,GAAG/c,OAAO,CAACgG,eAAR,MAA6B,CAAChG,OAAO,CAACqG,SAAR,EAAnD;AACA,oBAAI2W,mBAAmB,GAAGhd,OAAO,CAACgG,eAAR,MAA6Bh5C,KAAK,CAAC2yC,gBAAN,GAAyB/H,mBAAhF;AACA,oBAAIqlB,gBAAgB,GAAGjd,OAAO,CAACC,OAAR,OAAsBtd,OAAO,CAAC0Y,WAAR,CAAoB6hB,cAAjE;;AACA,oBAAIH,cAAc,IAAIC,mBAAlB,IAAyCC,gBAA7C,EAA+D;AAC7Dt6B,kBAAAA,OAAO,CAAC0K,IAAR,CAAaqZ,+BAAb;AACD;AACF;AACF,aAbD;AAcD,WAfD;AAgBD,SAjBD;AAkBD;AACF;AACF,GArHD,CAxSW,CA+ZX;AACA;;;AACA/jB,EAAAA,OAAO,CAAC0K,IAAR,CAAaqZ,+BAAb,GAA+C,YAAY;AACzD,QAAI0V,oBAAoB,GAAGz5B,OAAO,CAAC0K,IAAR,CAAa4uB,eAAb,IAAgCt5B,OAAO,CAAC0K,IAAR,CAAa4uB,eAAb,CAA6BG,oBAAxF;;AACA,QAAIz5B,OAAO,CAACmN,KAAR,EAAJ,EAAqB;AACnB,UAAIssB,oBAAJ,EAA0B;AACxB;AACAz5B,QAAAA,OAAO,CAAC0K,IAAR,CAAaC,WAAb,GAA2BC,OAA3B,CAAmC5K,OAAO,CAACyN,gBAAR,CAAyBysB,sBAA5D;AACD,OAHD,MAGO;AACL,YAAIl6B,OAAO,CAACwJ,QAAR,EAAJ,EAAwB;AACtB;AACAxJ,UAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2BlH,cAA3B,CAA0ClG,OAAO,CAACyN,gBAAR,CAAyBysB,sBAAnE;AACD,SAHD,MAGO;AACL;AACAl6B,UAAAA,OAAO,CAAC0K,IAAR,CAAaC,WAAb,GAA2BC,OAA3B,CAAmC5K,OAAO,CAACyN,gBAAR,CAAyBysB,sBAA5D;AACD;AACF;AACF,KAbD,MAaO;AACL,UAAIT,oBAAJ,EAA0B;AACxB;AACAz5B,QAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAACyN,gBAAR,CAAyBysB,sBAAjE;AACD,OAHD,MAGO;AACL;AACAl6B,QAAAA,OAAO,CAAC0K,IAAR,CAAaC,WAAb,GAA2BC,OAA3B,CAAmC5K,OAAO,CAACyN,gBAAR,CAAyBysB,sBAA5D;AACD;AACF;AACF,GAxBD;;AA0BAl6B,EAAAA,OAAO,CAAC0K,IAAR,CAAa8vB,eAAb,GAA+B,UAAU9rF,MAAV,EAAkB;AAC/CsxD,IAAAA,OAAO,CAACgH,aAAR,CAAsBt4D,MAAtB,EAA8B,QAA9B;;AAEA,QAAIsxD,OAAO,CAACwJ,QAAR,EAAJ,EAAwB;AACtB;AACA,UAAIiB,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,MAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAAC0F,SAAR,CAAkBszB,SAAhC,EAA2C,UAAUl5F,IAAV,EAAgB;AACzDkgE,QAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EACE;AACEtvD,UAAAA,KAAK,EAAE0zC,OAAO,CAAC0N,mBAAR,CAA4BsrB,SADrC;AAEEl5F,UAAAA,IAAI,EAAEA;AAFR,SADF;AAKD,OAND;AAQD;AACF,GAfD,CA3bW,CA4cX;;;AACAkgE,EAAAA,OAAO,CAAC0K,IAAR,CAAa+vB,SAAb,GAAyB,UAAUtxF,QAAV,EAAoB;AAC3C,QAAI5C,OAAO,GAAG;AACZW,MAAAA,WAAW,EAAE;AADD,KAAd;AAIA,QAAIwzF,iBAAiB,GAAGvxF,QAAxB;;AACA,QAAI,CAACuxF,iBAAL,EAAwB;AACtBA,MAAAA,iBAAiB,GAAG16B,OAAO,CAAC0K,IAAR,CAAaiwB,cAAb,KAChB3E,yBADgB,GAEhBD,kBAFJ;AAGD;;AACD,WAAO/1B,OAAO,CAAC4J,KAAR,CAAc8wB,iBAAd,EAAiCn0F,OAAjC,EAA0C0vF,wBAA1C,EAAoEC,mBAApE,CAAP;AACD,GAZD;AAcA;AACF;AACA;AACA;;;AACEl2B,EAAAA,OAAO,CAAC0K,IAAR,CAAakwB,kBAAb,GAAkC,UAAUtnB,SAAV,EAAqBnqE,QAArB,EAA+B;AAC/D62D,IAAAA,OAAO,CAAC0C,MAAR,GAAiBpB,IAAjB,CAAsB,+DAAtB;;AACA,QAAI,CAACtB,OAAO,CAACwJ,QAAR,EAAL,EAAyB;AACvB,aAAOx+D,OAAO,CAACpD,OAAR,EAAP;AACD;;AACD,QAAIrB,OAAO,GAAG;AACZsQ,MAAAA,OAAO,EAAE;AACP,wBAAgBy8D;AADT;AADG,KAAd;AAKA,QAAIunB,0BAA0B,GAAG,IAAjC;;AACA,QAAI1xF,QAAJ,EAAa;AACX0xF,MAAAA,0BAA0B,GAAG1xF,QAA7B;AACD,KAFD,MAGK;AACH0xF,MAAAA,0BAA0B,GAAG76B,OAAO,CAAC0K,IAAR,CAAaiwB,cAAb,KACzBxE,mCADyB,GAEzBC,4BAFJ;AAGD;;AAED,WAAOp2B,OAAO,CAAC4J,KAAR,CAAcixB,0BAAd,EAA0Ct0F,OAA1C,EAAmD8vF,kCAAnD,EAAuFC,6BAAvF,EAAsHtsB,IAAtH,CAA2H,UAAUvzD,QAAV,EAAoB;AACpJ,UAAIqkF,SAAS,GAAGlE,cAAc,CAACrkF,MAAM,CAACkyD,QAAP,CAAgBs2B,QAAjB,CAA9B;AACA,UAAIC,SAAS,GAAGvkF,QAAQ,CAACwkF,kBAAT,CAA4BC,IAA5B,CAAiC,UAAUz/B,MAAV,EAAkB;AACjE,eAAOq/B,SAAS,KAAKlE,cAAc,CAACn7B,MAAD,CAAnC;AACD,OAFe,CAAhB;AAGA,aAAOu/B,SAAS,GAAGhwF,OAAO,CAACpD,OAAR,EAAH,GAAuBoD,OAAO,CAACowB,MAAR,EAAvC;AACD,KANM,CAAP;AAOD,GA3BD;AA6BA;AACF;AACA;AACA;;;AACE4kC,EAAAA,OAAO,CAAC0K,IAAR,CAAaiwB,cAAb,GAA8B,UAASl1F,GAAT,EAAc;AAC1CA,IAAAA,GAAG,GAAGA,GAAG,IAAI8M,MAAM,CAACyW,QAAP,CAAgBjC,IAA7B;AACA,WAAOthB,GAAG,CAACkzC,QAAJ,CAAa,cAAb,CAAP;AACD,GAHD;AAMA;AACF;AACA;AACA;;;AACEqnB,EAAAA,OAAO,CAAC0K,IAAR,CAAaywB,gBAAb,GAAgC,UAAUzsF,MAAV,EAAkB;AAChDsxD,IAAAA,OAAO,CAAC0K,IAAR,CAAamsB,mBAAb;;AACA,QAAI72B,OAAO,CAAC0K,IAAR,CAAa4O,WAAjB,EAA8B;AAC5B;AACD;;AACDtZ,IAAAA,OAAO,CAACgH,aAAR,CAAsBt4D,MAAtB,EAA8B,QAA9B;AAEA,QAAI0sF,eAAe,GAAGp7B,OAAO,CAACgH,aAAR,CAAsBt4D,MAAM,CAAC0sF,eAA7B,EAA8C,wBAA9C,CAAtB;AACA,QAAI9nB,SAAS,GAAGtT,OAAO,CAACgH,aAAR,CAAsBt4D,MAAM,CAAC4kE,SAA7B,EAAwC,kBAAxC,CAAhB;AACA,QAAI+nB,YAAY,GAAGr7B,OAAO,CAACgH,aAAR,CAAsBt4D,MAAM,CAAC2sF,YAA7B,EAA2C,qBAA3C,CAAnB;AACA,QAAIC,mBAAmB,GAAGt7B,OAAO,CAACgH,aAAR,CAAsBt4D,MAAM,CAAC4sF,mBAA7B,EAAkD,4BAAlD,CAA1B;AACA,QAAIvyF,MAAM,GAAGi3D,OAAO,CAACgH,aAAR,CAAsBt4D,MAAM,CAAC3F,MAA7B,EAAqC,eAArC,CAAb;AACA,QAAII,QAAQ,GAAGuF,MAAM,CAACvF,QAAP,IAAmB,IAAlC;AACA,QAAIuxF,iBAAiB,GAAGhsF,MAAM,CAACgsF,iBAA/B;;AACA,QAAI,CAACA,iBAAL,EAAwB;AACtBA,MAAAA,iBAAiB,GAAG16B,OAAO,CAAC0K,IAAR,CAAaiwB,cAAb,KAChB3E,yBADgB,GAEhBD,kBAFJ;AAGD;;AACD,QAAIoB,gBAAgB,GAAGzoF,MAAM,CAACyoF,gBAAP,IAA2B,IAAlD;AACA,QAAI9jB,cAAc,GAAG3kE,MAAM,CAAC2kE,cAAP,IAAyB,IAA9C;;AAEA,QAAI;AACF;AACArT,MAAAA,OAAO,CAAC0K,IAAR,CAAaosB,QAAb,GAAwB,IAAI92B,OAAO,CAACyO,QAAZ,CAAqB;AAAEE,QAAAA,SAAS,EAAE;AAAb,OAArB,CAAxB;AACA3O,MAAAA,OAAO,CAAC0K,IAAR,CAAaqsB,iBAAb,GAAiC,IAAIC,iBAAJ,CAAsBh3B,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAtB,CAAjC;AACA3K,MAAAA,OAAO,CAAC0K,IAAR,CAAa2b,YAAb,GAA4B,IAAIrmB,OAAO,CAACu7B,YAAZ,CAAyB7sF,MAAzB,CAA5B,CAJE,CAMF;;AACA,UAAI8sF,MAAM,GAAG,IAAIC,YAAJ,CAAiBL,eAAjB,EAAkC,qBAAlC,CAAb;AACA,UAAIn2B,OAAO,GAAG,IAAIjF,OAAO,CAACwQ,OAAZ,CAAoB,4BAApB,EACZ,IAAIxQ,OAAO,CAAC+P,UAAZ,CAAuByrB,MAAM,CAACj2E,IAA9B,CADY,EAEZ,IAAIy6C,OAAO,CAAC4P,cAAZ,CAA2Br9D,MAA3B,EAAmCmpF,MAAnC,CAFY,CAAd,CARE,CAYF;;AACA17B,MAAAA,OAAO,CAAC0K,IAAR,CAAa+F,QAAb,GAAwBxL,OAAxB;AACAjF,MAAAA,OAAO,CAAC0K,IAAR,CAAaixB,iBAAb,GAAiC,IAAIC,iBAAJ,EAAjC,CAdE,CAgBF;;AACAhnD,MAAAA,MAAM,CAACinD,QAAP,GAAkB,YAAY;AAC5B52B,QAAAA,OAAO,CAACQ,YAAR,CAAqBzF,OAAO,CAAC0F,SAAR,CAAkBo2B,KAAvC;AACAN,QAAAA,MAAM,CAACj2E,IAAP,CAAY0tC,KAAZ;AACD,OAHD;;AAKA+M,MAAAA,OAAO,CAAC0C,MAAR,GAAiBsC,uBAAjB,CAAyCC,OAAzC;AACAjF,MAAAA,OAAO,CAAC0C,MAAR,GAAiBiD,oCAAjB,GAvBE,CAwBF;;AACAV,MAAAA,OAAO,CAAC8L,aAAR,CAAsB/Q,OAAO,CAAC0K,IAAR,CAAaC,WAAb,GAA2B0E,MAA3B,EAAtB,EAzBE,CA0BF;;AACApK,MAAAA,OAAO,CAAC8L,aAAR,CAAsB9L,OAAO,CAACmM,cAAR,EAAtB;;AAEA,UAAIpR,OAAO,CAACwJ,QAAR,EAAJ,EAAwB;AACtB;AACAvE,QAAAA,OAAO,CAACgM,eAAR,CAAwBjR,OAAO,CAAC0K,IAAR,CAAaC,WAAb,GAA2B0E,MAA3B,EAAxB,EAFsB,CAGtB;;AACApK,QAAAA,OAAO,CAACgM,eAAR,CAAwBhM,OAAO,CAACkM,YAAR,EAAxB;AACD,OAlCC,CAmCF;;;AACAlM,MAAAA,OAAO,CAACQ,YAAR,CAAqBzF,OAAO,CAAC0F,SAAR,CAAkBszB,SAAvC,EAAkD;AAChD1lB,QAAAA,SAAS,EAAEA,SADqC;AAEhDgoB,QAAAA,mBAAmB,EAAEA,mBAF2B;AAGhDnyF,QAAAA,QAAQ,EAAEA,QAHsC;AAIhDkyF,QAAAA,YAAY,EAAEA,YAJkC;AAKhDtyF,QAAAA,MAAM,EAAEA,MALwC;AAMhD2xF,QAAAA,iBAAiB,EAAEA,iBAN6B;AAOhDvD,QAAAA,gBAAgB,EAAEA,gBAP8B;AAQhD9jB,QAAAA,cAAc,EAAEA;AARgC,OAAlD;AAWApO,MAAAA,OAAO,CAAC6L,UAAR,CAAmB9Q,OAAO,CAAC0F,SAAR,CAAkBq2B,WAArC,EAAkD,UAAUj8F,IAAV,EAAgB;AAChEkgE,QAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,0CAAtB,EAAkEoB,uBAAlE;AACAzC,QAAAA,OAAO,CAAC0K,IAAR,CAAa4O,WAAb,GAA2B,IAA3B;AACAtZ,QAAAA,OAAO,CAAC0K,IAAR,CAAamvB,YAAb,GAA4B/5F,IAAI,CAAC4P,EAAjC;AACA,aAAKs+D,WAAL;AACD,OALD,EA/CE,CAqDF;;AACA/I,MAAAA,OAAO,CAAC6L,UAAR,CAAmB9Q,OAAO,CAAC0F,SAAR,CAAkBhF,GAArC,EAA0C,UAAU+C,QAAV,EAAoB;AAC5D,YAAIA,QAAQ,CAAC3B,QAAT,KAAsB9B,OAAO,CAAC0C,MAAR,GAAiBgB,WAAjB,EAA1B,EAA0D;AACxD1D,UAAAA,OAAO,CAAC0C,MAAR,GAAiBiB,WAAjB,CAA6B3D,OAAO,CAAC4B,QAAR,CAAiB5rB,UAAjB,CAA4BytB,QAA5B,CAA7B;AACD;AACF,OAJD;AAKAwB,MAAAA,OAAO,CAAC6L,UAAR,CAAmB9Q,OAAO,CAAC0F,SAAR,CAAkBS,yBAArC,EAAgE,UAAU1C,QAAV,EAAoB;AAClF,YAAIA,QAAQ,CAAC3B,QAAT,KAAsB9B,OAAO,CAAC0C,MAAR,GAAiBgB,WAAjB,EAA1B,EAA0D;AACxD1D,UAAAA,OAAO,CAAC0C,MAAR,GAAiBkB,4BAAjB,CAA8C5D,OAAO,CAAC4B,QAAR,CAAiB5rB,UAAjB,CAA4BytB,QAA5B,CAA9C;AACD;AACF,OAJD,EA3DE,CAgEF;;AACAwB,MAAAA,OAAO,CAAC6L,UAAR,CAAmB9Q,OAAO,CAAC0F,SAAR,CAAkBs2B,SAArC,EAAgD,UAAUv4B,QAAV,EAAoB;AAClEz6C,QAAAA,QAAQ,CAACizE,MAAT;AACD,OAFD;AAIAh3B,MAAAA,OAAO,CAAC6L,UAAR,CAAmB9Q,OAAO,CAAC0F,SAAR,CAAkBw2B,qBAArC,EAA4D,UAAUp8F,IAAV,EAAgB;AAC1EkgE,QAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,uCAAuCvhE,IAAI,CAACzC,MAAlE;AACA2iE,QAAAA,OAAO,CAAC2J,qBAAR,GAAgC7pE,IAAI,CAACzC,MAArC;AACD,OAHD;AAKA2iE,MAAAA,OAAO,CAAC0K,IAAR,CAAaxzD,MAAb,GAAsB,IAAI8oD,OAAO,CAAC+S,qBAAZ,CAAkC9N,OAAlC,CAAtB;AACAjF,MAAAA,OAAO,CAAC0K,IAAR,CAAaohB,YAAb,GAA4B,IAAI9rB,OAAO,CAACkT,2BAAZ,CAAwCjO,OAAxC,CAA5B,CA3EE,CA6EF;;AACAjF,MAAAA,OAAO,CAAC0K,IAAR,CAAaC,WAAb,GAA2ByD,SAA3B,CAAqCpO,OAAO,CAAC0F,SAAR,CAAkBy2B,SAAvD,EACEl3B,OAAO,CAACkM,YAAR,EADF,EA9EE,CAiFF;AACA;;AACAnR,MAAAA,OAAO,CAAC0K,IAAR,CAAaC,WAAb,GAA2ByD,SAA3B,CAAqCpO,OAAO,CAAC0F,SAAR,CAAkB02B,UAAvD,EAAmE,YAAY;AAC7E7pF,QAAAA,MAAM,CAACyW,QAAP,CAAgBizE,MAAhB,CAAuB,IAAvB;AACD,OAFD;AAIAT,MAAAA,MAAM,CAACj2E,IAAP,CAAY+oB,KAAZ,GAvFE,CAyFF;;AACA,UAAI+tD,EAAE,GAAGr8B,OAAO,CAAC0K,IAAR,CAAa4xB,sBAAb,EAAT;AACAD,MAAAA,EAAE,CAACjwB,iBAAH;AAED,KA7FD,CA6FE,OAAO9vE,CAAP,EAAU;AACV0jE,MAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,yDAAvB,EACGqhE,aADH,CACiB/lE,CADjB,EACoBmmE,uBADpB;AAED;AACF,GAvHD;AAyHA;AACF;AACA;AACA;;;AACEzC,EAAAA,OAAO,CAAC0K,IAAR,CAAa6xB,OAAb,GAAuB,UAAUC,YAAV,EAAwB9tB,QAAxB,EAAkC;AACvD1O,IAAAA,OAAO,CAAC0K,IAAR,CAAamsB,mBAAb;;AACA,QAAI72B,OAAO,CAAC0K,IAAR,CAAa4O,WAAjB,EAA8B;AAC5B;AACD,KAJsD,CAMvD;AACA;;;AACA,QAAI5qE,MAAM,GAAG,EAAb;;AACA,QAAI,OAAQggE,QAAR,KAAsB,QAA1B,EAAoC;AAClChgE,MAAAA,MAAM,CAACgoF,MAAP,GAAgBhoB,QAAhB;AACD,KAFD,MAEO;AACLhgE,MAAAA,MAAM,GAAGggE,QAAT;AACD;;AAED1O,IAAAA,OAAO,CAACgH,aAAR,CAAsBw1B,YAAtB,EAAoC,cAApC;AACAx8B,IAAAA,OAAO,CAACgH,aAAR,CAAsBt4D,MAAM,CAACgoF,MAA7B,EAAqC,eAArC,EAhBuD,CAkBvD;;AACA,QAAInlB,MAAM,GAAG9M,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAb;AACA6M,IAAAA,MAAM,CAAC1zB,GAAP,GAAanvC,MAAM,CAACgoF,MAApB;AACAnlB,IAAAA,MAAM,CAACkrB,KAAP,GAAe,sBAAf;AACAlrB,IAAAA,MAAM,CAAC/X,KAAP,GAAe,2BAAf;AACAgjC,IAAAA,YAAY,CAAC33B,WAAb,CAAyB0M,MAAzB,EAvBuD,CAyBvD;AACA;AACA;;AACAvR,IAAAA,OAAO,CAAC0K,IAAR,CAAaosB,QAAb,GAAwB,IAAI92B,OAAO,CAACyO,QAAZ,CAAqB;AAAEE,MAAAA,SAAS,EAAE;AAAb,KAArB,CAAxB;AACA3O,IAAAA,OAAO,CAAC0K,IAAR,CAAaqsB,iBAAb,GAAiC,IAAIC,iBAAJ,CAAsBh3B,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAtB,CAAjC;AACA3K,IAAAA,OAAO,CAAC0K,IAAR,CAAa2b,YAAb,GAA4B,IAAIrmB,OAAO,CAACu7B,YAAZ,CAAyB7sF,MAAzB,CAA5B,CA9BuD,CAgCvD;;AACA,QAAIu2D,OAAO,GAAG,IAAIjF,OAAO,CAACsR,aAAZ,CAA0B5iE,MAAM,CAACgoF,MAAjC,EAAyCnkF,MAAzC,EAAiDg/D,MAAjD,CAAd,CAjCuD,CAmCvD;;AACAA,IAAAA,MAAM,CAAChlC,MAAP,GAAgBjpB,UAAU,CAAC,YAAW;AACpC,UAAIk2C,KAAK,GAAGjnD,MAAM,CAACmqF,gBAAP,CAAwBnrB,MAAxB,EAAgC,IAAhC,CAAZ;AACA,UAAIzxE,IAAI,GAAG;AACT68F,QAAAA,OAAO,EAAEnjC,KAAK,CAACmjC,OADN;AAETC,QAAAA,WAAW,EAAErrB,MAAM,CAACqrB,WAFX;AAGTC,QAAAA,YAAY,EAAEtrB,MAAM,CAACsrB,YAHZ;AAITC,QAAAA,iBAAiB,EAAEvrB,MAAM,CAACwrB,cAAP,GAAwB1/F;AAJlC,OAAX;AAMA4nE,MAAAA,OAAO,CAACQ,YAAR,CAAqBzF,OAAO,CAAC0F,SAAR,CAAkBs3B,YAAvC,EAAqDl9F,IAArD;AACD,KATyB,EASvB,KATuB,CAA1B,CApCuD,CA+CvD;;AACAkgE,IAAAA,OAAO,CAAC0K,IAAR,CAAa+F,QAAb,GAAwBxL,OAAxB,CAhDuD,CAkDvD;;AACAjF,IAAAA,OAAO,CAAC0K,IAAR,CAAaixB,iBAAb,GAAiC,IAAIC,iBAAJ,EAAjC;AAEA32B,IAAAA,OAAO,CAAC8L,aAAR,CAAsB/Q,OAAO,CAAC0K,IAAR,CAAaC,WAAb,GAA2B0E,MAA3B,EAAtB,EArDuD,CAuDvD;;AACArP,IAAAA,OAAO,CAAC0K,IAAR,CAAa6sB,gBAAb,GAAgC,IAAI0F,gBAAJ,CAAqBh4B,OAArB,EAC9BjF,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAD8B,EAE9Bj8D,MAAM,CAACwuF,aAAP,IAAwBzH,eAFM,EAG9B/mF,MAAM,CAACyuF,aAAP,IAAwBzH,eAHM,CAAhC;AAKA11B,IAAAA,OAAO,CAAC0K,IAAR,CAAa0yB,qBAAb,GAAqC,IAArC,CA7DuD,CA+DvD;;AACAp9B,IAAAA,OAAO,CAAC0K,IAAR,CAAa2yB,sBAAb,GAAsCzoD,MAAM,CAACtxB,UAAP,CAAkB,YAAY;AAClE08C,MAAAA,OAAO,CAAC0K,IAAR,CAAa2yB,sBAAb,GAAsC,IAAtC;AACAr9B,MAAAA,OAAO,CAAC0K,IAAR,CAAaC,WAAb,GAA2BC,OAA3B,CAAmC5K,OAAO,CAAC0F,SAAR,CAAkB43B,WAArD;AACD,KAHqC,EAGnC5uF,MAAM,CAAC6uF,cAAP,IAAyB5H,gBAHU,CAAtC,CAhEuD,CAqEvD;AACA;;AACA1wB,IAAAA,OAAO,CAAC6L,UAAR,CAAmB9Q,OAAO,CAAC0F,SAAR,CAAkBq2B,WAArC,EAAkD,UAAUj8F,IAAV,EAAgB;AAChEkgE,MAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,0BAAtB,EAAkDoB,uBAAlD;AACAzC,MAAAA,OAAO,CAAC0K,IAAR,CAAaxzD,MAAb,GAAsB,IAAI8oD,OAAO,CAAC+S,qBAAZ,CAAkC9N,OAAlC,CAAtB;AACAjF,MAAAA,OAAO,CAAC0K,IAAR,CAAaohB,YAAb,GAA4B,IAAI9rB,OAAO,CAACkT,2BAAZ,CAAwCjO,OAAxC,CAA5B;AACAjF,MAAAA,OAAO,CAAC0K,IAAR,CAAamvB,YAAb,GAA4B/5F,IAAI,CAAC4P,EAAjC;;AAEA,UAAIhB,MAAM,CAACoqF,SAAP,IAAoBpqF,MAAM,CAAC2pF,IAA3B,IAAmC3pF,MAAM,CAAC8uF,WAA9C,EAA2D;AACzD;AACA;AACAv4B,QAAAA,OAAO,CAACQ,YAAR,CAAqBzF,OAAO,CAAC0F,SAAR,CAAkBszB,SAAvC,EAAkD;AAChDF,UAAAA,SAAS,EAAEpqF,MAAM,CAACoqF,SAD8B;AAEhDT,UAAAA,IAAI,EAAE3pF,MAAM,CAAC2pF,IAFmC;AAGhDmF,UAAAA,WAAW,EAAE9uF,MAAM,CAAC8uF;AAH4B,SAAlD;AAKD;;AAED,UAAIx9B,OAAO,CAAC0K,IAAR,CAAa2yB,sBAAjB,EAAyC;AACvCzoD,QAAAA,MAAM,CAACiZ,YAAP,CAAoBmS,OAAO,CAAC0K,IAAR,CAAa2yB,sBAAjC;AACAr9B,QAAAA,OAAO,CAAC0K,IAAR,CAAa2yB,sBAAb,GAAsC,IAAtC;AACD;;AAEDr9B,MAAAA,OAAO,CAAC0K,IAAR,CAAa6sB,gBAAb,CAA8BjpD,KAA9B;AACA,WAAK0/B,WAAL;AAEAhO,MAAAA,OAAO,CAAC0K,IAAR,CAAa4O,WAAb,GAA2B,IAA3B;AACAtZ,MAAAA,OAAO,CAAC0K,IAAR,CAAaC,WAAb,GAA2BC,OAA3B,CAAmC5K,OAAO,CAAC0F,SAAR,CAAkBnkE,IAArD;AACD,KA1BD,EAvEuD,CAmGvD;;AACA0jE,IAAAA,OAAO,CAAC6L,UAAR,CAAmB9Q,OAAO,CAAC0F,SAAR,CAAkBhF,GAArC,EAA0C,UAAU+C,QAAV,EAAoB;AAC5D,UAAIA,QAAQ,CAAC3B,QAAT,KAAsB9B,OAAO,CAAC0C,MAAR,GAAiBgB,WAAjB,EAA1B,EAA0D;AACxD1D,QAAAA,OAAO,CAAC0C,MAAR,GAAiBiB,WAAjB,CAA6B3D,OAAO,CAAC4B,QAAR,CAAiB5rB,UAAjB,CAA4BytB,QAA5B,CAA7B;AACD;AACF,KAJD;AAKAwB,IAAAA,OAAO,CAAC6L,UAAR,CAAmB9Q,OAAO,CAAC0F,SAAR,CAAkBS,yBAArC,EAAgE,UAAU1C,QAAV,EAAoB;AAClF,UAAIA,QAAQ,CAAC3B,QAAT,KAAsB9B,OAAO,CAAC0C,MAAR,GAAiBgB,WAAjB,EAA1B,EAA0D;AACxD1D,QAAAA,OAAO,CAAC0C,MAAR,GAAiBkB,4BAAjB,CAA8C5D,OAAO,CAAC4B,QAAR,CAAiB5rB,UAAjB,CAA4BytB,QAA5B,CAA9C;AACD;AACF,KAJD,EAzGuD,CA+GvD;;AACAzD,IAAAA,OAAO,CAAC0K,IAAR,CAAaC,WAAb,GAA2ByD,SAA3B,CAAqCpO,OAAO,CAAC0F,SAAR,CAAkB43B,WAAvD,EAAoE,YAAY;AAC9E;AACA,UAAI5uF,MAAM,CAAC+uF,UAAP,KAAsB,KAA1B,EAAiC;AAC/B,YAAI;AACF,cAAIjH,QAAQ,GAAGG,WAAW,CAACjoF,MAAD,CAA1B;AACAsxD,UAAAA,OAAO,CAAC0C,MAAR,GAAiBpB,IAAjB,CAAsB,6EAAtB,EAAqGmB,uBAArG,GAFE,CAGF;;AACA,cAAI/zD,MAAM,CAAC8nF,QAAX,EAAqB;AAClBx2B,YAAAA,OAAO,CAAC0K,IAAR,CAAagzB,eAAb,GAA+Bx1F,KAA/B,CAAqC83D,OAAO,CAACuF,YAAR,CAAqBo4B,WAA1D;AACF;;AACD39B,UAAAA,OAAO,CAAC0K,IAAR,CAAakzB,WAAb,GAA2B59B,OAAO,CAAC0K,IAAR,CAAagzB,eAAb,GAA+B91E,IAA/B,CAAoC4uE,QAApC,EAA8Cx2B,OAAO,CAACuF,YAAR,CAAqBo4B,WAAnE,EAAgFjvF,MAAM,CAACmvF,YAAvF,CAA3B;AAED,SATD,CASE,OAAOvhG,CAAP,EAAU;AACV0jE,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,iEAAvB,EAA0FqhE,aAA1F,CAAwG/lE,CAAxG,EAA2GmmE,uBAA3G;AACD;AACF;;AAED,UAAIzC,OAAO,CAAC0K,IAAR,CAAa0yB,qBAAb,IAAsC,IAA1C,EAAgD;AAC9Cp9B,QAAAA,OAAO,CAAC0K,IAAR,CAAa0yB,qBAAb,GAAqC7qF,MAAM,CAACwgD,WAAP,CAAmB,YAAY;AAClEwe,UAAAA,MAAM,CAAC1zB,GAAP,GAAanvC,MAAM,CAACgoF,MAApB;AACD,SAFoC,EAElCd,2BAFkC,CAArC;AAIA3wB,QAAAA,OAAO,CAAC6L,UAAR,CAAmB9Q,OAAO,CAAC0F,SAAR,CAAkBq2B,WAArC,EAAkD,YAAY;AAC5D,eAAK/tB,WAAL;AACAp5B,UAAAA,MAAM,CAACoe,aAAP,CAAqBgN,OAAO,CAAC0K,IAAR,CAAa0yB,qBAAlC;AACAp9B,UAAAA,OAAO,CAAC0K,IAAR,CAAa0yB,qBAAb,GAAqC,IAArC;AACAp9B,UAAAA,OAAO,CAAC0K,IAAR,CAAagzB,eAAb,GAA+Bx1F,KAA/B,CAAqC83D,OAAO,CAACuF,YAAR,CAAqBo4B,WAA1D;;AACF,cAAI,CAACjvF,MAAM,CAACovF,mBAAP,IAA+BpvF,MAAM,CAACmvF,YAAP,IAAuBnvF,MAAM,CAACmvF,YAAP,CAAoBE,SAA3E,KACE/9B,OAAO,CAAC0K,IAAR,CAAakzB,WADnB,EACgC;AAC5B59B,YAAAA,OAAO,CAAC0K,IAAR,CAAakzB,WAAb,CAAyB3qC,KAAzB;AACA+M,YAAAA,OAAO,CAAC0K,IAAR,CAAakzB,WAAb,GAA2B,IAA3B;AACD;AACF,SAVD;AAWD;AACF,KAlCD;;AAoCA,QAAIlvF,MAAM,CAACsvF,aAAX,EAA0B;AACxBh+B,MAAAA,OAAO,CAAC0K,IAAR,CAAaszB,aAAb,CAA2BtvF,MAAM,CAACsvF,aAAlC;AACD;;AAED/4B,IAAAA,OAAO,CAAC6L,UAAR,CAAmB9Q,OAAO,CAAC0F,SAAR,CAAkBw2B,qBAArC,EAA4D,UAAUp8F,IAAV,EAAgB;AAC1EkgE,MAAAA,OAAO,CAAC2J,qBAAR,GAAgC7pE,IAAI,CAACzC,MAArC;AACD,KAFD,EAxJuD,CA4JvD;;AACA2iE,IAAAA,OAAO,CAAC0K,IAAR,CAAa4uB,eAAb,GAA+B5qF,MAAM,CAACoqF,SAAtC;AACD,GA9JD;AAgKA;;;AACA,MAAImE,gBAAgB,GAAG,UAAUh4B,OAAV,EAAmB6xB,QAAnB,EAA6BmH,UAA7B,EAAyCC,UAAzC,EAAqD;AAC1E,SAAKj5B,OAAL,GAAeA,OAAf;AACA,SAAK6xB,QAAL,GAAgBA,QAAhB;AACA,SAAKmH,UAAL,GAAkBA,UAAlB;AACA,SAAKC,UAAL,GAAkBA,UAAlB;AACA,SAAKC,QAAL,GAAgB,IAAhB;AACA,SAAKC,QAAL,GAAgB,IAAhB;AACA,SAAKC,MAAL,GAAc,IAAd;AACD,GARD;;AAUApB,EAAAA,gBAAgB,CAACt9F,SAAjB,CAA2B2uC,KAA3B,GAAmC,YAAY;AAC7C,QAAIvnC,IAAI,GAAG,IAAX;AAEA,SAAKk+D,OAAL,CAAaQ,YAAb,CAA0BzF,OAAO,CAAC0F,SAAR,CAAkB44B,WAA5C;AACA,SAAKD,MAAL,GAAc,KAAKp5B,OAAL,CAAa6L,UAAb,CAAwB9Q,OAAO,CAAC0F,SAAR,CAAkBq2B,WAA1C,EAAuD,YAAY;AAC/E,WAAK/tB,WAAL;AACAp5B,MAAAA,MAAM,CAACiZ,YAAP,CAAoB9mD,IAAI,CAACo3F,QAAzB;AACAp3F,MAAAA,IAAI,CAACw3F,UAAL;AACD,KAJa,CAAd;AAKA,SAAKJ,QAAL,GAAgBvpD,MAAM,CAACtxB,UAAP,CAAkB,YAAY;AAC5Cvc,MAAAA,IAAI,CAACs3F,MAAL,CAAYrwB,WAAZ;AACAjnE,MAAAA,IAAI,CAAC+vF,QAAL,CAAclsB,OAAd,CAAsB5K,OAAO,CAAC0F,SAAR,CAAkB43B,WAAxC;AACAv2F,MAAAA,IAAI,CAACw3F,UAAL;AACD,KAJe,EAIb,KAAKL,UAJQ,CAAhB;AAKD,GAdD;;AAgBAjB,EAAAA,gBAAgB,CAACt9F,SAAjB,CAA2B4+F,UAA3B,GAAwC,YAAY;AAClD,QAAI,KAAKH,QAAL,IAAiB,IAArB,EAA2B;AACzB,WAAKA,QAAL,GAAgBxpD,MAAM,CAACtxB,UAAP,CAAkB08C,OAAO,CAACmF,KAAR,CAAc,IAAd,EAAoB,KAAK72B,KAAzB,CAAlB,EAAmD,KAAK2vD,UAAxD,CAAhB;AACD;AACF,GAJD;AAMA;;;AAEA,MAAIrC,iBAAiB,GAAG,YAAY;AAElC,QAAI19D,SAAS,GAAG;AACdmyD,MAAAA,WAAW,EAAE,IAAIC,GAAJ,EADC;AAEdE,MAAAA,kBAAkB,EAAE,IAAIF,GAAJ,EAFN;AAGdG,MAAAA,mBAAmB,EAAE,IAAIH,GAAJ,EAHP;AAId3E,MAAAA,KAAK,EAAE,IAAI+E,GAAJ,EAJO;AAKdC,MAAAA,UAAU,EAAE,IAAIL,GAAJ,EALE;AAMdM,MAAAA,cAAc,EAAE,IAAIN,GAAJ,EANF;AAOdO,MAAAA,cAAc,EAAE,IAAIP,GAAJ,EAPF;AAQdQ,MAAAA,cAAc,EAAE,IAAIR,GAAJ,EARF;AASdS,MAAAA,eAAe,EAAE,IAAIT,GAAJ;AATH,KAAhB;;AAYA,QAAIkO,eAAe,GAAG,UAAUtgE,SAAV,EAAqBznB,QAArB,EAA+B;AACnDynB,MAAAA,SAAS,CAAC1S,OAAV,CAAkB,UAAU1kB,QAAV,EAAoB;AACpCA,QAAAA,QAAQ,CAAC2P,QAAD,CAAR;AACD,OAFD;AAGD,KAJD;;AAMAupD,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAACuN,eAAR,CAAwBke,YAA9D,EAA4E,YAAY;AACtF+S,MAAAA,eAAe,CAACtgE,SAAS,CAACmyD,WAAX,CAAf;AACD,KAFD;AAIArwB,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAACuN,eAAR,CAAwBkxB,eAA9D,EAA+E,UAAUhoF,QAAV,EAAoB;AACjG+nF,MAAAA,eAAe,CAACtgE,SAAS,CAAC4yD,cAAX,EAA2Br6E,QAA3B,CAAf;AACD,KAFD;AAIAupD,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAACuN,eAAR,CAAwBmxB,gBAA9D,EAAgF,UAAUjoF,QAAV,EAAoB;AAClG+nF,MAAAA,eAAe,CAACtgE,SAAS,CAAC6yD,eAAX,EAA4Bt6E,QAA5B,CAAf;AACD,KAFD;AAIAupD,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAACuN,eAAR,CAAwBoxB,eAA9D,EAA+E,YAAY;AACzFH,MAAAA,eAAe,CAACtgE,SAAS,CAAC0yD,cAAX,CAAf;AACD,KAFD;AAIA5wB,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAACuN,eAAR,CAAwBqxB,eAA9D,EAA+E,UAAUnoF,QAAV,EAAoB;AACjG+nF,MAAAA,eAAe,CAACtgE,SAAS,CAAC2yD,cAAX,EAA2Bp6E,QAA3B,CAAf;AACD,KAFD;AAIAupD,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAACuN,eAAR,CAAwBsxB,mBAA9D,EAAmF,UAAUpoF,QAAV,EAAoB;AACrG+nF,MAAAA,eAAe,CAACtgE,SAAS,CAACsyD,kBAAX,EAA+B/5E,QAA/B,CAAf;AACD,KAFD;AAIAupD,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAACuN,eAAR,CAAwBuxB,oBAA9D,EAAoF,UAAUroF,QAAV,EAAoB;AACtG+nF,MAAAA,eAAe,CAACtgE,SAAS,CAACuyD,mBAAX,EAAgCh6E,QAAhC,CAAf;AACD,KAFD;AAIAupD,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAACuN,eAAR,CAAwBwxB,WAA9D,EAA2E,UAAUtoF,QAAV,EAAoB;AAC7F+nF,MAAAA,eAAe,CAACtgE,SAAS,CAACyyD,UAAX,EAAuBl6E,QAAvB,CAAf;;AACA,UAAIynB,SAAS,CAACytD,KAAV,CAAgBgH,GAAhB,CAAoBl8E,QAAQ,CAACk1E,KAA7B,CAAJ,EAAyC;AACvC6S,QAAAA,eAAe,CAACtgE,SAAS,CAACytD,KAAV,CAAgB1tF,GAAhB,CAAoBwY,QAAQ,CAACk1E,KAA7B,CAAD,EAAsCl1E,QAAtC,CAAf;AACD;AACF,KALD;;AAOA,SAAKy9E,WAAL,GAAmB,UAAU8K,gBAAV,EAA4B;AAC7Ch/B,MAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAACuN,eAAR,CAAwB1tD,IAAhE,EAAsEm/E,gBAAtE;AACD,KAFD;;AAIA,SAAKvL,aAAL,GAAqB,UAAUzkD,EAAV,EAAc;AACjCgxB,MAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmBvP,EAAnB,CAAnB,EAA2C,2BAA3C;AACA9Q,MAAAA,SAAS,CAACmyD,WAAV,CAAsBrzE,GAAtB,CAA0BgyB,EAA1B;AACA,aAAO,YAAY;AACjB,eAAO9Q,SAAS,CAACmyD,WAAV,CAAsBqC,MAAtB,CAA6B1jD,EAA7B,CAAP;AACD,OAFD;AAGD,KAND;;AAQA,SAAK0kD,gBAAL,GAAwB,UAAS1kD,EAAT,EAAa;AACnCgxB,MAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmBvP,EAAnB,CAAnB,EAA2C,2BAA3C;AACA9Q,MAAAA,SAAS,CAAC4yD,cAAV,CAAyB9zE,GAAzB,CAA6BgyB,EAA7B;AACA,aAAO,YAAY;AACjB,eAAO9Q,SAAS,CAAC4yD,cAAV,CAAyB4B,MAAzB,CAAgC1jD,EAAhC,CAAP;AACD,OAFD;AAGD,KAND;;AAQA,SAAK2kD,iBAAL,GAAyB,UAAS3kD,EAAT,EAAa;AACpCgxB,MAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmBvP,EAAnB,CAAnB,EAA2C,2BAA3C;AACA9Q,MAAAA,SAAS,CAAC6yD,eAAV,CAA0B/zE,GAA1B,CAA8BgyB,EAA9B;AACA,aAAO,YAAY;AACjB,eAAO9Q,SAAS,CAAC6yD,eAAV,CAA0B2B,MAA1B,CAAiC1jD,EAAjC,CAAP;AACD,OAFD;AAGD,KAND;;AAQA,SAAK4kD,gBAAL,GAAwB,UAAU5kD,EAAV,EAAc;AACpCgxB,MAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmBvP,EAAnB,CAAnB,EAA2C,2BAA3C;AACA9Q,MAAAA,SAAS,CAAC0yD,cAAV,CAAyB5zE,GAAzB,CAA6BgyB,EAA7B;AACA,aAAO,YAAY;AACjB,eAAO9Q,SAAS,CAAC0yD,cAAV,CAAyB8B,MAAzB,CAAgC1jD,EAAhC,CAAP;AACD,OAFD;AAGD,KAND;;AAQA,SAAK6kD,gBAAL,GAAwB,UAAU7kD,EAAV,EAAc;AACpCgxB,MAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmBvP,EAAnB,CAAnB,EAA2C,2BAA3C;AACA9Q,MAAAA,SAAS,CAAC2yD,cAAV,CAAyB7zE,GAAzB,CAA6BgyB,EAA7B;AACA,aAAO,YAAY;AACjB,eAAO9Q,SAAS,CAAC2yD,cAAV,CAAyB6B,MAAzB,CAAgC1jD,EAAhC,CAAP;AACD,OAFD;AAGD,KAND;;AAQA,SAAK8kD,oBAAL,GAA4B,UAAU9kD,EAAV,EAAc;AACxCgxB,MAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmBvP,EAAnB,CAAnB,EAA2C,2BAA3C;AACA9Q,MAAAA,SAAS,CAACsyD,kBAAV,CAA6BxzE,GAA7B,CAAiCgyB,EAAjC;AACA,aAAO,YAAY;AACjB,eAAO9Q,SAAS,CAACsyD,kBAAV,CAA6BkC,MAA7B,CAAoC1jD,EAApC,CAAP;AACD,OAFD;AAGD,KAND;;AAQA,SAAK+kD,qBAAL,GAA6B,UAAU/kD,EAAV,EAAc;AACzCgxB,MAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmBvP,EAAnB,CAAnB,EAA2C,2BAA3C;AACA9Q,MAAAA,SAAS,CAACuyD,mBAAV,CAA8BzzE,GAA9B,CAAkCgyB,EAAlC;AACA,aAAO,YAAY;AACjB,eAAO9Q,SAAS,CAACuyD,mBAAV,CAA8BiC,MAA9B,CAAqC1jD,EAArC,CAAP;AACD,OAFD;AAGD,KAND;;AAQA,SAAKilD,eAAL,GAAuB,UAAUlH,MAAV,EAAkB;AACvC/sB,MAAAA,OAAO,CAACgH,aAAR,CAAsB+lB,MAAtB,EAA8B,QAA9B;AACA/sB,MAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAAC1rC,OAAR,CAAgBy4D,MAAhB,CAAnB,EAA4C,wBAA5C;AACA/sB,MAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAACuN,eAAR,CAAwB0xB,SAAhE,EAA2ElS,MAA3E;AACD,KAJD;;AAMA,SAAKvd,SAAL,GAAiB,UAAU0vB,SAAV,EAAqBlwD,EAArB,EAAyB;AACxCgxB,MAAAA,OAAO,CAACgH,aAAR,CAAsBk4B,SAAtB,EAAiC,WAAjC;AACAl/B,MAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmBvP,EAAnB,CAAnB,EAA2C,2BAA3C;;AACA,UAAI9Q,SAAS,CAACytD,KAAV,CAAgBgH,GAAhB,CAAoBuM,SAApB,CAAJ,EAAoC;AAClChhE,QAAAA,SAAS,CAACytD,KAAV,CAAgB1tF,GAAhB,CAAoBihG,SAApB,EAA+BliF,GAA/B,CAAmCgyB,EAAnC;AACD,OAFD,MAEO;AACL9Q,QAAAA,SAAS,CAACytD,KAAV,CAAgB9qF,GAAhB,CAAoBq+F,SAApB,EAA+B,IAAI5O,GAAJ,CAAQ,CAACthD,EAAD,CAAR,CAA/B;AACD;;AACD,aAAO,YAAY;AACjB,eAAO9Q,SAAS,CAACytD,KAAV,CAAgB1tF,GAAhB,CAAoBihG,SAApB,EAA+BxM,MAA/B,CAAsC1jD,EAAtC,CAAP;AACD,OAFD;AAGD,KAXD;;AAaA,SAAKglD,YAAL,GAAoB,UAAUhlD,EAAV,EAAc;AAChCgxB,MAAAA,OAAO,CAACiH,UAAR,CAAmBjH,OAAO,CAACzhB,UAAR,CAAmBvP,EAAnB,CAAnB,EAA2C,2BAA3C;AACA9Q,MAAAA,SAAS,CAACyyD,UAAV,CAAqB3zE,GAArB,CAAyBgyB,EAAzB;AACA,aAAO,YAAY;AACjB,eAAO9Q,SAAS,CAACyyD,UAAV,CAAqB+B,MAArB,CAA4B1jD,EAA5B,CAAP;AACD,OAFD;AAGD,KAND;AAQD,GA9ID;AAgJA;;;AACA,MAAIgoD,iBAAiB,GAAG,UAAUvsB,GAAV,EAAe;AACrC,QAAIkV,SAAS,GAAG,IAAhB;AACA,SAAKlV,GAAL,GAAWA,GAAX;AACA,SAAKA,GAAL,CAAS2D,SAAT,CAAmBpO,OAAO,CAACsN,WAAR,CAAoB6xB,MAAvC,EAA+Cn/B,OAAO,CAACmF,KAAR,CAAc,IAAd,EAAoB,KAAKi6B,eAAzB,CAA/C;AACD,GAJD;;AAMApI,EAAAA,iBAAiB,CAACr3F,SAAlB,CAA4By/F,eAA5B,GAA8C,UAAUzf,SAAV,EAAqB;AACjE,QAAI0f,YAAY,GAAG,KAAK1f,SAAxB;AACA,SAAKA,SAAL,GAAiBA,SAAjB;;AAEA,QAAI0f,YAAY,IAAI,IAApB,EAA0B;AACxBr/B,MAAAA,OAAO,CAAC31B,KAAR,CAAcivC,WAAd,GAA4B,IAA5B;AACA,WAAK7O,GAAL,CAASG,OAAT,CAAiB5K,OAAO,CAACsN,WAAR,CAAoB/rE,IAArC,EAA2C,IAAIy+D,OAAO,CAACqZ,KAAZ,EAA3C;AACD;;AAED,SAAK5O,GAAL,CAASG,OAAT,CAAiB5K,OAAO,CAACsN,WAAR,CAAoByM,OAArC,EAA8C,IAAI/Z,OAAO,CAACqZ,KAAZ,EAA9C;;AAEA,SAAKimB,sBAAL,CAA4BD,YAA5B;AACD,GAZD;;AAcArI,EAAAA,iBAAiB,CAACr3F,SAAlB,CAA4B85E,YAA5B,GAA2C,YAAY;AACrD,QAAI,KAAKkG,SAAL,IAAkB,IAAtB,EAA4B;AAC1B,YAAM,IAAI3f,OAAO,CAACiN,UAAZ,CAAuB,iCAAvB,CAAN;AACD;;AAED,WAAO,KAAK0S,SAAZ;AACD,GAND;;AAQAqX,EAAAA,iBAAiB,CAACr3F,SAAlB,CAA4BkgF,cAA5B,GAA6C,UAAU1Q,SAAV,EAAqB;AAChE,QAAIwQ,SAAS,GAAG,KAAKlG,YAAL,EAAhB;AACA,QAAIE,WAAW,GAAG3Z,OAAO,CAACuH,IAAR,CAAaoY,SAAS,CAACpD,QAAV,CAAmBa,QAAhC,EAA0C,UAAUmiB,MAAV,EAAkB;AAC5E,aAAOA,MAAM,CAACpwB,SAAP,KAAqBA,SAA5B;AACD,KAFiB,CAAlB;;AAIA,QAAIwK,WAAW,IAAI,IAAnB,EAAyB;AACvB,YAAM,IAAI3Z,OAAO,CAACiN,UAAZ,CAAuB,8BAAvB,EAAuDkC,SAAvD,CAAN;AACD;;AAED,WAAOwK,WAAP;AACD,GAXD;;AAaAqd,EAAAA,iBAAiB,CAACr3F,SAAlB,CAA4BwlF,iBAA5B,GAAgD,UAAUhW,SAAV,EAAqB+Q,YAArB,EAAmC;AACjF,QAAIvG,WAAW,GAAG,KAAKkG,cAAL,CAAoB1Q,SAApB,CAAlB;AACA,QAAI6Q,cAAc,GAAGhgB,OAAO,CAACuH,IAAR,CAAaoS,WAAW,CAACmI,WAAzB,EAAsC,UAAU0d,KAAV,EAAiB;AAC1E,aAAOA,KAAK,CAACtf,YAAN,KAAuBA,YAA9B;AACD,KAFoB,CAArB;;AAIA,QAAIF,cAAc,IAAI,IAAtB,EAA4B;AAC1B,YAAM,IAAIhgB,OAAO,CAACiN,UAAZ,CAAuB,gDAAvB,EAAyEiT,YAAzE,EAAuF/Q,SAAvF,CAAN;AACD;;AAED,WAAO6Q,cAAP;AACD,GAXD;;AAaAgX,EAAAA,iBAAiB,CAACr3F,SAAlB,CAA4BgnF,aAA5B,GAA4C,YAAU;AACpD,WAAO,KAAKlN,YAAL,GAAoBjF,aAApB,CAAkCW,cAAlC,CAAiDsqB,gBAAjD,CAAkE/8E,KAAlE,CAAwE,8BAAxE,EAAwG,CAAxG,CAAP;AACD,GAFD;;AAIAs0E,EAAAA,iBAAiB,CAACr3F,SAAlB,CAA4BinF,eAA5B,GAA8C,YAAU;AACtD,WAAO,KAAKnN,YAAL,GAAoBjF,aAApB,CAAkCW,cAAlC,CAAiDsqB,gBAAjD,CAAkE/8E,KAAlE,CAAwE,oBAAxE,EAA8F,CAA9F,CAAP;AACD,GAFD;;AAIAs0E,EAAAA,iBAAiB,CAACr3F,SAAlB,CAA4B+/F,aAA5B,GAA4C,UAAUL,YAAV,EAAwB;AAClE,QAAIM,IAAI,GAAG;AACTC,MAAAA,KAAK,EAAE,EADE;AAETC,MAAAA,OAAO,EAAE,EAFA;AAGTC,MAAAA,MAAM,EAAE,EAHC;AAITC,MAAAA,MAAM,EAAE//B,OAAO,CAACptD,KAAR,CAAcysF,YAAY,IAAI,IAAhB,GAAuB,EAAvB,GAA4BA,YAAY,CAAC9iB,QAAb,CAAsBa,QAAhE,EAA0E,UAAUC,OAAV,EAAmB;AAAE,eAAOA,OAAO,CAAClO,SAAf;AAA2B,OAA1H,CAJC;AAKT6wB,MAAAA,MAAM,EAAEhgC,OAAO,CAACptD,KAAR,CAAc,KAAK+sE,SAAL,CAAepD,QAAf,CAAwBa,QAAtC,EAAgD,UAAUC,OAAV,EAAmB;AAAE,eAAOA,OAAO,CAAClO,SAAf;AAA2B,OAAhG;AALC,KAAX;AAQAnP,IAAAA,OAAO,CAACr5D,IAAR,CAAag5F,IAAI,CAACI,MAAlB,EAA0Bv0E,OAA1B,CAAkC,UAAU2jD,SAAV,EAAqB;AACrD,UAAInP,OAAO,CAACzW,QAAR,CAAiBo2C,IAAI,CAACK,MAAtB,EAA8B7wB,SAA9B,CAAJ,EAA8C;AAC5CwwB,QAAAA,IAAI,CAACG,MAAL,CAAY3wB,SAAZ,IAAyBwwB,IAAI,CAACK,MAAL,CAAY7wB,SAAZ,CAAzB;AACD,OAFD,MAEO;AACLwwB,QAAAA,IAAI,CAACE,OAAL,CAAa1wB,SAAb,IAA0BwwB,IAAI,CAACI,MAAL,CAAY5wB,SAAZ,CAA1B;AACD;AACF,KAND;AAQAnP,IAAAA,OAAO,CAACr5D,IAAR,CAAag5F,IAAI,CAACK,MAAlB,EAA0Bx0E,OAA1B,CAAkC,UAAU2jD,SAAV,EAAqB;AACrD,UAAI,CAACnP,OAAO,CAACzW,QAAR,CAAiBo2C,IAAI,CAACI,MAAtB,EAA8B5wB,SAA9B,CAAL,EAA+C;AAC7CwwB,QAAAA,IAAI,CAACC,KAAL,CAAWzwB,SAAX,IAAwBwwB,IAAI,CAACK,MAAL,CAAY7wB,SAAZ,CAAxB;AACD;AACF,KAJD;AAMA,WAAOwwB,IAAP;AACD,GAxBD;;AA0BA3I,EAAAA,iBAAiB,CAACr3F,SAAlB,CAA4B2/F,sBAA5B,GAAqD,UAAUD,YAAV,EAAwB;AAC3E,QAAIt4F,IAAI,GAAG,IAAX;AACA,QAAI44F,IAAI,GAAG,IAAX;AACA,QAAIM,aAAa,GAAGZ,YAAY,IAAI,IAAhB,GAAuBr/B,OAAO,CAAC4X,gBAAR,CAAyBr2E,IAAhD,GAAuD89F,YAAY,CAAC9iB,QAAb,CAAsB/6E,KAAtB,CAA4B8F,IAAvG;AACA,QAAI44F,aAAa,GAAG,KAAKvgB,SAAL,CAAepD,QAAf,CAAwB/6E,KAAxB,CAA8B8F,IAAlD;AACA,QAAI64F,eAAe,GAAGd,YAAY,IAAI,IAAhB,GAAuBr/B,OAAO,CAAC0X,cAAR,CAAuBn2E,IAA9C,GAAqD89F,YAAY,CAAC9iB,QAAb,CAAsB/6E,KAAtB,CAA4B0S,IAAvG;AACA,QAAIksF,eAAe,GAAG,KAAKzgB,SAAL,CAAepD,QAAf,CAAwB/6E,KAAxB,CAA8B0S,IAApD;;AAEA,QAAIisF,eAAe,KAAKC,eAAxB,EAAyC;AACvCpgC,MAAAA,OAAO,CAAC0K,IAAR,CAAa21B,yBAAb,GAAyC7pB,eAAzC,CAAyD,IAAzD,EAA+D2pB,eAA/D,EAAgFC,eAAhF,EAAiG50E,OAAjG,CAAyG,UAAUc,KAAV,EAAiB;AACxHvlB,QAAAA,IAAI,CAAC0jE,GAAL,CAASG,OAAT,CAAiBt+C,KAAjB,EAAwB,IAAI0zC,OAAO,CAACqZ,KAAZ,EAAxB;AACD,OAFD;AAGD;;AAED,QAAI4mB,aAAa,KAAKC,aAAtB,EAAqC;AACnC,WAAKz1B,GAAL,CAASG,OAAT,CAAiB5K,OAAO,CAACsN,WAAR,CAAoB0N,YAArC,EAAmD;AACjD3wC,QAAAA,KAAK,EAAE,IAAI21B,OAAO,CAACqZ,KAAZ,EAD0C;AAEjDinB,QAAAA,QAAQ,EAAEL,aAFuC;AAGjDM,QAAAA,QAAQ,EAAEL;AAHuC,OAAnD;AAMAlgC,MAAAA,OAAO,CAAC0K,IAAR,CAAa81B,uBAAb,GAAuChqB,eAAvC,CAAuD,IAAvD,EAA6DypB,aAA7D,EAA4EC,aAA5E,EAA2F10E,OAA3F,CAAmG,UAAUc,KAAV,EAAiB;AAClHvlB,QAAAA,IAAI,CAAC0jE,GAAL,CAASG,OAAT,CAAiBt+C,KAAjB,EAAwB,IAAI0zC,OAAO,CAACqZ,KAAZ,EAAxB;AACD,OAFD;AAGD;;AAED,QAAIgmB,YAAY,KAAK,IAArB,EAA2B;AACzBM,MAAAA,IAAI,GAAG,KAAKD,aAAL,CAAmBL,YAAnB,CAAP;AAED,KAHD,MAGO;AACLM,MAAAA,IAAI,GAAG;AACLC,QAAAA,KAAK,EAAE5/B,OAAO,CAACptD,KAAR,CAAc,KAAK+sE,SAAL,CAAepD,QAAf,CAAwBa,QAAtC,EAAgD,UAAUC,OAAV,EAAmB;AAAE,iBAAOA,OAAO,CAAClO,SAAf;AAA2B,SAAhG,CADF;AAEL0wB,QAAAA,OAAO,EAAE,EAFJ;AAGLC,QAAAA,MAAM,EAAE,EAHH;AAILC,QAAAA,MAAM,EAAE,EAJH;AAKLC,QAAAA,MAAM,EAAEhgC,OAAO,CAACptD,KAAR,CAAc,KAAK+sE,SAAL,CAAepD,QAAf,CAAwBa,QAAtC,EAAgD,UAAUC,OAAV,EAAmB;AAAE,iBAAOA,OAAO,CAAClO,SAAf;AAA2B,SAAhG;AALH,OAAP;AAOD;;AAEDnP,IAAAA,OAAO,CAACn3B,MAAR,CAAe82D,IAAI,CAACC,KAApB,EAA2Bp0E,OAA3B,CAAmC,UAAUmuD,WAAV,EAAuB;AACxD5yE,MAAAA,IAAI,CAAC0jE,GAAL,CAASG,OAAT,CAAiB5K,OAAO,CAACwN,aAAR,CAAsBjsE,IAAvC,EAA6C,IAAIy+D,OAAO,CAACoP,OAAZ,CAAoBuK,WAAW,CAACxK,SAAhC,CAA7C;;AACApoE,MAAAA,IAAI,CAAC05F,wBAAL,CAA8B9mB,WAAW,CAACxK,SAA1C,EAAqDnP,OAAO,CAACuY,gBAAR,CAAyBh3E,IAA9E,EAAoFo4E,WAAW,CAACn4E,KAAZ,CAAkB0S,IAAtG;AACD,KAHD;AAKA8rD,IAAAA,OAAO,CAACn3B,MAAR,CAAe82D,IAAI,CAACE,OAApB,EAA6Br0E,OAA7B,CAAqC,UAAUmuD,WAAV,EAAuB;AAC1D5yE,MAAAA,IAAI,CAAC0jE,GAAL,CAASG,OAAT,CAAiB5K,OAAO,CAACwN,aAAR,CAAsByT,SAAvC,EAAkD,IAAIjhB,OAAO,CAAC4f,eAAZ,CAA4BjG,WAA5B,CAAlD;AACA5yE,MAAAA,IAAI,CAAC0jE,GAAL,CAASG,OAAT,CAAiB5K,OAAO,CAAC0K,IAAR,CAAa4V,mBAAb,CAAiCtgB,OAAO,CAACwN,aAAR,CAAsByT,SAAvD,EAAkEtH,WAAW,CAACxK,SAA9E,CAAjB,EAA2G,IAAInP,OAAO,CAAC4f,eAAZ,CAA4BjG,WAA5B,CAA3G;;AACA5yE,MAAAA,IAAI,CAAC25F,gCAAL,CAAsC/mB,WAAW,CAACxK,SAAlD;AACD,KAJD;AAMAnP,IAAAA,OAAO,CAACr5D,IAAR,CAAag5F,IAAI,CAACG,MAAlB,EAA0Bt0E,OAA1B,CAAkC,UAAU2jD,SAAV,EAAqB;AACrDpoE,MAAAA,IAAI,CAAC05F,wBAAL,CAA8BtxB,SAA9B,EAAyCwwB,IAAI,CAACI,MAAL,CAAY5wB,SAAZ,EAAuB3tE,KAAvB,CAA6B0S,IAAtE,EAA4EyrF,IAAI,CAACK,MAAL,CAAY7wB,SAAZ,EAAuB3tE,KAAvB,CAA6B0S,IAAzG;AACD,KAFD;AAGD,GArDD;;AAuDA8iF,EAAAA,iBAAiB,CAACr3F,SAAlB,CAA4B8gG,wBAA5B,GAAuD,UAAUtxB,SAAV,EAAqBwxB,eAArB,EAAsCC,eAAtC,EAAuD;AAC5G,QAAI75F,IAAI,GAAG,IAAX;;AACA,QAAI45F,eAAe,KAAKC,eAAxB,EAAyC;AACvC5gC,MAAAA,OAAO,CAAC0K,IAAR,CAAam2B,oBAAb,GAAoCrqB,eAApC,CAAoD,IAApD,EAA0DmqB,eAA1D,EAA2EC,eAA3E,EAA4Fp1E,OAA5F,CAAoG,UAAUc,KAAV,EAAiB;AACnHvlB,QAAAA,IAAI,CAAC0jE,GAAL,CAASG,OAAT,CAAiBt+C,KAAjB,EAAwB,IAAI0zC,OAAO,CAACoP,OAAZ,CAAoBD,SAApB,CAAxB;AACApoE,QAAAA,IAAI,CAAC0jE,GAAL,CAASG,OAAT,CAAiB5K,OAAO,CAAC0K,IAAR,CAAa4V,mBAAb,CAAiCh0D,KAAjC,EAAwC6iD,SAAxC,CAAjB,EAAqE,IAAInP,OAAO,CAACoP,OAAZ,CAAoBD,SAApB,CAArE;AACD,OAHD;AAID;;AAEDpoE,IAAAA,IAAI,CAAC0jE,GAAL,CAASG,OAAT,CAAiB5K,OAAO,CAACwN,aAAR,CAAsBuM,OAAvC,EAAgD,IAAI/Z,OAAO,CAACoP,OAAZ,CAAoBD,SAApB,CAAhD;AACApoE,IAAAA,IAAI,CAAC0jE,GAAL,CAASG,OAAT,CAAiB5K,OAAO,CAAC0K,IAAR,CAAa4V,mBAAb,CAAiCtgB,OAAO,CAACwN,aAAR,CAAsBuM,OAAvD,EAAgE5K,SAAhE,CAAjB,EAA6F,IAAInP,OAAO,CAACoP,OAAZ,CAAoBD,SAApB,CAA7F;AACD,GAXD;;AAaA6nB,EAAAA,iBAAiB,CAACr3F,SAAlB,CAA4B+gG,gCAA5B,GAA+D,UAAUvxB,SAAV,EAAqB;AAClF,QAAIpoE,IAAI,GAAG,IAAX;AACAi5D,IAAAA,OAAO,CAACn3B,MAAR,CAAem3B,OAAO,CAACwN,aAAvB,EAAsChiD,OAAtC,CAA8C,UAAU8O,SAAV,EAAqB;AACjEvzB,MAAAA,IAAI,CAAC0jE,GAAL,CAAS+D,gBAAT,CAA0BxO,OAAO,CAAC0K,IAAR,CAAa4V,mBAAb,CAAiChmD,SAAjC,EAA4C60C,SAA5C,CAA1B,EACG/qD,GADH,CACO,UAAUi4B,GAAV,EAAe;AAAEA,QAAAA,GAAG,CAAC2xB,WAAJ;AAAoB,OAD5C;AAED,KAHD;AAID,GAND;AAQA;;;AAEAhO,EAAAA,OAAO,CAAC0K,IAAR,CAAaszB,aAAb,GAA6B,UAAUrhG,CAAV,EAAa;AACxCqjE,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAACwN,aAAR,CAAsBszB,IAA5D,EAAkEnkG,CAAlE;AACD,GAFD;AAIA;AACF;AACA;AACA;;;AACEqjE,EAAAA,OAAO,CAAC0K,IAAR,CAAaq2B,WAAb,GAA2B,UAAU5xB,SAAV,EAAqB;AAC9CnP,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EAAqE;AACnEtvD,MAAAA,KAAK,EAAE0zC,OAAO,CAACwN,aAAR,CAAsBszB,IADsC;AAEnEhhG,MAAAA,IAAI,EAAE;AACJqvE,QAAAA,SAAS,EAAEA;AADP;AAF6D,KAArE;AAMD,GAPD;AASA;;AAEA;AACF;AACA;AACA;;;AACEnP,EAAAA,OAAO,CAAC0K,IAAR,CAAas2B,cAAb,GAA8B,UAAUrkG,CAAV,EAAa;AACzCqjE,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAAC0F,SAAR,CAAkBu7B,aAAxD,EAAuEtkG,CAAvE;AACD,GAFD;AAIA;AACF;AACA;;;AACEqjE,EAAAA,OAAO,CAAC0K,IAAR,CAAaw2B,UAAb,GAA0B,UAAUvkG,CAAV,EAAa;AACrCqjE,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAAC0F,SAAR,CAAkBs2B,SAAxD,EAAmEr/F,CAAnE;AACD,GAFD;AAIA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEEqjE,EAAAA,OAAO,CAAC0K,IAAR,CAAay2B,sBAAb,GAAsC,UAAUxkG,CAAV,EAAa;AACjDqjE,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAACyN,gBAAR,CAAyB2zB,YAA/D,EAA6EzkG,CAA7E;AACD,GAFD;AAIA;;;AACAqjE,EAAAA,OAAO,CAAC0K,IAAR,CAAa22B,WAAb,GAA2B,UAAS1kG,CAAT,EAAY;AACrCqjE,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAAC0N,mBAAR,CAA4BsrB,SAAlE,EAA6Er8F,CAA7E;AACD,GAFD;AAIC;;;AACAqjE,EAAAA,OAAO,CAAC0K,IAAR,CAAa42B,aAAb,GAA6B,UAAS3kG,CAAT,EAAY;AACxC,QAAI8tE,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAAC0F,SAAR,CAAkBnkE,IAAhC,EAAsC5E,CAAtC;AACD,GAHA;AAKD;;;AACAqjE,EAAAA,OAAO,CAAC0K,IAAR,CAAa4V,mBAAb,GAAmC,UAAUhmD,SAAV,EAAqB60C,SAArB,EAAgC;AACjEnP,IAAAA,OAAO,CAACgH,aAAR,CAAsB1sC,SAAtB,EAAiC,WAAjC;AACA0lC,IAAAA,OAAO,CAACgH,aAAR,CAAsBmI,SAAtB,EAAiC,WAAjC;;AACA,QAAI,CAACnP,OAAO,CAACzW,QAAR,CAAiByW,OAAO,CAACn3B,MAAR,CAAem3B,OAAO,CAACwN,aAAvB,CAAjB,EAAwDlzC,SAAxD,CAAL,EAAyE;AACvE,YAAM,IAAI0lC,OAAO,CAACqJ,UAAZ,CAAuB,kCAAvB,EAA2D/uC,SAA3D,CAAN;AACD;;AACD,WAAO0lC,OAAO,CAACrB,OAAR,CAAgB,QAAhB,EAA0BrkC,SAA1B,EAAqC60C,SAArC,CAAP;AACD,GAPD;AASA;;;AACAnP,EAAAA,OAAO,CAAC0K,IAAR,CAAaC,WAAb,GAA2B,YAAY;AACrC,WAAO3K,OAAO,CAAC0K,IAAR,CAAaosB,QAApB;AACD,GAFD;AAIA;;;AACA92B,EAAAA,OAAO,CAAC0K,IAAR,CAAa62B,mBAAb,GAAmC,YAAY;AAC7C,WAAOvhC,OAAO,CAAC0K,IAAR,CAAaixB,iBAApB;AACD,GAFD;AAIA;;;AACA37B,EAAAA,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoC,YAAY;AAC9C,WAAOxZ,OAAO,CAAC0K,IAAR,CAAaqsB,iBAApB;AACD,GAFD;AAIA;;;AACA/2B,EAAAA,OAAO,CAAC0K,IAAR,CAAa82B,iBAAb,GAAiC,YAAY;AAC3C,WAAOxhC,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCC,YAApC,GAAmD8C,QAAnD,CAA4DklB,cAAnE;AACD,GAFD;AAIA;;;AACAzhC,EAAAA,OAAO,CAAC0K,IAAR,CAAamS,OAAb,GAAuB,YAAY;AACjC,WAAO7c,OAAO,CAAC0K,IAAR,CAAa8O,oBAAb,GAAoCC,YAApC,GAAmD8C,QAAnD,CAA4D3sB,IAAnE;AACD,GAFD;AAIA;;;AACAoQ,EAAAA,OAAO,CAAC0K,IAAR,CAAa21B,yBAAb,GAAyC,YAAY;AACnD,WAAOrgC,OAAO,CAAC0K,IAAR,CAAag3B,sBAApB;AACD,GAFD;;AAGA1hC,EAAAA,OAAO,CAAC0K,IAAR,CAAag3B,sBAAb,GAAsC,IAAI1hC,OAAO,CAAC8W,UAAZ,GACnCG,KADmC,CAC7BjX,OAAO,CAAC8W,UAAR,CAAmBE,GADU,EACLhX,OAAO,CAAC0X,cAAR,CAAuBuC,QADlB,EAElCja,OAAO,CAACsN,WAAR,CAAoB2M,QAFc,EAGnChD,KAHmC,CAG7BjX,OAAO,CAAC8W,UAAR,CAAmBE,GAHU,EAGLhX,OAAO,CAAC0X,cAAR,CAAuByC,YAHlB,EAIlCna,OAAO,CAACsN,WAAR,CAAoB6M,YAJc,EAKnClD,KALmC,CAK7BjX,OAAO,CAAC8W,UAAR,CAAmBE,GALU,EAKLhX,OAAO,CAAC0X,cAAR,CAAuB2C,OALlB,EAMlCra,OAAO,CAACsN,WAAR,CAAoB+M,OANc,CAAtC;AAQA;;AACAra,EAAAA,OAAO,CAAC0K,IAAR,CAAa81B,uBAAb,GAAuC,YAAY;AACjD,WAAOxgC,OAAO,CAAC0K,IAAR,CAAai3B,oBAApB;AACD,GAFD;;AAGA3hC,EAAAA,OAAO,CAAC0K,IAAR,CAAai3B,oBAAb,GAAoC,IAAI3hC,OAAO,CAAC8W,UAAZ,GACjCG,KADiC,CAC3BjX,OAAO,CAAC8W,UAAR,CAAmBE,GADQ,EAEhChX,OAAO,CAACn3B,MAAR,CAAem3B,OAAO,CAAC6X,gBAAvB,CAFgC,EAGhC7X,OAAO,CAACsN,WAAR,CAAoB1M,KAHY,EAIjCqW,KAJiC,CAI3BjX,OAAO,CAAC8W,UAAR,CAAmBE,GAJQ,EAIHhX,OAAO,CAAC4X,gBAAR,CAAyBgqB,eAJtB,EAKhC5hC,OAAO,CAACsN,WAAR,CAAoBwN,GALY,CAApC;AAOA;;AACA9a,EAAAA,OAAO,CAAC0K,IAAR,CAAam2B,oBAAb,GAAoC,YAAY;AAC9C,WAAO7gC,OAAO,CAAC0K,IAAR,CAAam3B,iBAApB;AACD,GAFD;;AAIA7hC,EAAAA,OAAO,CAAC0K,IAAR,CAAam3B,iBAAb,GAAiC,IAAI7hC,OAAO,CAAC8W,UAAZ,GAC9BG,KAD8B,CACxBjX,OAAO,CAAC8W,UAAR,CAAmBE,GADK,EAE7BhX,OAAO,CAACuY,gBAAR,CAAyBiI,QAFI,EAG7BxgB,OAAO,CAACwN,aAAR,CAAsBgT,QAHO,EAI9BvJ,KAJ8B,CAIxBjX,OAAO,CAAC8W,UAAR,CAAmBE,GAJK,EAK7BhX,OAAO,CAACuY,gBAAR,CAAyBoI,OALI,EAM7B3gB,OAAO,CAACwN,aAAR,CAAsBmT,OANO,EAO9B1J,KAP8B,CAOxBjX,OAAO,CAAC8W,UAAR,CAAmBE,GAPK,EAQ7BhX,OAAO,CAACuY,gBAAR,CAAyBH,UARI,EAS7BpY,OAAO,CAACwN,aAAR,CAAsB4K,UATO,EAU9BnB,KAV8B,CAUxBjX,OAAO,CAAC8W,UAAR,CAAmBE,GAVK,EAW7BhX,OAAO,CAACuY,gBAAR,CAAyBF,SAXI,EAY7BrY,OAAO,CAACwN,aAAR,CAAsB6K,SAZO,EAa9BpB,KAb8B,CAaxBjX,OAAO,CAACuY,gBAAR,CAAyBH,UAbD,EAc7BpY,OAAO,CAACuY,gBAAR,CAAyB3X,KAdI,EAe7BZ,OAAO,CAACwN,aAAR,CAAsBsT,MAfO,EAgB9B7J,KAhB8B,CAgBxBjX,OAAO,CAACuY,gBAAR,CAAyBiI,QAhBD,EAiB7BxgB,OAAO,CAACuY,gBAAR,CAAyB3X,KAjBI,EAkB7BZ,OAAO,CAACwN,aAAR,CAAsBsT,MAlBO,EAmB9B7J,KAnB8B,CAmBxBjX,OAAO,CAAC8W,UAAR,CAAmBE,GAnBK,EAoB7BhX,OAAO,CAACuY,gBAAR,CAAyByI,KApBI,EAqB7BhhB,OAAO,CAACwN,aAAR,CAAsBsN,GArBO,EAsB9B7D,KAtB8B,CAsBxBjX,OAAO,CAACn3B,MAAR,CAAem3B,OAAO,CAACyY,qBAAvB,CAtBwB,EAuB7BzY,OAAO,CAACn3B,MAAR,CAAem3B,OAAO,CAACgJ,kBAAR,CAA2BhJ,OAAO,CAACyY,qBAAnC,EAA0DzY,OAAO,CAACuY,gBAAlE,CAAf,CAvB6B,EAwB7BvY,OAAO,CAACwN,aAAR,CAAsBwT,KAxBO,EAyB9B/J,KAzB8B,CAyBxBjX,OAAO,CAAC8W,UAAR,CAAmBE,GAzBK,EA0B7BhX,OAAO,CAACn3B,MAAR,CAAem3B,OAAO,CAAC6X,gBAAvB,CA1B6B,EA2B7B7X,OAAO,CAACwN,aAAR,CAAsB5M,KA3BO,EA4B9BqW,KA5B8B,CA4BxBjX,OAAO,CAACuY,gBAAR,CAAyBH,UA5BD,EA6B7BpY,OAAO,CAACuY,gBAAR,CAAyBuI,MA7BI,EA8B7B9gB,OAAO,CAACwN,aAAR,CAAsBsT,MA9BO,CAAjC;AAgCA;;AACA9gB,EAAAA,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,GAAyB,YAAY;AACnC,QAAI,CAACpe,OAAO,CAAC0K,IAAR,CAAaxzD,MAAlB,EAA0B;AACxB,YAAM,IAAI8oD,OAAO,CAACiN,UAAZ,CAAuB,4CAAvB,CAAN;AACD;;AACD,WAAOjN,OAAO,CAAC0K,IAAR,CAAaxzD,MAApB;AACD,GALD;;AAMA8oD,EAAAA,OAAO,CAAC0K,IAAR,CAAaxzD,MAAb,GAAsB,IAAtB;AAEA;;AACA8oD,EAAAA,OAAO,CAAC0K,IAAR,CAAao3B,iBAAb,GAAiC,YAAY;AAC3C,QAAI,CAAC9hC,OAAO,CAAC0K,IAAR,CAAa0sB,cAAlB,EAAkC;AAChC,YAAM,IAAIp3B,OAAO,CAACiN,UAAZ,CAAuB,uDAAvB,CAAN;AACD;;AACD,WAAOjN,OAAO,CAAC0K,IAAR,CAAa0sB,cAApB;AACD,GALD;;AAMAp3B,EAAAA,OAAO,CAAC0K,IAAR,CAAa0sB,cAAb,GAA8B,IAA9B;AAEA;;AACAp3B,EAAAA,OAAO,CAAC0K,IAAR,CAAaqhB,eAAb,GAA+B,YAAY;AACzC,QAAI,CAAC/rB,OAAO,CAAC0K,IAAR,CAAaohB,YAAlB,EAAgC;AAC9B,YAAM,IAAI9rB,OAAO,CAACiN,UAAZ,CAAuB,qDAAvB,CAAN;AACD;;AACD,WAAOjN,OAAO,CAAC0K,IAAR,CAAaohB,YAApB;AACD,GALD;;AAMA9rB,EAAAA,OAAO,CAAC0K,IAAR,CAAaohB,YAAb,GAA4B,IAA5B;AAEA;;AACA9rB,EAAAA,OAAO,CAAC0K,IAAR,CAAaq3B,mBAAb,GAAmC,YAAY;AAC7C,WAAO/hC,OAAO,CAAC0K,IAAR,CAAa4sB,gBAApB;AACD,GAFD;;AAGAt3B,EAAAA,OAAO,CAAC0K,IAAR,CAAa4sB,gBAAb,GAAgC,IAAhC;AAEA;;AACAt3B,EAAAA,OAAO,CAAC0K,IAAR,CAAa4xB,sBAAb,GAAsC,YAAY;AAChD,QAAI,CAACt8B,OAAO,CAAC0K,IAAR,CAAas3B,mBAAlB,EAAuC;AACrChiC,MAAAA,OAAO,CAAC0K,IAAR,CAAas3B,mBAAb,GAAmC,IAAIhiC,OAAO,CAACiM,mBAAZ,EAAnC;AACD;;AACD,WAAOjM,OAAO,CAAC0K,IAAR,CAAas3B,mBAApB;AACD,GALD;;AAMAhiC,EAAAA,OAAO,CAAC0K,IAAR,CAAas3B,mBAAb,GAAmC,IAAnC;AAEA;;AACAhiC,EAAAA,OAAO,CAAC0K,IAAR,CAAagzB,eAAb,GAA+B,YAAY;AACzC,WAAO19B,OAAO,CAAC0K,IAAR,CAAau3B,YAApB;AACD,GAFD;;AAGAjiC,EAAAA,OAAO,CAAC0K,IAAR,CAAau3B,YAAb,GAA4B,IAAIjiC,OAAO,CAACqL,YAAZ,EAA5B;AAEA;;AACArL,EAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B,YAAY;AACrC,QAAI,CAACpN,OAAO,CAAC0K,IAAR,CAAa+F,QAAlB,EAA4B;AAC1B,YAAM,IAAIzQ,OAAO,CAACiN,UAAZ,CAAuB,+BAAvB,CAAN;AACD;;AACD,WAAOjN,OAAO,CAAC0K,IAAR,CAAa+F,QAApB;AACD,GALD;;AAMAzQ,EAAAA,OAAO,CAAC0K,IAAR,CAAa+F,QAAb,GAAwB,IAAxB;AAEA;;AACAzQ,EAAAA,OAAO,CAAC0K,IAAR,CAAassB,iBAAb,GAAiCA,iBAAjC;AAED,CA31CD;AA41CA;AACA;AACA;AACA;AACA;;;AACA,CAAC,YAAY;AACX,MAAIpiD,MAAM,GAAG,IAAb;AACA,MAAIorB,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAAhC;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;AACAprB,EAAAA,MAAM,CAACqrB,IAAP,GAAcD,OAAd;;AAEA,MAAIkiC,kBAAkB,GAAG,UAAUC,cAAV,EAA0B;AACjD,QAAIp7F,IAAI,GAAG,IAAX;AACA,SAAKq7F,cAAL,GAAsB,IAAtB;AAEApiC,IAAAA,OAAO,CAACgH,aAAR,CAAsBm7B,cAAtB,EAAsC,gBAAtC;;AACA,QAAI,CAACA,cAAc,CAACpK,WAApB,EAAiC;AAC/B,YAAM,IAAI/6F,KAAJ,CAAU,0BAAV,CAAN;AACD;;AAED,QAAI43C,MAAM,CAACytD,KAAP,IAAgB,OAAOztD,MAAM,CAAC5pC,OAAd,KAA0B,WAA9C,EAA2D;AACzD,WAAKs3F,qBAAL,GAA6B,IAAIt3F,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AAClEr0B,QAAAA,IAAI,CAACw7F,MAAL,GAAc,IAAIF,KAAJ,CAAUF,cAAc,CAACpK,WAAzB,CAAd;AACAhxF,QAAAA,IAAI,CAACw7F,MAAL,CAAYC,IAAZ,GAAmB,IAAnB;;AACAz7F,QAAAA,IAAI,CAACw7F,MAAL,CAAYp7E,gBAAZ,CAA6B,SAA7B,EAAwC,YAAY;AAClDpgB,UAAAA,IAAI,CAAC07F,cAAL,GAAsB,IAAtB;AACA76F,UAAAA,OAAO,CAACb,IAAI,CAACw7F,MAAN,CAAP;AACD,SAHD;AAID,OAP4B,CAA7B;AASD,KAVD,MAUO;AACL,WAAKA,MAAL,GAAc,IAAd;AACAviC,MAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,+BAAvB,EAAwDyhE,uBAAxD;AACD;;AAED17D,IAAAA,IAAI,CAAC27F,cAAL;AACD,GAzBD;;AA2BAR,EAAAA,kBAAkB,CAACviG,SAAnB,CAA6B+iG,cAA7B,GAA8C,YAAY;AACxD,UAAM,IAAI1lG,KAAJ,CAAU,kBAAV,CAAN;AACD,GAFD;;AAIAklG,EAAAA,kBAAkB,CAACviG,SAAnB,CAA6BgjG,cAA7B,GAA8C,UAAUtlB,OAAV,EAAmB;AAC/D,QAAI,KAAKklB,MAAT,EAAiB;AACf,WAAKA,MAAL,CAAYK,IAAZ,GACG14B,KADH,CACS,UAAS5tE,CAAT,EAAY;AACjB,aAAKumG,sBAAL,CAA4B,2BAA5B,EAAyDxlB,OAAzD;AACD,OAHH;;AAIA,WAAKwlB,sBAAL,CAA4B,gBAA5B,EAA8CxlB,OAA9C;AACD;AACF,GARD;;AAUA6kB,EAAAA,kBAAkB,CAACviG,SAAnB,CAA6BmjG,aAA7B,GAA6C,UAAUzlB,OAAV,EAAmB;AAC9D,QAAI,KAAKklB,MAAT,EAAiB;AACf,WAAKA,MAAL,CAAYQ,KAAZ;;AACA,WAAKR,MAAL,CAAYn1F,WAAZ,GAA0B,CAA1B;;AACA,WAAKy1F,sBAAL,CAA4B,eAA5B,EAA6CxlB,OAA7C;AACD;AACF,GAND;AAQA;AACF;AACA;;;AACE6kB,EAAAA,kBAAkB,CAACviG,SAAnB,CAA6BqjG,YAA7B,GAA4C,YAAY;AACtD,SAAKF,aAAL;AACD,GAFD;;AAIAZ,EAAAA,kBAAkB,CAACviG,SAAnB,CAA6BsjG,cAA7B,GAA8C,UAAU5lB,OAAV,EAAmB;AAC/D,QAAIt2E,IAAI,GAAG,IAAX;AACAi5D,IAAAA,OAAO,CAACsF,QAAR,CAAiBtF,OAAO,CAACuF,YAAR,CAAqB4yB,QAAtC,EAAgD,YAAY;AAC1DpxF,MAAAA,IAAI,CAAC47F,cAAL,CAAoBtlB,OAApB;;AACAt2E,MAAAA,IAAI,CAACq7F,cAAL,GAAsB/kB,OAAO,CAACyC,YAAR,EAAtB;AAEAzC,MAAAA,OAAO,CAAC+D,WAAR,CAAoBnhB,IAAI,CAACkF,KAAL,CAAWp+D,IAAX,EAAiBA,IAAI,CAAC+7F,aAAtB,CAApB;AACAzlB,MAAAA,OAAO,CAACuD,UAAR,CAAmB3gB,IAAI,CAACkF,KAAL,CAAWp+D,IAAX,EAAiBA,IAAI,CAAC+7F,aAAtB,CAAnB;AACAzlB,MAAAA,OAAO,CAAC0D,OAAR,CAAgB9gB,IAAI,CAACkF,KAAL,CAAWp+D,IAAX,EAAiBA,IAAI,CAAC+7F,aAAtB,CAAhB,EAN0D,CAO1D;;AACAzlB,MAAAA,OAAO,CAACvD,SAAR,CAAkB,UAAUuD,OAAV,EAAmB;AACnC,YAAIA,OAAO,CAACX,SAAR,GAAoBxoE,IAApB,KAA6B8rD,OAAO,CAACwY,iBAAR,CAA0BJ,UAAvD,IACFiF,OAAO,CAACX,SAAR,GAAoBxoE,IAApB,KAA6B8rD,OAAO,CAACwY,iBAAR,CAA0BgI,QADzD,EACmE;AACjEz5E,UAAAA,IAAI,CAAC+7F,aAAL;AACD;AACF,OALD;AAMD,KAdD;AAeD,GAjBD;;AAmBAZ,EAAAA,kBAAkB,CAACviG,SAAnB,CAA6BkjG,sBAA7B,GAAsD,UAAUvoE,SAAV,EAAqB+iD,OAArB,EAA8B;AAClF,QAAIA,OAAO,IAAIA,OAAO,CAACyC,YAAR,EAAf,EAAuC;AACrC9f,MAAAA,OAAO,CAACuK,aAAR,CAAsB;AACpBjjE,QAAAA,IAAI,EAAEgzB,SADc;AAEpB60C,QAAAA,SAAS,EAAEkO,OAAO,CAACyC,YAAR;AAFS,OAAtB;AAID;AACF,GAPD;AASA;AACF;AACA;AACA;AACA;AACA;;;AACEoiB,EAAAA,kBAAkB,CAACviG,SAAnB,CAA6Bu5F,eAA7B,GAA+C,UAAUld,QAAV,EAAoB;AACjE,QAAI,KAAKsmB,qBAAT,EAAgC;AAC9B,UAAIY,wBAAwB,GAAGl4F,OAAO,CAACm4F,IAAR,CAAa,CAC1C,KAAKb,qBADqC,EAE1C,IAAIt3F,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AACrCwZ,QAAAA,MAAM,CAACtxB,UAAP,CAAkB,YAAY;AAAE8X,UAAAA,MAAM,CAAC,sCAAD,CAAN;AAAiD,SAAjF,EAAmF;AAAI;AAAvF;AACD,OAFD,CAF0C,CAAb,CAA/B;AAMA,aAAO8nE,wBAAwB,CAACl5B,IAAzB,CAA8B,UAAUo5B,KAAV,EAAiB;AACpD,YAAIA,KAAK,CAACC,SAAV,EAAqB;AACnB,iBAAOr4F,OAAO,CAACpD,OAAR,CAAgBw7F,KAAK,CAACC,SAAN,CAAgBrnB,QAAhB,CAAhB,CAAP;AACD,SAFD,MAEO;AACL,iBAAOhxE,OAAO,CAACowB,MAAR,CAAe,eAAf,CAAP;AACD;AACF,OANM,CAAP;AAOD;;AAED,QAAIwZ,MAAM,CAAC5pC,OAAX,EAAoB;AAClB,aAAOA,OAAO,CAACowB,MAAR,CAAe,6BAAf,CAAP;AACD;AACF,GApBD;;AAsBA,MAAIg9D,mBAAmB,GAAG,UAAU+J,cAAV,EAA0B;AAClDD,IAAAA,kBAAkB,CAAC9kG,IAAnB,CAAwB,IAAxB,EAA8B+kG,cAA9B;AACD,GAFD;;AAGA/J,EAAAA,mBAAmB,CAACz4F,SAApB,GAAgC5B,MAAM,CAACksB,MAAP,CAAci4E,kBAAkB,CAACviG,SAAjC,CAAhC;AACAy4F,EAAAA,mBAAmB,CAACz4F,SAApB,CAA8B2G,WAA9B,GAA4C8xF,mBAA5C;;AAEAA,EAAAA,mBAAmB,CAACz4F,SAApB,CAA8B+iG,cAA9B,GAA+C,YAAY;AACzD,QAAI37F,IAAI,GAAG,IAAX;;AAEA,QAAIu8F,gBAAgB,GAAG,UAAUjmB,OAAV,EAAmB;AACxC,UAAIA,OAAO,CAACC,OAAR,OAAsBrd,IAAI,CAACyY,WAAL,CAAiB6gB,KAAvC,IACFlc,OAAO,CAACgG,eAAR,EADE,IAC2BhG,OAAO,CAACqG,SAAR,EAD/B,EACoD;AAClD38E,QAAAA,IAAI,CAACk8F,cAAL,CAAoB5lB,OAApB;;AACAt2E,QAAAA,IAAI,CAAC87F,sBAAL,CAA4B,qBAA5B,EAAmDxlB,OAAnD;AACD;AACF,KAND;;AAQArd,IAAAA,OAAO,CAACqd,OAAR,CAAgB,UAAUA,OAAV,EAAmB;AACjCA,MAAAA,OAAO,CAACoD,YAAR,CAAqB6iB,gBAArB;AACD,KAFD;AAIA,QAAItjC,OAAO,CAACqZ,KAAZ,GAAoB6D,WAApB,GAAkC1xD,OAAlC,CAA0C,UAAU6xD,OAAV,EAAmB;AAC3D,UAAIA,OAAO,CAACX,SAAR,GAAoBxoE,IAApB,KAA6B8rD,OAAO,CAACwY,iBAAR,CAA0BJ,UAA3D,EAAuE;AACrEkrB,QAAAA,gBAAgB,CAACjmB,OAAD,CAAhB;AACD;AACF,KAJD;AAKD,GApBD;;AAuBA,MAAIib,kBAAkB,GAAG,UAAU6J,cAAV,EAA0B;AACjDD,IAAAA,kBAAkB,CAAC9kG,IAAnB,CAAwB,IAAxB,EAA8B+kG,cAA9B;AACD,GAFD;;AAGA7J,EAAAA,kBAAkB,CAAC34F,SAAnB,GAA+B5B,MAAM,CAACksB,MAAP,CAAci4E,kBAAkB,CAACviG,SAAjC,CAA/B;AACA24F,EAAAA,kBAAkB,CAAC34F,SAAnB,CAA6B2G,WAA7B,GAA2CgyF,kBAA3C;;AAEAA,EAAAA,kBAAkB,CAAC34F,SAAnB,CAA6B+iG,cAA7B,GAA8C,YAAY;AACxD,QAAI37F,IAAI,GAAG,IAAX;;AAEA,QAAIu8F,gBAAgB,GAAG,UAAUjmB,OAAV,EAAmB;AACxC,UAAIA,OAAO,CAACC,OAAR,OAAsBrd,IAAI,CAACyY,WAAL,CAAiBzX,IAAvC,IAA+Coc,OAAO,CAACqG,SAAR,EAAnD,EAAwE;AACtE38E,QAAAA,IAAI,CAACk8F,cAAL,CAAoB5lB,OAApB;;AACAt2E,QAAAA,IAAI,CAAC87F,sBAAL,CAA4B,0BAA5B,EAAwDxlB,OAAxD;AACD;AACF,KALD;;AAOArd,IAAAA,OAAO,CAACqd,OAAR,CAAgB,UAAUA,OAAV,EAAmB;AACjCA,MAAAA,OAAO,CAACoD,YAAR,CAAqB6iB,gBAArB;AACD,KAFD;AAGD,GAbD;;AAeA,MAAI9K,kBAAkB,GAAG,UAAU2J,cAAV,EAA0B;AACjDD,IAAAA,kBAAkB,CAAC9kG,IAAnB,CAAwB,IAAxB,EAA8B+kG,cAA9B;AACD,GAFD;;AAGA3J,EAAAA,kBAAkB,CAAC74F,SAAnB,GAA+B5B,MAAM,CAACksB,MAAP,CAAci4E,kBAAkB,CAACviG,SAAjC,CAA/B;AACA64F,EAAAA,kBAAkB,CAAC74F,SAAnB,CAA6B2G,WAA7B,GAA2CkyF,kBAA3C;;AAEAA,EAAAA,kBAAkB,CAAC74F,SAAnB,CAA6B+iG,cAA7B,GAA8C,YAAY;AACxD,QAAI37F,IAAI,GAAG,IAAX;;AAEA,QAAIu8F,gBAAgB,GAAG,UAAUjmB,OAAV,EAAmB;AACxC,UAAIA,OAAO,CAACC,OAAR,OAAsBrd,IAAI,CAACyY,WAAL,CAAiBxX,IAAvC,IAA+Cmc,OAAO,CAACqG,SAAR,EAAnD,EAAwE;AACtE38E,QAAAA,IAAI,CAACk8F,cAAL,CAAoB5lB,OAApB;;AACAt2E,QAAAA,IAAI,CAAC87F,sBAAL,CAA4B,0BAA5B,EAAwDxlB,OAAxD;AACD;AACF,KALD;;AAOArd,IAAAA,OAAO,CAACqd,OAAR,CAAgB,UAAUA,OAAV,EAAmB;AACjCA,MAAAA,OAAO,CAACoD,YAAR,CAAqB6iB,gBAArB;AACD,KAFD;AAGD,GAbD;;AAgBA,MAAI7K,2BAA2B,GAAG,UAAU0J,cAAV,EAA0B;AAC1DD,IAAAA,kBAAkB,CAAC9kG,IAAnB,CAAwB,IAAxB,EAA8B+kG,cAA9B;AACD,GAFD;;AAGA1J,EAAAA,2BAA2B,CAAC94F,SAA5B,GAAwC5B,MAAM,CAACksB,MAAP,CAAci4E,kBAAkB,CAACviG,SAAjC,CAAxC;AACA84F,EAAAA,2BAA2B,CAAC94F,SAA5B,CAAsC2G,WAAtC,GAAoDmyF,2BAApD;;AAEAA,EAAAA,2BAA2B,CAAC94F,SAA5B,CAAsC+iG,cAAtC,GAAuD,YAAY;AACjE,QAAI37F,IAAI,GAAG,IAAX;AAEAi5D,IAAAA,OAAO,CAACqd,OAAR,CAAgB,UAAUA,OAAV,EAAmB;AACjCA,MAAAA,OAAO,CAACkD,UAAR,CAAmB,YAAY;AAC7B,YAAIlD,OAAO,CAACC,OAAR,OAAsBrd,IAAI,CAACyY,WAAL,CAAiB6hB,cAA3C,EAA2D;AACzDxzF,UAAAA,IAAI,CAACk8F,cAAL,CAAoB5lB,OAApB;;AACAt2E,UAAAA,IAAI,CAAC87F,sBAAL,CAA4B,8BAA5B,EAA4DxlB,OAA5D;AACD;AACF,OALD;AAMD,KAPD;AAQD,GAXD;AAaA;;;AACArd,EAAAA,OAAO,CAACo4B,mBAAR,GAA8BA,mBAA9B;AACAp4B,EAAAA,OAAO,CAACs4B,kBAAR,GAA6BA,kBAA7B;AACAt4B,EAAAA,OAAO,CAACw4B,kBAAR,GAA6BA,kBAA7B;AACAx4B,EAAAA,OAAO,CAACy4B,2BAAR,GAAsCA,2BAAtC;AACD,CAtND;AAwNA;AACA;AACA;AACA;AACA;;;AACA,CAAC,YAAY;AACX,MAAI7jD,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;AACAprB,EAAAA,MAAM,CAACqrB,IAAP,GAAcD,OAAd;AACAprB,EAAAA,MAAM,CAACgwC,UAAP,GAAoB,IAApB;AAEA,MAAI2e,gBAAgB,GAAG,IAAvB;AACA,MAAIC,2BAA2B,GAAG,KAAlC;AACA,MAAIC,gBAAgB,GAAG,GAAvB;AACA,MAAIC,WAAW,GAAG,EAAlB;AACAA,EAAAA,WAAW,CAAC1jC,OAAO,CAAC8Y,iBAAR,CAA0B6qB,UAA3B,CAAX,GAAoD,OAApD;AACAD,EAAAA,WAAW,CAAC1jC,OAAO,CAAC8Y,iBAAR,CAA0B8qB,UAA3B,CAAX,GAAoD,OAApD;AACAF,EAAAA,WAAW,CAAC1jC,OAAO,CAAC8Y,iBAAR,CAA0B+qB,WAA3B,CAAX,GAAqD,YAArD;AACAH,EAAAA,WAAW,CAAC1jC,OAAO,CAAC8Y,iBAAR,CAA0BgrB,IAA3B,CAAX,GAA8C,MAA9C;AACA,MAAIC,WAAW,GAAG,aAAlB;AACA,MAAIC,YAAY,GAAG,cAAnB;AAEA,MAAIC,YAAY,GAAG,EAAnB;AACAA,EAAAA,YAAY,CAACjkC,OAAO,CAAC0Y,WAAR,CAAoB6gB,KAArB,CAAZ,GAA0C,OAA1C;AACA,MAAI2K,kBAAkB,GAAG,SAAzB;AAEA,MAAIC,2BAA2B,GAAG,EAAlC;AACA,MAAIC,wBAAwB,GAAG,EAA/B;AACA,MAAIC,0BAA0B,GAAG,EAAjC;AACA,MAAIC,WAAW,GAAG,IAAlB;AACA,MAAIC,cAAc,GAAG,IAArB,CA1BW,CA2BX;;AACA,MAAIv7F,MAAM,GAAG,IAAb;AACA,MAAI+vE,mBAAmB,GAAG/Y,OAAO,CAAC+Y,mBAAlC;AACA,MAAIyrB,+BAA+B,GAAG,oBAAtC;AACA,MAAIC,uBAAuB,GAAG,eAA9B;AAEA,MAAIC,gBAAgB,GAAG,EAAvB;AAEA,MAAIC,iBAAiB,GAAG3kC,OAAO,CAAC0H,QAAR,EAAxB;;AAEA,MAAIk9B,gBAAgB,GAAG,UAAUC,SAAV,EAAqB;AAC1C,WAAO,IAAI75F,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AAC5C4kC,MAAAA,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,GAAyBhhF,IAAzB,CAA8B4iE,OAAO,CAACyR,aAAR,CAAsBkZ,gBAApD,EAAsEka,SAAtE,EAAiF;AAC/E7tE,QAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB8H,UAAAA,OAAO,CAAC9H,IAAI,CAACglG,kBAAL,CAAwBC,yBAAzB,CAAP;AACD,SAH8E;AAI/Ez6B,QAAAA,OAAO,EAAE,UAAU0oB,MAAV,EAAkB;AACzB,cAAIA,MAAM,CAAC3rF,OAAP,IAAkB2rF,MAAM,CAAC3rF,OAAP,CAAesxC,QAAf,CAAwB,2CAAxB,CAAtB,EAA4F;AAC1FqsD,YAAAA,YAAY,CAAC,oCAAD,EAAuC,wDAAvC,EAAiG,EAAjG,CAAZ;AACD;;AACD5pE,UAAAA,MAAM,CAACp+B,KAAK,CAAC,yBAAD,CAAN,CAAN;AACD,SAT8E;AAU/E+2E,QAAAA,WAAW,EAAE,YAAY;AACvB34C,UAAAA,MAAM,CAACp+B,KAAK,CAAC,8CAAD,CAAN,CAAN;AACD,SAZ8E;AAa/Eg3E,QAAAA,YAAY,EAAE,YAAY;AACxB54C,UAAAA,MAAM,CAACp+B,KAAK,CAAC,sCAAD,CAAN,CAAN;AACD;AAf8E,OAAjF;AAiBD,KAlBM,CAAP;AAmBD,GApBD;;AAsBA,MAAIw8F,gBAAgB,GAAG,UAAUF,eAAV,EAA2B;AAChD,QAAIvyF,IAAI,GAAG,IAAX;AACAiC,IAAAA,MAAM,GAAG,IAAIi8F,eAAJ,CAAoBjlC,OAAO,CAAC0C,MAAR,EAApB,CAAT;AACA,QAAIwiC,wBAAJ;;AACA,QAAIllC,OAAO,CAACmlC,wBAAZ,EAAsC;AACpCD,MAAAA,wBAAwB,GAAG,IAAIllC,OAAO,CAACmlC,wBAAZ,CAAqCn8F,MAArC,EACzBg3D,OAAO,CAAC0K,IAAR,CAAa62B,mBAAb,EADyB,EAEzBoD,iBAFyB,EAGzB3kC,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoB69F,gBAApB,EAAsC;AACpCla,QAAAA,aAAa,EAAE,WADqB;AAEpCia,QAAAA,iBAAiB,EAAEA;AAFiB,OAAtC,CAHyB,EAOzB3kC,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBi+F,YAApB,CAPyB,CAA3B;AAQD;;AACD,QAAI,CAACI,2BAA2B,EAAhC,EAAoC;AAClCJ,MAAAA,YAAY,CAACjsB,mBAAmB,CAACssB,mBAArB,EACV,0EADU,EAEV,EAFU,CAAZ;AAGD;;AACD,QAAIC,UAAU,GAAGC,cAAc,CAAC;AAC9BvuE,MAAAA,OAAO,EAAE,UAAUhX,MAAV,EAAkB;AACzB,YAAIggD,OAAO,CAACgI,gBAAR,EAAJ,EAAgC;AAC9BhI,UAAAA,OAAO,CAAC0K,IAAR,CAAagtB,2BAAb,CAAyC13E,MAAzC;AACD;AACF,OAL6B;AAM9BsqD,MAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAe;AACtB+9F,QAAAA,YAAY,CAAC/9F,GAAD,EAAM,kDAAN,EAA0D,EAA1D,CAAZ;AACD;AAR6B,KAAD,CAA/B;AAUAu+F,IAAAA,yBAAyB;AACzBC,IAAAA,yBAAyB;AACzBC,IAAAA,4BAA4B;AAE5B,SAAKC,cAAL,GAAsB,IAAtB;AACA,QAAIC,WAAW,GAAG,EAAlB,CAlCgD,CAmChD;;AACA,QAAIC,aAAa,GAAG,EAApB;AACA,SAAK/L,gBAAL,GAAwB,EAAxB;;AACA,SAAKA,gBAAL,CAAsB9rB,WAAtB,GAAoC,YAAW,CAAE,CAAjD,CAtCgD,CAwChD;;;AACA,QAAI83B,gBAAgB,GAAG,KAAvB;AACA,QAAIC,cAAc,GAAG,IAArB;AACA,QAAIC,wBAAwB,GAAG,IAA/B;;AACA,QAAIC,uBAAuB,GAAG,UAAU5oB,OAAV,EAAmB6oB,iBAAnB,EAAsC;AAClEJ,MAAAA,gBAAgB,GAAG,IAAnB;AACAC,MAAAA,cAAc,GAAG1oB,OAAjB;AACA2oB,MAAAA,wBAAwB,GAAGE,iBAA3B;AACD,KAJD;;AAKA,QAAIC,oBAAoB,GAAG,YAAY;AACrCL,MAAAA,gBAAgB,GAAG,KAAnB;AACAC,MAAAA,cAAc,GAAG,IAAjB;AACAC,MAAAA,wBAAwB,GAAG,IAA3B;AACD,KAJD,CAjDgD,CAuDhD;;;AACA,SAAKI,UAAL,GAAkB,UAAUlmB,YAAV,EAAwB;AACxC,aAAO0lB,WAAW,CAAC1lB,YAAD,CAAlB;AACD,KAFD;;AAIA,SAAKmmB,sBAAL,GAA8B,UAASnmB,YAAT,EAAuB+Z,KAAvB,EAA8B;AAC1D,UAAIj6E,MAAM,GAAG0kF,gBAAgB,CAACxkB,YAAD,CAAhB,CAA+BlgE,MAA5C;;AACA,UAAGA,MAAH,EAAU;AACR,YAAIsmF,QAAQ,GAAGtmF,MAAM,CAACumF,cAAP,GAAwB,CAAxB,CAAf;AACAD,QAAAA,QAAQ,CAACt0E,OAAT,GAAmB,KAAnB;AACAhS,QAAAA,MAAM,CAACwmF,WAAP,CAAmBF,QAAnB;AACAtmF,QAAAA,MAAM,CAACymF,QAAP,CAAgBxM,KAAhB;AACD;AACF,KARD;;AAUA,QAAIyM,mBAAmB,GAAG,UAAUrpB,OAAV,EAAmB;AAC3C,aAAOA,OAAO,CAACX,SAAR,GAAoBxoE,IAApB,KAA6B8rD,OAAO,CAACwY,iBAAR,CAA0BwI,KAAvD,IACL3D,OAAO,CAACX,SAAR,GAAoBxoE,IAApB,KAA6B8rD,OAAO,CAACwY,iBAAR,CAA0B5X,KADlD,IAELyc,OAAO,CAACX,SAAR,GAAoBxoE,IAApB,KAA6B8rD,OAAO,CAACwY,iBAAR,CAA0BsI,MAFzD;AAGD,KAJD;;AAMA,QAAI6lB,cAAc,GAAG,UAAUT,iBAAV,EAA6B;AAChD,UAAIN,WAAW,CAAClnG,cAAZ,CAA2BwnG,iBAA3B,CAAJ,EAAmD;AACjD,YAAIU,OAAO,GAAGhB,WAAW,CAACM,iBAAD,CAAzB,CADiD,CAEjD;AACA;;AACA,YAAIl7F,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AACrC,iBAAOwqE,WAAW,CAACM,iBAAD,CAAlB;AACA,iBAAOL,aAAa,CAACK,iBAAD,CAApB;AACAU,UAAAA,OAAO,CAACC,MAAR;AACD,SAJD,EAIG38B,KAJH,CAIS,UAAUjjE,GAAV,EAAe;AACtBg5D,UAAAA,IAAI,CAACyC,MAAL,GAAcpB,IAAd,CAAmB,kCAAkC4kC,iBAArD,EAAwEj/F,GAAG,CAACI,OAA5E,EAAqFo7D,uBAArF;AACD,SAND;AAOD;AACF,KAbD,CA5EgD,CA2FhD;AACA;;;AACA,QAAIqkC,yBAAyB,GAAG,UAAUlB,WAAV,EAAuB;AACrD,UAAI7nG,MAAM,CAAC4I,IAAP,CAAYi/F,WAAZ,EAAyBvoG,MAAzB,GAAkC,CAAtC,EAAyC;AACvC;AACA,aAAK,IAAI6iF,YAAT,IAAyB0lB,WAAzB,EAAsC;AACpC,cAAIA,WAAW,CAAClnG,cAAZ,CAA2BwhF,YAA3B,CAAJ,EAA8C;AAC5C;AACA6mB,YAAAA,4BAA4B,CAACvC,+BAAD,EAAkCoB,WAAW,CAAC1lB,YAAD,CAAX,CAA0B8mB,MAA5D,EAAoE9mB,YAApE,CAA5B;AACAymB,YAAAA,cAAc,CAACzmB,YAAD,CAAd;AACD;AACF;;AACD,cAAM,IAAIljF,KAAJ,CAAU,8DAAV,CAAN;AACD;AACF,KAZD;;AAcA,SAAKqqF,YAAL,GAAoB,UAAU4f,QAAV,EAAoBC,kBAApB,EAAwC;AAC1D,UAAI7pB,OAAO,GAAGyoB,gBAAgB,GAAGC,cAAH,GAAoBkB,QAAlD;AACA,UAAIf,iBAAiB,GAAGJ,gBAAgB,GAAGE,wBAAH,GAA8BkB,kBAAtE;;AACA,UAAI,CAAC7pB,OAAD,IAAY,CAAC6oB,iBAAjB,EAAoC;AAClC;AACD;;AACDC,MAAAA,oBAAoB,GANsC,CAQ1D;;AACAN,MAAAA,aAAa,CAACK,iBAAD,CAAb,GAAmC,IAAnC;AACAl9F,MAAAA,MAAM,CAACq4D,IAAP,CAAY,0BAAZ,EAAwC,eAAegc,OAAO,CAACyC,YAAR,EAAvD,EAA+E,wBAAwBomB,iBAAvG,EAA0HzjC,uBAA1H,GAV0D,CAY1D;;AACAqkC,MAAAA,yBAAyB,CAAClB,WAAD,CAAzB;;AAEA,UAAIvoB,OAAO,CAACX,SAAR,GAAoBxoE,IAApB,KAA6B8rD,OAAO,CAACwY,iBAAR,CAA0BJ,UAA3D,EAAuE;AACrE+uB,QAAAA,qBAAqB,CAAC,sBAAD,EAAyB9pB,OAAO,CAACyC,YAAR,EAAzB,CAArB;AACD;;AAEDsnB,MAAAA,gBAAgB;AAChB,UAAIC,aAAa,GAAGhqB,OAAO,CAACoF,kBAAR,GAA6Ba,qBAA7B,EAApB;AACA,UAAIgkB,UAAU,GAAGC,eAAe,CAACF,aAAa,CAACG,cAAf,CAAhC;AACA,UAAI7L,iBAAJ;;AACA,UAAI2L,UAAU,CAACG,oBAAf,EAAqC;AACnC9L,QAAAA,iBAAiB,GAAG37B,OAAO,CAAC0K,IAAR,CAAa62B,mBAAb,EAApB;AACD;;AACD,UAAIqF,OAAO,GAAG,IAAI5mC,OAAO,CAAC0nC,UAAZ,CACZJ,UAAU,CAACK,iBADC,EAEZL,UAAU,CAACM,UAFC,EAGZP,aAAa,CAACQ,gBAHF,EAIZ7+F,MAJY,EAKZq0E,OAAO,CAACyC,YAAR,EALY,EAMZomB,iBANY,EAOZvK,iBAPY,CAAd;AASAiK,MAAAA,WAAW,CAACM,iBAAD,CAAX,GAAiCU,OAAjC;;AAEA,UAAI5mC,OAAO,CAAC0K,IAAR,CAAa+sB,2BAAb,EAAJ,EAAgD;AAC9CmP,QAAAA,OAAO,CAACkB,WAAR,GAAsB9nC,OAAO,CAAC0K,IAAR,CAAa+sB,2BAAb,EAAtB;AACD,OAvCyD,CAyC1D;;;AACAz3B,MAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EAAqE;AACnEtvD,QAAAA,KAAK,EAAE0zC,OAAO,CAACyN,gBAAR,CAAyB2zB,YADmC;AAEnEthG,QAAAA,IAAI,EAAE;AACJogF,UAAAA,YAAY,EAAEgmB;AADV;AAF6D,OAArE;;AAOAU,MAAAA,OAAO,CAACmB,eAAR,GAA0B,UAAUC,UAAV,EAAsBhV,MAAtB,EAA8B;AACtD,eAAO4S,WAAW,CAACM,iBAAD,CAAlB;AACA,eAAOL,aAAa,CAACK,iBAAD,CAApB;AACA+B,QAAAA,2BAA2B,CAACD,UAAD,EAAahV,MAAb,CAA3B;AACAkV,QAAAA,mCAAmC,CAAC7qB,OAAO,CAACyC,YAAR,EAAD,EAAyBkT,MAAzB,CAAnC;AACAmV,QAAAA,iBAAiB,CAAC9qB,OAAD,EAAU2qB,UAAU,CAACI,aAArB,CAAjB;AACD,OAND;;AAOAxB,MAAAA,OAAO,CAACyB,kBAAR,GAA6B,UAAUL,UAAV,EAAsB;AACjDb,QAAAA,qBAAqB,CAAC,6BAAD,EAAgC9pB,OAAO,CAACyC,YAAR,EAAhC,CAArB,CADiD,CAEjD;;AACA9f,QAAAA,OAAO,CAACksB,YAAR,CAAqBlsB,OAAO,CAACuF,YAAR,CAAqBC,SAA1C,EAHiD,CAIjD;;AACA8iC,QAAAA,uBAAuB,CAACN,UAAD,CAAvB;AACAO,QAAAA,sBAAsB,CAAClrB,OAAD,CAAtB;AACAmrB,QAAAA,wBAAwB,CAACnrB,OAAD,CAAxB;AACD,OARD;;AAUAupB,MAAAA,OAAO,CAAC6B,kBAAR,GAA6B,UAAUT,UAAV,EAAsB;AACjDb,QAAAA,qBAAqB,CAAC,6BAAD,EAAgC9pB,OAAO,CAACyC,YAAR,EAAhC,CAArB;AAEA,eAAO8lB,WAAW,CAACM,iBAAD,CAAlB;AACA,eAAOL,aAAa,CAACK,iBAAD,CAApB,CAJiD,CAKjD;;AACAiC,QAAAA,iBAAiB,CAAC9qB,OAAD,EAAU2qB,UAAU,CAACI,aAArB,CAAjB,CANiD,CAQjD;;AACAM,QAAAA,sBAAsB,CAACxC,iBAAD,CAAtB;AACD,OAVD;;AAYAU,MAAAA,OAAO,CAAC+B,kBAAR,GAA6B,UAAUX,UAAV,EAAsBhoF,MAAtB,EAA8B;AACzD;AACA0kF,QAAAA,gBAAgB,CAACwB,iBAAD,CAAhB,GAAsC;AACpClmF,UAAAA,MAAM,EAAEA;AAD4B,SAAtC;AAGAggD,QAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EAAqE;AACnEtvD,UAAAA,KAAK,EAAE0zC,OAAO,CAACsN,WAAR,CAAoB8N,0BADwC;AAEnEt7E,UAAAA,IAAI,EAAE;AACJogF,YAAAA,YAAY,EAAEgmB;AADV;AAF6D,SAArE;AAMD,OAXD;;AAaAU,MAAAA,OAAO,CAACgC,kBAAR,GAA6BnkC,QAAQ,CAACokC,cAAT,CAAwB,cAAxB,CAA7B;;AACA,UAAI3D,wBAAJ,EAA8B;AAC5B0B,QAAAA,OAAO,CAAC5mC,OAAR,CAAgBklC,wBAAwB,CAACjnG,GAAzB,CAA6BqpG,UAAU,CAACM,UAAxC,CAAhB;AACD,OAFD,MAEO;AACLhB,QAAAA,OAAO,CAAC5mC,OAAR;AACD;AACF,KAjGD;;AAmGA,QAAI8oC,gBAAgB,GAAG,UAAUzrB,OAAV,EAAmB6oB,iBAAnB,EAAsC;AAC3D,UAAIN,WAAW,CAACM,iBAAD,CAAX,IAAkCQ,mBAAmB,CAACrpB,OAAD,CAAzD,EAAoE;AAClEspB,QAAAA,cAAc,CAACT,iBAAD,CAAd;AACAC,QAAAA,oBAAoB;AACrB;;AACD,UAAI9oB,OAAO,CAACgG,eAAR,MAA6B,CAACwiB,aAAa,CAACK,iBAAD,CAA3C,KACF7oB,OAAO,CAACX,SAAR,GAAoBxoE,IAApB,KAA6B8rD,OAAO,CAACwY,iBAAR,CAA0BJ,UAAvD,IACAiF,OAAO,CAACX,SAAR,GAAoBxoE,IAApB,KAA6B8rD,OAAO,CAACwY,iBAAR,CAA0BgI,QAFrD,CAAJ,EAEoE;AAChE,YAAIxgB,OAAO,CAACgI,gBAAR,MAA8BhI,OAAO,CAAC0J,qBAAR,EAAlC,EAAmE;AACjEu8B,UAAAA,uBAAuB,CAAC5oB,OAAD,EAAU6oB,iBAAV,CAAvB;AACD,SAFD,MAEO;AACLn/F,UAAAA,IAAI,CAACsgF,YAAL,CAAkBhK,OAAlB,EAA2B6oB,iBAA3B;AACD;AACJ;AACF,KAdD;;AAgBA,QAAI6C,aAAa,GAAG,UAAU1rB,OAAV,EAAmB;AACrC,UAAI6oB,iBAAiB,GAAG7oB,OAAO,CAACoF,kBAAR,GAA6BvC,YAArD;AACAl3E,MAAAA,MAAM,CAACq4D,IAAP,CAAY,mBAAZ,EAAiC,eAAegc,OAAO,CAACyC,YAAR,EAAhD,EAAwE,wBAAwBomB,iBAAhG,EAAmHzjC,uBAAnH;;AAEA,UAAI,CAACojC,aAAa,CAACK,iBAAD,CAAlB,EAAuC;AACrC7oB,QAAAA,OAAO,CAACvD,SAAR,CAAkB,YAAY;AAC5BgvB,UAAAA,gBAAgB,CAACzrB,OAAD,EAAU6oB,iBAAV,CAAhB;AACD,SAFD;AAGD;AACF,KATD;;AAWAn/F,IAAAA,IAAI,CAAC+yF,gBAAL,GAAwB95B,OAAO,CAACqd,OAAR,CAAgB0rB,aAAhB,CAAxB,CAzOgD,CA2OhD;;AACA,QAAI/oC,OAAO,CAACqZ,KAAZ,GAAoB6D,WAApB,GAAkC1xD,OAAlC,CAA0C,UAAU6xD,OAAV,EAAmB;AAC3D,UAAI6oB,iBAAiB,GAAG7oB,OAAO,CAACoF,kBAAR,GAA6BvC,YAArD;AACAl3E,MAAAA,MAAM,CAACq4D,IAAP,CAAY,iGAAiGgc,OAAO,CAACyC,YAAR,EAA7G,EAAqI,wBAAwBomB,iBAA7J,EACGzjC,uBADH;AAEAsmC,MAAAA,aAAa,CAAC1rB,OAAD,CAAb;AACAyrB,MAAAA,gBAAgB,CAACzrB,OAAD,EAAU6oB,iBAAV,CAAhB;AACD,KAND;AAOD,GAnPD;;AAqPA,MAAIsC,wBAAwB,GAAG,UAAUnrB,OAAV,EAAmB;AAChD,QAAIpY,OAAO,GAAGjF,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,EAAd;AACA,QAAI47B,eAAe,GAAG3rB,OAAO,CAACoF,kBAAR,EAAtB;;AACA,QAAI,CAACumB,eAAL,EAAsB;AACpBhgG,MAAAA,MAAM,CAACq4D,IAAP,CAAY,kGAAZ,EAAgHoB,uBAAhH;AACA;AACD;;AACD,QAAIgjB,kBAAkB,GAAGujB,eAAe,CAAC1lB,qBAAhB,EAAzB;;AACA,QAAI,CAACmC,kBAAL,EAAyB;AACvBz8E,MAAAA,MAAM,CAACq4D,IAAP,CAAY,qGAAZ,EAAmHoB,uBAAnH;AACA;AACD;;AACD,QAAIgjB,kBAAkB,CAACwjB,UAAnB,KAAkC,IAAtC,EAA4C;AAC1CjgG,MAAAA,MAAM,CAACq4D,IAAP,CAAY,uEAAZ,EAAqFoB,uBAArF;AACAwC,MAAAA,OAAO,CAACQ,YAAR,CAAqBzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAAvC,EAAkD;AAChDtvD,QAAAA,KAAK,EAAE0zC,OAAO,CAACwN,aAAR,CAAsB0B,QADmB;AAEhDpvE,QAAAA,IAAI,EAAE,IAAIkgE,OAAO,CAACoP,OAAZ,CAAoBiO,OAAO,CAAClO,SAA5B;AAF0C,OAAlD;AAIAlK,MAAAA,OAAO,CAACQ,YAAR,CAAqBzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAAvC,EAAkD;AAChDtvD,QAAAA,KAAK,EAAE0zC,OAAO,CAAC0K,IAAR,CAAa4V,mBAAb,CAAiCtgB,OAAO,CAACwN,aAAR,CAAsB0B,QAAvD,EAAiEmO,OAAO,CAAClO,SAAzE,CADyC;AAEhDrvE,QAAAA,IAAI,EAAE,IAAIkgE,OAAO,CAACoP,OAAZ,CAAoBiO,OAAO,CAAClO,SAA5B;AAF0C,OAAlD;AAID,KAVD,MAUO;AACLnmE,MAAAA,MAAM,CAACq4D,IAAP,CAAY,mEAAZ,EAAiFoB,uBAAjF;AACD;AACF,GAzBD,CAhTW,CA2UX;;;AACA,MAAI+iC,yBAAyB,GAAG,YAAY;AAC1C,QAAI/6B,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAAC0F,SAAR,CAAkBmW,IAAhC,EAAsCqtB,UAAtC;AACD,GAHD;;AAKA,MAAIzD,yBAAyB,GAAG,YAAW;AACzC,QAAIh7B,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAAC0N,mBAAR,CAA4BuO,kBAA1C,EAA8DF,gBAA9D;AACD,GAHD;;AAKA,MAAI2pB,4BAA4B,GAAG,YAAY;AAC7C,QAAIj7B,GAAG,GAAGzK,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAV;AACAF,IAAAA,GAAG,CAAC2D,SAAJ,CAAcpO,OAAO,CAAC0N,mBAAR,CAA4ByO,qBAA1C,EAAiED,mBAAjE;AACD,GAHD,CAtVW,CA2VX;;;AACA,MAAIwsB,sBAAsB,GAAG,UAAUxoB,YAAV,EAAwB;AACnD,WAAOwkB,gBAAgB,CAACxkB,YAAD,CAAvB;AACAlgB,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EAAqE;AACnEtvD,MAAAA,KAAK,EAAE0zC,OAAO,CAACsN,WAAR,CAAoB4N,WADwC;AAEnEp7E,MAAAA,IAAI,EAAE;AAAEqpG,QAAAA,KAAK,EAAE;AAAT;AAF6D,KAArE;AAID,GAND,CA5VW,CAoWX;AACA;;;AACA,MAAID,UAAU,GAAG,UAAUppG,IAAV,EAAgB;AAC/B,QAAI8kB,MAAJ;;AACA,QAAIo7C,OAAO,CAACr5D,IAAR,CAAa+9F,gBAAb,EAA+BrnG,MAA/B,KAA0C,CAA9C,EAAiD;AAC/C;AACD;;AAED,QAAIyC,IAAI,IAAIA,IAAI,CAAC67E,IAAL,KAAcn1E,SAA1B,EAAqC;AACnCoe,MAAAA,MAAM,GAAG9kB,IAAI,CAAC67E,IAAd;AACD;;AAED,SAAK,IAAIuE,YAAT,IAAyBwkB,gBAAzB,EAA2C;AACzC,UAAIA,gBAAgB,CAAChmG,cAAjB,CAAgCwhF,YAAhC,CAAJ,EAAmD;AACjD,YAAIkpB,UAAU,GAAG1E,gBAAgB,CAACxkB,YAAD,CAAhB,CAA+BlgE,MAAhD;;AACA,YAAIopF,UAAJ,EAAgB;AACd,cAAIC,WAAW,GAAGD,UAAU,CAAC7C,cAAX,GAA4B,CAA5B,CAAlB;;AACA,cAAI3hF,MAAM,KAAKpe,SAAf,EAA0B;AACxB6iG,YAAAA,WAAW,CAACr3E,OAAZ,GAAsB,CAACpN,MAAvB;AACA8/E,YAAAA,gBAAgB,CAACxkB,YAAD,CAAhB,CAA+BipB,KAA/B,GAAuCvkF,MAAvC;;AAEA,gBAAIA,MAAJ,EAAY;AACV5b,cAAAA,MAAM,CAACq4D,IAAP,CAAY,kDAAkD6e,YAA9D,EAA4Ezd,uBAA5E;AACD,aAFD,MAEO;AACLz5D,cAAAA,MAAM,CAACq4D,IAAP,CAAY,mDAAmD6e,YAA/D,EAA6Ezd,uBAA7E;AACD;AAEF,WAVD,MAUO;AACL79C,YAAAA,MAAM,GAAG8/E,gBAAgB,CAACxkB,YAAD,CAAhB,CAA+BipB,KAA/B,IAAwC,KAAjD;AACD;AACF;AACF;AACF;;AAEDnpC,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EAAqE;AACnEtvD,MAAAA,KAAK,EAAE0zC,OAAO,CAACsN,WAAR,CAAoB4N,WADwC;AAEnEp7E,MAAAA,IAAI,EAAE;AAAEqpG,QAAAA,KAAK,EAAEvkF;AAAT;AAF6D,KAArE;AAID,GApCD;;AAsCA,MAAIm3D,gBAAgB,GAAG,UAAUj8E,IAAV,EAAgB;AACrC,QAAIkgE,OAAO,CAACr5D,IAAR,CAAa+9F,gBAAb,EAA+BrnG,MAA/B,KAA0C,CAA1C,IAA+C,CAACyC,IAAhD,IAAwD,CAACA,IAAI,CAACk8E,QAAlE,EAA4E;AAC1E;AACD;;AACD,QAAIA,QAAQ,GAAGl8E,IAAI,CAACk8E,QAApB;AACA,QAAI4sB,kBAAkB,GAAGnkC,QAAQ,CAACokC,cAAT,CAAwB,cAAxB,CAAzB;;AACA,QAAI;AACF7/F,MAAAA,MAAM,CAACq4D,IAAP,CAAY,qCAAqC2a,QAAjD;;AACA,UAAI4sB,kBAAkB,IAAI,OAAOA,kBAAkB,CAACvF,SAA1B,KAAwC,UAAlE,EAA8E;AAC5EuF,QAAAA,kBAAkB,CAACvF,SAAnB,CAA6BrnB,QAA7B;AACD;AACF,KALD,CAKE,OAAO1/E,CAAP,EAAU;AACV0M,MAAAA,MAAM,CAAChI,KAAP,CAAa,qCAAqCg7E,QAAlD;AACD;;AAEDhc,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EAAqE;AACnEtvD,MAAAA,KAAK,EAAE0zC,OAAO,CAAC0N,mBAAR,CAA4B4N,sBADgC;AAEnEx7E,MAAAA,IAAI,EAAE;AAAEk8E,QAAAA,QAAQ,EAAEA;AAAZ;AAF6D,KAArE;AAID,GAnBD;;AAqBA,MAAIE,mBAAmB,GAAG,UAAUp8E,IAAV,EAAgB;AACxC,QAAIkgE,OAAO,CAACr5D,IAAR,CAAa+9F,gBAAb,EAA+BrnG,MAA/B,KAA0C,CAA1C,IAAgD,CAACyC,IAAjD,IAAyD,CAACA,IAAI,CAACk8E,QAAnE,EAA6E;AAC3E;AACD;;AACD,QAAIA,QAAQ,GAAGl8E,IAAI,CAACk8E,QAApB;AACA,QAAIsb,gBAAgB,GAAGt3B,OAAO,CAAC0K,IAAR,CAAaq3B,mBAAb,EAAvB;;AACA,QAAI;AACF73D,MAAAA,SAAS,CAACo/D,YAAV,CAAuBC,YAAvB,CAAoC;AAAEnG,QAAAA,KAAK,EAAE;AAAEpnB,UAAAA,QAAQ,EAAE;AAAEwtB,YAAAA,KAAK,EAAExtB;AAAT;AAAZ;AAAT,OAApC,EACGhS,IADH,CACQ,UAAUy/B,mBAAV,EAA+B;AACnC,YAAIC,kBAAkB,GAAGD,mBAAmB,CAAClD,cAApB,GAAqC,CAArC,CAAzB;;AACA,aAAK,IAAIrmB,YAAT,IAAyBwkB,gBAAzB,EAA2C;AACzC,cAAIA,gBAAgB,CAAChmG,cAAjB,CAAgCwhF,YAAhC,CAAJ,EAAmD;AACjD,gBAAIkpB,UAAU,GAAG1E,gBAAgB,CAACxkB,YAAD,CAAhB,CAA+BlgE,MAAhD;AACA,gBAAI4mF,OAAO,GAAGtP,gBAAgB,CAAC8O,UAAjB,CAA4BlmB,YAA5B,CAAd,CAFiD,CAGjD;;AACA0mB,YAAAA,OAAO,CAAC+C,GAAR,CAAYC,UAAZ,GAAyB,CAAzB,EAA4BC,YAA5B,CAAyCH,kBAAzC,EAA6D1/B,IAA7D,CAAkE,YAAY;AAC5E;AACAstB,cAAAA,gBAAgB,CAAC+O,sBAAjB,CAAwCnmB,YAAxC,EAAsDwpB,kBAAtD;AACD,aAHD;AAID;AACF;AACF,OAdH;AAeD,KAhBD,CAgBE,OAAMptG,CAAN,EAAS;AACT0M,MAAAA,MAAM,CAAChI,KAAP,CAAa,qCAAqCg7E,QAAlD;AACD;;AAEDhc,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EAAqE;AACnEtvD,MAAAA,KAAK,EAAE0zC,OAAO,CAAC0N,mBAAR,CAA4B8N,yBADgC;AAEnE17E,MAAAA,IAAI,EAAE;AAAEk8E,QAAAA,QAAQ,EAAEA;AAAZ;AAF6D,KAArE;AAID,GA9BD;;AAgCA,MAAIisB,2BAA2B,GAAG,UAAUD,UAAV,EAAsBhV,MAAtB,EAA8B;AAC9D,QAAIA,MAAM,KAAKhzB,OAAO,CAAC8pC,SAAR,CAAkBC,sBAAjC,EAAyD;AACvD,UAAI3e,WAAW,GAAG,IAAlB;;AACA,WAAK,IAAI1uF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsrG,UAAU,CAACgC,WAAX,CAAuB3sG,MAA3C,EAAmDX,CAAC,EAApD,EAAwD;AACtD,aAAK,IAAIg8C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsvD,UAAU,CAACgC,WAAX,CAAuBttG,CAAvB,EAA0ButG,IAA1B,CAA+B5sG,MAAnD,EAA2Dq7C,CAAC,EAA5D,EAAgE;AAC9D0yC,UAAAA,WAAW,GAAGA,WAAW,GAAG4c,UAAU,CAACgC,WAAX,CAAuBttG,CAAvB,EAA0ButG,IAA1B,CAA+BvxD,CAA/B,CAAd,GAAkD,IAAhE;AACD;AACF;;AACDssD,MAAAA,YAAY,CAACjsB,mBAAmB,CAACgxB,sBAArB,EAA6C,2BAA7C,EAA0E3e,WAA1E,CAAZ;AACD,KARD,MAQO,IAAI4H,MAAM,KAAKhzB,OAAO,CAAC8pC,SAAR,CAAkBI,SAAjC,EAA4C;AACjDlF,MAAAA,YAAY,CAACjsB,mBAAmB,CAACoxB,eAArB,EACV,iCADU,EAEV,EAFU,CAAZ;AAGD,KAJM,MAIA,IAAInX,MAAM,KAAKhzB,OAAO,CAAC8pC,SAAR,CAAkBM,4BAAjC,EAA+D;AACpEpF,MAAAA,YAAY,CAACjsB,mBAAmB,CAACqxB,4BAArB,EACV,wCAAwCpC,UAAU,CAACqC,aAAnD,GAAmE,WADzD,EAEVrC,UAAU,CAACqC,aAFD,CAAZ;AAGD,KAJM,MAIA,IAAIrX,MAAM,KAAKhzB,OAAO,CAAC8pC,SAAR,CAAkBQ,mBAA7B,IAAoDtX,MAAM,KAAKhzB,OAAO,CAAC8pC,SAAR,CAAkBS,iBAArF,EAAwG;AAC7GvF,MAAAA,YAAY,CAACjsB,mBAAmB,CAACyxB,qBAArB,EACV,kDADU,EAEV,EAFU,CAAZ;AAGD,KAJM,MAIA,IAAIxX,MAAM,KAAKhzB,OAAO,CAAC8pC,SAAR,CAAkBW,6BAAjC,EAAgE;AACrEzF,MAAAA,YAAY,CAACjsB,mBAAmB,CAAC0xB,6BAArB,EACV,SAASzC,UAAU,CAACqC,aAApB,GAAoC,sBAD1B,EAEVrC,UAAU,CAACqC,aAFD,CAAZ;AAGD,KAJM,MAIA,IAAIrX,MAAM,KAAKhzB,OAAO,CAAC8pC,SAAR,CAAkBY,cAAjC,EAAiD;AACtD;AACA1hG,MAAAA,MAAM,CAAChI,KAAP,CAAa,qDAAb,EAAoEyhE,uBAApE;AACD,KAHM,MAGA;AACLuiC,MAAAA,YAAY,CAACjsB,mBAAmB,CAAC4xB,YAArB,EACV,uBADU,EAEV,EAFU,CAAZ;AAGD;AACF,GAjCD;AAmCA;;;AACA,MAAIpD,eAAe,GAAG,UAAUqD,gBAAV,EAA4B;AAChD;AACA;AACA,QAAIC,WAAW,GAAGD,gBAAgB,CAAC/gF,OAAjB,CAAyB,SAAzB,EAAoC,GAApC,CAAlB;AACA,WAAO1hB,IAAI,CAACC,KAAL,CAAWyiG,WAAX,CAAP;AACD,GALD;;AAOA,MAAItF,cAAc,GAAG,UAAUjzB,WAAV,EAAuB;AAC1C,QAAIp0C,SAAS,GAAGo0C,WAAW,IAAI,EAA/B;;AACAp0C,IAAAA,SAAS,CAAClH,OAAV,GAAoBkH,SAAS,CAAClH,OAAV,IAAqB,YAAY,CAAG,CAAxD;;AACAkH,IAAAA,SAAS,CAACosC,OAAV,GAAoBpsC,SAAS,CAACosC,OAAV,IAAqB,YAAY,CAAG,CAAxD;;AAEA,QAAIwgC,UAAU,GAAG;AACf1H,MAAAA,KAAK,EAAE;AADQ,KAAjB;AAIA,QAAIjoE,OAAO,GAAG,IAAd;;AAEA,QAAI,OAAOnwB,OAAP,KAAmB,UAAvB,EAAmC;AACjCkzB,MAAAA,SAAS,CAACosC,OAAV,CAAkByO,mBAAmB,CAACssB,mBAAtC;AACA;AACD;;AAED,QAAI,OAAOn7D,SAAS,CAACo/D,YAAjB,KAAkC,QAAlC,IAA8C,OAAOp/D,SAAS,CAACo/D,YAAV,CAAuBC,YAA9B,KAA+C,UAAjG,EAA6G;AAC3GpuE,MAAAA,OAAO,GAAG+O,SAAS,CAACo/D,YAAV,CAAuBC,YAAvB,CAAoCuB,UAApC,CAAV;AAED,KAHD,MAGO,IAAI,OAAO5gE,SAAS,CAAC6gE,kBAAjB,KAAwC,UAA5C,EAAwD;AAC7D5vE,MAAAA,OAAO,GAAG,IAAInwB,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AAC/C8O,QAAAA,SAAS,CAAC6gE,kBAAV,CAA6BD,UAA7B,EAAyCljG,OAAzC,EAAkDwzB,MAAlD;AACD,OAFS,CAAV;AAID,KALM,MAKA;AACL8C,MAAAA,SAAS,CAACosC,OAAV,CAAkByO,mBAAmB,CAACssB,mBAAtC;AACA;AACD;;AAEDlqE,IAAAA,OAAO,CAAC6uC,IAAR,CAAa,UAAUhqD,MAAV,EAAkB;AAC7B,UAAIqpF,WAAW,GAAGrpF,MAAM,CAACumF,cAAP,EAAlB;;AACA,UAAI8C,WAAW,IAAIA,WAAW,CAAChsG,MAAZ,GAAqB,CAAxC,EAA2C;AACzC6gC,QAAAA,SAAS,CAAClH,OAAV,CAAkBhX,MAAlB;AACD,OAFD,MAEO;AACLke,QAAAA,SAAS,CAACosC,OAAV,CAAkByO,mBAAmB,CAACyxB,qBAAtC;AACD;AACF,KAPD,EAOG,UAAUvjG,GAAV,EAAe;AAChBi3B,MAAAA,SAAS,CAACosC,OAAV,CAAkByO,mBAAmB,CAACyxB,qBAAtC;AACD,KATD;AAUA,WAAOrvE,OAAP;AACD,GAxCD;;AA0CA,MAAI6pE,YAAY,GAAG,UAAU7Z,SAAV,EAAqB9jF,OAArB,EAA8B+jF,WAA9B,EAA2C;AAC5DpiF,IAAAA,MAAM,CAAChI,KAAP,CAAa,6BAAb,EAA4CmqF,SAA5C,EACE9jF,OAAO,IAAI,EADb,EACiBo7D,uBADjB;AAGAzC,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B3H,YAA3B,CAAwCzF,OAAO,CAAC0F,SAAR,CAAkBkW,SAA1D,EAAqE;AACnEtvD,MAAAA,KAAK,EAAE0zC,OAAO,CAACsN,WAAR,CAAoBkN,eADwC;AAEnE16E,MAAAA,IAAI,EAAE,IAAIkgE,OAAO,CAACkrB,cAAZ,CAA2BC,SAA3B,EAAsC9jF,OAAtC,EAA+C+jF,WAA/C;AAF6D,KAArE;AAID,GARD;;AAUA,MAAI8c,mCAAmC,GAAG,UAAU/4B,SAAV,EAAqB6jB,MAArB,EAA6B;AACrEmU,IAAAA,qBAAqB,CAAC,0BAAD,EAA6Bh4B,SAA7B,EAAwC;AAC3D67B,MAAAA,YAAY,EAAEhY;AAD6C,KAAxC,CAArB;AAGD,GAJD;;AAMA,MAAImU,qBAAqB,GAAG,UAAU7sE,SAAV,EAAqB60C,SAArB,EAAgCrvE,IAAhC,EAAsC;AAChE,QAAIqvE,SAAJ,EAAe;AACbnP,MAAAA,OAAO,CAACuK,aAAR,CAAsB;AACpBjjE,QAAAA,IAAI,EAAEgzB,SADc;AAEpB60C,QAAAA,SAAS,EAAEA,SAFS;AAGpBrvE,QAAAA,IAAI,EAAEA;AAHc,OAAtB;AAKD;AACF,GARD,CAtiBW,CAgjBX;;;AACA,MAAIinG,4BAA4B,GAAG,UAAUzsE,SAAV,EAAqB60C,SAArB,EAAgC+2B,iBAAhC,EAAmD;AACpFiB,IAAAA,qBAAqB,CAAC7sE,SAAD,EAAY60C,SAAZ,EAAuB,CAAC;AAC3C7nE,MAAAA,IAAI,EAAE,mBADqC;AAE3CV,MAAAA,KAAK,EAAEs/F;AAFoC,KAAD,CAAvB,CAArB;AAIAl9F,IAAAA,MAAM,CAACq4D,IAAP,CAAY,wCAAZ,EAAsD/mC,SAAtD,EAAiE,eAAe60C,SAAhF,EAA2F,wBAAwB+2B,iBAAnH,EACGzjC,uBADH;AAED,GAPD;;AASA,MAAI2iC,2BAA2B,GAAG,YAAY;AAC5C;AACA,QAAIplC,OAAO,CAACiI,cAAR,MAA4BjI,OAAO,CAAC0I,sBAAR,KAAmC,EAAnE,EAAuE;AACrE,aAAO,IAAP;AACD,KAFD,CAGA;AAHA,SAIK,IAAI1I,OAAO,CAAC+H,eAAR,MAA6B/H,OAAO,CAACkI,uBAAR,KAAoC,EAArE,EAAyE;AAC5E,eAAO,IAAP;AACD,OAFI,CAGL;AAHK,WAIA,IAAIlI,OAAO,CAACgI,gBAAR,MAA8BhI,OAAO,CAACoI,wBAAR,KAAqC,EAAvE,EAA2E;AAC9E,iBAAO,IAAP;AACD,SAFI,MAEE;AACL,iBAAO,KAAP;AACD;AACF,GAfD;;AAiBA,MAAIuc,oBAAoB,GAAG,UAAUtH,OAAV,EAAmB;AAC5C,QAAI4tB,WAAW,GAAG9G,2BAA2B,CAACzxF,KAA5B,EAAlB;AACAyxF,IAAAA,2BAA2B,GAAG,EAA9B;;AACA,QAAI8G,WAAW,CAAC5tG,MAAZ,GAAqB,CAAzB,EAA4B;AAC1BggF,MAAAA,OAAO,CAACsH,oBAAR,CAA6BsmB,WAA7B,EAA0C;AACxCj0E,QAAAA,OAAO,EAAE,YAAY;AACnBhuB,UAAAA,MAAM,CAACq4D,IAAP,CAAY,iCAAiCl5D,IAAI,CAACsgB,SAAL,CAAewiF,WAAf,CAA7C,EACGxoC,uBADH;AAED,SAJuC;AAKxC6H,QAAAA,OAAO,EAAE,UAAUxqE,IAAV,EAAgB;AACvBkJ,UAAAA,MAAM,CAAChI,KAAP,CAAa,8BAAb,EACGshE,UADH,CACcxiE,IADd,EAEG2iE,uBAFH;AAGD;AATuC,OAA1C;AAWD;AACF,GAhBD;;AAkBA,MAAIoiB,mBAAmB,GAAG,UAAUxH,OAAV,EAAmBnS,MAAnB,EAA2BggC,cAA3B,EAA2CC,gBAA3C,EAA6D;AACrFjgC,IAAAA,MAAM,CAAC+/B,WAAP,GAAqB,CAACG,oBAAoB,CAACF,cAAD,EAAiBnH,WAAjB,CAArB,EACrBqH,oBAAoB,CAACD,gBAAD,EAAmBnH,YAAnB,CADC,CAArB;AAEA,QAAIqH,UAAU,GAAG;AACfC,MAAAA,aAAa,EAAEpgC,MAAM,CAACqgC,gBADP;AAEfC,MAAAA,WAAW,EAAEtgC,MAAM,CAACugC,cAFL;AAGfC,MAAAA,aAAa,EAAExgC,MAAM,CAACwgC,aAHP;AAIfC,MAAAA,wBAAwB,EAAEzgC,MAAM,CAACygC,wBAJlB;AAKfC,MAAAA,uBAAuB,EAAE1gC,MAAM,CAAC0gC,uBALjB;AAMfC,MAAAA,2BAA2B,EAAE3gC,MAAM,CAAC2gC,2BANrB;AAOf/1B,MAAAA,qBAAqB,EAAE5K,MAAM,CAAC4K,qBAPf;AAQfE,MAAAA,oBAAoB,EAAE9K,MAAM,CAAC8K,oBARd;AASfI,MAAAA,iBAAiB,EAAElL,MAAM,CAACkL,iBATX;AAUf01B,MAAAA,iBAAiB,EAAE5gC,MAAM,CAAC4gC,iBAVX;AAWfC,MAAAA,oBAAoB,EAAE7gC,MAAM,CAAC6gC,oBAXd;AAYfC,MAAAA,2BAA2B,EAAE9gC,MAAM,CAAC8gC,2BAZrB;AAaf91B,MAAAA,kBAAkB,EAAEhL,MAAM,CAACgL,kBAbZ;AAcf+1B,MAAAA,eAAe,EAAE/gC,MAAM,CAAC+gC,eAdT;AAefC,MAAAA,iBAAiB,EAAEhhC,MAAM,CAACghC,iBAfX;AAgBfC,MAAAA,kBAAkB,EAAEjhC,MAAM,CAACihC,kBAhBZ;AAiBfC,MAAAA,0BAA0B,EAAElhC,MAAM,CAACkhC,0BAjBpB;AAkBfC,MAAAA,eAAe,EAAEnhC,MAAM,CAACmhC,eAlBT;AAmBfC,MAAAA,uBAAuB,EAAEphC,MAAM,CAACohC,uBAnBjB;AAoBfC,MAAAA,2BAA2B,EAAErhC,MAAM,CAACqhC,2BApBrB;AAqBfC,MAAAA,2BAA2B,EAAEthC,MAAM,CAACshC,2BArBrB;AAsBf73B,MAAAA,yBAAyB,EAAEzJ,MAAM,CAAC+/B;AAtBnB,KAAjB;AAwBA5tB,IAAAA,OAAO,CAACwH,mBAAR,CAA4BwmB,UAA5B,EAAwC;AACtCr0E,MAAAA,OAAO,EAAE,YAAY;AACnBhuB,QAAAA,MAAM,CAACq4D,IAAP,CAAY,gCAAgCl5D,IAAI,CAACsgB,SAAL,CAAe4iF,UAAf,CAA5C,EACG5oC,uBADH;AAED,OAJqC;AAKtC6H,MAAAA,OAAO,EAAE,UAAUxqE,IAAV,EAAgB;AACvBkJ,QAAAA,MAAM,CAAChI,KAAP,CAAa,6BAAb,EACGshE,UADH,CACcxiE,IADd,EAEG2iE,uBAFH;AAGD;AATqC,KAAxC;AAWD,GAtCD;;AAwCA,MAAI6lC,uBAAuB,GAAG,UAAUN,UAAV,EAAsB;AAClD1D,IAAAA,WAAW,GAAG/xF,MAAM,CAACwgD,WAAP,CAAmB,YAAY;AAC3Ci1C,MAAAA,UAAU,CAACyE,iBAAX,GAA+BziC,IAA/B,CAAoC,UAAUe,KAAV,EAAiB;AACnD,YAAI2hC,iBAAiB,GAAGtI,wBAAxB;AACAA,QAAAA,wBAAwB,GAAGr5B,KAA3B;AACAo5B,QAAAA,2BAA2B,CAAC/4F,IAA5B,CAAiCuhG,kBAAkB,CAACvI,wBAAD,EAA2BsI,iBAA3B,EAA8C3I,WAA9C,CAAnD;AACD,OAJD,EAIG,UAAU/iG,KAAV,EAAiB;AAClBgI,QAAAA,MAAM,CAACg7D,KAAP,CAAa,iCAAb,EAAgDhjE,KAAhD,EAAuDyhE,uBAAvD;AACD,OAND;AAOAulC,MAAAA,UAAU,CAAC4E,mBAAX,GAAiC5iC,IAAjC,CAAsC,UAAUe,KAAV,EAAiB;AACrD,YAAI8hC,mBAAmB,GAAGxI,0BAA1B;AACAA,QAAAA,0BAA0B,GAAGt5B,KAA7B;AACAo5B,QAAAA,2BAA2B,CAAC/4F,IAA5B,CAAiCuhG,kBAAkB,CAACtI,0BAAD,EAA6BwI,mBAA7B,EAAkD7I,YAAlD,CAAnD;AACD,OAJD,EAIG,UAAUhjG,KAAV,EAAiB;AAClBgI,QAAAA,MAAM,CAACg7D,KAAP,CAAa,mCAAb,EAAkDhjE,KAAlD,EAAyDyhE,uBAAzD;AACD,OAND;AAOD,KAfa,EAeX,IAfW,CAAd;AAgBD,GAjBD;;AAmBA,MAAI8lC,sBAAsB,GAAG,UAAUlrB,OAAV,EAAmB;AAC9CknB,IAAAA,cAAc,GAAGhyF,MAAM,CAACwgD,WAAP,CAAmB,YAAY;AAC9C4xB,MAAAA,oBAAoB,CAACtH,OAAD,CAApB;AACD,KAFgB,EAEdmmB,2BAFc,CAAjB;AAGD,GAJD;;AAMA,MAAI4D,gBAAgB,GAAG,YAAY;AACjChD,IAAAA,wBAAwB,GAAG,IAA3B;AACAC,IAAAA,0BAA0B,GAAG,IAA7B;AACAF,IAAAA,2BAA2B,GAAG,EAA9B;AACAG,IAAAA,WAAW,GAAG,IAAd;AACAC,IAAAA,cAAc,GAAG,IAAjB;AACD,GAND;;AAQA,MAAIoI,kBAAkB,GAAG,UAAUG,YAAV,EAAwBC,aAAxB,EAAuCC,UAAvC,EAAmD;AAC1E,QAAID,aAAa,IAAID,YAArB,EAAmC;AACjC,UAAIG,WAAW,GAAGH,YAAY,CAACG,WAAb,GAA2BF,aAAa,CAACE,WAAzC,GAAuDH,YAAY,CAACG,WAAb,GAA2BF,aAAa,CAACE,WAAhG,GAA8G,CAAhI;AACA,UAAIr3B,YAAY,GAAGk3B,YAAY,CAACl3B,YAAb,GAA4Bm3B,aAAa,CAACn3B,YAA1C,GAAyDk3B,YAAY,CAACl3B,YAAb,GAA4Bm3B,aAAa,CAACn3B,YAAnG,GAAkH,CAArI;AACA,aAAO,IAAIs3B,cAAJ,CAAmBJ,YAAY,CAAC1xC,SAAhC,EACL6xC,WADK,EAELr3B,YAFK,EAGLo3B,UAHK,EAILF,YAAY,CAACK,UAJR,EAKLL,YAAY,CAACM,cALR,EAMLN,YAAY,CAACO,eANR,CAAP;AAOD,KAVD,MAUO;AACL,aAAO,IAAIH,cAAJ,CAAmBJ,YAAY,CAAC1xC,SAAhC,EACL0xC,YAAY,CAACG,WADR,EAELH,YAAY,CAACl3B,YAFR,EAGLo3B,UAHK,EAILF,YAAY,CAACK,UAJR,EAKLL,YAAY,CAACM,cALR,EAMLN,YAAY,CAACO,eANR,CAAP;AAOD;AACF,GApBD;;AAsBA,MAAIC,OAAO,GAAG,UAAU/U,IAAV,EAAgB;AAC5B,QAAIA,IAAI,KAAK,IAAb,EAAmB;AACjBhmF,MAAAA,MAAM,CAACygD,aAAP,CAAqBulC,IAArB;AACD;;AACD,WAAO,IAAP;AACD,GALD;;AAOA,MAAI4P,iBAAiB,GAAG,UAAU9qB,OAAV,EAAmB+qB,aAAnB,EAAkC;AACxD9D,IAAAA,WAAW,GAAGgJ,OAAO,CAAChJ,WAAD,CAArB;AACAC,IAAAA,cAAc,GAAG+I,OAAO,CAAC/I,cAAD,CAAxB;AACA1f,IAAAA,mBAAmB,CAACxH,OAAD,EAAU+qB,aAAV,EAAyBgD,oBAAoB,CAAChH,wBAAD,EAA2BL,WAA3B,CAA7C,EAAsFqH,oBAAoB,CAAC/G,0BAAD,EAA6BL,YAA7B,CAA1G,CAAnB;AACArf,IAAAA,oBAAoB,CAACtH,OAAD,CAApB;AACD,GALD;AAOA;AACF;AACA;;;AACE,MAAI6vB,cAAc,GAAG,UAAU9xC,SAAV,EAAqB6xC,WAArB,EAAkCr3B,YAAlC,EAAgDo3B,UAAhD,EAA4DG,UAA5D,EAAwEI,kBAAxE,EAA4FC,mBAA5F,EAAiH;AACpI,SAAKC,mBAAL,GAA2BT,UAA3B;AACA,SAAK5xC,SAAL,GAAiBA,SAAjB;AACA,SAAK6xC,WAAL,GAAmBA,WAAnB;AACA,SAAKr3B,YAAL,GAAoBA,YAApB;AACA,SAAKu3B,UAAL,GAAkBA,UAAlB;AACA,SAAKI,kBAAL,GAA0BA,kBAA1B;AACA,SAAKC,mBAAL,GAA2BA,mBAA3B;AACD,GARD;;AAUA,MAAIpC,oBAAoB,GAAG,UAAUrgC,KAAV,EAAiBiiC,UAAjB,EAA6B;AACtDjiC,IAAAA,KAAK,GAAGA,KAAK,IAAI,EAAjB;AACA,WAAO,IAAImiC,cAAJ,CAAmBniC,KAAK,CAAC3P,SAAzB,EAAoC2P,KAAK,CAACkiC,WAA1C,EAAuDliC,KAAK,CAAC6K,YAA7D,EAA2Eo3B,UAA3E,EAAuFjiC,KAAK,CAACoiC,UAA7F,CAAP;AACD,GAHD;;AAKA,MAAIlI,eAAe,GAAG,UAAUj8F,MAAV,EAAkB;AACtC,SAAK0kG,eAAL,GAAuB1kG,MAAvB;AACA,QAAIjC,IAAI,GAAG,IAAX;;AACA,SAAK4mG,IAAL,GAAY,UAAU9rC,KAAV,EAAiBp8C,MAAjB,EAAyB;AACnC,aAAO,YAAY;AACjB;AACA;AACA,YAAI8U,IAAI,GAAG9J,KAAK,CAAC9wB,SAAN,CAAgB+S,KAAhB,CAAsBtV,IAAtB,CAA2BG,SAAS,CAAC,CAAD,CAApC,CAAX;AACA,YAAI2xB,MAAM,GAAG,EAAb;AACAqL,QAAAA,IAAI,CAAC/O,OAAL,CAAa,YAAY;AACvB0D,UAAAA,MAAM,GAAGA,MAAM,GAAG,KAAlB;AACD,SAFD;AAGA,eAAOzJ,MAAM,CAACjoB,KAAP,CAAauJ,IAAI,CAAC2mG,eAAlB,EAAmC,CAAC1tC,OAAO,CAACc,YAAR,CAAqBE,SAAtB,EAAiC9xC,MAAjC,EAAyC7M,MAAzC,CAAgDkY,IAAhD,CAAnC,CAAP;AACD,OATD;AAUD,KAXD;AAYD,GAfD;;AAiBA0qE,EAAAA,eAAe,CAACtlG,SAAhB,CAA0BqkE,KAA1B,GAAkC,YAAY;AAC5C,WAAO,KAAK2pC,IAAL,CAAU,CAAV,EAAa,KAAKD,eAAL,CAAqB1pC,KAAlC,EAAyCzmE,SAAzC,CAAP;AACD,GAFD;;AAGA0nG,EAAAA,eAAe,CAACtlG,SAAhB,CAA0B0hE,IAA1B,GAAiC,YAAY;AAC3C,WAAO,KAAKssC,IAAL,CAAU,CAAV,EAAa,KAAKD,eAAL,CAAqBrsC,IAAlC,EAAwC9jE,SAAxC,CAAP;AACD,GAFD;;AAGA0nG,EAAAA,eAAe,CAACtlG,SAAhB,CAA0BslB,GAA1B,GAAgC,YAAY;AAC1C,WAAO,KAAK0oF,IAAL,CAAU,CAAV,EAAa,KAAKD,eAAL,CAAqBzoF,GAAlC,EAAuC1nB,SAAvC,CAAP;AACD,GAFD;;AAGA0nG,EAAAA,eAAe,CAACtlG,SAAhB,CAA0B2hE,IAA1B,GAAiC,YAAY;AAC3C,WAAO,KAAKqsC,IAAL,CAAU,CAAV,EAAa,KAAKD,eAAL,CAAqBpsC,IAAlC,EAAwC/jE,SAAxC,CAAP;AACD,GAFD;;AAGA0nG,EAAAA,eAAe,CAACtlG,SAAhB,CAA0BqB,KAA1B,GAAkC,YAAY;AAC5C,WAAO,KAAK2sG,IAAL,CAAU,CAAV,EAAa,KAAKD,eAAL,CAAqB1sG,KAAlC,EAAyCzD,SAAzC,CAAP;AACD,GAFD;;AAIAyiE,EAAAA,OAAO,CAACw5B,gBAAR,GAA2BA,gBAA3B;AACD,CA9vBD;AAgwBA;AACA;AACA;AACA;AACA;;;AACA,CAAC,YAAY;AACX,MAAI5kD,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;AACAprB,EAAAA,MAAM,CAACqrB,IAAP,GAAcD,OAAd;AAEAA,EAAAA,OAAO,CAACw7B,MAAR,GAAiB,EAAjB;AAEA,MAAIoS,oBAAoB,GAAG,KAA3B;AACA,MAAIC,6BAA6B,GAAG,IAApC;AACA,MAAIC,4BAA4B,GAAG,GAAnC;AACA,MAAIC,mBAAmB,GAAG,GAA1B;AAEA,MAAIC,4BAA4B,GAAG,MAAnC,CAbW,CAagC;;AAC3C,MAAIC,8BAA8B,GAAG,KAArC,CAdW,CAciC;;AAC5C,MAAIC,0BAA0B,GAAG,CAAjC;AAEA,MAAIC,mCAAmC,GAAG,KAA1C;AAEA;;AACA,MAAIC,sBAAsB,GAAG,YAAY;AACvC,SAAKC,cAAL,GAAsB,EAAtB;AACD,GAFD;;AAIAD,EAAAA,sBAAsB,CAACzuG,SAAvB,CAAiC2uG,SAAjC,GAA6C,UAAU3iB,KAAV,EAAiB;AAC5D3rB,IAAAA,OAAO,CAACgH,aAAR,CAAsB2kB,KAAtB,EAA6B,OAA7B;AACA,WAAO,KAAK0iB,cAAL,CAAoB1iB,KAApB,KAA8B,IAArC;AACD,GAHD;;AAKAyiB,EAAAA,sBAAsB,CAACzuG,SAAvB,CAAiC4uG,SAAjC,GAA6C,UAAU5iB,KAAV,EAAiBj8E,EAAjB,EAAqB;AAChEswD,IAAAA,OAAO,CAACgH,aAAR,CAAsB2kB,KAAtB,EAA6B,OAA7B;AACA3rB,IAAAA,OAAO,CAACgH,aAAR,CAAsBt3D,EAAtB,EAA0B,IAA1B;AACA,SAAK2+F,cAAL,CAAoB1iB,KAApB,IAA6Bj8E,EAA7B;AACD,GAJD;;AAMA0+F,EAAAA,sBAAsB,CAACzuG,SAAvB,CAAiC6uG,YAAjC,GAAgD,UAAU9+F,EAAV,EAAc;AAC5DswD,IAAAA,OAAO,CAACgH,aAAR,CAAsBt3D,EAAtB,EAA0B,IAA1B;AACA,QAAI3I,IAAI,GAAG,IAAX;AAEAi5D,IAAAA,OAAO,CAACmH,OAAR,CAAgB,KAAKknC,cAArB,EAAqCr8F,MAArC,CAA4C,UAAUygC,KAAV,EAAiB;AAC3D,aAAOA,KAAK,CAAC7rC,KAAN,KAAgB8I,EAAvB;AACD,KAFD,EAEG8b,OAFH,CAEW,UAAUinB,KAAV,EAAiB;AAC1B,aAAO1rC,IAAI,CAACsnG,cAAL,CAAoB57D,KAAK,CAACtzC,GAA1B,CAAP;AACD,KAJD;AAKD,GATD;AAWA;AACF;AACA;;;AACE,MAAIsvG,YAAY,GAAG,UAAUxpC,OAAV,EAAmB;AACpCjF,IAAAA,OAAO,CAACoS,UAAR,CAAmBh1E,IAAnB,CAAwB,IAAxB;AACA,SAAK6nE,OAAL,GAAeA,OAAf;AACD,GAHD;;AAIAwpC,EAAAA,YAAY,CAAC9uG,SAAb,GAAyB5B,MAAM,CAACksB,MAAP,CAAc+1C,OAAO,CAACoS,UAAR,CAAmBzyE,SAAjC,CAAzB;AACA8uG,EAAAA,YAAY,CAAC9uG,SAAb,CAAuB2G,WAAvB,GAAqCmoG,YAArC;;AAEAA,EAAAA,YAAY,CAAC9uG,SAAb,CAAuB4yE,SAAvB,GAAmC,UAAU9sD,MAAV,EAAkB/W,MAAlB,EAA0BwvB,SAA1B,EAAqC;AACtE,QAAIn3B,IAAI,GAAG,IAAX;AACA,QAAI2nG,aAAa,GAAG,IAAIjhG,IAAJ,GAAWF,OAAX,EAApB;;AACA,QAAGyyD,OAAO,CAACyH,aAAR,CAAsBzH,OAAO,CAAC0R,qBAA9B,EAAqDjsD,MAArD,CAAH,EAAiE;AAC/Du6C,MAAAA,OAAO,CAAC0K,IAAR,CAAao3B,iBAAb,GAAiCvvB,SAAjC,CAA2C9sD,MAA3C,EAAmD/W,MAAnD,EAA2D;AACzDsoB,QAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvBiH,UAAAA,IAAI,CAAC4nG,iBAAL,CAAuBlpF,MAAvB,EAA+BipF,aAA/B;;AACAxwE,UAAAA,SAAS,CAAClH,OAAV,CAAkBl3B,IAAlB;AACD,SAJwD;AAKzDwqE,QAAAA,OAAO,EAAE,UAAUtpE,KAAV,EAAiBlB,IAAjB,EAAuB;AAC9BiH,UAAAA,IAAI,CAAC4nG,iBAAL,CAAuBlpF,MAAvB,EAA+BipF,aAA/B,EAA8C1tG,KAA9C;;AACAk9B,UAAAA,SAAS,CAACosC,OAAV,CAAkBtpE,KAAlB,EAAyBlB,IAAzB;AACD;AARwD,OAA3D;AAUD,KAXD,MAWO;AACLkgE,MAAAA,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,GAAyB7L,SAAzB,CAAmC9sD,MAAnC,EAA2C/W,MAA3C,EAAmD;AACjDsoB,QAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvBiH,UAAAA,IAAI,CAAC4nG,iBAAL,CAAuBlpF,MAAvB,EAA+BipF,aAA/B;;AACAxwE,UAAAA,SAAS,CAAClH,OAAV,CAAkBl3B,IAAlB;AACD,SAJgD;AAKjDwqE,QAAAA,OAAO,EAAE,UAAUtpE,KAAV,EAAiBlB,IAAjB,EAAuB;AAC9BiH,UAAAA,IAAI,CAAC4nG,iBAAL,CAAuBlpF,MAAvB,EAA+BipF,aAA/B,EAA8C1tG,KAA9C;;AACAk9B,UAAAA,SAAS,CAACosC,OAAV,CAAkBtpE,KAAlB,EAAyBlB,IAAzB;AACD,SARgD;AASjDi0E,QAAAA,WAAW,EAAE,YAAY;AACvBhtE,UAAAA,IAAI,CAAC4nG,iBAAL,CAAuBlpF,MAAvB,EAA+BipF,aAA/B;;AACAxwE,UAAAA,SAAS,CAAC61C,WAAV;AACD,SAZgD;AAajDC,QAAAA,YAAY,EAAE,YAAY;AACxB91C,UAAAA,SAAS,CAAC81C,YAAV,IAA0B91C,SAAS,CAAC81C,YAAV,EAA1B;AACD;AAfgD,OAAnD;AAiBD;AAEF,GAlCD;;AAoCAy6B,EAAAA,YAAY,CAAC9uG,SAAb,CAAuBgvG,iBAAvB,GAA2C,UAAUlpF,MAAV,EAAkBipF,aAAlB,EAAiCznG,GAAjC,EAAsC;AAC/E,QAAI2nG,WAAW,GAAG,IAAInhG,IAAJ,GAAWF,OAAX,EAAlB;AACA,QAAIshG,YAAY,GAAGD,WAAW,GAAGF,aAAjC;;AACA,SAAKI,eAAL,CAAqBrpF,MAArB,EAA6BopF,YAA7B,EAA2C5nG,GAA3C;AACD,GAJD;;AAMAwnG,EAAAA,YAAY,CAAC9uG,SAAb,CAAuBmvG,eAAvB,GAAyC,UAAUrpF,MAAV,EAAkBlB,IAAlB,EAAwBtd,GAAxB,EAA6B;AACpE,SAAKg+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAAC0F,SAAR,CAAkBsJ,UAA9C,EAA0D;AACxD1nE,MAAAA,IAAI,EAAEme,MADkD;AAExDlB,MAAAA,IAAI,EAAEA,IAFkD;AAGxDwqF,MAAAA,UAAU,EAAE,CACV;AACEznG,QAAAA,IAAI,EAAE,UADR;AAEEV,QAAAA,KAAK,EAAE;AAFT,OADU,CAH4C;AASxD5F,MAAAA,KAAK,EAAEiG;AATiD,KAA1D;AAWD,GAZD;AAcA;AACF;AACA;AACA;;;AACE,MAAI+nG,YAAY,GAAG,YAAY;AAC7B,QAAIjoG,IAAI,GAAG,IAAX;AAEA,SAAKkoG,WAAL,GAAmB,IAAIjvC,OAAO,CAACgQ,iBAAZ,EAAnB;AACA,SAAK/K,OAAL,GAAe,IAAIjF,OAAO,CAACwQ,OAAZ,CAAoB,2BAApB,EAAiD,IAAjD,EAAuD,KAAKy+B,WAA5D,CAAf;AACA,SAAK/3F,MAAL,GAAc,IAAIu3F,YAAJ,CAAiB,KAAKxpC,OAAtB,CAAd;AACA,SAAK57D,OAAL,GAAe,IAAf;AACA,SAAKghC,KAAL,GAAa,IAAb;AACA,SAAKi1C,SAAL,GAAiB,IAAjB;AACA,SAAK4vB,QAAL,GAAgB,EAAhB;AACA,SAAKC,cAAL,GAAsB,EAAtB;AACA,SAAKC,WAAL,GAAmB,IAAIhB,sBAAJ,EAAnB;AACA,SAAKiB,UAAL,GAAkB,EAAlB;AACA,SAAKC,QAAL,GAAgB,KAAhB;AACA,SAAKC,YAAL,GAAoB,KAApB;AAEA,QAAIC,gBAAgB,GAAG,IAAvB;AAEAxvC,IAAAA,OAAO,CAACoG,UAAR,GAAqB,IAAIpG,OAAO,CAAC8F,uBAAZ,CAAoC,KAAKb,OAAzC,CAArB;AAEA,SAAKA,OAAL,CAAa+L,YAAb,CAA0BhR,OAAO,CAAC0F,SAAR,CAAkBF,SAA5C,EAAuD,UAAUiqC,YAAV,EAAwB;AAC7E;AACAzvC,MAAAA,OAAO,CAAC0C,MAAR,GAAiBuD,kBAAjB,CAAoCwpC,YAApC;AAEA1oG,MAAAA,IAAI,CAACsoG,UAAL,GAAkBtoG,IAAI,CAACsoG,UAAL,CAAgBhtF,MAAhB,CAAuBotF,YAAvB,CAAlB,CAJ6E,CAK7E;;AACA,UAAI1oG,IAAI,CAACsoG,UAAL,CAAgBhyG,MAAhB,GAAyB0wG,mBAA7B,EAAkD;AAChDhnG,QAAAA,IAAI,CAAC2oG,qBAAL,CAA2B3oG,IAAI,CAACsoG,UAAhC;AACD;AACF,KATD;AAWA,SAAKpqC,OAAL,CAAa+L,YAAb,CAA0BhR,OAAO,CAAC0F,SAAR,CAAkBszB,SAA5C,EAAuD,UAAUl5F,IAAV,EAAgB;AACrE,UAAIA,IAAI,CAACwzE,SAAL,IAAkBxzE,IAAI,CAACwzE,SAAL,KAAmBvsE,IAAI,CAACmoG,QAAL,CAAc57B,SAAvD,EAAkE;AAChEvsE,QAAAA,IAAI,CAACmoG,QAAL,GAAgBpvG,IAAhB;AACAkgE,QAAAA,OAAO,CAAC0K,IAAR,CAAa8oB,IAAb,CAAkB1zF,IAAlB,EAFgE,CAGhE;;AACA,YAAI,CAAC0vG,gBAAL,EAAuB;AAErBxvC,UAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,6CAAtB,EACGoB,uBADH;AAGAzC,UAAAA,OAAO,CAACw1B,gBAAR,CAAyBnB,eAAzB,CAAyC;AACvCC,YAAAA,YAAY,EAAE;AAAEtrF,cAAAA,MAAM,EAAEg3D,OAAO,CAAC0C,MAAR;AAAV;AADyB,WAAzC;AAIA8sC,UAAAA,gBAAgB,GAAGxvC,OAAO,CAACw1B,gBAAR,CAAyBvrE,MAAzB,EAAnB;AAEAulF,UAAAA,gBAAgB,CAAC/b,aAAjB,CAA+B,YAAY;AACzC1sF,YAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAACuN,eAAR,CAAwBke,YAApD;AACD,WAFD;AAIA+jB,UAAAA,gBAAgB,CAAC9b,gBAAjB,CAAkC,UAAUj9E,QAAV,EAAoB;AACpD1P,YAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAACuN,eAAR,CAAwBkxB,eAApD,EAAqEhoF,QAArE;AACD,WAFD;AAIA+4F,UAAAA,gBAAgB,CAAC7b,iBAAjB,CAAmC,UAAUl9E,QAAV,EAAoB;AACrD1P,YAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAACuN,eAAR,CAAwBmxB,gBAApD,EAAsEjoF,QAAtE;AACD,WAFD;AAIA+4F,UAAAA,gBAAgB,CAAC5b,gBAAjB,CAAkC,YAAY;AAC5C7sF,YAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAACsN,WAAR,CAAoBsN,2BAAhD;AACA7zE,YAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAACuN,eAAR,CAAwBoxB,eAApD;AACD,WAHD;AAKA6Q,UAAAA,gBAAgB,CAAC3b,gBAAjB,CAAkC,UAAUp9E,QAAV,EAAoB;AACpD1P,YAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAACsN,WAAR,CAAoBoN,yBAAhD,EAA2EjkE,QAA3E;AACA1P,YAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAACuN,eAAR,CAAwBqxB,eAApD,EAAqEnoF,QAArE;AACD,WAHD;AAKA+4F,UAAAA,gBAAgB,CAAC1b,oBAAjB,CAAsC,UAAUr9E,QAAV,EAAoB;AACxD1P,YAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAACuN,eAAR,CAAwBsxB,mBAApD,EAAyEpoF,QAAzE;AACD,WAFD;AAIA+4F,UAAAA,gBAAgB,CAACzb,qBAAjB,CAAuC,UAAUt9E,QAAV,EAAoB;AACzD1P,YAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAACuN,eAAR,CAAwBuxB,oBAApD,EAA0EroF,QAA1E;AACD,WAFD;AAIA+4F,UAAAA,gBAAgB,CAACxb,YAAjB,CAA8B,UAAUv9E,QAAV,EAAoB;AAChD1P,YAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAACuN,eAAR,CAAwBwxB,WAApD,EAAiEtoF,QAAjE;AACD,WAFD;AAIA1P,UAAAA,IAAI,CAACk+D,OAAL,CAAa+L,YAAb,CAA0BhR,OAAO,CAACuN,eAAR,CAAwB1tD,IAAlD,EAAwD,UAAUxY,OAAV,EAAmB;AACzEmoG,YAAAA,gBAAgB,CAACtb,WAAjB,CAA6B7sF,OAA7B;AACD,WAFD;AAIAN,UAAAA,IAAI,CAACk+D,OAAL,CAAa+L,YAAb,CAA0BhR,OAAO,CAACuN,eAAR,CAAwB0xB,SAAlD,EAA6D,UAAUlS,MAAV,EAAkB;AAC7EyiB,YAAAA,gBAAgB,CAACvb,eAAjB,CAAiClH,MAAjC;AACD,WAFD;AAIAyiB,UAAAA,gBAAgB,CAAChc,IAAjB,CAAsBxzB,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAAC4oG,eAAzB,CAAtB,EAAiE3lC,IAAjE,CAAsE,UAASvzD,QAAT,EAAmB;AACvF,gBAAIA,QAAQ,IAAI,CAACA,QAAQ,CAAC08E,yBAA1B,EAAqD;AACnD;AACAnzB,cAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,2BAAtB,EACGoB,uBADH;AAEA17D,cAAAA,IAAI,CAAC6oG,YAAL;AAEA5vC,cAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,4BAAtB,EACGoB,uBADH;AAEA17D,cAAAA,IAAI,CAAC8oG,yBAAL,CAA+B;AAAEC,gBAAAA,aAAa,EAAE;AAAjB,eAA/B;AAEA9vC,cAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,gCAAtB,EACGoB,uBADH;AAEA7tB,cAAAA,MAAM,CAACme,WAAP,CAAmBiN,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAACgpG,cAAzB,CAAnB,EAA6D/B,4BAA7D;AACD,aAbD,MAaO;AACL,kBAAI,CAAChuC,OAAO,CAAC0rB,mBAAb,EAAkC;AAChC3kF,gBAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAACuN,eAAR,CAAwBke,YAApD;AACAzrB,gBAAAA,OAAO,CAAC0rB,mBAAR,GAA8B,IAA9B;AACD;AACF;AACF,WApBD;AAqBD,SA1ED,MA0EO;AACL1rB,UAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,4EAAtB,EACGoB,uBADH;AAED;AACF;AACF,KApFD;AAqFA,SAAKwC,OAAL,CAAa+L,YAAb,CAA0BhR,OAAO,CAAC0F,SAAR,CAAkBy2B,SAA5C,EAAuD,YAAY;AACjE;AACAp1F,MAAAA,IAAI,CAAC2oG,qBAAL,CAA2B3oG,IAAI,CAACsoG,UAAhC;AACArvC,MAAAA,OAAO,CAAC0K,IAAR,CAAa2sB,SAAb;AACAtwF,MAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAAC0F,SAAR,CAAkB02B,UAA9C;AACD,KALD;AAMA,SAAKn3B,OAAL,CAAa+L,YAAb,CAA0BhR,OAAO,CAAC0F,SAAR,CAAkB44B,WAA5C,EAAyD,YAAY;AACnEv3F,MAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAAC0F,SAAR,CAAkBq2B,WAA9C;AACD,KAFD;AAGA,SAAK92B,OAAL,CAAa+L,YAAb,CAA0BhR,OAAO,CAAC0F,SAAR,CAAkBkW,SAA5C,EAAuD,UAAU97E,IAAV,EAAgB;AACrEiH,MAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BpmE,IAAI,CAACwsB,KAAjC,EAAwCxsB,IAAI,CAACA,IAA7C;AACD,KAFD;AAIA;AACJ;AACA;AACA;;AACI80C,IAAAA,MAAM,CAACo7D,SAAP,GAAmB,UAAU1jF,KAAV,EAAiB;AAClC,UAAI/G,IAAI,GAAG+G,KAAK,CAAC2jF,KAAN,CAAY,CAAZ,CAAX;AACA,UAAIjwF,MAAM,GAAG,IAAIggD,OAAO,CAAC+P,UAAZ,CAAuBxqD,IAAvB,CAAb;AACAxe,MAAAA,IAAI,CAACkoG,WAAL,CAAiB7+B,SAAjB,CAA2BpwD,MAA3B;AACAuF,MAAAA,IAAI,CAAC+oB,KAAL;AAEA,UAAI4hE,WAAW,GAAG,IAAIlwC,OAAO,CAACwQ,OAAZ,CAAoBxwD,MAAM,CAAC9P,KAAP,EAApB,EAAoC,IAApC,EAA0C8P,MAA1C,CAAlB;AACAkwF,MAAAA,WAAW,CAAChqC,cAAZ,CAA2BlG,OAAO,CAAC0F,SAAR,CAAkBq2B,WAA7C,EAA0D;AAAErsF,QAAAA,EAAE,EAAEsQ,MAAM,CAAC9P,KAAP;AAAN,OAA1D;AAEAnJ,MAAAA,IAAI,CAACooG,cAAL,CAAoBnvF,MAAM,CAAC9P,KAAP,EAApB,IAAsCggG,WAAtC;AACAnpG,MAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAAC0F,SAAR,CAAkBw2B,qBAA9C,EAAqE;AAAE7+F,QAAAA,MAAM,EAAEU,MAAM,CAAC4I,IAAP,CAAYI,IAAI,CAACooG,cAAjB,EAAiC9xG;AAA3C,OAArE;;AAEA,UAAI0J,IAAI,CAACsjC,KAAL,KAAe,IAAnB,EAAyB;AACvBtjC,QAAAA,IAAI,CAACopG,WAAL;AACD;;AAEDD,MAAAA,WAAW,CAACl/B,YAAZ,CAAyBhR,OAAO,CAAC0F,SAAR,CAAkBsN,WAA3C,EACEhT,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAACqpG,gBAAzB,EAA2CF,WAA3C,CADF;AAEAA,MAAAA,WAAW,CAACl/B,YAAZ,CAAyBhR,OAAO,CAAC0F,SAAR,CAAkByN,cAA3C,EACEnT,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAACspG,mBAAzB,EAA8CH,WAA9C,EAA2DlwF,MAAM,CAAC9P,KAAP,EAA3D,CADF;AAEAggG,MAAAA,WAAW,CAACl/B,YAAZ,CAAyBhR,OAAO,CAAC0F,SAAR,CAAkB4Y,0BAA3C,EACEte,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAAC8oG,yBAAzB,CADF;AAEAK,MAAAA,WAAW,CAACl/B,YAAZ,CAAyBhR,OAAO,CAAC0F,SAAR,CAAkBo2B,KAA3C,EAAkD,YAAY;AAC5D/0F,QAAAA,IAAI,CAACkoG,WAAL,CAAiB3+B,YAAjB,CAA8BtwD,MAA9B;AACA,eAAOjZ,IAAI,CAACooG,cAAL,CAAoBnvF,MAAM,CAAC9P,KAAP,EAApB,CAAP;AACAnJ,QAAAA,IAAI,CAACqoG,WAAL,CAAiBZ,YAAjB,CAA8BxuF,MAAM,CAAC9P,KAAP,EAA9B;AACAnJ,QAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAAC0F,SAAR,CAAkBw2B,qBAA9C,EAAqE;AAAE7+F,UAAAA,MAAM,EAAEU,MAAM,CAAC4I,IAAP,CAAYI,IAAI,CAACooG,cAAjB,EAAiC9xG;AAA3C,SAArE;AACD,OALD;AAMD,KA5BD;AA6BD,GAlKD;;AAoKA2xG,EAAAA,YAAY,CAACrvG,SAAb,CAAuBiwG,YAAvB,GAAsC,YAAY;AAChD,QAAI7oG,IAAI,GAAG,IAAX;AACA,QAAIm6F,UAAU,GAAGlhC,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAACupG,cAAzB,CAAjB;AAEA,SAAKp5F,MAAL,CAAY9Z,IAAZ,CAAiB4iE,OAAO,CAACyR,aAAR,CAAsB8+B,kBAAvC,EAA2D;AACzDjxB,MAAAA,SAAS,EAAEv4E,IAAI,CAACu4E,SADyC;AAEzDj2E,MAAAA,OAAO,EAAEukG;AAFgD,KAA3D,EAGG;AACC52E,MAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB,YAAI;AACFiH,UAAAA,IAAI,CAACsjC,KAAL,GAAatjC,IAAI,CAACsjC,KAAL,IAAc,EAA3B;AACAtjC,UAAAA,IAAI,CAACsjC,KAAL,CAAWkyC,QAAX,GAAsBz8E,IAAI,CAACy8E,QAA3B;AACAx1E,UAAAA,IAAI,CAACsjC,KAAL,CAAWkyC,QAAX,CAAoBklB,cAApB,GAAqCzhC,OAAO,CAAChqC,GAAR,EAArC;AACAjvB,UAAAA,IAAI,CAACsjC,KAAL,CAAWkyC,QAAX,CAAoB3sB,IAApB,GAA2B7oD,IAAI,CAACsjC,KAAL,CAAWkyC,QAAX,CAAoBi0B,iBAApB,GAAwCzpG,IAAI,CAACsjC,KAAL,CAAWkyC,QAAX,CAAoBklB,cAAvF;AACA16F,UAAAA,IAAI,CAACu4E,SAAL,GAAiBx/E,IAAI,CAACw/E,SAAtB;AACAtf,UAAAA,OAAO,CAAC0C,MAAR,GAAiB/jB,KAAjB,CAAuB,+BAAvB,EACG2jB,UADH,CACcxiE,IADd,EAEG2iE,uBAFH;AAGA17D,UAAAA,IAAI,CAACopG,WAAL;AACD,SAVD,CAUE,OAAO7zG,CAAP,EAAU;AACV0jE,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,mCAAvB,EACGshE,UADH,CACcxiE,IADd,EAEGuiE,aAFH,CAEiB/lE,CAFjB,EAGGmmE,uBAHH;AAID,SAfD,SAeU;AACR7tB,UAAAA,MAAM,CAACtxB,UAAP,CAAkB08C,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAAC6oG,YAAzB,CAAlB,EAA0D9B,4BAA1D;AACD;AACF,OApBF;AAqBCxjC,MAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAenH,IAAf,EAAqB;AAC5B,YAAI;AACFkgE,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,2BAAvB,EACGyhE,uBADH,GAEGH,UAFH,CAEc;AACVr7D,YAAAA,GAAG,EAAEA,GADK;AAEVnH,YAAAA,IAAI,EAAEA;AAFI,WAFd;AAOD,SARD,SAQU;AACR80C,UAAAA,MAAM,CAACtxB,UAAP,CAAkB08C,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAAC6oG,YAAzB,CAAlB,EAA0D/B,6BAA1D;AACD;AACF,OAjCF;AAkCC95B,MAAAA,WAAW,EAAE,YAAY;AACvBmtB,QAAAA,UAAU;AACX,OApCF;AAqCCltB,MAAAA,YAAY,EAAEhU,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAAC0pG,kBAAzB;AArCf,KAHH;AA4CD,GAhDD;;AAkDAzB,EAAAA,YAAY,CAACrvG,SAAb,CAAuBkwG,yBAAvB,GAAmD,UAAUnhC,QAAV,EAAoB;AACrE,QAAI3nE,IAAI,GAAG,IAAX;AACA,QAAI2H,MAAM,GAAGggE,QAAQ,IAAI,EAAzB;AACA,QAAIwyB,UAAU,GAAGlhC,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAACupG,cAAzB,CAAjB;AAEA,SAAKp5F,MAAL,CAAY9Z,IAAZ,CAAiB4iE,OAAO,CAACyR,aAAR,CAAsBi/B,uBAAvC,EAAgE,EAAhE,EAAoE;AAClE15E,MAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB,YAAI00E,aAAa,GAAG10E,IAAI,CAAC00E,aAAzB;AACAztE,QAAAA,IAAI,CAAC4pG,uBAAL,CAA6Bn8B,aAA7B;AACAztE,QAAAA,IAAI,CAAC6pG,kBAAL,CAAwBp8B,aAAxB;AACAztE,QAAAA,IAAI,CAAC8pG,2BAAL,CAAiCr8B,aAAjC;AACAztE,QAAAA,IAAI,CAAC+pG,2BAAL,CAAiCt8B,aAAjC;;AACA,YAAI9lE,MAAM,CAACohG,aAAX,EAA0B;AACxBl7D,UAAAA,MAAM,CAACtxB,UAAP,CAAkB08C,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAAC8oG,yBAAzB,EAAoDnhG,MAApD,CAAlB,EACEy/F,mCADF;AAED;AACF,OAXiE;AAYlE7jC,MAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAenH,IAAf,EAAqB;AAC5B,YAAI;AACFkgE,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,2CAAvB,EACGyhE,uBADH,GAEGH,UAFH,CAEc;AACVr7D,YAAAA,GAAG,EAAEA,GADK;AAEVnH,YAAAA,IAAI,EAAEA;AAFI,WAFd;AAMD,SAPD,SAOU;AACR,cAAI4O,MAAM,CAACohG,aAAX,EAA0B;AACxBl7D,YAAAA,MAAM,CAACtxB,UAAP,CAAkB08C,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAAC8oG,yBAAzB,CAAlB,EACE1B,mCADF,EACuCz/F,MADvC;AAED;AACF;AACF,OA1BiE;AA2BlEqlE,MAAAA,WAAW,EAAE,YAAY;AACvBmtB,QAAAA,UAAU;AACX,OA7BiE;AA8BlEltB,MAAAA,YAAY,EAAEhU,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAAC0pG,kBAAzB;AA9BoD,KAApE;AAgCD,GArCD;;AAuCAzB,EAAAA,YAAY,CAACrvG,SAAb,CAAuBixG,kBAAvB,GAA4C,UAAUp8B,aAAV,EAAyB9F,QAAzB,EAAmC;AAC7E,QAAI3nE,IAAI,GAAG,IAAX;AACA,QAAI2H,MAAM,GAAGggE,QAAQ,IAAI,EAAzB;AACAhgE,IAAAA,MAAM,CAACywE,UAAP,GAAoBzwE,MAAM,CAACywE,UAAP,IAAqBnf,OAAO,CAACof,kBAAjD;AAEA,SAAKloE,MAAL,CAAY9Z,IAAZ,CAAiB4iE,OAAO,CAACyR,aAAR,CAAsBs/B,gBAAvC,EAAyD;AACvDzxB,MAAAA,SAAS,EAAE5wE,MAAM,CAAC4wE,SAAP,IAAoB,IADwB;AAEvDH,MAAAA,UAAU,EAAEzwE,MAAM,CAACywE;AAFoC,KAAzD,EAIG;AACCnoD,MAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB,YAAIA,IAAI,CAACw/E,SAAT,EAAoB;AAClBv4E,UAAAA,IAAI,CAAC6pG,kBAAL,CAAwBp8B,aAAxB,EAAuC;AACrCx8C,YAAAA,MAAM,EAAE,CAACtpB,MAAM,CAACspB,MAAP,IAAiB,EAAlB,EAAsB3V,MAAtB,CAA6BviB,IAAI,CAACk4B,MAAlC,CAD6B;AAErCsnD,YAAAA,SAAS,EAAEx/E,IAAI,CAACw/E,SAFqB;AAGrCH,YAAAA,UAAU,EAAEzwE,MAAM,CAACywE;AAHkB,WAAvC;AAMD,SAPD,MAOO;AACL3K,UAAAA,aAAa,CAACgJ,WAAd,GAA4B,CAAC9uE,MAAM,CAACspB,MAAP,IAAiB,EAAlB,EAAsB3V,MAAtB,CAA6BviB,IAAI,CAACk4B,MAAlC,CAA5B;AACAjxB,UAAAA,IAAI,CAACiqG,wBAAL,CAA8Bx8B,aAA9B;AACD;AACF,OAbF;AAcClK,MAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAenH,IAAf,EAAqB;AAC5BkgE,QAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,oCAAvB,EACGyhE,uBADH,GAEGH,UAFH,CAEc;AACVr7D,UAAAA,GAAG,EAAEA,GADK;AAEVnH,UAAAA,IAAI,EAAEA;AAFI,SAFd;AAMD,OArBF;AAsBCi0E,MAAAA,WAAW,EAAE/T,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAACupG,cAAzB,CAtBd;AAuBCt8B,MAAAA,YAAY,EAAEhU,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAAC0pG,kBAAzB;AAvBf,KAJH;AA6BD,GAlCD;;AAoCAzB,EAAAA,YAAY,CAACrvG,SAAb,CAAuBgxG,uBAAvB,GAAiD,UAAUn8B,aAAV,EAAyB9F,QAAzB,EAAmC;AAClF,QAAI3nE,IAAI,GAAG,IAAX;AACA,QAAI2H,MAAM,GAAGggE,QAAQ,IAAI,EAAzB;AACAhgE,IAAAA,MAAM,CAACywE,UAAP,GAAoBzwE,MAAM,CAACywE,UAAP,IAAqBnf,OAAO,CAACof,kBAAjD;AAEA,SAAKloE,MAAL,CAAY9Z,IAAZ,CAAiB4iE,OAAO,CAACyR,aAAR,CAAsBw/B,qBAAvC,EAA8D;AAC5D3xB,MAAAA,SAAS,EAAE5wE,MAAM,CAAC4wE,SAAP,IAAoB,IAD6B;AAE5DH,MAAAA,UAAU,EAAEzwE,MAAM,CAACywE;AAFyC,KAA9D,EAIG;AACCnoD,MAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB,YAAIA,IAAI,CAACw/E,SAAT,EAAoB;AAClBv4E,UAAAA,IAAI,CAAC4pG,uBAAL,CAA6Bn8B,aAA7B,EAA4C;AAC1CyI,YAAAA,WAAW,EAAE,CAACvuE,MAAM,CAACuuE,WAAP,IAAsB,EAAvB,EAA2B56D,MAA3B,CAAkCviB,IAAI,CAACm9E,WAAvC,CAD6B;AAE1CqC,YAAAA,SAAS,EAAEx/E,IAAI,CAACw/E,SAF0B;AAG1CH,YAAAA,UAAU,EAAEzwE,MAAM,CAACywE;AAHuB,WAA5C;AAMD,SAPD,MAOO;AACL3K,UAAAA,aAAa,CAACyI,WAAd,GAA4B,CAACvuE,MAAM,CAACuuE,WAAP,IAAsB,EAAvB,EAA2B56D,MAA3B,CAAkCviB,IAAI,CAACm9E,WAAvC,CAA5B;AACAl2E,UAAAA,IAAI,CAACiqG,wBAAL,CAA8Bx8B,aAA9B;AACD;AACF,OAbF;AAcClK,MAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAenH,IAAf,EAAqB;AAC5BkgE,QAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,yCAAvB,EACGyhE,uBADH,GAEGH,UAFH,CAEc;AACVr7D,UAAAA,GAAG,EAAEA,GADK;AAEVnH,UAAAA,IAAI,EAAEA;AAFI,SAFd;AAMD,OArBF;AAsBCi0E,MAAAA,WAAW,EAAE/T,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAACupG,cAAzB,CAtBd;AAuBCt8B,MAAAA,YAAY,EAAEhU,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAAC0pG,kBAAzB;AAvBf,KAJH;AA6BD,GAlCD;;AAoCAzB,EAAAA,YAAY,CAACrvG,SAAb,CAAuBkxG,2BAAvB,GAAqD,UAAUr8B,aAAV,EAAyB9F,QAAzB,EAAmC;AACtF,QAAI3nE,IAAI,GAAG,IAAX;AACA,QAAI2H,MAAM,GAAGggE,QAAQ,IAAI,EAAzB;AACAhgE,IAAAA,MAAM,CAACywE,UAAP,GAAoBzwE,MAAM,CAACywE,UAAP,IAAqBnf,OAAO,CAACof,kBAAjD;AAEA,SAAKloE,MAAL,CAAY9Z,IAAZ,CAAiB4iE,OAAO,CAACyR,aAAR,CAAsBy/B,0BAAvC,EAAmE;AACjE5xB,MAAAA,SAAS,EAAE5wE,MAAM,CAAC4wE,SAAP,IAAoB,IADkC;AAEjEH,MAAAA,UAAU,EAAEzwE,MAAM,CAACywE;AAF8C,KAAnE,EAGG;AACCnoD,MAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB,YAAIA,IAAI,CAACw/E,SAAT,EAAoB;AAClBv4E,UAAAA,IAAI,CAAC8pG,2BAAL,CAAiCr8B,aAAjC,EAAgD;AAC9C28B,YAAAA,YAAY,EAAE,CAACziG,MAAM,CAACyiG,YAAP,IAAuB,EAAxB,EAA4B9uF,MAA5B,CAAmCviB,IAAI,CAACqxG,YAAxC,CADgC;AAE9C7xB,YAAAA,SAAS,EAAEx/E,IAAI,CAACw/E,SAF8B;AAG9CH,YAAAA,UAAU,EAAEzwE,MAAM,CAACywE;AAH2B,WAAhD;AAMD,SAPD,MAOO;AACL3K,UAAAA,aAAa,CAACyJ,iBAAd,GAAkC,CAACvvE,MAAM,CAACyiG,YAAP,IAAuB,EAAxB,EAA4B9uF,MAA5B,CAAmCviB,IAAI,CAACqxG,YAAxC,CAAlC;AACApqG,UAAAA,IAAI,CAACiqG,wBAAL,CAA8Bx8B,aAA9B;AACD;AACF,OAbF;AAcClK,MAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAenH,IAAf,EAAqB;AAC5BkgE,QAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,8CAAvB,EACGyhE,uBADH,GAEGH,UAFH,CAEc;AACVr7D,UAAAA,GAAG,EAAEA,GADK;AAEVnH,UAAAA,IAAI,EAAEA;AAFI,SAFd;AAMD,OArBF;AAsBCi0E,MAAAA,WAAW,EAAE/T,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAACupG,cAAzB,CAtBd;AAuBCt8B,MAAAA,YAAY,EAAEhU,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAAC0pG,kBAAzB;AAvBf,KAHH;AA4BD,GAjCD;;AAmCAzB,EAAAA,YAAY,CAACrvG,SAAb,CAAuBmxG,2BAAvB,GAAqD,UAAUt8B,aAAV,EAAyB9F,QAAzB,EAAmC;AACtF,QAAI3nE,IAAI,GAAG,IAAX;AACA,QAAI2H,MAAM,GAAGggE,QAAQ,IAAI,EAAzB;AACAhgE,IAAAA,MAAM,CAACywE,UAAP,GAAoBzwE,MAAM,CAACywE,UAAP,IAAqBnf,OAAO,CAACof,kBAAjD;AAEA,SAAKloE,MAAL,CAAY9Z,IAAZ,CAAiB4iE,OAAO,CAACyR,aAAR,CAAsB2/B,0BAAvC,EAAmE;AACjE97B,MAAAA,iBAAiB,EAAEd,aAAa,CAACW,cAAd,CAA6BG,iBADiB;AAEjEgK,MAAAA,SAAS,EAAE5wE,MAAM,CAAC4wE,SAAP,IAAoB,IAFkC;AAGjEH,MAAAA,UAAU,EAAEzwE,MAAM,CAACywE;AAH8C,KAAnE,EAIG;AACCnoD,MAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB,YAAIA,IAAI,CAACw/E,SAAT,EAAoB;AAClBv4E,UAAAA,IAAI,CAAC+pG,2BAAL,CAAiCt8B,aAAjC,EAAgD;AAC9C28B,YAAAA,YAAY,EAAE,CAACziG,MAAM,CAACowE,MAAP,IAAiB,EAAlB,EAAsBz8D,MAAtB,CAA6BviB,IAAI,CAACg/E,MAAlC,CADgC;AAE9CQ,YAAAA,SAAS,EAAEx/E,IAAI,CAACw/E,SAF8B;AAG9CH,YAAAA,UAAU,EAAEzwE,MAAM,CAACywE;AAH2B,WAAhD;AAMD,SAPD,MAOO;AACL3K,UAAAA,aAAa,CAACW,cAAd,CAA6B2J,MAA7B,GAAsC,CAACpwE,MAAM,CAACowE,MAAP,IAAiB,EAAlB,EAAsBz8D,MAAtB,CAA6BviB,IAAI,CAACg/E,MAAlC,CAAtC;AACA/3E,UAAAA,IAAI,CAACiqG,wBAAL,CAA8Bx8B,aAA9B;AACD;AACF,OAbF;AAcClK,MAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAenH,IAAf,EAAqB;AAC5BkgE,QAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,8CAAvB,EACGyhE,uBADH,GAEGH,UAFH,CAEc;AACVr7D,UAAAA,GAAG,EAAEA,GADK;AAEVnH,UAAAA,IAAI,EAAEA;AAFI,SAFd;AAMD,OArBF;AAsBCi0E,MAAAA,WAAW,EAAE/T,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAACupG,cAAzB,CAtBd;AAuBCt8B,MAAAA,YAAY,EAAEhU,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAAC0pG,kBAAzB;AAvBf,KAJH;AA6BD,GAlCD;;AAoCAzB,EAAAA,YAAY,CAACrvG,SAAb,CAAuBywG,gBAAvB,GAA0C,UAAUF,WAAV,EAAuBx8F,OAAvB,EAAgC;AACxE,QAAI3M,IAAI,GAAG,IAAX;AAEA,SAAKmQ,MAAL,CAAY9Z,IAAZ,CAAiBsW,OAAO,CAAC+R,MAAzB,EAAiC/R,OAAO,CAAChF,MAAzC,EAAiD;AAC/CsoB,MAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvB,YAAI2W,QAAQ,GAAGupD,OAAO,CAAC2N,YAAR,CAAqBE,cAArB,CAAoC7N,OAAO,CAAC0F,SAAR,CAAkBuN,YAAtD,EAAoEv/D,OAApE,EAA6E5T,IAA7E,CAAf;AACAowG,QAAAA,WAAW,CAAChqC,cAAZ,CAA2BzvD,QAAQ,CAAC6V,KAApC,EAA2C7V,QAA3C;AACD,OAJ8C;AAK/C6zD,MAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAenH,IAAf,EAAqB;AAC5B,YAAI2W,QAAQ,GAAGupD,OAAO,CAAC2N,YAAR,CAAqBE,cAArB,CAAoC7N,OAAO,CAAC0F,SAAR,CAAkBuN,YAAtD,EAAoEv/D,OAApE,EAA6E5T,IAA7E,EAAmFqI,IAAI,CAACsgB,SAAL,CAAexhB,GAAf,CAAnF,CAAf;AACAipG,QAAAA,WAAW,CAAChqC,cAAZ,CAA2BzvD,QAAQ,CAAC6V,KAApC,EAA2C7V,QAA3C;AACAupD,QAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,yBAAvB,EAAkD0S,OAAO,CAAC+R,MAA1D,EACG68C,UADH,CACc;AAAE5uD,UAAAA,OAAO,EAAE3M,IAAI,CAACsqG,eAAL,CAAqB39F,OAArB,CAAX;AAA0C+C,UAAAA,QAAQ,EAAEA;AAApD,SADd,EAEG4rD,aAFH,CAEiBp7D,GAFjB,EAGGw7D,uBAHH;AAID,OAZ8C;AAa/CsR,MAAAA,WAAW,EAAE/T,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAACupG,cAAzB;AAbkC,KAAjD;AAeD,GAlBD;AAoBA;AACF;AACA;;;AACEtB,EAAAA,YAAY,CAACrvG,SAAb,CAAuB0wG,mBAAvB,GAA6C,UAAUH,WAAV,EAAuBoB,MAAvB,EAA+B59F,OAA/B,EAAwC;AACnF,QAAI69F,kBAAkB,GAAG,KAAKtsC,OAA9B;AACA,QAAIxuD,QAAQ,GAAG,IAAf;;AAEA,YAAQ/C,OAAO,CAAC+R,MAAhB;AACE,WAAKu6C,OAAO,CAACmS,aAAR,CAAsBka,aAA3B;AACE,YAAIuN,QAAQ,GAAG,KAAKwV,WAAL,CAAiBd,SAAjB,CAA2B56F,OAAO,CAAChF,MAAR,CAAei9E,KAA1C,CAAf;AACA,YAAIgO,QAAQ,GAAGriF,OAAO,CAACsiF,QAAD,CAAP,IAAqBA,QAAQ,KAAK0X,MAAjD;AACA,aAAKlC,WAAL,CAAiBb,SAAjB,CAA2B76F,OAAO,CAAChF,MAAR,CAAei9E,KAA1C,EAAiD2lB,MAAjD;AACA76F,QAAAA,QAAQ,GAAGupD,OAAO,CAAC2N,YAAR,CAAqBE,cAArB,CAAoC7N,OAAO,CAAC0F,SAAR,CAAkBqJ,eAAtD,EAAuEr7D,OAAvE,EAAgF;AACzFkmF,UAAAA,QAAQ,EAAE0X,MAD+E;AAEzF3X,UAAAA,QAAQ,EAAEA,QAF+E;AAGzFhO,UAAAA,KAAK,EAAEj4E,OAAO,CAAChF,MAAR,CAAei9E;AAHmE,SAAhF,CAAX;;AAKA,YAAIgO,QAAJ,EAAc;AACZ4X,UAAAA,kBAAkB,CAACrrC,cAAnB,CAAkCzvD,QAAQ,CAAC6V,KAA3C,EAAkD7V,QAAlD;AACD;;AACD;;AAEF,WAAKupD,OAAO,CAACmS,aAAR,CAAsB6Z,YAA3B;AACE,YAAI4N,QAAQ,GAAG,KAAKwV,WAAL,CAAiBd,SAAjB,CAA2B56F,OAAO,CAAChF,MAAR,CAAei9E,KAA1C,CAAf;;AACA,YAAI,CAACiO,QAAL,EAAe;AACb,eAAKwV,WAAL,CAAiBb,SAAjB,CAA2B76F,OAAO,CAAChF,MAAR,CAAei9E,KAA1C,EAAiD2lB,MAAjD;AACA1X,UAAAA,QAAQ,GAAG0X,MAAX;AACD;;AACD76F,QAAAA,QAAQ,GAAGupD,OAAO,CAAC2N,YAAR,CAAqBE,cAArB,CAAoC7N,OAAO,CAAC0F,SAAR,CAAkBqJ,eAAtD,EAAuEr7D,OAAvE,EAAgF;AACzFkmF,UAAAA,QAAQ,EAAEA,QAD+E;AAEzF3N,UAAAA,QAAQ,EAAEqlB,MAAM,KAAK1X,QAFoE;AAGzFjO,UAAAA,KAAK,EAAEj4E,OAAO,CAAChF,MAAR,CAAei9E;AAHmE,SAAhF,CAAX;AAKA;;AAEF;AACE,cAAM,IAAI3uF,KAAJ,CAAU,4BAA4B0W,OAAO,CAAC+R,MAA9C,CAAN;AA7BJ;;AAgCAyqF,IAAAA,WAAW,CAAChqC,cAAZ,CAA2BzvD,QAAQ,CAAC6V,KAApC,EAA2C7V,QAA3C;AACD,GArCD;;AAuCAu4F,EAAAA,YAAY,CAACrvG,SAAb,CAAuBqxG,wBAAvB,GAAkD,UAAUx8B,aAAV,EAAyB;AACzE,QAAIA,aAAa,CAACyI,WAAd,IACFzI,aAAa,CAACyJ,iBADZ,IAEFzJ,aAAa,CAACgJ,WAFZ,IAGFhJ,aAAa,CAACW,cAAd,CAA6B2J,MAH/B,EAGuC;AAErC,WAAKz0C,KAAL,GAAa,KAAKA,KAAL,IAAc,EAA3B;AACA,WAAKA,KAAL,CAAWmqC,aAAX,GAA2BA,aAA3B;AACA,WAAK27B,WAAL;AAED,KATD,MASO;AACLnwC,MAAAA,OAAO,CAAC0C,MAAR,GAAiB/jB,KAAjB,CAAuB,+EAAvB,EACG8jB,uBADH;AAED;AACF,GAdD;;AAgBAusC,EAAAA,YAAY,CAACrvG,SAAb,CAAuBwwG,WAAvB,GAAqC,YAAY;AAC/C,QAAI,CAAC,KAAK9lE,KAAV,EAAiB;AACf21B,MAAAA,OAAO,CAAC0C,MAAR,GAAiB/jB,KAAjB,CAAuB,qEAAvB,EACG8jB,uBADH;AAGD,KAJD,MAIO,IAAI,CAAC,KAAKp4B,KAAL,CAAWkyC,QAAhB,EAA0B;AAC/Bvc,MAAAA,OAAO,CAAC0C,MAAR,GAAiB/jB,KAAjB,CAAuB,gEAAvB,EACG8jB,uBADH;AAGD,KAJM,MAIA,IAAI,CAAC,KAAKp4B,KAAL,CAAWmqC,aAAhB,EAA+B;AACpCxU,MAAAA,OAAO,CAAC0C,MAAR,GAAiB/jB,KAAjB,CAAuB,qEAAvB,EACG8jB,uBADH;AAGD,KAJM,MAIA;AACL;AACA,WAAKp4B,KAAL,CAAWkyC,QAAX,CAAoB33D,MAApB,GAA6B,KAAKylB,KAAL,CAAW7oC,KAAxC,CAFK,CAIL;;AACA,UAAI,KAAK6oC,KAAL,CAAWkyC,QAAX,CAAoBa,QAApB,IAAgC,KAAK/yC,KAAL,CAAWkyC,QAAX,CAAoBa,QAApB,CAA6B//E,MAA7B,GAAsC,CAA1E,EAA6E;AAC3E,aAAKgtC,KAAL,CAAWkyC,QAAX,CAAoBa,QAApB,CAA6B5oD,IAA7B,CAAkC,UAAUg9E,QAAV,EAAoBC,QAApB,EAA8B;AAC9D,iBAAOD,QAAQ,CAAChwG,KAAT,CAAe45D,SAAf,CAAyB7tD,OAAzB,KAAqCkkG,QAAQ,CAACjwG,KAAT,CAAe45D,SAAf,CAAyB7tD,OAAzB,EAA5C;AACD,SAFD;AAGD;;AAED,WAAK88B,KAAL,CAAWkyC,QAAX,CAAoBa,QAApB,CAA6B5xD,OAA7B,CAAqC,UAAU6xD,OAAV,EAAmB;AACtDA,QAAAA,OAAO,CAACz4D,MAAR,GAAiBy4D,OAAO,CAAC77E,KAAzB;AAEA67E,QAAAA,OAAO,CAACyE,WAAR,CAAoBt2D,OAApB,CAA4B,UAAUkmF,UAAV,EAAsB;AAChDA,UAAAA,UAAU,CAACC,OAAX,GAAqBD,UAAU,CAACvoG,QAAhC;AACD,SAFD;AAGD,OAND;AAQA,WAAKkhC,KAAL,CAAWmqC,aAAX,CAAyBW,cAAzB,CAAwCI,oBAAxC,CAA6DqJ,OAA7D,GACE,KAAKv0C,KAAL,CAAWmqC,aAAX,CAAyBW,cAAzB,CAAwCI,oBAAxC,CAA6DE,QAD/D;AAEA,WAAKprC,KAAL,CAAWmqC,aAAX,CAAyBW,cAAzB,CAAwC2J,MAAxC,CAA+CtzD,OAA/C,CAAuD,UAAU0iC,KAAV,EAAiB;AACtEA,QAAAA,KAAK,CAAC0wB,OAAN,GAAgB1wB,KAAK,CAACunB,QAAtB;AACD,OAFD;AAGA,WAAKprC,KAAL,CAAWkyC,QAAX,CAAoBa,QAApB,CAA6B5xD,OAA7B,CAAqC,UAAU6xD,OAAV,EAAmB;AACtD;AACA,YAAIA,OAAO,CAACnvB,KAAR,KAAkB1nD,SAAtB,EAAiC;AAC/B62E,UAAAA,OAAO,CAACnvB,KAAR,CAAc0wB,OAAd,GAAwBvB,OAAO,CAACnvB,KAAR,CAAcunB,QAAtC;AACD;AACF,OALD;AAMA,WAAKprC,KAAL,CAAWmqC,aAAX,CAAyBW,cAAzB,CAAwCsqB,gBAAxC,GACE,KAAKp1D,KAAL,CAAWmqC,aAAX,CAAyBW,cAAzB,CAAwCG,iBAD1C;AAGA,WAAKrQ,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAACsN,WAAR,CAAoB6xB,MAAhD,EAAwD,KAAK90D,KAA7D;AACD;AACF,GAhDD;AAkDF;AACA;AACA;AACA;;;AACE2kE,EAAAA,YAAY,CAACrvG,SAAb,CAAuBgwG,eAAvB,GAAyC,YAAY;AACnD,QAAI5oG,IAAI,GAAG,IAAX;AACA,QAAImQ,MAAM,GAAG8oD,OAAO,CAAC0K,IAAR,CAAa0T,SAAb,EAAb;AACA,QAAI8iB,UAAU,GAAGlhC,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAACupG,cAAzB,CAAjB;AACA,QAAItP,cAAc,GAAGhhC,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAAC0pG,kBAAzB,CAArB;AACA,WAAO,IAAIzlG,OAAJ,CAAY,UAAUpD,OAAV,EAAmBwzB,MAAnB,EAA2B;AAC5ClkB,MAAAA,MAAM,CAAC9Z,IAAP,CAAY4iE,OAAO,CAACyR,aAAR,CAAsBkZ,gBAAlC,EAAoD;AAAED,QAAAA,aAAa,EAAE1qB,OAAO,CAAC4G,eAAR,CAAwBE;AAAzC,OAApD,EAA2G;AACzG9vC,QAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvBkgE,UAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,2BAAtB,EAAmDoB,uBAAnD;AACA76D,UAAAA,OAAO,CAAC9H,IAAD,CAAP;AACD,SAJwG;AAKzGwqE,QAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAenH,IAAf,EAAqB;AAC5BkgE,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,wBAAvB,EACGyhE,uBADH,GAEGH,UAFH,CAEc;AACVr7D,YAAAA,GAAG,EAAEA,GADK;AAEVnH,YAAAA,IAAI,EAAEA;AAFI,WAFd;AAMAs7B,UAAAA,MAAM,CAACp+B,KAAK,CAAC,wBAAD,CAAN,CAAN;AACD,SAbwG;AAczG+2E,QAAAA,WAAW,EAAE,YAAY;AACvB/T,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,8BAAvB,EAAuDyhE,uBAAvD;AACArnC,UAAAA,MAAM,CAACp+B,KAAK,CAAC,qDAAD,CAAN,CAAN;AACAkkG,UAAAA,UAAU;AACX,SAlBwG;AAmBzGltB,QAAAA,YAAY,EAAE,YAAY;AACxBhU,UAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,uCAAvB,EAAgEyhE,uBAAhE;AACArnC,UAAAA,MAAM,CAACp+B,KAAK,CAAC,qDAAD,CAAN,CAAN;AACAgkG,UAAAA,cAAc;AACf;AAvBwG,OAA3G;AAyBD,KA1BM,CAAP;AA2BD,GAhCD;AAmCA;AACF;AACA;AACA;;;AACEgO,EAAAA,YAAY,CAACrvG,SAAb,CAAuB+vG,qBAAvB,GAA+C,YAAY;AACzD,QAAI3oG,IAAI,GAAG,IAAX;AACA,QAAI4nE,SAAS,GAAG,EAAhB;AACA,QAAIijC,UAAU,GAAG7qG,IAAI,CAACsoG,UAAL,CAAgB38F,KAAhB,EAAjB;AACA3L,IAAAA,IAAI,CAACsoG,UAAL,GAAkB,EAAlB;AACAuC,IAAAA,UAAU,CAACpmF,OAAX,CAAmB,UAAUvG,GAAV,EAAe;AAChC0pD,MAAAA,SAAS,CAACvjE,IAAV,CAAe;AACbgwD,QAAAA,SAAS,EAAEn2C,GAAG,CAACV,IADF;AAEbi9C,QAAAA,SAAS,EAAEv8C,GAAG,CAACu8C,SAFF;AAGbn6D,QAAAA,OAAO,EAAE4d,GAAG,CAAC4sB;AAHA,OAAf;AAKD,KAND;AAOA,SAAK36B,MAAL,CAAY9Z,IAAZ,CAAiB4iE,OAAO,CAACyR,aAAR,CAAsBogC,gBAAvC,EAAyD;AAAEljC,MAAAA,SAAS,EAAEA;AAAb,KAAzD,EAAmF;AACjF33C,MAAAA,OAAO,EAAE,UAAUl3B,IAAV,EAAgB;AACvBkgE,QAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,6BAAtB,EAAqDoB,uBAArD;AACD,OAHgF;AAIjF6H,MAAAA,OAAO,EAAE,UAAUrjE,GAAV,EAAenH,IAAf,EAAqB;AAC5BkgE,QAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,0BAAvB,EACGshE,UADH,CACcxiE,IADd,EACoBuiE,aADpB,CACkCp7D,GADlC,EAEGw7D,uBAFH;AAGD,OARgF;AASjFsR,MAAAA,WAAW,EAAE/T,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAACupG,cAAzB;AAToE,KAAnF;AAWD,GAvBD;;AAyBAtB,EAAAA,YAAY,CAACrvG,SAAb,CAAuB2wG,cAAvB,GAAwC,YAAY;AAClD,QAAIvpG,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAAC0F,SAAR,CAAkBs2B,SAA9C;AACD,GAHD;;AAKAgT,EAAAA,YAAY,CAACrvG,SAAb,CAAuB8wG,kBAAvB,GAA4C,YAAY;AACtD,QAAI1pG,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAACk+D,OAAL,CAAaiB,cAAb,CAA4BlG,OAAO,CAAC0F,SAAR,CAAkBu7B,aAA9C;AACD,GAHD;;AAKA+N,EAAAA,YAAY,CAACrvG,SAAb,CAAuBowG,cAAvB,GAAwC,YAAY;AAClD,QAAIhpG,IAAI,GAAG,IAAX;AACA,QAAI+qG,cAAc,GAAG,IAAIrkG,IAAJ,CAAS1G,IAAI,CAACmoG,QAAL,CAAc5T,mBAAvB,CAArB;AACA,QAAIyW,gBAAgB,GAAG,IAAItkG,IAAJ,GAAWF,OAAX,EAAvB;AACA,QAAIykG,UAAU,GAAG,KAAK,EAAL,GAAU,IAA3B,CAJkD,CAMlD;;AACA,QAAIF,cAAc,CAACvkG,OAAf,KAA4BwkG,gBAAgB,GAAGC,UAAnD,EAAgE;AAC9DhyC,MAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,2BAA2BywC,cAA3B,GAA4C,qCAAlE,EACGrvC,uBADH;AAEAzC,MAAAA,OAAO,CAACmK,OAAR,CAAgBnK,OAAO,CAACmF,KAAR,CAAcp+D,IAAd,EAAoBA,IAAI,CAAC0zF,SAAzB,CAAhB,EAAqDwT,8BAArD,EAAqFC,0BAArF;AACD;AACF,GAZD;;AAeAc,EAAAA,YAAY,CAACrvG,SAAb,CAAuB86F,SAAvB,GAAmC,UAAUv8D,SAAV,EAAqB;AACtD,QAAIn3B,IAAI,GAAG,IAAX;AACAi5D,IAAAA,OAAO,CAAC0K,IAAR,CAAa+vB,SAAb,CAAuB,KAAKyU,QAAL,CAAcxU,iBAArC,EAAwD1wB,IAAxD,CAA6D,UAAUvzD,QAAV,EAAoB;AAC/E,UAAIw7F,UAAU,GAAG,IAAIxkG,IAAJ,CAASgJ,QAAQ,CAACw7F,UAAlB,CAAjB;AACAjyC,MAAAA,OAAO,CAAC0C,MAAR,GAAiBrB,IAAjB,CAAsB,qDAAtB,EAA6E4wC,UAA7E,EACGxvC,uBADH;AAEA17D,MAAAA,IAAI,CAACmoG,QAAL,CAAc57B,SAAd,GAA0B78D,QAAQ,CAACy7F,WAAnC;AACAnrG,MAAAA,IAAI,CAACmoG,QAAL,CAAc5T,mBAAd,GAAoC2W,UAApC;AACAjyC,MAAAA,OAAO,CAAC0K,IAAR,CAAausB,UAAb,CAAwBlwF,IAAI,CAACmoG,QAA7B;AACAlvC,MAAAA,OAAO,CAAC0K,IAAR,CAAawsB,kBAAb,CAAgCnwF,IAAI,CAACmoG,QAArC;AACAhxE,MAAAA,SAAS,CAAClH,OAAV;AACD,KATD,EASGkzC,KATH,CASS,UAAUzzD,QAAV,EAAoB;AAC3BupD,MAAAA,OAAO,CAAC0C,MAAR,GAAiB1hE,KAAjB,CAAuB,mCAAvB,EAA4DyV,QAAQ,CAACmO,MAArE,EACG69C,uBADH;;AAEA,UAAIhsD,QAAQ,CAACmO,MAAT,KAAoB,GAAxB,EAA6B;AAC3B7d,QAAAA,IAAI,CAACupG,cAAL;AACD,OAFD,MAEO;AACLpyE,QAAAA,SAAS,CAACosC,OAAV;AACD;AACF,KAjBD;AAkBD,GApBD;AAsBA;AACF;AACA;;;AACE0kC,EAAAA,YAAY,CAACrvG,SAAb,CAAuB0xG,eAAvB,GAAyC,UAAU39F,OAAV,EAAmB;AAC1D,QAAIy+F,WAAW,GAAG,EAAlB;;AAEA,SAAK,IAAIC,IAAT,IAAiB1+F,OAAjB,EAA0B;AACxB,UAAI0+F,IAAI,KAAK,QAAb,EAAuB;AACrB,YAAIC,UAAU,GAAG,EAAjB;;AACA,aAAK,IAAIC,IAAT,IAAiB5+F,OAAO,CAAChF,MAAzB,EAAiC;AAC/B,cAAI4jG,IAAI,KAAK,gBAAb,EAA+B;AAC7BD,YAAAA,UAAU,CAACC,IAAD,CAAV,GAAmB5+F,OAAO,CAAChF,MAAR,CAAe4jG,IAAf,CAAnB;AACD;AACF;;AAEDH,QAAAA,WAAW,CAACzjG,MAAZ,GAAqB2jG,UAArB;AACD,OATD,MASO;AACLF,QAAAA,WAAW,CAACC,IAAD,CAAX,GAAoB1+F,OAAO,CAAC0+F,IAAD,CAA3B;AACD;AACF;;AAED,WAAOD,WAAP;AACD,GAnBD;AAqBA;;;AACAnyC,EAAAA,OAAO,CAACw7B,MAAR,CAAe+W,IAAf,GAAsB,YAAY;AAChCvyC,IAAAA,OAAO,CAACw7B,MAAR,CAAegX,YAAf,GAA8B,IAAIxD,YAAJ,EAA9B;AACD,GAFD;AAID,CAhxBD;AAkxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,CAAC,YAAY;AACX,MAAIp6D,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;;AAEAA,EAAAA,OAAO,CAACyyC,mBAAR,GAA8B,UAAUC,SAAV,EAAqBrpF,QAArB,EAA+B;AAC3D,QAAIrgB,MAAM,GAAGg3D,OAAO,CAAC0C,MAAR,EAAb;AACA,QAAIiwC,YAAY,GAAG3yC,OAAO,CAACc,YAAR,CAAqBG,IAAxC;;AAEA,QAAI2xC,mBAAmB,GAAG,YAAY;AACpCzL,MAAAA,qBAAqB,CAAC,4BAAD,EAA+BuL,SAAS,CAACvjC,SAAzC,CAArB;AACAnmE,MAAAA,MAAM,CAACq4D,IAAP,CAAYsxC,YAAZ,EAA0B,4BAA1B,EACGrwC,UADH,CACcowC,SADd,EACyBjwC,uBADzB;AAGAzC,MAAAA,OAAO,CAAC6yC,WAAR,CAAoBxe,eAApB,CAAoC;AAClCC,QAAAA,YAAY,EAAE;AACZtrF,UAAAA,MAAM,EAAEA;AADI,SADoB;AAIlCD,QAAAA,MAAM,EAAEsgB,QAAQ,CAACtgB;AAJiB,OAApC;AAOA;;AACA,UAAI+pG,UAAU,GAAG9yC,OAAO,CAAC6yC,WAAR,CAAoB5oF,MAApB,CAA2B;AAC1C8oF,QAAAA,WAAW,EAAEL,SAD6B;AAE1Cx+F,QAAAA,IAAI,EAAE,OAFoC;AAG1C8+F,QAAAA,gBAAgB,EAAEhzC,OAAO,CAAC0K,IAAR,CAAa62B,mBAAb;AAHwB,OAA3B,CAAjB;AAMA0R,MAAAA,yBAAyB,CAACH,UAAD,CAAzB;AACA,aAAOA,UAAU,CACd9yC,OADI,GAEJgK,IAFI,CAEC,UAAUlqE,IAAV,EAAgB;AACpBkJ,QAAAA,MAAM,CAACq4D,IAAP,CAAYsxC,YAAZ,EAA0B,wDAA1B,EAAoFD,SAAS,CAACvjC,SAA9F,EACG1M,uBADH;AAEA0kC,QAAAA,qBAAqB,CAAC,uCAAD,EAA0CuL,SAAS,CAACvjC,SAApD,CAArB;AACA,eAAO2jC,UAAP;AACD,OAPI,EAQJ5oC,KARI,CAQE,UAAUlpE,KAAV,EAAiB;AACtBgI,QAAAA,MAAM,CAAChI,KAAP,CAAa2xG,YAAb,EAA2B,mDAA3B,EAAgFD,SAAS,CAACvjC,SAA1F,EACG9M,aADH,CACiBrhE,KADjB,EACwByhE,uBADxB;AAEA0kC,QAAAA,qBAAqB,CAAC,oCAAD,EAAuCuL,SAAS,CAACvjC,SAAjD,EAA4DnuE,KAA5D,CAArB;AACA,cAAMA,KAAN;AACD,OAbI,CAAP;AAcD,KAlCD;;AAoCA,QAAImmG,qBAAqB,GAAG,UAAU7sE,SAAV,EAAqBx6B,IAArB,EAA2B;AACrDkgE,MAAAA,OAAO,CAACuK,aAAR,CAAsB;AACpBjjE,QAAAA,IAAI,EAAEgzB,SADc;AAEpB60C,QAAAA,SAAS,EAAEujC,SAAS,CAACvjC,SAFD;AAGpBrvE,QAAAA,IAAI,EAAEA,IAAI,IAAI4yG;AAHM,OAAtB;AAKD,KAND;;AAQA,QAAIO,yBAAyB,GAAG,UAAUH,UAAV,EAAsB;AACpDA,MAAAA,UAAU,CAACI,kBAAX,CAA8B,UAAUpzG,IAAV,EAAgB;AAC5CkJ,QAAAA,MAAM,CAAChI,KAAP,CAAa2xG,YAAb,EAA2B,gCAA3B,EACGtwC,aADH,CACiBviE,IADjB,EACuB2iE,uBADvB;AAEA0kC,QAAAA,qBAAqB,CAAC,gCAAD,EAAmCrnG,IAAnC,CAArB;AACD,OAJD;AAMAgzG,MAAAA,UAAU,CAACK,uBAAX,CAAmC,UAAUrzG,IAAV,EAAgB;AACjDkJ,QAAAA,MAAM,CAACq4D,IAAP,CAAYsxC,YAAZ,EAA0B,qCAA1B,EACGrwC,UADH,CACcxiE,IADd,EACoB2iE,uBADpB;AAEA0kC,QAAAA,qBAAqB,CAAC,qCAAD,EAAwCrnG,IAAxC,CAArB;AACD,OAJD;AAKD,KAZD;;AAcA,WAAO;AACL7B,MAAAA,GAAG,EAAE,YAAY;AACf,eAAO20G,mBAAmB,EAA1B;AACD;AAHI,KAAP;AAKD,GAnED;AAoED,CAzED;AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,CAAC,YAAY;AACX,MAAIh+D,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;;AAEAA,EAAAA,OAAO,CAACu7B,YAAR,GAAuB,UAAU7sF,MAAV,EAAkB;AACvC;AACA,QAAI0kG,gBAAgB,GAAG,EAAvB;AACA,QAAIC,aAAa,GAAG,IAAI/iB,GAAJ,EAApB;AAEA,QAAItnF,MAAM,GAAGg3D,OAAO,CAAC0C,MAAR,EAAb;AACA,QAAIiwC,YAAY,GAAG3yC,OAAO,CAACc,YAAR,CAAqBG,IAAxC;AAEA,QAAI53C,QAAQ,GAAG22C,OAAO,CAACl3D,KAAR,CAAc,EAAd,EAAkB4F,MAAlB,KAA6B,EAA5C;AACA2a,IAAAA,QAAQ,CAACtgB,MAAT,GAAmBsgB,QAAQ,CAACtgB,MAAT,IAAmB,WAAtC,CATuC,CASY;;AAEnD,QAAI4gF,kBAAkB,GAAG,UAAU2pB,aAAV,EAAyB;AAChD,UAAIpzB,YAAY,GAAGozB,aAAa,CAAC9uB,eAAd,EAAnB;AACA,UAAIkuB,SAAS,GAAGY,aAAa,CAACltB,YAAd,EAAhB;AACA;;AACA,UAAI,CAACssB,SAAL,EAAgB;AACd1pG,QAAAA,MAAM,CAAChI,KAAP,CAAa2xG,YAAb,EAA2B,gDAA3B,EACGrwC,UADH,CACcgxC,aADd,EAC6B7wC,uBAD7B;AAEA,eAAOz3D,OAAO,CAACowB,MAAR,CAAe,gDAAf,CAAP;AACD;;AAED,UAAI,CAACg4E,gBAAgB,CAAClzB,YAAD,CAArB,EAAqC;AACnCl3E,QAAAA,MAAM,CAACq4D,IAAP,CAAYsxC,YAAZ,EAA0B,kCAA1B,EAA8DW,aAAa,CAAC3vB,YAAd,EAA9D,EACGrhB,UADH,CACcgxC,aADd,EAC6B7wC,uBAD7B;;AAEA,gBAAQ6wC,aAAa,CAAC3vB,YAAd,EAAR;AACE,eAAK3jB,OAAO,CAAC6Y,SAAR,CAAkB5X,IAAvB;AACE,mBAAOmyC,gBAAgB,CAAClzB,YAAD,CAAhB,GAAiC,IAAIlgB,OAAO,CAACyyC,mBAAZ,CAAgCa,aAAa,CAACltB,YAAd,EAAhC,EAA8D/8D,QAA9D,EAAwEprB,GAAxE,EAAxC;;AACF,eAAK+hE,OAAO,CAAC6Y,SAAR,CAAkB7X,SAAvB;AACE,mBAAOoyC,gBAAgB,CAAClzB,YAAD,CAAhB,GAAiC,IAAIlgB,OAAO,CAACuzC,wBAAZ,CAAqCD,aAAa,CAACltB,YAAd,EAArC,EAAmEnoF,GAAnE,EAAxC;;AACF,eAAK+hE,OAAO,CAAC6Y,SAAR,CAAkB3X,IAAvB;AACE,mBAAOkyC,gBAAgB,CAAClzB,YAAD,CAAhB,GAAiC,IAAIlgB,OAAO,CAACwzC,mBAAZ,CAAgCF,aAAa,CAACltB,YAAd,EAAhC,EAA8DnoF,GAA9D,EAAxC;;AACF;AACE+K,YAAAA,MAAM,CAAChI,KAAP,CAAa2xG,YAAb,EAA2B,6BAA3B,EAA0DW,aAAa,CAAC3vB,YAAd,EAA1D,EACGlhB,uBADH;AAEA,mBAAOz3D,OAAO,CAACowB,MAAR,EAAP;AAVJ;AAYD,OAfD,MAeO;AACL,eAAOg4E,gBAAgB,CAAClzB,YAAD,CAAvB;AACD;AACF,KA5BD;AA8BA;;;AACA,QAAIuzB,kBAAkB,GAAG,UAAUH,aAAV,EAAyB;AAChD,aAAOA,aAAa,CAACjxB,QAAd,EAAP;AACD,KAFD;;AAIA,QAAIpkF,GAAG,GAAG,UAAUq1G,aAAV,EAAyB;AACjC,UAAIG,kBAAkB,CAACH,aAAD,CAAtB,EAAuC;AACrC,eAAO3pB,kBAAkB,CAAC2pB,aAAD,CAAzB;AACD,OAFD,MAEO;AACLtvB,QAAAA,OAAO,CAACsvB,aAAa,CAAC9uB,eAAd,EAAD,CAAP;AACA,eAAOx5E,OAAO,CAACowB,MAAR,CAAe,6DAAf,CAAP;AACD;AACF,KAPD;;AASA,QAAI4oD,OAAO,GAAG,UAAU9D,YAAV,EAAwB;AACpC,UAAIkzB,gBAAgB,CAAClzB,YAAD,CAAhB,IAAkC,CAACmzB,aAAa,CAAC1gB,GAAd,CAAkBzS,YAAlB,CAAvC,EAAwE;AACtEl3E,QAAAA,MAAM,CAACq4D,IAAP,CACEsxC,YADF,EAEE,mCAFF,EAGEzyB,YAHF;AAKAmzB,QAAAA,aAAa,CAACr2F,GAAd,CAAkBkjE,YAAlB;AACAkzB,QAAAA,gBAAgB,CAAClzB,YAAD,CAAhB,CACGlW,IADH,CACQ,YAAW;AACf,cAAI,OAAO8oC,UAAU,CAACY,OAAlB,KAA8B,UAAlC,EAA8CZ,UAAU,CAACY,OAAX;AAC9C,iBAAON,gBAAgB,CAAClzB,YAAD,CAAvB;AACAmzB,UAAAA,aAAa,CAAC3gB,MAAd,CAAqBxS,YAArB;AACD,SALH,EAMGhW,KANH,CAMS,YAAW;AAChB,iBAAOkpC,gBAAgB,CAAClzB,YAAD,CAAvB;AACAmzB,UAAAA,aAAa,CAAC3gB,MAAd,CAAqBxS,YAArB;AACD,SATH;AAUD;AACF,KAnBD;;AAqBA,WAAO;AACLjiF,MAAAA,GAAG,EAAEA,GADA;AAEL+lF,MAAAA,OAAO,EAAEA;AAFJ,KAAP;AAID,GAhFD;AAiFD,CAtFD;AAwFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,CAAC,YAAY;AACX,MAAIpvC,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB,CAHW,CAKX;;AACAA,EAAAA,OAAO,CAACuzC,wBAAR,GAAmC,UAAUb,SAAV,EAAqB;AACtD,WAAO;AACLz0G,MAAAA,GAAG,EAAE,YAAY;AACf,eAAO+M,OAAO,CAACpD,OAAR,CAAgB8qG,SAAhB,CAAP;AACD;AAHI,KAAP;AAKD,GAND;AAOD,CAbD;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,CAAC,YAAY;AACX,MAAI99D,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;;AAEAA,EAAAA,OAAO,CAACwzC,mBAAR,GAA8B,UAAUd,SAAV,EAAqB;AACjD,QAAI1pG,MAAM,GAAGg3D,OAAO,CAAC0C,MAAR,EAAb;AACA,QAAIiwC,YAAY,GAAG3yC,OAAO,CAACc,YAAR,CAAqBI,IAAxC;;AAEA,QAAI0xC,mBAAmB,GAAG,YAAY;AACpCzL,MAAAA,qBAAqB,CAAC,4BAAD,EAA+BuL,SAAS,CAACvjC,SAAzC,CAArB;AACAnmE,MAAAA,MAAM,CACHq4D,IADH,CACQsxC,YADR,EACsB,4BADtB,EAEGrwC,UAFH,CAEcowC,SAFd;AAIA,UAAII,UAAU,GAAG9yC,OAAO,CAAC2zC,WAAR,CAAoB1pF,MAApB,CAA2B;AAC1CklD,QAAAA,SAAS,EAAEujC,SAAS,CAACvjC,SADqB;AAE1CmS,QAAAA,gBAAgB,EAAEoxB,SAAS,CAACpxB,gBAFc;AAG1C0xB,QAAAA,gBAAgB,EAAEhzC,OAAO,CAAC0K,IAAR,CAAa62B,mBAAb;AAHwB,OAA3B,CAAjB;AAMAqS,MAAAA,yBAAyB,CAACd,UAAD,CAAzB;AAEA,aAAOA,UAAU,CACd9yC,OADI,GAEJgK,IAFI,CAEC,YAAY;AAChBhhE,QAAAA,MAAM,CAACq4D,IAAP,CACEsxC,YADF,EAEE,wDAFF,EAGED,SAAS,CAACvjC,SAHZ;AAKAg4B,QAAAA,qBAAqB,CACnB,uCADmB,EAEnBuL,SAAS,CAACvjC,SAFS,CAArB;AAIA,eAAO2jC,UAAP;AACD,OAbI,EAcJ5oC,KAdI,CAcE,UAAUlpE,KAAV,EAAiB;AACtBgI,QAAAA,MAAM,CACHhI,KADH,CAEI2xG,YAFJ,EAGI,mDAHJ,EAIID,SAAS,CAACvjC,SAJd,EAMG9M,aANH,CAMiBrhE,KANjB;AAOAmmG,QAAAA,qBAAqB,CACnB,oCADmB,EAEnBuL,SAAS,CAACvjC,SAFS,EAGnBnuE,KAHmB,CAArB;AAKA,cAAMA,KAAN;AACD,OA5BI,CAAP;AA6BD,KA3CD;;AA6CA,QAAImmG,qBAAqB,GAAG,UAAU7sE,SAAV,EAAqBx6B,IAArB,EAA2B;AACrDkgE,MAAAA,OAAO,CAACuK,aAAR,CAAsB;AACpBjjE,QAAAA,IAAI,EAAEgzB,SADc;AAEpB60C,QAAAA,SAAS,EAAEujC,SAAS,CAACvjC,SAFD;AAGpBrvE,QAAAA,IAAI,EAAEA,IAAI,IAAI4yG;AAHM,OAAtB;AAKD,KAND;;AAQA,QAAIkB,yBAAyB,GAAG,UAAUd,UAAV,EAAsB;AACpDA,MAAAA,UAAU,CAACI,kBAAX,CAA8B,UAAUpzG,IAAV,EAAgB;AAC5CkJ,QAAAA,MAAM,CACHhI,KADH,CACS2xG,YADT,EACuB,gCADvB,EAEGtwC,aAFH,CAEiBviE,IAFjB;AAGAqnG,QAAAA,qBAAqB,CAAC,gCAAD,EAAmCrnG,IAAnC,CAArB;AACD,OALD;AAOAgzG,MAAAA,UAAU,CAACK,uBAAX,CAAmC,UAAUrzG,IAAV,EAAgB;AACjDkJ,QAAAA,MAAM,CACHq4D,IADH,CACQsxC,YADR,EACsB,qCADtB,EAEGrwC,UAFH,CAEcxiE,IAFd;AAGAqnG,QAAAA,qBAAqB,CAAC,qCAAD,EAAwCrnG,IAAxC,CAArB;AACD,OALD;AAMD,KAdD;;AAgBA,WAAO;AACL7B,MAAAA,GAAG,EAAE,YAAY;AACf,eAAO20G,mBAAmB,EAA1B;AACD;AAHI,KAAP;AAKD,GA9ED;AA+ED,CApFD;;AAsFA,CAAC,YAAY;AACX,MAAIh+D,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;AACAprB,EAAAA,MAAM,CAACqrB,IAAP,GAAcD,OAAd;AAEAA,EAAAA,OAAO,CAAC6zC,QAAR,GAAmB,EAAnB;AAEA,MAAIC,uBAAuB,GAAG,IAA9B;AACA,MAAIC,GAAG,GAAG;AACRhzC,IAAAA,GAAG,EAAE;AADG,GAAV;AAIAf,EAAAA,OAAO,CAAC6zC,QAAR,CAAiBtX,OAAjB,GAA2Bv8B,OAAO,CAAC0K,IAAR,CAAa6xB,OAAxC;;AACAv8B,EAAAA,OAAO,CAAC6zC,QAAR,CAAiBG,aAAjB,GAAiC,UAAUC,aAAV,EAAyB,CAAE,CAA5D;;AAEAj0C,EAAAA,OAAO,CAAC6zC,QAAR,CAAiBK,oBAAjB,GAAwC,UAAUC,QAAV,EAAoBhrG,QAApB,EAA8B;AACpE,QAAIooE,MAAM,GAAG9M,QAAQ,CAACokC,cAAT,CAAwBsL,QAAxB,CAAb;AACA,QAAIC,aAAa,GAAG,IAAIp0C,OAAO,CAACsR,aAAZ,CAA0BnoE,QAA1B,EAAoCoJ,MAApC,EAA4Cg/D,MAA5C,CAApB;AACA,QAAI8iC,cAAc,GAAG,CAACr0C,OAAO,CAACsN,WAAR,CAAoB6xB,MAArB,EAA6Bn/B,OAAO,CAACwN,aAAR,CAAsBszB,IAAnD,EAAyD9gC,OAAO,CAAC0F,SAAR,CAAkBq2B,WAA3E,EAAwF/7B,OAAO,CAAC0F,SAAR,CAAkB02B,UAA1G,CAArB;AACA7qB,IAAAA,MAAM,CAACpqD,gBAAP,CAAwB,MAAxB,EAAgC,UAAU7qB,CAAV,EAAa;AAC3C+3G,MAAAA,cAAc,CAAC7oF,OAAf,CAAuB,UAAUtX,IAAV,EAAgB;AACrC8rD,QAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC58D,IAAtC,EAA4C,UAAUpU,IAAV,EAAgB;AAC1Ds0G,UAAAA,aAAa,CAAC3uC,YAAd,CAA2BvxD,IAA3B,EAAiCpU,IAAjC;AACD,SAFD;AAGD,OAJD;AAKD,KAND;AAQA,QAAIs9F,qBAAqB,GAAG7qF,MAAM,CAACwgD,WAAP,CAAmB,YAAY;AACzDwe,MAAAA,MAAM,CAAC1zB,GAAP,IAAc,EAAd;AACD,KAF2B,EAEzBi2D,uBAFyB,CAA5B;AAIA9zC,IAAAA,OAAO,CAAC0K,IAAR,CAAa0C,WAAb,GAA2B0D,UAA3B,CAAsC9Q,OAAO,CAAC0F,SAAR,CAAkBq2B,WAAxD,EAAqE,YAAY;AAC/EnnD,MAAAA,MAAM,CAACoe,aAAP,CAAqBoqC,qBAArB;AACD,KAFD;AAGD,GAnBD;;AAqBA,MAAIkX,aAAa,GAAG,UAAU5d,MAAV,EAAkB;AACpC,QAAItrD,GAAG,GAAGsrD,MAAM,CAACh3F,OAAP,CAAe,QAAf,CAAV;AACA,WAAOg3F,MAAM,CAAChkF,KAAP,CAAa,CAAb,EAAgB04B,GAAG,GAAG,CAAtB,CAAP;AACD,GAHD;;AAKA,MAAImpE,iBAAiB,GAAG,UAAU7d,MAAV,EAAkB;AACxC,QAAI8d,SAAS,GAAGF,aAAa,CAAC5d,MAAD,CAAb,GAAwB,SAAxC;AACA,WAAO12B,OAAO,CAAC4J,KAAR,CAAc4qC,SAAd,EAAyB;AAC9BttG,MAAAA,WAAW,EAAE;AADiB,KAAzB,EAEJ8iE,IAFI,CAEC,YAAY;AAClB,UAAI8sB,QAAQ,GAAG92B,OAAO,CAAC0K,IAAR,CAAaC,WAAb,EAAf;AACAmsB,MAAAA,QAAQ,CAAClsB,OAAT,CAAiB5K,OAAO,CAAC0F,SAAR,CAAkBy2B,SAAnC;AACA,aAAO,IAAP;AACD,KANM,EAMJjyB,KANI,CAME,UAAU5tE,CAAV,EAAa;AACpB0jE,MAAAA,OAAO,CACJ0C,MADH,GAEG1hE,KAFH,CAES,gCAAgC1E,CAFzC,EAGG+lE,aAHH,CAGiB/lE,CAHjB;AAIAiW,MAAAA,MAAM,CAACyW,QAAP,CAAgBjC,IAAhB,GAAuBytF,SAAvB;AACA,aAAO,KAAP;AACD,KAbM,CAAP;AAcD,GAhBD;;AAkBA,MAAIC,oBAAoB,GAAG,UAAU/d,MAAV,EAAkBge,SAAlB,EAA6BlpG,MAA7B,EAAqC;AAC9D,QAAImpG,aAAa,GAAG;AAClBje,MAAAA,MAAM,EAAEA,MADU;AAElB6G,MAAAA,cAAc,EAAE,KAFE;AAGlBE,MAAAA,UAAU,EAAE,IAHM;AAIlBjH,MAAAA,QAAQ,EAAE8d,aAAa,CAAC5d,MAAD,CAAb,GAAwB,QAJhB;AAKlBoC,MAAAA,SAAS,EAAE;AACTW,QAAAA,oBAAoB,EAAE,IADb;AAETV,QAAAA,eAAe,EAAE;AAFR;AALO,KAApB;AAUA,QAAI6b,SAAS,GAAG50C,OAAO,CAACl3D,KAAR,CAAc6rG,aAAd,EAA6BnpG,MAAM,CAACopG,SAApC,CAAhB;AACA50C,IAAAA,OAAO,CAAC0K,IAAR,CAAa6xB,OAAb,CAAqBmY,SAArB,EAAgCE,SAAhC;AACD,GAbD;;AAeA50C,EAAAA,OAAO,CAAC6zC,QAAR,CAAiBgB,OAAjB,GAA2B,UAAUvtG,IAAV,EAAgBwtG,WAAhB,EAA6BC,MAA7B,EAAqCvpG,MAArC,EAA6C;AACtEA,IAAAA,MAAM,GAAGA,MAAM,GAAGA,MAAH,GAAY,EAA3B;AACA,QAAIrC,QAAQ,GAAG4rG,MAAM,CAACC,QAAP,CAAgB,GAAhB,IAAuBD,MAAvB,GAAgCA,MAAM,GAAG,GAAxD;AACA,QAAIE,cAAc,GAAG;AAAE9rG,MAAAA,QAAQ,EAAEA,QAAZ;AAAsBqwD,MAAAA,KAAK,EAAEhuD,MAAM,CAACguD;AAApC,KAArB;AACAwG,IAAAA,OAAO,CAAC6zC,QAAR,CAAiBqB,WAAjB,CAA6BC,QAA7B,CAAsC7tG,IAAtC,EAA4C2tG,cAA5C,EAA4DxwC,QAAQ,CAACokC,cAAT,CAAwBiM,WAAxB,CAA5D;AACA90C,IAAAA,OAAO,CAAC6zC,QAAR,CAAiBqB,WAAjB,CAA6B5mE,KAA7B,CAAmChnC,IAAnC,EAAyC,UAAU8tG,UAAV,EAAsB;AAC7D,UAAIjsG,QAAQ,GAAGisG,UAAU,CAACjsG,QAA1B;AACA,UAAIksG,YAAY,GAAGD,UAAU,CAACC,YAA9B;AACA,aAAO;AACL7hB,QAAAA,IAAI,EAAE,YAAY;AAChB,cAAIlsF,IAAI,KAAKysG,GAAG,CAAChzC,GAAjB,EAAsB,OAAO0zC,oBAAoB,CAACtrG,QAAD,EAAWksG,YAAX,EAAyB7pG,MAAzB,CAA3B;AACtB,iBAAOw0D,OAAO,CAAC6zC,QAAR,CAAiBK,oBAAjB,CAAsC5sG,IAAtC,EAA4C6B,QAA5C,CAAP;AACD,SAJI;AAKL66E,QAAAA,OAAO,EAAE,YAAY;AACnB,cAAI18E,IAAI,KAAKysG,GAAG,CAAChzC,GAAjB,EAAsB,OAAOwzC,iBAAiB,CAACprG,QAAD,CAAxB;AACtB,iBAAO,IAAP;AACD;AARI,OAAP;AAUD,KAbD;AAcD,GAnBD;;AAqBA62D,EAAAA,OAAO,CAAC6zC,QAAR,CAAiByB,OAAjB,GAA2B,UAAUhuG,IAAV,EAAgB;AACzC,WAAO04D,OAAO,CAAC6zC,QAAR,CAAiBqB,WAAjB,CAA6BntD,IAA7B,CAAkCzgD,IAAlC,CAAP;AACD,GAFD;AAGD,CAnGD;;AAqGA,CAAC,YAAY;AACX,MAAIstC,MAAM,GAAG,IAAb;AACAorB,EAAAA,OAAO,GAAGprB,MAAM,CAACorB,OAAP,IAAkB,EAA5B;AACAprB,EAAAA,MAAM,CAACorB,OAAP,GAAiBA,OAAjB;AAEA,MAAI+zC,GAAG,GAAG;AACRhzC,IAAAA,GAAG,EAAE;AADG,GAAV;;AAIA,WAASm0C,WAAT,GAAuB;AACrB,QAAIE,UAAU,GAAG,EAAjB;;AACA,QAAIG,aAAa,GAAG,UAAUC,OAAV,EAAmBrsG,QAAnB,EAA6BqwD,KAA7B,EAAoC;AACtD,UAAI+X,MAAM,GAAG9M,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAb;AACA6M,MAAAA,MAAM,CAAC1zB,GAAP,GAAa10C,QAAb;AACAooE,MAAAA,MAAM,CAAC/X,KAAP,GAAeA,KAAK,IAAI,2BAAxB;AACA+X,MAAAA,MAAM,CAAC7hE,EAAP,GAAY8lG,OAAZ;AACAjkC,MAAAA,MAAM,CAAC,YAAD,CAAN,GAAuBikC,OAAvB;AACAjkC,MAAAA,MAAM,CAACkkC,YAAP,CACE,SADF,EAEE,yFAFF,EANsD,CAUtD;;AAEA,aAAOlkC,MAAP;AACD,KAbD;;AAeA,WAAO;AACL4jC,MAAAA,QAAQ,EAAE,UAAUK,OAAV,EAAmBhqG,MAAnB,EAA2B6pG,YAA3B,EAAyC;AACjDD,QAAAA,UAAU,CAACI,OAAD,CAAV,GAAsB;AACpBH,UAAAA,YAAY,EAAEA,YADM;AAEpBlsG,UAAAA,QAAQ,EAAEqC,MAAM,CAACrC,QAFG;AAGpBqwD,UAAAA,KAAK,EAAEhuD,MAAM,CAACguD,KAHM;AAIpBk8C,UAAAA,QAAQ,EAAElvG;AAJU,SAAtB;AAMD,OARI;AASL8nC,MAAAA,KAAK,EAAE,UAAUknE,OAAV,EAAmBG,OAAnB,EAA4B;AACjC,YAAI,CAACP,UAAU,CAACI,OAAD,CAAf,EAA0B;AAC1B,YAAIH,YAAY,GAAGD,UAAU,CAACI,OAAD,CAAV,CAAoBH,YAAvC;AACA,YAAIlsG,QAAQ,GAAGisG,UAAU,CAACI,OAAD,CAAV,CAAoBrsG,QAAnC;AACA,YAAIqwD,KAAK,GAAG47C,UAAU,CAACI,OAAD,CAAV,CAAoBh8C,KAAhC;;AACA,YAAIg8C,OAAO,KAAKzB,GAAG,CAAChzC,GAApB,EAAyB;AACvB,cAAI60C,GAAG,GAAGL,aAAa,CAACC,OAAD,EAAUrsG,QAAV,EAAoBqwD,KAApB,CAAvB;AACA67C,UAAAA,YAAY,CAACxwC,WAAb,CAAyB+wC,GAAzB;AACD;;AAEDR,QAAAA,UAAU,CAACI,OAAD,CAAV,CAAoBE,QAApB,GAA+BC,OAAO,CAACP,UAAU,CAACI,OAAD,CAAX,CAAtC;AACA,eAAOJ,UAAU,CAACI,OAAD,CAAV,CAAoBE,QAApB,CAA6BliB,IAA7B,EAAP;AACD,OArBI;AAsBLzrC,MAAAA,IAAI,EAAE,UAAUytD,OAAV,EAAmB;AACvB,YAAI,CAACJ,UAAU,CAACI,OAAD,CAAf,EAA0B;AAE1B,YAAI11G,IAAI,GAAGs1G,UAAU,CAACI,OAAD,CAArB;AACA,YAAII,GAAG,GAAG91G,IAAI,CAACu1G,YAAL,CAAkBQ,aAAlB,CAAgC,QAAhC,CAAV;AACA/1G,QAAAA,IAAI,CAACu1G,YAAL,CAAkBtwC,WAAlB,CAA8B6wC,GAA9B;AAEA,YAAI5hG,MAAJ;;AACA,YAAIlU,IAAI,CAAC41G,QAAT,EAAmB;AACjB1hG,UAAAA,MAAM,GAAGlU,IAAI,CAAC41G,QAAL,CAAc1xB,OAAd,EAAT;AACA,iBAAOlkF,IAAI,CAAC41G,QAAZ;AACD;;AAED,eAAO1hG,MAAP;AACD;AApCI,KAAP;AAsCD;;AAED4gC,EAAAA,MAAM,CAACorB,OAAP,CAAe6zC,QAAf,CAAwBqB,WAAxB,GAAsCA,WAAW,EAAjD;AACD,CAnED","sourcesContent":["// AWS SDK for JavaScript v2.553.0\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// License at https://sdk.amazonaws.com/js/BUNDLE_LICENSE.txt\n(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n  module.exports={\n    \"version\": \"2.0\",\n    \"metadata\": {\n      \"apiVersion\": \"2014-06-30\",\n      \"endpointPrefix\": \"cognito-identity\",\n      \"jsonVersion\": \"1.1\",\n      \"protocol\": \"json\",\n      \"serviceFullName\": \"Amazon Cognito Identity\",\n      \"serviceId\": \"Cognito Identity\",\n      \"signatureVersion\": \"v4\",\n      \"targetPrefix\": \"AWSCognitoIdentityService\",\n      \"uid\": \"cognito-identity-2014-06-30\"\n    },\n    \"operations\": {\n      \"CreateIdentityPool\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"IdentityPoolName\",\n            \"AllowUnauthenticatedIdentities\"\n          ],\n          \"members\": {\n            \"IdentityPoolName\": {},\n            \"AllowUnauthenticatedIdentities\": {\n              \"type\": \"boolean\"\n            },\n            \"SupportedLoginProviders\": {\n              \"shape\": \"S4\"\n            },\n            \"DeveloperProviderName\": {},\n            \"OpenIdConnectProviderARNs\": {\n              \"shape\": \"S8\"\n            },\n            \"CognitoIdentityProviders\": {\n              \"shape\": \"Sa\"\n            },\n            \"SamlProviderARNs\": {\n              \"shape\": \"Sf\"\n            },\n            \"IdentityPoolTags\": {\n              \"shape\": \"Sg\"\n            }\n          }\n        },\n        \"output\": {\n          \"shape\": \"Sj\"\n        }\n      },\n      \"DeleteIdentities\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"IdentityIdsToDelete\"\n          ],\n          \"members\": {\n            \"IdentityIdsToDelete\": {\n              \"type\": \"list\",\n              \"member\": {}\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"UnprocessedIdentityIds\": {\n              \"type\": \"list\",\n              \"member\": {\n                \"type\": \"structure\",\n                \"members\": {\n                  \"IdentityId\": {},\n                  \"ErrorCode\": {}\n                }\n              }\n            }\n          }\n        }\n      },\n      \"DeleteIdentityPool\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"IdentityPoolId\"\n          ],\n          \"members\": {\n            \"IdentityPoolId\": {}\n          }\n        }\n      },\n      \"DescribeIdentity\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"IdentityId\"\n          ],\n          \"members\": {\n            \"IdentityId\": {}\n          }\n        },\n        \"output\": {\n          \"shape\": \"Su\"\n        }\n      },\n      \"DescribeIdentityPool\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"IdentityPoolId\"\n          ],\n          \"members\": {\n            \"IdentityPoolId\": {}\n          }\n        },\n        \"output\": {\n          \"shape\": \"Sj\"\n        }\n      },\n      \"GetCredentialsForIdentity\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"IdentityId\"\n          ],\n          \"members\": {\n            \"IdentityId\": {},\n            \"Logins\": {\n              \"shape\": \"Sz\"\n            },\n            \"CustomRoleArn\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"IdentityId\": {},\n            \"Credentials\": {\n              \"type\": \"structure\",\n              \"members\": {\n                \"AccessKeyId\": {},\n                \"SecretKey\": {},\n                \"SessionToken\": {},\n                \"Expiration\": {\n                  \"type\": \"timestamp\"\n                }\n              }\n            }\n          }\n        }\n      },\n      \"GetId\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"IdentityPoolId\"\n          ],\n          \"members\": {\n            \"AccountId\": {},\n            \"IdentityPoolId\": {},\n            \"Logins\": {\n              \"shape\": \"Sz\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"IdentityId\": {}\n          }\n        }\n      },\n      \"GetIdentityPoolRoles\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"IdentityPoolId\"\n          ],\n          \"members\": {\n            \"IdentityPoolId\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"IdentityPoolId\": {},\n            \"Roles\": {\n              \"shape\": \"S1b\"\n            },\n            \"RoleMappings\": {\n              \"shape\": \"S1d\"\n            }\n          }\n        }\n      },\n      \"GetOpenIdToken\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"IdentityId\"\n          ],\n          \"members\": {\n            \"IdentityId\": {},\n            \"Logins\": {\n              \"shape\": \"Sz\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"IdentityId\": {},\n            \"Token\": {}\n          }\n        }\n      },\n      \"GetOpenIdTokenForDeveloperIdentity\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"IdentityPoolId\",\n            \"Logins\"\n          ],\n          \"members\": {\n            \"IdentityPoolId\": {},\n            \"IdentityId\": {},\n            \"Logins\": {\n              \"shape\": \"Sz\"\n            },\n            \"TokenDuration\": {\n              \"type\": \"long\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"IdentityId\": {},\n            \"Token\": {}\n          }\n        }\n      },\n      \"ListIdentities\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"IdentityPoolId\",\n            \"MaxResults\"\n          ],\n          \"members\": {\n            \"IdentityPoolId\": {},\n            \"MaxResults\": {\n              \"type\": \"integer\"\n            },\n            \"NextToken\": {},\n            \"HideDisabled\": {\n              \"type\": \"boolean\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"IdentityPoolId\": {},\n            \"Identities\": {\n              \"type\": \"list\",\n              \"member\": {\n                \"shape\": \"Su\"\n              }\n            },\n            \"NextToken\": {}\n          }\n        }\n      },\n      \"ListIdentityPools\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"MaxResults\"\n          ],\n          \"members\": {\n            \"MaxResults\": {\n              \"type\": \"integer\"\n            },\n            \"NextToken\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"IdentityPools\": {\n              \"type\": \"list\",\n              \"member\": {\n                \"type\": \"structure\",\n                \"members\": {\n                  \"IdentityPoolId\": {},\n                  \"IdentityPoolName\": {}\n                }\n              }\n            },\n            \"NextToken\": {}\n          }\n        }\n      },\n      \"ListTagsForResource\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"ResourceArn\"\n          ],\n          \"members\": {\n            \"ResourceArn\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"Tags\": {\n              \"shape\": \"Sg\"\n            }\n          }\n        }\n      },\n      \"LookupDeveloperIdentity\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"IdentityPoolId\"\n          ],\n          \"members\": {\n            \"IdentityPoolId\": {},\n            \"IdentityId\": {},\n            \"DeveloperUserIdentifier\": {},\n            \"MaxResults\": {\n              \"type\": \"integer\"\n            },\n            \"NextToken\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"IdentityId\": {},\n            \"DeveloperUserIdentifierList\": {\n              \"type\": \"list\",\n              \"member\": {}\n            },\n            \"NextToken\": {}\n          }\n        }\n      },\n      \"MergeDeveloperIdentities\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"SourceUserIdentifier\",\n            \"DestinationUserIdentifier\",\n            \"DeveloperProviderName\",\n            \"IdentityPoolId\"\n          ],\n          \"members\": {\n            \"SourceUserIdentifier\": {},\n            \"DestinationUserIdentifier\": {},\n            \"DeveloperProviderName\": {},\n            \"IdentityPoolId\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"IdentityId\": {}\n          }\n        }\n      },\n      \"SetIdentityPoolRoles\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"IdentityPoolId\",\n            \"Roles\"\n          ],\n          \"members\": {\n            \"IdentityPoolId\": {},\n            \"Roles\": {\n              \"shape\": \"S1b\"\n            },\n            \"RoleMappings\": {\n              \"shape\": \"S1d\"\n            }\n          }\n        }\n      },\n      \"TagResource\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"ResourceArn\"\n          ],\n          \"members\": {\n            \"ResourceArn\": {},\n            \"Tags\": {\n              \"shape\": \"Sg\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"UnlinkDeveloperIdentity\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"IdentityId\",\n            \"IdentityPoolId\",\n            \"DeveloperProviderName\",\n            \"DeveloperUserIdentifier\"\n          ],\n          \"members\": {\n            \"IdentityId\": {},\n            \"IdentityPoolId\": {},\n            \"DeveloperProviderName\": {},\n            \"DeveloperUserIdentifier\": {}\n          }\n        }\n      },\n      \"UnlinkIdentity\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"IdentityId\",\n            \"Logins\",\n            \"LoginsToRemove\"\n          ],\n          \"members\": {\n            \"IdentityId\": {},\n            \"Logins\": {\n              \"shape\": \"Sz\"\n            },\n            \"LoginsToRemove\": {\n              \"shape\": \"Sv\"\n            }\n          }\n        }\n      },\n      \"UntagResource\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"ResourceArn\"\n          ],\n          \"members\": {\n            \"ResourceArn\": {},\n            \"TagKeys\": {\n              \"type\": \"list\",\n              \"member\": {}\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"UpdateIdentityPool\": {\n        \"input\": {\n          \"shape\": \"Sj\"\n        },\n        \"output\": {\n          \"shape\": \"Sj\"\n        }\n      }\n    },\n    \"shapes\": {\n      \"S4\": {\n        \"type\": \"map\",\n        \"key\": {},\n        \"value\": {}\n      },\n      \"S8\": {\n        \"type\": \"list\",\n        \"member\": {}\n      },\n      \"Sa\": {\n        \"type\": \"list\",\n        \"member\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"ProviderName\": {},\n            \"ClientId\": {},\n            \"ServerSideTokenCheck\": {\n              \"type\": \"boolean\"\n            }\n          }\n        }\n      },\n      \"Sf\": {\n        \"type\": \"list\",\n        \"member\": {}\n      },\n      \"Sg\": {\n        \"type\": \"map\",\n        \"key\": {},\n        \"value\": {}\n      },\n      \"Sj\": {\n        \"type\": \"structure\",\n        \"required\": [\n          \"IdentityPoolId\",\n          \"IdentityPoolName\",\n          \"AllowUnauthenticatedIdentities\"\n        ],\n        \"members\": {\n          \"IdentityPoolId\": {},\n          \"IdentityPoolName\": {},\n          \"AllowUnauthenticatedIdentities\": {\n            \"type\": \"boolean\"\n          },\n          \"SupportedLoginProviders\": {\n            \"shape\": \"S4\"\n          },\n          \"DeveloperProviderName\": {},\n          \"OpenIdConnectProviderARNs\": {\n            \"shape\": \"S8\"\n          },\n          \"CognitoIdentityProviders\": {\n            \"shape\": \"Sa\"\n          },\n          \"SamlProviderARNs\": {\n            \"shape\": \"Sf\"\n          },\n          \"IdentityPoolTags\": {\n            \"shape\": \"Sg\"\n          }\n        }\n      },\n      \"Su\": {\n        \"type\": \"structure\",\n        \"members\": {\n          \"IdentityId\": {},\n          \"Logins\": {\n            \"shape\": \"Sv\"\n          },\n          \"CreationDate\": {\n            \"type\": \"timestamp\"\n          },\n          \"LastModifiedDate\": {\n            \"type\": \"timestamp\"\n          }\n        }\n      },\n      \"Sv\": {\n        \"type\": \"list\",\n        \"member\": {}\n      },\n      \"Sz\": {\n        \"type\": \"map\",\n        \"key\": {},\n        \"value\": {}\n      },\n      \"S1b\": {\n        \"type\": \"map\",\n        \"key\": {},\n        \"value\": {}\n      },\n      \"S1d\": {\n        \"type\": \"map\",\n        \"key\": {},\n        \"value\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"Type\"\n          ],\n          \"members\": {\n            \"Type\": {},\n            \"AmbiguousRoleResolution\": {},\n            \"RulesConfiguration\": {\n              \"type\": \"structure\",\n              \"required\": [\n                \"Rules\"\n              ],\n              \"members\": {\n                \"Rules\": {\n                  \"type\": \"list\",\n                  \"member\": {\n                    \"type\": \"structure\",\n                    \"required\": [\n                      \"Claim\",\n                      \"MatchType\",\n                      \"Value\",\n                      \"RoleARN\"\n                    ],\n                    \"members\": {\n                      \"Claim\": {},\n                      \"MatchType\": {},\n                      \"Value\": {},\n                      \"RoleARN\": {}\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  },{}],2:[function(require,module,exports){\n  module.exports={\n    \"pagination\": {\n    }\n  }\n  \n  },{}],3:[function(require,module,exports){\n  module.exports={\n    \"version\": \"2.0\",\n    \"metadata\": {\n      \"apiVersion\": \"2017-02-15\",\n      \"endpointPrefix\": \"connect\",\n      \"jsonVersion\": \"1.0\",\n      \"protocol\": \"json\",\n      \"serviceAbbreviation\": \"Connect\",\n      \"serviceFullName\": \"AmazonConnectCTIService\",\n      \"signatureVersion\": \"\",\n      \"targetPrefix\": \"AmazonConnectCTIService\",\n      \"uid\": \"connect-2017-02-15\"\n    },\n    \"operations\": {\n      \"AcceptContact\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"contactId\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"contactId\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"ClearContact\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"contactId\"\n          ],\n          \"members\": {\n            \"contactId\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"CompleteContact\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"contactId\"\n          ],\n          \"members\": {\n            \"contactId\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"ConferenceConnections\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"contactId\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"contactId\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"CreateAdditionalConnection\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"contactId\",\n            \"endpoint\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"contactId\": {},\n            \"endpoint\": {\n              \"shape\": \"Se\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"CreateOutboundContact\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"endpoint\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"endpoint\": {\n              \"shape\": \"Se\"\n            },\n            \"queueARN\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"CreateTaskContact\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"endpoint\",\n            \"name\"\n          ],\n          \"members\": {\n            \"endpoint\": {\n              \"shape\": \"Se\"\n            },\n            \"previousContactId\": {},\n            \"name\": {},\n            \"description\": {},\n            \"references\": {\n              \"shape\": \"Sr\"\n            },\n            \"idempotencyToken\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"contactId\": {}\n          }\n        }\n      },\n      \"CreateTransport\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"transportType\",\n            \"authentication\"\n          ],\n          \"members\": {\n            \"transportType\": {},\n            \"participantId\": {},\n            \"contactId\": {},\n            \"softphoneClientId\": {},\n            \"authentication\": {\n              \"shape\": \"S2\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"webSocketTransport\": {\n              \"type\": \"structure\",\n              \"required\": [\n                \"url\",\n                \"transportLifeTimeInSeconds\"\n              ],\n              \"members\": {\n                \"url\": {},\n                \"transportLifeTimeInSeconds\": {\n                  \"type\": \"long\"\n                },\n                \"expiry\": {}\n              }\n            },\n            \"chatTokenTransport\": {\n              \"type\": \"structure\",\n              \"required\": [\n                \"participantToken\",\n                \"expiry\"\n              ],\n              \"members\": {\n                \"participantToken\": {},\n                \"expiry\": {}\n              }\n            },\n            \"softphoneTransport\": {\n              \"type\": \"structure\",\n              \"required\": [\n                \"softphoneMediaConnections\"\n              ],\n              \"members\": {\n                \"softphoneMediaConnections\": {\n                  \"type\": \"list\",\n                  \"member\": {\n                    \"type\": \"structure\",\n                    \"required\": [\n                      \"username\",\n                      \"credential\",\n                      \"urls\"\n                    ],\n                    \"members\": {\n                      \"username\": {},\n                      \"credential\": {},\n                      \"urls\": {\n                        \"type\": \"list\",\n                        \"member\": {}\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      },\n      \"DestroyConnection\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"contactId\",\n            \"connectionId\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"contactId\": {},\n            \"connectionId\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"GetAgentConfiguration\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"configuration\"\n          ],\n          \"members\": {\n            \"configuration\": {\n              \"shape\": \"S1h\"\n            }\n          }\n        }\n      },\n      \"GetAgentPermissions\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"nextToken\": {},\n            \"maxResults\": {\n              \"type\": \"integer\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"permissions\"\n          ],\n          \"members\": {\n            \"permissions\": {\n              \"type\": \"list\",\n              \"member\": {}\n            },\n            \"nextToken\": {}\n          }\n        }\n      },\n      \"GetAgentSnapshot\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"nextToken\": {},\n            \"timeout\": {\n              \"type\": \"long\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"snapshot\",\n            \"nextToken\"\n          ],\n          \"members\": {\n            \"snapshot\": {\n              \"type\": \"structure\",\n              \"required\": [\n                \"state\",\n                \"contacts\",\n                \"snapshotTimestamp\"\n              ],\n              \"members\": {\n                \"state\": {\n                  \"shape\": \"S1z\"\n                },\n                \"nextState\": {\n                  \"shape\": \"S1z\"\n                },\n                \"agentAvailabilityState\": {\n                  \"type\": \"structure\",\n                  \"members\": {\n                    \"state\": {},\n                    \"timeStamp\": {\n                      \"type\": \"timestamp\"\n                    }\n                  }\n                },\n                \"contacts\": {\n                  \"type\": \"list\",\n                  \"member\": {\n                    \"type\": \"structure\",\n                    \"required\": [\n                      \"contactId\",\n                      \"type\",\n                      \"state\",\n                      \"connections\",\n                      \"attributes\"\n                    ],\n                    \"members\": {\n                      \"contactId\": {},\n                      \"initialContactId\": {},\n                      \"contactFeatures\": {\n                        \"type\": \"structure\",\n                        \"members\": {\n                          \"attachmentsEnabled\": {\n                            \"type\": \"boolean\"\n                          }\n                        }\n                      },\n                      \"type\": {},\n                      \"state\": {\n                        \"type\": \"structure\",\n                        \"required\": [\n                          \"type\",\n                          \"timestamp\"\n                        ],\n                        \"members\": {\n                          \"type\": {},\n                          \"timestamp\": {\n                            \"type\": \"timestamp\"\n                          }\n                        }\n                      },\n                      \"queue\": {\n                        \"shape\": \"Sk\"\n                      },\n                      \"queueTimestamp\": {\n                        \"type\": \"timestamp\"\n                      },\n                      \"connections\": {\n                        \"type\": \"list\",\n                        \"member\": {\n                          \"type\": \"structure\",\n                          \"required\": [\n                            \"connectionId\",\n                            \"state\",\n                            \"type\",\n                            \"initial\"\n                          ],\n                          \"members\": {\n                            \"connectionId\": {},\n                            \"endpoint\": {\n                              \"shape\": \"Se\"\n                            },\n                            \"state\": {\n                              \"type\": \"structure\",\n                              \"required\": [\n                                \"type\",\n                                \"timestamp\"\n                              ],\n                              \"members\": {\n                                \"type\": {},\n                                \"timestamp\": {\n                                  \"type\": \"timestamp\"\n                                }\n                              }\n                            },\n                            \"type\": {},\n                            \"initial\": {\n                              \"type\": \"boolean\"\n                            },\n                            \"softphoneMediaInfo\": {\n                              \"type\": \"structure\",\n                              \"members\": {\n                                \"callType\": {},\n                                \"autoAccept\": {\n                                  \"type\": \"boolean\"\n                                },\n                                \"mediaLegContextToken\": {},\n                                \"callContextToken\": {},\n                                \"callConfigJson\": {}\n                              }\n                            },\n                            \"chatMediaInfo\": {\n                              \"type\": \"structure\",\n                              \"members\": {\n                                \"chatAutoAccept\": {\n                                  \"type\": \"boolean\"\n                                },\n                                \"connectionData\": {},\n                                \"customerName\": {}\n                              }\n                            },\n                            \"monitoringInfo\": {\n                              \"type\": \"structure\",\n                              \"members\": {\n                                \"agent\": {\n                                  \"type\": \"structure\",\n                                  \"members\": {\n                                    \"agentName\": {}\n                                  }\n                                },\n                                \"joinTimeStamp\": {\n                                  \"type\": \"timestamp\"\n                                }\n                              }\n                            }\n                          }\n                        }\n                      },\n                      \"attributes\": {\n                        \"type\": \"map\",\n                        \"key\": {},\n                        \"value\": {\n                          \"type\": \"structure\",\n                          \"required\": [\n                            \"name\"\n                          ],\n                          \"members\": {\n                            \"name\": {},\n                            \"value\": {}\n                          }\n                        }\n                      },\n                      \"contactDuration\": {},\n                      \"name\": {},\n                      \"description\": {},\n                      \"references\": {\n                        \"shape\": \"Sr\"\n                      },\n                      \"initiationMethod\": {}\n                    }\n                  }\n                },\n                \"snapshotTimestamp\": {\n                  \"type\": \"timestamp\"\n                }\n              }\n            },\n            \"nextToken\": {}\n          }\n        }\n      },\n      \"GetAgentStates\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"nextToken\": {},\n            \"maxResults\": {\n              \"type\": \"integer\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"states\"\n          ],\n          \"members\": {\n            \"states\": {\n              \"type\": \"list\",\n              \"member\": {\n                \"shape\": \"S1z\"\n              }\n            },\n            \"nextToken\": {}\n          }\n        }\n      },\n      \"GetDialableCountryCodes\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"nextToken\": {},\n            \"maxResults\": {\n              \"type\": \"integer\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"countryCodes\"\n          ],\n          \"members\": {\n            \"countryCodes\": {\n              \"type\": \"list\",\n              \"member\": {}\n            },\n            \"nextToken\": {}\n          }\n        }\n      },\n      \"GetEndpoints\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"queueARNs\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"queueARNs\": {\n              \"type\": \"list\",\n              \"member\": {}\n            },\n            \"nextToken\": {},\n            \"maxResults\": {\n              \"type\": \"integer\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"endpoints\": {\n              \"type\": \"list\",\n              \"member\": {\n                \"shape\": \"Se\"\n              }\n            },\n            \"nextToken\": {}\n          }\n        }\n      },\n      \"GetNewAuthToken\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"refreshToken\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"refreshToken\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"newAuthToken\": {},\n            \"expirationDateTime\": {\n              \"type\": \"timestamp\"\n            }\n          }\n        }\n      },\n      \"GetRoutingProfileQueues\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"routingProfileARN\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"routingProfileARN\": {},\n            \"nextToken\": {},\n            \"maxResults\": {\n              \"type\": \"integer\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"queues\"\n          ],\n          \"members\": {\n            \"queues\": {\n              \"type\": \"list\",\n              \"member\": {\n                \"shape\": \"Sk\"\n              }\n            },\n            \"nextToken\": {}\n          }\n        }\n      },\n      \"HoldConnection\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"contactId\",\n            \"connectionId\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"contactId\": {},\n            \"connectionId\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"NotifyContactIssue\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"contactId\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"contactId\": {},\n            \"issueCode\": {},\n            \"description\": {},\n            \"clientLogs\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"PutAgentState\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"state\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"state\": {\n              \"shape\": \"S1z\"\n            },\n            \"enqueueNextState\": {\n              \"type\": \"boolean\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"RejectContact\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"contactId\"\n          ],\n          \"members\": {\n            \"contactId\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"ResumeConnection\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"contactId\",\n            \"connectionId\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"contactId\": {},\n            \"connectionId\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"SendClientLogs\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"logEvents\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"logEvents\": {\n              \"type\": \"list\",\n              \"member\": {\n                \"type\": \"structure\",\n                \"members\": {\n                  \"timestamp\": {\n                    \"type\": \"timestamp\"\n                  },\n                  \"component\": {},\n                  \"message\": {}\n                }\n              }\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"SendDigits\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"contactId\",\n            \"connectionId\",\n            \"digits\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"contactId\": {},\n            \"connectionId\": {},\n            \"digits\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"SendSoftphoneCallMetrics\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"contactId\",\n            \"softphoneStreamStatistics\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"contactId\": {},\n            \"ccpVersion\": {},\n            \"softphoneStreamStatistics\": {\n              \"shape\": \"S3n\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"SendSoftphoneCallReport\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"contactId\",\n            \"report\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"contactId\": {},\n            \"ccpVersion\": {},\n            \"report\": {\n              \"type\": \"structure\",\n              \"members\": {\n                \"callStartTime\": {\n                  \"type\": \"timestamp\"\n                },\n                \"callEndTime\": {\n                  \"type\": \"timestamp\"\n                },\n                \"softphoneStreamStatistics\": {\n                  \"shape\": \"S3n\"\n                },\n                \"gumTimeMillis\": {\n                  \"type\": \"long\"\n                },\n                \"initializationTimeMillis\": {\n                  \"type\": \"long\"\n                },\n                \"iceCollectionTimeMillis\": {\n                  \"type\": \"long\"\n                },\n                \"signallingConnectTimeMillis\": {\n                  \"type\": \"long\"\n                },\n                \"handshakeTimeMillis\": {\n                  \"type\": \"long\"\n                },\n                \"preTalkTimeMillis\": {\n                  \"type\": \"long\"\n                },\n                \"talkTimeMillis\": {\n                  \"type\": \"long\"\n                },\n                \"cleanupTimeMillis\": {\n                  \"type\": \"long\"\n                },\n                \"iceCollectionFailure\": {\n                  \"type\": \"boolean\"\n                },\n                \"signallingConnectionFailure\": {\n                  \"type\": \"boolean\"\n                },\n                \"handshakeFailure\": {\n                  \"type\": \"boolean\"\n                },\n                \"gumOtherFailure\": {\n                  \"type\": \"boolean\"\n                },\n                \"gumTimeoutFailure\": {\n                  \"type\": \"boolean\"\n                },\n                \"createOfferFailure\": {\n                  \"type\": \"boolean\"\n                },\n                \"setLocalDescriptionFailure\": {\n                  \"type\": \"boolean\"\n                },\n                \"userBusyFailure\": {\n                  \"type\": \"boolean\"\n                },\n                \"invalidRemoteSDPFailure\": {\n                  \"type\": \"boolean\"\n                },\n                \"noRemoteIceCandidateFailure\": {\n                  \"type\": \"boolean\"\n                },\n                \"setRemoteDescriptionFailure\": {\n                  \"type\": \"boolean\"\n                }\n              }\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"ToggleActiveConnections\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"contactId\",\n            \"connectionId\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"contactId\": {},\n            \"connectionId\": {}\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      },\n      \"UpdateAgentConfiguration\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"authentication\",\n            \"configuration\"\n          ],\n          \"members\": {\n            \"authentication\": {\n              \"shape\": \"S2\"\n            },\n            \"configuration\": {\n              \"shape\": \"S1h\"\n            }\n          }\n        },\n        \"output\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        }\n      }\n    },\n    \"shapes\": {\n      \"S2\": {\n        \"type\": \"structure\",\n        \"members\": {\n          \"agentARN\": {},\n          \"authToken\": {}\n        }\n      },\n      \"Se\": {\n        \"type\": \"structure\",\n        \"required\": [\n          \"type\"\n        ],\n        \"members\": {\n          \"endpointARN\": {},\n          \"type\": {},\n          \"name\": {},\n          \"phoneNumber\": {},\n          \"agentLogin\": {},\n          \"queue\": {\n            \"shape\": \"Sk\"\n          }\n        }\n      },\n      \"Sk\": {\n        \"type\": \"structure\",\n        \"members\": {\n          \"queueARN\": {},\n          \"name\": {}\n        }\n      },\n      \"Sr\": {\n        \"type\": \"map\",\n        \"key\": {},\n        \"value\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"value\",\n            \"type\"\n          ],\n          \"members\": {\n            \"value\": {},\n            \"type\": {}\n          }\n        }\n      },\n      \"S1h\": {\n        \"type\": \"structure\",\n        \"required\": [\n          \"name\",\n          \"softphoneEnabled\",\n          \"softphoneAutoAccept\",\n          \"extension\",\n          \"routingProfile\"\n        ],\n        \"members\": {\n          \"name\": {},\n          \"username\": {},\n          \"softphoneEnabled\": {\n            \"type\": \"boolean\"\n          },\n          \"softphoneAutoAccept\": {\n            \"type\": \"boolean\"\n          },\n          \"extension\": {},\n          \"routingProfile\": {\n            \"type\": \"structure\",\n            \"members\": {\n              \"name\": {},\n              \"routingProfileARN\": {},\n              \"defaultOutboundQueue\": {\n                \"shape\": \"Sk\"\n              },\n              \"channelConcurrencyMap\": {\n                \"type\": \"map\",\n                \"key\": {},\n                \"value\": {\n                  \"type\": \"long\"\n                }\n              }\n            }\n          },\n          \"agentPreferences\": {\n            \"type\": \"map\",\n            \"key\": {},\n            \"value\": {}\n          }\n        }\n      },\n      \"S1z\": {\n        \"type\": \"structure\",\n        \"required\": [\n          \"type\",\n          \"name\"\n        ],\n        \"members\": {\n          \"agentStateARN\": {},\n          \"type\": {},\n          \"name\": {},\n          \"startTimestamp\": {\n            \"type\": \"timestamp\"\n          }\n        }\n      },\n      \"S3n\": {\n        \"type\": \"list\",\n        \"member\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"timestamp\": {\n              \"type\": \"timestamp\"\n            },\n            \"softphoneStreamType\": {},\n            \"packetCount\": {\n              \"type\": \"long\"\n            },\n            \"packetsLost\": {\n              \"type\": \"long\"\n            },\n            \"audioLevel\": {\n              \"type\": \"double\"\n            },\n            \"jitterBufferMillis\": {\n              \"type\": \"long\"\n            },\n            \"roundTripTimeMillis\": {\n              \"type\": \"long\"\n            }\n          }\n        }\n      }\n    }\n  }\n  },{}],4:[function(require,module,exports){\n  module.exports={\n    \"acm\": {\n      \"name\": \"ACM\",\n      \"cors\": true\n    },\n    \"apigateway\": {\n      \"name\": \"APIGateway\",\n      \"cors\": true\n    },\n    \"applicationautoscaling\": {\n      \"prefix\": \"application-autoscaling\",\n      \"name\": \"ApplicationAutoScaling\",\n      \"cors\": true\n    },\n    \"appstream\": {\n      \"name\": \"AppStream\"\n    },\n    \"autoscaling\": {\n      \"name\": \"AutoScaling\",\n      \"cors\": true\n    },\n    \"batch\": {\n      \"name\": \"Batch\"\n    },\n    \"budgets\": {\n      \"name\": \"Budgets\"\n    },\n    \"clouddirectory\": {\n      \"name\": \"CloudDirectory\",\n      \"versions\": [\n        \"2016-05-10*\"\n      ]\n    },\n    \"cloudformation\": {\n      \"name\": \"CloudFormation\",\n      \"cors\": true\n    },\n    \"cloudfront\": {\n      \"name\": \"CloudFront\",\n      \"versions\": [\n        \"2013-05-12*\",\n        \"2013-11-11*\",\n        \"2014-05-31*\",\n        \"2014-10-21*\",\n        \"2014-11-06*\",\n        \"2015-04-17*\",\n        \"2015-07-27*\",\n        \"2015-09-17*\",\n        \"2016-01-13*\",\n        \"2016-01-28*\",\n        \"2016-08-01*\",\n        \"2016-08-20*\",\n        \"2016-09-07*\",\n        \"2016-09-29*\",\n        \"2016-11-25*\",\n        \"2017-03-25*\",\n        \"2017-10-30*\",\n        \"2018-06-18*\",\n        \"2018-11-05*\"\n      ],\n      \"cors\": true\n    },\n    \"cloudhsm\": {\n      \"name\": \"CloudHSM\",\n      \"cors\": true\n    },\n    \"cloudsearch\": {\n      \"name\": \"CloudSearch\"\n    },\n    \"cloudsearchdomain\": {\n      \"name\": \"CloudSearchDomain\"\n    },\n    \"cloudtrail\": {\n      \"name\": \"CloudTrail\",\n      \"cors\": true\n    },\n    \"cloudwatch\": {\n      \"prefix\": \"monitoring\",\n      \"name\": \"CloudWatch\",\n      \"cors\": true\n    },\n    \"cloudwatchevents\": {\n      \"prefix\": \"events\",\n      \"name\": \"CloudWatchEvents\",\n      \"versions\": [\n        \"2014-02-03*\"\n      ],\n      \"cors\": true\n    },\n    \"cloudwatchlogs\": {\n      \"prefix\": \"logs\",\n      \"name\": \"CloudWatchLogs\",\n      \"cors\": true\n    },\n    \"codebuild\": {\n      \"name\": \"CodeBuild\",\n      \"cors\": true\n    },\n    \"codecommit\": {\n      \"name\": \"CodeCommit\",\n      \"cors\": true\n    },\n    \"codedeploy\": {\n      \"name\": \"CodeDeploy\",\n      \"cors\": true\n    },\n    \"codepipeline\": {\n      \"name\": \"CodePipeline\",\n      \"cors\": true\n    },\n    \"cognitoidentity\": {\n      \"prefix\": \"cognito-identity\",\n      \"name\": \"CognitoIdentity\",\n      \"cors\": true\n    },\n    \"cognitoidentityserviceprovider\": {\n      \"prefix\": \"cognito-idp\",\n      \"name\": \"CognitoIdentityServiceProvider\",\n      \"cors\": true\n    },\n    \"cognitosync\": {\n      \"prefix\": \"cognito-sync\",\n      \"name\": \"CognitoSync\",\n      \"cors\": true\n    },\n    \"configservice\": {\n      \"prefix\": \"config\",\n      \"name\": \"ConfigService\",\n      \"cors\": true\n    },\n    \"cur\": {\n      \"name\": \"CUR\",\n      \"cors\": true\n    },\n    \"datapipeline\": {\n      \"name\": \"DataPipeline\"\n    },\n    \"devicefarm\": {\n      \"name\": \"DeviceFarm\",\n      \"cors\": true\n    },\n    \"directconnect\": {\n      \"name\": \"DirectConnect\",\n      \"cors\": true\n    },\n    \"directoryservice\": {\n      \"prefix\": \"ds\",\n      \"name\": \"DirectoryService\"\n    },\n    \"discovery\": {\n      \"name\": \"Discovery\"\n    },\n    \"dms\": {\n      \"name\": \"DMS\"\n    },\n    \"dynamodb\": {\n      \"name\": \"DynamoDB\",\n      \"cors\": true\n    },\n    \"dynamodbstreams\": {\n      \"prefix\": \"streams.dynamodb\",\n      \"name\": \"DynamoDBStreams\",\n      \"cors\": true\n    },\n    \"ec2\": {\n      \"name\": \"EC2\",\n      \"versions\": [\n        \"2013-06-15*\",\n        \"2013-10-15*\",\n        \"2014-02-01*\",\n        \"2014-05-01*\",\n        \"2014-06-15*\",\n        \"2014-09-01*\",\n        \"2014-10-01*\",\n        \"2015-03-01*\",\n        \"2015-04-15*\",\n        \"2015-10-01*\",\n        \"2016-04-01*\",\n        \"2016-09-15*\"\n      ],\n      \"cors\": true\n    },\n    \"ecr\": {\n      \"name\": \"ECR\",\n      \"cors\": true\n    },\n    \"ecs\": {\n      \"name\": \"ECS\",\n      \"cors\": true\n    },\n    \"efs\": {\n      \"prefix\": \"elasticfilesystem\",\n      \"name\": \"EFS\",\n      \"cors\": true\n    },\n    \"elasticache\": {\n      \"name\": \"ElastiCache\",\n      \"versions\": [\n        \"2012-11-15*\",\n        \"2014-03-24*\",\n        \"2014-07-15*\",\n        \"2014-09-30*\"\n      ],\n      \"cors\": true\n    },\n    \"elasticbeanstalk\": {\n      \"name\": \"ElasticBeanstalk\",\n      \"cors\": true\n    },\n    \"elb\": {\n      \"prefix\": \"elasticloadbalancing\",\n      \"name\": \"ELB\",\n      \"cors\": true\n    },\n    \"elbv2\": {\n      \"prefix\": \"elasticloadbalancingv2\",\n      \"name\": \"ELBv2\",\n      \"cors\": true\n    },\n    \"emr\": {\n      \"prefix\": \"elasticmapreduce\",\n      \"name\": \"EMR\",\n      \"cors\": true\n    },\n    \"es\": {\n      \"name\": \"ES\"\n    },\n    \"elastictranscoder\": {\n      \"name\": \"ElasticTranscoder\",\n      \"cors\": true\n    },\n    \"firehose\": {\n      \"name\": \"Firehose\",\n      \"cors\": true\n    },\n    \"gamelift\": {\n      \"name\": \"GameLift\",\n      \"cors\": true\n    },\n    \"glacier\": {\n      \"name\": \"Glacier\"\n    },\n    \"health\": {\n      \"name\": \"Health\"\n    },\n    \"iam\": {\n      \"name\": \"IAM\",\n      \"cors\": true\n    },\n    \"importexport\": {\n      \"name\": \"ImportExport\"\n    },\n    \"inspector\": {\n      \"name\": \"Inspector\",\n      \"versions\": [\n        \"2015-08-18*\"\n      ],\n      \"cors\": true\n    },\n    \"iot\": {\n      \"name\": \"Iot\",\n      \"cors\": true\n    },\n    \"iotdata\": {\n      \"prefix\": \"iot-data\",\n      \"name\": \"IotData\",\n      \"cors\": true\n    },\n    \"kinesis\": {\n      \"name\": \"Kinesis\",\n      \"cors\": true\n    },\n    \"kinesisanalytics\": {\n      \"name\": \"KinesisAnalytics\"\n    },\n    \"kms\": {\n      \"name\": \"KMS\",\n      \"cors\": true\n    },\n    \"lambda\": {\n      \"name\": \"Lambda\",\n      \"cors\": true\n    },\n    \"lexruntime\": {\n      \"prefix\": \"runtime.lex\",\n      \"name\": \"LexRuntime\",\n      \"cors\": true\n    },\n    \"lightsail\": {\n      \"name\": \"Lightsail\"\n    },\n    \"machinelearning\": {\n      \"name\": \"MachineLearning\",\n      \"cors\": true\n    },\n    \"marketplacecommerceanalytics\": {\n      \"name\": \"MarketplaceCommerceAnalytics\",\n      \"cors\": true\n    },\n    \"marketplacemetering\": {\n      \"prefix\": \"meteringmarketplace\",\n      \"name\": \"MarketplaceMetering\"\n    },\n    \"mturk\": {\n      \"prefix\": \"mturk-requester\",\n      \"name\": \"MTurk\",\n      \"cors\": true\n    },\n    \"mobileanalytics\": {\n      \"name\": \"MobileAnalytics\",\n      \"cors\": true\n    },\n    \"opsworks\": {\n      \"name\": \"OpsWorks\",\n      \"cors\": true\n    },\n    \"opsworkscm\": {\n      \"name\": \"OpsWorksCM\"\n    },\n    \"organizations\": {\n      \"name\": \"Organizations\"\n    },\n    \"pinpoint\": {\n      \"name\": \"Pinpoint\"\n    },\n    \"polly\": {\n      \"name\": \"Polly\",\n      \"cors\": true\n    },\n    \"rds\": {\n      \"name\": \"RDS\",\n      \"versions\": [\n        \"2014-09-01*\"\n      ],\n      \"cors\": true\n    },\n    \"redshift\": {\n      \"name\": \"Redshift\",\n      \"cors\": true\n    },\n    \"rekognition\": {\n      \"name\": \"Rekognition\",\n      \"cors\": true\n    },\n    \"resourcegroupstaggingapi\": {\n      \"name\": \"ResourceGroupsTaggingAPI\"\n    },\n    \"route53\": {\n      \"name\": \"Route53\",\n      \"cors\": true\n    },\n    \"route53domains\": {\n      \"name\": \"Route53Domains\",\n      \"cors\": true\n    },\n    \"s3\": {\n      \"name\": \"S3\",\n      \"dualstackAvailable\": true,\n      \"cors\": true\n    },\n    \"s3control\": {\n      \"name\": \"S3Control\",\n      \"dualstackAvailable\": true\n    },\n    \"servicecatalog\": {\n      \"name\": \"ServiceCatalog\",\n      \"cors\": true\n    },\n    \"ses\": {\n      \"prefix\": \"email\",\n      \"name\": \"SES\",\n      \"cors\": true\n    },\n    \"shield\": {\n      \"name\": \"Shield\"\n    },\n    \"simpledb\": {\n      \"prefix\": \"sdb\",\n      \"name\": \"SimpleDB\"\n    },\n    \"sms\": {\n      \"name\": \"SMS\"\n    },\n    \"snowball\": {\n      \"name\": \"Snowball\"\n    },\n    \"sns\": {\n      \"name\": \"SNS\",\n      \"cors\": true\n    },\n    \"sqs\": {\n      \"name\": \"SQS\",\n      \"cors\": true\n    },\n    \"ssm\": {\n      \"name\": \"SSM\",\n      \"cors\": true\n    },\n    \"storagegateway\": {\n      \"name\": \"StorageGateway\",\n      \"cors\": true\n    },\n    \"stepfunctions\": {\n      \"prefix\": \"states\",\n      \"name\": \"StepFunctions\"\n    },\n    \"sts\": {\n      \"name\": \"STS\",\n      \"cors\": true\n    },\n    \"support\": {\n      \"name\": \"Support\"\n    },\n    \"swf\": {\n      \"name\": \"SWF\"\n    },\n    \"xray\": {\n      \"name\": \"XRay\",\n      \"cors\": true\n    },\n    \"waf\": {\n      \"name\": \"WAF\",\n      \"cors\": true\n    },\n    \"wafregional\": {\n      \"prefix\": \"waf-regional\",\n      \"name\": \"WAFRegional\"\n    },\n    \"workdocs\": {\n      \"name\": \"WorkDocs\",\n      \"cors\": true\n    },\n    \"workspaces\": {\n      \"name\": \"WorkSpaces\"\n    },\n    \"codestar\": {\n      \"name\": \"CodeStar\"\n    },\n    \"lexmodelbuildingservice\": {\n      \"prefix\": \"lex-models\",\n      \"name\": \"LexModelBuildingService\",\n      \"cors\": true\n    },\n    \"marketplaceentitlementservice\": {\n      \"prefix\": \"entitlement.marketplace\",\n      \"name\": \"MarketplaceEntitlementService\"\n    },\n    \"athena\": {\n      \"name\": \"Athena\"\n    },\n    \"greengrass\": {\n      \"name\": \"Greengrass\"\n    },\n    \"dax\": {\n      \"name\": \"DAX\"\n    },\n    \"migrationhub\": {\n      \"prefix\": \"AWSMigrationHub\",\n      \"name\": \"MigrationHub\"\n    },\n    \"cloudhsmv2\": {\n      \"name\": \"CloudHSMV2\"\n    },\n    \"glue\": {\n      \"name\": \"Glue\"\n    },\n    \"mobile\": {\n      \"name\": \"Mobile\"\n    },\n    \"pricing\": {\n      \"name\": \"Pricing\",\n      \"cors\": true\n    },\n    \"costexplorer\": {\n      \"prefix\": \"ce\",\n      \"name\": \"CostExplorer\",\n      \"cors\": true\n    },\n    \"mediaconvert\": {\n      \"name\": \"MediaConvert\"\n    },\n    \"medialive\": {\n      \"name\": \"MediaLive\"\n    },\n    \"mediapackage\": {\n      \"name\": \"MediaPackage\"\n    },\n    \"mediastore\": {\n      \"name\": \"MediaStore\"\n    },\n    \"mediastoredata\": {\n      \"prefix\": \"mediastore-data\",\n      \"name\": \"MediaStoreData\",\n      \"cors\": true\n    },\n    \"appsync\": {\n      \"name\": \"AppSync\"\n    },\n    \"guardduty\": {\n      \"name\": \"GuardDuty\"\n    },\n    \"mq\": {\n      \"name\": \"MQ\"\n    },\n    \"comprehend\": {\n      \"name\": \"Comprehend\",\n      \"cors\": true\n    },\n    \"iotjobsdataplane\": {\n      \"prefix\": \"iot-jobs-data\",\n      \"name\": \"IoTJobsDataPlane\"\n    },\n    \"kinesisvideoarchivedmedia\": {\n      \"prefix\": \"kinesis-video-archived-media\",\n      \"name\": \"KinesisVideoArchivedMedia\",\n      \"cors\": true\n    },\n    \"kinesisvideomedia\": {\n      \"prefix\": \"kinesis-video-media\",\n      \"name\": \"KinesisVideoMedia\",\n      \"cors\": true\n    },\n    \"kinesisvideo\": {\n      \"name\": \"KinesisVideo\",\n      \"cors\": true\n    },\n    \"sagemakerruntime\": {\n      \"prefix\": \"runtime.sagemaker\",\n      \"name\": \"SageMakerRuntime\"\n    },\n    \"sagemaker\": {\n      \"name\": \"SageMaker\"\n    },\n    \"translate\": {\n      \"name\": \"Translate\",\n      \"cors\": true\n    },\n    \"resourcegroups\": {\n      \"prefix\": \"resource-groups\",\n      \"name\": \"ResourceGroups\",\n      \"cors\": true\n    },\n    \"alexaforbusiness\": {\n      \"name\": \"AlexaForBusiness\"\n    },\n    \"cloud9\": {\n      \"name\": \"Cloud9\"\n    },\n    \"serverlessapplicationrepository\": {\n      \"prefix\": \"serverlessrepo\",\n      \"name\": \"ServerlessApplicationRepository\"\n    },\n    \"servicediscovery\": {\n      \"name\": \"ServiceDiscovery\"\n    },\n    \"workmail\": {\n      \"name\": \"WorkMail\"\n    },\n    \"autoscalingplans\": {\n      \"prefix\": \"autoscaling-plans\",\n      \"name\": \"AutoScalingPlans\"\n    },\n    \"transcribeservice\": {\n      \"prefix\": \"transcribe\",\n      \"name\": \"TranscribeService\"\n    },\n    \"connect\": {\n      \"name\": \"Connect\",\n      \"cors\": true\n    },\n    \"acmpca\": {\n      \"prefix\": \"acm-pca\",\n      \"name\": \"ACMPCA\"\n    },\n    \"fms\": {\n      \"name\": \"FMS\"\n    },\n    \"secretsmanager\": {\n      \"name\": \"SecretsManager\",\n      \"cors\": true\n    },\n    \"iotanalytics\": {\n      \"name\": \"IoTAnalytics\",\n      \"cors\": true\t\n    },\n    \"iot1clickdevicesservice\": {\n      \"prefix\": \"iot1click-devices\",\n      \"name\": \"IoT1ClickDevicesService\"\n    },\n    \"iot1clickprojects\": {\n      \"prefix\": \"iot1click-projects\",\n      \"name\": \"IoT1ClickProjects\"\n    },\n    \"pi\": {\n      \"name\": \"PI\"\n    },\n    \"neptune\": {\n      \"name\": \"Neptune\"\n    },\n    \"mediatailor\": {\n      \"name\": \"MediaTailor\"\n    },\n    \"eks\": {\n      \"name\": \"EKS\"\n    },\n    \"macie\": {\n      \"name\": \"Macie\"\n    },\n    \"dlm\": {\n      \"name\": \"DLM\"\n    },\n    \"signer\": {\n      \"name\": \"Signer\"\n    },\n    \"chime\": {\n      \"name\": \"Chime\"\n    },\n    \"pinpointemail\": {\n      \"prefix\": \"pinpoint-email\",\n      \"name\": \"PinpointEmail\"\n    },\n    \"ram\": {\n      \"name\": \"RAM\"\n    },\n    \"route53resolver\": {\n      \"name\": \"Route53Resolver\"\n    },\n    \"pinpointsmsvoice\": {\n      \"prefix\": \"sms-voice\",\n      \"name\": \"PinpointSMSVoice\"\n    },\n    \"quicksight\": {\n      \"name\": \"QuickSight\"\n    },\n    \"rdsdataservice\": {\n      \"prefix\": \"rds-data\",\n      \"name\": \"RDSDataService\"\n    },\n    \"amplify\": {\n      \"name\": \"Amplify\"\n    },\n    \"datasync\": {\n      \"name\": \"DataSync\"\n    },\n    \"robomaker\": {\n      \"name\": \"RoboMaker\"\n    },\n    \"transfer\": {\n      \"name\": \"Transfer\"\n    },\n    \"globalaccelerator\": {\n      \"name\": \"GlobalAccelerator\"\n    },\n    \"comprehendmedical\": {\n      \"name\": \"ComprehendMedical\",\n      \"cors\": true\n    },\n    \"kinesisanalyticsv2\": {\n      \"name\": \"KinesisAnalyticsV2\"\n    },\n    \"mediaconnect\": {\n      \"name\": \"MediaConnect\"\n    },\n    \"fsx\": {\n      \"name\": \"FSx\"\n    },\n    \"securityhub\": {\n      \"name\": \"SecurityHub\"\n    },\n    \"appmesh\": {\n      \"name\": \"AppMesh\",\n      \"versions\": [\n        \"2018-10-01*\"\n      ]\n    },\n    \"licensemanager\": {\n      \"prefix\": \"license-manager\",\n      \"name\": \"LicenseManager\"\n    },\n    \"kafka\": {\n      \"name\": \"Kafka\"\n    },\n    \"apigatewaymanagementapi\": {\n      \"name\": \"ApiGatewayManagementApi\"\n    },\n    \"apigatewayv2\": {\n      \"name\": \"ApiGatewayV2\"\n    },\n    \"docdb\": {\n      \"name\": \"DocDB\"\n    },\n    \"backup\": {\n      \"name\": \"Backup\"\n    },\n    \"worklink\": {\n      \"name\": \"WorkLink\"\n    },\n    \"textract\": {\n      \"name\": \"Textract\"\n    },\n    \"managedblockchain\": {\n      \"name\": \"ManagedBlockchain\"\n    },\n    \"mediapackagevod\": {\n      \"prefix\": \"mediapackage-vod\",\n      \"name\": \"MediaPackageVod\"\n    },\n    \"groundstation\": {\n      \"name\": \"GroundStation\"\n    },\n    \"iotthingsgraph\": {\n      \"name\": \"IoTThingsGraph\"\n    },\n    \"iotevents\": {\n      \"name\": \"IoTEvents\"\n    },\n    \"ioteventsdata\": {\n      \"prefix\": \"iotevents-data\",\n      \"name\": \"IoTEventsData\"\n    },\n    \"personalize\": {\n      \"name\": \"Personalize\",\n      \"cors\": true\n    },\n    \"personalizeevents\": {\n      \"prefix\": \"personalize-events\",\n      \"name\": \"PersonalizeEvents\",\n      \"cors\": true\n    },\n    \"personalizeruntime\": {\n      \"prefix\": \"personalize-runtime\",\n      \"name\": \"PersonalizeRuntime\",\n      \"cors\": true\n    },\n    \"applicationinsights\": {\n      \"prefix\": \"application-insights\",\n      \"name\": \"ApplicationInsights\"\n    },\n    \"servicequotas\": {\n      \"prefix\": \"service-quotas\",\n      \"name\": \"ServiceQuotas\"\n    },\n    \"ec2instanceconnect\": {\n      \"prefix\": \"ec2-instance-connect\",\n      \"name\": \"EC2InstanceConnect\"\n    },\n    \"eventbridge\": {\n      \"name\": \"EventBridge\"\n    },\n    \"lakeformation\": {\n      \"name\": \"LakeFormation\"\n    },\n    \"forecastservice\": {\n      \"prefix\": \"forecast\",\n      \"name\": \"ForecastService\",\n      \"cors\": true\n    },\n    \"forecastqueryservice\": {\n      \"prefix\": \"forecastquery\",\n      \"name\": \"ForecastQueryService\",\n      \"cors\": true\n    },\n    \"qldb\": {\n      \"name\": \"QLDB\"\n    },\n    \"qldbsession\": {\n      \"prefix\": \"qldb-session\",\n      \"name\": \"QLDBSession\"\n    },\n    \"workmailmessageflow\": {\n      \"name\": \"WorkMailMessageFlow\"\n    }\n  }\n  \n  },{}],5:[function(require,module,exports){\n  module.exports={\n    \"version\": \"2.0\",\n    \"metadata\": {\n      \"apiVersion\": \"2011-06-15\",\n      \"endpointPrefix\": \"sts\",\n      \"globalEndpoint\": \"sts.amazonaws.com\",\n      \"protocol\": \"query\",\n      \"serviceAbbreviation\": \"AWS STS\",\n      \"serviceFullName\": \"AWS Security Token Service\",\n      \"serviceId\": \"STS\",\n      \"signatureVersion\": \"v4\",\n      \"uid\": \"sts-2011-06-15\",\n      \"xmlNamespace\": \"https://sts.amazonaws.com/doc/2011-06-15/\"\n    },\n    \"operations\": {\n      \"AssumeRole\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"RoleArn\",\n            \"RoleSessionName\"\n          ],\n          \"members\": {\n            \"RoleArn\": {},\n            \"RoleSessionName\": {},\n            \"PolicyArns\": {\n              \"shape\": \"S4\"\n            },\n            \"Policy\": {},\n            \"DurationSeconds\": {\n              \"type\": \"integer\"\n            },\n            \"ExternalId\": {},\n            \"SerialNumber\": {},\n            \"TokenCode\": {}\n          }\n        },\n        \"output\": {\n          \"resultWrapper\": \"AssumeRoleResult\",\n          \"type\": \"structure\",\n          \"members\": {\n            \"Credentials\": {\n              \"shape\": \"Sc\"\n            },\n            \"AssumedRoleUser\": {\n              \"shape\": \"Sh\"\n            },\n            \"PackedPolicySize\": {\n              \"type\": \"integer\"\n            }\n          }\n        }\n      },\n      \"AssumeRoleWithSAML\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"RoleArn\",\n            \"PrincipalArn\",\n            \"SAMLAssertion\"\n          ],\n          \"members\": {\n            \"RoleArn\": {},\n            \"PrincipalArn\": {},\n            \"SAMLAssertion\": {},\n            \"PolicyArns\": {\n              \"shape\": \"S4\"\n            },\n            \"Policy\": {},\n            \"DurationSeconds\": {\n              \"type\": \"integer\"\n            }\n          }\n        },\n        \"output\": {\n          \"resultWrapper\": \"AssumeRoleWithSAMLResult\",\n          \"type\": \"structure\",\n          \"members\": {\n            \"Credentials\": {\n              \"shape\": \"Sc\"\n            },\n            \"AssumedRoleUser\": {\n              \"shape\": \"Sh\"\n            },\n            \"PackedPolicySize\": {\n              \"type\": \"integer\"\n            },\n            \"Subject\": {},\n            \"SubjectType\": {},\n            \"Issuer\": {},\n            \"Audience\": {},\n            \"NameQualifier\": {}\n          }\n        }\n      },\n      \"AssumeRoleWithWebIdentity\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"RoleArn\",\n            \"RoleSessionName\",\n            \"WebIdentityToken\"\n          ],\n          \"members\": {\n            \"RoleArn\": {},\n            \"RoleSessionName\": {},\n            \"WebIdentityToken\": {},\n            \"ProviderId\": {},\n            \"PolicyArns\": {\n              \"shape\": \"S4\"\n            },\n            \"Policy\": {},\n            \"DurationSeconds\": {\n              \"type\": \"integer\"\n            }\n          }\n        },\n        \"output\": {\n          \"resultWrapper\": \"AssumeRoleWithWebIdentityResult\",\n          \"type\": \"structure\",\n          \"members\": {\n            \"Credentials\": {\n              \"shape\": \"Sc\"\n            },\n            \"SubjectFromWebIdentityToken\": {},\n            \"AssumedRoleUser\": {\n              \"shape\": \"Sh\"\n            },\n            \"PackedPolicySize\": {\n              \"type\": \"integer\"\n            },\n            \"Provider\": {},\n            \"Audience\": {}\n          }\n        }\n      },\n      \"DecodeAuthorizationMessage\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"EncodedMessage\"\n          ],\n          \"members\": {\n            \"EncodedMessage\": {}\n          }\n        },\n        \"output\": {\n          \"resultWrapper\": \"DecodeAuthorizationMessageResult\",\n          \"type\": \"structure\",\n          \"members\": {\n            \"DecodedMessage\": {}\n          }\n        }\n      },\n      \"GetAccessKeyInfo\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"AccessKeyId\"\n          ],\n          \"members\": {\n            \"AccessKeyId\": {}\n          }\n        },\n        \"output\": {\n          \"resultWrapper\": \"GetAccessKeyInfoResult\",\n          \"type\": \"structure\",\n          \"members\": {\n            \"Account\": {}\n          }\n        }\n      },\n      \"GetCallerIdentity\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"members\": {}\n        },\n        \"output\": {\n          \"resultWrapper\": \"GetCallerIdentityResult\",\n          \"type\": \"structure\",\n          \"members\": {\n            \"UserId\": {},\n            \"Account\": {},\n            \"Arn\": {}\n          }\n        }\n      },\n      \"GetFederationToken\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"required\": [\n            \"Name\"\n          ],\n          \"members\": {\n            \"Name\": {},\n            \"Policy\": {},\n            \"PolicyArns\": {\n              \"shape\": \"S4\"\n            },\n            \"DurationSeconds\": {\n              \"type\": \"integer\"\n            }\n          }\n        },\n        \"output\": {\n          \"resultWrapper\": \"GetFederationTokenResult\",\n          \"type\": \"structure\",\n          \"members\": {\n            \"Credentials\": {\n              \"shape\": \"Sc\"\n            },\n            \"FederatedUser\": {\n              \"type\": \"structure\",\n              \"required\": [\n                \"FederatedUserId\",\n                \"Arn\"\n              ],\n              \"members\": {\n                \"FederatedUserId\": {},\n                \"Arn\": {}\n              }\n            },\n            \"PackedPolicySize\": {\n              \"type\": \"integer\"\n            }\n          }\n        }\n      },\n      \"GetSessionToken\": {\n        \"input\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"DurationSeconds\": {\n              \"type\": \"integer\"\n            },\n            \"SerialNumber\": {},\n            \"TokenCode\": {}\n          }\n        },\n        \"output\": {\n          \"resultWrapper\": \"GetSessionTokenResult\",\n          \"type\": \"structure\",\n          \"members\": {\n            \"Credentials\": {\n              \"shape\": \"Sc\"\n            }\n          }\n        }\n      }\n    },\n    \"shapes\": {\n      \"S4\": {\n        \"type\": \"list\",\n        \"member\": {\n          \"type\": \"structure\",\n          \"members\": {\n            \"arn\": {}\n          }\n        }\n      },\n      \"Sc\": {\n        \"type\": \"structure\",\n        \"required\": [\n          \"AccessKeyId\",\n          \"SecretAccessKey\",\n          \"SessionToken\",\n          \"Expiration\"\n        ],\n        \"members\": {\n          \"AccessKeyId\": {},\n          \"SecretAccessKey\": {},\n          \"SessionToken\": {},\n          \"Expiration\": {\n            \"type\": \"timestamp\"\n          }\n        }\n      },\n      \"Sh\": {\n        \"type\": \"structure\",\n        \"required\": [\n          \"AssumedRoleId\",\n          \"Arn\"\n        ],\n        \"members\": {\n          \"AssumedRoleId\": {},\n          \"Arn\": {}\n        }\n      }\n    }\n  }\n  },{}],6:[function(require,module,exports){\n  arguments[4][2][0].apply(exports,arguments)\n  },{\"dup\":2}],7:[function(require,module,exports){\n  require('../lib/node_loader');\n  var AWS = require('../lib/core');\n  var Service = AWS.Service;\n  var apiLoader = AWS.apiLoader;\n  \n  apiLoader.services['cognitoidentity'] = {};\n  AWS.CognitoIdentity = Service.defineService('cognitoidentity', ['2014-06-30']);\n  require('../lib/services/cognitoidentity');\n  Object.defineProperty(apiLoader.services['cognitoidentity'], '2014-06-30', {\n    get: function get() {\n      var model = require('../apis/cognito-identity-2014-06-30.min.json');\n      model.paginators = require('../apis/cognito-identity-2014-06-30.paginators.json').pagination;\n      return model;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  \n  module.exports = AWS.CognitoIdentity;\n  \n  },{\"../apis/cognito-identity-2014-06-30.min.json\":1,\"../apis/cognito-identity-2014-06-30.paginators.json\":2,\"../lib/core\":18,\"../lib/node_loader\":16,\"../lib/services/cognitoidentity\":60}],8:[function(require,module,exports){\n  require('../lib/node_loader');\n  var AWS = require('../lib/core');\n  var Service = AWS.Service;\n  var apiLoader = AWS.apiLoader;\n  \n  apiLoader.services['sts'] = {};\n  AWS.STS = Service.defineService('sts', ['2011-06-15']);\n  require('../lib/services/sts');\n  Object.defineProperty(apiLoader.services['sts'], '2011-06-15', {\n    get: function get() {\n      var model = require('../apis/sts-2011-06-15.min.json');\n      model.paginators = require('../apis/sts-2011-06-15.paginators.json').pagination;\n      return model;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  \n  module.exports = AWS.STS;\n  \n  },{\"../apis/sts-2011-06-15.min.json\":5,\"../apis/sts-2011-06-15.paginators.json\":6,\"../lib/core\":18,\"../lib/node_loader\":16,\"../lib/services/sts\":61}],9:[function(require,module,exports){\n  function apiLoader(svc, version) {\n    if (!apiLoader.services.hasOwnProperty(svc)) {\n      throw new Error('InvalidService: Failed to load api for ' + svc);\n    }\n    return apiLoader.services[svc][version];\n  }\n  \n  /**\n   * @api private\n   *\n   * This member of AWS.apiLoader is private, but changing it will necessitate a\n   * change to ../scripts/services-table-generator.ts\n   */\n  apiLoader.services = {};\n  \n  /**\n   * @api private\n   */\n  module.exports = apiLoader;\n  \n  },{}],10:[function(require,module,exports){\n  var Hmac = require('./browserHmac');\n  var Md5 = require('./browserMd5');\n  var Sha1 = require('./browserSha1');\n  var Sha256 = require('./browserSha256');\n  \n  /**\n   * @api private\n   */\n  module.exports = exports = {\n      createHash: function createHash(alg) {\n        alg = alg.toLowerCase();\n        if (alg === 'md5') {\n          return new Md5();\n        } else if (alg === 'sha256') {\n          return new Sha256();\n        } else if (alg === 'sha1') {\n          return new Sha1();\n        }\n  \n        throw new Error('Hash algorithm ' + alg + ' is not supported in the browser SDK');\n      },\n      createHmac: function createHmac(alg, key) {\n        alg = alg.toLowerCase();\n        if (alg === 'md5') {\n          return new Hmac(Md5, key);\n        } else if (alg === 'sha256') {\n          return new Hmac(Sha256, key);\n        } else if (alg === 'sha1') {\n          return new Hmac(Sha1, key);\n        }\n  \n        throw new Error('HMAC algorithm ' + alg + ' is not supported in the browser SDK');\n      },\n      createSign: function() {\n        throw new Error('createSign is not implemented in the browser');\n      }\n    };\n  \n  },{\"./browserHmac\":12,\"./browserMd5\":13,\"./browserSha1\":14,\"./browserSha256\":15}],11:[function(require,module,exports){\n  var Buffer = require('buffer/').Buffer;\n  \n  /**\n   * This is a polyfill for the static method `isView` of `ArrayBuffer`, which is\n   * e.g. missing in IE 10.\n   *\n   * @api private\n   */\n  if (\n      typeof ArrayBuffer !== 'undefined' &&\n      typeof ArrayBuffer.isView === 'undefined'\n  ) {\n      ArrayBuffer.isView = function(arg) {\n          return viewStrings.indexOf(Object.prototype.toString.call(arg)) > -1;\n      };\n  }\n  \n  /**\n   * @api private\n   */\n  var viewStrings = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]',\n      '[object DataView]',\n  ];\n  \n  /**\n   * @api private\n   */\n  function isEmptyData(data) {\n      if (typeof data === 'string') {\n          return data.length === 0;\n      }\n      return data.byteLength === 0;\n  }\n  \n  /**\n   * @api private\n   */\n  function convertToBuffer(data) {\n      if (typeof data === 'string') {\n          data = new Buffer(data, 'utf8');\n      }\n  \n      if (ArrayBuffer.isView(data)) {\n          return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);\n      }\n  \n      return new Uint8Array(data);\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = exports = {\n      isEmptyData: isEmptyData,\n      convertToBuffer: convertToBuffer,\n  };\n  \n  },{\"buffer/\":80}],12:[function(require,module,exports){\n  var hashUtils = require('./browserHashUtils');\n  \n  /**\n   * @api private\n   */\n  function Hmac(hashCtor, secret) {\n      this.hash = new hashCtor();\n      this.outer = new hashCtor();\n  \n      var inner = bufferFromSecret(hashCtor, secret);\n      var outer = new Uint8Array(hashCtor.BLOCK_SIZE);\n      outer.set(inner);\n  \n      for (var i = 0; i < hashCtor.BLOCK_SIZE; i++) {\n          inner[i] ^= 0x36;\n          outer[i] ^= 0x5c;\n      }\n  \n      this.hash.update(inner);\n      this.outer.update(outer);\n  \n      // Zero out the copied key buffer.\n      for (var i = 0; i < inner.byteLength; i++) {\n          inner[i] = 0;\n      }\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = exports = Hmac;\n  \n  Hmac.prototype.update = function (toHash) {\n      if (hashUtils.isEmptyData(toHash) || this.error) {\n          return this;\n      }\n  \n      try {\n          this.hash.update(hashUtils.convertToBuffer(toHash));\n      } catch (e) {\n          this.error = e;\n      }\n  \n      return this;\n  };\n  \n  Hmac.prototype.digest = function (encoding) {\n      if (!this.outer.finished) {\n          this.outer.update(this.hash.digest());\n      }\n  \n      return this.outer.digest(encoding);\n  };\n  \n  function bufferFromSecret(hashCtor, secret) {\n      var input = hashUtils.convertToBuffer(secret);\n      if (input.byteLength > hashCtor.BLOCK_SIZE) {\n          var bufferHash = new hashCtor;\n          bufferHash.update(input);\n          input = bufferHash.digest();\n      }\n      var buffer = new Uint8Array(hashCtor.BLOCK_SIZE);\n      buffer.set(input);\n      return buffer;\n  }\n  \n  },{\"./browserHashUtils\":11}],13:[function(require,module,exports){\n  var hashUtils = require('./browserHashUtils');\n  var Buffer = require('buffer/').Buffer;\n  \n  var BLOCK_SIZE = 64;\n  \n  var DIGEST_LENGTH = 16;\n  \n  var INIT = [\n      0x67452301,\n      0xefcdab89,\n      0x98badcfe,\n      0x10325476,\n  ];\n  \n  /**\n   * @api private\n   */\n  function Md5() {\n      this.state = [\n          0x67452301,\n          0xefcdab89,\n          0x98badcfe,\n          0x10325476,\n      ];\n      this.buffer = new DataView(new ArrayBuffer(BLOCK_SIZE));\n      this.bufferLength = 0;\n      this.bytesHashed = 0;\n      this.finished = false;\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = exports = Md5;\n  \n  Md5.BLOCK_SIZE = BLOCK_SIZE;\n  \n  Md5.prototype.update = function (sourceData) {\n      if (hashUtils.isEmptyData(sourceData)) {\n          return this;\n      } else if (this.finished) {\n          throw new Error('Attempted to update an already finished hash.');\n      }\n  \n      var data = hashUtils.convertToBuffer(sourceData);\n      var position = 0;\n      var byteLength = data.byteLength;\n      this.bytesHashed += byteLength;\n      while (byteLength > 0) {\n          this.buffer.setUint8(this.bufferLength++, data[position++]);\n          byteLength--;\n          if (this.bufferLength === BLOCK_SIZE) {\n              this.hashBuffer();\n              this.bufferLength = 0;\n          }\n      }\n  \n      return this;\n  };\n  \n  Md5.prototype.digest = function (encoding) {\n      if (!this.finished) {\n          var _a = this, buffer = _a.buffer, undecoratedLength = _a.bufferLength, bytesHashed = _a.bytesHashed;\n          var bitsHashed = bytesHashed * 8;\n          buffer.setUint8(this.bufferLength++, 128);\n          // Ensure the final block has enough room for the hashed length\n          if (undecoratedLength % BLOCK_SIZE >= BLOCK_SIZE - 8) {\n              for (var i = this.bufferLength; i < BLOCK_SIZE; i++) {\n                  buffer.setUint8(i, 0);\n              }\n              this.hashBuffer();\n              this.bufferLength = 0;\n          }\n          for (var i = this.bufferLength; i < BLOCK_SIZE - 8; i++) {\n              buffer.setUint8(i, 0);\n          }\n          buffer.setUint32(BLOCK_SIZE - 8, bitsHashed >>> 0, true);\n          buffer.setUint32(BLOCK_SIZE - 4, Math.floor(bitsHashed / 0x100000000), true);\n          this.hashBuffer();\n          this.finished = true;\n      }\n      var out = new DataView(new ArrayBuffer(DIGEST_LENGTH));\n      for (var i = 0; i < 4; i++) {\n          out.setUint32(i * 4, this.state[i], true);\n      }\n      var buff = new Buffer(out.buffer, out.byteOffset, out.byteLength);\n      return encoding ? buff.toString(encoding) : buff;\n  };\n  \n  Md5.prototype.hashBuffer = function () {\n      var _a = this, buffer = _a.buffer, state = _a.state;\n      var a = state[0], b = state[1], c = state[2], d = state[3];\n      a = ff(a, b, c, d, buffer.getUint32(0, true), 7, 0xd76aa478);\n      d = ff(d, a, b, c, buffer.getUint32(4, true), 12, 0xe8c7b756);\n      c = ff(c, d, a, b, buffer.getUint32(8, true), 17, 0x242070db);\n      b = ff(b, c, d, a, buffer.getUint32(12, true), 22, 0xc1bdceee);\n      a = ff(a, b, c, d, buffer.getUint32(16, true), 7, 0xf57c0faf);\n      d = ff(d, a, b, c, buffer.getUint32(20, true), 12, 0x4787c62a);\n      c = ff(c, d, a, b, buffer.getUint32(24, true), 17, 0xa8304613);\n      b = ff(b, c, d, a, buffer.getUint32(28, true), 22, 0xfd469501);\n      a = ff(a, b, c, d, buffer.getUint32(32, true), 7, 0x698098d8);\n      d = ff(d, a, b, c, buffer.getUint32(36, true), 12, 0x8b44f7af);\n      c = ff(c, d, a, b, buffer.getUint32(40, true), 17, 0xffff5bb1);\n      b = ff(b, c, d, a, buffer.getUint32(44, true), 22, 0x895cd7be);\n      a = ff(a, b, c, d, buffer.getUint32(48, true), 7, 0x6b901122);\n      d = ff(d, a, b, c, buffer.getUint32(52, true), 12, 0xfd987193);\n      c = ff(c, d, a, b, buffer.getUint32(56, true), 17, 0xa679438e);\n      b = ff(b, c, d, a, buffer.getUint32(60, true), 22, 0x49b40821);\n      a = gg(a, b, c, d, buffer.getUint32(4, true), 5, 0xf61e2562);\n      d = gg(d, a, b, c, buffer.getUint32(24, true), 9, 0xc040b340);\n      c = gg(c, d, a, b, buffer.getUint32(44, true), 14, 0x265e5a51);\n      b = gg(b, c, d, a, buffer.getUint32(0, true), 20, 0xe9b6c7aa);\n      a = gg(a, b, c, d, buffer.getUint32(20, true), 5, 0xd62f105d);\n      d = gg(d, a, b, c, buffer.getUint32(40, true), 9, 0x02441453);\n      c = gg(c, d, a, b, buffer.getUint32(60, true), 14, 0xd8a1e681);\n      b = gg(b, c, d, a, buffer.getUint32(16, true), 20, 0xe7d3fbc8);\n      a = gg(a, b, c, d, buffer.getUint32(36, true), 5, 0x21e1cde6);\n      d = gg(d, a, b, c, buffer.getUint32(56, true), 9, 0xc33707d6);\n      c = gg(c, d, a, b, buffer.getUint32(12, true), 14, 0xf4d50d87);\n      b = gg(b, c, d, a, buffer.getUint32(32, true), 20, 0x455a14ed);\n      a = gg(a, b, c, d, buffer.getUint32(52, true), 5, 0xa9e3e905);\n      d = gg(d, a, b, c, buffer.getUint32(8, true), 9, 0xfcefa3f8);\n      c = gg(c, d, a, b, buffer.getUint32(28, true), 14, 0x676f02d9);\n      b = gg(b, c, d, a, buffer.getUint32(48, true), 20, 0x8d2a4c8a);\n      a = hh(a, b, c, d, buffer.getUint32(20, true), 4, 0xfffa3942);\n      d = hh(d, a, b, c, buffer.getUint32(32, true), 11, 0x8771f681);\n      c = hh(c, d, a, b, buffer.getUint32(44, true), 16, 0x6d9d6122);\n      b = hh(b, c, d, a, buffer.getUint32(56, true), 23, 0xfde5380c);\n      a = hh(a, b, c, d, buffer.getUint32(4, true), 4, 0xa4beea44);\n      d = hh(d, a, b, c, buffer.getUint32(16, true), 11, 0x4bdecfa9);\n      c = hh(c, d, a, b, buffer.getUint32(28, true), 16, 0xf6bb4b60);\n      b = hh(b, c, d, a, buffer.getUint32(40, true), 23, 0xbebfbc70);\n      a = hh(a, b, c, d, buffer.getUint32(52, true), 4, 0x289b7ec6);\n      d = hh(d, a, b, c, buffer.getUint32(0, true), 11, 0xeaa127fa);\n      c = hh(c, d, a, b, buffer.getUint32(12, true), 16, 0xd4ef3085);\n      b = hh(b, c, d, a, buffer.getUint32(24, true), 23, 0x04881d05);\n      a = hh(a, b, c, d, buffer.getUint32(36, true), 4, 0xd9d4d039);\n      d = hh(d, a, b, c, buffer.getUint32(48, true), 11, 0xe6db99e5);\n      c = hh(c, d, a, b, buffer.getUint32(60, true), 16, 0x1fa27cf8);\n      b = hh(b, c, d, a, buffer.getUint32(8, true), 23, 0xc4ac5665);\n      a = ii(a, b, c, d, buffer.getUint32(0, true), 6, 0xf4292244);\n      d = ii(d, a, b, c, buffer.getUint32(28, true), 10, 0x432aff97);\n      c = ii(c, d, a, b, buffer.getUint32(56, true), 15, 0xab9423a7);\n      b = ii(b, c, d, a, buffer.getUint32(20, true), 21, 0xfc93a039);\n      a = ii(a, b, c, d, buffer.getUint32(48, true), 6, 0x655b59c3);\n      d = ii(d, a, b, c, buffer.getUint32(12, true), 10, 0x8f0ccc92);\n      c = ii(c, d, a, b, buffer.getUint32(40, true), 15, 0xffeff47d);\n      b = ii(b, c, d, a, buffer.getUint32(4, true), 21, 0x85845dd1);\n      a = ii(a, b, c, d, buffer.getUint32(32, true), 6, 0x6fa87e4f);\n      d = ii(d, a, b, c, buffer.getUint32(60, true), 10, 0xfe2ce6e0);\n      c = ii(c, d, a, b, buffer.getUint32(24, true), 15, 0xa3014314);\n      b = ii(b, c, d, a, buffer.getUint32(52, true), 21, 0x4e0811a1);\n      a = ii(a, b, c, d, buffer.getUint32(16, true), 6, 0xf7537e82);\n      d = ii(d, a, b, c, buffer.getUint32(44, true), 10, 0xbd3af235);\n      c = ii(c, d, a, b, buffer.getUint32(8, true), 15, 0x2ad7d2bb);\n      b = ii(b, c, d, a, buffer.getUint32(36, true), 21, 0xeb86d391);\n      state[0] = (a + state[0]) & 0xFFFFFFFF;\n      state[1] = (b + state[1]) & 0xFFFFFFFF;\n      state[2] = (c + state[2]) & 0xFFFFFFFF;\n      state[3] = (d + state[3]) & 0xFFFFFFFF;\n  };\n  \n  function cmn(q, a, b, x, s, t) {\n      a = (((a + q) & 0xFFFFFFFF) + ((x + t) & 0xFFFFFFFF)) & 0xFFFFFFFF;\n      return (((a << s) | (a >>> (32 - s))) + b) & 0xFFFFFFFF;\n  }\n  \n  function ff(a, b, c, d, x, s, t) {\n      return cmn((b & c) | ((~b) & d), a, b, x, s, t);\n  }\n  \n  function gg(a, b, c, d, x, s, t) {\n      return cmn((b & d) | (c & (~d)), a, b, x, s, t);\n  }\n  \n  function hh(a, b, c, d, x, s, t) {\n      return cmn(b ^ c ^ d, a, b, x, s, t);\n  }\n  \n  function ii(a, b, c, d, x, s, t) {\n      return cmn(c ^ (b | (~d)), a, b, x, s, t);\n  }\n  \n  },{\"./browserHashUtils\":11,\"buffer/\":80}],14:[function(require,module,exports){\n  var Buffer = require('buffer/').Buffer;\n  var hashUtils = require('./browserHashUtils');\n  \n  var BLOCK_SIZE = 64;\n  \n  var DIGEST_LENGTH = 20;\n  \n  var KEY = new Uint32Array([\n      0x5a827999,\n      0x6ed9eba1,\n      0x8f1bbcdc | 0,\n      0xca62c1d6 | 0\n  ]);\n  \n  var INIT = [\n      0x6a09e667,\n      0xbb67ae85,\n      0x3c6ef372,\n      0xa54ff53a,\n      0x510e527f,\n      0x9b05688c,\n      0x1f83d9ab,\n      0x5be0cd19,\n  ];\n  \n  var MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1;\n  \n  /**\n   * @api private\n   */\n  function Sha1() {\n      this.h0 = 0x67452301;\n      this.h1 = 0xEFCDAB89;\n      this.h2 = 0x98BADCFE;\n      this.h3 = 0x10325476;\n      this.h4 = 0xC3D2E1F0;\n      // The first 64 bytes (16 words) is the data chunk\n      this.block = new Uint32Array(80);\n      this.offset = 0;\n      this.shift = 24;\n      this.totalLength = 0;\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = exports = Sha1;\n  \n  Sha1.BLOCK_SIZE = BLOCK_SIZE;\n  \n  Sha1.prototype.update = function (data) {\n      if (this.finished) {\n          throw new Error('Attempted to update an already finished hash.');\n      }\n  \n      if (hashUtils.isEmptyData(data)) {\n          return this;\n      }\n  \n      data = hashUtils.convertToBuffer(data);\n  \n      var length = data.length;\n      this.totalLength += length * 8;\n      for (var i = 0; i < length; i++) {\n          this.write(data[i]);\n      }\n  \n      return this;\n  };\n  \n  Sha1.prototype.write = function write(byte) {\n      this.block[this.offset] |= (byte & 0xff) << this.shift;\n      if (this.shift) {\n          this.shift -= 8;\n      } else {\n          this.offset++;\n          this.shift = 24;\n      }\n  \n      if (this.offset === 16) this.processBlock();\n  };\n  \n  Sha1.prototype.digest = function (encoding) {\n      // Pad\n      this.write(0x80);\n      if (this.offset > 14 || (this.offset === 14 && this.shift < 24)) {\n        this.processBlock();\n      }\n      this.offset = 14;\n      this.shift = 24;\n  \n      // 64-bit length big-endian\n      this.write(0x00); // numbers this big aren't accurate in javascript anyway\n      this.write(0x00); // ..So just hard-code to zero.\n      this.write(this.totalLength > 0xffffffffff ? this.totalLength / 0x10000000000 : 0x00);\n      this.write(this.totalLength > 0xffffffff ? this.totalLength / 0x100000000 : 0x00);\n      for (var s = 24; s >= 0; s -= 8) {\n          this.write(this.totalLength >> s);\n      }\n      // The value in state is little-endian rather than big-endian, so flip\n      // each word into a new Uint8Array\n      var out = new Buffer(DIGEST_LENGTH);\n      var outView = new DataView(out.buffer);\n      outView.setUint32(0, this.h0, false);\n      outView.setUint32(4, this.h1, false);\n      outView.setUint32(8, this.h2, false);\n      outView.setUint32(12, this.h3, false);\n      outView.setUint32(16, this.h4, false);\n  \n      return encoding ? out.toString(encoding) : out;\n  };\n  \n  Sha1.prototype.processBlock = function processBlock() {\n      // Extend the sixteen 32-bit words into eighty 32-bit words:\n      for (var i = 16; i < 80; i++) {\n        var w = this.block[i - 3] ^ this.block[i - 8] ^ this.block[i - 14] ^ this.block[i - 16];\n        this.block[i] = (w << 1) | (w >>> 31);\n      }\n  \n      // Initialize hash value for this chunk:\n      var a = this.h0;\n      var b = this.h1;\n      var c = this.h2;\n      var d = this.h3;\n      var e = this.h4;\n      var f, k;\n  \n      // Main loop:\n      for (i = 0; i < 80; i++) {\n        if (i < 20) {\n          f = d ^ (b & (c ^ d));\n          k = 0x5A827999;\n        }\n        else if (i < 40) {\n          f = b ^ c ^ d;\n          k = 0x6ED9EBA1;\n        }\n        else if (i < 60) {\n          f = (b & c) | (d & (b | c));\n          k = 0x8F1BBCDC;\n        }\n        else {\n          f = b ^ c ^ d;\n          k = 0xCA62C1D6;\n        }\n        var temp = (a << 5 | a >>> 27) + f + e + k + (this.block[i]|0);\n        e = d;\n        d = c;\n        c = (b << 30 | b >>> 2);\n        b = a;\n        a = temp;\n      }\n  \n      // Add this chunk's hash to result so far:\n      this.h0 = (this.h0 + a) | 0;\n      this.h1 = (this.h1 + b) | 0;\n      this.h2 = (this.h2 + c) | 0;\n      this.h3 = (this.h3 + d) | 0;\n      this.h4 = (this.h4 + e) | 0;\n  \n      // The block is now reusable.\n      this.offset = 0;\n      for (i = 0; i < 16; i++) {\n          this.block[i] = 0;\n      }\n  };\n  \n  },{\"./browserHashUtils\":11,\"buffer/\":80}],15:[function(require,module,exports){\n  var Buffer = require('buffer/').Buffer;\n  var hashUtils = require('./browserHashUtils');\n  \n  var BLOCK_SIZE = 64;\n  \n  var DIGEST_LENGTH = 32;\n  \n  var KEY = new Uint32Array([\n      0x428a2f98,\n      0x71374491,\n      0xb5c0fbcf,\n      0xe9b5dba5,\n      0x3956c25b,\n      0x59f111f1,\n      0x923f82a4,\n      0xab1c5ed5,\n      0xd807aa98,\n      0x12835b01,\n      0x243185be,\n      0x550c7dc3,\n      0x72be5d74,\n      0x80deb1fe,\n      0x9bdc06a7,\n      0xc19bf174,\n      0xe49b69c1,\n      0xefbe4786,\n      0x0fc19dc6,\n      0x240ca1cc,\n      0x2de92c6f,\n      0x4a7484aa,\n      0x5cb0a9dc,\n      0x76f988da,\n      0x983e5152,\n      0xa831c66d,\n      0xb00327c8,\n      0xbf597fc7,\n      0xc6e00bf3,\n      0xd5a79147,\n      0x06ca6351,\n      0x14292967,\n      0x27b70a85,\n      0x2e1b2138,\n      0x4d2c6dfc,\n      0x53380d13,\n      0x650a7354,\n      0x766a0abb,\n      0x81c2c92e,\n      0x92722c85,\n      0xa2bfe8a1,\n      0xa81a664b,\n      0xc24b8b70,\n      0xc76c51a3,\n      0xd192e819,\n      0xd6990624,\n      0xf40e3585,\n      0x106aa070,\n      0x19a4c116,\n      0x1e376c08,\n      0x2748774c,\n      0x34b0bcb5,\n      0x391c0cb3,\n      0x4ed8aa4a,\n      0x5b9cca4f,\n      0x682e6ff3,\n      0x748f82ee,\n      0x78a5636f,\n      0x84c87814,\n      0x8cc70208,\n      0x90befffa,\n      0xa4506ceb,\n      0xbef9a3f7,\n      0xc67178f2\n  ]);\n  \n  var INIT = [\n      0x6a09e667,\n      0xbb67ae85,\n      0x3c6ef372,\n      0xa54ff53a,\n      0x510e527f,\n      0x9b05688c,\n      0x1f83d9ab,\n      0x5be0cd19,\n  ];\n  \n  var MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1;\n  \n  /**\n   * @private\n   */\n  function Sha256() {\n      this.state = [\n          0x6a09e667,\n          0xbb67ae85,\n          0x3c6ef372,\n          0xa54ff53a,\n          0x510e527f,\n          0x9b05688c,\n          0x1f83d9ab,\n          0x5be0cd19,\n      ];\n      this.temp = new Int32Array(64);\n      this.buffer = new Uint8Array(64);\n      this.bufferLength = 0;\n      this.bytesHashed = 0;\n      /**\n       * @private\n       */\n      this.finished = false;\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = exports = Sha256;\n  \n  Sha256.BLOCK_SIZE = BLOCK_SIZE;\n  \n  Sha256.prototype.update = function (data) {\n      if (this.finished) {\n          throw new Error('Attempted to update an already finished hash.');\n      }\n  \n      if (hashUtils.isEmptyData(data)) {\n          return this;\n      }\n  \n      data = hashUtils.convertToBuffer(data);\n  \n      var position = 0;\n      var byteLength = data.byteLength;\n      this.bytesHashed += byteLength;\n      if (this.bytesHashed * 8 > MAX_HASHABLE_LENGTH) {\n          throw new Error('Cannot hash more than 2^53 - 1 bits');\n      }\n  \n      while (byteLength > 0) {\n          this.buffer[this.bufferLength++] = data[position++];\n          byteLength--;\n          if (this.bufferLength === BLOCK_SIZE) {\n              this.hashBuffer();\n              this.bufferLength = 0;\n          }\n      }\n  \n      return this;\n  };\n  \n  Sha256.prototype.digest = function (encoding) {\n      if (!this.finished) {\n          var bitsHashed = this.bytesHashed * 8;\n          var bufferView = new DataView(this.buffer.buffer, this.buffer.byteOffset, this.buffer.byteLength);\n          var undecoratedLength = this.bufferLength;\n          bufferView.setUint8(this.bufferLength++, 0x80);\n          // Ensure the final block has enough room for the hashed length\n          if (undecoratedLength % BLOCK_SIZE >= BLOCK_SIZE - 8) {\n              for (var i = this.bufferLength; i < BLOCK_SIZE; i++) {\n                  bufferView.setUint8(i, 0);\n              }\n              this.hashBuffer();\n              this.bufferLength = 0;\n          }\n          for (var i = this.bufferLength; i < BLOCK_SIZE - 8; i++) {\n              bufferView.setUint8(i, 0);\n          }\n          bufferView.setUint32(BLOCK_SIZE - 8, Math.floor(bitsHashed / 0x100000000), true);\n          bufferView.setUint32(BLOCK_SIZE - 4, bitsHashed);\n          this.hashBuffer();\n          this.finished = true;\n      }\n      // The value in state is little-endian rather than big-endian, so flip\n      // each word into a new Uint8Array\n      var out = new Buffer(DIGEST_LENGTH);\n      for (var i = 0; i < 8; i++) {\n          out[i * 4] = (this.state[i] >>> 24) & 0xff;\n          out[i * 4 + 1] = (this.state[i] >>> 16) & 0xff;\n          out[i * 4 + 2] = (this.state[i] >>> 8) & 0xff;\n          out[i * 4 + 3] = (this.state[i] >>> 0) & 0xff;\n      }\n      return encoding ? out.toString(encoding) : out;\n  };\n  \n  Sha256.prototype.hashBuffer = function () {\n      var _a = this,\n          buffer = _a.buffer,\n          state = _a.state;\n      var state0 = state[0],\n          state1 = state[1],\n          state2 = state[2],\n          state3 = state[3],\n          state4 = state[4],\n          state5 = state[5],\n          state6 = state[6],\n          state7 = state[7];\n      for (var i = 0; i < BLOCK_SIZE; i++) {\n          if (i < 16) {\n              this.temp[i] = (((buffer[i * 4] & 0xff) << 24) |\n                  ((buffer[(i * 4) + 1] & 0xff) << 16) |\n                  ((buffer[(i * 4) + 2] & 0xff) << 8) |\n                  (buffer[(i * 4) + 3] & 0xff));\n          }\n          else {\n              var u = this.temp[i - 2];\n              var t1_1 = (u >>> 17 | u << 15) ^\n                  (u >>> 19 | u << 13) ^\n                  (u >>> 10);\n              u = this.temp[i - 15];\n              var t2_1 = (u >>> 7 | u << 25) ^\n                  (u >>> 18 | u << 14) ^\n                  (u >>> 3);\n              this.temp[i] = (t1_1 + this.temp[i - 7] | 0) +\n                  (t2_1 + this.temp[i - 16] | 0);\n          }\n          var t1 = (((((state4 >>> 6 | state4 << 26) ^\n              (state4 >>> 11 | state4 << 21) ^\n              (state4 >>> 25 | state4 << 7))\n              + ((state4 & state5) ^ (~state4 & state6))) | 0)\n              + ((state7 + ((KEY[i] + this.temp[i]) | 0)) | 0)) | 0;\n          var t2 = (((state0 >>> 2 | state0 << 30) ^\n              (state0 >>> 13 | state0 << 19) ^\n              (state0 >>> 22 | state0 << 10)) + ((state0 & state1) ^ (state0 & state2) ^ (state1 & state2))) | 0;\n          state7 = state6;\n          state6 = state5;\n          state5 = state4;\n          state4 = (state3 + t1) | 0;\n          state3 = state2;\n          state2 = state1;\n          state1 = state0;\n          state0 = (t1 + t2) | 0;\n      }\n      state[0] += state0;\n      state[1] += state1;\n      state[2] += state2;\n      state[3] += state3;\n      state[4] += state4;\n      state[5] += state5;\n      state[6] += state6;\n      state[7] += state7;\n  };\n  \n  },{\"./browserHashUtils\":11,\"buffer/\":80}],16:[function(require,module,exports){\n  (function (process){\n  var util = require('./util');\n  \n  // browser specific modules\n  util.crypto.lib = require('./browserCryptoLib');\n  util.Buffer = require('buffer/').Buffer;\n  util.url = require('url/');\n  util.querystring = require('querystring/');\n  util.realClock = require('./realclock/browserClock');\n  util.environment = 'js';\n  util.createEventStream = require('./event-stream/buffered-create-event-stream').createEventStream;\n  util.isBrowser = function() { return true; };\n  util.isNode = function() { return false; };\n  \n  var AWS = require('./core');\n  \n  /**\n   * @api private\n   */\n  module.exports = AWS;\n  \n  require('./credentials');\n  require('./credentials/credential_provider_chain');\n  require('./credentials/temporary_credentials');\n  require('./credentials/chainable_temporary_credentials');\n  require('./credentials/web_identity_credentials');\n  require('./credentials/cognito_identity_credentials');\n  require('./credentials/saml_credentials');\n  \n  // Load the DOMParser XML parser\n  AWS.XML.Parser = require('./xml/browser_parser');\n  \n  // Load the XHR HttpClient\n  require('./http/xhr');\n  \n  if (typeof process === 'undefined') {\n    var process = {\n      browser: true\n    };\n  }\n  \n  }).call(this,require('_process'))\n  },{\"./browserCryptoLib\":10,\"./core\":18,\"./credentials\":19,\"./credentials/chainable_temporary_credentials\":20,\"./credentials/cognito_identity_credentials\":21,\"./credentials/credential_provider_chain\":22,\"./credentials/saml_credentials\":23,\"./credentials/temporary_credentials\":24,\"./credentials/web_identity_credentials\":25,\"./event-stream/buffered-create-event-stream\":27,\"./http/xhr\":35,\"./realclock/browserClock\":52,\"./util\":71,\"./xml/browser_parser\":72,\"_process\":85,\"buffer/\":80,\"querystring/\":92,\"url/\":94}],17:[function(require,module,exports){\n  var AWS = require('./core');\n  require('./credentials');\n  require('./credentials/credential_provider_chain');\n  var PromisesDependency;\n  \n  /**\n   * The main configuration class used by all service objects to set\n   * the region, credentials, and other options for requests.\n   *\n   * By default, credentials and region settings are left unconfigured.\n   * This should be configured by the application before using any\n   * AWS service APIs.\n   *\n   * In order to set global configuration options, properties should\n   * be assigned to the global {AWS.config} object.\n   *\n   * @see AWS.config\n   *\n   * @!group General Configuration Options\n   *\n   * @!attribute credentials\n   *   @return [AWS.Credentials] the AWS credentials to sign requests with.\n   *\n   * @!attribute region\n   *   @example Set the global region setting to us-west-2\n   *     AWS.config.update({region: 'us-west-2'});\n   *   @return [AWS.Credentials] The region to send service requests to.\n   *   @see http://docs.amazonwebservices.com/general/latest/gr/rande.html\n   *     A list of available endpoints for each AWS service\n   *\n   * @!attribute maxRetries\n   *   @return [Integer] the maximum amount of retries to perform for a\n   *     service request. By default this value is calculated by the specific\n   *     service object that the request is being made to.\n   *\n   * @!attribute maxRedirects\n   *   @return [Integer] the maximum amount of redirects to follow for a\n   *     service request. Defaults to 10.\n   *\n   * @!attribute paramValidation\n   *   @return [Boolean|map] whether input parameters should be validated against\n   *     the operation description before sending the request. Defaults to true.\n   *     Pass a map to enable any of the following specific validation features:\n   *\n   *     * **min** [Boolean] &mdash; Validates that a value meets the min\n   *       constraint. This is enabled by default when paramValidation is set\n   *       to `true`.\n   *     * **max** [Boolean] &mdash; Validates that a value meets the max\n   *       constraint.\n   *     * **pattern** [Boolean] &mdash; Validates that a string value matches a\n   *       regular expression.\n   *     * **enum** [Boolean] &mdash; Validates that a string value matches one\n   *       of the allowable enum values.\n   *\n   * @!attribute computeChecksums\n   *   @return [Boolean] whether to compute checksums for payload bodies when\n   *     the service accepts it (currently supported in S3 only).\n   *\n   * @!attribute convertResponseTypes\n   *   @return [Boolean] whether types are converted when parsing response data.\n   *     Currently only supported for JSON based services. Turning this off may\n   *     improve performance on large response payloads. Defaults to `true`.\n   *\n   * @!attribute correctClockSkew\n   *   @return [Boolean] whether to apply a clock skew correction and retry\n   *     requests that fail because of an skewed client clock. Defaults to\n   *     `false`.\n   *\n   * @!attribute sslEnabled\n   *   @return [Boolean] whether SSL is enabled for requests\n   *\n   * @!attribute s3ForcePathStyle\n   *   @return [Boolean] whether to force path style URLs for S3 objects\n   *\n   * @!attribute s3BucketEndpoint\n   *   @note Setting this configuration option requires an `endpoint` to be\n   *     provided explicitly to the service constructor.\n   *   @return [Boolean] whether the provided endpoint addresses an individual\n   *     bucket (false if it addresses the root API endpoint).\n   *\n   * @!attribute s3DisableBodySigning\n   *   @return [Boolean] whether to disable S3 body signing when using signature version `v4`.\n   *     Body signing can only be disabled when using https. Defaults to `true`.\n   *\n   * @!attribute useAccelerateEndpoint\n   *   @note This configuration option is only compatible with S3 while accessing\n   *     dns-compatible buckets.\n   *   @return [Boolean] Whether to use the Accelerate endpoint with the S3 service.\n   *     Defaults to `false`.\n   *\n   * @!attribute retryDelayOptions\n   *   @example Set the base retry delay for all services to 300 ms\n   *     AWS.config.update({retryDelayOptions: {base: 300}});\n   *     // Delays with maxRetries = 3: 300, 600, 1200\n   *   @example Set a custom backoff function to provide delay values on retries\n   *     AWS.config.update({retryDelayOptions: {customBackoff: function(retryCount) {\n   *       // returns delay in ms\n   *     }}});\n   *   @return [map] A set of options to configure the retry delay on retryable errors.\n   *     Currently supported options are:\n   *\n   *     * **base** [Integer] &mdash; The base number of milliseconds to use in the\n   *       exponential backoff for operation retries. Defaults to 100 ms for all services except\n   *       DynamoDB, where it defaults to 50ms.\n   *     * **customBackoff ** [function] &mdash; A custom function that accepts a retry count\n   *       and returns the amount of time to delay in milliseconds. The `base` option will be\n   *       ignored if this option is supplied.\n   *\n   * @!attribute httpOptions\n   *   @return [map] A set of options to pass to the low-level HTTP request.\n   *     Currently supported options are:\n   *\n   *     * **proxy** [String] &mdash; the URL to proxy requests through\n   *     * **agent** [http.Agent, https.Agent] &mdash; the Agent object to perform\n   *       HTTP requests with. Used for connection pooling. Note that for\n   *       SSL connections, a special Agent object is used in order to enable\n   *       peer certificate verification. This feature is only supported in the\n   *       Node.js environment.\n   *     * **connectTimeout** [Integer] &mdash; Sets the socket to timeout after\n   *       failing to establish a connection with the server after\n   *       `connectTimeout` milliseconds. This timeout has no effect once a socket\n   *       connection has been established.\n   *     * **timeout** [Integer] &mdash; Sets the socket to timeout after timeout\n   *       milliseconds of inactivity on the socket. Defaults to two minutes\n   *       (120000)\n   *     * **xhrAsync** [Boolean] &mdash; Whether the SDK will send asynchronous\n   *       HTTP requests. Used in the browser environment only. Set to false to\n   *       send requests synchronously. Defaults to true (async on).\n   *     * **xhrWithCredentials** [Boolean] &mdash; Sets the \"withCredentials\"\n   *       property of an XMLHttpRequest object. Used in the browser environment\n   *       only. Defaults to false.\n   * @!attribute logger\n   *   @return [#write,#log] an object that responds to .write() (like a stream)\n   *     or .log() (like the console object) in order to log information about\n   *     requests\n   *\n   * @!attribute systemClockOffset\n   *   @return [Number] an offset value in milliseconds to apply to all signing\n   *     times. Use this to compensate for clock skew when your system may be\n   *     out of sync with the service time. Note that this configuration option\n   *     can only be applied to the global `AWS.config` object and cannot be\n   *     overridden in service-specific configuration. Defaults to 0 milliseconds.\n   *\n   * @!attribute signatureVersion\n   *   @return [String] the signature version to sign requests with (overriding\n   *     the API configuration). Possible values are: 'v2', 'v3', 'v4'.\n   *\n   * @!attribute signatureCache\n   *   @return [Boolean] whether the signature to sign requests with (overriding\n   *     the API configuration) is cached. Only applies to the signature version 'v4'.\n   *     Defaults to `true`.\n   *\n   * @!attribute endpointDiscoveryEnabled\n   *   @return [Boolean] whether to enable endpoint discovery for operations that\n   *     allow optionally using an endpoint returned by the service.\n   *     Defaults to 'false'\n   *\n   * @!attribute endpointCacheSize\n   *   @return [Number] the size of the global cache storing endpoints from endpoint\n   *     discovery operations. Once endpoint cache is created, updating this setting\n   *     cannot change existing cache size.\n   *     Defaults to 1000\n   *\n   * @!attribute hostPrefixEnabled\n   *   @return [Boolean] whether to marshal request parameters to the prefix of\n   *     hostname. Defaults to `true`.\n   *\n   * @!attribute stsRegionalEndpoints\n   *   @return ['legacy'|'regional'] whether to send sts request to global endpoints or\n   *     regional endpoints.\n   *     Defaults to 'legacy'\n   */\n  AWS.Config = AWS.util.inherit({\n    /**\n     * @!endgroup\n     */\n  \n    /**\n     * Creates a new configuration object. This is the object that passes\n     * option data along to service requests, including credentials, security,\n     * region information, and some service specific settings.\n     *\n     * @example Creating a new configuration object with credentials and region\n     *   var config = new AWS.Config({\n     *     accessKeyId: 'AKID', secretAccessKey: 'SECRET', region: 'us-west-2'\n     *   });\n     * @option options accessKeyId [String] your AWS access key ID.\n     * @option options secretAccessKey [String] your AWS secret access key.\n     * @option options sessionToken [AWS.Credentials] the optional AWS\n     *   session token to sign requests with.\n     * @option options credentials [AWS.Credentials] the AWS credentials\n     *   to sign requests with. You can either specify this object, or\n     *   specify the accessKeyId and secretAccessKey options directly.\n     * @option options credentialProvider [AWS.CredentialProviderChain] the\n     *   provider chain used to resolve credentials if no static `credentials`\n     *   property is set.\n     * @option options region [String] the region to send service requests to.\n     *   See {region} for more information.\n     * @option options maxRetries [Integer] the maximum amount of retries to\n     *   attempt with a request. See {maxRetries} for more information.\n     * @option options maxRedirects [Integer] the maximum amount of redirects to\n     *   follow with a request. See {maxRedirects} for more information.\n     * @option options sslEnabled [Boolean] whether to enable SSL for\n     *   requests.\n     * @option options paramValidation [Boolean|map] whether input parameters\n     *   should be validated against the operation description before sending\n     *   the request. Defaults to true. Pass a map to enable any of the\n     *   following specific validation features:\n     *\n     *   * **min** [Boolean] &mdash; Validates that a value meets the min\n     *     constraint. This is enabled by default when paramValidation is set\n     *     to `true`.\n     *   * **max** [Boolean] &mdash; Validates that a value meets the max\n     *     constraint.\n     *   * **pattern** [Boolean] &mdash; Validates that a string value matches a\n     *     regular expression.\n     *   * **enum** [Boolean] &mdash; Validates that a string value matches one\n     *     of the allowable enum values.\n     * @option options computeChecksums [Boolean] whether to compute checksums\n     *   for payload bodies when the service accepts it (currently supported\n     *   in S3 only)\n     * @option options convertResponseTypes [Boolean] whether types are converted\n     *     when parsing response data. Currently only supported for JSON based\n     *     services. Turning this off may improve performance on large response\n     *     payloads. Defaults to `true`.\n     * @option options correctClockSkew [Boolean] whether to apply a clock skew\n     *     correction and retry requests that fail because of an skewed client\n     *     clock. Defaults to `false`.\n     * @option options s3ForcePathStyle [Boolean] whether to force path\n     *   style URLs for S3 objects.\n     * @option options s3BucketEndpoint [Boolean] whether the provided endpoint\n     *   addresses an individual bucket (false if it addresses the root API\n     *   endpoint). Note that setting this configuration option requires an\n     *   `endpoint` to be provided explicitly to the service constructor.\n     * @option options s3DisableBodySigning [Boolean] whether S3 body signing\n     *   should be disabled when using signature version `v4`. Body signing\n     *   can only be disabled when using https. Defaults to `true`.\n     *\n     * @option options retryDelayOptions [map] A set of options to configure\n     *   the retry delay on retryable errors. Currently supported options are:\n     *\n     *   * **base** [Integer] &mdash; The base number of milliseconds to use in the\n     *     exponential backoff for operation retries. Defaults to 100 ms for all\n     *     services except DynamoDB, where it defaults to 50ms.\n     *   * **customBackoff ** [function] &mdash; A custom function that accepts a retry count\n     *     and returns the amount of time to delay in milliseconds. The `base` option will be\n     *     ignored if this option is supplied.\n     * @option options httpOptions [map] A set of options to pass to the low-level\n     *   HTTP request. Currently supported options are:\n     *\n     *   * **proxy** [String] &mdash; the URL to proxy requests through\n     *   * **agent** [http.Agent, https.Agent] &mdash; the Agent object to perform\n     *     HTTP requests with. Used for connection pooling. Defaults to the global\n     *     agent (`http.globalAgent`) for non-SSL connections. Note that for\n     *     SSL connections, a special Agent object is used in order to enable\n     *     peer certificate verification. This feature is only available in the\n     *     Node.js environment.\n     *   * **connectTimeout** [Integer] &mdash; Sets the socket to timeout after\n     *     failing to establish a connection with the server after\n     *     `connectTimeout` milliseconds. This timeout has no effect once a socket\n     *     connection has been established.\n     *   * **timeout** [Integer] &mdash; Sets the socket to timeout after timeout\n     *     milliseconds of inactivity on the socket. Defaults to two minutes\n     *     (120000).\n     *   * **xhrAsync** [Boolean] &mdash; Whether the SDK will send asynchronous\n     *     HTTP requests. Used in the browser environment only. Set to false to\n     *     send requests synchronously. Defaults to true (async on).\n     *   * **xhrWithCredentials** [Boolean] &mdash; Sets the \"withCredentials\"\n     *     property of an XMLHttpRequest object. Used in the browser environment\n     *     only. Defaults to false.\n     * @option options apiVersion [String, Date] a String in YYYY-MM-DD format\n     *   (or a date) that represents the latest possible API version that can be\n     *   used in all services (unless overridden by `apiVersions`). Specify\n     *   'latest' to use the latest possible version.\n     * @option options apiVersions [map<String, String|Date>] a map of service\n     *   identifiers (the lowercase service class name) with the API version to\n     *   use when instantiating a service. Specify 'latest' for each individual\n     *   that can use the latest available version.\n     * @option options logger [#write,#log] an object that responds to .write()\n     *   (like a stream) or .log() (like the console object) in order to log\n     *   information about requests\n     * @option options systemClockOffset [Number] an offset value in milliseconds\n     *   to apply to all signing times. Use this to compensate for clock skew\n     *   when your system may be out of sync with the service time. Note that\n     *   this configuration option can only be applied to the global `AWS.config`\n     *   object and cannot be overridden in service-specific configuration.\n     *   Defaults to 0 milliseconds.\n     * @option options signatureVersion [String] the signature version to sign\n     *   requests with (overriding the API configuration). Possible values are:\n     *   'v2', 'v3', 'v4'.\n     * @option options signatureCache [Boolean] whether the signature to sign\n     *   requests with (overriding the API configuration) is cached. Only applies\n     *   to the signature version 'v4'. Defaults to `true`.\n     * @option options dynamoDbCrc32 [Boolean] whether to validate the CRC32\n     *   checksum of HTTP response bodies returned by DynamoDB. Default: `true`.\n     * @option options useAccelerateEndpoint [Boolean] Whether to use the\n     *   S3 Transfer Acceleration endpoint with the S3 service. Default: `false`.\n     * @option options clientSideMonitoring [Boolean] whether to collect and\n     *   publish this client's performance metrics of all its API requests.\n     * @option options endpointDiscoveryEnabled [Boolean] whether to enable endpoint\n     *   discovery for operations that allow optionally using an endpoint returned by\n     *   the service.\n     *   Defaults to 'false'\n     * @option options endpointCacheSize [Number] the size of the global cache storing\n     *   endpoints from endpoint discovery operations. Once endpoint cache is created,\n     *   updating this setting cannot change existing cache size.\n     *   Defaults to 1000\n     * @option options hostPrefixEnabled [Boolean] whether to marshal request\n     *   parameters to the prefix of hostname.\n     *   Defaults to `true`.\n     * @option options stsRegionalEndpoints ['legacy'|'regional'] whether to send sts request\n     *   to global endpoints or regional endpoints.\n     *   Defaults to 'legacy'.\n     */\n    constructor: function Config(options) {\n      if (options === undefined) options = {};\n      options = this.extractCredentials(options);\n  \n      AWS.util.each.call(this, this.keys, function (key, value) {\n        this.set(key, options[key], value);\n      });\n    },\n  \n    /**\n     * @!group Managing Credentials\n     */\n  \n    /**\n     * Loads credentials from the configuration object. This is used internally\n     * by the SDK to ensure that refreshable {Credentials} objects are properly\n     * refreshed and loaded when sending a request. If you want to ensure that\n     * your credentials are loaded prior to a request, you can use this method\n     * directly to provide accurate credential data stored in the object.\n     *\n     * @note If you configure the SDK with static or environment credentials,\n     *   the credential data should already be present in {credentials} attribute.\n     *   This method is primarily necessary to load credentials from asynchronous\n     *   sources, or sources that can refresh credentials periodically.\n     * @example Getting your access key\n     *   AWS.config.getCredentials(function(err) {\n     *     if (err) console.log(err.stack); // credentials not loaded\n     *     else console.log(\"Access Key:\", AWS.config.credentials.accessKeyId);\n     *   })\n     * @callback callback function(err)\n     *   Called when the {credentials} have been properly set on the configuration\n     *   object.\n     *\n     *   @param err [Error] if this is set, credentials were not successfully\n     *     loaded and this error provides information why.\n     * @see credentials\n     * @see Credentials\n     */\n    getCredentials: function getCredentials(callback) {\n      var self = this;\n  \n      function finish(err) {\n        callback(err, err ? null : self.credentials);\n      }\n  \n      function credError(msg, err) {\n        return new AWS.util.error(err || new Error(), {\n          code: 'CredentialsError',\n          message: msg,\n          name: 'CredentialsError'\n        });\n      }\n  \n      function getAsyncCredentials() {\n        self.credentials.get(function(err) {\n          if (err) {\n            var msg = 'Could not load credentials from ' +\n              self.credentials.constructor.name;\n            err = credError(msg, err);\n          }\n          finish(err);\n        });\n      }\n  \n      function getStaticCredentials() {\n        var err = null;\n        if (!self.credentials.accessKeyId || !self.credentials.secretAccessKey) {\n          err = credError('Missing credentials');\n        }\n        finish(err);\n      }\n  \n      if (self.credentials) {\n        if (typeof self.credentials.get === 'function') {\n          getAsyncCredentials();\n        } else { // static credentials\n          getStaticCredentials();\n        }\n      } else if (self.credentialProvider) {\n        self.credentialProvider.resolve(function(err, creds) {\n          if (err) {\n            err = credError('Could not load credentials from any providers', err);\n          }\n          self.credentials = creds;\n          finish(err);\n        });\n      } else {\n        finish(credError('No credentials to load'));\n      }\n    },\n  \n    /**\n     * @!group Loading and Setting Configuration Options\n     */\n  \n    /**\n     * @overload update(options, allowUnknownKeys = false)\n     *   Updates the current configuration object with new options.\n     *\n     *   @example Update maxRetries property of a configuration object\n     *     config.update({maxRetries: 10});\n     *   @param [Object] options a map of option keys and values.\n     *   @param [Boolean] allowUnknownKeys whether unknown keys can be set on\n     *     the configuration object. Defaults to `false`.\n     *   @see constructor\n     */\n    update: function update(options, allowUnknownKeys) {\n      allowUnknownKeys = allowUnknownKeys || false;\n      options = this.extractCredentials(options);\n      AWS.util.each.call(this, options, function (key, value) {\n        if (allowUnknownKeys || Object.prototype.hasOwnProperty.call(this.keys, key) ||\n            AWS.Service.hasService(key)) {\n          this.set(key, value);\n        }\n      });\n    },\n  \n    /**\n     * Loads configuration data from a JSON file into this config object.\n     * @note Loading configuration will reset all existing configuration\n     *   on the object.\n     * @!macro nobrowser\n     * @param path [String] the path relative to your process's current\n     *    working directory to load configuration from.\n     * @return [AWS.Config] the same configuration object\n     */\n    loadFromPath: function loadFromPath(path) {\n      this.clear();\n  \n      var options = JSON.parse(AWS.util.readFileSync(path));\n      var fileSystemCreds = new AWS.FileSystemCredentials(path);\n      var chain = new AWS.CredentialProviderChain();\n      chain.providers.unshift(fileSystemCreds);\n      chain.resolve(function (err, creds) {\n        if (err) throw err;\n        else options.credentials = creds;\n      });\n  \n      this.constructor(options);\n  \n      return this;\n    },\n  \n    /**\n     * Clears configuration data on this object\n     *\n     * @api private\n     */\n    clear: function clear() {\n      /*jshint forin:false */\n      AWS.util.each.call(this, this.keys, function (key) {\n        delete this[key];\n      });\n  \n      // reset credential provider\n      this.set('credentials', undefined);\n      this.set('credentialProvider', undefined);\n    },\n  \n    /**\n     * Sets a property on the configuration object, allowing for a\n     * default value\n     * @api private\n     */\n    set: function set(property, value, defaultValue) {\n      if (value === undefined) {\n        if (defaultValue === undefined) {\n          defaultValue = this.keys[property];\n        }\n        if (typeof defaultValue === 'function') {\n          this[property] = defaultValue.call(this);\n        } else {\n          this[property] = defaultValue;\n        }\n      } else if (property === 'httpOptions' && this[property]) {\n        // deep merge httpOptions\n        this[property] = AWS.util.merge(this[property], value);\n      } else {\n        this[property] = value;\n      }\n    },\n  \n    /**\n     * All of the keys with their default values.\n     *\n     * @constant\n     * @api private\n     */\n    keys: {\n      credentials: null,\n      credentialProvider: null,\n      region: null,\n      logger: null,\n      apiVersions: {},\n      apiVersion: null,\n      endpoint: undefined,\n      httpOptions: {\n        timeout: 120000\n      },\n      maxRetries: undefined,\n      maxRedirects: 10,\n      paramValidation: true,\n      sslEnabled: true,\n      s3ForcePathStyle: false,\n      s3BucketEndpoint: false,\n      s3DisableBodySigning: true,\n      computeChecksums: true,\n      convertResponseTypes: true,\n      correctClockSkew: false,\n      customUserAgent: null,\n      dynamoDbCrc32: true,\n      systemClockOffset: 0,\n      signatureVersion: null,\n      signatureCache: true,\n      retryDelayOptions: {},\n      useAccelerateEndpoint: false,\n      clientSideMonitoring: false,\n      endpointDiscoveryEnabled: false,\n      endpointCacheSize: 1000,\n      hostPrefixEnabled: true,\n      stsRegionalEndpoints: null\n    },\n  \n    /**\n     * Extracts accessKeyId, secretAccessKey and sessionToken\n     * from a configuration hash.\n     *\n     * @api private\n     */\n    extractCredentials: function extractCredentials(options) {\n      if (options.accessKeyId && options.secretAccessKey) {\n        options = AWS.util.copy(options);\n        options.credentials = new AWS.Credentials(options);\n      }\n      return options;\n    },\n  \n    /**\n     * Sets the promise dependency the SDK will use wherever Promises are returned.\n     * Passing `null` will force the SDK to use native Promises if they are available.\n     * If native Promises are not available, passing `null` will have no effect.\n     * @param [Constructor] dep A reference to a Promise constructor\n     */\n    setPromisesDependency: function setPromisesDependency(dep) {\n      PromisesDependency = dep;\n      // if null was passed in, we should try to use native promises\n      if (dep === null && typeof Promise === 'function') {\n        PromisesDependency = Promise;\n      }\n      var constructors = [AWS.Request, AWS.Credentials, AWS.CredentialProviderChain];\n      if (AWS.S3) {\n        constructors.push(AWS.S3);\n        if (AWS.S3.ManagedUpload) {\n          constructors.push(AWS.S3.ManagedUpload);\n        }\n      }\n      AWS.util.addPromises(constructors, PromisesDependency);\n    },\n  \n    /**\n     * Gets the promise dependency set by `AWS.config.setPromisesDependency`.\n     */\n    getPromisesDependency: function getPromisesDependency() {\n      return PromisesDependency;\n    }\n  });\n  \n  /**\n   * @return [AWS.Config] The global configuration object singleton instance\n   * @readonly\n   * @see AWS.Config\n   */\n  AWS.config = new AWS.Config();\n  \n  },{\"./core\":18,\"./credentials\":19,\"./credentials/credential_provider_chain\":22}],18:[function(require,module,exports){\n  /**\n   * The main AWS namespace\n   */\n  var AWS = { util: require('./util') };\n  \n  /**\n   * @api private\n   * @!macro [new] nobrowser\n   *   @note This feature is not supported in the browser environment of the SDK.\n   */\n  var _hidden = {}; _hidden.toString(); // hack to parse macro\n  \n  /**\n   * @api private\n   */\n  module.exports = AWS;\n  \n  AWS.util.update(AWS, {\n  \n    /**\n     * @constant\n     */\n    VERSION: '2.553.0',\n  \n    /**\n     * @api private\n     */\n    Signers: {},\n  \n    /**\n     * @api private\n     */\n    Protocol: {\n      Json: require('./protocol/json'),\n      Query: require('./protocol/query'),\n      Rest: require('./protocol/rest'),\n      RestJson: require('./protocol/rest_json'),\n      RestXml: require('./protocol/rest_xml')\n    },\n  \n    /**\n     * @api private\n     */\n    XML: {\n      Builder: require('./xml/builder'),\n      Parser: null // conditionally set based on environment\n    },\n  \n    /**\n     * @api private\n     */\n    JSON: {\n      Builder: require('./json/builder'),\n      Parser: require('./json/parser')\n    },\n  \n    /**\n     * @api private\n     */\n    Model: {\n      Api: require('./model/api'),\n      Operation: require('./model/operation'),\n      Shape: require('./model/shape'),\n      Paginator: require('./model/paginator'),\n      ResourceWaiter: require('./model/resource_waiter')\n    },\n  \n    /**\n     * @api private\n     */\n    apiLoader: require('./api_loader'),\n  \n    /**\n     * @api private\n     */\n    EndpointCache: require('../vendor/endpoint-cache').EndpointCache\n  });\n  require('./sequential_executor');\n  require('./service');\n  require('./config');\n  require('./http');\n  require('./event_listeners');\n  require('./request');\n  require('./response');\n  require('./resource_waiter');\n  require('./signers/request_signer');\n  require('./param_validator');\n  \n  /**\n   * @readonly\n   * @return [AWS.SequentialExecutor] a collection of global event listeners that\n   *   are attached to every sent request.\n   * @see AWS.Request AWS.Request for a list of events to listen for\n   * @example Logging the time taken to send a request\n   *   AWS.events.on('send', function startSend(resp) {\n   *     resp.startTime = new Date().getTime();\n   *   }).on('complete', function calculateTime(resp) {\n   *     var time = (new Date().getTime() - resp.startTime) / 1000;\n   *     console.log('Request took ' + time + ' seconds');\n   *   });\n   *\n   *   new AWS.S3().listBuckets(); // prints 'Request took 0.285 seconds'\n   */\n  AWS.events = new AWS.SequentialExecutor();\n  \n  //create endpoint cache lazily\n  AWS.util.memoizedProperty(AWS, 'endpointCache', function() {\n    return new AWS.EndpointCache(AWS.config.endpointCacheSize);\n  }, true);\n  \n  },{\"../vendor/endpoint-cache\":103,\"./api_loader\":9,\"./config\":17,\"./event_listeners\":33,\"./http\":34,\"./json/builder\":36,\"./json/parser\":37,\"./model/api\":38,\"./model/operation\":40,\"./model/paginator\":41,\"./model/resource_waiter\":42,\"./model/shape\":43,\"./param_validator\":44,\"./protocol/json\":46,\"./protocol/query\":47,\"./protocol/rest\":48,\"./protocol/rest_json\":49,\"./protocol/rest_xml\":50,\"./request\":55,\"./resource_waiter\":56,\"./response\":57,\"./sequential_executor\":58,\"./service\":59,\"./signers/request_signer\":63,\"./util\":71,\"./xml/builder\":73}],19:[function(require,module,exports){\n  var AWS = require('./core');\n  \n  /**\n   * Represents your AWS security credentials, specifically the\n   * {accessKeyId}, {secretAccessKey}, and optional {sessionToken}.\n   * Creating a `Credentials` object allows you to pass around your\n   * security information to configuration and service objects.\n   *\n   * Note that this class typically does not need to be constructed manually,\n   * as the {AWS.Config} and {AWS.Service} classes both accept simple\n   * options hashes with the three keys. These structures will be converted\n   * into Credentials objects automatically.\n   *\n   * ## Expiring and Refreshing Credentials\n   *\n   * Occasionally credentials can expire in the middle of a long-running\n   * application. In this case, the SDK will automatically attempt to\n   * refresh the credentials from the storage location if the Credentials\n   * class implements the {refresh} method.\n   *\n   * If you are implementing a credential storage location, you\n   * will want to create a subclass of the `Credentials` class and\n   * override the {refresh} method. This method allows credentials to be\n   * retrieved from the backing store, be it a file system, database, or\n   * some network storage. The method should reset the credential attributes\n   * on the object.\n   *\n   * @!attribute expired\n   *   @return [Boolean] whether the credentials have been expired and\n   *     require a refresh. Used in conjunction with {expireTime}.\n   * @!attribute expireTime\n   *   @return [Date] a time when credentials should be considered expired. Used\n   *     in conjunction with {expired}.\n   * @!attribute accessKeyId\n   *   @return [String] the AWS access key ID\n   * @!attribute secretAccessKey\n   *   @return [String] the AWS secret access key\n   * @!attribute sessionToken\n   *   @return [String] an optional AWS session token\n   */\n  AWS.Credentials = AWS.util.inherit({\n    /**\n     * A credentials object can be created using positional arguments or an options\n     * hash.\n     *\n     * @overload AWS.Credentials(accessKeyId, secretAccessKey, sessionToken=null)\n     *   Creates a Credentials object with a given set of credential information\n     *   as positional arguments.\n     *   @param accessKeyId [String] the AWS access key ID\n     *   @param secretAccessKey [String] the AWS secret access key\n     *   @param sessionToken [String] the optional AWS session token\n     *   @example Create a credentials object with AWS credentials\n     *     var creds = new AWS.Credentials('akid', 'secret', 'session');\n     * @overload AWS.Credentials(options)\n     *   Creates a Credentials object with a given set of credential information\n     *   as an options hash.\n     *   @option options accessKeyId [String] the AWS access key ID\n     *   @option options secretAccessKey [String] the AWS secret access key\n     *   @option options sessionToken [String] the optional AWS session token\n     *   @example Create a credentials object with AWS credentials\n     *     var creds = new AWS.Credentials({\n     *       accessKeyId: 'akid', secretAccessKey: 'secret', sessionToken: 'session'\n     *     });\n     */\n    constructor: function Credentials() {\n      // hide secretAccessKey from being displayed with util.inspect\n      AWS.util.hideProperties(this, ['secretAccessKey']);\n  \n      this.expired = false;\n      this.expireTime = null;\n      this.refreshCallbacks = [];\n      if (arguments.length === 1 && typeof arguments[0] === 'object') {\n        var creds = arguments[0].credentials || arguments[0];\n        this.accessKeyId = creds.accessKeyId;\n        this.secretAccessKey = creds.secretAccessKey;\n        this.sessionToken = creds.sessionToken;\n      } else {\n        this.accessKeyId = arguments[0];\n        this.secretAccessKey = arguments[1];\n        this.sessionToken = arguments[2];\n      }\n    },\n  \n    /**\n     * @return [Integer] the number of seconds before {expireTime} during which\n     *   the credentials will be considered expired.\n     */\n    expiryWindow: 15,\n  \n    /**\n     * @return [Boolean] whether the credentials object should call {refresh}\n     * @note Subclasses should override this method to provide custom refresh\n     *   logic.\n     */\n    needsRefresh: function needsRefresh() {\n      var currentTime = AWS.util.date.getDate().getTime();\n      var adjustedTime = new Date(currentTime + this.expiryWindow * 1000);\n  \n      if (this.expireTime && adjustedTime > this.expireTime) {\n        return true;\n      } else {\n        return this.expired || !this.accessKeyId || !this.secretAccessKey;\n      }\n    },\n  \n    /**\n     * Gets the existing credentials, refreshing them if they are not yet loaded\n     * or have expired. Users should call this method before using {refresh},\n     * as this will not attempt to reload credentials when they are already\n     * loaded into the object.\n     *\n     * @callback callback function(err)\n     *   When this callback is called with no error, it means either credentials\n     *   do not need to be refreshed or refreshed credentials information has\n     *   been loaded into the object (as the `accessKeyId`, `secretAccessKey`,\n     *   and `sessionToken` properties).\n     *   @param err [Error] if an error occurred, this value will be filled\n     */\n    get: function get(callback) {\n      var self = this;\n      if (this.needsRefresh()) {\n        this.refresh(function(err) {\n          if (!err) self.expired = false; // reset expired flag\n          if (callback) callback(err);\n        });\n      } else if (callback) {\n        callback();\n      }\n    },\n  \n    /**\n     * @!method  getPromise()\n     *   Returns a 'thenable' promise.\n     *   Gets the existing credentials, refreshing them if they are not yet loaded\n     *   or have expired. Users should call this method before using {refresh},\n     *   as this will not attempt to reload credentials when they are already\n     *   loaded into the object.\n     *\n     *   Two callbacks can be provided to the `then` method on the returned promise.\n     *   The first callback will be called if the promise is fulfilled, and the second\n     *   callback will be called if the promise is rejected.\n     *   @callback fulfilledCallback function()\n     *     Called if the promise is fulfilled. When this callback is called, it\n     *     means either credentials do not need to be refreshed or refreshed\n     *     credentials information has been loaded into the object (as the\n     *     `accessKeyId`, `secretAccessKey`, and `sessionToken` properties).\n     *   @callback rejectedCallback function(err)\n     *     Called if the promise is rejected.\n     *     @param err [Error] if an error occurred, this value will be filled\n     *   @return [Promise] A promise that represents the state of the `get` call.\n     *   @example Calling the `getPromise` method.\n     *     var promise = credProvider.getPromise();\n     *     promise.then(function() { ... }, function(err) { ... });\n     */\n  \n    /**\n     * @!method  refreshPromise()\n     *   Returns a 'thenable' promise.\n     *   Refreshes the credentials. Users should call {get} before attempting\n     *   to forcibly refresh credentials.\n     *\n     *   Two callbacks can be provided to the `then` method on the returned promise.\n     *   The first callback will be called if the promise is fulfilled, and the second\n     *   callback will be called if the promise is rejected.\n     *   @callback fulfilledCallback function()\n     *     Called if the promise is fulfilled. When this callback is called, it\n     *     means refreshed credentials information has been loaded into the object\n     *     (as the `accessKeyId`, `secretAccessKey`, and `sessionToken` properties).\n     *   @callback rejectedCallback function(err)\n     *     Called if the promise is rejected.\n     *     @param err [Error] if an error occurred, this value will be filled\n     *   @return [Promise] A promise that represents the state of the `refresh` call.\n     *   @example Calling the `refreshPromise` method.\n     *     var promise = credProvider.refreshPromise();\n     *     promise.then(function() { ... }, function(err) { ... });\n     */\n  \n    /**\n     * Refreshes the credentials. Users should call {get} before attempting\n     * to forcibly refresh credentials.\n     *\n     * @callback callback function(err)\n     *   When this callback is called with no error, it means refreshed\n     *   credentials information has been loaded into the object (as the\n     *   `accessKeyId`, `secretAccessKey`, and `sessionToken` properties).\n     *   @param err [Error] if an error occurred, this value will be filled\n     * @note Subclasses should override this class to reset the\n     *   {accessKeyId}, {secretAccessKey} and optional {sessionToken}\n     *   on the credentials object and then call the callback with\n     *   any error information.\n     * @see get\n     */\n    refresh: function refresh(callback) {\n      this.expired = false;\n      callback();\n    },\n  \n    /**\n     * @api private\n     * @param callback\n     */\n    coalesceRefresh: function coalesceRefresh(callback, sync) {\n      var self = this;\n      if (self.refreshCallbacks.push(callback) === 1) {\n        self.load(function onLoad(err) {\n          AWS.util.arrayEach(self.refreshCallbacks, function(callback) {\n            if (sync) {\n              callback(err);\n            } else {\n              // callback could throw, so defer to ensure all callbacks are notified\n              AWS.util.defer(function () {\n                callback(err);\n              });\n            }\n          });\n          self.refreshCallbacks.length = 0;\n        });\n      }\n    },\n  \n    /**\n     * @api private\n     * @param callback\n     */\n    load: function load(callback) {\n      callback();\n    }\n  });\n  \n  /**\n   * @api private\n   */\n  AWS.Credentials.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n    this.prototype.getPromise = AWS.util.promisifyMethod('get', PromiseDependency);\n    this.prototype.refreshPromise = AWS.util.promisifyMethod('refresh', PromiseDependency);\n  };\n  \n  /**\n   * @api private\n   */\n  AWS.Credentials.deletePromisesFromClass = function deletePromisesFromClass() {\n    delete this.prototype.getPromise;\n    delete this.prototype.refreshPromise;\n  };\n  \n  AWS.util.addPromises(AWS.Credentials);\n  \n  },{\"./core\":18}],20:[function(require,module,exports){\n  var AWS = require('../core');\n  var STS = require('../../clients/sts');\n  \n  /**\n   * Represents temporary credentials retrieved from {AWS.STS}. Without any\n   * extra parameters, credentials will be fetched from the\n   * {AWS.STS.getSessionToken} operation. If an IAM role is provided, the\n   * {AWS.STS.assumeRole} operation will be used to fetch credentials for the\n   * role instead.\n   *\n   * AWS.ChainableTemporaryCredentials differs from AWS.TemporaryCredentials in\n   * the way masterCredentials and refreshes are handled.\n   * AWS.ChainableTemporaryCredentials refreshes expired credentials using the\n   * masterCredentials passed by the user to support chaining of STS credentials.\n   * However, AWS.TemporaryCredentials recursively collapses the masterCredentials\n   * during instantiation, precluding the ability to refresh credentials which\n   * require intermediate, temporary credentials.\n   *\n   * For example, if the application should use RoleA, which must be assumed from\n   * RoleB, and the environment provides credentials which can assume RoleB, then\n   * AWS.ChainableTemporaryCredentials must be used to support refreshing the\n   * temporary credentials for RoleA:\n   *\n   * ```javascript\n   * var roleACreds = new AWS.ChainableTemporaryCredentials({\n   *   params: {RoleArn: 'RoleA'},\n   *   masterCredentials: new AWS.ChainableTemporaryCredentials({\n   *     params: {RoleArn: 'RoleB'},\n   *     masterCredentials: new AWS.EnvironmentCredentials('AWS')\n   *   })\n   * });\n   * ```\n   *\n   * If AWS.TemporaryCredentials had been used in the previous example,\n   * `roleACreds` would fail to refresh because `roleACreds` would\n   * use the environment credentials for the AssumeRole request.\n   *\n   * Another difference is that AWS.ChainableTemporaryCredentials creates the STS\n   * service instance during instantiation while AWS.TemporaryCredentials creates\n   * the STS service instance during the first refresh. Creating the service\n   * instance during instantiation effectively captures the master credentials\n   * from the global config, so that subsequent changes to the global config do\n   * not affect the master credentials used to refresh the temporary credentials.\n   *\n   * This allows an instance of AWS.ChainableTemporaryCredentials to be assigned\n   * to AWS.config.credentials:\n   *\n   * ```javascript\n   * var envCreds = new AWS.EnvironmentCredentials('AWS');\n   * AWS.config.credentials = envCreds;\n   * // masterCredentials will be envCreds\n   * AWS.config.credentials = new AWS.ChainableTemporaryCredentials({\n   *   params: {RoleArn: '...'}\n   * });\n   * ```\n   *\n   * Similarly, to use the CredentialProviderChain's default providers as the\n   * master credentials, simply create a new instance of\n   * AWS.ChainableTemporaryCredentials:\n   *\n   * ```javascript\n   * AWS.config.credentials = new ChainableTemporaryCredentials({\n   *   params: {RoleArn: '...'}\n   * });\n   * ```\n   *\n   * @!attribute service\n   *   @return [AWS.STS] the STS service instance used to\n   *     get and refresh temporary credentials from AWS STS.\n   * @note (see constructor)\n   */\n  AWS.ChainableTemporaryCredentials = AWS.util.inherit(AWS.Credentials, {\n    /**\n     * Creates a new temporary credentials object.\n     *\n     * @param options [map] a set of options\n     * @option options params [map] ({}) a map of options that are passed to the\n     *   {AWS.STS.assumeRole} or {AWS.STS.getSessionToken} operations.\n     *   If a `RoleArn` parameter is passed in, credentials will be based on the\n     *   IAM role. If a `SerialNumber` parameter is passed in, {tokenCodeFn} must\n     *   also be passed in or an error will be thrown.\n     * @option options masterCredentials [AWS.Credentials] the master credentials\n     *   used to get and refresh temporary credentials from AWS STS. By default,\n     *   AWS.config.credentials or AWS.config.credentialProvider will be used.\n     * @option options tokenCodeFn [Function] (null) Function to provide\n     *   `TokenCode`, if `SerialNumber` is provided for profile in {params}. Function\n     *   is called with value of `SerialNumber` and `callback`, and should provide\n     *   the `TokenCode` or an error to the callback in the format\n     *   `callback(err, token)`.\n     * @example Creating a new credentials object for generic temporary credentials\n     *   AWS.config.credentials = new AWS.ChainableTemporaryCredentials();\n     * @example Creating a new credentials object for an IAM role\n     *   AWS.config.credentials = new AWS.ChainableTemporaryCredentials({\n     *     params: {\n     *       RoleArn: 'arn:aws:iam::1234567890:role/TemporaryCredentials'\n     *     }\n     *   });\n     * @see AWS.STS.assumeRole\n     * @see AWS.STS.getSessionToken\n     */\n    constructor: function ChainableTemporaryCredentials(options) {\n      AWS.Credentials.call(this);\n      options = options || {};\n      this.errorCode = 'ChainableTemporaryCredentialsProviderFailure';\n      this.expired = true;\n      this.tokenCodeFn = null;\n  \n      var params = AWS.util.copy(options.params) || {};\n      if (params.RoleArn) {\n        params.RoleSessionName = params.RoleSessionName || 'temporary-credentials';\n      }\n      if (params.SerialNumber) {\n        if (!options.tokenCodeFn || (typeof options.tokenCodeFn !== 'function')) {\n          throw new AWS.util.error(\n            new Error('tokenCodeFn must be a function when params.SerialNumber is given'),\n            {code: this.errorCode}\n          );\n        } else {\n          this.tokenCodeFn = options.tokenCodeFn;\n        }\n      }\n      var config = AWS.util.merge(\n        {\n          params: params,\n          credentials: options.masterCredentials || AWS.config.credentials\n        },\n        options.stsConfig || {}\n      );\n      this.service = new STS(config);\n    },\n  \n    /**\n     * Refreshes credentials using {AWS.STS.assumeRole} or\n     * {AWS.STS.getSessionToken}, depending on whether an IAM role ARN was passed\n     * to the credentials {constructor}.\n     *\n     * @callback callback function(err)\n     *   Called when the STS service responds (or fails). When\n     *   this callback is called with no error, it means that the credentials\n     *   information has been loaded into the object (as the `accessKeyId`,\n     *   `secretAccessKey`, and `sessionToken` properties).\n     *   @param err [Error] if an error occurred, this value will be filled\n     * @see AWS.Credentials.get\n     */\n    refresh: function refresh(callback) {\n      this.coalesceRefresh(callback || AWS.util.fn.callback);\n    },\n  \n    /**\n     * @api private\n     * @param callback\n     */\n    load: function load(callback) {\n      var self = this;\n      var operation = self.service.config.params.RoleArn ? 'assumeRole' : 'getSessionToken';\n      this.getTokenCode(function (err, tokenCode) {\n        var params = {};\n        if (err) {\n          callback(err);\n          return;\n        }\n        if (tokenCode) {\n          params.TokenCode = tokenCode;\n        }\n        self.service[operation](params, function (err, data) {\n          if (!err) {\n            self.service.credentialsFrom(data, self);\n          }\n          callback(err);\n        });\n      });\n    },\n  \n    /**\n     * @api private\n     */\n    getTokenCode: function getTokenCode(callback) {\n      var self = this;\n      if (this.tokenCodeFn) {\n        this.tokenCodeFn(this.service.config.params.SerialNumber, function (err, token) {\n          if (err) {\n            var message = err;\n            if (err instanceof Error) {\n              message = err.message;\n            }\n            callback(\n              AWS.util.error(\n                new Error('Error fetching MFA token: ' + message),\n                { code: self.errorCode}\n              )\n            );\n            return;\n          }\n          callback(null, token);\n        });\n      } else {\n        callback(null);\n      }\n    }\n  });\n  \n  },{\"../../clients/sts\":8,\"../core\":18}],21:[function(require,module,exports){\n  var AWS = require('../core');\n  var CognitoIdentity = require('../../clients/cognitoidentity');\n  var STS = require('../../clients/sts');\n  \n  /**\n   * Represents credentials retrieved from STS Web Identity Federation using\n   * the Amazon Cognito Identity service.\n   *\n   * By default this provider gets credentials using the\n   * {AWS.CognitoIdentity.getCredentialsForIdentity} service operation, which\n   * requires either an `IdentityId` or an `IdentityPoolId` (Amazon Cognito\n   * Identity Pool ID), which is used to call {AWS.CognitoIdentity.getId} to\n   * obtain an `IdentityId`. If the identity or identity pool is not configured in\n   * the Amazon Cognito Console to use IAM roles with the appropriate permissions,\n   * then additionally a `RoleArn` is required containing the ARN of the IAM trust\n   * policy for the Amazon Cognito role that the user will log into. If a `RoleArn`\n   * is provided, then this provider gets credentials using the\n   * {AWS.STS.assumeRoleWithWebIdentity} service operation, after first getting an\n   * Open ID token from {AWS.CognitoIdentity.getOpenIdToken}.\n   *\n   * In addition, if this credential provider is used to provide authenticated\n   * login, the `Logins` map may be set to the tokens provided by the respective\n   * identity providers. See {constructor} for an example on creating a credentials\n   * object with proper property values.\n   *\n   * ## Refreshing Credentials from Identity Service\n   *\n   * In addition to AWS credentials expiring after a given amount of time, the\n   * login token from the identity provider will also expire. Once this token\n   * expires, it will not be usable to refresh AWS credentials, and another\n   * token will be needed. The SDK does not manage refreshing of the token value,\n   * but this can be done through a \"refresh token\" supported by most identity\n   * providers. Consult the documentation for the identity provider for refreshing\n   * tokens. Once the refreshed token is acquired, you should make sure to update\n   * this new token in the credentials object's {params} property. The following\n   * code will update the WebIdentityToken, assuming you have retrieved an updated\n   * token from the identity provider:\n   *\n   * ```javascript\n   * AWS.config.credentials.params.Logins['graph.facebook.com'] = updatedToken;\n   * ```\n   *\n   * Future calls to `credentials.refresh()` will now use the new token.\n   *\n   * @!attribute params\n   *   @return [map] the map of params passed to\n   *     {AWS.CognitoIdentity.getId},\n   *     {AWS.CognitoIdentity.getOpenIdToken}, and\n   *     {AWS.STS.assumeRoleWithWebIdentity}. To update the token, set the\n   *     `params.WebIdentityToken` property.\n   * @!attribute data\n   *   @return [map] the raw data response from the call to\n   *     {AWS.CognitoIdentity.getCredentialsForIdentity}, or\n   *     {AWS.STS.assumeRoleWithWebIdentity}. Use this if you want to get\n   *     access to other properties from the response.\n   * @!attribute identityId\n   *   @return [String] the Cognito ID returned by the last call to\n   *     {AWS.CognitoIdentity.getOpenIdToken}. This ID represents the actual\n   *     final resolved identity ID from Amazon Cognito.\n   */\n  AWS.CognitoIdentityCredentials = AWS.util.inherit(AWS.Credentials, {\n    /**\n     * @api private\n     */\n    localStorageKey: {\n      id: 'aws.cognito.identity-id.',\n      providers: 'aws.cognito.identity-providers.'\n    },\n  \n    /**\n     * Creates a new credentials object.\n     * @example Creating a new credentials object\n     *   AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n     *\n     *     // either IdentityPoolId or IdentityId is required\n     *     // See the IdentityPoolId param for AWS.CognitoIdentity.getID (linked below)\n     *     // See the IdentityId param for AWS.CognitoIdentity.getCredentialsForIdentity\n     *     // or AWS.CognitoIdentity.getOpenIdToken (linked below)\n     *     IdentityPoolId: 'us-east-1:1699ebc0-7900-4099-b910-2df94f52a030',\n     *     IdentityId: 'us-east-1:128d0a74-c82f-4553-916d-90053e4a8b0f'\n     *\n     *     // optional, only necessary when the identity pool is not configured\n     *     // to use IAM roles in the Amazon Cognito Console\n     *     // See the RoleArn param for AWS.STS.assumeRoleWithWebIdentity (linked below)\n     *     RoleArn: 'arn:aws:iam::1234567890:role/MYAPP-CognitoIdentity',\n     *\n     *     // optional tokens, used for authenticated login\n     *     // See the Logins param for AWS.CognitoIdentity.getID (linked below)\n     *     Logins: {\n     *       'graph.facebook.com': 'FBTOKEN',\n     *       'www.amazon.com': 'AMAZONTOKEN',\n     *       'accounts.google.com': 'GOOGLETOKEN',\n     *       'api.twitter.com': 'TWITTERTOKEN',\n     *       'www.digits.com': 'DIGITSTOKEN'\n     *     },\n     *\n     *     // optional name, defaults to web-identity\n     *     // See the RoleSessionName param for AWS.STS.assumeRoleWithWebIdentity (linked below)\n     *     RoleSessionName: 'web',\n     *\n     *     // optional, only necessary when application runs in a browser\n     *     // and multiple users are signed in at once, used for caching\n     *     LoginId: 'example@gmail.com'\n     *\n     *   }, {\n     *      // optionally provide configuration to apply to the underlying service clients\n     *      // if configuration is not provided, then configuration will be pulled from AWS.config\n     *\n     *      // region should match the region your identity pool is located in\n     *      region: 'us-east-1',\n     *\n     *      // specify timeout options\n     *      httpOptions: {\n     *        timeout: 100\n     *      }\n     *   });\n     * @see AWS.CognitoIdentity.getId\n     * @see AWS.CognitoIdentity.getCredentialsForIdentity\n     * @see AWS.STS.assumeRoleWithWebIdentity\n     * @see AWS.CognitoIdentity.getOpenIdToken\n     * @see AWS.Config\n     * @note If a region is not provided in the global AWS.config, or\n     *   specified in the `clientConfig` to the CognitoIdentityCredentials\n     *   constructor, you may encounter a 'Missing credentials in config' error\n     *   when calling making a service call.\n     */\n    constructor: function CognitoIdentityCredentials(params, clientConfig) {\n      AWS.Credentials.call(this);\n      this.expired = true;\n      this.params = params;\n      this.data = null;\n      this._identityId = null;\n      this._clientConfig = AWS.util.copy(clientConfig || {});\n      this.loadCachedId();\n      var self = this;\n      Object.defineProperty(this, 'identityId', {\n        get: function() {\n          self.loadCachedId();\n          return self._identityId || self.params.IdentityId;\n        },\n        set: function(identityId) {\n          self._identityId = identityId;\n        }\n      });\n    },\n  \n    /**\n     * Refreshes credentials using {AWS.CognitoIdentity.getCredentialsForIdentity},\n     * or {AWS.STS.assumeRoleWithWebIdentity}.\n     *\n     * @callback callback function(err)\n     *   Called when the STS service responds (or fails). When\n     *   this callback is called with no error, it means that the credentials\n     *   information has been loaded into the object (as the `accessKeyId`,\n     *   `secretAccessKey`, and `sessionToken` properties).\n     *   @param err [Error] if an error occurred, this value will be filled\n     * @see AWS.Credentials.get\n     */\n    refresh: function refresh(callback) {\n      this.coalesceRefresh(callback || AWS.util.fn.callback);\n    },\n  \n    /**\n     * @api private\n     * @param callback\n     */\n    load: function load(callback) {\n      var self = this;\n      self.createClients();\n      self.data = null;\n      self._identityId = null;\n      self.getId(function(err) {\n        if (!err) {\n          if (!self.params.RoleArn) {\n            self.getCredentialsForIdentity(callback);\n          } else {\n            self.getCredentialsFromSTS(callback);\n          }\n        } else {\n          self.clearIdOnNotAuthorized(err);\n          callback(err);\n        }\n      });\n    },\n  \n    /**\n     * Clears the cached Cognito ID associated with the currently configured\n     * identity pool ID. Use this to manually invalidate your cache if\n     * the identity pool ID was deleted.\n     */\n    clearCachedId: function clearCache() {\n      this._identityId = null;\n      delete this.params.IdentityId;\n  \n      var poolId = this.params.IdentityPoolId;\n      var loginId = this.params.LoginId || '';\n      delete this.storage[this.localStorageKey.id + poolId + loginId];\n      delete this.storage[this.localStorageKey.providers + poolId + loginId];\n    },\n  \n    /**\n     * @api private\n     */\n    clearIdOnNotAuthorized: function clearIdOnNotAuthorized(err) {\n      var self = this;\n      if (err.code == 'NotAuthorizedException') {\n        self.clearCachedId();\n      }\n    },\n  \n    /**\n     * Retrieves a Cognito ID, loading from cache if it was already retrieved\n     * on this device.\n     *\n     * @callback callback function(err, identityId)\n     *   @param err [Error, null] an error object if the call failed or null if\n     *     it succeeded.\n     *   @param identityId [String, null] if successful, the callback will return\n     *     the Cognito ID.\n     * @note If not loaded explicitly, the Cognito ID is loaded and stored in\n     *   localStorage in the browser environment of a device.\n     * @api private\n     */\n    getId: function getId(callback) {\n      var self = this;\n      if (typeof self.params.IdentityId === 'string') {\n        return callback(null, self.params.IdentityId);\n      }\n  \n      self.cognito.getId(function(err, data) {\n        if (!err && data.IdentityId) {\n          self.params.IdentityId = data.IdentityId;\n          callback(null, data.IdentityId);\n        } else {\n          callback(err);\n        }\n      });\n    },\n  \n  \n    /**\n     * @api private\n     */\n    loadCredentials: function loadCredentials(data, credentials) {\n      if (!data || !credentials) return;\n      credentials.expired = false;\n      credentials.accessKeyId = data.Credentials.AccessKeyId;\n      credentials.secretAccessKey = data.Credentials.SecretKey;\n      credentials.sessionToken = data.Credentials.SessionToken;\n      credentials.expireTime = data.Credentials.Expiration;\n    },\n  \n    /**\n     * @api private\n     */\n    getCredentialsForIdentity: function getCredentialsForIdentity(callback) {\n      var self = this;\n      self.cognito.getCredentialsForIdentity(function(err, data) {\n        if (!err) {\n          self.cacheId(data);\n          self.data = data;\n          self.loadCredentials(self.data, self);\n        } else {\n          self.clearIdOnNotAuthorized(err);\n        }\n        callback(err);\n      });\n    },\n  \n    /**\n     * @api private\n     */\n    getCredentialsFromSTS: function getCredentialsFromSTS(callback) {\n      var self = this;\n      self.cognito.getOpenIdToken(function(err, data) {\n        if (!err) {\n          self.cacheId(data);\n          self.params.WebIdentityToken = data.Token;\n          self.webIdentityCredentials.refresh(function(webErr) {\n            if (!webErr) {\n              self.data = self.webIdentityCredentials.data;\n              self.sts.credentialsFrom(self.data, self);\n            }\n            callback(webErr);\n          });\n        } else {\n          self.clearIdOnNotAuthorized(err);\n          callback(err);\n        }\n      });\n    },\n  \n    /**\n     * @api private\n     */\n    loadCachedId: function loadCachedId() {\n      var self = this;\n  \n      // in the browser we source default IdentityId from localStorage\n      if (AWS.util.isBrowser() && !self.params.IdentityId) {\n        var id = self.getStorage('id');\n        if (id && self.params.Logins) {\n          var actualProviders = Object.keys(self.params.Logins);\n          var cachedProviders =\n            (self.getStorage('providers') || '').split(',');\n  \n          // only load ID if at least one provider used this ID before\n          var intersect = cachedProviders.filter(function(n) {\n            return actualProviders.indexOf(n) !== -1;\n          });\n          if (intersect.length !== 0) {\n            self.params.IdentityId = id;\n          }\n        } else if (id) {\n          self.params.IdentityId = id;\n        }\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    createClients: function() {\n      var clientConfig = this._clientConfig;\n      this.webIdentityCredentials = this.webIdentityCredentials ||\n        new AWS.WebIdentityCredentials(this.params, clientConfig);\n      if (!this.cognito) {\n        var cognitoConfig = AWS.util.merge({}, clientConfig);\n        cognitoConfig.params = this.params;\n        this.cognito = new CognitoIdentity(cognitoConfig);\n      }\n      this.sts = this.sts || new STS(clientConfig);\n    },\n  \n    /**\n     * @api private\n     */\n    cacheId: function cacheId(data) {\n      this._identityId = data.IdentityId;\n      this.params.IdentityId = this._identityId;\n  \n      // cache this IdentityId in browser localStorage if possible\n      if (AWS.util.isBrowser()) {\n        this.setStorage('id', data.IdentityId);\n  \n        if (this.params.Logins) {\n          this.setStorage('providers', Object.keys(this.params.Logins).join(','));\n        }\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    getStorage: function getStorage(key) {\n      return this.storage[this.localStorageKey[key] + this.params.IdentityPoolId + (this.params.LoginId || '')];\n    },\n  \n    /**\n     * @api private\n     */\n    setStorage: function setStorage(key, val) {\n      try {\n        this.storage[this.localStorageKey[key] + this.params.IdentityPoolId + (this.params.LoginId || '')] = val;\n      } catch (_) {}\n    },\n  \n    /**\n     * @api private\n     */\n    storage: (function() {\n      try {\n        var storage = AWS.util.isBrowser() && window.localStorage !== null && typeof window.localStorage === 'object' ?\n            window.localStorage : {};\n  \n        // Test set/remove which would throw an error in Safari's private browsing\n        storage['aws.test-storage'] = 'foobar';\n        delete storage['aws.test-storage'];\n  \n        return storage;\n      } catch (_) {\n        return {};\n      }\n    })()\n  });\n  \n  },{\"../../clients/cognitoidentity\":7,\"../../clients/sts\":8,\"../core\":18}],22:[function(require,module,exports){\n  var AWS = require('../core');\n  \n  /**\n   * Creates a credential provider chain that searches for AWS credentials\n   * in a list of credential providers specified by the {providers} property.\n   *\n   * By default, the chain will use the {defaultProviders} to resolve credentials.\n   * These providers will look in the environment using the\n   * {AWS.EnvironmentCredentials} class with the 'AWS' and 'AMAZON' prefixes.\n   *\n   * ## Setting Providers\n   *\n   * Each provider in the {providers} list should be a function that returns\n   * a {AWS.Credentials} object, or a hardcoded credentials object. The function\n   * form allows for delayed execution of the credential construction.\n   *\n   * ## Resolving Credentials from a Chain\n   *\n   * Call {resolve} to return the first valid credential object that can be\n   * loaded by the provider chain.\n   *\n   * For example, to resolve a chain with a custom provider that checks a file\n   * on disk after the set of {defaultProviders}:\n   *\n   * ```javascript\n   * var diskProvider = new AWS.FileSystemCredentials('./creds.json');\n   * var chain = new AWS.CredentialProviderChain();\n   * chain.providers.push(diskProvider);\n   * chain.resolve();\n   * ```\n   *\n   * The above code will return the `diskProvider` object if the\n   * file contains credentials and the `defaultProviders` do not contain\n   * any credential settings.\n   *\n   * @!attribute providers\n   *   @return [Array<AWS.Credentials, Function>]\n   *     a list of credentials objects or functions that return credentials\n   *     objects. If the provider is a function, the function will be\n   *     started lazily when the provider needs to be checked for valid\n   *     credentials. By default, this object will be set to the\n   *     {defaultProviders}.\n   *   @see defaultProviders\n   */\n  AWS.CredentialProviderChain = AWS.util.inherit(AWS.Credentials, {\n  \n    /**\n     * Creates a new CredentialProviderChain with a default set of providers\n     * specified by {defaultProviders}.\n     */\n    constructor: function CredentialProviderChain(providers) {\n      if (providers) {\n        this.providers = providers;\n      } else {\n        this.providers = AWS.CredentialProviderChain.defaultProviders.slice(0);\n      }\n      this.resolveCallbacks = [];\n    },\n  \n    /**\n     * @!method  resolvePromise()\n     *   Returns a 'thenable' promise.\n     *   Resolves the provider chain by searching for the first set of\n     *   credentials in {providers}.\n     *\n     *   Two callbacks can be provided to the `then` method on the returned promise.\n     *   The first callback will be called if the promise is fulfilled, and the second\n     *   callback will be called if the promise is rejected.\n     *   @callback fulfilledCallback function(credentials)\n     *     Called if the promise is fulfilled and the provider resolves the chain\n     *     to a credentials object\n     *     @param credentials [AWS.Credentials] the credentials object resolved\n     *       by the provider chain.\n     *   @callback rejectedCallback function(error)\n     *     Called if the promise is rejected.\n     *     @param err [Error] the error object returned if no credentials are found.\n     *   @return [Promise] A promise that represents the state of the `resolve` method call.\n     *   @example Calling the `resolvePromise` method.\n     *     var promise = chain.resolvePromise();\n     *     promise.then(function(credentials) { ... }, function(err) { ... });\n     */\n  \n    /**\n     * Resolves the provider chain by searching for the first set of\n     * credentials in {providers}.\n     *\n     * @callback callback function(err, credentials)\n     *   Called when the provider resolves the chain to a credentials object\n     *   or null if no credentials can be found.\n     *\n     *   @param err [Error] the error object returned if no credentials are\n     *     found.\n     *   @param credentials [AWS.Credentials] the credentials object resolved\n     *     by the provider chain.\n     * @return [AWS.CredentialProviderChain] the provider, for chaining.\n     */\n    resolve: function resolve(callback) {\n      var self = this;\n      if (self.providers.length === 0) {\n        callback(new Error('No providers'));\n        return self;\n      }\n  \n      if (self.resolveCallbacks.push(callback) === 1) {\n        var index = 0;\n        var providers = self.providers.slice(0);\n  \n        function resolveNext(err, creds) {\n          if ((!err && creds) || index === providers.length) {\n            AWS.util.arrayEach(self.resolveCallbacks, function (callback) {\n              callback(err, creds);\n            });\n            self.resolveCallbacks.length = 0;\n            return;\n          }\n  \n          var provider = providers[index++];\n          if (typeof provider === 'function') {\n            creds = provider.call();\n          } else {\n            creds = provider;\n          }\n  \n          if (creds.get) {\n            creds.get(function (getErr) {\n              resolveNext(getErr, getErr ? null : creds);\n            });\n          } else {\n            resolveNext(null, creds);\n          }\n        }\n  \n        resolveNext();\n      }\n  \n      return self;\n    }\n  });\n  \n  /**\n   * The default set of providers used by a vanilla CredentialProviderChain.\n   *\n   * In the browser:\n   *\n   * ```javascript\n   * AWS.CredentialProviderChain.defaultProviders = []\n   * ```\n   *\n   * In Node.js:\n   *\n   * ```javascript\n   * AWS.CredentialProviderChain.defaultProviders = [\n   *   function () { return new AWS.EnvironmentCredentials('AWS'); },\n   *   function () { return new AWS.EnvironmentCredentials('AMAZON'); },\n   *   function () { return new AWS.SharedIniFileCredentials(); },\n   *   function () { return new AWS.ECSCredentials(); },\n   *   function () { return new AWS.ProcessCredentials(); },\n   *   function () { return new AWS.TokenFileWebIdentityCredentials(); },\n   *   function () { return new AWS.EC2MetadataCredentials() }\n   * ]\n   * ```\n   */\n  AWS.CredentialProviderChain.defaultProviders = [];\n  \n  /**\n   * @api private\n   */\n  AWS.CredentialProviderChain.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n    this.prototype.resolvePromise = AWS.util.promisifyMethod('resolve', PromiseDependency);\n  };\n  \n  /**\n   * @api private\n   */\n  AWS.CredentialProviderChain.deletePromisesFromClass = function deletePromisesFromClass() {\n    delete this.prototype.resolvePromise;\n  };\n  \n  AWS.util.addPromises(AWS.CredentialProviderChain);\n  \n  },{\"../core\":18}],23:[function(require,module,exports){\n  var AWS = require('../core');\n  var STS = require('../../clients/sts');\n  \n  /**\n   * Represents credentials retrieved from STS SAML support.\n   *\n   * By default this provider gets credentials using the\n   * {AWS.STS.assumeRoleWithSAML} service operation. This operation\n   * requires a `RoleArn` containing the ARN of the IAM trust policy for the\n   * application for which credentials will be given, as well as a `PrincipalArn`\n   * representing the ARN for the SAML identity provider. In addition, the\n   * `SAMLAssertion` must be set to the token provided by the identity\n   * provider. See {constructor} for an example on creating a credentials\n   * object with proper `RoleArn`, `PrincipalArn`, and `SAMLAssertion` values.\n   *\n   * ## Refreshing Credentials from Identity Service\n   *\n   * In addition to AWS credentials expiring after a given amount of time, the\n   * login token from the identity provider will also expire. Once this token\n   * expires, it will not be usable to refresh AWS credentials, and another\n   * token will be needed. The SDK does not manage refreshing of the token value,\n   * but this can be done through a \"refresh token\" supported by most identity\n   * providers. Consult the documentation for the identity provider for refreshing\n   * tokens. Once the refreshed token is acquired, you should make sure to update\n   * this new token in the credentials object's {params} property. The following\n   * code will update the SAMLAssertion, assuming you have retrieved an updated\n   * token from the identity provider:\n   *\n   * ```javascript\n   * AWS.config.credentials.params.SAMLAssertion = updatedToken;\n   * ```\n   *\n   * Future calls to `credentials.refresh()` will now use the new token.\n   *\n   * @!attribute params\n   *   @return [map] the map of params passed to\n   *     {AWS.STS.assumeRoleWithSAML}. To update the token, set the\n   *     `params.SAMLAssertion` property.\n   */\n  AWS.SAMLCredentials = AWS.util.inherit(AWS.Credentials, {\n    /**\n     * Creates a new credentials object.\n     * @param (see AWS.STS.assumeRoleWithSAML)\n     * @example Creating a new credentials object\n     *   AWS.config.credentials = new AWS.SAMLCredentials({\n     *     RoleArn: 'arn:aws:iam::1234567890:role/SAMLRole',\n     *     PrincipalArn: 'arn:aws:iam::1234567890:role/SAMLPrincipal',\n     *     SAMLAssertion: 'base64-token', // base64-encoded token from IdP\n     *   });\n     * @see AWS.STS.assumeRoleWithSAML\n     */\n    constructor: function SAMLCredentials(params) {\n      AWS.Credentials.call(this);\n      this.expired = true;\n      this.params = params;\n    },\n  \n    /**\n     * Refreshes credentials using {AWS.STS.assumeRoleWithSAML}\n     *\n     * @callback callback function(err)\n     *   Called when the STS service responds (or fails). When\n     *   this callback is called with no error, it means that the credentials\n     *   information has been loaded into the object (as the `accessKeyId`,\n     *   `secretAccessKey`, and `sessionToken` properties).\n     *   @param err [Error] if an error occurred, this value will be filled\n     * @see get\n     */\n    refresh: function refresh(callback) {\n      this.coalesceRefresh(callback || AWS.util.fn.callback);\n    },\n  \n    /**\n     * @api private\n     */\n    load: function load(callback) {\n      var self = this;\n      self.createClients();\n      self.service.assumeRoleWithSAML(function (err, data) {\n        if (!err) {\n          self.service.credentialsFrom(data, self);\n        }\n        callback(err);\n      });\n    },\n  \n    /**\n     * @api private\n     */\n    createClients: function() {\n      this.service = this.service || new STS({params: this.params});\n    }\n  \n  });\n  \n  },{\"../../clients/sts\":8,\"../core\":18}],24:[function(require,module,exports){\n  var AWS = require('../core');\n  var STS = require('../../clients/sts');\n  \n  /**\n   * Represents temporary credentials retrieved from {AWS.STS}. Without any\n   * extra parameters, credentials will be fetched from the\n   * {AWS.STS.getSessionToken} operation. If an IAM role is provided, the\n   * {AWS.STS.assumeRole} operation will be used to fetch credentials for the\n   * role instead.\n   *\n   * @note AWS.TemporaryCredentials is deprecated, but remains available for\n   *   backwards compatibility. {AWS.ChainableTemporaryCredentials} is the\n   *   preferred class for temporary credentials.\n   *\n   * To setup temporary credentials, configure a set of master credentials\n   * using the standard credentials providers (environment, EC2 instance metadata,\n   * or from the filesystem), then set the global credentials to a new\n   * temporary credentials object:\n   *\n   * ```javascript\n   * // Note that environment credentials are loaded by default,\n   * // the following line is shown for clarity:\n   * AWS.config.credentials = new AWS.EnvironmentCredentials('AWS');\n   *\n   * // Now set temporary credentials seeded from the master credentials\n   * AWS.config.credentials = new AWS.TemporaryCredentials();\n   *\n   * // subsequent requests will now use temporary credentials from AWS STS.\n   * new AWS.S3().listBucket(function(err, data) { ... });\n   * ```\n   *\n   * @!attribute masterCredentials\n   *   @return [AWS.Credentials] the master (non-temporary) credentials used to\n   *     get and refresh temporary credentials from AWS STS.\n   * @note (see constructor)\n   */\n  AWS.TemporaryCredentials = AWS.util.inherit(AWS.Credentials, {\n    /**\n     * Creates a new temporary credentials object.\n     *\n     * @note In order to create temporary credentials, you first need to have\n     *   \"master\" credentials configured in {AWS.Config.credentials}. These\n     *   master credentials are necessary to retrieve the temporary credentials,\n     *   as well as refresh the credentials when they expire.\n     * @param params [map] a map of options that are passed to the\n     *   {AWS.STS.assumeRole} or {AWS.STS.getSessionToken} operations.\n     *   If a `RoleArn` parameter is passed in, credentials will be based on the\n     *   IAM role.\n     * @param masterCredentials [AWS.Credentials] the master (non-temporary) credentials\n     *  used to get and refresh temporary credentials from AWS STS.\n     * @example Creating a new credentials object for generic temporary credentials\n     *   AWS.config.credentials = new AWS.TemporaryCredentials();\n     * @example Creating a new credentials object for an IAM role\n     *   AWS.config.credentials = new AWS.TemporaryCredentials({\n     *     RoleArn: 'arn:aws:iam::1234567890:role/TemporaryCredentials',\n     *   });\n     * @see AWS.STS.assumeRole\n     * @see AWS.STS.getSessionToken\n     */\n    constructor: function TemporaryCredentials(params, masterCredentials) {\n      AWS.Credentials.call(this);\n      this.loadMasterCredentials(masterCredentials);\n      this.expired = true;\n  \n      this.params = params || {};\n      if (this.params.RoleArn) {\n        this.params.RoleSessionName =\n          this.params.RoleSessionName || 'temporary-credentials';\n      }\n    },\n  \n    /**\n     * Refreshes credentials using {AWS.STS.assumeRole} or\n     * {AWS.STS.getSessionToken}, depending on whether an IAM role ARN was passed\n     * to the credentials {constructor}.\n     *\n     * @callback callback function(err)\n     *   Called when the STS service responds (or fails). When\n     *   this callback is called with no error, it means that the credentials\n     *   information has been loaded into the object (as the `accessKeyId`,\n     *   `secretAccessKey`, and `sessionToken` properties).\n     *   @param err [Error] if an error occurred, this value will be filled\n     * @see get\n     */\n    refresh: function refresh (callback) {\n      this.coalesceRefresh(callback || AWS.util.fn.callback);\n    },\n  \n    /**\n     * @api private\n     */\n    load: function load (callback) {\n      var self = this;\n      self.createClients();\n      self.masterCredentials.get(function () {\n        self.service.config.credentials = self.masterCredentials;\n        var operation = self.params.RoleArn ?\n          self.service.assumeRole : self.service.getSessionToken;\n        operation.call(self.service, function (err, data) {\n          if (!err) {\n            self.service.credentialsFrom(data, self);\n          }\n          callback(err);\n        });\n      });\n    },\n  \n    /**\n     * @api private\n     */\n    loadMasterCredentials: function loadMasterCredentials (masterCredentials) {\n      this.masterCredentials = masterCredentials || AWS.config.credentials;\n      while (this.masterCredentials.masterCredentials) {\n        this.masterCredentials = this.masterCredentials.masterCredentials;\n      }\n  \n      if (typeof this.masterCredentials.get !== 'function') {\n        this.masterCredentials = new AWS.Credentials(this.masterCredentials);\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    createClients: function () {\n      this.service = this.service || new STS({params: this.params});\n    }\n  \n  });\n  \n  },{\"../../clients/sts\":8,\"../core\":18}],25:[function(require,module,exports){\n  var AWS = require('../core');\n  var STS = require('../../clients/sts');\n  \n  /**\n   * Represents credentials retrieved from STS Web Identity Federation support.\n   *\n   * By default this provider gets credentials using the\n   * {AWS.STS.assumeRoleWithWebIdentity} service operation. This operation\n   * requires a `RoleArn` containing the ARN of the IAM trust policy for the\n   * application for which credentials will be given. In addition, the\n   * `WebIdentityToken` must be set to the token provided by the identity\n   * provider. See {constructor} for an example on creating a credentials\n   * object with proper `RoleArn` and `WebIdentityToken` values.\n   *\n   * ## Refreshing Credentials from Identity Service\n   *\n   * In addition to AWS credentials expiring after a given amount of time, the\n   * login token from the identity provider will also expire. Once this token\n   * expires, it will not be usable to refresh AWS credentials, and another\n   * token will be needed. The SDK does not manage refreshing of the token value,\n   * but this can be done through a \"refresh token\" supported by most identity\n   * providers. Consult the documentation for the identity provider for refreshing\n   * tokens. Once the refreshed token is acquired, you should make sure to update\n   * this new token in the credentials object's {params} property. The following\n   * code will update the WebIdentityToken, assuming you have retrieved an updated\n   * token from the identity provider:\n   *\n   * ```javascript\n   * AWS.config.credentials.params.WebIdentityToken = updatedToken;\n   * ```\n   *\n   * Future calls to `credentials.refresh()` will now use the new token.\n   *\n   * @!attribute params\n   *   @return [map] the map of params passed to\n   *     {AWS.STS.assumeRoleWithWebIdentity}. To update the token, set the\n   *     `params.WebIdentityToken` property.\n   * @!attribute data\n   *   @return [map] the raw data response from the call to\n   *     {AWS.STS.assumeRoleWithWebIdentity}. Use this if you want to get\n   *     access to other properties from the response.\n   */\n  AWS.WebIdentityCredentials = AWS.util.inherit(AWS.Credentials, {\n    /**\n     * Creates a new credentials object.\n     * @param (see AWS.STS.assumeRoleWithWebIdentity)\n     * @example Creating a new credentials object\n     *   AWS.config.credentials = new AWS.WebIdentityCredentials({\n     *     RoleArn: 'arn:aws:iam::1234567890:role/WebIdentity',\n     *     WebIdentityToken: 'ABCDEFGHIJKLMNOP', // token from identity service\n     *     RoleSessionName: 'web' // optional name, defaults to web-identity\n     *   }, {\n     *     // optionally provide configuration to apply to the underlying AWS.STS service client\n     *     // if configuration is not provided, then configuration will be pulled from AWS.config\n     *\n     *     // specify timeout options\n     *     httpOptions: {\n     *       timeout: 100\n     *     }\n     *   });\n     * @see AWS.STS.assumeRoleWithWebIdentity\n     * @see AWS.Config\n     */\n    constructor: function WebIdentityCredentials(params, clientConfig) {\n      AWS.Credentials.call(this);\n      this.expired = true;\n      this.params = params;\n      this.params.RoleSessionName = this.params.RoleSessionName || 'web-identity';\n      this.data = null;\n      this._clientConfig = AWS.util.copy(clientConfig || {});\n    },\n  \n    /**\n     * Refreshes credentials using {AWS.STS.assumeRoleWithWebIdentity}\n     *\n     * @callback callback function(err)\n     *   Called when the STS service responds (or fails). When\n     *   this callback is called with no error, it means that the credentials\n     *   information has been loaded into the object (as the `accessKeyId`,\n     *   `secretAccessKey`, and `sessionToken` properties).\n     *   @param err [Error] if an error occurred, this value will be filled\n     * @see get\n     */\n    refresh: function refresh(callback) {\n      this.coalesceRefresh(callback || AWS.util.fn.callback);\n    },\n  \n    /**\n     * @api private\n     */\n    load: function load(callback) {\n      var self = this;\n      self.createClients();\n      self.service.assumeRoleWithWebIdentity(function (err, data) {\n        self.data = null;\n        if (!err) {\n          self.data = data;\n          self.service.credentialsFrom(data, self);\n        }\n        callback(err);\n      });\n    },\n  \n    /**\n     * @api private\n     */\n    createClients: function() {\n      if (!this.service) {\n        var stsConfig = AWS.util.merge({}, this._clientConfig);\n        stsConfig.params = this.params;\n        this.service = new STS(stsConfig);\n      }\n    }\n  \n  });\n  \n  },{\"../../clients/sts\":8,\"../core\":18}],26:[function(require,module,exports){\n  (function (process){\n  var AWS = require('./core');\n  var util = require('./util');\n  var endpointDiscoveryEnabledEnvs = ['AWS_ENABLE_ENDPOINT_DISCOVERY', 'AWS_ENDPOINT_DISCOVERY_ENABLED'];\n  \n  /**\n   * Generate key (except resources and operation part) to index the endpoints in the cache\n   * If input shape has endpointdiscoveryid trait then use\n   *   accessKey + operation + resources + region + service as cache key\n   * If input shape doesn't have endpointdiscoveryid trait then use\n   *   accessKey + region + service as cache key\n   * @return [map<String,String>] object with keys to index endpoints.\n   * @api private\n   */\n  function getCacheKey(request) {\n    var service = request.service;\n    var api = service.api || {};\n    var operations = api.operations;\n    var identifiers = {};\n    if (service.config.region) {\n      identifiers.region = service.config.region;\n    }\n    if (api.serviceId) {\n      identifiers.serviceId = api.serviceId;\n    }\n    if (service.config.credentials.accessKeyId) {\n      identifiers.accessKeyId = service.config.credentials.accessKeyId;\n    }\n    return identifiers;\n  }\n  \n  /**\n   * Recursive helper for marshallCustomIdentifiers().\n   * Looks for required string input members that have 'endpointdiscoveryid' trait.\n   * @api private\n   */\n  function marshallCustomIdentifiersHelper(result, params, shape) {\n    if (!shape || params === undefined || params === null) return;\n    if (shape.type === 'structure' && shape.required && shape.required.length > 0) {\n      util.arrayEach(shape.required, function(name) {\n        var memberShape = shape.members[name];\n        if (memberShape.endpointDiscoveryId === true) {\n          var locationName = memberShape.isLocationName ? memberShape.name : name;\n          result[locationName] = String(params[name]);\n        } else {\n          marshallCustomIdentifiersHelper(result, params[name], memberShape);\n        }\n      });\n    }\n  }\n  \n  /**\n   * Get custom identifiers for cache key.\n   * Identifies custom identifiers by checking each shape's `endpointDiscoveryId` trait.\n   * @param [object] request object\n   * @param [object] input shape of the given operation's api\n   * @api private\n   */\n  function marshallCustomIdentifiers(request, shape) {\n    var identifiers = {};\n    marshallCustomIdentifiersHelper(identifiers, request.params, shape);\n    return identifiers;\n  }\n  \n  /**\n   * Call endpoint discovery operation when it's optional.\n   * When endpoint is available in cache then use the cached endpoints. If endpoints\n   * are unavailable then use regional endpoints and call endpoint discovery operation\n   * asynchronously. This is turned off by default.\n   * @param [object] request object\n   * @api private\n   */\n  function optionalDiscoverEndpoint(request) {\n    var service = request.service;\n    var api = service.api;\n    var operationModel = api.operations ? api.operations[request.operation] : undefined;\n    var inputShape = operationModel ? operationModel.input : undefined;\n  \n    var identifiers = marshallCustomIdentifiers(request, inputShape);\n    var cacheKey = getCacheKey(request);\n    if (Object.keys(identifiers).length > 0) {\n      cacheKey = util.update(cacheKey, identifiers);\n      if (operationModel) cacheKey.operation = operationModel.name;\n    }\n    var endpoints = AWS.endpointCache.get(cacheKey);\n    if (endpoints && endpoints.length === 1 && endpoints[0].Address === '') {\n      //endpoint operation is being made but response not yet received\n      //or endpoint operation just failed in 1 minute\n      return;\n    } else if (endpoints && endpoints.length > 0) {\n      //found endpoint record from cache\n      request.httpRequest.updateEndpoint(endpoints[0].Address);\n    } else {\n      //endpoint record not in cache or outdated. make discovery operation\n      var endpointRequest = service.makeRequest(api.endpointOperation, {\n        Operation: operationModel.name,\n        Identifiers: identifiers,\n      });\n      addApiVersionHeader(endpointRequest);\n      endpointRequest.removeListener('validate', AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n      endpointRequest.removeListener('retry', AWS.EventListeners.Core.RETRY_CHECK);\n      //put in a placeholder for endpoints already requested, prevent\n      //too much in-flight calls\n      AWS.endpointCache.put(cacheKey, [{\n        Address: '',\n        CachePeriodInMinutes: 1\n      }]);\n      endpointRequest.send(function(err, data) {\n        if (data && data.Endpoints) {\n          AWS.endpointCache.put(cacheKey, data.Endpoints);\n        } else if (err) {\n          AWS.endpointCache.put(cacheKey, [{\n            Address: '',\n            CachePeriodInMinutes: 1 //not to make more endpoint operation in next 1 minute\n          }]);\n        }\n      });\n    }\n  }\n  \n  var requestQueue = {};\n  \n  /**\n   * Call endpoint discovery operation when it's required.\n   * When endpoint is available in cache then use cached ones. If endpoints are\n   * unavailable then SDK should call endpoint operation then use returned new\n   * endpoint for the api call. SDK will automatically attempt to do endpoint\n   * discovery. This is turned off by default\n   * @param [object] request object\n   * @api private\n   */\n  function requiredDiscoverEndpoint(request, done) {\n    var service = request.service;\n    var api = service.api;\n    var operationModel = api.operations ? api.operations[request.operation] : undefined;\n    var inputShape = operationModel ? operationModel.input : undefined;\n  \n    var identifiers = marshallCustomIdentifiers(request, inputShape);\n    var cacheKey = getCacheKey(request);\n    if (Object.keys(identifiers).length > 0) {\n      cacheKey = util.update(cacheKey, identifiers);\n      if (operationModel) cacheKey.operation = operationModel.name;\n    }\n    var cacheKeyStr = AWS.EndpointCache.getKeyString(cacheKey);\n    var endpoints = AWS.endpointCache.get(cacheKeyStr); //endpoint cache also accepts string keys\n    if (endpoints && endpoints.length === 1 && endpoints[0].Address === '') {\n      //endpoint operation is being made but response not yet received\n      //push request object to a pending queue\n      if (!requestQueue[cacheKeyStr]) requestQueue[cacheKeyStr] = [];\n      requestQueue[cacheKeyStr].push({request: request, callback: done});\n      return;\n    } else if (endpoints && endpoints.length > 0) {\n      request.httpRequest.updateEndpoint(endpoints[0].Address);\n      done();\n    } else {\n      var endpointRequest = service.makeRequest(api.endpointOperation, {\n        Operation: operationModel.name,\n        Identifiers: identifiers,\n      });\n      endpointRequest.removeListener('validate', AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n      addApiVersionHeader(endpointRequest);\n  \n      //put in a placeholder for endpoints already requested, prevent\n      //too much in-flight calls\n      AWS.endpointCache.put(cacheKeyStr, [{\n        Address: '',\n        CachePeriodInMinutes: 60 //long-live cache\n      }]);\n      endpointRequest.send(function(err, data) {\n        if (err) {\n          var errorParams = {\n            code: 'EndpointDiscoveryException',\n            message: 'Request cannot be fulfilled without specifying an endpoint',\n            retryable: false\n          };\n          request.response.error = util.error(err, errorParams);\n          AWS.endpointCache.remove(cacheKey);\n  \n          //fail all the pending requests in batch\n          if (requestQueue[cacheKeyStr]) {\n            var pendingRequests = requestQueue[cacheKeyStr];\n            util.arrayEach(pendingRequests, function(requestContext) {\n              requestContext.request.response.error = util.error(err, errorParams);\n              requestContext.callback();\n            });\n            delete requestQueue[cacheKeyStr];\n          }\n        } else if (data) {\n          AWS.endpointCache.put(cacheKeyStr, data.Endpoints);\n          request.httpRequest.updateEndpoint(data.Endpoints[0].Address);\n  \n          //update the endpoint for all the pending requests in batch\n          if (requestQueue[cacheKeyStr]) {\n            var pendingRequests = requestQueue[cacheKeyStr];\n            util.arrayEach(pendingRequests, function(requestContext) {\n              requestContext.request.httpRequest.updateEndpoint(data.Endpoints[0].Address);\n              requestContext.callback();\n            });\n            delete requestQueue[cacheKeyStr];\n          }\n        }\n        done();\n      });\n    }\n  }\n  \n  /**\n   * add api version header to endpoint operation\n   * @api private\n   */\n  function addApiVersionHeader(endpointRequest) {\n    var api = endpointRequest.service.api;\n    var apiVersion = api.apiVersion;\n    if (apiVersion && !endpointRequest.httpRequest.headers['x-amz-api-version']) {\n      endpointRequest.httpRequest.headers['x-amz-api-version'] = apiVersion;\n    }\n  }\n  \n  /**\n   * If api call gets invalid endpoint exception, SDK should attempt to remove the invalid\n   * endpoint from cache.\n   * @api private\n   */\n  function invalidateCachedEndpoints(response) {\n    var error = response.error;\n    var httpResponse = response.httpResponse;\n    if (error &&\n      (error.code === 'InvalidEndpointException' || httpResponse.statusCode === 421)\n    ) {\n      var request = response.request;\n      var operations = request.service.api.operations || {};\n      var inputShape = operations[request.operation] ? operations[request.operation].input : undefined;\n      var identifiers = marshallCustomIdentifiers(request, inputShape);\n      var cacheKey = getCacheKey(request);\n      if (Object.keys(identifiers).length > 0) {\n        cacheKey = util.update(cacheKey, identifiers);\n        if (operations[request.operation]) cacheKey.operation = operations[request.operation].name;\n      }\n      AWS.endpointCache.remove(cacheKey);\n    }\n  }\n  \n  /**\n   * If endpoint is explicitly configured, SDK should not do endpoint discovery in anytime.\n   * @param [object] client Service client object.\n   * @api private\n   */\n  function hasCustomEndpoint(client) {\n    //if set endpoint is set for specific client, enable endpoint discovery will raise an error.\n    if (client._originalConfig && client._originalConfig.endpoint && client._originalConfig.endpointDiscoveryEnabled === true) {\n      throw util.error(new Error(), {\n        code: 'ConfigurationException',\n        message: 'Custom endpoint is supplied; endpointDiscoveryEnabled must not be true.'\n      });\n    };\n    var svcConfig = AWS.config[client.serviceIdentifier] || {};\n    return Boolean(AWS.config.endpoint || svcConfig.endpoint || (client._originalConfig && client._originalConfig.endpoint));\n  }\n  \n  /**\n   * @api private\n   */\n  function isFalsy(value) {\n    return ['false', '0'].indexOf(value) >= 0;\n  }\n  \n  /**\n   * If endpoint discovery should perform for this request when endpoint discovery is optional.\n   * SDK performs config resolution in order like below:\n   * 1. If turned on client configuration(default to off) then turn on endpoint discovery.\n   * 2. If turned on in env AWS_ENABLE_ENDPOINT_DISCOVERY then turn on endpoint discovery.\n   * 3. If turned on in shared ini config file with key 'endpoint_discovery_enabled', then\n   *   turn on endpoint discovery.\n   * @param [object] request request object.\n   * @api private\n   */\n  function isEndpointDiscoveryApplicable(request) {\n    var service = request.service || {};\n    if (service.config.endpointDiscoveryEnabled === true) return true;\n  \n    //shared ini file is only available in Node\n    //not to check env in browser\n    if (util.isBrowser()) return false;\n  \n    for (var i = 0; i < endpointDiscoveryEnabledEnvs.length; i++) {\n      var env = endpointDiscoveryEnabledEnvs[i];\n      if (Object.prototype.hasOwnProperty.call(process.env, env)) {\n        if (process.env[env] === '' || process.env[env] === undefined) {\n          throw util.error(new Error(), {\n            code: 'ConfigurationException',\n            message: 'environmental variable ' + env + ' cannot be set to nothing'\n          });\n        }\n        if (!isFalsy(process.env[env])) return true;\n      }\n    }\n  \n    var configFile = {};\n    try {\n      configFile = AWS.util.iniLoader ? AWS.util.iniLoader.loadFrom({\n        isConfig: true,\n        filename: process.env[AWS.util.sharedConfigFileEnv]\n      }) : {};\n    } catch (e) {}\n    var sharedFileConfig = configFile[\n      process.env.AWS_PROFILE || AWS.util.defaultProfile\n    ] || {};\n    if (Object.prototype.hasOwnProperty.call(sharedFileConfig, 'endpoint_discovery_enabled')) {\n      if (sharedFileConfig.endpoint_discovery_enabled === undefined) {\n        throw util.error(new Error(), {\n          code: 'ConfigurationException',\n          message: 'config file entry \\'endpoint_discovery_enabled\\' cannot be set to nothing'\n        });\n      }\n      if (!isFalsy(sharedFileConfig.endpoint_discovery_enabled)) return true;\n    }\n    return false;\n  }\n  \n  /**\n   * attach endpoint discovery logic to request object\n   * @param [object] request\n   * @api private\n   */\n  function discoverEndpoint(request, done) {\n    var service = request.service || {};\n    if (hasCustomEndpoint(service) || request.isPresigned()) return done();\n  \n    if (!isEndpointDiscoveryApplicable(request)) return done();\n  \n    request.httpRequest.appendToUserAgent('endpoint-discovery');\n  \n    var operations = service.api.operations || {};\n    var operationModel = operations[request.operation];\n    var isEndpointDiscoveryRequired = operationModel ? operationModel.endpointDiscoveryRequired : 'NULL';\n    switch (isEndpointDiscoveryRequired) {\n      case 'OPTIONAL':\n        optionalDiscoverEndpoint(request);\n        request.addNamedListener('INVALIDATE_CACHED_ENDPOINTS', 'extractError', invalidateCachedEndpoints);\n        done();\n        break;\n      case 'REQUIRED':\n        request.addNamedListener('INVALIDATE_CACHED_ENDPOINTS', 'extractError', invalidateCachedEndpoints);\n        requiredDiscoverEndpoint(request, done);\n        break;\n      case 'NULL':\n      default:\n        done();\n        break;\n    }\n  }\n  \n  module.exports = {\n    discoverEndpoint: discoverEndpoint,\n    requiredDiscoverEndpoint: requiredDiscoverEndpoint,\n    optionalDiscoverEndpoint: optionalDiscoverEndpoint,\n    marshallCustomIdentifiers: marshallCustomIdentifiers,\n    getCacheKey: getCacheKey,\n    invalidateCachedEndpoint: invalidateCachedEndpoints,\n  };\n  \n  }).call(this,require('_process'))\n  },{\"./core\":18,\"./util\":71,\"_process\":85}],27:[function(require,module,exports){\n  var eventMessageChunker = require('../event-stream/event-message-chunker').eventMessageChunker;\n  var parseEvent = require('./parse-event').parseEvent;\n  \n  function createEventStream(body, parser, model) {\n      var eventMessages = eventMessageChunker(body);\n  \n      var events = [];\n  \n      for (var i = 0; i < eventMessages.length; i++) {\n          events.push(parseEvent(parser, eventMessages[i], model));\n      }\n  \n      return events;\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n      createEventStream: createEventStream\n  };\n  \n  },{\"../event-stream/event-message-chunker\":28,\"./parse-event\":30}],28:[function(require,module,exports){\n  /**\n   * Takes in a buffer of event messages and splits them into individual messages.\n   * @param {Buffer} buffer\n   * @api private\n   */\n  function eventMessageChunker(buffer) {\n      /** @type Buffer[] */\n      var messages = [];\n      var offset = 0;\n  \n      while (offset < buffer.length) {\n          var totalLength = buffer.readInt32BE(offset);\n  \n          // create new buffer for individual message (shares memory with original)\n          var message = buffer.slice(offset, totalLength + offset);\n          // increment offset to it starts at the next message\n          offset += totalLength;\n  \n          messages.push(message);\n      }\n  \n      return messages;\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n      eventMessageChunker: eventMessageChunker\n  };\n  \n  },{}],29:[function(require,module,exports){\n  var util = require('../core').util;\n  var toBuffer = util.buffer.toBuffer;\n  \n  /**\n   * A lossless representation of a signed, 64-bit integer. Instances of this\n   * class may be used in arithmetic expressions as if they were numeric\n   * primitives, but the binary representation will be preserved unchanged as the\n   * `bytes` property of the object. The bytes should be encoded as big-endian,\n   * two's complement integers.\n   * @param {Buffer} bytes\n   *\n   * @api private\n   */\n  function Int64(bytes) {\n      if (bytes.length !== 8) {\n          throw new Error('Int64 buffers must be exactly 8 bytes');\n      }\n      if (!util.Buffer.isBuffer(bytes)) bytes = toBuffer(bytes);\n  \n      this.bytes = bytes;\n  }\n  \n  /**\n   * @param {number} number\n   * @returns {Int64}\n   *\n   * @api private\n   */\n  Int64.fromNumber = function(number) {\n      if (number > 9223372036854775807 || number < -9223372036854775808) {\n          throw new Error(\n              number + ' is too large (or, if negative, too small) to represent as an Int64'\n          );\n      }\n  \n      var bytes = new Uint8Array(8);\n      for (\n          var i = 7, remaining = Math.abs(Math.round(number));\n          i > -1 && remaining > 0;\n          i--, remaining /= 256\n      ) {\n          bytes[i] = remaining;\n      }\n  \n      if (number < 0) {\n          negate(bytes);\n      }\n  \n      return new Int64(bytes);\n  };\n  \n  /**\n   * @returns {number}\n   *\n   * @api private\n   */\n  Int64.prototype.valueOf = function() {\n      var bytes = this.bytes.slice(0);\n      var negative = bytes[0] & 128;\n      if (negative) {\n          negate(bytes);\n      }\n  \n      return parseInt(bytes.toString('hex'), 16) * (negative ? -1 : 1);\n  };\n  \n  Int64.prototype.toString = function() {\n      return String(this.valueOf());\n  };\n  \n  /**\n   * @param {Buffer} bytes\n   *\n   * @api private\n   */\n  function negate(bytes) {\n      for (var i = 0; i < 8; i++) {\n          bytes[i] ^= 0xFF;\n      }\n      for (var i = 7; i > -1; i--) {\n          bytes[i]++;\n          if (bytes[i] !== 0) {\n              break;\n          }\n      }\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n      Int64: Int64\n  };\n  \n  },{\"../core\":18}],30:[function(require,module,exports){\n  var parseMessage = require('./parse-message').parseMessage;\n  \n  /**\n   *\n   * @param {*} parser\n   * @param {Buffer} message\n   * @param {*} shape\n   * @api private\n   */\n  function parseEvent(parser, message, shape) {\n      var parsedMessage = parseMessage(message);\n  \n      // check if message is an event or error\n      var messageType = parsedMessage.headers[':message-type'];\n      if (messageType) {\n          if (messageType.value === 'error') {\n              throw parseError(parsedMessage);\n          } else if (messageType.value !== 'event') {\n              // not sure how to parse non-events/non-errors, ignore for now\n              return;\n          }\n      }\n  \n      // determine event type\n      var eventType = parsedMessage.headers[':event-type'];\n      // check that the event type is modeled\n      var eventModel = shape.members[eventType.value];\n      if (!eventModel) {\n          return;\n      }\n  \n      var result = {};\n      // check if an event payload exists\n      var eventPayloadMemberName = eventModel.eventPayloadMemberName;\n      if (eventPayloadMemberName) {\n          var payloadShape = eventModel.members[eventPayloadMemberName];\n          // if the shape is binary, return the byte array\n          if (payloadShape.type === 'binary') {\n              result[eventPayloadMemberName] = parsedMessage.body;\n          } else {\n              result[eventPayloadMemberName] = parser.parse(parsedMessage.body.toString(), payloadShape);\n          }\n      }\n  \n      // read event headers\n      var eventHeaderNames = eventModel.eventHeaderMemberNames;\n      for (var i = 0; i < eventHeaderNames.length; i++) {\n          var name = eventHeaderNames[i];\n          if (parsedMessage.headers[name]) {\n              // parse the header!\n              result[name] = eventModel.members[name].toType(parsedMessage.headers[name].value);\n          }\n      }\n  \n      var output = {};\n      output[eventType.value] = result;\n      return output;\n  }\n  \n  function parseError(message) {\n      var errorCode = message.headers[':error-code'];\n      var errorMessage = message.headers[':error-message'];\n      var error = new Error(errorMessage.value || errorMessage);\n      error.code = error.name = errorCode.value || errorCode;\n      return error;\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n      parseEvent: parseEvent\n  };\n  \n  },{\"./parse-message\":31}],31:[function(require,module,exports){\n  var Int64 = require('./int64').Int64;\n  \n  var splitMessage = require('./split-message').splitMessage;\n  \n  var BOOLEAN_TAG = 'boolean';\n  var BYTE_TAG = 'byte';\n  var SHORT_TAG = 'short';\n  var INT_TAG = 'integer';\n  var LONG_TAG = 'long';\n  var BINARY_TAG = 'binary';\n  var STRING_TAG = 'string';\n  var TIMESTAMP_TAG = 'timestamp';\n  var UUID_TAG = 'uuid';\n  \n  /**\n   * @api private\n   *\n   * @param {Buffer} headers\n   */\n  function parseHeaders(headers) {\n      var out = {};\n      var position = 0;\n      while (position < headers.length) {\n          var nameLength = headers.readUInt8(position++);\n          var name = headers.slice(position, position + nameLength).toString();\n          position += nameLength;\n          switch (headers.readUInt8(position++)) {\n              case 0 /* boolTrue */:\n                  out[name] = {\n                      type: BOOLEAN_TAG,\n                      value: true\n                  };\n                  break;\n              case 1 /* boolFalse */:\n                  out[name] = {\n                      type: BOOLEAN_TAG,\n                      value: false\n                  };\n                  break;\n              case 2 /* byte */:\n                  out[name] = {\n                      type: BYTE_TAG,\n                      value: headers.readInt8(position++)\n                  };\n                  break;\n              case 3 /* short */:\n                  out[name] = {\n                      type: SHORT_TAG,\n                      value: headers.readInt16BE(position)\n                  };\n                  position += 2;\n                  break;\n              case 4 /* integer */:\n                  out[name] = {\n                      type: INT_TAG,\n                      value: headers.readInt32BE(position)\n                  };\n                  position += 4;\n                  break;\n              case 5 /* long */:\n                  out[name] = {\n                      type: LONG_TAG,\n                      value: new Int64(headers.slice(position, position + 8))\n                  };\n                  position += 8;\n                  break;\n              case 6 /* byteArray */:\n                  var binaryLength = headers.readUInt16BE(position);\n                  position += 2;\n                  out[name] = {\n                      type: BINARY_TAG,\n                      value: headers.slice(position, position + binaryLength)\n                  };\n                  position += binaryLength;\n                  break;\n              case 7 /* string */:\n                  var stringLength = headers.readUInt16BE(position);\n                  position += 2;\n                  out[name] = {\n                      type: STRING_TAG,\n                      value: headers.slice(\n                          position,\n                          position + stringLength\n                      ).toString()\n                  };\n                  position += stringLength;\n                  break;\n              case 8 /* timestamp */:\n                  out[name] = {\n                      type: TIMESTAMP_TAG,\n                      value: new Date(\n                          new Int64(headers.slice(position, position + 8))\n                              .valueOf()\n                      )\n                  };\n                  position += 8;\n                  break;\n              case 9 /* uuid */:\n                  var uuidChars = headers.slice(position, position + 16)\n                      .toString('hex');\n                  position += 16;\n                  out[name] = {\n                      type: UUID_TAG,\n                      value: uuidChars.substr(0, 8) + '-' +\n                          uuidChars.substr(8, 4) + '-' +\n                          uuidChars.substr(12, 4) + '-' +\n                          uuidChars.substr(16, 4) + '-' +\n                          uuidChars.substr(20)\n                  };\n                  break;\n              default:\n                  throw new Error('Unrecognized header type tag');\n          }\n      }\n      return out;\n  }\n  \n  function parseMessage(message) {\n      var parsed = splitMessage(message);\n      return { headers: parseHeaders(parsed.headers), body: parsed.body };\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n      parseMessage: parseMessage\n  };\n  \n  },{\"./int64\":29,\"./split-message\":32}],32:[function(require,module,exports){\n  var util = require('../core').util;\n  var toBuffer = util.buffer.toBuffer;\n  \n  // All prelude components are unsigned, 32-bit integers\n  var PRELUDE_MEMBER_LENGTH = 4;\n  // The prelude consists of two components\n  var PRELUDE_LENGTH = PRELUDE_MEMBER_LENGTH * 2;\n  // Checksums are always CRC32 hashes.\n  var CHECKSUM_LENGTH = 4;\n  // Messages must include a full prelude, a prelude checksum, and a message checksum\n  var MINIMUM_MESSAGE_LENGTH = PRELUDE_LENGTH + CHECKSUM_LENGTH * 2;\n  \n  /**\n   * @api private\n   *\n   * @param {Buffer} message\n   */\n  function splitMessage(message) {\n      if (!util.Buffer.isBuffer(message)) message = toBuffer(message);\n  \n      if (message.length < MINIMUM_MESSAGE_LENGTH) {\n          throw new Error('Provided message too short to accommodate event stream message overhead');\n      }\n  \n      if (message.length !== message.readUInt32BE(0)) {\n          throw new Error('Reported message length does not match received message length');\n      }\n  \n      var expectedPreludeChecksum = message.readUInt32BE(PRELUDE_LENGTH);\n  \n      if (\n          expectedPreludeChecksum !== util.crypto.crc32(\n              message.slice(0, PRELUDE_LENGTH)\n          )\n      ) {\n          throw new Error(\n              'The prelude checksum specified in the message (' +\n              expectedPreludeChecksum +\n              ') does not match the calculated CRC32 checksum.'\n          );\n      }\n  \n      var expectedMessageChecksum = message.readUInt32BE(message.length - CHECKSUM_LENGTH);\n  \n      if (\n          expectedMessageChecksum !== util.crypto.crc32(\n              message.slice(0, message.length - CHECKSUM_LENGTH)\n          )\n      ) {\n          throw new Error(\n              'The message checksum did not match the expected value of ' +\n                  expectedMessageChecksum\n          );\n      }\n  \n      var headersStart = PRELUDE_LENGTH + CHECKSUM_LENGTH;\n      var headersEnd = headersStart + message.readUInt32BE(PRELUDE_MEMBER_LENGTH);\n  \n      return {\n          headers: message.slice(headersStart, headersEnd),\n          body: message.slice(headersEnd, message.length - CHECKSUM_LENGTH),\n      };\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n      splitMessage: splitMessage\n  };\n  \n  },{\"../core\":18}],33:[function(require,module,exports){\n  var AWS = require('./core');\n  var SequentialExecutor = require('./sequential_executor');\n  var DISCOVER_ENDPOINT = require('./discover_endpoint').discoverEndpoint;\n  /**\n   * The namespace used to register global event listeners for request building\n   * and sending.\n   */\n  AWS.EventListeners = {\n    /**\n     * @!attribute VALIDATE_CREDENTIALS\n     *   A request listener that validates whether the request is being\n     *   sent with credentials.\n     *   Handles the {AWS.Request~validate 'validate' Request event}\n     *   @example Sending a request without validating credentials\n     *     var listener = AWS.EventListeners.Core.VALIDATE_CREDENTIALS;\n     *     request.removeListener('validate', listener);\n     *   @readonly\n     *   @return [Function]\n     * @!attribute VALIDATE_REGION\n     *   A request listener that validates whether the region is set\n     *   for a request.\n     *   Handles the {AWS.Request~validate 'validate' Request event}\n     *   @example Sending a request without validating region configuration\n     *     var listener = AWS.EventListeners.Core.VALIDATE_REGION;\n     *     request.removeListener('validate', listener);\n     *   @readonly\n     *   @return [Function]\n     * @!attribute VALIDATE_PARAMETERS\n     *   A request listener that validates input parameters in a request.\n     *   Handles the {AWS.Request~validate 'validate' Request event}\n     *   @example Sending a request without validating parameters\n     *     var listener = AWS.EventListeners.Core.VALIDATE_PARAMETERS;\n     *     request.removeListener('validate', listener);\n     *   @example Disable parameter validation globally\n     *     AWS.EventListeners.Core.removeListener('validate',\n     *       AWS.EventListeners.Core.VALIDATE_REGION);\n     *   @readonly\n     *   @return [Function]\n     * @!attribute SEND\n     *   A request listener that initiates the HTTP connection for a\n     *   request being sent. Handles the {AWS.Request~send 'send' Request event}\n     *   @example Replacing the HTTP handler\n     *     var listener = AWS.EventListeners.Core.SEND;\n     *     request.removeListener('send', listener);\n     *     request.on('send', function(response) {\n     *       customHandler.send(response);\n     *     });\n     *   @return [Function]\n     *   @readonly\n     * @!attribute HTTP_DATA\n     *   A request listener that reads data from the HTTP connection in order\n     *   to build the response data.\n     *   Handles the {AWS.Request~httpData 'httpData' Request event}.\n     *   Remove this handler if you are overriding the 'httpData' event and\n     *   do not want extra data processing and buffering overhead.\n     *   @example Disabling default data processing\n     *     var listener = AWS.EventListeners.Core.HTTP_DATA;\n     *     request.removeListener('httpData', listener);\n     *   @return [Function]\n     *   @readonly\n     */\n    Core: {} /* doc hack */\n  };\n  \n  /**\n   * @api private\n   */\n  function getOperationAuthtype(req) {\n    if (!req.service.api.operations) {\n      return '';\n    }\n    var operation = req.service.api.operations[req.operation];\n    return operation ? operation.authtype : '';\n  }\n  \n  AWS.EventListeners = {\n    Core: new SequentialExecutor().addNamedListeners(function(add, addAsync) {\n      addAsync('VALIDATE_CREDENTIALS', 'validate',\n          function VALIDATE_CREDENTIALS(req, done) {\n        if (!req.service.api.signatureVersion && !req.service.config.signatureVersion) return done(); // none\n        req.service.config.getCredentials(function(err) {\n          if (err) {\n            req.response.error = AWS.util.error(err,\n              {code: 'CredentialsError', message: 'Missing credentials in config'});\n          }\n          done();\n        });\n      });\n  \n      add('VALIDATE_REGION', 'validate', function VALIDATE_REGION(req) {\n        if (!req.service.config.region && !req.service.isGlobalEndpoint) {\n          req.response.error = AWS.util.error(new Error(),\n            {code: 'ConfigError', message: 'Missing region in config'});\n        }\n      });\n  \n      add('BUILD_IDEMPOTENCY_TOKENS', 'validate', function BUILD_IDEMPOTENCY_TOKENS(req) {\n        if (!req.service.api.operations) {\n          return;\n        }\n        var operation = req.service.api.operations[req.operation];\n        if (!operation) {\n          return;\n        }\n        var idempotentMembers = operation.idempotentMembers;\n        if (!idempotentMembers.length) {\n          return;\n        }\n        // creates a copy of params so user's param object isn't mutated\n        var params = AWS.util.copy(req.params);\n        for (var i = 0, iLen = idempotentMembers.length; i < iLen; i++) {\n          if (!params[idempotentMembers[i]]) {\n            // add the member\n            params[idempotentMembers[i]] = AWS.util.uuid.v4();\n          }\n        }\n        req.params = params;\n      });\n  \n      add('VALIDATE_PARAMETERS', 'validate', function VALIDATE_PARAMETERS(req) {\n        if (!req.service.api.operations) {\n          return;\n        }\n        var rules = req.service.api.operations[req.operation].input;\n        var validation = req.service.config.paramValidation;\n        new AWS.ParamValidator(validation).validate(rules, req.params);\n      });\n  \n      addAsync('COMPUTE_SHA256', 'afterBuild', function COMPUTE_SHA256(req, done) {\n        req.haltHandlersOnError();\n        if (!req.service.api.operations) {\n          return;\n        }\n        var operation = req.service.api.operations[req.operation];\n        var authtype = operation ? operation.authtype : '';\n        if (!req.service.api.signatureVersion && !authtype && !req.service.config.signatureVersion) return done(); // none\n        if (req.service.getSignerClass(req) === AWS.Signers.V4) {\n          var body = req.httpRequest.body || '';\n          if (authtype.indexOf('unsigned-body') >= 0) {\n            req.httpRequest.headers['X-Amz-Content-Sha256'] = 'UNSIGNED-PAYLOAD';\n            return done();\n          }\n          AWS.util.computeSha256(body, function(err, sha) {\n            if (err) {\n              done(err);\n            }\n            else {\n              req.httpRequest.headers['X-Amz-Content-Sha256'] = sha;\n              done();\n            }\n          });\n        } else {\n          done();\n        }\n      });\n  \n      add('SET_CONTENT_LENGTH', 'afterBuild', function SET_CONTENT_LENGTH(req) {\n        var authtype = getOperationAuthtype(req);\n        var payloadMember = AWS.util.getRequestPayloadShape(req);\n        if (req.httpRequest.headers['Content-Length'] === undefined) {\n          try {\n            var length = AWS.util.string.byteLength(req.httpRequest.body);\n            req.httpRequest.headers['Content-Length'] = length;\n          } catch (err) {\n            if (payloadMember && payloadMember.isStreaming) {\n              if (payloadMember.requiresLength) {\n                //streaming payload requires length(s3, glacier)\n                throw err;\n              } else if (authtype.indexOf('unsigned-body') >= 0) {\n                //unbounded streaming payload(lex, mediastore)\n                req.httpRequest.headers['Transfer-Encoding'] = 'chunked';\n                return;\n              } else {\n                throw err;\n              }\n            }\n            throw err;\n          }\n        }\n      });\n  \n      add('SET_HTTP_HOST', 'afterBuild', function SET_HTTP_HOST(req) {\n        req.httpRequest.headers['Host'] = req.httpRequest.endpoint.host;\n      });\n  \n      add('RESTART', 'restart', function RESTART() {\n        var err = this.response.error;\n        if (!err || !err.retryable) return;\n  \n        this.httpRequest = new AWS.HttpRequest(\n          this.service.endpoint,\n          this.service.region\n        );\n  \n        if (this.response.retryCount < this.service.config.maxRetries) {\n          this.response.retryCount++;\n        } else {\n          this.response.error = null;\n        }\n      });\n  \n      var addToHead = true;\n      addAsync('DISCOVER_ENDPOINT', 'sign', DISCOVER_ENDPOINT, addToHead);\n  \n      addAsync('SIGN', 'sign', function SIGN(req, done) {\n        var service = req.service;\n        var operations = req.service.api.operations || {};\n        var operation = operations[req.operation];\n        var authtype = operation ? operation.authtype : '';\n        if (!service.api.signatureVersion && !authtype && !service.config.signatureVersion) return done(); // none\n  \n        service.config.getCredentials(function (err, credentials) {\n          if (err) {\n            req.response.error = err;\n            return done();\n          }\n  \n          try {\n            var date = service.getSkewCorrectedDate();\n            var SignerClass = service.getSignerClass(req);\n            var signer = new SignerClass(req.httpRequest,\n              service.api.signingName || service.api.endpointPrefix,\n              {\n                signatureCache: service.config.signatureCache,\n                operation: operation,\n                signatureVersion: service.api.signatureVersion\n              });\n            signer.setServiceClientId(service._clientId);\n  \n            // clear old authorization headers\n            delete req.httpRequest.headers['Authorization'];\n            delete req.httpRequest.headers['Date'];\n            delete req.httpRequest.headers['X-Amz-Date'];\n  \n            // add new authorization\n            signer.addAuthorization(credentials, date);\n            req.signedAt = date;\n          } catch (e) {\n            req.response.error = e;\n          }\n          done();\n        });\n      });\n  \n      add('VALIDATE_RESPONSE', 'validateResponse', function VALIDATE_RESPONSE(resp) {\n        if (this.service.successfulResponse(resp, this)) {\n          resp.data = {};\n          resp.error = null;\n        } else {\n          resp.data = null;\n          resp.error = AWS.util.error(new Error(),\n            {code: 'UnknownError', message: 'An unknown error occurred.'});\n        }\n      });\n  \n      addAsync('SEND', 'send', function SEND(resp, done) {\n        resp.httpResponse._abortCallback = done;\n        resp.error = null;\n        resp.data = null;\n  \n        function callback(httpResp) {\n          resp.httpResponse.stream = httpResp;\n          var stream = resp.request.httpRequest.stream;\n          var service = resp.request.service;\n          var api = service.api;\n          var operationName = resp.request.operation;\n          var operation = api.operations[operationName] || {};\n  \n          httpResp.on('headers', function onHeaders(statusCode, headers, statusMessage) {\n            resp.request.emit(\n              'httpHeaders',\n              [statusCode, headers, resp, statusMessage]\n            );\n  \n            if (!resp.httpResponse.streaming) {\n              if (AWS.HttpClient.streamsApiVersion === 2) { // streams2 API check\n                // if we detect event streams, we're going to have to\n                // return the stream immediately\n                if (operation.hasEventOutput && service.successfulResponse(resp)) {\n                  // skip reading the IncomingStream\n                  resp.request.emit('httpDone');\n                  done();\n                  return;\n                }\n  \n                httpResp.on('readable', function onReadable() {\n                  var data = httpResp.read();\n                  if (data !== null) {\n                    resp.request.emit('httpData', [data, resp]);\n                  }\n                });\n              } else { // legacy streams API\n                httpResp.on('data', function onData(data) {\n                  resp.request.emit('httpData', [data, resp]);\n                });\n              }\n            }\n          });\n  \n          httpResp.on('end', function onEnd() {\n            if (!stream || !stream.didCallback) {\n              if (AWS.HttpClient.streamsApiVersion === 2 && (operation.hasEventOutput && service.successfulResponse(resp))) {\n                // don't concatenate response chunks when streaming event stream data when response is successful\n                return;\n              }\n              resp.request.emit('httpDone');\n              done();\n            }\n          });\n        }\n  \n        function progress(httpResp) {\n          httpResp.on('sendProgress', function onSendProgress(value) {\n            resp.request.emit('httpUploadProgress', [value, resp]);\n          });\n  \n          httpResp.on('receiveProgress', function onReceiveProgress(value) {\n            resp.request.emit('httpDownloadProgress', [value, resp]);\n          });\n        }\n  \n        function error(err) {\n          if (err.code !== 'RequestAbortedError') {\n            var errCode = err.code === 'TimeoutError' ? err.code : 'NetworkingError';\n            err = AWS.util.error(err, {\n              code: errCode,\n              region: resp.request.httpRequest.region,\n              hostname: resp.request.httpRequest.endpoint.hostname,\n              retryable: true\n            });\n          }\n          resp.error = err;\n          resp.request.emit('httpError', [resp.error, resp], function() {\n            done();\n          });\n        }\n  \n        function executeSend() {\n          var http = AWS.HttpClient.getInstance();\n          var httpOptions = resp.request.service.config.httpOptions || {};\n          try {\n            var stream = http.handleRequest(resp.request.httpRequest, httpOptions,\n                                            callback, error);\n            progress(stream);\n          } catch (err) {\n            error(err);\n          }\n        }\n        var timeDiff = (resp.request.service.getSkewCorrectedDate() - this.signedAt) / 1000;\n        if (timeDiff >= 60 * 10) { // if we signed 10min ago, re-sign\n          this.emit('sign', [this], function(err) {\n            if (err) done(err);\n            else executeSend();\n          });\n        } else {\n          executeSend();\n        }\n      });\n  \n      add('HTTP_HEADERS', 'httpHeaders',\n          function HTTP_HEADERS(statusCode, headers, resp, statusMessage) {\n        resp.httpResponse.statusCode = statusCode;\n        resp.httpResponse.statusMessage = statusMessage;\n        resp.httpResponse.headers = headers;\n        resp.httpResponse.body = AWS.util.buffer.toBuffer('');\n        resp.httpResponse.buffers = [];\n        resp.httpResponse.numBytes = 0;\n        var dateHeader = headers.date || headers.Date;\n        var service = resp.request.service;\n        if (dateHeader) {\n          var serverTime = Date.parse(dateHeader);\n          if (service.config.correctClockSkew\n              && service.isClockSkewed(serverTime)) {\n            service.applyClockOffset(serverTime);\n          }\n        }\n      });\n  \n      add('HTTP_DATA', 'httpData', function HTTP_DATA(chunk, resp) {\n        if (chunk) {\n          if (AWS.util.isNode()) {\n            resp.httpResponse.numBytes += chunk.length;\n  \n            var total = resp.httpResponse.headers['content-length'];\n            var progress = { loaded: resp.httpResponse.numBytes, total: total };\n            resp.request.emit('httpDownloadProgress', [progress, resp]);\n          }\n  \n          resp.httpResponse.buffers.push(AWS.util.buffer.toBuffer(chunk));\n        }\n      });\n  \n      add('HTTP_DONE', 'httpDone', function HTTP_DONE(resp) {\n        // convert buffers array into single buffer\n        if (resp.httpResponse.buffers && resp.httpResponse.buffers.length > 0) {\n          var body = AWS.util.buffer.concat(resp.httpResponse.buffers);\n          resp.httpResponse.body = body;\n        }\n        delete resp.httpResponse.numBytes;\n        delete resp.httpResponse.buffers;\n      });\n  \n      add('FINALIZE_ERROR', 'retry', function FINALIZE_ERROR(resp) {\n        if (resp.httpResponse.statusCode) {\n          resp.error.statusCode = resp.httpResponse.statusCode;\n          if (resp.error.retryable === undefined) {\n            resp.error.retryable = this.service.retryableError(resp.error, this);\n          }\n        }\n      });\n  \n      add('INVALIDATE_CREDENTIALS', 'retry', function INVALIDATE_CREDENTIALS(resp) {\n        if (!resp.error) return;\n        switch (resp.error.code) {\n          case 'RequestExpired': // EC2 only\n          case 'ExpiredTokenException':\n          case 'ExpiredToken':\n            resp.error.retryable = true;\n            resp.request.service.config.credentials.expired = true;\n        }\n      });\n  \n      add('EXPIRED_SIGNATURE', 'retry', function EXPIRED_SIGNATURE(resp) {\n        var err = resp.error;\n        if (!err) return;\n        if (typeof err.code === 'string' && typeof err.message === 'string') {\n          if (err.code.match(/Signature/) && err.message.match(/expired/)) {\n            resp.error.retryable = true;\n          }\n        }\n      });\n  \n      add('CLOCK_SKEWED', 'retry', function CLOCK_SKEWED(resp) {\n        if (!resp.error) return;\n        if (this.service.clockSkewError(resp.error)\n            && this.service.config.correctClockSkew) {\n          resp.error.retryable = true;\n        }\n      });\n  \n      add('REDIRECT', 'retry', function REDIRECT(resp) {\n        if (resp.error && resp.error.statusCode >= 300 &&\n            resp.error.statusCode < 400 && resp.httpResponse.headers['location']) {\n          this.httpRequest.endpoint =\n            new AWS.Endpoint(resp.httpResponse.headers['location']);\n          this.httpRequest.headers['Host'] = this.httpRequest.endpoint.host;\n          resp.error.redirect = true;\n          resp.error.retryable = true;\n        }\n      });\n  \n      add('RETRY_CHECK', 'retry', function RETRY_CHECK(resp) {\n        if (resp.error) {\n          if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n            resp.error.retryDelay = 0;\n          } else if (resp.retryCount < resp.maxRetries) {\n            resp.error.retryDelay = this.service.retryDelays(resp.retryCount) || 0;\n          }\n        }\n      });\n  \n      addAsync('RESET_RETRY_STATE', 'afterRetry', function RESET_RETRY_STATE(resp, done) {\n        var delay, willRetry = false;\n  \n        if (resp.error) {\n          delay = resp.error.retryDelay || 0;\n          if (resp.error.retryable && resp.retryCount < resp.maxRetries) {\n            resp.retryCount++;\n            willRetry = true;\n          } else if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n            resp.redirectCount++;\n            willRetry = true;\n          }\n        }\n  \n        if (willRetry) {\n          resp.error = null;\n          setTimeout(done, delay);\n        } else {\n          done();\n        }\n      });\n    }),\n  \n    CorePost: new SequentialExecutor().addNamedListeners(function(add) {\n      add('EXTRACT_REQUEST_ID', 'extractData', AWS.util.extractRequestId);\n      add('EXTRACT_REQUEST_ID', 'extractError', AWS.util.extractRequestId);\n  \n      add('ENOTFOUND_ERROR', 'httpError', function ENOTFOUND_ERROR(err) {\n        if (err.code === 'NetworkingError' && err.errno === 'ENOTFOUND') {\n          var message = 'Inaccessible host: `' + err.hostname +\n            '\\'. This service may not be available in the `' + err.region +\n            '\\' region.';\n          this.response.error = AWS.util.error(new Error(message), {\n            code: 'UnknownEndpoint',\n            region: err.region,\n            hostname: err.hostname,\n            retryable: true,\n            originalError: err\n          });\n        }\n      });\n    }),\n  \n    Logger: new SequentialExecutor().addNamedListeners(function(add) {\n      add('LOG_REQUEST', 'complete', function LOG_REQUEST(resp) {\n        var req = resp.request;\n        var logger = req.service.config.logger;\n        if (!logger) return;\n        function filterSensitiveLog(inputShape, shape) {\n          if (!shape) {\n            return shape;\n          }\n          switch (inputShape.type) {\n            case 'structure':\n              var struct = {};\n              AWS.util.each(shape, function(subShapeName, subShape) {\n                if (Object.prototype.hasOwnProperty.call(inputShape.members, subShapeName)) {\n                  struct[subShapeName] = filterSensitiveLog(inputShape.members[subShapeName], subShape);\n                } else {\n                  struct[subShapeName] = subShape;\n                }\n              });\n              return struct;\n            case 'list':\n              var list = [];\n              AWS.util.arrayEach(shape, function(subShape, index) {\n                list.push(filterSensitiveLog(inputShape.member, subShape));\n              });\n              return list;\n            case 'map':\n              var map = {};\n              AWS.util.each(shape, function(key, value) {\n                map[key] = filterSensitiveLog(inputShape.value, value);\n              });\n              return map;\n            default:\n              if (inputShape.isSensitive) {\n                return '***SensitiveInformation***';\n              } else {\n                return shape;\n              }\n          }\n        }\n  \n        function buildMessage() {\n          var time = resp.request.service.getSkewCorrectedDate().getTime();\n          var delta = (time - req.startTime.getTime()) / 1000;\n          var ansi = logger.isTTY ? true : false;\n          var status = resp.httpResponse.statusCode;\n          var censoredParams = req.params;\n          if (\n            req.service.api.operations &&\n                req.service.api.operations[req.operation] &&\n                req.service.api.operations[req.operation].input\n          ) {\n            var inputShape = req.service.api.operations[req.operation].input;\n            censoredParams = filterSensitiveLog(inputShape, req.params);\n          }\n          var params = require('util').inspect(censoredParams, true, null);\n          var message = '';\n          if (ansi) message += '\\x1B[33m';\n          message += '[AWS ' + req.service.serviceIdentifier + ' ' + status;\n          message += ' ' + delta.toString() + 's ' + resp.retryCount + ' retries]';\n          if (ansi) message += '\\x1B[0;1m';\n          message += ' ' + AWS.util.string.lowerFirst(req.operation);\n          message += '(' + params + ')';\n          if (ansi) message += '\\x1B[0m';\n          return message;\n        }\n  \n        var line = buildMessage();\n        if (typeof logger.log === 'function') {\n          logger.log(line);\n        } else if (typeof logger.write === 'function') {\n          logger.write(line + '\\n');\n        }\n      });\n    }),\n  \n    Json: new SequentialExecutor().addNamedListeners(function(add) {\n      var svc = require('./protocol/json');\n      add('BUILD', 'build', svc.buildRequest);\n      add('EXTRACT_DATA', 'extractData', svc.extractData);\n      add('EXTRACT_ERROR', 'extractError', svc.extractError);\n    }),\n  \n    Rest: new SequentialExecutor().addNamedListeners(function(add) {\n      var svc = require('./protocol/rest');\n      add('BUILD', 'build', svc.buildRequest);\n      add('EXTRACT_DATA', 'extractData', svc.extractData);\n      add('EXTRACT_ERROR', 'extractError', svc.extractError);\n    }),\n  \n    RestJson: new SequentialExecutor().addNamedListeners(function(add) {\n      var svc = require('./protocol/rest_json');\n      add('BUILD', 'build', svc.buildRequest);\n      add('EXTRACT_DATA', 'extractData', svc.extractData);\n      add('EXTRACT_ERROR', 'extractError', svc.extractError);\n    }),\n  \n    RestXml: new SequentialExecutor().addNamedListeners(function(add) {\n      var svc = require('./protocol/rest_xml');\n      add('BUILD', 'build', svc.buildRequest);\n      add('EXTRACT_DATA', 'extractData', svc.extractData);\n      add('EXTRACT_ERROR', 'extractError', svc.extractError);\n    }),\n  \n    Query: new SequentialExecutor().addNamedListeners(function(add) {\n      var svc = require('./protocol/query');\n      add('BUILD', 'build', svc.buildRequest);\n      add('EXTRACT_DATA', 'extractData', svc.extractData);\n      add('EXTRACT_ERROR', 'extractError', svc.extractError);\n    })\n  };\n  \n  },{\"./core\":18,\"./discover_endpoint\":26,\"./protocol/json\":46,\"./protocol/query\":47,\"./protocol/rest\":48,\"./protocol/rest_json\":49,\"./protocol/rest_xml\":50,\"./sequential_executor\":58,\"util\":97}],34:[function(require,module,exports){\n  var AWS = require('./core');\n  var inherit = AWS.util.inherit;\n  \n  /**\n   * The endpoint that a service will talk to, for example,\n   * `'https://ec2.ap-southeast-1.amazonaws.com'`. If\n   * you need to override an endpoint for a service, you can\n   * set the endpoint on a service by passing the endpoint\n   * object with the `endpoint` option key:\n   *\n   * ```javascript\n   * var ep = new AWS.Endpoint('awsproxy.example.com');\n   * var s3 = new AWS.S3({endpoint: ep});\n   * s3.service.endpoint.hostname == 'awsproxy.example.com'\n   * ```\n   *\n   * Note that if you do not specify a protocol, the protocol will\n   * be selected based on your current {AWS.config} configuration.\n   *\n   * @!attribute protocol\n   *   @return [String] the protocol (http or https) of the endpoint\n   *     URL\n   * @!attribute hostname\n   *   @return [String] the host portion of the endpoint, e.g.,\n   *     example.com\n   * @!attribute host\n   *   @return [String] the host portion of the endpoint including\n   *     the port, e.g., example.com:80\n   * @!attribute port\n   *   @return [Integer] the port of the endpoint\n   * @!attribute href\n   *   @return [String] the full URL of the endpoint\n   */\n  AWS.Endpoint = inherit({\n  \n    /**\n     * @overload Endpoint(endpoint)\n     *   Constructs a new endpoint given an endpoint URL. If the\n     *   URL omits a protocol (http or https), the default protocol\n     *   set in the global {AWS.config} will be used.\n     *   @param endpoint [String] the URL to construct an endpoint from\n     */\n    constructor: function Endpoint(endpoint, config) {\n      AWS.util.hideProperties(this, ['slashes', 'auth', 'hash', 'search', 'query']);\n  \n      if (typeof endpoint === 'undefined' || endpoint === null) {\n        throw new Error('Invalid endpoint: ' + endpoint);\n      } else if (typeof endpoint !== 'string') {\n        return AWS.util.copy(endpoint);\n      }\n  \n      if (!endpoint.match(/^http/)) {\n        var useSSL = config && config.sslEnabled !== undefined ?\n          config.sslEnabled : AWS.config.sslEnabled;\n        endpoint = (useSSL ? 'https' : 'http') + '://' + endpoint;\n      }\n  \n      AWS.util.update(this, AWS.util.urlParse(endpoint));\n  \n      // Ensure the port property is set as an integer\n      if (this.port) {\n        this.port = parseInt(this.port, 10);\n      } else {\n        this.port = this.protocol === 'https:' ? 443 : 80;\n      }\n    }\n  \n  });\n  \n  /**\n   * The low level HTTP request object, encapsulating all HTTP header\n   * and body data sent by a service request.\n   *\n   * @!attribute method\n   *   @return [String] the HTTP method of the request\n   * @!attribute path\n   *   @return [String] the path portion of the URI, e.g.,\n   *     \"/list/?start=5&num=10\"\n   * @!attribute headers\n   *   @return [map<String,String>]\n   *     a map of header keys and their respective values\n   * @!attribute body\n   *   @return [String] the request body payload\n   * @!attribute endpoint\n   *   @return [AWS.Endpoint] the endpoint for the request\n   * @!attribute region\n   *   @api private\n   *   @return [String] the region, for signing purposes only.\n   */\n  AWS.HttpRequest = inherit({\n  \n    /**\n     * @api private\n     */\n    constructor: function HttpRequest(endpoint, region) {\n      endpoint = new AWS.Endpoint(endpoint);\n      this.method = 'POST';\n      this.path = endpoint.path || '/';\n      this.headers = {};\n      this.body = '';\n      this.endpoint = endpoint;\n      this.region = region;\n      this._userAgent = '';\n      this.setUserAgent();\n    },\n  \n    /**\n     * @api private\n     */\n    setUserAgent: function setUserAgent() {\n      this._userAgent = this.headers[this.getUserAgentHeaderName()] = AWS.util.userAgent();\n    },\n  \n    getUserAgentHeaderName: function getUserAgentHeaderName() {\n      var prefix = AWS.util.isBrowser() ? 'X-Amz-' : '';\n      return prefix + 'User-Agent';\n    },\n  \n    /**\n     * @api private\n     */\n    appendToUserAgent: function appendToUserAgent(agentPartial) {\n      if (typeof agentPartial === 'string' && agentPartial) {\n        this._userAgent += ' ' + agentPartial;\n      }\n      this.headers[this.getUserAgentHeaderName()] = this._userAgent;\n    },\n  \n    /**\n     * @api private\n     */\n    getUserAgent: function getUserAgent() {\n      return this._userAgent;\n    },\n  \n    /**\n     * @return [String] the part of the {path} excluding the\n     *   query string\n     */\n    pathname: function pathname() {\n      return this.path.split('?', 1)[0];\n    },\n  \n    /**\n     * @return [String] the query string portion of the {path}\n     */\n    search: function search() {\n      var query = this.path.split('?', 2)[1];\n      if (query) {\n        query = AWS.util.queryStringParse(query);\n        return AWS.util.queryParamsToString(query);\n      }\n      return '';\n    },\n  \n    /**\n     * @api private\n     * update httpRequest endpoint with endpoint string\n     */\n    updateEndpoint: function updateEndpoint(endpointStr) {\n      var newEndpoint = new AWS.Endpoint(endpointStr);\n      this.endpoint = newEndpoint;\n      this.path = newEndpoint.path || '/';\n    }\n  });\n  \n  /**\n   * The low level HTTP response object, encapsulating all HTTP header\n   * and body data returned from the request.\n   *\n   * @!attribute statusCode\n   *   @return [Integer] the HTTP status code of the response (e.g., 200, 404)\n   * @!attribute headers\n   *   @return [map<String,String>]\n   *      a map of response header keys and their respective values\n   * @!attribute body\n   *   @return [String] the response body payload\n   * @!attribute [r] streaming\n   *   @return [Boolean] whether this response is being streamed at a low-level.\n   *     Defaults to `false` (buffered reads). Do not modify this manually, use\n   *     {createUnbufferedStream} to convert the stream to unbuffered mode\n   *     instead.\n   */\n  AWS.HttpResponse = inherit({\n  \n    /**\n     * @api private\n     */\n    constructor: function HttpResponse() {\n      this.statusCode = undefined;\n      this.headers = {};\n      this.body = undefined;\n      this.streaming = false;\n      this.stream = null;\n    },\n  \n    /**\n     * Disables buffering on the HTTP response and returns the stream for reading.\n     * @return [Stream, XMLHttpRequest, null] the underlying stream object.\n     *   Use this object to directly read data off of the stream.\n     * @note This object is only available after the {AWS.Request~httpHeaders}\n     *   event has fired. This method must be called prior to\n     *   {AWS.Request~httpData}.\n     * @example Taking control of a stream\n     *   request.on('httpHeaders', function(statusCode, headers) {\n     *     if (statusCode < 300) {\n     *       if (headers.etag === 'xyz') {\n     *         // pipe the stream, disabling buffering\n     *         var stream = this.response.httpResponse.createUnbufferedStream();\n     *         stream.pipe(process.stdout);\n     *       } else { // abort this request and set a better error message\n     *         this.abort();\n     *         this.response.error = new Error('Invalid ETag');\n     *       }\n     *     }\n     *   }).send(console.log);\n     */\n    createUnbufferedStream: function createUnbufferedStream() {\n      this.streaming = true;\n      return this.stream;\n    }\n  });\n  \n  \n  AWS.HttpClient = inherit({});\n  \n  /**\n   * @api private\n   */\n  AWS.HttpClient.getInstance = function getInstance() {\n    if (this.singleton === undefined) {\n      this.singleton = new this();\n    }\n    return this.singleton;\n  };\n  \n  },{\"./core\":18}],35:[function(require,module,exports){\n  var AWS = require('../core');\n  var EventEmitter = require('events').EventEmitter;\n  require('../http');\n  \n  /**\n   * @api private\n   */\n  AWS.XHRClient = AWS.util.inherit({\n    handleRequest: function handleRequest(httpRequest, httpOptions, callback, errCallback) {\n      var self = this;\n      var endpoint = httpRequest.endpoint;\n      var emitter = new EventEmitter();\n      var href = endpoint.protocol + '//' + endpoint.hostname;\n      if (endpoint.port !== 80 && endpoint.port !== 443) {\n        href += ':' + endpoint.port;\n      }\n      href += httpRequest.path;\n  \n      var xhr = new XMLHttpRequest(), headersEmitted = false;\n      httpRequest.stream = xhr;\n  \n      xhr.addEventListener('readystatechange', function() {\n        try {\n          if (xhr.status === 0) return; // 0 code is invalid\n        } catch (e) { return; }\n  \n        if (this.readyState >= this.HEADERS_RECEIVED && !headersEmitted) {\n          emitter.statusCode = xhr.status;\n          emitter.headers = self.parseHeaders(xhr.getAllResponseHeaders());\n          emitter.emit(\n            'headers',\n            emitter.statusCode,\n            emitter.headers,\n            xhr.statusText\n          );\n          headersEmitted = true;\n        }\n        if (this.readyState === this.DONE) {\n          self.finishRequest(xhr, emitter);\n        }\n      }, false);\n      xhr.upload.addEventListener('progress', function (evt) {\n        emitter.emit('sendProgress', evt);\n      });\n      xhr.addEventListener('progress', function (evt) {\n        emitter.emit('receiveProgress', evt);\n      }, false);\n      xhr.addEventListener('timeout', function () {\n        errCallback(AWS.util.error(new Error('Timeout'), {code: 'TimeoutError'}));\n      }, false);\n      xhr.addEventListener('error', function () {\n        errCallback(AWS.util.error(new Error('Network Failure'), {\n          code: 'NetworkingError'\n        }));\n      }, false);\n      xhr.addEventListener('abort', function () {\n        errCallback(AWS.util.error(new Error('Request aborted'), {\n          code: 'RequestAbortedError'\n        }));\n      }, false);\n  \n      callback(emitter);\n      xhr.open(httpRequest.method, href, httpOptions.xhrAsync !== false);\n      AWS.util.each(httpRequest.headers, function (key, value) {\n        if (key !== 'Content-Length' && key !== 'User-Agent' && key !== 'Host') {\n          xhr.setRequestHeader(key, value);\n        }\n      });\n  \n      if (httpOptions.timeout && httpOptions.xhrAsync !== false) {\n        xhr.timeout = httpOptions.timeout;\n      }\n  \n      if (httpOptions.xhrWithCredentials) {\n        xhr.withCredentials = true;\n      }\n      try { xhr.responseType = 'arraybuffer'; } catch (e) {}\n  \n      try {\n        if (httpRequest.body) {\n          xhr.send(httpRequest.body);\n        } else {\n          xhr.send();\n        }\n      } catch (err) {\n        if (httpRequest.body && typeof httpRequest.body.buffer === 'object') {\n          xhr.send(httpRequest.body.buffer); // send ArrayBuffer directly\n        } else {\n          throw err;\n        }\n      }\n  \n      return emitter;\n    },\n  \n    parseHeaders: function parseHeaders(rawHeaders) {\n      var headers = {};\n      AWS.util.arrayEach(rawHeaders.split(/\\r?\\n/), function (line) {\n        var key = line.split(':', 1)[0];\n        var value = line.substring(key.length + 2);\n        if (key.length > 0) headers[key.toLowerCase()] = value;\n      });\n      return headers;\n    },\n  \n    finishRequest: function finishRequest(xhr, emitter) {\n      var buffer;\n      if (xhr.responseType === 'arraybuffer' && xhr.response) {\n        var ab = xhr.response;\n        buffer = new AWS.util.Buffer(ab.byteLength);\n        var view = new Uint8Array(ab);\n        for (var i = 0; i < buffer.length; ++i) {\n          buffer[i] = view[i];\n        }\n      }\n  \n      try {\n        if (!buffer && typeof xhr.responseText === 'string') {\n          buffer = new AWS.util.Buffer(xhr.responseText);\n        }\n      } catch (e) {}\n  \n      if (buffer) emitter.emit('data', buffer);\n      emitter.emit('end');\n    }\n  });\n  \n  /**\n   * @api private\n   */\n  AWS.HttpClient.prototype = AWS.XHRClient.prototype;\n  \n  /**\n   * @api private\n   */\n  AWS.HttpClient.streamsApiVersion = 1;\n  \n  },{\"../core\":18,\"../http\":34,\"events\":81}],36:[function(require,module,exports){\n  var util = require('../util');\n  \n  function JsonBuilder() { }\n  \n  JsonBuilder.prototype.build = function(value, shape) {\n    return JSON.stringify(translate(value, shape));\n  };\n  \n  function translate(value, shape) {\n    if (!shape || value === undefined || value === null) return undefined;\n  \n    switch (shape.type) {\n      case 'structure': return translateStructure(value, shape);\n      case 'map': return translateMap(value, shape);\n      case 'list': return translateList(value, shape);\n      default: return translateScalar(value, shape);\n    }\n  }\n  \n  function translateStructure(structure, shape) {\n    var struct = {};\n    util.each(structure, function(name, value) {\n      var memberShape = shape.members[name];\n      if (memberShape) {\n        if (memberShape.location !== 'body') return;\n        var locationName = memberShape.isLocationName ? memberShape.name : name;\n        var result = translate(value, memberShape);\n        if (result !== undefined) struct[locationName] = result;\n      }\n    });\n    return struct;\n  }\n  \n  function translateList(list, shape) {\n    var out = [];\n    util.arrayEach(list, function(value) {\n      var result = translate(value, shape.member);\n      if (result !== undefined) out.push(result);\n    });\n    return out;\n  }\n  \n  function translateMap(map, shape) {\n    var out = {};\n    util.each(map, function(key, value) {\n      var result = translate(value, shape.value);\n      if (result !== undefined) out[key] = result;\n    });\n    return out;\n  }\n  \n  function translateScalar(value, shape) {\n    return shape.toWireFormat(value);\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = JsonBuilder;\n  \n  },{\"../util\":71}],37:[function(require,module,exports){\n  var util = require('../util');\n  \n  function JsonParser() { }\n  \n  JsonParser.prototype.parse = function(value, shape) {\n    return translate(JSON.parse(value), shape);\n  };\n  \n  function translate(value, shape) {\n    if (!shape || value === undefined) return undefined;\n  \n    switch (shape.type) {\n      case 'structure': return translateStructure(value, shape);\n      case 'map': return translateMap(value, shape);\n      case 'list': return translateList(value, shape);\n      default: return translateScalar(value, shape);\n    }\n  }\n  \n  function translateStructure(structure, shape) {\n    if (structure == null) return undefined;\n  \n    var struct = {};\n    var shapeMembers = shape.members;\n    util.each(shapeMembers, function(name, memberShape) {\n      var locationName = memberShape.isLocationName ? memberShape.name : name;\n      if (Object.prototype.hasOwnProperty.call(structure, locationName)) {\n        var value = structure[locationName];\n        var result = translate(value, memberShape);\n        if (result !== undefined) struct[name] = result;\n      }\n    });\n    return struct;\n  }\n  \n  function translateList(list, shape) {\n    if (list == null) return undefined;\n  \n    var out = [];\n    util.arrayEach(list, function(value) {\n      var result = translate(value, shape.member);\n      if (result === undefined) out.push(null);\n      else out.push(result);\n    });\n    return out;\n  }\n  \n  function translateMap(map, shape) {\n    if (map == null) return undefined;\n  \n    var out = {};\n    util.each(map, function(key, value) {\n      var result = translate(value, shape.value);\n      if (result === undefined) out[key] = null;\n      else out[key] = result;\n    });\n    return out;\n  }\n  \n  function translateScalar(value, shape) {\n    return shape.toType(value);\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = JsonParser;\n  \n  },{\"../util\":71}],38:[function(require,module,exports){\n  var Collection = require('./collection');\n  var Operation = require('./operation');\n  var Shape = require('./shape');\n  var Paginator = require('./paginator');\n  var ResourceWaiter = require('./resource_waiter');\n  \n  var util = require('../util');\n  var property = util.property;\n  var memoizedProperty = util.memoizedProperty;\n  \n  function Api(api, options) {\n    var self = this;\n    api = api || {};\n    options = options || {};\n    options.api = this;\n  \n    api.metadata = api.metadata || {};\n  \n    property(this, 'isApi', true, false);\n    property(this, 'apiVersion', api.metadata.apiVersion);\n    property(this, 'endpointPrefix', api.metadata.endpointPrefix);\n    property(this, 'signingName', api.metadata.signingName);\n    property(this, 'globalEndpoint', api.metadata.globalEndpoint);\n    property(this, 'signatureVersion', api.metadata.signatureVersion);\n    property(this, 'jsonVersion', api.metadata.jsonVersion);\n    property(this, 'targetPrefix', api.metadata.targetPrefix);\n    property(this, 'protocol', api.metadata.protocol);\n    property(this, 'timestampFormat', api.metadata.timestampFormat);\n    property(this, 'xmlNamespaceUri', api.metadata.xmlNamespace);\n    property(this, 'abbreviation', api.metadata.serviceAbbreviation);\n    property(this, 'fullName', api.metadata.serviceFullName);\n    property(this, 'serviceId', api.metadata.serviceId);\n  \n    memoizedProperty(this, 'className', function() {\n      var name = api.metadata.serviceAbbreviation || api.metadata.serviceFullName;\n      if (!name) return null;\n  \n      name = name.replace(/^Amazon|AWS\\s*|\\(.*|\\s+|\\W+/g, '');\n      if (name === 'ElasticLoadBalancing') name = 'ELB';\n      return name;\n    });\n  \n    function addEndpointOperation(name, operation) {\n      if (operation.endpointoperation === true) {\n        property(self, 'endpointOperation', util.string.lowerFirst(name));\n      }\n    }\n  \n    property(this, 'operations', new Collection(api.operations, options, function(name, operation) {\n      return new Operation(name, operation, options);\n    }, util.string.lowerFirst, addEndpointOperation));\n  \n    property(this, 'shapes', new Collection(api.shapes, options, function(name, shape) {\n      return Shape.create(shape, options);\n    }));\n  \n    property(this, 'paginators', new Collection(api.paginators, options, function(name, paginator) {\n      return new Paginator(name, paginator, options);\n    }));\n  \n    property(this, 'waiters', new Collection(api.waiters, options, function(name, waiter) {\n      return new ResourceWaiter(name, waiter, options);\n    }, util.string.lowerFirst));\n  \n    if (options.documentation) {\n      property(this, 'documentation', api.documentation);\n      property(this, 'documentationUrl', api.documentationUrl);\n    }\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = Api;\n  \n  },{\"../util\":71,\"./collection\":39,\"./operation\":40,\"./paginator\":41,\"./resource_waiter\":42,\"./shape\":43}],39:[function(require,module,exports){\n  var memoizedProperty = require('../util').memoizedProperty;\n  \n  function memoize(name, value, factory, nameTr) {\n    memoizedProperty(this, nameTr(name), function() {\n      return factory(name, value);\n    });\n  }\n  \n  function Collection(iterable, options, factory, nameTr, callback) {\n    nameTr = nameTr || String;\n    var self = this;\n  \n    for (var id in iterable) {\n      if (Object.prototype.hasOwnProperty.call(iterable, id)) {\n        memoize.call(self, id, iterable[id], factory, nameTr);\n        if (callback) callback(id, iterable[id]);\n      }\n    }\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = Collection;\n  \n  },{\"../util\":71}],40:[function(require,module,exports){\n  var Shape = require('./shape');\n  \n  var util = require('../util');\n  var property = util.property;\n  var memoizedProperty = util.memoizedProperty;\n  \n  function Operation(name, operation, options) {\n    var self = this;\n    options = options || {};\n  \n    property(this, 'name', operation.name || name);\n    property(this, 'api', options.api, false);\n  \n    operation.http = operation.http || {};\n    property(this, 'endpoint', operation.endpoint);\n    property(this, 'httpMethod', operation.http.method || 'POST');\n    property(this, 'httpPath', operation.http.requestUri || '/');\n    property(this, 'authtype', operation.authtype || '');\n    property(\n      this,\n      'endpointDiscoveryRequired',\n      operation.endpointdiscovery ?\n        (operation.endpointdiscovery.required ? 'REQUIRED' : 'OPTIONAL') :\n      'NULL'\n    );\n  \n    memoizedProperty(this, 'input', function() {\n      if (!operation.input) {\n        return new Shape.create({type: 'structure'}, options);\n      }\n      return Shape.create(operation.input, options);\n    });\n  \n    memoizedProperty(this, 'output', function() {\n      if (!operation.output) {\n        return new Shape.create({type: 'structure'}, options);\n      }\n      return Shape.create(operation.output, options);\n    });\n  \n    memoizedProperty(this, 'errors', function() {\n      var list = [];\n      if (!operation.errors) return null;\n  \n      for (var i = 0; i < operation.errors.length; i++) {\n        list.push(Shape.create(operation.errors[i], options));\n      }\n  \n      return list;\n    });\n  \n    memoizedProperty(this, 'paginator', function() {\n      return options.api.paginators[name];\n    });\n  \n    if (options.documentation) {\n      property(this, 'documentation', operation.documentation);\n      property(this, 'documentationUrl', operation.documentationUrl);\n    }\n  \n    // idempotentMembers only tracks top-level input shapes\n    memoizedProperty(this, 'idempotentMembers', function() {\n      var idempotentMembers = [];\n      var input = self.input;\n      var members = input.members;\n      if (!input.members) {\n        return idempotentMembers;\n      }\n      for (var name in members) {\n        if (!members.hasOwnProperty(name)) {\n          continue;\n        }\n        if (members[name].isIdempotent === true) {\n          idempotentMembers.push(name);\n        }\n      }\n      return idempotentMembers;\n    });\n  \n    memoizedProperty(this, 'hasEventOutput', function() {\n      var output = self.output;\n      return hasEventStream(output);\n    });\n  }\n  \n  function hasEventStream(topLevelShape) {\n    var members = topLevelShape.members;\n    var payload = topLevelShape.payload;\n  \n    if (!topLevelShape.members) {\n      return false;\n    }\n  \n    if (payload) {\n      var payloadMember = members[payload];\n      return payloadMember.isEventStream;\n    }\n  \n    // check if any member is an event stream\n    for (var name in members) {\n      if (!members.hasOwnProperty(name)) {\n        if (members[name].isEventStream === true) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = Operation;\n  \n  },{\"../util\":71,\"./shape\":43}],41:[function(require,module,exports){\n  var property = require('../util').property;\n  \n  function Paginator(name, paginator) {\n    property(this, 'inputToken', paginator.input_token);\n    property(this, 'limitKey', paginator.limit_key);\n    property(this, 'moreResults', paginator.more_results);\n    property(this, 'outputToken', paginator.output_token);\n    property(this, 'resultKey', paginator.result_key);\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = Paginator;\n  \n  },{\"../util\":71}],42:[function(require,module,exports){\n  var util = require('../util');\n  var property = util.property;\n  \n  function ResourceWaiter(name, waiter, options) {\n    options = options || {};\n    property(this, 'name', name);\n    property(this, 'api', options.api, false);\n  \n    if (waiter.operation) {\n      property(this, 'operation', util.string.lowerFirst(waiter.operation));\n    }\n  \n    var self = this;\n    var keys = [\n      'type',\n      'description',\n      'delay',\n      'maxAttempts',\n      'acceptors'\n    ];\n  \n    keys.forEach(function(key) {\n      var value = waiter[key];\n      if (value) {\n        property(self, key, value);\n      }\n    });\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = ResourceWaiter;\n  \n  },{\"../util\":71}],43:[function(require,module,exports){\n  var Collection = require('./collection');\n  \n  var util = require('../util');\n  \n  function property(obj, name, value) {\n    if (value !== null && value !== undefined) {\n      util.property.apply(this, arguments);\n    }\n  }\n  \n  function memoizedProperty(obj, name) {\n    if (!obj.constructor.prototype[name]) {\n      util.memoizedProperty.apply(this, arguments);\n    }\n  }\n  \n  function Shape(shape, options, memberName) {\n    options = options || {};\n  \n    property(this, 'shape', shape.shape);\n    property(this, 'api', options.api, false);\n    property(this, 'type', shape.type);\n    property(this, 'enum', shape.enum);\n    property(this, 'min', shape.min);\n    property(this, 'max', shape.max);\n    property(this, 'pattern', shape.pattern);\n    property(this, 'location', shape.location || this.location || 'body');\n    property(this, 'name', this.name || shape.xmlName || shape.queryName ||\n      shape.locationName || memberName);\n    property(this, 'isStreaming', shape.streaming || this.isStreaming || false);\n    property(this, 'requiresLength', shape.requiresLength, false);\n    property(this, 'isComposite', shape.isComposite || false);\n    property(this, 'isShape', true, false);\n    property(this, 'isQueryName', Boolean(shape.queryName), false);\n    property(this, 'isLocationName', Boolean(shape.locationName), false);\n    property(this, 'isIdempotent', shape.idempotencyToken === true);\n    property(this, 'isJsonValue', shape.jsonvalue === true);\n    property(this, 'isSensitive', shape.sensitive === true || shape.prototype && shape.prototype.sensitive === true);\n    property(this, 'isEventStream', Boolean(shape.eventstream), false);\n    property(this, 'isEvent', Boolean(shape.event), false);\n    property(this, 'isEventPayload', Boolean(shape.eventpayload), false);\n    property(this, 'isEventHeader', Boolean(shape.eventheader), false);\n    property(this, 'isTimestampFormatSet', Boolean(shape.timestampFormat) || shape.prototype && shape.prototype.isTimestampFormatSet === true, false);\n    property(this, 'endpointDiscoveryId', Boolean(shape.endpointdiscoveryid), false);\n    property(this, 'hostLabel', Boolean(shape.hostLabel), false);\n  \n    if (options.documentation) {\n      property(this, 'documentation', shape.documentation);\n      property(this, 'documentationUrl', shape.documentationUrl);\n    }\n  \n    if (shape.xmlAttribute) {\n      property(this, 'isXmlAttribute', shape.xmlAttribute || false);\n    }\n  \n    // type conversion and parsing\n    property(this, 'defaultValue', null);\n    this.toWireFormat = function(value) {\n      if (value === null || value === undefined) return '';\n      return value;\n    };\n    this.toType = function(value) { return value; };\n  }\n  \n  /**\n   * @api private\n   */\n  Shape.normalizedTypes = {\n    character: 'string',\n    double: 'float',\n    long: 'integer',\n    short: 'integer',\n    biginteger: 'integer',\n    bigdecimal: 'float',\n    blob: 'binary'\n  };\n  \n  /**\n   * @api private\n   */\n  Shape.types = {\n    'structure': StructureShape,\n    'list': ListShape,\n    'map': MapShape,\n    'boolean': BooleanShape,\n    'timestamp': TimestampShape,\n    'float': FloatShape,\n    'integer': IntegerShape,\n    'string': StringShape,\n    'base64': Base64Shape,\n    'binary': BinaryShape\n  };\n  \n  Shape.resolve = function resolve(shape, options) {\n    if (shape.shape) {\n      var refShape = options.api.shapes[shape.shape];\n      if (!refShape) {\n        throw new Error('Cannot find shape reference: ' + shape.shape);\n      }\n  \n      return refShape;\n    } else {\n      return null;\n    }\n  };\n  \n  Shape.create = function create(shape, options, memberName) {\n    if (shape.isShape) return shape;\n  \n    var refShape = Shape.resolve(shape, options);\n    if (refShape) {\n      var filteredKeys = Object.keys(shape);\n      if (!options.documentation) {\n        filteredKeys = filteredKeys.filter(function(name) {\n          return !name.match(/documentation/);\n        });\n      }\n  \n      // create an inline shape with extra members\n      var InlineShape = function() {\n        refShape.constructor.call(this, shape, options, memberName);\n      };\n      InlineShape.prototype = refShape;\n      return new InlineShape();\n    } else {\n      // set type if not set\n      if (!shape.type) {\n        if (shape.members) shape.type = 'structure';\n        else if (shape.member) shape.type = 'list';\n        else if (shape.key) shape.type = 'map';\n        else shape.type = 'string';\n      }\n  \n      // normalize types\n      var origType = shape.type;\n      if (Shape.normalizedTypes[shape.type]) {\n        shape.type = Shape.normalizedTypes[shape.type];\n      }\n  \n      if (Shape.types[shape.type]) {\n        return new Shape.types[shape.type](shape, options, memberName);\n      } else {\n        throw new Error('Unrecognized shape type: ' + origType);\n      }\n    }\n  };\n  \n  function CompositeShape(shape) {\n    Shape.apply(this, arguments);\n    property(this, 'isComposite', true);\n  \n    if (shape.flattened) {\n      property(this, 'flattened', shape.flattened || false);\n    }\n  }\n  \n  function StructureShape(shape, options) {\n    var self = this;\n    var requiredMap = null, firstInit = !this.isShape;\n  \n    CompositeShape.apply(this, arguments);\n  \n    if (firstInit) {\n      property(this, 'defaultValue', function() { return {}; });\n      property(this, 'members', {});\n      property(this, 'memberNames', []);\n      property(this, 'required', []);\n      property(this, 'isRequired', function() { return false; });\n    }\n  \n    if (shape.members) {\n      property(this, 'members', new Collection(shape.members, options, function(name, member) {\n        return Shape.create(member, options, name);\n      }));\n      memoizedProperty(this, 'memberNames', function() {\n        return shape.xmlOrder || Object.keys(shape.members);\n      });\n  \n      if (shape.event) {\n        memoizedProperty(this, 'eventPayloadMemberName', function() {\n          var members = self.members;\n          var memberNames = self.memberNames;\n          // iterate over members to find ones that are event payloads\n          for (var i = 0, iLen = memberNames.length; i < iLen; i++) {\n            if (members[memberNames[i]].isEventPayload) {\n              return memberNames[i];\n            }\n          }\n        });\n  \n        memoizedProperty(this, 'eventHeaderMemberNames', function() {\n          var members = self.members;\n          var memberNames = self.memberNames;\n          var eventHeaderMemberNames = [];\n          // iterate over members to find ones that are event headers\n          for (var i = 0, iLen = memberNames.length; i < iLen; i++) {\n            if (members[memberNames[i]].isEventHeader) {\n              eventHeaderMemberNames.push(memberNames[i]);\n            }\n          }\n          return eventHeaderMemberNames;\n        });\n      }\n    }\n  \n    if (shape.required) {\n      property(this, 'required', shape.required);\n      property(this, 'isRequired', function(name) {\n        if (!requiredMap) {\n          requiredMap = {};\n          for (var i = 0; i < shape.required.length; i++) {\n            requiredMap[shape.required[i]] = true;\n          }\n        }\n  \n        return requiredMap[name];\n      }, false, true);\n    }\n  \n    property(this, 'resultWrapper', shape.resultWrapper || null);\n  \n    if (shape.payload) {\n      property(this, 'payload', shape.payload);\n    }\n  \n    if (typeof shape.xmlNamespace === 'string') {\n      property(this, 'xmlNamespaceUri', shape.xmlNamespace);\n    } else if (typeof shape.xmlNamespace === 'object') {\n      property(this, 'xmlNamespacePrefix', shape.xmlNamespace.prefix);\n      property(this, 'xmlNamespaceUri', shape.xmlNamespace.uri);\n    }\n  }\n  \n  function ListShape(shape, options) {\n    var self = this, firstInit = !this.isShape;\n    CompositeShape.apply(this, arguments);\n  \n    if (firstInit) {\n      property(this, 'defaultValue', function() { return []; });\n    }\n  \n    if (shape.member) {\n      memoizedProperty(this, 'member', function() {\n        return Shape.create(shape.member, options);\n      });\n    }\n  \n    if (this.flattened) {\n      var oldName = this.name;\n      memoizedProperty(this, 'name', function() {\n        return self.member.name || oldName;\n      });\n    }\n  }\n  \n  function MapShape(shape, options) {\n    var firstInit = !this.isShape;\n    CompositeShape.apply(this, arguments);\n  \n    if (firstInit) {\n      property(this, 'defaultValue', function() { return {}; });\n      property(this, 'key', Shape.create({type: 'string'}, options));\n      property(this, 'value', Shape.create({type: 'string'}, options));\n    }\n  \n    if (shape.key) {\n      memoizedProperty(this, 'key', function() {\n        return Shape.create(shape.key, options);\n      });\n    }\n    if (shape.value) {\n      memoizedProperty(this, 'value', function() {\n        return Shape.create(shape.value, options);\n      });\n    }\n  }\n  \n  function TimestampShape(shape) {\n    var self = this;\n    Shape.apply(this, arguments);\n  \n    if (shape.timestampFormat) {\n      property(this, 'timestampFormat', shape.timestampFormat);\n    } else if (self.isTimestampFormatSet && this.timestampFormat) {\n      property(this, 'timestampFormat', this.timestampFormat);\n    } else if (this.location === 'header') {\n      property(this, 'timestampFormat', 'rfc822');\n    } else if (this.location === 'querystring') {\n      property(this, 'timestampFormat', 'iso8601');\n    } else if (this.api) {\n      switch (this.api.protocol) {\n        case 'json':\n        case 'rest-json':\n          property(this, 'timestampFormat', 'unixTimestamp');\n          break;\n        case 'rest-xml':\n        case 'query':\n        case 'ec2':\n          property(this, 'timestampFormat', 'iso8601');\n          break;\n      }\n    }\n  \n    this.toType = function(value) {\n      if (value === null || value === undefined) return null;\n      if (typeof value.toUTCString === 'function') return value;\n      return typeof value === 'string' || typeof value === 'number' ?\n             util.date.parseTimestamp(value) : null;\n    };\n  \n    this.toWireFormat = function(value) {\n      return util.date.format(value, self.timestampFormat);\n    };\n  }\n  \n  function StringShape() {\n    Shape.apply(this, arguments);\n  \n    var nullLessProtocols = ['rest-xml', 'query', 'ec2'];\n    this.toType = function(value) {\n      value = this.api && nullLessProtocols.indexOf(this.api.protocol) > -1 ?\n        value || '' : value;\n      if (this.isJsonValue) {\n        return JSON.parse(value);\n      }\n  \n      return value && typeof value.toString === 'function' ?\n        value.toString() : value;\n    };\n  \n    this.toWireFormat = function(value) {\n      return this.isJsonValue ? JSON.stringify(value) : value;\n    };\n  }\n  \n  function FloatShape() {\n    Shape.apply(this, arguments);\n  \n    this.toType = function(value) {\n      if (value === null || value === undefined) return null;\n      return parseFloat(value);\n    };\n    this.toWireFormat = this.toType;\n  }\n  \n  function IntegerShape() {\n    Shape.apply(this, arguments);\n  \n    this.toType = function(value) {\n      if (value === null || value === undefined) return null;\n      return parseInt(value, 10);\n    };\n    this.toWireFormat = this.toType;\n  }\n  \n  function BinaryShape() {\n    Shape.apply(this, arguments);\n    this.toType = function(value) {\n      var buf = util.base64.decode(value);\n      if (this.isSensitive && util.isNode() && typeof util.Buffer.alloc === 'function') {\n    /* Node.js can create a Buffer that is not isolated.\n     * i.e. buf.byteLength !== buf.buffer.byteLength\n     * This means that the sensitive data is accessible to anyone with access to buf.buffer.\n     * If this is the node shared Buffer, then other code within this process _could_ find this secret.\n     * Copy sensitive data to an isolated Buffer and zero the sensitive data.\n     * While this is safe to do here, copying this code somewhere else may produce unexpected results.\n     */\n        var secureBuf = util.Buffer.alloc(buf.length, buf);\n        buf.fill(0);\n        buf = secureBuf;\n      }\n      return buf;\n    };\n    this.toWireFormat = util.base64.encode;\n  }\n  \n  function Base64Shape() {\n    BinaryShape.apply(this, arguments);\n  }\n  \n  function BooleanShape() {\n    Shape.apply(this, arguments);\n  \n    this.toType = function(value) {\n      if (typeof value === 'boolean') return value;\n      if (value === null || value === undefined) return null;\n      return value === 'true';\n    };\n  }\n  \n  /**\n   * @api private\n   */\n  Shape.shapes = {\n    StructureShape: StructureShape,\n    ListShape: ListShape,\n    MapShape: MapShape,\n    StringShape: StringShape,\n    BooleanShape: BooleanShape,\n    Base64Shape: Base64Shape\n  };\n  \n  /**\n   * @api private\n   */\n  module.exports = Shape;\n  \n  },{\"../util\":71,\"./collection\":39}],44:[function(require,module,exports){\n  var AWS = require('./core');\n  \n  /**\n   * @api private\n   */\n  AWS.ParamValidator = AWS.util.inherit({\n    /**\n     * Create a new validator object.\n     *\n     * @param validation [Boolean|map] whether input parameters should be\n     *     validated against the operation description before sending the\n     *     request. Pass a map to enable any of the following specific\n     *     validation features:\n     *\n     *     * **min** [Boolean] &mdash; Validates that a value meets the min\n     *       constraint. This is enabled by default when paramValidation is set\n     *       to `true`.\n     *     * **max** [Boolean] &mdash; Validates that a value meets the max\n     *       constraint.\n     *     * **pattern** [Boolean] &mdash; Validates that a string value matches a\n     *       regular expression.\n     *     * **enum** [Boolean] &mdash; Validates that a string value matches one\n     *       of the allowable enum values.\n     */\n    constructor: function ParamValidator(validation) {\n      if (validation === true || validation === undefined) {\n        validation = {'min': true};\n      }\n      this.validation = validation;\n    },\n  \n    validate: function validate(shape, params, context) {\n      this.errors = [];\n      this.validateMember(shape, params || {}, context || 'params');\n  \n      if (this.errors.length > 1) {\n        var msg = this.errors.join('\\n* ');\n        msg = 'There were ' + this.errors.length +\n          ' validation errors:\\n* ' + msg;\n        throw AWS.util.error(new Error(msg),\n          {code: 'MultipleValidationErrors', errors: this.errors});\n      } else if (this.errors.length === 1) {\n        throw this.errors[0];\n      } else {\n        return true;\n      }\n    },\n  \n    fail: function fail(code, message) {\n      this.errors.push(AWS.util.error(new Error(message), {code: code}));\n    },\n  \n    validateStructure: function validateStructure(shape, params, context) {\n      this.validateType(params, context, ['object'], 'structure');\n  \n      var paramName;\n      for (var i = 0; shape.required && i < shape.required.length; i++) {\n        paramName = shape.required[i];\n        var value = params[paramName];\n        if (value === undefined || value === null) {\n          this.fail('MissingRequiredParameter',\n            'Missing required key \\'' + paramName + '\\' in ' + context);\n        }\n      }\n  \n      // validate hash members\n      for (paramName in params) {\n        if (!Object.prototype.hasOwnProperty.call(params, paramName)) continue;\n  \n        var paramValue = params[paramName],\n            memberShape = shape.members[paramName];\n  \n        if (memberShape !== undefined) {\n          var memberContext = [context, paramName].join('.');\n          this.validateMember(memberShape, paramValue, memberContext);\n        } else {\n          this.fail('UnexpectedParameter',\n            'Unexpected key \\'' + paramName + '\\' found in ' + context);\n        }\n      }\n  \n      return true;\n    },\n  \n    validateMember: function validateMember(shape, param, context) {\n      switch (shape.type) {\n        case 'structure':\n          return this.validateStructure(shape, param, context);\n        case 'list':\n          return this.validateList(shape, param, context);\n        case 'map':\n          return this.validateMap(shape, param, context);\n        default:\n          return this.validateScalar(shape, param, context);\n      }\n    },\n  \n    validateList: function validateList(shape, params, context) {\n      if (this.validateType(params, context, [Array])) {\n        this.validateRange(shape, params.length, context, 'list member count');\n        // validate array members\n        for (var i = 0; i < params.length; i++) {\n          this.validateMember(shape.member, params[i], context + '[' + i + ']');\n        }\n      }\n    },\n  \n    validateMap: function validateMap(shape, params, context) {\n      if (this.validateType(params, context, ['object'], 'map')) {\n        // Build up a count of map members to validate range traits.\n        var mapCount = 0;\n        for (var param in params) {\n          if (!Object.prototype.hasOwnProperty.call(params, param)) continue;\n          // Validate any map key trait constraints\n          this.validateMember(shape.key, param,\n                              context + '[key=\\'' + param + '\\']');\n          this.validateMember(shape.value, params[param],\n                              context + '[\\'' + param + '\\']');\n          mapCount++;\n        }\n        this.validateRange(shape, mapCount, context, 'map member count');\n      }\n    },\n  \n    validateScalar: function validateScalar(shape, value, context) {\n      switch (shape.type) {\n        case null:\n        case undefined:\n        case 'string':\n          return this.validateString(shape, value, context);\n        case 'base64':\n        case 'binary':\n          return this.validatePayload(value, context);\n        case 'integer':\n        case 'float':\n          return this.validateNumber(shape, value, context);\n        case 'boolean':\n          return this.validateType(value, context, ['boolean']);\n        case 'timestamp':\n          return this.validateType(value, context, [Date,\n            /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$/, 'number'],\n            'Date object, ISO-8601 string, or a UNIX timestamp');\n        default:\n          return this.fail('UnkownType', 'Unhandled type ' +\n                           shape.type + ' for ' + context);\n      }\n    },\n  \n    validateString: function validateString(shape, value, context) {\n      var validTypes = ['string'];\n      if (shape.isJsonValue) {\n        validTypes = validTypes.concat(['number', 'object', 'boolean']);\n      }\n      if (value !== null && this.validateType(value, context, validTypes)) {\n        this.validateEnum(shape, value, context);\n        this.validateRange(shape, value.length, context, 'string length');\n        this.validatePattern(shape, value, context);\n        this.validateUri(shape, value, context);\n      }\n    },\n  \n    validateUri: function validateUri(shape, value, context) {\n      if (shape['location'] === 'uri') {\n        if (value.length === 0) {\n          this.fail('UriParameterError', 'Expected uri parameter to have length >= 1,'\n            + ' but found \"' + value +'\" for ' + context);\n        }\n      }\n    },\n  \n    validatePattern: function validatePattern(shape, value, context) {\n      if (this.validation['pattern'] && shape['pattern'] !== undefined) {\n        if (!(new RegExp(shape['pattern'])).test(value)) {\n          this.fail('PatternMatchError', 'Provided value \"' + value + '\" '\n            + 'does not match regex pattern /' + shape['pattern'] + '/ for '\n            + context);\n        }\n      }\n    },\n  \n    validateRange: function validateRange(shape, value, context, descriptor) {\n      if (this.validation['min']) {\n        if (shape['min'] !== undefined && value < shape['min']) {\n          this.fail('MinRangeError', 'Expected ' + descriptor + ' >= '\n            + shape['min'] + ', but found ' + value + ' for ' + context);\n        }\n      }\n      if (this.validation['max']) {\n        if (shape['max'] !== undefined && value > shape['max']) {\n          this.fail('MaxRangeError', 'Expected ' + descriptor + ' <= '\n            + shape['max'] + ', but found ' + value + ' for ' + context);\n        }\n      }\n    },\n  \n    validateEnum: function validateRange(shape, value, context) {\n      if (this.validation['enum'] && shape['enum'] !== undefined) {\n        // Fail if the string value is not present in the enum list\n        if (shape['enum'].indexOf(value) === -1) {\n          this.fail('EnumError', 'Found string value of ' + value + ', but '\n            + 'expected ' + shape['enum'].join('|') + ' for ' + context);\n        }\n      }\n    },\n  \n    validateType: function validateType(value, context, acceptedTypes, type) {\n      // We will not log an error for null or undefined, but we will return\n      // false so that callers know that the expected type was not strictly met.\n      if (value === null || value === undefined) return false;\n  \n      var foundInvalidType = false;\n      for (var i = 0; i < acceptedTypes.length; i++) {\n        if (typeof acceptedTypes[i] === 'string') {\n          if (typeof value === acceptedTypes[i]) return true;\n        } else if (acceptedTypes[i] instanceof RegExp) {\n          if ((value || '').toString().match(acceptedTypes[i])) return true;\n        } else {\n          if (value instanceof acceptedTypes[i]) return true;\n          if (AWS.util.isType(value, acceptedTypes[i])) return true;\n          if (!type && !foundInvalidType) acceptedTypes = acceptedTypes.slice();\n          acceptedTypes[i] = AWS.util.typeName(acceptedTypes[i]);\n        }\n        foundInvalidType = true;\n      }\n  \n      var acceptedType = type;\n      if (!acceptedType) {\n        acceptedType = acceptedTypes.join(', ').replace(/,([^,]+)$/, ', or$1');\n      }\n  \n      var vowel = acceptedType.match(/^[aeiou]/i) ? 'n' : '';\n      this.fail('InvalidParameterType', 'Expected ' + context + ' to be a' +\n                vowel + ' ' + acceptedType);\n      return false;\n    },\n  \n    validateNumber: function validateNumber(shape, value, context) {\n      if (value === null || value === undefined) return;\n      if (typeof value === 'string') {\n        var castedValue = parseFloat(value);\n        if (castedValue.toString() === value) value = castedValue;\n      }\n      if (this.validateType(value, context, ['number'])) {\n        this.validateRange(shape, value, context, 'numeric value');\n      }\n    },\n  \n    validatePayload: function validatePayload(value, context) {\n      if (value === null || value === undefined) return;\n      if (typeof value === 'string') return;\n      if (value && typeof value.byteLength === 'number') return; // typed arrays\n      if (AWS.util.isNode()) { // special check for buffer/stream in Node.js\n        var Stream = AWS.util.stream.Stream;\n        if (AWS.util.Buffer.isBuffer(value) || value instanceof Stream) return;\n      } else {\n        if (typeof Blob !== void 0 && value instanceof Blob) return;\n      }\n  \n      var types = ['Buffer', 'Stream', 'File', 'Blob', 'ArrayBuffer', 'DataView'];\n      if (value) {\n        for (var i = 0; i < types.length; i++) {\n          if (AWS.util.isType(value, types[i])) return;\n          if (AWS.util.typeName(value.constructor) === types[i]) return;\n        }\n      }\n  \n      this.fail('InvalidParameterType', 'Expected ' + context + ' to be a ' +\n        'string, Buffer, Stream, Blob, or typed array object');\n    }\n  });\n  \n  },{\"./core\":18}],45:[function(require,module,exports){\n  var util =  require('../util');\n  var AWS = require('../core');\n  \n  /**\n   * Prepend prefix defined by API model to endpoint that's already\n   * constructed. This feature does not apply to operations using\n   * endpoint discovery and can be disabled.\n   * @api private\n   */\n  function populateHostPrefix(request)  {\n    var enabled = request.service.config.hostPrefixEnabled;\n    if (!enabled) return request;\n    var operationModel = request.service.api.operations[request.operation];\n    //don't marshal host prefix when operation has endpoint discovery traits\n    if (hasEndpointDiscover(request)) return request;\n    if (operationModel.endpoint && operationModel.endpoint.hostPrefix) {\n      var hostPrefixNotation = operationModel.endpoint.hostPrefix;\n      var hostPrefix = expandHostPrefix(hostPrefixNotation, request.params, operationModel.input);\n      prependEndpointPrefix(request.httpRequest.endpoint, hostPrefix);\n      validateHostname(request.httpRequest.endpoint.hostname);\n    }\n    return request;\n  }\n  \n  /**\n   * @api private\n   */\n  function hasEndpointDiscover(request) {\n    var api = request.service.api;\n    var operationModel = api.operations[request.operation];\n    var isEndpointOperation = api.endpointOperation && (api.endpointOperation === util.string.lowerFirst(operationModel.name));\n    return (operationModel.endpointDiscoveryRequired !== 'NULL' || isEndpointOperation === true);\n  }\n  \n  /**\n   * @api private\n   */\n  function expandHostPrefix(hostPrefixNotation, params, shape) {\n    util.each(shape.members, function(name, member) {\n      if (member.hostLabel === true) {\n        if (typeof params[name] !== 'string' || params[name] === '') {\n          throw util.error(new Error(), {\n            message: 'Parameter ' + name + ' should be a non-empty string.',\n            code: 'InvalidParameter'\n          });\n        }\n        var regex = new RegExp('\\\\{' + name + '\\\\}', 'g');\n        hostPrefixNotation = hostPrefixNotation.replace(regex, params[name]);\n      }\n    });\n    return hostPrefixNotation;\n  }\n  \n  /**\n   * @api private\n   */\n  function prependEndpointPrefix(endpoint, prefix) {\n    if (endpoint.host) {\n      endpoint.host = prefix + endpoint.host;\n    }\n    if (endpoint.hostname) {\n      endpoint.hostname = prefix + endpoint.hostname;\n    }\n  }\n  \n  /**\n   * @api private\n   */\n  function validateHostname(hostname) {\n    var labels = hostname.split('.');\n    //Reference: https://tools.ietf.org/html/rfc1123#section-2\n    var hostPattern = /^[a-zA-Z0-9]{1}$|^[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9]$/;\n    util.arrayEach(labels, function(label) {\n      if (!label.length || label.length < 1 || label.length > 63) {\n        throw util.error(new Error(), {\n          code: 'ValidationError',\n          message: 'Hostname label length should be between 1 to 63 characters, inclusive.'\n        });\n      }\n      if (!hostPattern.test(label)) {\n        throw AWS.util.error(new Error(),\n          {code: 'ValidationError', message: label + ' is not hostname compatible.'});\n      }\n    });\n  }\n  \n  module.exports = {\n    populateHostPrefix: populateHostPrefix\n  };\n  \n  },{\"../core\":18,\"../util\":71}],46:[function(require,module,exports){\n  var util = require('../util');\n  var JsonBuilder = require('../json/builder');\n  var JsonParser = require('../json/parser');\n  var populateHostPrefix = require('./helpers').populateHostPrefix;\n  \n  function buildRequest(req) {\n    var httpRequest = req.httpRequest;\n    var api = req.service.api;\n    var target = api.targetPrefix + '.' + api.operations[req.operation].name;\n    var version = api.jsonVersion || '1.0';\n    var input = api.operations[req.operation].input;\n    var builder = new JsonBuilder();\n  \n    if (version === 1) version = '1.0';\n    httpRequest.body = builder.build(req.params || {}, input);\n    httpRequest.headers['Content-Type'] = 'application/x-amz-json-' + version;\n    httpRequest.headers['X-Amz-Target'] = target;\n  \n    populateHostPrefix(req);\n  }\n  \n  function extractError(resp) {\n    var error = {};\n    var httpResponse = resp.httpResponse;\n  \n    error.code = httpResponse.headers['x-amzn-errortype'] || 'UnknownError';\n    if (typeof error.code === 'string') {\n      error.code = error.code.split(':')[0];\n    }\n  \n    if (httpResponse.body.length > 0) {\n      try {\n        var e = JSON.parse(httpResponse.body.toString());\n        if (e.__type || e.code) {\n          error.code = (e.__type || e.code).split('#').pop();\n        }\n        if (error.code === 'RequestEntityTooLarge') {\n          error.message = 'Request body must be less than 1 MB';\n        } else {\n          error.message = (e.message || e.Message || null);\n        }\n      } catch (e) {\n        error.statusCode = httpResponse.statusCode;\n        error.message = httpResponse.statusMessage;\n      }\n    } else {\n      error.statusCode = httpResponse.statusCode;\n      error.message = httpResponse.statusCode.toString();\n    }\n  \n    resp.error = util.error(new Error(), error);\n  }\n  \n  function extractData(resp) {\n    var body = resp.httpResponse.body.toString() || '{}';\n    if (resp.request.service.config.convertResponseTypes === false) {\n      resp.data = JSON.parse(body);\n    } else {\n      var operation = resp.request.service.api.operations[resp.request.operation];\n      var shape = operation.output || {};\n      var parser = new JsonParser();\n      resp.data = parser.parse(body, shape);\n    }\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n    buildRequest: buildRequest,\n    extractError: extractError,\n    extractData: extractData\n  };\n  \n  },{\"../json/builder\":36,\"../json/parser\":37,\"../util\":71,\"./helpers\":45}],47:[function(require,module,exports){\n  var AWS = require('../core');\n  var util = require('../util');\n  var QueryParamSerializer = require('../query/query_param_serializer');\n  var Shape = require('../model/shape');\n  var populateHostPrefix = require('./helpers').populateHostPrefix;\n  \n  function buildRequest(req) {\n    var operation = req.service.api.operations[req.operation];\n    var httpRequest = req.httpRequest;\n    httpRequest.headers['Content-Type'] =\n      'application/x-www-form-urlencoded; charset=utf-8';\n    httpRequest.params = {\n      Version: req.service.api.apiVersion,\n      Action: operation.name\n    };\n  \n    // convert the request parameters into a list of query params,\n    // e.g. Deeply.NestedParam.0.Name=value\n    var builder = new QueryParamSerializer();\n    builder.serialize(req.params, operation.input, function(name, value) {\n      httpRequest.params[name] = value;\n    });\n    httpRequest.body = util.queryParamsToString(httpRequest.params);\n  \n    populateHostPrefix(req);\n  }\n  \n  function extractError(resp) {\n    var data, body = resp.httpResponse.body.toString();\n    if (body.match('<UnknownOperationException')) {\n      data = {\n        Code: 'UnknownOperation',\n        Message: 'Unknown operation ' + resp.request.operation\n      };\n    } else {\n      try {\n        data = new AWS.XML.Parser().parse(body);\n      } catch (e) {\n        data = {\n          Code: resp.httpResponse.statusCode,\n          Message: resp.httpResponse.statusMessage\n        };\n      }\n    }\n  \n    if (data.requestId && !resp.requestId) resp.requestId = data.requestId;\n    if (data.Errors) data = data.Errors;\n    if (data.Error) data = data.Error;\n    if (data.Code) {\n      resp.error = util.error(new Error(), {\n        code: data.Code,\n        message: data.Message\n      });\n    } else {\n      resp.error = util.error(new Error(), {\n        code: resp.httpResponse.statusCode,\n        message: null\n      });\n    }\n  }\n  \n  function extractData(resp) {\n    var req = resp.request;\n    var operation = req.service.api.operations[req.operation];\n    var shape = operation.output || {};\n    var origRules = shape;\n  \n    if (origRules.resultWrapper) {\n      var tmp = Shape.create({type: 'structure'});\n      tmp.members[origRules.resultWrapper] = shape;\n      tmp.memberNames = [origRules.resultWrapper];\n      util.property(shape, 'name', shape.resultWrapper);\n      shape = tmp;\n    }\n  \n    var parser = new AWS.XML.Parser();\n  \n    // TODO: Refactor XML Parser to parse RequestId from response.\n    if (shape && shape.members && !shape.members._XAMZRequestId) {\n      var requestIdShape = Shape.create(\n        { type: 'string' },\n        { api: { protocol: 'query' } },\n        'requestId'\n      );\n      shape.members._XAMZRequestId = requestIdShape;\n    }\n  \n    var data = parser.parse(resp.httpResponse.body.toString(), shape);\n    resp.requestId = data._XAMZRequestId || data.requestId;\n  \n    if (data._XAMZRequestId) delete data._XAMZRequestId;\n  \n    if (origRules.resultWrapper) {\n      if (data[origRules.resultWrapper]) {\n        util.update(data, data[origRules.resultWrapper]);\n        delete data[origRules.resultWrapper];\n      }\n    }\n  \n    resp.data = data;\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n    buildRequest: buildRequest,\n    extractError: extractError,\n    extractData: extractData\n  };\n  \n  },{\"../core\":18,\"../model/shape\":43,\"../query/query_param_serializer\":51,\"../util\":71,\"./helpers\":45}],48:[function(require,module,exports){\n  var util = require('../util');\n  var populateHostPrefix = require('./helpers').populateHostPrefix;\n  \n  function populateMethod(req) {\n    req.httpRequest.method = req.service.api.operations[req.operation].httpMethod;\n  }\n  \n  function generateURI(endpointPath, operationPath, input, params) {\n    var uri = [endpointPath, operationPath].join('/');\n    uri = uri.replace(/\\/+/g, '/');\n  \n    var queryString = {}, queryStringSet = false;\n    util.each(input.members, function (name, member) {\n      var paramValue = params[name];\n      if (paramValue === null || paramValue === undefined) return;\n      if (member.location === 'uri') {\n        var regex = new RegExp('\\\\{' + member.name + '(\\\\+)?\\\\}');\n        uri = uri.replace(regex, function(_, plus) {\n          var fn = plus ? util.uriEscapePath : util.uriEscape;\n          return fn(String(paramValue));\n        });\n      } else if (member.location === 'querystring') {\n        queryStringSet = true;\n  \n        if (member.type === 'list') {\n          queryString[member.name] = paramValue.map(function(val) {\n            return util.uriEscape(member.member.toWireFormat(val).toString());\n          });\n        } else if (member.type === 'map') {\n          util.each(paramValue, function(key, value) {\n            if (Array.isArray(value)) {\n              queryString[key] = value.map(function(val) {\n                return util.uriEscape(String(val));\n              });\n            } else {\n              queryString[key] = util.uriEscape(String(value));\n            }\n          });\n        } else {\n          queryString[member.name] = util.uriEscape(member.toWireFormat(paramValue).toString());\n        }\n      }\n    });\n  \n    if (queryStringSet) {\n      uri += (uri.indexOf('?') >= 0 ? '&' : '?');\n      var parts = [];\n      util.arrayEach(Object.keys(queryString).sort(), function(key) {\n        if (!Array.isArray(queryString[key])) {\n          queryString[key] = [queryString[key]];\n        }\n        for (var i = 0; i < queryString[key].length; i++) {\n          parts.push(util.uriEscape(String(key)) + '=' + queryString[key][i]);\n        }\n      });\n      uri += parts.join('&');\n    }\n  \n    return uri;\n  }\n  \n  function populateURI(req) {\n    var operation = req.service.api.operations[req.operation];\n    var input = operation.input;\n  \n    var uri = generateURI(req.httpRequest.endpoint.path, operation.httpPath, input, req.params);\n    req.httpRequest.path = uri;\n  }\n  \n  function populateHeaders(req) {\n    var operation = req.service.api.operations[req.operation];\n    util.each(operation.input.members, function (name, member) {\n      var value = req.params[name];\n      if (value === null || value === undefined) return;\n  \n      if (member.location === 'headers' && member.type === 'map') {\n        util.each(value, function(key, memberValue) {\n          req.httpRequest.headers[member.name + key] = memberValue;\n        });\n      } else if (member.location === 'header') {\n        value = member.toWireFormat(value).toString();\n        if (member.isJsonValue) {\n          value = util.base64.encode(value);\n        }\n        req.httpRequest.headers[member.name] = value;\n      }\n    });\n  }\n  \n  function buildRequest(req) {\n    populateMethod(req);\n    populateURI(req);\n    populateHeaders(req);\n    populateHostPrefix(req);\n  }\n  \n  function extractError() {\n  }\n  \n  function extractData(resp) {\n    var req = resp.request;\n    var data = {};\n    var r = resp.httpResponse;\n    var operation = req.service.api.operations[req.operation];\n    var output = operation.output;\n  \n    // normalize headers names to lower-cased keys for matching\n    var headers = {};\n    util.each(r.headers, function (k, v) {\n      headers[k.toLowerCase()] = v;\n    });\n  \n    util.each(output.members, function(name, member) {\n      var header = (member.name || name).toLowerCase();\n      if (member.location === 'headers' && member.type === 'map') {\n        data[name] = {};\n        var location = member.isLocationName ? member.name : '';\n        var pattern = new RegExp('^' + location + '(.+)', 'i');\n        util.each(r.headers, function (k, v) {\n          var result = k.match(pattern);\n          if (result !== null) {\n            data[name][result[1]] = v;\n          }\n        });\n      } else if (member.location === 'header') {\n        if (headers[header] !== undefined) {\n          var value = member.isJsonValue ?\n            util.base64.decode(headers[header]) :\n            headers[header];\n          data[name] = member.toType(value);\n        }\n      } else if (member.location === 'statusCode') {\n        data[name] = parseInt(r.statusCode, 10);\n      }\n    });\n  \n    resp.data = data;\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n    buildRequest: buildRequest,\n    extractError: extractError,\n    extractData: extractData,\n    generateURI: generateURI\n  };\n  \n  },{\"../util\":71,\"./helpers\":45}],49:[function(require,module,exports){\n  var util = require('../util');\n  var Rest = require('./rest');\n  var Json = require('./json');\n  var JsonBuilder = require('../json/builder');\n  var JsonParser = require('../json/parser');\n  \n  function populateBody(req) {\n    var builder = new JsonBuilder();\n    var input = req.service.api.operations[req.operation].input;\n  \n    if (input.payload) {\n      var params = {};\n      var payloadShape = input.members[input.payload];\n      params = req.params[input.payload];\n      if (params === undefined) return;\n  \n      if (payloadShape.type === 'structure') {\n        req.httpRequest.body = builder.build(params, payloadShape);\n        applyContentTypeHeader(req);\n      } else { // non-JSON payload\n        req.httpRequest.body = params;\n        if (payloadShape.type === 'binary' || payloadShape.isStreaming) {\n          applyContentTypeHeader(req, true);\n        }\n      }\n    } else {\n      var body = builder.build(req.params, input);\n      if (body !== '{}' || req.httpRequest.method !== 'GET') { //don't send empty body for GET method\n        req.httpRequest.body = body;\n      }\n      applyContentTypeHeader(req);\n    }\n  }\n  \n  function applyContentTypeHeader(req, isBinary) {\n    var operation = req.service.api.operations[req.operation];\n    var input = operation.input;\n  \n    if (!req.httpRequest.headers['Content-Type']) {\n      var type = isBinary ? 'binary/octet-stream' : 'application/json';\n      req.httpRequest.headers['Content-Type'] = type;\n    }\n  }\n  \n  function buildRequest(req) {\n    Rest.buildRequest(req);\n  \n    // never send body payload on HEAD/DELETE\n    if (['HEAD', 'DELETE'].indexOf(req.httpRequest.method) < 0) {\n      populateBody(req);\n    }\n  }\n  \n  function extractError(resp) {\n    Json.extractError(resp);\n  }\n  \n  function extractData(resp) {\n    Rest.extractData(resp);\n  \n    var req = resp.request;\n    var operation = req.service.api.operations[req.operation];\n    var rules = req.service.api.operations[req.operation].output || {};\n    var parser;\n    var hasEventOutput = operation.hasEventOutput;\n  \n    if (rules.payload) {\n      var payloadMember = rules.members[rules.payload];\n      var body = resp.httpResponse.body;\n      if (payloadMember.isEventStream) {\n        parser = new JsonParser();\n        resp.data[payload] = util.createEventStream(\n          AWS.HttpClient.streamsApiVersion === 2 ? resp.httpResponse.stream : body,\n          parser,\n          payloadMember\n        );\n      } else if (payloadMember.type === 'structure' || payloadMember.type === 'list') {\n        var parser = new JsonParser();\n        resp.data[rules.payload] = parser.parse(body, payloadMember);\n      } else if (payloadMember.type === 'binary' || payloadMember.isStreaming) {\n        resp.data[rules.payload] = body;\n      } else {\n        resp.data[rules.payload] = payloadMember.toType(body);\n      }\n    } else {\n      var data = resp.data;\n      Json.extractData(resp);\n      resp.data = util.merge(data, resp.data);\n    }\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n    buildRequest: buildRequest,\n    extractError: extractError,\n    extractData: extractData\n  };\n  \n  },{\"../json/builder\":36,\"../json/parser\":37,\"../util\":71,\"./json\":46,\"./rest\":48}],50:[function(require,module,exports){\n  var AWS = require('../core');\n  var util = require('../util');\n  var Rest = require('./rest');\n  \n  function populateBody(req) {\n    var input = req.service.api.operations[req.operation].input;\n    var builder = new AWS.XML.Builder();\n    var params = req.params;\n  \n    var payload = input.payload;\n    if (payload) {\n      var payloadMember = input.members[payload];\n      params = params[payload];\n      if (params === undefined) return;\n  \n      if (payloadMember.type === 'structure') {\n        var rootElement = payloadMember.name;\n        req.httpRequest.body = builder.toXML(params, payloadMember, rootElement, true);\n      } else { // non-xml payload\n        req.httpRequest.body = params;\n      }\n    } else {\n      req.httpRequest.body = builder.toXML(params, input, input.name ||\n        input.shape || util.string.upperFirst(req.operation) + 'Request');\n    }\n  }\n  \n  function buildRequest(req) {\n    Rest.buildRequest(req);\n  \n    // never send body payload on GET/HEAD\n    if (['GET', 'HEAD'].indexOf(req.httpRequest.method) < 0) {\n      populateBody(req);\n    }\n  }\n  \n  function extractError(resp) {\n    Rest.extractError(resp);\n  \n    var data;\n    try {\n      data = new AWS.XML.Parser().parse(resp.httpResponse.body.toString());\n    } catch (e) {\n      data = {\n        Code: resp.httpResponse.statusCode,\n        Message: resp.httpResponse.statusMessage\n      };\n    }\n  \n    if (data.Errors) data = data.Errors;\n    if (data.Error) data = data.Error;\n    if (data.Code) {\n      resp.error = util.error(new Error(), {\n        code: data.Code,\n        message: data.Message\n      });\n    } else {\n      resp.error = util.error(new Error(), {\n        code: resp.httpResponse.statusCode,\n        message: null\n      });\n    }\n  }\n  \n  function extractData(resp) {\n    Rest.extractData(resp);\n  \n    var parser;\n    var req = resp.request;\n    var body = resp.httpResponse.body;\n    var operation = req.service.api.operations[req.operation];\n    var output = operation.output;\n  \n    var hasEventOutput = operation.hasEventOutput;\n  \n    var payload = output.payload;\n    if (payload) {\n      var payloadMember = output.members[payload];\n      if (payloadMember.isEventStream) {\n        parser = new AWS.XML.Parser();\n        resp.data[payload] = util.createEventStream(\n          AWS.HttpClient.streamsApiVersion === 2 ? resp.httpResponse.stream : resp.httpResponse.body,\n          parser,\n          payloadMember\n        );\n      } else if (payloadMember.type === 'structure') {\n        parser = new AWS.XML.Parser();\n        resp.data[payload] = parser.parse(body.toString(), payloadMember);\n      } else if (payloadMember.type === 'binary' || payloadMember.isStreaming) {\n        resp.data[payload] = body;\n      } else {\n        resp.data[payload] = payloadMember.toType(body);\n      }\n    } else if (body.length > 0) {\n      parser = new AWS.XML.Parser();\n      var data = parser.parse(body.toString(), output);\n      util.update(resp.data, data);\n    }\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n    buildRequest: buildRequest,\n    extractError: extractError,\n    extractData: extractData\n  };\n  \n  },{\"../core\":18,\"../util\":71,\"./rest\":48}],51:[function(require,module,exports){\n  var util = require('../util');\n  \n  function QueryParamSerializer() {\n  }\n  \n  QueryParamSerializer.prototype.serialize = function(params, shape, fn) {\n    serializeStructure('', params, shape, fn);\n  };\n  \n  function ucfirst(shape) {\n    if (shape.isQueryName || shape.api.protocol !== 'ec2') {\n      return shape.name;\n    } else {\n      return shape.name[0].toUpperCase() + shape.name.substr(1);\n    }\n  }\n  \n  function serializeStructure(prefix, struct, rules, fn) {\n    util.each(rules.members, function(name, member) {\n      var value = struct[name];\n      if (value === null || value === undefined) return;\n  \n      var memberName = ucfirst(member);\n      memberName = prefix ? prefix + '.' + memberName : memberName;\n      serializeMember(memberName, value, member, fn);\n    });\n  }\n  \n  function serializeMap(name, map, rules, fn) {\n    var i = 1;\n    util.each(map, function (key, value) {\n      var prefix = rules.flattened ? '.' : '.entry.';\n      var position = prefix + (i++) + '.';\n      var keyName = position + (rules.key.name || 'key');\n      var valueName = position + (rules.value.name || 'value');\n      serializeMember(name + keyName, key, rules.key, fn);\n      serializeMember(name + valueName, value, rules.value, fn);\n    });\n  }\n  \n  function serializeList(name, list, rules, fn) {\n    var memberRules = rules.member || {};\n  \n    if (list.length === 0) {\n      fn.call(this, name, null);\n      return;\n    }\n  \n    util.arrayEach(list, function (v, n) {\n      var suffix = '.' + (n + 1);\n      if (rules.api.protocol === 'ec2') {\n        // Do nothing for EC2\n        suffix = suffix + ''; // make linter happy\n      } else if (rules.flattened) {\n        if (memberRules.name) {\n          var parts = name.split('.');\n          parts.pop();\n          parts.push(ucfirst(memberRules));\n          name = parts.join('.');\n        }\n      } else {\n        suffix = '.' + (memberRules.name ? memberRules.name : 'member') + suffix;\n      }\n      serializeMember(name + suffix, v, memberRules, fn);\n    });\n  }\n  \n  function serializeMember(name, value, rules, fn) {\n    if (value === null || value === undefined) return;\n    if (rules.type === 'structure') {\n      serializeStructure(name, value, rules, fn);\n    } else if (rules.type === 'list') {\n      serializeList(name, value, rules, fn);\n    } else if (rules.type === 'map') {\n      serializeMap(name, value, rules, fn);\n    } else {\n      fn(name, rules.toWireFormat(value).toString());\n    }\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = QueryParamSerializer;\n  \n  },{\"../util\":71}],52:[function(require,module,exports){\n  module.exports = {\n    //provide realtime clock for performance measurement\n    now: function now() {\n      if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n        return performance.now();\n      }\n      return Date.now();\n    }\n  };\n  \n  },{}],53:[function(require,module,exports){\n  var util = require('./util');\n  var regionConfig = require('./region_config_data.json');\n  \n  function generateRegionPrefix(region) {\n    if (!region) return null;\n  \n    var parts = region.split('-');\n    if (parts.length < 3) return null;\n    return parts.slice(0, parts.length - 2).join('-') + '-*';\n  }\n  \n  function derivedKeys(service) {\n    var region = service.config.region;\n    var regionPrefix = generateRegionPrefix(region);\n    var endpointPrefix = service.api.endpointPrefix;\n  \n    return [\n      [region, endpointPrefix],\n      [regionPrefix, endpointPrefix],\n      [region, '*'],\n      [regionPrefix, '*'],\n      ['*', endpointPrefix],\n      ['*', '*']\n    ].map(function(item) {\n      return item[0] && item[1] ? item.join('/') : null;\n    });\n  }\n  \n  function applyConfig(service, config) {\n    util.each(config, function(key, value) {\n      if (key === 'globalEndpoint') return;\n      if (service.config[key] === undefined || service.config[key] === null) {\n        service.config[key] = value;\n      }\n    });\n  }\n  \n  function configureEndpoint(service) {\n    var keys = derivedKeys(service);\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      if (!key) continue;\n  \n      if (Object.prototype.hasOwnProperty.call(regionConfig.rules, key)) {\n        var config = regionConfig.rules[key];\n        if (typeof config === 'string') {\n          config = regionConfig.patterns[config];\n        }\n  \n        // set dualstack endpoint\n        if (service.config.useDualstack && util.isDualstackAvailable(service)) {\n          config = util.copy(config);\n          config.endpoint = '{service}.dualstack.{region}.amazonaws.com';\n        }\n  \n        // set global endpoint\n        service.isGlobalEndpoint = !!config.globalEndpoint;\n  \n        // signature version\n        if (!config.signatureVersion) config.signatureVersion = 'v4';\n  \n        // merge config\n        applyConfig(service, config);\n        return;\n      }\n    }\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = configureEndpoint;\n  \n  },{\"./region_config_data.json\":54,\"./util\":71}],54:[function(require,module,exports){\n  module.exports={\n    \"rules\": {\n      \"*/*\": {\n        \"endpoint\": \"{service}.{region}.amazonaws.com\"\n      },\n      \"cn-*/*\": {\n        \"endpoint\": \"{service}.{region}.amazonaws.com.cn\"\n      },\n      \"*/budgets\": \"globalSSL\",\n      \"*/cloudfront\": \"globalSSL\",\n      \"*/iam\": \"globalSSL\",\n      \"*/sts\": \"globalSSL\",\n      \"*/importexport\": {\n        \"endpoint\": \"{service}.amazonaws.com\",\n        \"signatureVersion\": \"v2\",\n        \"globalEndpoint\": true\n      },\n      \"*/route53\": {\n        \"endpoint\": \"https://{service}.amazonaws.com\",\n        \"signatureVersion\": \"v3https\",\n        \"globalEndpoint\": true\n      },\n      \"*/waf\": \"globalSSL\",\n      \"us-gov-*/iam\": \"globalGovCloud\",\n      \"us-gov-*/sts\": {\n        \"endpoint\": \"{service}.{region}.amazonaws.com\"\n      },\n      \"us-gov-west-1/s3\": \"s3signature\",\n      \"us-west-1/s3\": \"s3signature\",\n      \"us-west-2/s3\": \"s3signature\",\n      \"eu-west-1/s3\": \"s3signature\",\n      \"ap-southeast-1/s3\": \"s3signature\",\n      \"ap-southeast-2/s3\": \"s3signature\",\n      \"ap-northeast-1/s3\": \"s3signature\",\n      \"sa-east-1/s3\": \"s3signature\",\n      \"us-east-1/s3\": {\n        \"endpoint\": \"{service}.amazonaws.com\",\n        \"signatureVersion\": \"s3\"\n      },\n      \"us-east-1/sdb\": {\n        \"endpoint\": \"{service}.amazonaws.com\",\n        \"signatureVersion\": \"v2\"\n      },\n      \"*/sdb\": {\n        \"endpoint\": \"{service}.{region}.amazonaws.com\",\n        \"signatureVersion\": \"v2\"\n      }\n    },\n  \n    \"patterns\": {\n      \"globalSSL\": {\n        \"endpoint\": \"https://{service}.amazonaws.com\",\n        \"globalEndpoint\": true\n      },\n      \"globalGovCloud\": {\n        \"endpoint\": \"{service}.us-gov.amazonaws.com\"\n      },\n      \"s3signature\": {\n        \"endpoint\": \"{service}.{region}.amazonaws.com\",\n        \"signatureVersion\": \"s3\"\n      }\n    }\n  }\n  \n  },{}],55:[function(require,module,exports){\n  (function (process){\n  var AWS = require('./core');\n  var AcceptorStateMachine = require('./state_machine');\n  var inherit = AWS.util.inherit;\n  var domain = AWS.util.domain;\n  var jmespath = require('jmespath');\n  \n  /**\n   * @api private\n   */\n  var hardErrorStates = {success: 1, error: 1, complete: 1};\n  \n  function isTerminalState(machine) {\n    return Object.prototype.hasOwnProperty.call(hardErrorStates, machine._asm.currentState);\n  }\n  \n  var fsm = new AcceptorStateMachine();\n  fsm.setupStates = function() {\n    var transition = function(_, done) {\n      var self = this;\n      self._haltHandlersOnError = false;\n  \n      self.emit(self._asm.currentState, function(err) {\n        if (err) {\n          if (isTerminalState(self)) {\n            if (domain && self.domain instanceof domain.Domain) {\n              err.domainEmitter = self;\n              err.domain = self.domain;\n              err.domainThrown = false;\n              self.domain.emit('error', err);\n            } else {\n              throw err;\n            }\n          } else {\n            self.response.error = err;\n            done(err);\n          }\n        } else {\n          done(self.response.error);\n        }\n      });\n  \n    };\n  \n    this.addState('validate', 'build', 'error', transition);\n    this.addState('build', 'afterBuild', 'restart', transition);\n    this.addState('afterBuild', 'sign', 'restart', transition);\n    this.addState('sign', 'send', 'retry', transition);\n    this.addState('retry', 'afterRetry', 'afterRetry', transition);\n    this.addState('afterRetry', 'sign', 'error', transition);\n    this.addState('send', 'validateResponse', 'retry', transition);\n    this.addState('validateResponse', 'extractData', 'extractError', transition);\n    this.addState('extractError', 'extractData', 'retry', transition);\n    this.addState('extractData', 'success', 'retry', transition);\n    this.addState('restart', 'build', 'error', transition);\n    this.addState('success', 'complete', 'complete', transition);\n    this.addState('error', 'complete', 'complete', transition);\n    this.addState('complete', null, null, transition);\n  };\n  fsm.setupStates();\n  \n  /**\n   * ## Asynchronous Requests\n   *\n   * All requests made through the SDK are asynchronous and use a\n   * callback interface. Each service method that kicks off a request\n   * returns an `AWS.Request` object that you can use to register\n   * callbacks.\n   *\n   * For example, the following service method returns the request\n   * object as \"request\", which can be used to register callbacks:\n   *\n   * ```javascript\n   * // request is an AWS.Request object\n   * var request = ec2.describeInstances();\n   *\n   * // register callbacks on request to retrieve response data\n   * request.on('success', function(response) {\n   *   console.log(response.data);\n   * });\n   * ```\n   *\n   * When a request is ready to be sent, the {send} method should\n   * be called:\n   *\n   * ```javascript\n   * request.send();\n   * ```\n   *\n   * Since registered callbacks may or may not be idempotent, requests should only\n   * be sent once. To perform the same operation multiple times, you will need to\n   * create multiple request objects, each with its own registered callbacks.\n   *\n   * ## Removing Default Listeners for Events\n   *\n   * Request objects are built with default listeners for the various events,\n   * depending on the service type. In some cases, you may want to remove\n   * some built-in listeners to customize behaviour. Doing this requires\n   * access to the built-in listener functions, which are exposed through\n   * the {AWS.EventListeners.Core} namespace. For instance, you may\n   * want to customize the HTTP handler used when sending a request. In this\n   * case, you can remove the built-in listener associated with the 'send'\n   * event, the {AWS.EventListeners.Core.SEND} listener and add your own.\n   *\n   * ## Multiple Callbacks and Chaining\n   *\n   * You can register multiple callbacks on any request object. The\n   * callbacks can be registered for different events, or all for the\n   * same event. In addition, you can chain callback registration, for\n   * example:\n   *\n   * ```javascript\n   * request.\n   *   on('success', function(response) {\n   *     console.log(\"Success!\");\n   *   }).\n   *   on('error', function(error, response) {\n   *     console.log(\"Error!\");\n   *   }).\n   *   on('complete', function(response) {\n   *     console.log(\"Always!\");\n   *   }).\n   *   send();\n   * ```\n   *\n   * The above example will print either \"Success! Always!\", or \"Error! Always!\",\n   * depending on whether the request succeeded or not.\n   *\n   * @!attribute httpRequest\n   *   @readonly\n   *   @!group HTTP Properties\n   *   @return [AWS.HttpRequest] the raw HTTP request object\n   *     containing request headers and body information\n   *     sent by the service.\n   *\n   * @!attribute startTime\n   *   @readonly\n   *   @!group Operation Properties\n   *   @return [Date] the time that the request started\n   *\n   * @!group Request Building Events\n   *\n   * @!event validate(request)\n   *   Triggered when a request is being validated. Listeners\n   *   should throw an error if the request should not be sent.\n   *   @param request [Request] the request object being sent\n   *   @see AWS.EventListeners.Core.VALIDATE_CREDENTIALS\n   *   @see AWS.EventListeners.Core.VALIDATE_REGION\n   *   @example Ensuring that a certain parameter is set before sending a request\n   *     var req = s3.putObject(params);\n   *     req.on('validate', function() {\n   *       if (!req.params.Body.match(/^Hello\\s/)) {\n   *         throw new Error('Body must start with \"Hello \"');\n   *       }\n   *     });\n   *     req.send(function(err, data) { ... });\n   *\n   * @!event build(request)\n   *   Triggered when the request payload is being built. Listeners\n   *   should fill the necessary information to send the request\n   *   over HTTP.\n   *   @param (see AWS.Request~validate)\n   *   @example Add a custom HTTP header to a request\n   *     var req = s3.putObject(params);\n   *     req.on('build', function() {\n   *       req.httpRequest.headers['Custom-Header'] = 'value';\n   *     });\n   *     req.send(function(err, data) { ... });\n   *\n   * @!event sign(request)\n   *   Triggered when the request is being signed. Listeners should\n   *   add the correct authentication headers and/or adjust the body,\n   *   depending on the authentication mechanism being used.\n   *   @param (see AWS.Request~validate)\n   *\n   * @!group Request Sending Events\n   *\n   * @!event send(response)\n   *   Triggered when the request is ready to be sent. Listeners\n   *   should call the underlying transport layer to initiate\n   *   the sending of the request.\n   *   @param response [Response] the response object\n   *   @context [Request] the request object that was sent\n   *   @see AWS.EventListeners.Core.SEND\n   *\n   * @!event retry(response)\n   *   Triggered when a request failed and might need to be retried or redirected.\n   *   If the response is retryable, the listener should set the\n   *   `response.error.retryable` property to `true`, and optionally set\n   *   `response.error.retryDelay` to the millisecond delay for the next attempt.\n   *   In the case of a redirect, `response.error.redirect` should be set to\n   *   `true` with `retryDelay` set to an optional delay on the next request.\n   *\n   *   If a listener decides that a request should not be retried,\n   *   it should set both `retryable` and `redirect` to false.\n   *\n   *   Note that a retryable error will be retried at most\n   *   {AWS.Config.maxRetries} times (based on the service object's config).\n   *   Similarly, a request that is redirected will only redirect at most\n   *   {AWS.Config.maxRedirects} times.\n   *\n   *   @param (see AWS.Request~send)\n   *   @context (see AWS.Request~send)\n   *   @example Adding a custom retry for a 404 response\n   *     request.on('retry', function(response) {\n   *       // this resource is not yet available, wait 10 seconds to get it again\n   *       if (response.httpResponse.statusCode === 404 && response.error) {\n   *         response.error.retryable = true;   // retry this error\n   *         response.error.retryDelay = 10000; // wait 10 seconds\n   *       }\n   *     });\n   *\n   * @!group Data Parsing Events\n   *\n   * @!event extractError(response)\n   *   Triggered on all non-2xx requests so that listeners can extract\n   *   error details from the response body. Listeners to this event\n   *   should set the `response.error` property.\n   *   @param (see AWS.Request~send)\n   *   @context (see AWS.Request~send)\n   *\n   * @!event extractData(response)\n   *   Triggered in successful requests to allow listeners to\n   *   de-serialize the response body into `response.data`.\n   *   @param (see AWS.Request~send)\n   *   @context (see AWS.Request~send)\n   *\n   * @!group Completion Events\n   *\n   * @!event success(response)\n   *   Triggered when the request completed successfully.\n   *   `response.data` will contain the response data and\n   *   `response.error` will be null.\n   *   @param (see AWS.Request~send)\n   *   @context (see AWS.Request~send)\n   *\n   * @!event error(error, response)\n   *   Triggered when an error occurs at any point during the\n   *   request. `response.error` will contain details about the error\n   *   that occurred. `response.data` will be null.\n   *   @param error [Error] the error object containing details about\n   *     the error that occurred.\n   *   @param (see AWS.Request~send)\n   *   @context (see AWS.Request~send)\n   *\n   * @!event complete(response)\n   *   Triggered whenever a request cycle completes. `response.error`\n   *   should be checked, since the request may have failed.\n   *   @param (see AWS.Request~send)\n   *   @context (see AWS.Request~send)\n   *\n   * @!group HTTP Events\n   *\n   * @!event httpHeaders(statusCode, headers, response, statusMessage)\n   *   Triggered when headers are sent by the remote server\n   *   @param statusCode [Integer] the HTTP response code\n   *   @param headers [map<String,String>] the response headers\n   *   @param (see AWS.Request~send)\n   *   @param statusMessage [String] A status message corresponding to the HTTP\n   *                                 response code\n   *   @context (see AWS.Request~send)\n   *\n   * @!event httpData(chunk, response)\n   *   Triggered when data is sent by the remote server\n   *   @param chunk [Buffer] the buffer data containing the next data chunk\n   *     from the server\n   *   @param (see AWS.Request~send)\n   *   @context (see AWS.Request~send)\n   *   @see AWS.EventListeners.Core.HTTP_DATA\n   *\n   * @!event httpUploadProgress(progress, response)\n   *   Triggered when the HTTP request has uploaded more data\n   *   @param progress [map] An object containing the `loaded` and `total` bytes\n   *     of the request.\n   *   @param (see AWS.Request~send)\n   *   @context (see AWS.Request~send)\n   *   @note This event will not be emitted in Node.js 0.8.x.\n   *\n   * @!event httpDownloadProgress(progress, response)\n   *   Triggered when the HTTP request has downloaded more data\n   *   @param progress [map] An object containing the `loaded` and `total` bytes\n   *     of the request.\n   *   @param (see AWS.Request~send)\n   *   @context (see AWS.Request~send)\n   *   @note This event will not be emitted in Node.js 0.8.x.\n   *\n   * @!event httpError(error, response)\n   *   Triggered when the HTTP request failed\n   *   @param error [Error] the error object that was thrown\n   *   @param (see AWS.Request~send)\n   *   @context (see AWS.Request~send)\n   *\n   * @!event httpDone(response)\n   *   Triggered when the server is finished sending data\n   *   @param (see AWS.Request~send)\n   *   @context (see AWS.Request~send)\n   *\n   * @see AWS.Response\n   */\n  AWS.Request = inherit({\n  \n    /**\n     * Creates a request for an operation on a given service with\n     * a set of input parameters.\n     *\n     * @param service [AWS.Service] the service to perform the operation on\n     * @param operation [String] the operation to perform on the service\n     * @param params [Object] parameters to send to the operation.\n     *   See the operation's documentation for the format of the\n     *   parameters.\n     */\n    constructor: function Request(service, operation, params) {\n      var endpoint = service.endpoint;\n      var region = service.config.region;\n      var customUserAgent = service.config.customUserAgent;\n  \n      // global endpoints sign as us-east-1\n      if (service.isGlobalEndpoint) region = 'us-east-1';\n  \n      this.domain = domain && domain.active;\n      this.service = service;\n      this.operation = operation;\n      this.params = params || {};\n      this.httpRequest = new AWS.HttpRequest(endpoint, region);\n      this.httpRequest.appendToUserAgent(customUserAgent);\n      this.startTime = service.getSkewCorrectedDate();\n  \n      this.response = new AWS.Response(this);\n      this._asm = new AcceptorStateMachine(fsm.states, 'validate');\n      this._haltHandlersOnError = false;\n  \n      AWS.SequentialExecutor.call(this);\n      this.emit = this.emitEvent;\n    },\n  \n    /**\n     * @!group Sending a Request\n     */\n  \n    /**\n     * @overload send(callback = null)\n     *   Sends the request object.\n     *\n     *   @callback callback function(err, data)\n     *     If a callback is supplied, it is called when a response is returned\n     *     from the service.\n     *     @context [AWS.Request] the request object being sent.\n     *     @param err [Error] the error object returned from the request.\n     *       Set to `null` if the request is successful.\n     *     @param data [Object] the de-serialized data returned from\n     *       the request. Set to `null` if a request error occurs.\n     *   @example Sending a request with a callback\n     *     request = s3.putObject({Bucket: 'bucket', Key: 'key'});\n     *     request.send(function(err, data) { console.log(err, data); });\n     *   @example Sending a request with no callback (using event handlers)\n     *     request = s3.putObject({Bucket: 'bucket', Key: 'key'});\n     *     request.on('complete', function(response) { ... }); // register a callback\n     *     request.send();\n     */\n    send: function send(callback) {\n      if (callback) {\n        // append to user agent\n        this.httpRequest.appendToUserAgent('callback');\n        this.on('complete', function (resp) {\n          callback.call(resp, resp.error, resp.data);\n        });\n      }\n      this.runTo();\n  \n      return this.response;\n    },\n  \n    /**\n     * @!method  promise()\n     *   Sends the request and returns a 'thenable' promise.\n     *\n     *   Two callbacks can be provided to the `then` method on the returned promise.\n     *   The first callback will be called if the promise is fulfilled, and the second\n     *   callback will be called if the promise is rejected.\n     *   @callback fulfilledCallback function(data)\n     *     Called if the promise is fulfilled.\n     *     @param data [Object] the de-serialized data returned from the request.\n     *   @callback rejectedCallback function(error)\n     *     Called if the promise is rejected.\n     *     @param error [Error] the error object returned from the request.\n     *   @return [Promise] A promise that represents the state of the request.\n     *   @example Sending a request using promises.\n     *     var request = s3.putObject({Bucket: 'bucket', Key: 'key'});\n     *     var result = request.promise();\n     *     result.then(function(data) { ... }, function(error) { ... });\n     */\n  \n    /**\n     * @api private\n     */\n    build: function build(callback) {\n      return this.runTo('send', callback);\n    },\n  \n    /**\n     * @api private\n     */\n    runTo: function runTo(state, done) {\n      this._asm.runTo(state, done, this);\n      return this;\n    },\n  \n    /**\n     * Aborts a request, emitting the error and complete events.\n     *\n     * @!macro nobrowser\n     * @example Aborting a request after sending\n     *   var params = {\n     *     Bucket: 'bucket', Key: 'key',\n     *     Body: Buffer.alloc(1024 * 1024 * 5) // 5MB payload\n     *   };\n     *   var request = s3.putObject(params);\n     *   request.send(function (err, data) {\n     *     if (err) console.log(\"Error:\", err.code, err.message);\n     *     else console.log(data);\n     *   });\n     *\n     *   // abort request in 1 second\n     *   setTimeout(request.abort.bind(request), 1000);\n     *\n     *   // prints \"Error: RequestAbortedError Request aborted by user\"\n     * @return [AWS.Request] the same request object, for chaining.\n     * @since v1.4.0\n     */\n    abort: function abort() {\n      this.removeAllListeners('validateResponse');\n      this.removeAllListeners('extractError');\n      this.on('validateResponse', function addAbortedError(resp) {\n        resp.error = AWS.util.error(new Error('Request aborted by user'), {\n           code: 'RequestAbortedError', retryable: false\n        });\n      });\n  \n      if (this.httpRequest.stream && !this.httpRequest.stream.didCallback) { // abort HTTP stream\n        this.httpRequest.stream.abort();\n        if (this.httpRequest._abortCallback) {\n           this.httpRequest._abortCallback();\n        } else {\n          this.removeAllListeners('send'); // haven't sent yet, so let's not\n        }\n      }\n  \n      return this;\n    },\n  \n    /**\n     * Iterates over each page of results given a pageable request, calling\n     * the provided callback with each page of data. After all pages have been\n     * retrieved, the callback is called with `null` data.\n     *\n     * @note This operation can generate multiple requests to a service.\n     * @example Iterating over multiple pages of objects in an S3 bucket\n     *   var pages = 1;\n     *   s3.listObjects().eachPage(function(err, data) {\n     *     if (err) return;\n     *     console.log(\"Page\", pages++);\n     *     console.log(data);\n     *   });\n     * @example Iterating over multiple pages with an asynchronous callback\n     *   s3.listObjects(params).eachPage(function(err, data, done) {\n     *     doSomethingAsyncAndOrExpensive(function() {\n     *       // The next page of results isn't fetched until done is called\n     *       done();\n     *     });\n     *   });\n     * @callback callback function(err, data, [doneCallback])\n     *   Called with each page of resulting data from the request. If the\n     *   optional `doneCallback` is provided in the function, it must be called\n     *   when the callback is complete.\n     *\n     *   @param err [Error] an error object, if an error occurred.\n     *   @param data [Object] a single page of response data. If there is no\n     *     more data, this object will be `null`.\n     *   @param doneCallback [Function] an optional done callback. If this\n     *     argument is defined in the function declaration, it should be called\n     *     when the next page is ready to be retrieved. This is useful for\n     *     controlling serial pagination across asynchronous operations.\n     *   @return [Boolean] if the callback returns `false`, pagination will\n     *     stop.\n     *\n     * @see AWS.Request.eachItem\n     * @see AWS.Response.nextPage\n     * @since v1.4.0\n     */\n    eachPage: function eachPage(callback) {\n      // Make all callbacks async-ish\n      callback = AWS.util.fn.makeAsync(callback, 3);\n  \n      function wrappedCallback(response) {\n        callback.call(response, response.error, response.data, function (result) {\n          if (result === false) return;\n  \n          if (response.hasNextPage()) {\n            response.nextPage().on('complete', wrappedCallback).send();\n          } else {\n            callback.call(response, null, null, AWS.util.fn.noop);\n          }\n        });\n      }\n  \n      this.on('complete', wrappedCallback).send();\n    },\n  \n    /**\n     * Enumerates over individual items of a request, paging the responses if\n     * necessary.\n     *\n     * @api experimental\n     * @since v1.4.0\n     */\n    eachItem: function eachItem(callback) {\n      var self = this;\n      function wrappedCallback(err, data) {\n        if (err) return callback(err, null);\n        if (data === null) return callback(null, null);\n  \n        var config = self.service.paginationConfig(self.operation);\n        var resultKey = config.resultKey;\n        if (Array.isArray(resultKey)) resultKey = resultKey[0];\n        var items = jmespath.search(data, resultKey);\n        var continueIteration = true;\n        AWS.util.arrayEach(items, function(item) {\n          continueIteration = callback(null, item);\n          if (continueIteration === false) {\n            return AWS.util.abort;\n          }\n        });\n        return continueIteration;\n      }\n  \n      this.eachPage(wrappedCallback);\n    },\n  \n    /**\n     * @return [Boolean] whether the operation can return multiple pages of\n     *   response data.\n     * @see AWS.Response.eachPage\n     * @since v1.4.0\n     */\n    isPageable: function isPageable() {\n      return this.service.paginationConfig(this.operation) ? true : false;\n    },\n  \n    /**\n     * Sends the request and converts the request object into a readable stream\n     * that can be read from or piped into a writable stream.\n     *\n     * @note The data read from a readable stream contains only\n     *   the raw HTTP body contents.\n     * @example Manually reading from a stream\n     *   request.createReadStream().on('data', function(data) {\n     *     console.log(\"Got data:\", data.toString());\n     *   });\n     * @example Piping a request body into a file\n     *   var out = fs.createWriteStream('/path/to/outfile.jpg');\n     *   s3.service.getObject(params).createReadStream().pipe(out);\n     * @return [Stream] the readable stream object that can be piped\n     *   or read from (by registering 'data' event listeners).\n     * @!macro nobrowser\n     */\n    createReadStream: function createReadStream() {\n      var streams = AWS.util.stream;\n      var req = this;\n      var stream = null;\n  \n      if (AWS.HttpClient.streamsApiVersion === 2) {\n        stream = new streams.PassThrough();\n        process.nextTick(function() { req.send(); });\n      } else {\n        stream = new streams.Stream();\n        stream.readable = true;\n  \n        stream.sent = false;\n        stream.on('newListener', function(event) {\n          if (!stream.sent && event === 'data') {\n            stream.sent = true;\n            process.nextTick(function() { req.send(); });\n          }\n        });\n      }\n  \n      this.on('error', function(err) {\n        stream.emit('error', err);\n      });\n  \n      this.on('httpHeaders', function streamHeaders(statusCode, headers, resp) {\n        if (statusCode < 300) {\n          req.removeListener('httpData', AWS.EventListeners.Core.HTTP_DATA);\n          req.removeListener('httpError', AWS.EventListeners.Core.HTTP_ERROR);\n          req.on('httpError', function streamHttpError(error) {\n            resp.error = error;\n            resp.error.retryable = false;\n          });\n  \n          var shouldCheckContentLength = false;\n          var expectedLen;\n          if (req.httpRequest.method !== 'HEAD') {\n            expectedLen = parseInt(headers['content-length'], 10);\n          }\n          if (expectedLen !== undefined && !isNaN(expectedLen) && expectedLen >= 0) {\n            shouldCheckContentLength = true;\n            var receivedLen = 0;\n          }\n  \n          var checkContentLengthAndEmit = function checkContentLengthAndEmit() {\n            if (shouldCheckContentLength && receivedLen !== expectedLen) {\n              stream.emit('error', AWS.util.error(\n                new Error('Stream content length mismatch. Received ' +\n                  receivedLen + ' of ' + expectedLen + ' bytes.'),\n                { code: 'StreamContentLengthMismatch' }\n              ));\n            } else if (AWS.HttpClient.streamsApiVersion === 2) {\n              stream.end();\n            } else {\n              stream.emit('end');\n            }\n          };\n  \n          var httpStream = resp.httpResponse.createUnbufferedStream();\n  \n          if (AWS.HttpClient.streamsApiVersion === 2) {\n            if (shouldCheckContentLength) {\n              var lengthAccumulator = new streams.PassThrough();\n              lengthAccumulator._write = function(chunk) {\n                if (chunk && chunk.length) {\n                  receivedLen += chunk.length;\n                }\n                return streams.PassThrough.prototype._write.apply(this, arguments);\n              };\n  \n              lengthAccumulator.on('end', checkContentLengthAndEmit);\n              stream.on('error', function(err) {\n                shouldCheckContentLength = false;\n                httpStream.unpipe(lengthAccumulator);\n                lengthAccumulator.emit('end');\n                lengthAccumulator.end();\n              });\n              httpStream.pipe(lengthAccumulator).pipe(stream, { end: false });\n            } else {\n              httpStream.pipe(stream);\n            }\n          } else {\n  \n            if (shouldCheckContentLength) {\n              httpStream.on('data', function(arg) {\n                if (arg && arg.length) {\n                  receivedLen += arg.length;\n                }\n              });\n            }\n  \n            httpStream.on('data', function(arg) {\n              stream.emit('data', arg);\n            });\n            httpStream.on('end', checkContentLengthAndEmit);\n          }\n  \n          httpStream.on('error', function(err) {\n            shouldCheckContentLength = false;\n            stream.emit('error', err);\n          });\n        }\n      });\n  \n      return stream;\n    },\n  \n    /**\n     * @param [Array,Response] args This should be the response object,\n     *   or an array of args to send to the event.\n     * @api private\n     */\n    emitEvent: function emit(eventName, args, done) {\n      if (typeof args === 'function') { done = args; args = null; }\n      if (!done) done = function() { };\n      if (!args) args = this.eventParameters(eventName, this.response);\n  \n      var origEmit = AWS.SequentialExecutor.prototype.emit;\n      origEmit.call(this, eventName, args, function (err) {\n        if (err) this.response.error = err;\n        done.call(this, err);\n      });\n    },\n  \n    /**\n     * @api private\n     */\n    eventParameters: function eventParameters(eventName) {\n      switch (eventName) {\n        case 'restart':\n        case 'validate':\n        case 'sign':\n        case 'build':\n        case 'afterValidate':\n        case 'afterBuild':\n          return [this];\n        case 'error':\n          return [this.response.error, this.response];\n        default:\n          return [this.response];\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    presign: function presign(expires, callback) {\n      if (!callback && typeof expires === 'function') {\n        callback = expires;\n        expires = null;\n      }\n      return new AWS.Signers.Presign().sign(this.toGet(), expires, callback);\n    },\n  \n    /**\n     * @api private\n     */\n    isPresigned: function isPresigned() {\n      return Object.prototype.hasOwnProperty.call(this.httpRequest.headers, 'presigned-expires');\n    },\n  \n    /**\n     * @api private\n     */\n    toUnauthenticated: function toUnauthenticated() {\n      this._unAuthenticated = true;\n      this.removeListener('validate', AWS.EventListeners.Core.VALIDATE_CREDENTIALS);\n      this.removeListener('sign', AWS.EventListeners.Core.SIGN);\n      return this;\n    },\n  \n    /**\n     * @api private\n     */\n    toGet: function toGet() {\n      if (this.service.api.protocol === 'query' ||\n          this.service.api.protocol === 'ec2') {\n        this.removeListener('build', this.buildAsGet);\n        this.addListener('build', this.buildAsGet);\n      }\n      return this;\n    },\n  \n    /**\n     * @api private\n     */\n    buildAsGet: function buildAsGet(request) {\n      request.httpRequest.method = 'GET';\n      request.httpRequest.path = request.service.endpoint.path +\n                                 '?' + request.httpRequest.body;\n      request.httpRequest.body = '';\n  \n      // don't need these headers on a GET request\n      delete request.httpRequest.headers['Content-Length'];\n      delete request.httpRequest.headers['Content-Type'];\n    },\n  \n    /**\n     * @api private\n     */\n    haltHandlersOnError: function haltHandlersOnError() {\n      this._haltHandlersOnError = true;\n    }\n  });\n  \n  /**\n   * @api private\n   */\n  AWS.Request.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n    this.prototype.promise = function promise() {\n      var self = this;\n      // append to user agent\n      this.httpRequest.appendToUserAgent('promise');\n      return new PromiseDependency(function(resolve, reject) {\n        self.on('complete', function(resp) {\n          if (resp.error) {\n            reject(resp.error);\n          } else {\n            // define $response property so that it is not enumberable\n            // this prevents circular reference errors when stringifying the JSON object\n            resolve(Object.defineProperty(\n              resp.data || {},\n              '$response',\n              {value: resp}\n            ));\n          }\n        });\n        self.runTo();\n      });\n    };\n  };\n  \n  /**\n   * @api private\n   */\n  AWS.Request.deletePromisesFromClass = function deletePromisesFromClass() {\n    delete this.prototype.promise;\n  };\n  \n  AWS.util.addPromises(AWS.Request);\n  \n  AWS.util.mixin(AWS.Request, AWS.SequentialExecutor);\n  \n  }).call(this,require('_process'))\n  },{\"./core\":18,\"./state_machine\":70,\"_process\":85,\"jmespath\":84}],56:[function(require,module,exports){\n  /**\n   * Copyright 2012-2013 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\"). You\n   * may not use this file except in compliance with the License. A copy of\n   * the License is located at\n   *\n   *     http://aws.amazon.com/apache2.0/\n   *\n   * or in the \"license\" file accompanying this file. This file is\n   * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n   * ANY KIND, either express or implied. See the License for the specific\n   * language governing permissions and limitations under the License.\n   */\n  \n  var AWS = require('./core');\n  var inherit = AWS.util.inherit;\n  var jmespath = require('jmespath');\n  \n  /**\n   * @api private\n   */\n  function CHECK_ACCEPTORS(resp) {\n    var waiter = resp.request._waiter;\n    var acceptors = waiter.config.acceptors;\n    var acceptorMatched = false;\n    var state = 'retry';\n  \n    acceptors.forEach(function(acceptor) {\n      if (!acceptorMatched) {\n        var matcher = waiter.matchers[acceptor.matcher];\n        if (matcher && matcher(resp, acceptor.expected, acceptor.argument)) {\n          acceptorMatched = true;\n          state = acceptor.state;\n        }\n      }\n    });\n  \n    if (!acceptorMatched && resp.error) state = 'failure';\n  \n    if (state === 'success') {\n      waiter.setSuccess(resp);\n    } else {\n      waiter.setError(resp, state === 'retry');\n    }\n  }\n  \n  /**\n   * @api private\n   */\n  AWS.ResourceWaiter = inherit({\n    /**\n     * Waits for a given state on a service object\n     * @param service [Service] the service object to wait on\n     * @param state [String] the state (defined in waiter configuration) to wait\n     *   for.\n     * @example Create a waiter for running EC2 instances\n     *   var ec2 = new AWS.EC2;\n     *   var waiter = new AWS.ResourceWaiter(ec2, 'instanceRunning');\n     */\n    constructor: function constructor(service, state) {\n      this.service = service;\n      this.state = state;\n      this.loadWaiterConfig(this.state);\n    },\n  \n    service: null,\n  \n    state: null,\n  \n    config: null,\n  \n    matchers: {\n      path: function(resp, expected, argument) {\n        try {\n          var result = jmespath.search(resp.data, argument);\n        } catch (err) {\n          return false;\n        }\n  \n        return jmespath.strictDeepEqual(result,expected);\n      },\n  \n      pathAll: function(resp, expected, argument) {\n        try {\n          var results = jmespath.search(resp.data, argument);\n        } catch (err) {\n          return false;\n        }\n  \n        if (!Array.isArray(results)) results = [results];\n        var numResults = results.length;\n        if (!numResults) return false;\n        for (var ind = 0 ; ind < numResults; ind++) {\n          if (!jmespath.strictDeepEqual(results[ind], expected)) {\n            return false;\n          }\n        }\n        return true;\n      },\n  \n      pathAny: function(resp, expected, argument) {\n        try {\n          var results = jmespath.search(resp.data, argument);\n        } catch (err) {\n          return false;\n        }\n  \n        if (!Array.isArray(results)) results = [results];\n        var numResults = results.length;\n        for (var ind = 0 ; ind < numResults; ind++) {\n          if (jmespath.strictDeepEqual(results[ind], expected)) {\n            return true;\n          }\n        }\n        return false;\n      },\n  \n      status: function(resp, expected) {\n        var statusCode = resp.httpResponse.statusCode;\n        return (typeof statusCode === 'number') && (statusCode === expected);\n      },\n  \n      error: function(resp, expected) {\n        if (typeof expected === 'string' && resp.error) {\n          return expected === resp.error.code;\n        }\n        // if expected is not string, can be boolean indicating presence of error\n        return expected === !!resp.error;\n      }\n    },\n  \n    listeners: new AWS.SequentialExecutor().addNamedListeners(function(add) {\n      add('RETRY_CHECK', 'retry', function(resp) {\n        var waiter = resp.request._waiter;\n        if (resp.error && resp.error.code === 'ResourceNotReady') {\n          resp.error.retryDelay = (waiter.config.delay || 0) * 1000;\n        }\n      });\n  \n      add('CHECK_OUTPUT', 'extractData', CHECK_ACCEPTORS);\n  \n      add('CHECK_ERROR', 'extractError', CHECK_ACCEPTORS);\n    }),\n  \n    /**\n     * @return [AWS.Request]\n     */\n    wait: function wait(params, callback) {\n      if (typeof params === 'function') {\n        callback = params; params = undefined;\n      }\n  \n      if (params && params.$waiter) {\n        params = AWS.util.copy(params);\n        if (typeof params.$waiter.delay === 'number') {\n          this.config.delay = params.$waiter.delay;\n        }\n        if (typeof params.$waiter.maxAttempts === 'number') {\n          this.config.maxAttempts = params.$waiter.maxAttempts;\n        }\n        delete params.$waiter;\n      }\n  \n      var request = this.service.makeRequest(this.config.operation, params);\n      request._waiter = this;\n      request.response.maxRetries = this.config.maxAttempts;\n      request.addListeners(this.listeners);\n  \n      if (callback) request.send(callback);\n      return request;\n    },\n  \n    setSuccess: function setSuccess(resp) {\n      resp.error = null;\n      resp.data = resp.data || {};\n      resp.request.removeAllListeners('extractData');\n    },\n  \n    setError: function setError(resp, retryable) {\n      resp.data = null;\n      resp.error = AWS.util.error(resp.error || new Error(), {\n        code: 'ResourceNotReady',\n        message: 'Resource is not in the state ' + this.state,\n        retryable: retryable\n      });\n    },\n  \n    /**\n     * Loads waiter configuration from API configuration\n     *\n     * @api private\n     */\n    loadWaiterConfig: function loadWaiterConfig(state) {\n      if (!this.service.api.waiters[state]) {\n        throw new AWS.util.error(new Error(), {\n          code: 'StateNotFoundError',\n          message: 'State ' + state + ' not found.'\n        });\n      }\n  \n      this.config = AWS.util.copy(this.service.api.waiters[state]);\n    }\n  });\n  \n  },{\"./core\":18,\"jmespath\":84}],57:[function(require,module,exports){\n  var AWS = require('./core');\n  var inherit = AWS.util.inherit;\n  var jmespath = require('jmespath');\n  \n  /**\n   * This class encapsulates the response information\n   * from a service request operation sent through {AWS.Request}.\n   * The response object has two main properties for getting information\n   * back from a request:\n   *\n   * ## The `data` property\n   *\n   * The `response.data` property contains the serialized object data\n   * retrieved from the service request. For instance, for an\n   * Amazon DynamoDB `listTables` method call, the response data might\n   * look like:\n   *\n   * ```\n   * > resp.data\n   * { TableNames:\n   *    [ 'table1', 'table2', ... ] }\n   * ```\n   *\n   * The `data` property can be null if an error occurs (see below).\n   *\n   * ## The `error` property\n   *\n   * In the event of a service error (or transfer error), the\n   * `response.error` property will be filled with the given\n   * error data in the form:\n   *\n   * ```\n   * { code: 'SHORT_UNIQUE_ERROR_CODE',\n   *   message: 'Some human readable error message' }\n   * ```\n   *\n   * In the case of an error, the `data` property will be `null`.\n   * Note that if you handle events that can be in a failure state,\n   * you should always check whether `response.error` is set\n   * before attempting to access the `response.data` property.\n   *\n   * @!attribute data\n   *   @readonly\n   *   @!group Data Properties\n   *   @note Inside of a {AWS.Request~httpData} event, this\n   *     property contains a single raw packet instead of the\n   *     full de-serialized service response.\n   *   @return [Object] the de-serialized response data\n   *     from the service.\n   *\n   * @!attribute error\n   *   An structure containing information about a service\n   *   or networking error.\n   *   @readonly\n   *   @!group Data Properties\n   *   @note This attribute is only filled if a service or\n   *     networking error occurs.\n   *   @return [Error]\n   *     * code [String] a unique short code representing the\n   *       error that was emitted.\n   *     * message [String] a longer human readable error message\n   *     * retryable [Boolean] whether the error message is\n   *       retryable.\n   *     * statusCode [Numeric] in the case of a request that reached the service,\n   *       this value contains the response status code.\n   *     * time [Date] the date time object when the error occurred.\n   *     * hostname [String] set when a networking error occurs to easily\n   *       identify the endpoint of the request.\n   *     * region [String] set when a networking error occurs to easily\n   *       identify the region of the request.\n   *\n   * @!attribute requestId\n   *   @readonly\n   *   @!group Data Properties\n   *   @return [String] the unique request ID associated with the response.\n   *     Log this value when debugging requests for AWS support.\n   *\n   * @!attribute retryCount\n   *   @readonly\n   *   @!group Operation Properties\n   *   @return [Integer] the number of retries that were\n   *     attempted before the request was completed.\n   *\n   * @!attribute redirectCount\n   *   @readonly\n   *   @!group Operation Properties\n   *   @return [Integer] the number of redirects that were\n   *     followed before the request was completed.\n   *\n   * @!attribute httpResponse\n   *   @readonly\n   *   @!group HTTP Properties\n   *   @return [AWS.HttpResponse] the raw HTTP response object\n   *     containing the response headers and body information\n   *     from the server.\n   *\n   * @see AWS.Request\n   */\n  AWS.Response = inherit({\n  \n    /**\n     * @api private\n     */\n    constructor: function Response(request) {\n      this.request = request;\n      this.data = null;\n      this.error = null;\n      this.retryCount = 0;\n      this.redirectCount = 0;\n      this.httpResponse = new AWS.HttpResponse();\n      if (request) {\n        this.maxRetries = request.service.numRetries();\n        this.maxRedirects = request.service.config.maxRedirects;\n      }\n    },\n  \n    /**\n     * Creates a new request for the next page of response data, calling the\n     * callback with the page data if a callback is provided.\n     *\n     * @callback callback function(err, data)\n     *   Called when a page of data is returned from the next request.\n     *\n     *   @param err [Error] an error object, if an error occurred in the request\n     *   @param data [Object] the next page of data, or null, if there are no\n     *     more pages left.\n     * @return [AWS.Request] the request object for the next page of data\n     * @return [null] if no callback is provided and there are no pages left\n     *   to retrieve.\n     * @since v1.4.0\n     */\n    nextPage: function nextPage(callback) {\n      var config;\n      var service = this.request.service;\n      var operation = this.request.operation;\n      try {\n        config = service.paginationConfig(operation, true);\n      } catch (e) { this.error = e; }\n  \n      if (!this.hasNextPage()) {\n        if (callback) callback(this.error, null);\n        else if (this.error) throw this.error;\n        return null;\n      }\n  \n      var params = AWS.util.copy(this.request.params);\n      if (!this.nextPageTokens) {\n        return callback ? callback(null, null) : null;\n      } else {\n        var inputTokens = config.inputToken;\n        if (typeof inputTokens === 'string') inputTokens = [inputTokens];\n        for (var i = 0; i < inputTokens.length; i++) {\n          params[inputTokens[i]] = this.nextPageTokens[i];\n        }\n        return service.makeRequest(this.request.operation, params, callback);\n      }\n    },\n  \n    /**\n     * @return [Boolean] whether more pages of data can be returned by further\n     *   requests\n     * @since v1.4.0\n     */\n    hasNextPage: function hasNextPage() {\n      this.cacheNextPageTokens();\n      if (this.nextPageTokens) return true;\n      if (this.nextPageTokens === undefined) return undefined;\n      else return false;\n    },\n  \n    /**\n     * @api private\n     */\n    cacheNextPageTokens: function cacheNextPageTokens() {\n      if (Object.prototype.hasOwnProperty.call(this, 'nextPageTokens')) return this.nextPageTokens;\n      this.nextPageTokens = undefined;\n  \n      var config = this.request.service.paginationConfig(this.request.operation);\n      if (!config) return this.nextPageTokens;\n  \n      this.nextPageTokens = null;\n      if (config.moreResults) {\n        if (!jmespath.search(this.data, config.moreResults)) {\n          return this.nextPageTokens;\n        }\n      }\n  \n      var exprs = config.outputToken;\n      if (typeof exprs === 'string') exprs = [exprs];\n      AWS.util.arrayEach.call(this, exprs, function (expr) {\n        var output = jmespath.search(this.data, expr);\n        if (output) {\n          this.nextPageTokens = this.nextPageTokens || [];\n          this.nextPageTokens.push(output);\n        }\n      });\n  \n      return this.nextPageTokens;\n    }\n  \n  });\n  \n  },{\"./core\":18,\"jmespath\":84}],58:[function(require,module,exports){\n  var AWS = require('./core');\n  \n  /**\n   * @api private\n   * @!method on(eventName, callback)\n   *   Registers an event listener callback for the event given by `eventName`.\n   *   Parameters passed to the callback function depend on the individual event\n   *   being triggered. See the event documentation for those parameters.\n   *\n   *   @param eventName [String] the event name to register the listener for\n   *   @param callback [Function] the listener callback function\n   *   @param toHead [Boolean] attach the listener callback to the head of callback array if set to true.\n   *     Default to be false.\n   *   @return [AWS.SequentialExecutor] the same object for chaining\n   */\n  AWS.SequentialExecutor = AWS.util.inherit({\n  \n    constructor: function SequentialExecutor() {\n      this._events = {};\n    },\n  \n    /**\n     * @api private\n     */\n    listeners: function listeners(eventName) {\n      return this._events[eventName] ? this._events[eventName].slice(0) : [];\n    },\n  \n    on: function on(eventName, listener, toHead) {\n      if (this._events[eventName]) {\n        toHead ?\n          this._events[eventName].unshift(listener) :\n          this._events[eventName].push(listener);\n      } else {\n        this._events[eventName] = [listener];\n      }\n      return this;\n    },\n  \n    onAsync: function onAsync(eventName, listener, toHead) {\n      listener._isAsync = true;\n      return this.on(eventName, listener, toHead);\n    },\n  \n    removeListener: function removeListener(eventName, listener) {\n      var listeners = this._events[eventName];\n      if (listeners) {\n        var length = listeners.length;\n        var position = -1;\n        for (var i = 0; i < length; ++i) {\n          if (listeners[i] === listener) {\n            position = i;\n          }\n        }\n        if (position > -1) {\n          listeners.splice(position, 1);\n        }\n      }\n      return this;\n    },\n  \n    removeAllListeners: function removeAllListeners(eventName) {\n      if (eventName) {\n        delete this._events[eventName];\n      } else {\n        this._events = {};\n      }\n      return this;\n    },\n  \n    /**\n     * @api private\n     */\n    emit: function emit(eventName, eventArgs, doneCallback) {\n      if (!doneCallback) doneCallback = function() { };\n      var listeners = this.listeners(eventName);\n      var count = listeners.length;\n      this.callListeners(listeners, eventArgs, doneCallback);\n      return count > 0;\n    },\n  \n    /**\n     * @api private\n     */\n    callListeners: function callListeners(listeners, args, doneCallback, prevError) {\n      var self = this;\n      var error = prevError || null;\n  \n      function callNextListener(err) {\n        if (err) {\n          error = AWS.util.error(error || new Error(), err);\n          if (self._haltHandlersOnError) {\n            return doneCallback.call(self, error);\n          }\n        }\n        self.callListeners(listeners, args, doneCallback, error);\n      }\n  \n      while (listeners.length > 0) {\n        var listener = listeners.shift();\n        if (listener._isAsync) { // asynchronous listener\n          listener.apply(self, args.concat([callNextListener]));\n          return; // stop here, callNextListener will continue\n        } else { // synchronous listener\n          try {\n            listener.apply(self, args);\n          } catch (err) {\n            error = AWS.util.error(error || new Error(), err);\n          }\n          if (error && self._haltHandlersOnError) {\n            doneCallback.call(self, error);\n            return;\n          }\n        }\n      }\n      doneCallback.call(self, error);\n    },\n  \n    /**\n     * Adds or copies a set of listeners from another list of\n     * listeners or SequentialExecutor object.\n     *\n     * @param listeners [map<String,Array<Function>>, AWS.SequentialExecutor]\n     *   a list of events and callbacks, or an event emitter object\n     *   containing listeners to add to this emitter object.\n     * @return [AWS.SequentialExecutor] the emitter object, for chaining.\n     * @example Adding listeners from a map of listeners\n     *   emitter.addListeners({\n     *     event1: [function() { ... }, function() { ... }],\n     *     event2: [function() { ... }]\n     *   });\n     *   emitter.emit('event1'); // emitter has event1\n     *   emitter.emit('event2'); // emitter has event2\n     * @example Adding listeners from another emitter object\n     *   var emitter1 = new AWS.SequentialExecutor();\n     *   emitter1.on('event1', function() { ... });\n     *   emitter1.on('event2', function() { ... });\n     *   var emitter2 = new AWS.SequentialExecutor();\n     *   emitter2.addListeners(emitter1);\n     *   emitter2.emit('event1'); // emitter2 has event1\n     *   emitter2.emit('event2'); // emitter2 has event2\n     */\n    addListeners: function addListeners(listeners) {\n      var self = this;\n  \n      // extract listeners if parameter is an SequentialExecutor object\n      if (listeners._events) listeners = listeners._events;\n  \n      AWS.util.each(listeners, function(event, callbacks) {\n        if (typeof callbacks === 'function') callbacks = [callbacks];\n        AWS.util.arrayEach(callbacks, function(callback) {\n          self.on(event, callback);\n        });\n      });\n  \n      return self;\n    },\n  \n    /**\n     * Registers an event with {on} and saves the callback handle function\n     * as a property on the emitter object using a given `name`.\n     *\n     * @param name [String] the property name to set on this object containing\n     *   the callback function handle so that the listener can be removed in\n     *   the future.\n     * @param (see on)\n     * @return (see on)\n     * @example Adding a named listener DATA_CALLBACK\n     *   var listener = function() { doSomething(); };\n     *   emitter.addNamedListener('DATA_CALLBACK', 'data', listener);\n     *\n     *   // the following prints: true\n     *   console.log(emitter.DATA_CALLBACK == listener);\n     */\n    addNamedListener: function addNamedListener(name, eventName, callback, toHead) {\n      this[name] = callback;\n      this.addListener(eventName, callback, toHead);\n      return this;\n    },\n  \n    /**\n     * @api private\n     */\n    addNamedAsyncListener: function addNamedAsyncListener(name, eventName, callback, toHead) {\n      callback._isAsync = true;\n      return this.addNamedListener(name, eventName, callback, toHead);\n    },\n  \n    /**\n     * Helper method to add a set of named listeners using\n     * {addNamedListener}. The callback contains a parameter\n     * with a handle to the `addNamedListener` method.\n     *\n     * @callback callback function(add)\n     *   The callback function is called immediately in order to provide\n     *   the `add` function to the block. This simplifies the addition of\n     *   a large group of named listeners.\n     *   @param add [Function] the {addNamedListener} function to call\n     *     when registering listeners.\n     * @example Adding a set of named listeners\n     *   emitter.addNamedListeners(function(add) {\n     *     add('DATA_CALLBACK', 'data', function() { ... });\n     *     add('OTHER', 'otherEvent', function() { ... });\n     *     add('LAST', 'lastEvent', function() { ... });\n     *   });\n     *\n     *   // these properties are now set:\n     *   emitter.DATA_CALLBACK;\n     *   emitter.OTHER;\n     *   emitter.LAST;\n     */\n    addNamedListeners: function addNamedListeners(callback) {\n      var self = this;\n      callback(\n        function() {\n          self.addNamedListener.apply(self, arguments);\n        },\n        function() {\n          self.addNamedAsyncListener.apply(self, arguments);\n        }\n      );\n      return this;\n    }\n  });\n  \n  /**\n   * {on} is the prefered method.\n   * @api private\n   */\n  AWS.SequentialExecutor.prototype.addListener = AWS.SequentialExecutor.prototype.on;\n  \n  /**\n   * @api private\n   */\n  module.exports = AWS.SequentialExecutor;\n  \n  },{\"./core\":18}],59:[function(require,module,exports){\n  (function (process){\n  var AWS = require('./core');\n  var Api = require('./model/api');\n  var regionConfig = require('./region_config');\n  \n  var inherit = AWS.util.inherit;\n  var clientCount = 0;\n  \n  /**\n   * The service class representing an AWS service.\n   *\n   * @class_abstract This class is an abstract class.\n   *\n   * @!attribute apiVersions\n   *   @return [Array<String>] the list of API versions supported by this service.\n   *   @readonly\n   */\n  AWS.Service = inherit({\n    /**\n     * Create a new service object with a configuration object\n     *\n     * @param config [map] a map of configuration options\n     */\n    constructor: function Service(config) {\n      if (!this.loadServiceClass) {\n        throw AWS.util.error(new Error(),\n          'Service must be constructed with `new\\' operator');\n      }\n      var ServiceClass = this.loadServiceClass(config || {});\n      if (ServiceClass) {\n        var originalConfig = AWS.util.copy(config);\n        var svc = new ServiceClass(config);\n        Object.defineProperty(svc, '_originalConfig', {\n          get: function() { return originalConfig; },\n          enumerable: false,\n          configurable: true\n        });\n        svc._clientId = ++clientCount;\n        return svc;\n      }\n      this.initialize(config);\n    },\n  \n    /**\n     * @api private\n     */\n    initialize: function initialize(config) {\n      var svcConfig = AWS.config[this.serviceIdentifier];\n      this.config = new AWS.Config(AWS.config);\n      if (svcConfig) this.config.update(svcConfig, true);\n      if (config) this.config.update(config, true);\n  \n      this.validateService();\n      if (!this.config.endpoint) regionConfig(this);\n  \n      this.config.endpoint = this.endpointFromTemplate(this.config.endpoint);\n      this.setEndpoint(this.config.endpoint);\n      //enable attaching listeners to service client\n      AWS.SequentialExecutor.call(this);\n      AWS.Service.addDefaultMonitoringListeners(this);\n      if ((this.config.clientSideMonitoring || AWS.Service._clientSideMonitoring) && this.publisher) {\n        var publisher = this.publisher;\n        this.addNamedListener('PUBLISH_API_CALL', 'apiCall', function PUBLISH_API_CALL(event) {\n          process.nextTick(function() {publisher.eventHandler(event);});\n        });\n        this.addNamedListener('PUBLISH_API_ATTEMPT', 'apiCallAttempt', function PUBLISH_API_ATTEMPT(event) {\n          process.nextTick(function() {publisher.eventHandler(event);});\n        });\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    validateService: function validateService() {\n    },\n  \n    /**\n     * @api private\n     */\n    loadServiceClass: function loadServiceClass(serviceConfig) {\n      var config = serviceConfig;\n      if (!AWS.util.isEmpty(this.api)) {\n        return null;\n      } else if (config.apiConfig) {\n        return AWS.Service.defineServiceApi(this.constructor, config.apiConfig);\n      } else if (!this.constructor.services) {\n        return null;\n      } else {\n        config = new AWS.Config(AWS.config);\n        config.update(serviceConfig, true);\n        var version = config.apiVersions[this.constructor.serviceIdentifier];\n        version = version || config.apiVersion;\n        return this.getLatestServiceClass(version);\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    getLatestServiceClass: function getLatestServiceClass(version) {\n      version = this.getLatestServiceVersion(version);\n      if (this.constructor.services[version] === null) {\n        AWS.Service.defineServiceApi(this.constructor, version);\n      }\n  \n      return this.constructor.services[version];\n    },\n  \n    /**\n     * @api private\n     */\n    getLatestServiceVersion: function getLatestServiceVersion(version) {\n      if (!this.constructor.services || this.constructor.services.length === 0) {\n        throw new Error('No services defined on ' +\n                        this.constructor.serviceIdentifier);\n      }\n  \n      if (!version) {\n        version = 'latest';\n      } else if (AWS.util.isType(version, Date)) {\n        version = AWS.util.date.iso8601(version).split('T')[0];\n      }\n  \n      if (Object.hasOwnProperty(this.constructor.services, version)) {\n        return version;\n      }\n  \n      var keys = Object.keys(this.constructor.services).sort();\n      var selectedVersion = null;\n      for (var i = keys.length - 1; i >= 0; i--) {\n        // versions that end in \"*\" are not available on disk and can be\n        // skipped, so do not choose these as selectedVersions\n        if (keys[i][keys[i].length - 1] !== '*') {\n          selectedVersion = keys[i];\n        }\n        if (keys[i].substr(0, 10) <= version) {\n          return selectedVersion;\n        }\n      }\n  \n      throw new Error('Could not find ' + this.constructor.serviceIdentifier +\n                      ' API to satisfy version constraint `' + version + '\\'');\n    },\n  \n    /**\n     * @api private\n     */\n    api: {},\n  \n    /**\n     * @api private\n     */\n    defaultRetryCount: 3,\n  \n    /**\n     * @api private\n     */\n    customizeRequests: function customizeRequests(callback) {\n      if (!callback) {\n        this.customRequestHandler = null;\n      } else if (typeof callback === 'function') {\n        this.customRequestHandler = callback;\n      } else {\n        throw new Error('Invalid callback type \\'' + typeof callback + '\\' provided in customizeRequests');\n      }\n    },\n  \n    /**\n     * Calls an operation on a service with the given input parameters.\n     *\n     * @param operation [String] the name of the operation to call on the service.\n     * @param params [map] a map of input options for the operation\n     * @callback callback function(err, data)\n     *   If a callback is supplied, it is called when a response is returned\n     *   from the service.\n     *   @param err [Error] the error object returned from the request.\n     *     Set to `null` if the request is successful.\n     *   @param data [Object] the de-serialized data returned from\n     *     the request. Set to `null` if a request error occurs.\n     */\n    makeRequest: function makeRequest(operation, params, callback) {\n      if (typeof params === 'function') {\n        callback = params;\n        params = null;\n      }\n  \n      params = params || {};\n      if (this.config.params) { // copy only toplevel bound params\n        var rules = this.api.operations[operation];\n        if (rules) {\n          params = AWS.util.copy(params);\n          AWS.util.each(this.config.params, function(key, value) {\n            if (rules.input.members[key]) {\n              if (params[key] === undefined || params[key] === null) {\n                params[key] = value;\n              }\n            }\n          });\n        }\n      }\n  \n      var request = new AWS.Request(this, operation, params);\n      this.addAllRequestListeners(request);\n      this.attachMonitoringEmitter(request);\n      if (callback) request.send(callback);\n      return request;\n    },\n  \n    /**\n     * Calls an operation on a service with the given input parameters, without\n     * any authentication data. This method is useful for \"public\" API operations.\n     *\n     * @param operation [String] the name of the operation to call on the service.\n     * @param params [map] a map of input options for the operation\n     * @callback callback function(err, data)\n     *   If a callback is supplied, it is called when a response is returned\n     *   from the service.\n     *   @param err [Error] the error object returned from the request.\n     *     Set to `null` if the request is successful.\n     *   @param data [Object] the de-serialized data returned from\n     *     the request. Set to `null` if a request error occurs.\n     */\n    makeUnauthenticatedRequest: function makeUnauthenticatedRequest(operation, params, callback) {\n      if (typeof params === 'function') {\n        callback = params;\n        params = {};\n      }\n  \n      var request = this.makeRequest(operation, params).toUnauthenticated();\n      return callback ? request.send(callback) : request;\n    },\n  \n    /**\n     * Waits for a given state\n     *\n     * @param state [String] the state on the service to wait for\n     * @param params [map] a map of parameters to pass with each request\n     * @option params $waiter [map] a map of configuration options for the waiter\n     * @option params $waiter.delay [Number] The number of seconds to wait between\n     *                                       requests\n     * @option params $waiter.maxAttempts [Number] The maximum number of requests\n     *                                             to send while waiting\n     * @callback callback function(err, data)\n     *   If a callback is supplied, it is called when a response is returned\n     *   from the service.\n     *   @param err [Error] the error object returned from the request.\n     *     Set to `null` if the request is successful.\n     *   @param data [Object] the de-serialized data returned from\n     *     the request. Set to `null` if a request error occurs.\n     */\n    waitFor: function waitFor(state, params, callback) {\n      var waiter = new AWS.ResourceWaiter(this, state);\n      return waiter.wait(params, callback);\n    },\n  \n    /**\n     * @api private\n     */\n    addAllRequestListeners: function addAllRequestListeners(request) {\n      var list = [AWS.events, AWS.EventListeners.Core, this.serviceInterface(),\n                  AWS.EventListeners.CorePost];\n      for (var i = 0; i < list.length; i++) {\n        if (list[i]) request.addListeners(list[i]);\n      }\n  \n      // disable parameter validation\n      if (!this.config.paramValidation) {\n        request.removeListener('validate',\n          AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n      }\n  \n      if (this.config.logger) { // add logging events\n        request.addListeners(AWS.EventListeners.Logger);\n      }\n  \n      this.setupRequestListeners(request);\n      // call prototype's customRequestHandler\n      if (typeof this.constructor.prototype.customRequestHandler === 'function') {\n        this.constructor.prototype.customRequestHandler(request);\n      }\n      // call instance's customRequestHandler\n      if (Object.prototype.hasOwnProperty.call(this, 'customRequestHandler') && typeof this.customRequestHandler === 'function') {\n        this.customRequestHandler(request);\n      }\n    },\n  \n    /**\n     * Event recording metrics for a whole API call.\n     * @returns {object} a subset of api call metrics\n     * @api private\n     */\n    apiCallEvent: function apiCallEvent(request) {\n      var api = request.service.api.operations[request.operation];\n      var monitoringEvent = {\n        Type: 'ApiCall',\n        Api: api ? api.name : request.operation,\n        Version: 1,\n        Service: request.service.api.serviceId || request.service.api.endpointPrefix,\n        Region: request.httpRequest.region,\n        MaxRetriesExceeded: 0,\n        UserAgent: request.httpRequest.getUserAgent(),\n      };\n      var response = request.response;\n      if (response.httpResponse.statusCode) {\n        monitoringEvent.FinalHttpStatusCode = response.httpResponse.statusCode;\n      }\n      if (response.error) {\n        var error = response.error;\n        var statusCode = response.httpResponse.statusCode;\n        if (statusCode > 299) {\n          if (error.code) monitoringEvent.FinalAwsException = error.code;\n          if (error.message) monitoringEvent.FinalAwsExceptionMessage = error.message;\n        } else {\n          if (error.code || error.name) monitoringEvent.FinalSdkException = error.code || error.name;\n          if (error.message) monitoringEvent.FinalSdkExceptionMessage = error.message;\n        }\n      }\n      return monitoringEvent;\n    },\n  \n    /**\n     * Event recording metrics for an API call attempt.\n     * @returns {object} a subset of api call attempt metrics\n     * @api private\n     */\n    apiAttemptEvent: function apiAttemptEvent(request) {\n      var api = request.service.api.operations[request.operation];\n      var monitoringEvent = {\n        Type: 'ApiCallAttempt',\n        Api: api ? api.name : request.operation,\n        Version: 1,\n        Service: request.service.api.serviceId || request.service.api.endpointPrefix,\n        Fqdn: request.httpRequest.endpoint.hostname,\n        UserAgent: request.httpRequest.getUserAgent(),\n      };\n      var response = request.response;\n      if (response.httpResponse.statusCode) {\n        monitoringEvent.HttpStatusCode = response.httpResponse.statusCode;\n      }\n      if (\n        !request._unAuthenticated &&\n        request.service.config.credentials &&\n        request.service.config.credentials.accessKeyId\n      ) {\n        monitoringEvent.AccessKey = request.service.config.credentials.accessKeyId;\n      }\n      if (!response.httpResponse.headers) return monitoringEvent;\n      if (request.httpRequest.headers['x-amz-security-token']) {\n        monitoringEvent.SessionToken = request.httpRequest.headers['x-amz-security-token'];\n      }\n      if (response.httpResponse.headers['x-amzn-requestid']) {\n        monitoringEvent.XAmznRequestId = response.httpResponse.headers['x-amzn-requestid'];\n      }\n      if (response.httpResponse.headers['x-amz-request-id']) {\n        monitoringEvent.XAmzRequestId = response.httpResponse.headers['x-amz-request-id'];\n      }\n      if (response.httpResponse.headers['x-amz-id-2']) {\n        monitoringEvent.XAmzId2 = response.httpResponse.headers['x-amz-id-2'];\n      }\n      return monitoringEvent;\n    },\n  \n    /**\n     * Add metrics of failed request.\n     * @api private\n     */\n    attemptFailEvent: function attemptFailEvent(request) {\n      var monitoringEvent = this.apiAttemptEvent(request);\n      var response = request.response;\n      var error = response.error;\n      if (response.httpResponse.statusCode > 299 ) {\n        if (error.code) monitoringEvent.AwsException = error.code;\n        if (error.message) monitoringEvent.AwsExceptionMessage = error.message;\n      } else {\n        if (error.code || error.name) monitoringEvent.SdkException = error.code || error.name;\n        if (error.message) monitoringEvent.SdkExceptionMessage = error.message;\n      }\n      return monitoringEvent;\n    },\n  \n    /**\n     * Attach listeners to request object to fetch metrics of each request\n     * and emit data object through \\'ApiCall\\' and \\'ApiCallAttempt\\' events.\n     * @api private\n     */\n    attachMonitoringEmitter: function attachMonitoringEmitter(request) {\n      var attemptTimestamp; //timestamp marking the beginning of a request attempt\n      var attemptStartRealTime; //Start time of request attempt. Used to calculating attemptLatency\n      var attemptLatency; //latency from request sent out to http response reaching SDK\n      var callStartRealTime; //Start time of API call. Used to calculating API call latency\n      var attemptCount = 0; //request.retryCount is not reliable here\n      var region; //region cache region for each attempt since it can be updated in plase (e.g. s3)\n      var callTimestamp; //timestamp when the request is created\n      var self = this;\n      var addToHead = true;\n  \n      request.on('validate', function () {\n        callStartRealTime = AWS.util.realClock.now();\n        callTimestamp = Date.now();\n      }, addToHead);\n      request.on('sign', function () {\n        attemptStartRealTime = AWS.util.realClock.now();\n        attemptTimestamp = Date.now();\n        region = request.httpRequest.region;\n        attemptCount++;\n      }, addToHead);\n      request.on('validateResponse', function() {\n        attemptLatency = Math.round(AWS.util.realClock.now() - attemptStartRealTime);\n      });\n      request.addNamedListener('API_CALL_ATTEMPT', 'success', function API_CALL_ATTEMPT() {\n        var apiAttemptEvent = self.apiAttemptEvent(request);\n        apiAttemptEvent.Timestamp = attemptTimestamp;\n        apiAttemptEvent.AttemptLatency = attemptLatency >= 0 ? attemptLatency : 0;\n        apiAttemptEvent.Region = region;\n        self.emit('apiCallAttempt', [apiAttemptEvent]);\n      });\n      request.addNamedListener('API_CALL_ATTEMPT_RETRY', 'retry', function API_CALL_ATTEMPT_RETRY() {\n        var apiAttemptEvent = self.attemptFailEvent(request);\n        apiAttemptEvent.Timestamp = attemptTimestamp;\n        //attemptLatency may not be available if fail before response\n        attemptLatency = attemptLatency ||\n          Math.round(AWS.util.realClock.now() - attemptStartRealTime);\n        apiAttemptEvent.AttemptLatency = attemptLatency >= 0 ? attemptLatency : 0;\n        apiAttemptEvent.Region = region;\n        self.emit('apiCallAttempt', [apiAttemptEvent]);\n      });\n      request.addNamedListener('API_CALL', 'complete', function API_CALL() {\n        var apiCallEvent = self.apiCallEvent(request);\n        apiCallEvent.AttemptCount = attemptCount;\n        if (apiCallEvent.AttemptCount <= 0) return;\n        apiCallEvent.Timestamp = callTimestamp;\n        var latency = Math.round(AWS.util.realClock.now() - callStartRealTime);\n        apiCallEvent.Latency = latency >= 0 ? latency : 0;\n        var response = request.response;\n        if (\n          typeof response.retryCount === 'number' &&\n          typeof response.maxRetries === 'number' &&\n          (response.retryCount >= response.maxRetries)\n        ) {\n          apiCallEvent.MaxRetriesExceeded = 1;\n        }\n        self.emit('apiCall', [apiCallEvent]);\n      });\n    },\n  \n    /**\n     * Override this method to setup any custom request listeners for each\n     * new request to the service.\n     *\n     * @method_abstract This is an abstract method.\n     */\n    setupRequestListeners: function setupRequestListeners(request) {\n    },\n  \n    /**\n     * Gets the signer class for a given request\n     * @api private\n     */\n    getSignerClass: function getSignerClass(request) {\n      var version;\n      // get operation authtype if present\n      var operation = null;\n      var authtype = '';\n      if (request) {\n        var operations = request.service.api.operations || {};\n        operation = operations[request.operation] || null;\n        authtype = operation ? operation.authtype : '';\n      }\n      if (this.config.signatureVersion) {\n        version = this.config.signatureVersion;\n      } else if (authtype === 'v4' || authtype === 'v4-unsigned-body') {\n        version = 'v4';\n      } else {\n        version = this.api.signatureVersion;\n      }\n      return AWS.Signers.RequestSigner.getVersion(version);\n    },\n  \n    /**\n     * @api private\n     */\n    serviceInterface: function serviceInterface() {\n      switch (this.api.protocol) {\n        case 'ec2': return AWS.EventListeners.Query;\n        case 'query': return AWS.EventListeners.Query;\n        case 'json': return AWS.EventListeners.Json;\n        case 'rest-json': return AWS.EventListeners.RestJson;\n        case 'rest-xml': return AWS.EventListeners.RestXml;\n      }\n      if (this.api.protocol) {\n        throw new Error('Invalid service `protocol\\' ' +\n          this.api.protocol + ' in API config');\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    successfulResponse: function successfulResponse(resp) {\n      return resp.httpResponse.statusCode < 300;\n    },\n  \n    /**\n     * How many times a failed request should be retried before giving up.\n     * the defaultRetryCount can be overriden by service classes.\n     *\n     * @api private\n     */\n    numRetries: function numRetries() {\n      if (this.config.maxRetries !== undefined) {\n        return this.config.maxRetries;\n      } else {\n        return this.defaultRetryCount;\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    retryDelays: function retryDelays(retryCount) {\n      return AWS.util.calculateRetryDelay(retryCount, this.config.retryDelayOptions);\n    },\n  \n    /**\n     * @api private\n     */\n    retryableError: function retryableError(error) {\n      if (this.timeoutError(error)) return true;\n      if (this.networkingError(error)) return true;\n      if (this.expiredCredentialsError(error)) return true;\n      if (this.throttledError(error)) return true;\n      if (error.statusCode >= 500) return true;\n      if (error.statusCode === 403) return true;\n      return false;\n    },\n  \n    /**\n     * @api private\n     */\n    networkingError: function networkingError(error) {\n      return error.code === 'NetworkingError';\n    },\n  \n    /**\n     * @api private\n     */\n    timeoutError: function timeoutError(error) {\n      return error.code === 'TimeoutError';\n    },\n  \n    /**\n     * @api private\n     */\n    expiredCredentialsError: function expiredCredentialsError(error) {\n      // TODO : this only handles *one* of the expired credential codes\n      return (error.code === 'ExpiredTokenException');\n    },\n  \n    /**\n     * @api private\n     */\n    clockSkewError: function clockSkewError(error) {\n      switch (error.code) {\n        case 'RequestTimeTooSkewed':\n        case 'RequestExpired':\n        case 'InvalidSignatureException':\n        case 'SignatureDoesNotMatch':\n        case 'AuthFailure':\n        case 'RequestInTheFuture':\n          return true;\n        default: return false;\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    getSkewCorrectedDate: function getSkewCorrectedDate() {\n      return new Date(Date.now() + this.config.systemClockOffset);\n    },\n  \n    /**\n     * @api private\n     */\n    applyClockOffset: function applyClockOffset(newServerTime) {\n      if (newServerTime) {\n        this.config.systemClockOffset = newServerTime - Date.now();\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    isClockSkewed: function isClockSkewed(newServerTime) {\n      if (newServerTime) {\n        return Math.abs(this.getSkewCorrectedDate().getTime() - newServerTime) >= 30000;\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    throttledError: function throttledError(error) {\n      // this logic varies between services\n      if (error.statusCode === 429) return true;\n      switch (error.code) {\n        case 'ProvisionedThroughputExceededException':\n        case 'Throttling':\n        case 'ThrottlingException':\n        case 'RequestLimitExceeded':\n        case 'RequestThrottled':\n        case 'RequestThrottledException':\n        case 'TooManyRequestsException':\n        case 'TransactionInProgressException': //dynamodb\n          return true;\n        default:\n          return false;\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    endpointFromTemplate: function endpointFromTemplate(endpoint) {\n      if (typeof endpoint !== 'string') return endpoint;\n  \n      var e = endpoint;\n      e = e.replace(/\\{service\\}/g, this.api.endpointPrefix);\n      e = e.replace(/\\{region\\}/g, this.config.region);\n      e = e.replace(/\\{scheme\\}/g, this.config.sslEnabled ? 'https' : 'http');\n      return e;\n    },\n  \n    /**\n     * @api private\n     */\n    setEndpoint: function setEndpoint(endpoint) {\n      this.endpoint = new AWS.Endpoint(endpoint, this.config);\n    },\n  \n    /**\n     * @api private\n     */\n    paginationConfig: function paginationConfig(operation, throwException) {\n      var paginator = this.api.operations[operation].paginator;\n      if (!paginator) {\n        if (throwException) {\n          var e = new Error();\n          throw AWS.util.error(e, 'No pagination configuration for ' + operation);\n        }\n        return null;\n      }\n  \n      return paginator;\n    }\n  });\n  \n  AWS.util.update(AWS.Service, {\n  \n    /**\n     * Adds one method for each operation described in the api configuration\n     *\n     * @api private\n     */\n    defineMethods: function defineMethods(svc) {\n      AWS.util.each(svc.prototype.api.operations, function iterator(method) {\n        if (svc.prototype[method]) return;\n        var operation = svc.prototype.api.operations[method];\n        if (operation.authtype === 'none') {\n          svc.prototype[method] = function (params, callback) {\n            return this.makeUnauthenticatedRequest(method, params, callback);\n          };\n        } else {\n          svc.prototype[method] = function (params, callback) {\n            return this.makeRequest(method, params, callback);\n          };\n        }\n      });\n    },\n  \n    /**\n     * Defines a new Service class using a service identifier and list of versions\n     * including an optional set of features (functions) to apply to the class\n     * prototype.\n     *\n     * @param serviceIdentifier [String] the identifier for the service\n     * @param versions [Array<String>] a list of versions that work with this\n     *   service\n     * @param features [Object] an object to attach to the prototype\n     * @return [Class<Service>] the service class defined by this function.\n     */\n    defineService: function defineService(serviceIdentifier, versions, features) {\n      AWS.Service._serviceMap[serviceIdentifier] = true;\n      if (!Array.isArray(versions)) {\n        features = versions;\n        versions = [];\n      }\n  \n      var svc = inherit(AWS.Service, features || {});\n  \n      if (typeof serviceIdentifier === 'string') {\n        AWS.Service.addVersions(svc, versions);\n  \n        var identifier = svc.serviceIdentifier || serviceIdentifier;\n        svc.serviceIdentifier = identifier;\n      } else { // defineService called with an API\n        svc.prototype.api = serviceIdentifier;\n        AWS.Service.defineMethods(svc);\n      }\n      AWS.SequentialExecutor.call(this.prototype);\n      //util.clientSideMonitoring is only available in node\n      if (!this.prototype.publisher && AWS.util.clientSideMonitoring) {\n        var Publisher = AWS.util.clientSideMonitoring.Publisher;\n        var configProvider = AWS.util.clientSideMonitoring.configProvider;\n        var publisherConfig = configProvider();\n        this.prototype.publisher = new Publisher(publisherConfig);\n        if (publisherConfig.enabled) {\n          //if csm is enabled in environment, SDK should send all metrics\n          AWS.Service._clientSideMonitoring = true;\n        }\n      }\n      AWS.SequentialExecutor.call(svc.prototype);\n      AWS.Service.addDefaultMonitoringListeners(svc.prototype);\n      return svc;\n    },\n  \n    /**\n     * @api private\n     */\n    addVersions: function addVersions(svc, versions) {\n      if (!Array.isArray(versions)) versions = [versions];\n  \n      svc.services = svc.services || {};\n      for (var i = 0; i < versions.length; i++) {\n        if (svc.services[versions[i]] === undefined) {\n          svc.services[versions[i]] = null;\n        }\n      }\n  \n      svc.apiVersions = Object.keys(svc.services).sort();\n    },\n  \n    /**\n     * @api private\n     */\n    defineServiceApi: function defineServiceApi(superclass, version, apiConfig) {\n      var svc = inherit(superclass, {\n        serviceIdentifier: superclass.serviceIdentifier\n      });\n  \n      function setApi(api) {\n        if (api.isApi) {\n          svc.prototype.api = api;\n        } else {\n          svc.prototype.api = new Api(api);\n        }\n      }\n  \n      if (typeof version === 'string') {\n        if (apiConfig) {\n          setApi(apiConfig);\n        } else {\n          try {\n            setApi(AWS.apiLoader(superclass.serviceIdentifier, version));\n          } catch (err) {\n            throw AWS.util.error(err, {\n              message: 'Could not find API configuration ' +\n                superclass.serviceIdentifier + '-' + version\n            });\n          }\n        }\n        if (!Object.prototype.hasOwnProperty.call(superclass.services, version)) {\n          superclass.apiVersions = superclass.apiVersions.concat(version).sort();\n        }\n        superclass.services[version] = svc;\n      } else {\n        setApi(version);\n      }\n  \n      AWS.Service.defineMethods(svc);\n      return svc;\n    },\n  \n    /**\n     * @api private\n     */\n    hasService: function(identifier) {\n      return Object.prototype.hasOwnProperty.call(AWS.Service._serviceMap, identifier);\n    },\n  \n    /**\n     * @param attachOn attach default monitoring listeners to object\n     *\n     * Each monitoring event should be emitted from service client to service constructor prototype and then\n     * to global service prototype like bubbling up. These default monitoring events listener will transfer\n     * the monitoring events to the upper layer.\n     * @api private\n     */\n    addDefaultMonitoringListeners: function addDefaultMonitoringListeners(attachOn) {\n      attachOn.addNamedListener('MONITOR_EVENTS_BUBBLE', 'apiCallAttempt', function EVENTS_BUBBLE(event) {\n        var baseClass = Object.getPrototypeOf(attachOn);\n        if (baseClass._events) baseClass.emit('apiCallAttempt', [event]);\n      });\n      attachOn.addNamedListener('CALL_EVENTS_BUBBLE', 'apiCall', function CALL_EVENTS_BUBBLE(event) {\n        var baseClass = Object.getPrototypeOf(attachOn);\n        if (baseClass._events) baseClass.emit('apiCall', [event]);\n      });\n    },\n  \n    /**\n     * @api private\n     */\n    _serviceMap: {}\n  });\n  \n  AWS.util.mixin(AWS.Service, AWS.SequentialExecutor);\n  \n  /**\n   * @api private\n   */\n  module.exports = AWS.Service;\n  \n  }).call(this,require('_process'))\n  },{\"./core\":18,\"./model/api\":38,\"./region_config\":53,\"_process\":85}],60:[function(require,module,exports){\n  var AWS = require('../core');\n  \n  AWS.util.update(AWS.CognitoIdentity.prototype, {\n    getOpenIdToken: function getOpenIdToken(params, callback) {\n      return this.makeUnauthenticatedRequest('getOpenIdToken', params, callback);\n    },\n  \n    getId: function getId(params, callback) {\n      return this.makeUnauthenticatedRequest('getId', params, callback);\n    },\n  \n    getCredentialsForIdentity: function getCredentialsForIdentity(params, callback) {\n      return this.makeUnauthenticatedRequest('getCredentialsForIdentity', params, callback);\n    }\n  });\n  \n  },{\"../core\":18}],61:[function(require,module,exports){\n  (function (process){\n  var AWS = require('../core');\n  var regionConfig = require('../region_config');\n  var ENV_REGIONAL_ENDPOINT_ENABLED = 'AWS_STS_REGIONAL_ENDPOINTS';\n  var CONFIG_REGIONAL_ENDPOINT_ENABLED = 'sts_regional_endpoints';\n  \n  AWS.util.update(AWS.STS.prototype, {\n    /**\n     * @overload credentialsFrom(data, credentials = null)\n     *   Creates a credentials object from STS response data containing\n     *   credentials information. Useful for quickly setting AWS credentials.\n     *\n     *   @note This is a low-level utility function. If you want to load temporary\n     *     credentials into your process for subsequent requests to AWS resources,\n     *     you should use {AWS.TemporaryCredentials} instead.\n     *   @param data [map] data retrieved from a call to {getFederatedToken},\n     *     {getSessionToken}, {assumeRole}, or {assumeRoleWithWebIdentity}.\n     *   @param credentials [AWS.Credentials] an optional credentials object to\n     *     fill instead of creating a new object. Useful when modifying an\n     *     existing credentials object from a refresh call.\n     *   @return [AWS.TemporaryCredentials] the set of temporary credentials\n     *     loaded from a raw STS operation response.\n     *   @example Using credentialsFrom to load global AWS credentials\n     *     var sts = new AWS.STS();\n     *     sts.getSessionToken(function (err, data) {\n     *       if (err) console.log(\"Error getting credentials\");\n     *       else {\n     *         AWS.config.credentials = sts.credentialsFrom(data);\n     *       }\n     *     });\n     *   @see AWS.TemporaryCredentials\n     */\n    credentialsFrom: function credentialsFrom(data, credentials) {\n      if (!data) return null;\n      if (!credentials) credentials = new AWS.TemporaryCredentials();\n      credentials.expired = false;\n      credentials.accessKeyId = data.Credentials.AccessKeyId;\n      credentials.secretAccessKey = data.Credentials.SecretAccessKey;\n      credentials.sessionToken = data.Credentials.SessionToken;\n      credentials.expireTime = data.Credentials.Expiration;\n      return credentials;\n    },\n  \n    assumeRoleWithWebIdentity: function assumeRoleWithWebIdentity(params, callback) {\n      return this.makeUnauthenticatedRequest('assumeRoleWithWebIdentity', params, callback);\n    },\n  \n    assumeRoleWithSAML: function assumeRoleWithSAML(params, callback) {\n      return this.makeUnauthenticatedRequest('assumeRoleWithSAML', params, callback);\n    },\n  \n    /**\n     * @api private\n     */\n    validateRegionalEndpointsFlagValue: function validateRegionalEndpointsFlagValue(configValue, errorOptions) {\n      if (typeof configValue === 'string' && ['legacy', 'regional'].indexOf(configValue.toLowerCase()) >= 0) {\n        this.config.stsRegionalEndpoints = configValue.toLowerCase();\n        return;\n      } else {\n        throw AWS.util.error(new Error(), errorOptions);\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    validateRegionalEndpointsFlag: function validateRegionalEndpointsFlag() {\n      //validate config value\n      var config = this.config;\n      if (config.stsRegionalEndpoints) {\n        this.validateRegionalEndpointsFlagValue(config.stsRegionalEndpoints, {\n          code: 'InvalidConfiguration',\n          message: 'invalid \"stsRegionalEndpoints\" configuration. Expect \"legacy\" ' +\n          ' or \"regional\". Got \"' + config.stsRegionalEndpoints + '\".'\n        });\n      }\n      if (!AWS.util.isNode()) return;\n      //validate environmental variable\n      if (Object.prototype.hasOwnProperty.call(process.env, ENV_REGIONAL_ENDPOINT_ENABLED)) {\n        var envFlag = process.env[ENV_REGIONAL_ENDPOINT_ENABLED];\n        this.validateRegionalEndpointsFlagValue(envFlag, {\n          code: 'InvalidEnvironmentalVariable',\n          message: 'invalid ' + ENV_REGIONAL_ENDPOINT_ENABLED + ' environmental variable. Expect \"legacy\" ' +\n          ' or \"regional\". Got \"' + process.env[ENV_REGIONAL_ENDPOINT_ENABLED] + '\".'\n        });\n      }\n      //validate shared config file\n      var profile = {};\n      try {\n        var profiles = AWS.util.getProfilesFromSharedConfig(AWS.util.iniLoader);\n        profile = profiles[process.env.AWS_PROFILE || AWS.util.defaultProfile];\n      } catch (e) {};\n      if (profile && Object.prototype.hasOwnProperty.call(profile, CONFIG_REGIONAL_ENDPOINT_ENABLED)) {\n        var fileFlag = profile[CONFIG_REGIONAL_ENDPOINT_ENABLED];\n        this.validateRegionalEndpointsFlagValue(fileFlag, {\n          code: 'InvalidConfiguration',\n          message: 'invalid '+CONFIG_REGIONAL_ENDPOINT_ENABLED+' profile config. Expect \"legacy\" ' +\n          ' or \"regional\". Got \"' + profile[CONFIG_REGIONAL_ENDPOINT_ENABLED] + '\".'\n        });\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    optInRegionalEndpoint: function optInRegionalEndpoint() {\n      this.validateRegionalEndpointsFlag();\n      var config = this.config;\n      if (config.stsRegionalEndpoints === 'regional') {\n        regionConfig(this);\n        if (!this.isGlobalEndpoint) return;\n        this.isGlobalEndpoint = false;\n        //client will throw if region is not supplied; request will be signed with specified region\n        if (!config.region) {\n          throw AWS.util.error(new Error(),\n            {code: 'ConfigError', message: 'Missing region in config'});\n        }\n        var insertPoint = config.endpoint.indexOf('.amazonaws.com');\n        config.endpoint = config.endpoint.substring(0, insertPoint) +\n          '.' + config.region + config.endpoint.substring(insertPoint);\n      }\n    },\n  \n    validateService: function validateService() {\n      this.optInRegionalEndpoint();\n    }\n  \n  });\n  \n  }).call(this,require('_process'))\n  },{\"../core\":18,\"../region_config\":53,\"_process\":85}],62:[function(require,module,exports){\n  var AWS = require('../core');\n  var inherit = AWS.util.inherit;\n  \n  /**\n   * @api private\n   */\n  var expiresHeader = 'presigned-expires';\n  \n  /**\n   * @api private\n   */\n  function signedUrlBuilder(request) {\n    var expires = request.httpRequest.headers[expiresHeader];\n    var signerClass = request.service.getSignerClass(request);\n  \n    delete request.httpRequest.headers['User-Agent'];\n    delete request.httpRequest.headers['X-Amz-User-Agent'];\n  \n    if (signerClass === AWS.Signers.V4) {\n      if (expires > 604800) { // one week expiry is invalid\n        var message = 'Presigning does not support expiry time greater ' +\n                      'than a week with SigV4 signing.';\n        throw AWS.util.error(new Error(), {\n          code: 'InvalidExpiryTime', message: message, retryable: false\n        });\n      }\n      request.httpRequest.headers[expiresHeader] = expires;\n    } else if (signerClass === AWS.Signers.S3) {\n      var now = request.service ? request.service.getSkewCorrectedDate() : AWS.util.date.getDate();\n      request.httpRequest.headers[expiresHeader] = parseInt(\n        AWS.util.date.unixTimestamp(now) + expires, 10).toString();\n    } else {\n      throw AWS.util.error(new Error(), {\n        message: 'Presigning only supports S3 or SigV4 signing.',\n        code: 'UnsupportedSigner', retryable: false\n      });\n    }\n  }\n  \n  /**\n   * @api private\n   */\n  function signedUrlSigner(request) {\n    var endpoint = request.httpRequest.endpoint;\n    var parsedUrl = AWS.util.urlParse(request.httpRequest.path);\n    var queryParams = {};\n  \n    if (parsedUrl.search) {\n      queryParams = AWS.util.queryStringParse(parsedUrl.search.substr(1));\n    }\n  \n    var auth = request.httpRequest.headers['Authorization'].split(' ');\n    if (auth[0] === 'AWS') {\n      auth = auth[1].split(':');\n      queryParams['AWSAccessKeyId'] = auth[0];\n      queryParams['Signature'] = auth[1];\n  \n      AWS.util.each(request.httpRequest.headers, function (key, value) {\n        if (key === expiresHeader) key = 'Expires';\n        if (key.indexOf('x-amz-meta-') === 0) {\n          // Delete existing, potentially not normalized key\n          delete queryParams[key];\n          key = key.toLowerCase();\n        }\n        queryParams[key] = value;\n      });\n      delete request.httpRequest.headers[expiresHeader];\n      delete queryParams['Authorization'];\n      delete queryParams['Host'];\n    } else if (auth[0] === 'AWS4-HMAC-SHA256') { // SigV4 signing\n      auth.shift();\n      var rest = auth.join(' ');\n      var signature = rest.match(/Signature=(.*?)(?:,|\\s|\\r?\\n|$)/)[1];\n      queryParams['X-Amz-Signature'] = signature;\n      delete queryParams['Expires'];\n    }\n  \n    // build URL\n    endpoint.pathname = parsedUrl.pathname;\n    endpoint.search = AWS.util.queryParamsToString(queryParams);\n  }\n  \n  /**\n   * @api private\n   */\n  AWS.Signers.Presign = inherit({\n    /**\n     * @api private\n     */\n    sign: function sign(request, expireTime, callback) {\n      request.httpRequest.headers[expiresHeader] = expireTime || 3600;\n      request.on('build', signedUrlBuilder);\n      request.on('sign', signedUrlSigner);\n      request.removeListener('afterBuild',\n        AWS.EventListeners.Core.SET_CONTENT_LENGTH);\n      request.removeListener('afterBuild',\n        AWS.EventListeners.Core.COMPUTE_SHA256);\n  \n      request.emit('beforePresign', [request]);\n  \n      if (callback) {\n        request.build(function() {\n          if (this.response.error) callback(this.response.error);\n          else {\n            callback(null, AWS.util.urlFormat(request.httpRequest.endpoint));\n          }\n        });\n      } else {\n        request.build();\n        if (request.response.error) throw request.response.error;\n        return AWS.util.urlFormat(request.httpRequest.endpoint);\n      }\n    }\n  });\n  \n  /**\n   * @api private\n   */\n  module.exports = AWS.Signers.Presign;\n  \n  },{\"../core\":18}],63:[function(require,module,exports){\n  var AWS = require('../core');\n  \n  var inherit = AWS.util.inherit;\n  \n  /**\n   * @api private\n   */\n  AWS.Signers.RequestSigner = inherit({\n    constructor: function RequestSigner(request) {\n      this.request = request;\n    },\n  \n    setServiceClientId: function setServiceClientId(id) {\n      this.serviceClientId = id;\n    },\n  \n    getServiceClientId: function getServiceClientId() {\n      return this.serviceClientId;\n    }\n  });\n  \n  AWS.Signers.RequestSigner.getVersion = function getVersion(version) {\n    switch (version) {\n      case 'v2': return AWS.Signers.V2;\n      case 'v3': return AWS.Signers.V3;\n      case 's3v4': return AWS.Signers.V4;\n      case 'v4': return AWS.Signers.V4;\n      case 's3': return AWS.Signers.S3;\n      case 'v3https': return AWS.Signers.V3Https;\n    }\n    throw new Error('Unknown signing version ' + version);\n  };\n  \n  require('./v2');\n  require('./v3');\n  require('./v3https');\n  require('./v4');\n  require('./s3');\n  require('./presign');\n  \n  },{\"../core\":18,\"./presign\":62,\"./s3\":64,\"./v2\":65,\"./v3\":66,\"./v3https\":67,\"./v4\":68}],64:[function(require,module,exports){\n  var AWS = require('../core');\n  var inherit = AWS.util.inherit;\n  \n  /**\n   * @api private\n   */\n  AWS.Signers.S3 = inherit(AWS.Signers.RequestSigner, {\n    /**\n     * When building the stringToSign, these sub resource params should be\n     * part of the canonical resource string with their NON-decoded values\n     */\n    subResources: {\n      'acl': 1,\n      'accelerate': 1,\n      'analytics': 1,\n      'cors': 1,\n      'lifecycle': 1,\n      'delete': 1,\n      'inventory': 1,\n      'location': 1,\n      'logging': 1,\n      'metrics': 1,\n      'notification': 1,\n      'partNumber': 1,\n      'policy': 1,\n      'requestPayment': 1,\n      'replication': 1,\n      'restore': 1,\n      'tagging': 1,\n      'torrent': 1,\n      'uploadId': 1,\n      'uploads': 1,\n      'versionId': 1,\n      'versioning': 1,\n      'versions': 1,\n      'website': 1\n    },\n  \n    // when building the stringToSign, these querystring params should be\n    // part of the canonical resource string with their NON-encoded values\n    responseHeaders: {\n      'response-content-type': 1,\n      'response-content-language': 1,\n      'response-expires': 1,\n      'response-cache-control': 1,\n      'response-content-disposition': 1,\n      'response-content-encoding': 1\n    },\n  \n    addAuthorization: function addAuthorization(credentials, date) {\n      if (!this.request.headers['presigned-expires']) {\n        this.request.headers['X-Amz-Date'] = AWS.util.date.rfc822(date);\n      }\n  \n      if (credentials.sessionToken) {\n        // presigned URLs require this header to be lowercased\n        this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n      }\n  \n      var signature = this.sign(credentials.secretAccessKey, this.stringToSign());\n      var auth = 'AWS ' + credentials.accessKeyId + ':' + signature;\n  \n      this.request.headers['Authorization'] = auth;\n    },\n  \n    stringToSign: function stringToSign() {\n      var r = this.request;\n  \n      var parts = [];\n      parts.push(r.method);\n      parts.push(r.headers['Content-MD5'] || '');\n      parts.push(r.headers['Content-Type'] || '');\n  \n      // This is the \"Date\" header, but we use X-Amz-Date.\n      // The S3 signing mechanism requires us to pass an empty\n      // string for this Date header regardless.\n      parts.push(r.headers['presigned-expires'] || '');\n  \n      var headers = this.canonicalizedAmzHeaders();\n      if (headers) parts.push(headers);\n      parts.push(this.canonicalizedResource());\n  \n      return parts.join('\\n');\n  \n    },\n  \n    canonicalizedAmzHeaders: function canonicalizedAmzHeaders() {\n  \n      var amzHeaders = [];\n  \n      AWS.util.each(this.request.headers, function (name) {\n        if (name.match(/^x-amz-/i))\n          amzHeaders.push(name);\n      });\n  \n      amzHeaders.sort(function (a, b) {\n        return a.toLowerCase() < b.toLowerCase() ? -1 : 1;\n      });\n  \n      var parts = [];\n      AWS.util.arrayEach.call(this, amzHeaders, function (name) {\n        parts.push(name.toLowerCase() + ':' + String(this.request.headers[name]));\n      });\n  \n      return parts.join('\\n');\n  \n    },\n  \n    canonicalizedResource: function canonicalizedResource() {\n  \n      var r = this.request;\n  \n      var parts = r.path.split('?');\n      var path = parts[0];\n      var querystring = parts[1];\n  \n      var resource = '';\n  \n      if (r.virtualHostedBucket)\n        resource += '/' + r.virtualHostedBucket;\n  \n      resource += path;\n  \n      if (querystring) {\n  \n        // collect a list of sub resources and query params that need to be signed\n        var resources = [];\n  \n        AWS.util.arrayEach.call(this, querystring.split('&'), function (param) {\n          var name = param.split('=')[0];\n          var value = param.split('=')[1];\n          if (this.subResources[name] || this.responseHeaders[name]) {\n            var subresource = { name: name };\n            if (value !== undefined) {\n              if (this.subResources[name]) {\n                subresource.value = value;\n              } else {\n                subresource.value = decodeURIComponent(value);\n              }\n            }\n            resources.push(subresource);\n          }\n        });\n  \n        resources.sort(function (a, b) { return a.name < b.name ? -1 : 1; });\n  \n        if (resources.length) {\n  \n          querystring = [];\n          AWS.util.arrayEach(resources, function (res) {\n            if (res.value === undefined) {\n              querystring.push(res.name);\n            } else {\n              querystring.push(res.name + '=' + res.value);\n            }\n          });\n  \n          resource += '?' + querystring.join('&');\n        }\n  \n      }\n  \n      return resource;\n  \n    },\n  \n    sign: function sign(secret, string) {\n      return AWS.util.crypto.hmac(secret, string, 'base64', 'sha1');\n    }\n  });\n  \n  /**\n   * @api private\n   */\n  module.exports = AWS.Signers.S3;\n  \n  },{\"../core\":18}],65:[function(require,module,exports){\n  var AWS = require('../core');\n  var inherit = AWS.util.inherit;\n  \n  /**\n   * @api private\n   */\n  AWS.Signers.V2 = inherit(AWS.Signers.RequestSigner, {\n    addAuthorization: function addAuthorization(credentials, date) {\n  \n      if (!date) date = AWS.util.date.getDate();\n  \n      var r = this.request;\n  \n      r.params.Timestamp = AWS.util.date.iso8601(date);\n      r.params.SignatureVersion = '2';\n      r.params.SignatureMethod = 'HmacSHA256';\n      r.params.AWSAccessKeyId = credentials.accessKeyId;\n  \n      if (credentials.sessionToken) {\n        r.params.SecurityToken = credentials.sessionToken;\n      }\n  \n      delete r.params.Signature; // delete old Signature for re-signing\n      r.params.Signature = this.signature(credentials);\n  \n      r.body = AWS.util.queryParamsToString(r.params);\n      r.headers['Content-Length'] = r.body.length;\n    },\n  \n    signature: function signature(credentials) {\n      return AWS.util.crypto.hmac(credentials.secretAccessKey, this.stringToSign(), 'base64');\n    },\n  \n    stringToSign: function stringToSign() {\n      var parts = [];\n      parts.push(this.request.method);\n      parts.push(this.request.endpoint.host.toLowerCase());\n      parts.push(this.request.pathname());\n      parts.push(AWS.util.queryParamsToString(this.request.params));\n      return parts.join('\\n');\n    }\n  \n  });\n  \n  /**\n   * @api private\n   */\n  module.exports = AWS.Signers.V2;\n  \n  },{\"../core\":18}],66:[function(require,module,exports){\n  var AWS = require('../core');\n  var inherit = AWS.util.inherit;\n  \n  /**\n   * @api private\n   */\n  AWS.Signers.V3 = inherit(AWS.Signers.RequestSigner, {\n    addAuthorization: function addAuthorization(credentials, date) {\n  \n      var datetime = AWS.util.date.rfc822(date);\n  \n      this.request.headers['X-Amz-Date'] = datetime;\n  \n      if (credentials.sessionToken) {\n        this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n      }\n  \n      this.request.headers['X-Amzn-Authorization'] =\n        this.authorization(credentials, datetime);\n  \n    },\n  \n    authorization: function authorization(credentials) {\n      return 'AWS3 ' +\n        'AWSAccessKeyId=' + credentials.accessKeyId + ',' +\n        'Algorithm=HmacSHA256,' +\n        'SignedHeaders=' + this.signedHeaders() + ',' +\n        'Signature=' + this.signature(credentials);\n    },\n  \n    signedHeaders: function signedHeaders() {\n      var headers = [];\n      AWS.util.arrayEach(this.headersToSign(), function iterator(h) {\n        headers.push(h.toLowerCase());\n      });\n      return headers.sort().join(';');\n    },\n  \n    canonicalHeaders: function canonicalHeaders() {\n      var headers = this.request.headers;\n      var parts = [];\n      AWS.util.arrayEach(this.headersToSign(), function iterator(h) {\n        parts.push(h.toLowerCase().trim() + ':' + String(headers[h]).trim());\n      });\n      return parts.sort().join('\\n') + '\\n';\n    },\n  \n    headersToSign: function headersToSign() {\n      var headers = [];\n      AWS.util.each(this.request.headers, function iterator(k) {\n        if (k === 'Host' || k === 'Content-Encoding' || k.match(/^X-Amz/i)) {\n          headers.push(k);\n        }\n      });\n      return headers;\n    },\n  \n    signature: function signature(credentials) {\n      return AWS.util.crypto.hmac(credentials.secretAccessKey, this.stringToSign(), 'base64');\n    },\n  \n    stringToSign: function stringToSign() {\n      var parts = [];\n      parts.push(this.request.method);\n      parts.push('/');\n      parts.push('');\n      parts.push(this.canonicalHeaders());\n      parts.push(this.request.body);\n      return AWS.util.crypto.sha256(parts.join('\\n'));\n    }\n  \n  });\n  \n  /**\n   * @api private\n   */\n  module.exports = AWS.Signers.V3;\n  \n  },{\"../core\":18}],67:[function(require,module,exports){\n  var AWS = require('../core');\n  var inherit = AWS.util.inherit;\n  \n  require('./v3');\n  \n  /**\n   * @api private\n   */\n  AWS.Signers.V3Https = inherit(AWS.Signers.V3, {\n    authorization: function authorization(credentials) {\n      return 'AWS3-HTTPS ' +\n        'AWSAccessKeyId=' + credentials.accessKeyId + ',' +\n        'Algorithm=HmacSHA256,' +\n        'Signature=' + this.signature(credentials);\n    },\n  \n    stringToSign: function stringToSign() {\n      return this.request.headers['X-Amz-Date'];\n    }\n  });\n  \n  /**\n   * @api private\n   */\n  module.exports = AWS.Signers.V3Https;\n  \n  },{\"../core\":18,\"./v3\":66}],68:[function(require,module,exports){\n  var AWS = require('../core');\n  var v4Credentials = require('./v4_credentials');\n  var inherit = AWS.util.inherit;\n  \n  /**\n   * @api private\n   */\n  var expiresHeader = 'presigned-expires';\n  \n  /**\n   * @api private\n   */\n  AWS.Signers.V4 = inherit(AWS.Signers.RequestSigner, {\n    constructor: function V4(request, serviceName, options) {\n      AWS.Signers.RequestSigner.call(this, request);\n      this.serviceName = serviceName;\n      options = options || {};\n      this.signatureCache = typeof options.signatureCache === 'boolean' ? options.signatureCache : true;\n      this.operation = options.operation;\n      this.signatureVersion = options.signatureVersion;\n    },\n  \n    algorithm: 'AWS4-HMAC-SHA256',\n  \n    addAuthorization: function addAuthorization(credentials, date) {\n      var datetime = AWS.util.date.iso8601(date).replace(/[:\\-]|\\.\\d{3}/g, '');\n  \n      if (this.isPresigned()) {\n        this.updateForPresigned(credentials, datetime);\n      } else {\n        this.addHeaders(credentials, datetime);\n      }\n  \n      this.request.headers['Authorization'] =\n        this.authorization(credentials, datetime);\n    },\n  \n    addHeaders: function addHeaders(credentials, datetime) {\n      this.request.headers['X-Amz-Date'] = datetime;\n      if (credentials.sessionToken) {\n        this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n      }\n    },\n  \n    updateForPresigned: function updateForPresigned(credentials, datetime) {\n      var credString = this.credentialString(datetime);\n      var qs = {\n        'X-Amz-Date': datetime,\n        'X-Amz-Algorithm': this.algorithm,\n        'X-Amz-Credential': credentials.accessKeyId + '/' + credString,\n        'X-Amz-Expires': this.request.headers[expiresHeader],\n        'X-Amz-SignedHeaders': this.signedHeaders()\n      };\n  \n      if (credentials.sessionToken) {\n        qs['X-Amz-Security-Token'] = credentials.sessionToken;\n      }\n  \n      if (this.request.headers['Content-Type']) {\n        qs['Content-Type'] = this.request.headers['Content-Type'];\n      }\n      if (this.request.headers['Content-MD5']) {\n        qs['Content-MD5'] = this.request.headers['Content-MD5'];\n      }\n      if (this.request.headers['Cache-Control']) {\n        qs['Cache-Control'] = this.request.headers['Cache-Control'];\n      }\n  \n      // need to pull in any other X-Amz-* headers\n      AWS.util.each.call(this, this.request.headers, function(key, value) {\n        if (key === expiresHeader) return;\n        if (this.isSignableHeader(key)) {\n          var lowerKey = key.toLowerCase();\n          // Metadata should be normalized\n          if (lowerKey.indexOf('x-amz-meta-') === 0) {\n            qs[lowerKey] = value;\n          } else if (lowerKey.indexOf('x-amz-') === 0) {\n            qs[key] = value;\n          }\n        }\n      });\n  \n      var sep = this.request.path.indexOf('?') >= 0 ? '&' : '?';\n      this.request.path += sep + AWS.util.queryParamsToString(qs);\n    },\n  \n    authorization: function authorization(credentials, datetime) {\n      var parts = [];\n      var credString = this.credentialString(datetime);\n      parts.push(this.algorithm + ' Credential=' +\n        credentials.accessKeyId + '/' + credString);\n      parts.push('SignedHeaders=' + this.signedHeaders());\n      parts.push('Signature=' + this.signature(credentials, datetime));\n      return parts.join(', ');\n    },\n  \n    signature: function signature(credentials, datetime) {\n      var signingKey = v4Credentials.getSigningKey(\n        credentials,\n        datetime.substr(0, 8),\n        this.request.region,\n        this.serviceName,\n        this.signatureCache\n      );\n      return AWS.util.crypto.hmac(signingKey, this.stringToSign(datetime), 'hex');\n    },\n  \n    stringToSign: function stringToSign(datetime) {\n      var parts = [];\n      parts.push('AWS4-HMAC-SHA256');\n      parts.push(datetime);\n      parts.push(this.credentialString(datetime));\n      parts.push(this.hexEncodedHash(this.canonicalString()));\n      return parts.join('\\n');\n    },\n  \n    canonicalString: function canonicalString() {\n      var parts = [], pathname = this.request.pathname();\n      if (this.serviceName !== 's3' && this.signatureVersion !== 's3v4') pathname = AWS.util.uriEscapePath(pathname);\n  \n      parts.push(this.request.method);\n      parts.push(pathname);\n      parts.push(this.request.search());\n      parts.push(this.canonicalHeaders() + '\\n');\n      parts.push(this.signedHeaders());\n      parts.push(this.hexEncodedBodyHash());\n      return parts.join('\\n');\n    },\n  \n    canonicalHeaders: function canonicalHeaders() {\n      var headers = [];\n      AWS.util.each.call(this, this.request.headers, function (key, item) {\n        headers.push([key, item]);\n      });\n      headers.sort(function (a, b) {\n        return a[0].toLowerCase() < b[0].toLowerCase() ? -1 : 1;\n      });\n      var parts = [];\n      AWS.util.arrayEach.call(this, headers, function (item) {\n        var key = item[0].toLowerCase();\n        if (this.isSignableHeader(key)) {\n          var value = item[1];\n          if (typeof value === 'undefined' || value === null || typeof value.toString !== 'function') {\n            throw AWS.util.error(new Error('Header ' + key + ' contains invalid value'), {\n              code: 'InvalidHeader'\n            });\n          }\n          parts.push(key + ':' +\n            this.canonicalHeaderValues(value.toString()));\n        }\n      });\n      return parts.join('\\n');\n    },\n  \n    canonicalHeaderValues: function canonicalHeaderValues(values) {\n      return values.replace(/\\s+/g, ' ').replace(/^\\s+|\\s+$/g, '');\n    },\n  \n    signedHeaders: function signedHeaders() {\n      var keys = [];\n      AWS.util.each.call(this, this.request.headers, function (key) {\n        key = key.toLowerCase();\n        if (this.isSignableHeader(key)) keys.push(key);\n      });\n      return keys.sort().join(';');\n    },\n  \n    credentialString: function credentialString(datetime) {\n      return v4Credentials.createScope(\n        datetime.substr(0, 8),\n        this.request.region,\n        this.serviceName\n      );\n    },\n  \n    hexEncodedHash: function hash(string) {\n      return AWS.util.crypto.sha256(string, 'hex');\n    },\n  \n    hexEncodedBodyHash: function hexEncodedBodyHash() {\n      var request = this.request;\n      if (this.isPresigned() && this.serviceName === 's3' && !request.body) {\n        return 'UNSIGNED-PAYLOAD';\n      } else if (request.headers['X-Amz-Content-Sha256']) {\n        return request.headers['X-Amz-Content-Sha256'];\n      } else {\n        return this.hexEncodedHash(this.request.body || '');\n      }\n    },\n  \n    unsignableHeaders: [\n      'authorization',\n      'content-type',\n      'content-length',\n      'user-agent',\n      expiresHeader,\n      'expect',\n      'x-amzn-trace-id'\n    ],\n  \n    isSignableHeader: function isSignableHeader(key) {\n      if (key.toLowerCase().indexOf('x-amz-') === 0) return true;\n      return this.unsignableHeaders.indexOf(key) < 0;\n    },\n  \n    isPresigned: function isPresigned() {\n      return this.request.headers[expiresHeader] ? true : false;\n    }\n  \n  });\n  \n  /**\n   * @api private\n   */\n  module.exports = AWS.Signers.V4;\n  \n  },{\"../core\":18,\"./v4_credentials\":69}],69:[function(require,module,exports){\n  var AWS = require('../core');\n  \n  /**\n   * @api private\n   */\n  var cachedSecret = {};\n  \n  /**\n   * @api private\n   */\n  var cacheQueue = [];\n  \n  /**\n   * @api private\n   */\n  var maxCacheEntries = 50;\n  \n  /**\n   * @api private\n   */\n  var v4Identifier = 'aws4_request';\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n    /**\n     * @api private\n     *\n     * @param date [String]\n     * @param region [String]\n     * @param serviceName [String]\n     * @return [String]\n     */\n    createScope: function createScope(date, region, serviceName) {\n      return [\n        date.substr(0, 8),\n        region,\n        serviceName,\n        v4Identifier\n      ].join('/');\n    },\n  \n    /**\n     * @api private\n     *\n     * @param credentials [Credentials]\n     * @param date [String]\n     * @param region [String]\n     * @param service [String]\n     * @param shouldCache [Boolean]\n     * @return [String]\n     */\n    getSigningKey: function getSigningKey(\n      credentials,\n      date,\n      region,\n      service,\n      shouldCache\n    ) {\n      var credsIdentifier = AWS.util.crypto\n        .hmac(credentials.secretAccessKey, credentials.accessKeyId, 'base64');\n      var cacheKey = [credsIdentifier, date, region, service].join('_');\n      shouldCache = shouldCache !== false;\n      if (shouldCache && (cacheKey in cachedSecret)) {\n        return cachedSecret[cacheKey];\n      }\n  \n      var kDate = AWS.util.crypto.hmac(\n        'AWS4' + credentials.secretAccessKey,\n        date,\n        'buffer'\n      );\n      var kRegion = AWS.util.crypto.hmac(kDate, region, 'buffer');\n      var kService = AWS.util.crypto.hmac(kRegion, service, 'buffer');\n  \n      var signingKey = AWS.util.crypto.hmac(kService, v4Identifier, 'buffer');\n      if (shouldCache) {\n        cachedSecret[cacheKey] = signingKey;\n        cacheQueue.push(cacheKey);\n        if (cacheQueue.length > maxCacheEntries) {\n          // remove the oldest entry (not the least recently used)\n          delete cachedSecret[cacheQueue.shift()];\n        }\n      }\n  \n      return signingKey;\n    },\n  \n    /**\n     * @api private\n     *\n     * Empties the derived signing key cache. Made available for testing purposes\n     * only.\n     */\n    emptyCache: function emptyCache() {\n      cachedSecret = {};\n      cacheQueue = [];\n    }\n  };\n  \n  },{\"../core\":18}],70:[function(require,module,exports){\n  function AcceptorStateMachine(states, state) {\n    this.currentState = state || null;\n    this.states = states || {};\n  }\n  \n  AcceptorStateMachine.prototype.runTo = function runTo(finalState, done, bindObject, inputError) {\n    if (typeof finalState === 'function') {\n      inputError = bindObject; bindObject = done;\n      done = finalState; finalState = null;\n    }\n  \n    var self = this;\n    var state = self.states[self.currentState];\n    state.fn.call(bindObject || self, inputError, function(err) {\n      if (err) {\n        if (state.fail) self.currentState = state.fail;\n        else return done ? done.call(bindObject, err) : null;\n      } else {\n        if (state.accept) self.currentState = state.accept;\n        else return done ? done.call(bindObject) : null;\n      }\n      if (self.currentState === finalState) {\n        return done ? done.call(bindObject, err) : null;\n      }\n  \n      self.runTo(finalState, done, bindObject, err);\n    });\n  };\n  \n  AcceptorStateMachine.prototype.addState = function addState(name, acceptState, failState, fn) {\n    if (typeof acceptState === 'function') {\n      fn = acceptState; acceptState = null; failState = null;\n    } else if (typeof failState === 'function') {\n      fn = failState; failState = null;\n    }\n  \n    if (!this.currentState) this.currentState = name;\n    this.states[name] = { accept: acceptState, fail: failState, fn: fn };\n    return this;\n  };\n  \n  /**\n   * @api private\n   */\n  module.exports = AcceptorStateMachine;\n  \n  },{}],71:[function(require,module,exports){\n  (function (process,setImmediate){\n  /* eslint guard-for-in:0 */\n  var AWS;\n  \n  /**\n   * A set of utility methods for use with the AWS SDK.\n   *\n   * @!attribute abort\n   *   Return this value from an iterator function {each} or {arrayEach}\n   *   to break out of the iteration.\n   *   @example Breaking out of an iterator function\n   *     AWS.util.each({a: 1, b: 2, c: 3}, function(key, value) {\n   *       if (key == 'b') return AWS.util.abort;\n   *     });\n   *   @see each\n   *   @see arrayEach\n   * @api private\n   */\n  var util = {\n    environment: 'nodejs',\n    engine: function engine() {\n      if (util.isBrowser() && typeof navigator !== 'undefined') {\n        return navigator.userAgent;\n      } else {\n        var engine = process.platform + '/' + process.version;\n        if (process.env.AWS_EXECUTION_ENV) {\n          engine += ' exec-env/' + process.env.AWS_EXECUTION_ENV;\n        }\n        return engine;\n      }\n    },\n  \n    userAgent: function userAgent() {\n      var name = util.environment;\n      var agent = 'aws-sdk-' + name + '/' + require('./core').VERSION;\n      if (name === 'nodejs') agent += ' ' + util.engine();\n      return agent;\n    },\n  \n    uriEscape: function uriEscape(string) {\n      var output = encodeURIComponent(string);\n      output = output.replace(/[^A-Za-z0-9_.~\\-%]+/g, escape);\n  \n      // AWS percent-encodes some extra non-standard characters in a URI\n      output = output.replace(/[*]/g, function(ch) {\n        return '%' + ch.charCodeAt(0).toString(16).toUpperCase();\n      });\n  \n      return output;\n    },\n  \n    uriEscapePath: function uriEscapePath(string) {\n      var parts = [];\n      util.arrayEach(string.split('/'), function (part) {\n        parts.push(util.uriEscape(part));\n      });\n      return parts.join('/');\n    },\n  \n    urlParse: function urlParse(url) {\n      return util.url.parse(url);\n    },\n  \n    urlFormat: function urlFormat(url) {\n      return util.url.format(url);\n    },\n  \n    queryStringParse: function queryStringParse(qs) {\n      return util.querystring.parse(qs);\n    },\n  \n    queryParamsToString: function queryParamsToString(params) {\n      var items = [];\n      var escape = util.uriEscape;\n      var sortedKeys = Object.keys(params).sort();\n  \n      util.arrayEach(sortedKeys, function(name) {\n        var value = params[name];\n        var ename = escape(name);\n        var result = ename + '=';\n        if (Array.isArray(value)) {\n          var vals = [];\n          util.arrayEach(value, function(item) { vals.push(escape(item)); });\n          result = ename + '=' + vals.sort().join('&' + ename + '=');\n        } else if (value !== undefined && value !== null) {\n          result = ename + '=' + escape(value);\n        }\n        items.push(result);\n      });\n  \n      return items.join('&');\n    },\n  \n    readFileSync: function readFileSync(path) {\n      if (util.isBrowser()) return null;\n      return require('fs').readFileSync(path, 'utf-8');\n    },\n  \n    base64: {\n      encode: function encode64(string) {\n        if (typeof string === 'number') {\n          throw util.error(new Error('Cannot base64 encode number ' + string));\n        }\n        if (string === null || typeof string === 'undefined') {\n          return string;\n        }\n        var buf = util.buffer.toBuffer(string);\n        return buf.toString('base64');\n      },\n  \n      decode: function decode64(string) {\n        if (typeof string === 'number') {\n          throw util.error(new Error('Cannot base64 decode number ' + string));\n        }\n        if (string === null || typeof string === 'undefined') {\n          return string;\n        }\n        return util.buffer.toBuffer(string, 'base64');\n      }\n  \n    },\n  \n    buffer: {\n      /**\n       * Buffer constructor for Node buffer and buffer pollyfill\n       */\n      toBuffer: function(data, encoding) {\n        return (typeof util.Buffer.from === 'function' && util.Buffer.from !== Uint8Array.from) ?\n          util.Buffer.from(data, encoding) : new util.Buffer(data, encoding);\n      },\n  \n      alloc: function(size, fill, encoding) {\n        if (typeof size !== 'number') {\n          throw new Error('size passed to alloc must be a number.');\n        }\n        if (typeof util.Buffer.alloc === 'function') {\n          return util.Buffer.alloc(size, fill, encoding);\n        } else {\n          var buf = new util.Buffer(size);\n          if (fill !== undefined && typeof buf.fill === 'function') {\n            buf.fill(fill, undefined, undefined, encoding);\n          }\n          return buf;\n        }\n      },\n  \n      toStream: function toStream(buffer) {\n        if (!util.Buffer.isBuffer(buffer)) buffer =  util.buffer.toBuffer(buffer);\n  \n        var readable = new (util.stream.Readable)();\n        var pos = 0;\n        readable._read = function(size) {\n          if (pos >= buffer.length) return readable.push(null);\n  \n          var end = pos + size;\n          if (end > buffer.length) end = buffer.length;\n          readable.push(buffer.slice(pos, end));\n          pos = end;\n        };\n  \n        return readable;\n      },\n  \n      /**\n       * Concatenates a list of Buffer objects.\n       */\n      concat: function(buffers) {\n        var length = 0,\n            offset = 0,\n            buffer = null, i;\n  \n        for (i = 0; i < buffers.length; i++) {\n          length += buffers[i].length;\n        }\n  \n        buffer = util.buffer.alloc(length);\n  \n        for (i = 0; i < buffers.length; i++) {\n          buffers[i].copy(buffer, offset);\n          offset += buffers[i].length;\n        }\n  \n        return buffer;\n      }\n    },\n  \n    string: {\n      byteLength: function byteLength(string) {\n        if (string === null || string === undefined) return 0;\n        if (typeof string === 'string') string = util.buffer.toBuffer(string);\n  \n        if (typeof string.byteLength === 'number') {\n          return string.byteLength;\n        } else if (typeof string.length === 'number') {\n          return string.length;\n        } else if (typeof string.size === 'number') {\n          return string.size;\n        } else if (typeof string.path === 'string') {\n          return require('fs').lstatSync(string.path).size;\n        } else {\n          throw util.error(new Error('Cannot determine length of ' + string),\n            { object: string });\n        }\n      },\n  \n      upperFirst: function upperFirst(string) {\n        return string[0].toUpperCase() + string.substr(1);\n      },\n  \n      lowerFirst: function lowerFirst(string) {\n        return string[0].toLowerCase() + string.substr(1);\n      }\n    },\n  \n    ini: {\n      parse: function string(ini) {\n        var currentSection, map = {};\n        util.arrayEach(ini.split(/\\r?\\n/), function(line) {\n          line = line.split(/(^|\\s)[;#]/)[0]; // remove comments\n          var section = line.match(/^\\s*\\[([^\\[\\]]+)\\]\\s*$/);\n          if (section) {\n            currentSection = section[1];\n          } else if (currentSection) {\n            var item = line.match(/^\\s*(.+?)\\s*=\\s*(.+?)\\s*$/);\n            if (item) {\n              map[currentSection] = map[currentSection] || {};\n              map[currentSection][item[1]] = item[2];\n            }\n          }\n        });\n  \n        return map;\n      }\n    },\n  \n    fn: {\n      noop: function() {},\n      callback: function (err) { if (err) throw err; },\n  \n      /**\n       * Turn a synchronous function into as \"async\" function by making it call\n       * a callback. The underlying function is called with all but the last argument,\n       * which is treated as the callback. The callback is passed passed a first argument\n       * of null on success to mimick standard node callbacks.\n       */\n      makeAsync: function makeAsync(fn, expectedArgs) {\n        if (expectedArgs && expectedArgs <= fn.length) {\n          return fn;\n        }\n  \n        return function() {\n          var args = Array.prototype.slice.call(arguments, 0);\n          var callback = args.pop();\n          var result = fn.apply(null, args);\n          callback(result);\n        };\n      }\n    },\n  \n    /**\n     * Date and time utility functions.\n     */\n    date: {\n  \n      /**\n       * @return [Date] the current JavaScript date object. Since all\n       *   AWS services rely on this date object, you can override\n       *   this function to provide a special time value to AWS service\n       *   requests.\n       */\n      getDate: function getDate() {\n        if (!AWS) AWS = require('./core');\n        if (AWS.config.systemClockOffset) { // use offset when non-zero\n          return new Date(new Date().getTime() + AWS.config.systemClockOffset);\n        } else {\n          return new Date();\n        }\n      },\n  \n      /**\n       * @return [String] the date in ISO-8601 format\n       */\n      iso8601: function iso8601(date) {\n        if (date === undefined) { date = util.date.getDate(); }\n        return date.toISOString().replace(/\\.\\d{3}Z$/, 'Z');\n      },\n  \n      /**\n       * @return [String] the date in RFC 822 format\n       */\n      rfc822: function rfc822(date) {\n        if (date === undefined) { date = util.date.getDate(); }\n        return date.toUTCString();\n      },\n  \n      /**\n       * @return [Integer] the UNIX timestamp value for the current time\n       */\n      unixTimestamp: function unixTimestamp(date) {\n        if (date === undefined) { date = util.date.getDate(); }\n        return date.getTime() / 1000;\n      },\n  \n      /**\n       * @param [String,number,Date] date\n       * @return [Date]\n       */\n      from: function format(date) {\n        if (typeof date === 'number') {\n          return new Date(date * 1000); // unix timestamp\n        } else {\n          return new Date(date);\n        }\n      },\n  \n      /**\n       * Given a Date or date-like value, this function formats the\n       * date into a string of the requested value.\n       * @param [String,number,Date] date\n       * @param [String] formatter Valid formats are:\n       #   * 'iso8601'\n       #   * 'rfc822'\n       #   * 'unixTimestamp'\n       * @return [String]\n       */\n      format: function format(date, formatter) {\n        if (!formatter) formatter = 'iso8601';\n        return util.date[formatter](util.date.from(date));\n      },\n  \n      parseTimestamp: function parseTimestamp(value) {\n        if (typeof value === 'number') { // unix timestamp (number)\n          return new Date(value * 1000);\n        } else if (value.match(/^\\d+$/)) { // unix timestamp\n          return new Date(value * 1000);\n        } else if (value.match(/^\\d{4}/)) { // iso8601\n          return new Date(value);\n        } else if (value.match(/^\\w{3},/)) { // rfc822\n          return new Date(value);\n        } else {\n          throw util.error(\n            new Error('unhandled timestamp format: ' + value),\n            {code: 'TimestampParserError'});\n        }\n      }\n  \n    },\n  \n    crypto: {\n      crc32Table: [\n       0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA, 0x076DC419,\n       0x706AF48F, 0xE963A535, 0x9E6495A3, 0x0EDB8832, 0x79DCB8A4,\n       0xE0D5E91E, 0x97D2D988, 0x09B64C2B, 0x7EB17CBD, 0xE7B82D07,\n       0x90BF1D91, 0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE,\n       0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7, 0x136C9856,\n       0x646BA8C0, 0xFD62F97A, 0x8A65C9EC, 0x14015C4F, 0x63066CD9,\n       0xFA0F3D63, 0x8D080DF5, 0x3B6E20C8, 0x4C69105E, 0xD56041E4,\n       0xA2677172, 0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B,\n       0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940, 0x32D86CE3,\n       0x45DF5C75, 0xDCD60DCF, 0xABD13D59, 0x26D930AC, 0x51DE003A,\n       0xC8D75180, 0xBFD06116, 0x21B4F4B5, 0x56B3C423, 0xCFBA9599,\n       0xB8BDA50F, 0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924,\n       0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D, 0x76DC4190,\n       0x01DB7106, 0x98D220BC, 0xEFD5102A, 0x71B18589, 0x06B6B51F,\n       0x9FBFE4A5, 0xE8B8D433, 0x7807C9A2, 0x0F00F934, 0x9609A88E,\n       0xE10E9818, 0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01,\n       0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E, 0x6C0695ED,\n       0x1B01A57B, 0x8208F4C1, 0xF50FC457, 0x65B0D9C6, 0x12B7E950,\n       0x8BBEB8EA, 0xFCB9887C, 0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3,\n       0xFBD44C65, 0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2,\n       0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB, 0x4369E96A,\n       0x346ED9FC, 0xAD678846, 0xDA60B8D0, 0x44042D73, 0x33031DE5,\n       0xAA0A4C5F, 0xDD0D7CC9, 0x5005713C, 0x270241AA, 0xBE0B1010,\n       0xC90C2086, 0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F,\n       0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4, 0x59B33D17,\n       0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD, 0xEDB88320, 0x9ABFB3B6,\n       0x03B6E20C, 0x74B1D29A, 0xEAD54739, 0x9DD277AF, 0x04DB2615,\n       0x73DC1683, 0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8,\n       0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1, 0xF00F9344,\n       0x8708A3D2, 0x1E01F268, 0x6906C2FE, 0xF762575D, 0x806567CB,\n       0x196C3671, 0x6E6B06E7, 0xFED41B76, 0x89D32BE0, 0x10DA7A5A,\n       0x67DD4ACC, 0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5,\n       0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252, 0xD1BB67F1,\n       0xA6BC5767, 0x3FB506DD, 0x48B2364B, 0xD80D2BDA, 0xAF0A1B4C,\n       0x36034AF6, 0x41047A60, 0xDF60EFC3, 0xA867DF55, 0x316E8EEF,\n       0x4669BE79, 0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236,\n       0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F, 0xC5BA3BBE,\n       0xB2BD0B28, 0x2BB45A92, 0x5CB36A04, 0xC2D7FFA7, 0xB5D0CF31,\n       0x2CD99E8B, 0x5BDEAE1D, 0x9B64C2B0, 0xEC63F226, 0x756AA39C,\n       0x026D930A, 0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713,\n       0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38, 0x92D28E9B,\n       0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21, 0x86D3D2D4, 0xF1D4E242,\n       0x68DDB3F8, 0x1FDA836E, 0x81BE16CD, 0xF6B9265B, 0x6FB077E1,\n       0x18B74777, 0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C,\n       0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45, 0xA00AE278,\n       0xD70DD2EE, 0x4E048354, 0x3903B3C2, 0xA7672661, 0xD06016F7,\n       0x4969474D, 0x3E6E77DB, 0xAED16A4A, 0xD9D65ADC, 0x40DF0B66,\n       0x37D83BF0, 0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9,\n       0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6, 0xBAD03605,\n       0xCDD70693, 0x54DE5729, 0x23D967BF, 0xB3667A2E, 0xC4614AB8,\n       0x5D681B02, 0x2A6F2B94, 0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B,\n       0x2D02EF8D],\n  \n      crc32: function crc32(data) {\n        var tbl = util.crypto.crc32Table;\n        var crc = 0 ^ -1;\n  \n        if (typeof data === 'string') {\n          data = util.buffer.toBuffer(data);\n        }\n  \n        for (var i = 0; i < data.length; i++) {\n          var code = data.readUInt8(i);\n          crc = (crc >>> 8) ^ tbl[(crc ^ code) & 0xFF];\n        }\n        return (crc ^ -1) >>> 0;\n      },\n  \n      hmac: function hmac(key, string, digest, fn) {\n        if (!digest) digest = 'binary';\n        if (digest === 'buffer') { digest = undefined; }\n        if (!fn) fn = 'sha256';\n        if (typeof string === 'string') string = util.buffer.toBuffer(string);\n        return util.crypto.lib.createHmac(fn, key).update(string).digest(digest);\n      },\n  \n      md5: function md5(data, digest, callback) {\n        return util.crypto.hash('md5', data, digest, callback);\n      },\n  \n      sha256: function sha256(data, digest, callback) {\n        return util.crypto.hash('sha256', data, digest, callback);\n      },\n  \n      hash: function(algorithm, data, digest, callback) {\n        var hash = util.crypto.createHash(algorithm);\n        if (!digest) { digest = 'binary'; }\n        if (digest === 'buffer') { digest = undefined; }\n        if (typeof data === 'string') data = util.buffer.toBuffer(data);\n        var sliceFn = util.arraySliceFn(data);\n        var isBuffer = util.Buffer.isBuffer(data);\n        //Identifying objects with an ArrayBuffer as buffers\n        if (util.isBrowser() && typeof ArrayBuffer !== 'undefined' && data && data.buffer instanceof ArrayBuffer) isBuffer = true;\n  \n        if (callback && typeof data === 'object' &&\n            typeof data.on === 'function' && !isBuffer) {\n          data.on('data', function(chunk) { hash.update(chunk); });\n          data.on('error', function(err) { callback(err); });\n          data.on('end', function() { callback(null, hash.digest(digest)); });\n        } else if (callback && sliceFn && !isBuffer &&\n                   typeof FileReader !== 'undefined') {\n          // this might be a File/Blob\n          var index = 0, size = 1024 * 512;\n          var reader = new FileReader();\n          reader.onerror = function() {\n            callback(new Error('Failed to read data.'));\n          };\n          reader.onload = function() {\n            var buf = new util.Buffer(new Uint8Array(reader.result));\n            hash.update(buf);\n            index += buf.length;\n            reader._continueReading();\n          };\n          reader._continueReading = function() {\n            if (index >= data.size) {\n              callback(null, hash.digest(digest));\n              return;\n            }\n  \n            var back = index + size;\n            if (back > data.size) back = data.size;\n            reader.readAsArrayBuffer(sliceFn.call(data, index, back));\n          };\n  \n          reader._continueReading();\n        } else {\n          if (util.isBrowser() && typeof data === 'object' && !isBuffer) {\n            data = new util.Buffer(new Uint8Array(data));\n          }\n          var out = hash.update(data).digest(digest);\n          if (callback) callback(null, out);\n          return out;\n        }\n      },\n  \n      toHex: function toHex(data) {\n        var out = [];\n        for (var i = 0; i < data.length; i++) {\n          out.push(('0' + data.charCodeAt(i).toString(16)).substr(-2, 2));\n        }\n        return out.join('');\n      },\n  \n      createHash: function createHash(algorithm) {\n        return util.crypto.lib.createHash(algorithm);\n      }\n  \n    },\n  \n    /** @!ignore */\n  \n    /* Abort constant */\n    abort: {},\n  \n    each: function each(object, iterFunction) {\n      for (var key in object) {\n        if (Object.prototype.hasOwnProperty.call(object, key)) {\n          var ret = iterFunction.call(this, key, object[key]);\n          if (ret === util.abort) break;\n        }\n      }\n    },\n  \n    arrayEach: function arrayEach(array, iterFunction) {\n      for (var idx in array) {\n        if (Object.prototype.hasOwnProperty.call(array, idx)) {\n          var ret = iterFunction.call(this, array[idx], parseInt(idx, 10));\n          if (ret === util.abort) break;\n        }\n      }\n    },\n  \n    update: function update(obj1, obj2) {\n      util.each(obj2, function iterator(key, item) {\n        obj1[key] = item;\n      });\n      return obj1;\n    },\n  \n    merge: function merge(obj1, obj2) {\n      return util.update(util.copy(obj1), obj2);\n    },\n  \n    copy: function copy(object) {\n      if (object === null || object === undefined) return object;\n      var dupe = {};\n      // jshint forin:false\n      for (var key in object) {\n        dupe[key] = object[key];\n      }\n      return dupe;\n    },\n  \n    isEmpty: function isEmpty(obj) {\n      for (var prop in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n          return false;\n        }\n      }\n      return true;\n    },\n  \n    arraySliceFn: function arraySliceFn(obj) {\n      var fn = obj.slice || obj.webkitSlice || obj.mozSlice;\n      return typeof fn === 'function' ? fn : null;\n    },\n  \n    isType: function isType(obj, type) {\n      // handle cross-\"frame\" objects\n      if (typeof type === 'function') type = util.typeName(type);\n      return Object.prototype.toString.call(obj) === '[object ' + type + ']';\n    },\n  \n    typeName: function typeName(type) {\n      if (Object.prototype.hasOwnProperty.call(type, 'name')) return type.name;\n      var str = type.toString();\n      var match = str.match(/^\\s*function (.+)\\(/);\n      return match ? match[1] : str;\n    },\n  \n    error: function error(err, options) {\n      var originalError = null;\n      if (typeof err.message === 'string' && err.message !== '') {\n        if (typeof options === 'string' || (options && options.message)) {\n          originalError = util.copy(err);\n          originalError.message = err.message;\n        }\n      }\n      err.message = err.message || null;\n  \n      if (typeof options === 'string') {\n        err.message = options;\n      } else if (typeof options === 'object' && options !== null) {\n        util.update(err, options);\n        if (options.message)\n          err.message = options.message;\n        if (options.code || options.name)\n          err.code = options.code || options.name;\n        if (options.stack)\n          err.stack = options.stack;\n      }\n  \n      if (typeof Object.defineProperty === 'function') {\n        Object.defineProperty(err, 'name', {writable: true, enumerable: false});\n        Object.defineProperty(err, 'message', {enumerable: true});\n      }\n  \n      err.name = options && options.name || err.name || err.code || 'Error';\n      err.time = new Date();\n  \n      if (originalError) err.originalError = originalError;\n  \n      return err;\n    },\n  \n    /**\n     * @api private\n     */\n    inherit: function inherit(klass, features) {\n      var newObject = null;\n      if (features === undefined) {\n        features = klass;\n        klass = Object;\n        newObject = {};\n      } else {\n        var ctor = function ConstructorWrapper() {};\n        ctor.prototype = klass.prototype;\n        newObject = new ctor();\n      }\n  \n      // constructor not supplied, create pass-through ctor\n      if (features.constructor === Object) {\n        features.constructor = function() {\n          if (klass !== Object) {\n            return klass.apply(this, arguments);\n          }\n        };\n      }\n  \n      features.constructor.prototype = newObject;\n      util.update(features.constructor.prototype, features);\n      features.constructor.__super__ = klass;\n      return features.constructor;\n    },\n  \n    /**\n     * @api private\n     */\n    mixin: function mixin() {\n      var klass = arguments[0];\n      for (var i = 1; i < arguments.length; i++) {\n        // jshint forin:false\n        for (var prop in arguments[i].prototype) {\n          var fn = arguments[i].prototype[prop];\n          if (prop !== 'constructor') {\n            klass.prototype[prop] = fn;\n          }\n        }\n      }\n      return klass;\n    },\n  \n    /**\n     * @api private\n     */\n    hideProperties: function hideProperties(obj, props) {\n      if (typeof Object.defineProperty !== 'function') return;\n  \n      util.arrayEach(props, function (key) {\n        Object.defineProperty(obj, key, {\n          enumerable: false, writable: true, configurable: true });\n      });\n    },\n  \n    /**\n     * @api private\n     */\n    property: function property(obj, name, value, enumerable, isValue) {\n      var opts = {\n        configurable: true,\n        enumerable: enumerable !== undefined ? enumerable : true\n      };\n      if (typeof value === 'function' && !isValue) {\n        opts.get = value;\n      }\n      else {\n        opts.value = value; opts.writable = true;\n      }\n  \n      Object.defineProperty(obj, name, opts);\n    },\n  \n    /**\n     * @api private\n     */\n    memoizedProperty: function memoizedProperty(obj, name, get, enumerable) {\n      var cachedValue = null;\n  \n      // build enumerable attribute for each value with lazy accessor.\n      util.property(obj, name, function() {\n        if (cachedValue === null) {\n          cachedValue = get();\n        }\n        return cachedValue;\n      }, enumerable);\n    },\n  \n    /**\n     * TODO Remove in major version revision\n     * This backfill populates response data without the\n     * top-level payload name.\n     *\n     * @api private\n     */\n    hoistPayloadMember: function hoistPayloadMember(resp) {\n      var req = resp.request;\n      var operationName = req.operation;\n      var operation = req.service.api.operations[operationName];\n      var output = operation.output;\n      if (output.payload && !operation.hasEventOutput) {\n        var payloadMember = output.members[output.payload];\n        var responsePayload = resp.data[output.payload];\n        if (payloadMember.type === 'structure') {\n          util.each(responsePayload, function(key, value) {\n            util.property(resp.data, key, value, false);\n          });\n        }\n      }\n    },\n  \n    /**\n     * Compute SHA-256 checksums of streams\n     *\n     * @api private\n     */\n    computeSha256: function computeSha256(body, done) {\n      if (util.isNode()) {\n        var Stream = util.stream.Stream;\n        var fs = require('fs');\n        if (typeof Stream === 'function' && body instanceof Stream) {\n          if (typeof body.path === 'string') { // assume file object\n            var settings = {};\n            if (typeof body.start === 'number') {\n              settings.start = body.start;\n            }\n            if (typeof body.end === 'number') {\n              settings.end = body.end;\n            }\n            body = fs.createReadStream(body.path, settings);\n          } else { // TODO support other stream types\n            return done(new Error('Non-file stream objects are ' +\n                                  'not supported with SigV4'));\n          }\n        }\n      }\n  \n      util.crypto.sha256(body, 'hex', function(err, sha) {\n        if (err) done(err);\n        else done(null, sha);\n      });\n    },\n  \n    /**\n     * @api private\n     */\n    isClockSkewed: function isClockSkewed(serverTime) {\n      if (serverTime) {\n        util.property(AWS.config, 'isClockSkewed',\n          Math.abs(new Date().getTime() - serverTime) >= 300000, false);\n        return AWS.config.isClockSkewed;\n      }\n    },\n  \n    applyClockOffset: function applyClockOffset(serverTime) {\n      if (serverTime)\n        AWS.config.systemClockOffset = serverTime - new Date().getTime();\n    },\n  \n    /**\n     * @api private\n     */\n    extractRequestId: function extractRequestId(resp) {\n      var requestId = resp.httpResponse.headers['x-amz-request-id'] ||\n                       resp.httpResponse.headers['x-amzn-requestid'];\n  \n      if (!requestId && resp.data && resp.data.ResponseMetadata) {\n        requestId = resp.data.ResponseMetadata.RequestId;\n      }\n  \n      if (requestId) {\n        resp.requestId = requestId;\n      }\n  \n      if (resp.error) {\n        resp.error.requestId = requestId;\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    addPromises: function addPromises(constructors, PromiseDependency) {\n      var deletePromises = false;\n      if (PromiseDependency === undefined && AWS && AWS.config) {\n        PromiseDependency = AWS.config.getPromisesDependency();\n      }\n      if (PromiseDependency === undefined && typeof Promise !== 'undefined') {\n        PromiseDependency = Promise;\n      }\n      if (typeof PromiseDependency !== 'function') deletePromises = true;\n      if (!Array.isArray(constructors)) constructors = [constructors];\n  \n      for (var ind = 0; ind < constructors.length; ind++) {\n        var constructor = constructors[ind];\n        if (deletePromises) {\n          if (constructor.deletePromisesFromClass) {\n            constructor.deletePromisesFromClass();\n          }\n        } else if (constructor.addPromisesToClass) {\n          constructor.addPromisesToClass(PromiseDependency);\n        }\n      }\n    },\n  \n    /**\n     * @api private\n     * Return a function that will return a promise whose fate is decided by the\n     * callback behavior of the given method with `methodName`. The method to be\n     * promisified should conform to node.js convention of accepting a callback as\n     * last argument and calling that callback with error as the first argument\n     * and success value on the second argument.\n     */\n    promisifyMethod: function promisifyMethod(methodName, PromiseDependency) {\n      return function promise() {\n        var self = this;\n        var args = Array.prototype.slice.call(arguments);\n        return new PromiseDependency(function(resolve, reject) {\n          args.push(function(err, data) {\n            if (err) {\n              reject(err);\n            } else {\n              resolve(data);\n            }\n          });\n          self[methodName].apply(self, args);\n        });\n      };\n    },\n  \n    /**\n     * @api private\n     */\n    isDualstackAvailable: function isDualstackAvailable(service) {\n      if (!service) return false;\n      var metadata = require('../apis/metadata.json');\n      if (typeof service !== 'string') service = service.serviceIdentifier;\n      if (typeof service !== 'string' || !metadata.hasOwnProperty(service)) return false;\n      return !!metadata[service].dualstackAvailable;\n    },\n  \n    /**\n     * @api private\n     */\n    calculateRetryDelay: function calculateRetryDelay(retryCount, retryDelayOptions) {\n      if (!retryDelayOptions) retryDelayOptions = {};\n      var customBackoff = retryDelayOptions.customBackoff || null;\n      if (typeof customBackoff === 'function') {\n        return customBackoff(retryCount);\n      }\n      var base = typeof retryDelayOptions.base === 'number' ? retryDelayOptions.base : 100;\n      var delay = Math.random() * (Math.pow(2, retryCount) * base);\n      return delay;\n    },\n  \n    /**\n     * @api private\n     */\n    handleRequestWithRetries: function handleRequestWithRetries(httpRequest, options, cb) {\n      if (!options) options = {};\n      var http = AWS.HttpClient.getInstance();\n      var httpOptions = options.httpOptions || {};\n      var retryCount = 0;\n  \n      var errCallback = function(err) {\n        var maxRetries = options.maxRetries || 0;\n        if (err && err.code === 'TimeoutError') err.retryable = true;\n        if (err && err.retryable && retryCount < maxRetries) {\n          retryCount++;\n          var delay = util.calculateRetryDelay(retryCount, options.retryDelayOptions);\n          setTimeout(sendRequest, delay + (err.retryAfter || 0));\n        } else {\n          cb(err);\n        }\n      };\n  \n      var sendRequest = function() {\n        var data = '';\n        http.handleRequest(httpRequest, httpOptions, function(httpResponse) {\n          httpResponse.on('data', function(chunk) { data += chunk.toString(); });\n          httpResponse.on('end', function() {\n            var statusCode = httpResponse.statusCode;\n            if (statusCode < 300) {\n              cb(null, data);\n            } else {\n              var retryAfter = parseInt(httpResponse.headers['retry-after'], 10) * 1000 || 0;\n              var err = util.error(new Error(),\n                { retryable: statusCode >= 500 || statusCode === 429 }\n              );\n              if (retryAfter && err.retryable) err.retryAfter = retryAfter;\n              errCallback(err);\n            }\n          });\n        }, errCallback);\n      };\n  \n      AWS.util.defer(sendRequest);\n    },\n  \n    /**\n     * @api private\n     */\n    uuid: {\n      v4: function uuidV4() {\n        return require('uuid').v4();\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    convertPayloadToString: function convertPayloadToString(resp) {\n      var req = resp.request;\n      var operation = req.operation;\n      var rules = req.service.api.operations[operation].output || {};\n      if (rules.payload && resp.data[rules.payload]) {\n        resp.data[rules.payload] = resp.data[rules.payload].toString();\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    defer: function defer(callback) {\n      if (typeof process === 'object' && typeof process.nextTick === 'function') {\n        process.nextTick(callback);\n      } else if (typeof setImmediate === 'function') {\n        setImmediate(callback);\n      } else {\n        setTimeout(callback, 0);\n      }\n    },\n  \n    /**\n     * @api private\n     */\n    getRequestPayloadShape: function getRequestPayloadShape(req) {\n      var operations = req.service.api.operations;\n      if (!operations) return undefined;\n      var operation = (operations || {})[req.operation];\n      if (!operation || !operation.input || !operation.input.payload) return undefined;\n      return operation.input.members[operation.input.payload];\n    },\n  \n    getProfilesFromSharedConfig: function getProfilesFromSharedConfig(iniLoader, filename) {\n      var profiles = {};\n      var profilesFromConfig = {};\n      if (process.env[util.configOptInEnv]) {\n        var profilesFromConfig = iniLoader.loadFrom({\n          isConfig: true,\n          filename: process.env[util.sharedConfigFileEnv]\n        });\n      }\n      var profilesFromCreds = iniLoader.loadFrom({\n        filename: filename ||\n          (process.env[util.configOptInEnv] && process.env[util.sharedCredentialsFileEnv])\n      });\n      for (var i = 0, profileNames = Object.keys(profilesFromConfig); i < profileNames.length; i++) {\n        profiles[profileNames[i]] = profilesFromConfig[profileNames[i]];\n      }\n      for (var i = 0, profileNames = Object.keys(profilesFromCreds); i < profileNames.length; i++) {\n        profiles[profileNames[i]] = profilesFromCreds[profileNames[i]];\n      }\n      return profiles;\n    },\n  \n    /**\n     * @api private\n     */\n    defaultProfile: 'default',\n  \n    /**\n     * @api private\n     */\n    configOptInEnv: 'AWS_SDK_LOAD_CONFIG',\n  \n    /**\n     * @api private\n     */\n    sharedCredentialsFileEnv: 'AWS_SHARED_CREDENTIALS_FILE',\n  \n    /**\n     * @api private\n     */\n    sharedConfigFileEnv: 'AWS_CONFIG_FILE',\n  \n    /**\n     * @api private\n     */\n    imdsDisabledEnv: 'AWS_EC2_METADATA_DISABLED'\n  };\n  \n  /**\n   * @api private\n   */\n  module.exports = util;\n  \n  }).call(this,require('_process'),require(\"timers\").setImmediate)\n  },{\"../apis/metadata.json\":4,\"./core\":18,\"_process\":85,\"fs\":79,\"timers\":93,\"uuid\":98}],72:[function(require,module,exports){\n  var util = require('../util');\n  var Shape = require('../model/shape');\n  \n  function DomXmlParser() { }\n  \n  DomXmlParser.prototype.parse = function(xml, shape) {\n    if (xml.replace(/^\\s+/, '') === '') return {};\n  \n    var result, error;\n    try {\n      if (window.DOMParser) {\n        try {\n          var parser = new DOMParser();\n          result = parser.parseFromString(xml, 'text/xml');\n        } catch (syntaxError) {\n          throw util.error(new Error('Parse error in document'),\n            {\n              originalError: syntaxError,\n              code: 'XMLParserError',\n              retryable: true\n            });\n        }\n  \n        if (result.documentElement === null) {\n          throw util.error(new Error('Cannot parse empty document.'),\n            {\n              code: 'XMLParserError',\n              retryable: true\n            });\n        }\n  \n        var isError = result.getElementsByTagName('parsererror')[0];\n        if (isError && (isError.parentNode === result ||\n            isError.parentNode.nodeName === 'body' ||\n            isError.parentNode.parentNode === result ||\n            isError.parentNode.parentNode.nodeName === 'body')) {\n          var errorElement = isError.getElementsByTagName('div')[0] || isError;\n          throw util.error(new Error(errorElement.textContent || 'Parser error in document'),\n            {\n              code: 'XMLParserError',\n              retryable: true\n            });\n        }\n      } else if (window.ActiveXObject) {\n        result = new window.ActiveXObject('Microsoft.XMLDOM');\n        result.async = false;\n  \n        if (!result.loadXML(xml)) {\n          throw util.error(new Error('Parse error in document'),\n            {\n              code: 'XMLParserError',\n              retryable: true\n            });\n        }\n      } else {\n        throw new Error('Cannot load XML parser');\n      }\n    } catch (e) {\n      error = e;\n    }\n  \n    if (result && result.documentElement && !error) {\n      var data = parseXml(result.documentElement, shape);\n      var metadata = getElementByTagName(result.documentElement, 'ResponseMetadata');\n      if (metadata) {\n        data.ResponseMetadata = parseXml(metadata, {});\n      }\n      return data;\n    } else if (error) {\n      throw util.error(error || new Error(), {code: 'XMLParserError', retryable: true});\n    } else { // empty xml document\n      return {};\n    }\n  };\n  \n  function getElementByTagName(xml, tag) {\n    var elements = xml.getElementsByTagName(tag);\n    for (var i = 0, iLen = elements.length; i < iLen; i++) {\n      if (elements[i].parentNode === xml) {\n        return elements[i];\n      }\n    }\n  }\n  \n  function parseXml(xml, shape) {\n    if (!shape) shape = {};\n    switch (shape.type) {\n      case 'structure': return parseStructure(xml, shape);\n      case 'map': return parseMap(xml, shape);\n      case 'list': return parseList(xml, shape);\n      case undefined: case null: return parseUnknown(xml);\n      default: return parseScalar(xml, shape);\n    }\n  }\n  \n  function parseStructure(xml, shape) {\n    var data = {};\n    if (xml === null) return data;\n  \n    util.each(shape.members, function(memberName, memberShape) {\n      if (memberShape.isXmlAttribute) {\n        if (Object.prototype.hasOwnProperty.call(xml.attributes, memberShape.name)) {\n          var value = xml.attributes[memberShape.name].value;\n          data[memberName] = parseXml({textContent: value}, memberShape);\n        }\n      } else {\n        var xmlChild = memberShape.flattened ? xml :\n          getElementByTagName(xml, memberShape.name);\n        if (xmlChild) {\n          data[memberName] = parseXml(xmlChild, memberShape);\n        } else if (!memberShape.flattened && memberShape.type === 'list') {\n          data[memberName] = memberShape.defaultValue;\n        }\n      }\n    });\n  \n    return data;\n  }\n  \n  function parseMap(xml, shape) {\n    var data = {};\n    var xmlKey = shape.key.name || 'key';\n    var xmlValue = shape.value.name || 'value';\n    var tagName = shape.flattened ? shape.name : 'entry';\n  \n    var child = xml.firstElementChild;\n    while (child) {\n      if (child.nodeName === tagName) {\n        var key = getElementByTagName(child, xmlKey).textContent;\n        var value = getElementByTagName(child, xmlValue);\n        data[key] = parseXml(value, shape.value);\n      }\n      child = child.nextElementSibling;\n    }\n    return data;\n  }\n  \n  function parseList(xml, shape) {\n    var data = [];\n    var tagName = shape.flattened ? shape.name : (shape.member.name || 'member');\n  \n    var child = xml.firstElementChild;\n    while (child) {\n      if (child.nodeName === tagName) {\n        data.push(parseXml(child, shape.member));\n      }\n      child = child.nextElementSibling;\n    }\n    return data;\n  }\n  \n  function parseScalar(xml, shape) {\n    if (xml.getAttribute) {\n      var encoding = xml.getAttribute('encoding');\n      if (encoding === 'base64') {\n        shape = new Shape.create({type: encoding});\n      }\n    }\n  \n    var text = xml.textContent;\n    if (text === '') text = null;\n    if (typeof shape.toType === 'function') {\n      return shape.toType(text);\n    } else {\n      return text;\n    }\n  }\n  \n  function parseUnknown(xml) {\n    if (xml === undefined || xml === null) return '';\n  \n    // empty object\n    if (!xml.firstElementChild) {\n      if (xml.parentNode.parentNode === null) return {};\n      if (xml.childNodes.length === 0) return '';\n      else return xml.textContent;\n    }\n  \n    // object, parse as structure\n    var shape = {type: 'structure', members: {}};\n    var child = xml.firstElementChild;\n    while (child) {\n      var tag = child.nodeName;\n      if (Object.prototype.hasOwnProperty.call(shape.members, tag)) {\n        // multiple tags of the same name makes it a list\n        shape.members[tag].type = 'list';\n      } else {\n        shape.members[tag] = {name: tag};\n      }\n      child = child.nextElementSibling;\n    }\n    return parseStructure(xml, shape);\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = DomXmlParser;\n  \n  },{\"../model/shape\":43,\"../util\":71}],73:[function(require,module,exports){\n  var util = require('../util');\n  var XmlNode = require('./xml-node').XmlNode;\n  var XmlText = require('./xml-text').XmlText;\n  \n  function XmlBuilder() { }\n  \n  XmlBuilder.prototype.toXML = function(params, shape, rootElement, noEmpty) {\n    var xml = new XmlNode(rootElement);\n    applyNamespaces(xml, shape, true);\n    serialize(xml, params, shape);\n    return xml.children.length > 0 || noEmpty ? xml.toString() : '';\n  };\n  \n  function serialize(xml, value, shape) {\n    switch (shape.type) {\n      case 'structure': return serializeStructure(xml, value, shape);\n      case 'map': return serializeMap(xml, value, shape);\n      case 'list': return serializeList(xml, value, shape);\n      default: return serializeScalar(xml, value, shape);\n    }\n  }\n  \n  function serializeStructure(xml, params, shape) {\n    util.arrayEach(shape.memberNames, function(memberName) {\n      var memberShape = shape.members[memberName];\n      if (memberShape.location !== 'body') return;\n  \n      var value = params[memberName];\n      var name = memberShape.name;\n      if (value !== undefined && value !== null) {\n        if (memberShape.isXmlAttribute) {\n          xml.addAttribute(name, value);\n        } else if (memberShape.flattened) {\n          serialize(xml, value, memberShape);\n        } else {\n          var element = new XmlNode(name);\n          xml.addChildNode(element);\n          applyNamespaces(element, memberShape);\n          serialize(element, value, memberShape);\n        }\n      }\n    });\n  }\n  \n  function serializeMap(xml, map, shape) {\n    var xmlKey = shape.key.name || 'key';\n    var xmlValue = shape.value.name || 'value';\n  \n    util.each(map, function(key, value) {\n      var entry = new XmlNode(shape.flattened ? shape.name : 'entry');\n      xml.addChildNode(entry);\n  \n      var entryKey = new XmlNode(xmlKey);\n      var entryValue = new XmlNode(xmlValue);\n      entry.addChildNode(entryKey);\n      entry.addChildNode(entryValue);\n  \n      serialize(entryKey, key, shape.key);\n      serialize(entryValue, value, shape.value);\n    });\n  }\n  \n  function serializeList(xml, list, shape) {\n    if (shape.flattened) {\n      util.arrayEach(list, function(value) {\n        var name = shape.member.name || shape.name;\n        var element = new XmlNode(name);\n        xml.addChildNode(element);\n        serialize(element, value, shape.member);\n      });\n    } else {\n      util.arrayEach(list, function(value) {\n        var name = shape.member.name || 'member';\n        var element = new XmlNode(name);\n        xml.addChildNode(element);\n        serialize(element, value, shape.member);\n      });\n    }\n  }\n  \n  function serializeScalar(xml, value, shape) {\n    xml.addChildNode(\n      new XmlText(shape.toWireFormat(value))\n    );\n  }\n  \n  function applyNamespaces(xml, shape, isRoot) {\n    var uri, prefix = 'xmlns';\n    if (shape.xmlNamespaceUri) {\n      uri = shape.xmlNamespaceUri;\n      if (shape.xmlNamespacePrefix) prefix += ':' + shape.xmlNamespacePrefix;\n    } else if (isRoot && shape.api.xmlNamespaceUri) {\n      uri = shape.api.xmlNamespaceUri;\n    }\n  \n    if (uri) xml.addAttribute(prefix, uri);\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = XmlBuilder;\n  \n  },{\"../util\":71,\"./xml-node\":76,\"./xml-text\":77}],74:[function(require,module,exports){\n  /**\n   * Escapes characters that can not be in an XML attribute.\n   */\n  function escapeAttribute(value) {\n      return value.replace(/&/g, '&amp;').replace(/'/g, '&apos;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n      escapeAttribute: escapeAttribute\n  };\n  \n  },{}],75:[function(require,module,exports){\n  /**\n   * Escapes characters that can not be in an XML element.\n   */\n  function escapeElement(value) {\n      return value.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n      escapeElement: escapeElement\n  };\n  \n  },{}],76:[function(require,module,exports){\n  var escapeAttribute = require('./escape-attribute').escapeAttribute;\n  \n  /**\n   * Represents an XML node.\n   * @api private\n   */\n  function XmlNode(name, children) {\n      if (children === void 0) { children = []; }\n      this.name = name;\n      this.children = children;\n      this.attributes = {};\n  }\n  XmlNode.prototype.addAttribute = function (name, value) {\n      this.attributes[name] = value;\n      return this;\n  };\n  XmlNode.prototype.addChildNode = function (child) {\n      this.children.push(child);\n      return this;\n  };\n  XmlNode.prototype.removeAttribute = function (name) {\n      delete this.attributes[name];\n      return this;\n  };\n  XmlNode.prototype.toString = function () {\n      var hasChildren = Boolean(this.children.length);\n      var xmlText = '<' + this.name;\n      // add attributes\n      var attributes = this.attributes;\n      for (var i = 0, attributeNames = Object.keys(attributes); i < attributeNames.length; i++) {\n          var attributeName = attributeNames[i];\n          var attribute = attributes[attributeName];\n          if (typeof attribute !== 'undefined' && attribute !== null) {\n              xmlText += ' ' + attributeName + '=\\\"' + escapeAttribute('' + attribute) + '\\\"';\n          }\n      }\n      return xmlText += !hasChildren ? '/>' : '>' + this.children.map(function (c) { return c.toString(); }).join('') + '</' + this.name + '>';\n  };\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n      XmlNode: XmlNode\n  };\n  \n  },{\"./escape-attribute\":74}],77:[function(require,module,exports){\n  var escapeElement = require('./escape-element').escapeElement;\n  \n  /**\n   * Represents an XML text value.\n   * @api private\n   */\n  function XmlText(value) {\n      this.value = value;\n  }\n  \n  XmlText.prototype.toString = function () {\n      return escapeElement('' + this.value);\n  };\n  \n  /**\n   * @api private\n   */\n  module.exports = {\n      XmlText: XmlText\n  };\n  \n  },{\"./escape-element\":75}],78:[function(require,module,exports){\n  'use strict'\n  \n  exports.byteLength = byteLength\n  exports.toByteArray = toByteArray\n  exports.fromByteArray = fromByteArray\n  \n  var lookup = []\n  var revLookup = []\n  var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n  \n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i]\n    revLookup[code.charCodeAt(i)] = i\n  }\n  \n  // Support decoding URL-safe base64 strings, as Node.js does.\n  // See: https://en.wikipedia.org/wiki/Base64#URL_applications\n  revLookup['-'.charCodeAt(0)] = 62\n  revLookup['_'.charCodeAt(0)] = 63\n  \n  function getLens (b64) {\n    var len = b64.length\n  \n    if (len % 4 > 0) {\n      throw new Error('Invalid string. Length must be a multiple of 4')\n    }\n  \n    // Trim off extra bytes after placeholder bytes are found\n    // See: https://github.com/beatgammit/base64-js/issues/42\n    var validLen = b64.indexOf('=')\n    if (validLen === -1) validLen = len\n  \n    var placeHoldersLen = validLen === len\n      ? 0\n      : 4 - (validLen % 4)\n  \n    return [validLen, placeHoldersLen]\n  }\n  \n  // base64 is 4/3 + up to two characters of the original data\n  function byteLength (b64) {\n    var lens = getLens(b64)\n    var validLen = lens[0]\n    var placeHoldersLen = lens[1]\n    return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n  }\n  \n  function _byteLength (b64, validLen, placeHoldersLen) {\n    return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n  }\n  \n  function toByteArray (b64) {\n    var tmp\n    var lens = getLens(b64)\n    var validLen = lens[0]\n    var placeHoldersLen = lens[1]\n  \n    var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n  \n    var curByte = 0\n  \n    // if there are placeholders, only get up to the last complete 4 chars\n    var len = placeHoldersLen > 0\n      ? validLen - 4\n      : validLen\n  \n    var i\n    for (i = 0; i < len; i += 4) {\n      tmp =\n        (revLookup[b64.charCodeAt(i)] << 18) |\n        (revLookup[b64.charCodeAt(i + 1)] << 12) |\n        (revLookup[b64.charCodeAt(i + 2)] << 6) |\n        revLookup[b64.charCodeAt(i + 3)]\n      arr[curByte++] = (tmp >> 16) & 0xFF\n      arr[curByte++] = (tmp >> 8) & 0xFF\n      arr[curByte++] = tmp & 0xFF\n    }\n  \n    if (placeHoldersLen === 2) {\n      tmp =\n        (revLookup[b64.charCodeAt(i)] << 2) |\n        (revLookup[b64.charCodeAt(i + 1)] >> 4)\n      arr[curByte++] = tmp & 0xFF\n    }\n  \n    if (placeHoldersLen === 1) {\n      tmp =\n        (revLookup[b64.charCodeAt(i)] << 10) |\n        (revLookup[b64.charCodeAt(i + 1)] << 4) |\n        (revLookup[b64.charCodeAt(i + 2)] >> 2)\n      arr[curByte++] = (tmp >> 8) & 0xFF\n      arr[curByte++] = tmp & 0xFF\n    }\n  \n    return arr\n  }\n  \n  function tripletToBase64 (num) {\n    return lookup[num >> 18 & 0x3F] +\n      lookup[num >> 12 & 0x3F] +\n      lookup[num >> 6 & 0x3F] +\n      lookup[num & 0x3F]\n  }\n  \n  function encodeChunk (uint8, start, end) {\n    var tmp\n    var output = []\n    for (var i = start; i < end; i += 3) {\n      tmp =\n        ((uint8[i] << 16) & 0xFF0000) +\n        ((uint8[i + 1] << 8) & 0xFF00) +\n        (uint8[i + 2] & 0xFF)\n      output.push(tripletToBase64(tmp))\n    }\n    return output.join('')\n  }\n  \n  function fromByteArray (uint8) {\n    var tmp\n    var len = uint8.length\n    var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n    var parts = []\n    var maxChunkLength = 16383 // must be multiple of 3\n  \n    // go through the array every three bytes, we'll deal with trailing stuff later\n    for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n      parts.push(encodeChunk(\n        uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n      ))\n    }\n  \n    // pad the end with zeros, but make sure to not forget the extra bytes\n    if (extraBytes === 1) {\n      tmp = uint8[len - 1]\n      parts.push(\n        lookup[tmp >> 2] +\n        lookup[(tmp << 4) & 0x3F] +\n        '=='\n      )\n    } else if (extraBytes === 2) {\n      tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n      parts.push(\n        lookup[tmp >> 10] +\n        lookup[(tmp >> 4) & 0x3F] +\n        lookup[(tmp << 2) & 0x3F] +\n        '='\n      )\n    }\n  \n    return parts.join('')\n  }\n  \n  },{}],79:[function(require,module,exports){\n  \n  },{}],80:[function(require,module,exports){\n  (function (global,Buffer){\n  /*!\n   * The buffer module from node.js, for the browser.\n   *\n   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n   * @license  MIT\n   */\n  /* eslint-disable no-proto */\n  \n  'use strict'\n  \n  var base64 = require('base64-js')\n  var ieee754 = require('ieee754')\n  var isArray = require('isarray')\n  \n  exports.Buffer = Buffer\n  exports.SlowBuffer = SlowBuffer\n  exports.INSPECT_MAX_BYTES = 50\n  \n  /**\n   * If `Buffer.TYPED_ARRAY_SUPPORT`:\n   *   === true    Use Uint8Array implementation (fastest)\n   *   === false   Use Object implementation (most compatible, even IE6)\n   *\n   * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n   * Opera 11.6+, iOS 4.2+.\n   *\n   * Due to various browser bugs, sometimes the Object implementation will be used even\n   * when the browser supports typed arrays.\n   *\n   * Note:\n   *\n   *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n   *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n   *\n   *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n   *\n   *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n   *     incorrect length in some situations.\n  \n   * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n   * get the Object implementation, which is slower but behaves correctly.\n   */\n  Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n    ? global.TYPED_ARRAY_SUPPORT\n    : typedArraySupport()\n  \n  /*\n   * Export kMaxLength after typed array support is determined.\n   */\n  exports.kMaxLength = kMaxLength()\n  \n  function typedArraySupport () {\n    try {\n      var arr = new Uint8Array(1)\n      arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n      return arr.foo() === 42 && // typed array instances can be augmented\n          typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n          arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n    } catch (e) {\n      return false\n    }\n  }\n  \n  function kMaxLength () {\n    return Buffer.TYPED_ARRAY_SUPPORT\n      ? 0x7fffffff\n      : 0x3fffffff\n  }\n  \n  function createBuffer (that, length) {\n    if (kMaxLength() < length) {\n      throw new RangeError('Invalid typed array length')\n    }\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      // Return an augmented `Uint8Array` instance, for best performance\n      that = new Uint8Array(length)\n      that.__proto__ = Buffer.prototype\n    } else {\n      // Fallback: Return an object instance of the Buffer class\n      if (that === null) {\n        that = new Buffer(length)\n      }\n      that.length = length\n    }\n  \n    return that\n  }\n  \n  /**\n   * The Buffer constructor returns instances of `Uint8Array` that have their\n   * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n   * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n   * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n   * returns a single octet.\n   *\n   * The `Uint8Array` prototype remains unmodified.\n   */\n  \n  function Buffer (arg, encodingOrOffset, length) {\n    if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n      return new Buffer(arg, encodingOrOffset, length)\n    }\n  \n    // Common case.\n    if (typeof arg === 'number') {\n      if (typeof encodingOrOffset === 'string') {\n        throw new Error(\n          'If encoding is specified then the first argument must be a string'\n        )\n      }\n      return allocUnsafe(this, arg)\n    }\n    return from(this, arg, encodingOrOffset, length)\n  }\n  \n  Buffer.poolSize = 8192 // not used by this implementation\n  \n  // TODO: Legacy, not needed anymore. Remove in next major version.\n  Buffer._augment = function (arr) {\n    arr.__proto__ = Buffer.prototype\n    return arr\n  }\n  \n  function from (that, value, encodingOrOffset, length) {\n    if (typeof value === 'number') {\n      throw new TypeError('\"value\" argument must not be a number')\n    }\n  \n    if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n      return fromArrayBuffer(that, value, encodingOrOffset, length)\n    }\n  \n    if (typeof value === 'string') {\n      return fromString(that, value, encodingOrOffset)\n    }\n  \n    return fromObject(that, value)\n  }\n  \n  /**\n   * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n   * if value is a number.\n   * Buffer.from(str[, encoding])\n   * Buffer.from(array)\n   * Buffer.from(buffer)\n   * Buffer.from(arrayBuffer[, byteOffset[, length]])\n   **/\n  Buffer.from = function (value, encodingOrOffset, length) {\n    return from(null, value, encodingOrOffset, length)\n  }\n  \n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    Buffer.prototype.__proto__ = Uint8Array.prototype\n    Buffer.__proto__ = Uint8Array\n    if (typeof Symbol !== 'undefined' && Symbol.species &&\n        Buffer[Symbol.species] === Buffer) {\n      // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n      Object.defineProperty(Buffer, Symbol.species, {\n        value: null,\n        configurable: true\n      })\n    }\n  }\n  \n  function assertSize (size) {\n    if (typeof size !== 'number') {\n      throw new TypeError('\"size\" argument must be a number')\n    } else if (size < 0) {\n      throw new RangeError('\"size\" argument must not be negative')\n    }\n  }\n  \n  function alloc (that, size, fill, encoding) {\n    assertSize(size)\n    if (size <= 0) {\n      return createBuffer(that, size)\n    }\n    if (fill !== undefined) {\n      // Only pay attention to encoding if it's a string. This\n      // prevents accidentally sending in a number that would\n      // be interpretted as a start offset.\n      return typeof encoding === 'string'\n        ? createBuffer(that, size).fill(fill, encoding)\n        : createBuffer(that, size).fill(fill)\n    }\n    return createBuffer(that, size)\n  }\n  \n  /**\n   * Creates a new filled Buffer instance.\n   * alloc(size[, fill[, encoding]])\n   **/\n  Buffer.alloc = function (size, fill, encoding) {\n    return alloc(null, size, fill, encoding)\n  }\n  \n  function allocUnsafe (that, size) {\n    assertSize(size)\n    that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n    if (!Buffer.TYPED_ARRAY_SUPPORT) {\n      for (var i = 0; i < size; ++i) {\n        that[i] = 0\n      }\n    }\n    return that\n  }\n  \n  /**\n   * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n   * */\n  Buffer.allocUnsafe = function (size) {\n    return allocUnsafe(null, size)\n  }\n  /**\n   * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n   */\n  Buffer.allocUnsafeSlow = function (size) {\n    return allocUnsafe(null, size)\n  }\n  \n  function fromString (that, string, encoding) {\n    if (typeof encoding !== 'string' || encoding === '') {\n      encoding = 'utf8'\n    }\n  \n    if (!Buffer.isEncoding(encoding)) {\n      throw new TypeError('\"encoding\" must be a valid string encoding')\n    }\n  \n    var length = byteLength(string, encoding) | 0\n    that = createBuffer(that, length)\n  \n    var actual = that.write(string, encoding)\n  \n    if (actual !== length) {\n      // Writing a hex string, for example, that contains invalid characters will\n      // cause everything after the first invalid character to be ignored. (e.g.\n      // 'abxxcd' will be treated as 'ab')\n      that = that.slice(0, actual)\n    }\n  \n    return that\n  }\n  \n  function fromArrayLike (that, array) {\n    var length = array.length < 0 ? 0 : checked(array.length) | 0\n    that = createBuffer(that, length)\n    for (var i = 0; i < length; i += 1) {\n      that[i] = array[i] & 255\n    }\n    return that\n  }\n  \n  function fromArrayBuffer (that, array, byteOffset, length) {\n    array.byteLength // this throws if `array` is not a valid ArrayBuffer\n  \n    if (byteOffset < 0 || array.byteLength < byteOffset) {\n      throw new RangeError('\\'offset\\' is out of bounds')\n    }\n  \n    if (array.byteLength < byteOffset + (length || 0)) {\n      throw new RangeError('\\'length\\' is out of bounds')\n    }\n  \n    if (byteOffset === undefined && length === undefined) {\n      array = new Uint8Array(array)\n    } else if (length === undefined) {\n      array = new Uint8Array(array, byteOffset)\n    } else {\n      array = new Uint8Array(array, byteOffset, length)\n    }\n  \n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      // Return an augmented `Uint8Array` instance, for best performance\n      that = array\n      that.__proto__ = Buffer.prototype\n    } else {\n      // Fallback: Return an object instance of the Buffer class\n      that = fromArrayLike(that, array)\n    }\n    return that\n  }\n  \n  function fromObject (that, obj) {\n    if (Buffer.isBuffer(obj)) {\n      var len = checked(obj.length) | 0\n      that = createBuffer(that, len)\n  \n      if (that.length === 0) {\n        return that\n      }\n  \n      obj.copy(that, 0, 0, len)\n      return that\n    }\n  \n    if (obj) {\n      if ((typeof ArrayBuffer !== 'undefined' &&\n          obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n        if (typeof obj.length !== 'number' || isnan(obj.length)) {\n          return createBuffer(that, 0)\n        }\n        return fromArrayLike(that, obj)\n      }\n  \n      if (obj.type === 'Buffer' && isArray(obj.data)) {\n        return fromArrayLike(that, obj.data)\n      }\n    }\n  \n    throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n  }\n  \n  function checked (length) {\n    // Note: cannot use `length < kMaxLength()` here because that fails when\n    // length is NaN (which is otherwise coerced to zero.)\n    if (length >= kMaxLength()) {\n      throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                           'size: 0x' + kMaxLength().toString(16) + ' bytes')\n    }\n    return length | 0\n  }\n  \n  function SlowBuffer (length) {\n    if (+length != length) { // eslint-disable-line eqeqeq\n      length = 0\n    }\n    return Buffer.alloc(+length)\n  }\n  \n  Buffer.isBuffer = function isBuffer (b) {\n    return !!(b != null && b._isBuffer)\n  }\n  \n  Buffer.compare = function compare (a, b) {\n    if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n      throw new TypeError('Arguments must be Buffers')\n    }\n  \n    if (a === b) return 0\n  \n    var x = a.length\n    var y = b.length\n  \n    for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n      if (a[i] !== b[i]) {\n        x = a[i]\n        y = b[i]\n        break\n      }\n    }\n  \n    if (x < y) return -1\n    if (y < x) return 1\n    return 0\n  }\n  \n  Buffer.isEncoding = function isEncoding (encoding) {\n    switch (String(encoding).toLowerCase()) {\n      case 'hex':\n      case 'utf8':\n      case 'utf-8':\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n      case 'base64':\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return true\n      default:\n        return false\n    }\n  }\n  \n  Buffer.concat = function concat (list, length) {\n    if (!isArray(list)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n  \n    if (list.length === 0) {\n      return Buffer.alloc(0)\n    }\n  \n    var i\n    if (length === undefined) {\n      length = 0\n      for (i = 0; i < list.length; ++i) {\n        length += list[i].length\n      }\n    }\n  \n    var buffer = Buffer.allocUnsafe(length)\n    var pos = 0\n    for (i = 0; i < list.length; ++i) {\n      var buf = list[i]\n      if (!Buffer.isBuffer(buf)) {\n        throw new TypeError('\"list\" argument must be an Array of Buffers')\n      }\n      buf.copy(buffer, pos)\n      pos += buf.length\n    }\n    return buffer\n  }\n  \n  function byteLength (string, encoding) {\n    if (Buffer.isBuffer(string)) {\n      return string.length\n    }\n    if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n        (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n      return string.byteLength\n    }\n    if (typeof string !== 'string') {\n      string = '' + string\n    }\n  \n    var len = string.length\n    if (len === 0) return 0\n  \n    // Use a for loop to avoid recursion\n    var loweredCase = false\n    for (;;) {\n      switch (encoding) {\n        case 'ascii':\n        case 'latin1':\n        case 'binary':\n          return len\n        case 'utf8':\n        case 'utf-8':\n        case undefined:\n          return utf8ToBytes(string).length\n        case 'ucs2':\n        case 'ucs-2':\n        case 'utf16le':\n        case 'utf-16le':\n          return len * 2\n        case 'hex':\n          return len >>> 1\n        case 'base64':\n          return base64ToBytes(string).length\n        default:\n          if (loweredCase) return utf8ToBytes(string).length // assume utf8\n          encoding = ('' + encoding).toLowerCase()\n          loweredCase = true\n      }\n    }\n  }\n  Buffer.byteLength = byteLength\n  \n  function slowToString (encoding, start, end) {\n    var loweredCase = false\n  \n    // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n    // property of a typed array.\n  \n    // This behaves neither like String nor Uint8Array in that we set start/end\n    // to their upper/lower bounds if the value passed is out of range.\n    // undefined is handled specially as per ECMA-262 6th Edition,\n    // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n    if (start === undefined || start < 0) {\n      start = 0\n    }\n    // Return early if start > this.length. Done here to prevent potential uint32\n    // coercion fail below.\n    if (start > this.length) {\n      return ''\n    }\n  \n    if (end === undefined || end > this.length) {\n      end = this.length\n    }\n  \n    if (end <= 0) {\n      return ''\n    }\n  \n    // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n    end >>>= 0\n    start >>>= 0\n  \n    if (end <= start) {\n      return ''\n    }\n  \n    if (!encoding) encoding = 'utf8'\n  \n    while (true) {\n      switch (encoding) {\n        case 'hex':\n          return hexSlice(this, start, end)\n  \n        case 'utf8':\n        case 'utf-8':\n          return utf8Slice(this, start, end)\n  \n        case 'ascii':\n          return asciiSlice(this, start, end)\n  \n        case 'latin1':\n        case 'binary':\n          return latin1Slice(this, start, end)\n  \n        case 'base64':\n          return base64Slice(this, start, end)\n  \n        case 'ucs2':\n        case 'ucs-2':\n        case 'utf16le':\n        case 'utf-16le':\n          return utf16leSlice(this, start, end)\n  \n        default:\n          if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n          encoding = (encoding + '').toLowerCase()\n          loweredCase = true\n      }\n    }\n  }\n  \n  // The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n  // Buffer instances.\n  Buffer.prototype._isBuffer = true\n  \n  function swap (b, n, m) {\n    var i = b[n]\n    b[n] = b[m]\n    b[m] = i\n  }\n  \n  Buffer.prototype.swap16 = function swap16 () {\n    var len = this.length\n    if (len % 2 !== 0) {\n      throw new RangeError('Buffer size must be a multiple of 16-bits')\n    }\n    for (var i = 0; i < len; i += 2) {\n      swap(this, i, i + 1)\n    }\n    return this\n  }\n  \n  Buffer.prototype.swap32 = function swap32 () {\n    var len = this.length\n    if (len % 4 !== 0) {\n      throw new RangeError('Buffer size must be a multiple of 32-bits')\n    }\n    for (var i = 0; i < len; i += 4) {\n      swap(this, i, i + 3)\n      swap(this, i + 1, i + 2)\n    }\n    return this\n  }\n  \n  Buffer.prototype.swap64 = function swap64 () {\n    var len = this.length\n    if (len % 8 !== 0) {\n      throw new RangeError('Buffer size must be a multiple of 64-bits')\n    }\n    for (var i = 0; i < len; i += 8) {\n      swap(this, i, i + 7)\n      swap(this, i + 1, i + 6)\n      swap(this, i + 2, i + 5)\n      swap(this, i + 3, i + 4)\n    }\n    return this\n  }\n  \n  Buffer.prototype.toString = function toString () {\n    var length = this.length | 0\n    if (length === 0) return ''\n    if (arguments.length === 0) return utf8Slice(this, 0, length)\n    return slowToString.apply(this, arguments)\n  }\n  \n  Buffer.prototype.equals = function equals (b) {\n    if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n    if (this === b) return true\n    return Buffer.compare(this, b) === 0\n  }\n  \n  Buffer.prototype.inspect = function inspect () {\n    var str = ''\n    var max = exports.INSPECT_MAX_BYTES\n    if (this.length > 0) {\n      str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n      if (this.length > max) str += ' ... '\n    }\n    return '<Buffer ' + str + '>'\n  }\n  \n  Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n    if (!Buffer.isBuffer(target)) {\n      throw new TypeError('Argument must be a Buffer')\n    }\n  \n    if (start === undefined) {\n      start = 0\n    }\n    if (end === undefined) {\n      end = target ? target.length : 0\n    }\n    if (thisStart === undefined) {\n      thisStart = 0\n    }\n    if (thisEnd === undefined) {\n      thisEnd = this.length\n    }\n  \n    if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n      throw new RangeError('out of range index')\n    }\n  \n    if (thisStart >= thisEnd && start >= end) {\n      return 0\n    }\n    if (thisStart >= thisEnd) {\n      return -1\n    }\n    if (start >= end) {\n      return 1\n    }\n  \n    start >>>= 0\n    end >>>= 0\n    thisStart >>>= 0\n    thisEnd >>>= 0\n  \n    if (this === target) return 0\n  \n    var x = thisEnd - thisStart\n    var y = end - start\n    var len = Math.min(x, y)\n  \n    var thisCopy = this.slice(thisStart, thisEnd)\n    var targetCopy = target.slice(start, end)\n  \n    for (var i = 0; i < len; ++i) {\n      if (thisCopy[i] !== targetCopy[i]) {\n        x = thisCopy[i]\n        y = targetCopy[i]\n        break\n      }\n    }\n  \n    if (x < y) return -1\n    if (y < x) return 1\n    return 0\n  }\n  \n  // Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n  // OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n  //\n  // Arguments:\n  // - buffer - a Buffer to search\n  // - val - a string, Buffer, or number\n  // - byteOffset - an index into `buffer`; will be clamped to an int32\n  // - encoding - an optional encoding, relevant is val is a string\n  // - dir - true for indexOf, false for lastIndexOf\n  function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n    // Empty buffer means no match\n    if (buffer.length === 0) return -1\n  \n    // Normalize byteOffset\n    if (typeof byteOffset === 'string') {\n      encoding = byteOffset\n      byteOffset = 0\n    } else if (byteOffset > 0x7fffffff) {\n      byteOffset = 0x7fffffff\n    } else if (byteOffset < -0x80000000) {\n      byteOffset = -0x80000000\n    }\n    byteOffset = +byteOffset  // Coerce to Number.\n    if (isNaN(byteOffset)) {\n      // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n      byteOffset = dir ? 0 : (buffer.length - 1)\n    }\n  \n    // Normalize byteOffset: negative offsets start from the end of the buffer\n    if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n    if (byteOffset >= buffer.length) {\n      if (dir) return -1\n      else byteOffset = buffer.length - 1\n    } else if (byteOffset < 0) {\n      if (dir) byteOffset = 0\n      else return -1\n    }\n  \n    // Normalize val\n    if (typeof val === 'string') {\n      val = Buffer.from(val, encoding)\n    }\n  \n    // Finally, search either indexOf (if dir is true) or lastIndexOf\n    if (Buffer.isBuffer(val)) {\n      // Special case: looking for empty string/buffer always fails\n      if (val.length === 0) {\n        return -1\n      }\n      return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n    } else if (typeof val === 'number') {\n      val = val & 0xFF // Search for a byte value [0-255]\n      if (Buffer.TYPED_ARRAY_SUPPORT &&\n          typeof Uint8Array.prototype.indexOf === 'function') {\n        if (dir) {\n          return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n        } else {\n          return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n        }\n      }\n      return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n    }\n  \n    throw new TypeError('val must be string, number or Buffer')\n  }\n  \n  function arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n    var indexSize = 1\n    var arrLength = arr.length\n    var valLength = val.length\n  \n    if (encoding !== undefined) {\n      encoding = String(encoding).toLowerCase()\n      if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n          encoding === 'utf16le' || encoding === 'utf-16le') {\n        if (arr.length < 2 || val.length < 2) {\n          return -1\n        }\n        indexSize = 2\n        arrLength /= 2\n        valLength /= 2\n        byteOffset /= 2\n      }\n    }\n  \n    function read (buf, i) {\n      if (indexSize === 1) {\n        return buf[i]\n      } else {\n        return buf.readUInt16BE(i * indexSize)\n      }\n    }\n  \n    var i\n    if (dir) {\n      var foundIndex = -1\n      for (i = byteOffset; i < arrLength; i++) {\n        if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n          if (foundIndex === -1) foundIndex = i\n          if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n        } else {\n          if (foundIndex !== -1) i -= i - foundIndex\n          foundIndex = -1\n        }\n      }\n    } else {\n      if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n      for (i = byteOffset; i >= 0; i--) {\n        var found = true\n        for (var j = 0; j < valLength; j++) {\n          if (read(arr, i + j) !== read(val, j)) {\n            found = false\n            break\n          }\n        }\n        if (found) return i\n      }\n    }\n  \n    return -1\n  }\n  \n  Buffer.prototype.includes = function includes (val, byteOffset, encoding) {\n    return this.indexOf(val, byteOffset, encoding) !== -1\n  }\n  \n  Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n    return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n  }\n  \n  Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n    return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n  }\n  \n  function hexWrite (buf, string, offset, length) {\n    offset = Number(offset) || 0\n    var remaining = buf.length - offset\n    if (!length) {\n      length = remaining\n    } else {\n      length = Number(length)\n      if (length > remaining) {\n        length = remaining\n      }\n    }\n  \n    // must be an even number of digits\n    var strLen = string.length\n    if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n  \n    if (length > strLen / 2) {\n      length = strLen / 2\n    }\n    for (var i = 0; i < length; ++i) {\n      var parsed = parseInt(string.substr(i * 2, 2), 16)\n      if (isNaN(parsed)) return i\n      buf[offset + i] = parsed\n    }\n    return i\n  }\n  \n  function utf8Write (buf, string, offset, length) {\n    return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n  }\n  \n  function asciiWrite (buf, string, offset, length) {\n    return blitBuffer(asciiToBytes(string), buf, offset, length)\n  }\n  \n  function latin1Write (buf, string, offset, length) {\n    return asciiWrite(buf, string, offset, length)\n  }\n  \n  function base64Write (buf, string, offset, length) {\n    return blitBuffer(base64ToBytes(string), buf, offset, length)\n  }\n  \n  function ucs2Write (buf, string, offset, length) {\n    return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n  }\n  \n  Buffer.prototype.write = function write (string, offset, length, encoding) {\n    // Buffer#write(string)\n    if (offset === undefined) {\n      encoding = 'utf8'\n      length = this.length\n      offset = 0\n    // Buffer#write(string, encoding)\n    } else if (length === undefined && typeof offset === 'string') {\n      encoding = offset\n      length = this.length\n      offset = 0\n    // Buffer#write(string, offset[, length][, encoding])\n    } else if (isFinite(offset)) {\n      offset = offset | 0\n      if (isFinite(length)) {\n        length = length | 0\n        if (encoding === undefined) encoding = 'utf8'\n      } else {\n        encoding = length\n        length = undefined\n      }\n    // legacy write(string, encoding, offset, length) - remove in v0.13\n    } else {\n      throw new Error(\n        'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n      )\n    }\n  \n    var remaining = this.length - offset\n    if (length === undefined || length > remaining) length = remaining\n  \n    if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n      throw new RangeError('Attempt to write outside buffer bounds')\n    }\n  \n    if (!encoding) encoding = 'utf8'\n  \n    var loweredCase = false\n    for (;;) {\n      switch (encoding) {\n        case 'hex':\n          return hexWrite(this, string, offset, length)\n  \n        case 'utf8':\n        case 'utf-8':\n          return utf8Write(this, string, offset, length)\n  \n        case 'ascii':\n          return asciiWrite(this, string, offset, length)\n  \n        case 'latin1':\n        case 'binary':\n          return latin1Write(this, string, offset, length)\n  \n        case 'base64':\n          // Warning: maxLength not taken into account in base64Write\n          return base64Write(this, string, offset, length)\n  \n        case 'ucs2':\n        case 'ucs-2':\n        case 'utf16le':\n        case 'utf-16le':\n          return ucs2Write(this, string, offset, length)\n  \n        default:\n          if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n          encoding = ('' + encoding).toLowerCase()\n          loweredCase = true\n      }\n    }\n  }\n  \n  Buffer.prototype.toJSON = function toJSON () {\n    return {\n      type: 'Buffer',\n      data: Array.prototype.slice.call(this._arr || this, 0)\n    }\n  }\n  \n  function base64Slice (buf, start, end) {\n    if (start === 0 && end === buf.length) {\n      return base64.fromByteArray(buf)\n    } else {\n      return base64.fromByteArray(buf.slice(start, end))\n    }\n  }\n  \n  function utf8Slice (buf, start, end) {\n    end = Math.min(buf.length, end)\n    var res = []\n  \n    var i = start\n    while (i < end) {\n      var firstByte = buf[i]\n      var codePoint = null\n      var bytesPerSequence = (firstByte > 0xEF) ? 4\n        : (firstByte > 0xDF) ? 3\n        : (firstByte > 0xBF) ? 2\n        : 1\n  \n      if (i + bytesPerSequence <= end) {\n        var secondByte, thirdByte, fourthByte, tempCodePoint\n  \n        switch (bytesPerSequence) {\n          case 1:\n            if (firstByte < 0x80) {\n              codePoint = firstByte\n            }\n            break\n          case 2:\n            secondByte = buf[i + 1]\n            if ((secondByte & 0xC0) === 0x80) {\n              tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n              if (tempCodePoint > 0x7F) {\n                codePoint = tempCodePoint\n              }\n            }\n            break\n          case 3:\n            secondByte = buf[i + 1]\n            thirdByte = buf[i + 2]\n            if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n              tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n              if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n                codePoint = tempCodePoint\n              }\n            }\n            break\n          case 4:\n            secondByte = buf[i + 1]\n            thirdByte = buf[i + 2]\n            fourthByte = buf[i + 3]\n            if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n              tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n              if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n                codePoint = tempCodePoint\n              }\n            }\n        }\n      }\n  \n      if (codePoint === null) {\n        // we did not generate a valid codePoint so insert a\n        // replacement char (U+FFFD) and advance only 1 byte\n        codePoint = 0xFFFD\n        bytesPerSequence = 1\n      } else if (codePoint > 0xFFFF) {\n        // encode to utf16 (surrogate pair dance)\n        codePoint -= 0x10000\n        res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n        codePoint = 0xDC00 | codePoint & 0x3FF\n      }\n  \n      res.push(codePoint)\n      i += bytesPerSequence\n    }\n  \n    return decodeCodePointsArray(res)\n  }\n  \n  // Based on http://stackoverflow.com/a/22747272/680742, the browser with\n  // the lowest limit is Chrome, with 0x10000 args.\n  // We go 1 magnitude less, for safety\n  var MAX_ARGUMENTS_LENGTH = 0x1000\n  \n  function decodeCodePointsArray (codePoints) {\n    var len = codePoints.length\n    if (len <= MAX_ARGUMENTS_LENGTH) {\n      return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n    }\n  \n    // Decode in chunks to avoid \"call stack size exceeded\".\n    var res = ''\n    var i = 0\n    while (i < len) {\n      res += String.fromCharCode.apply(\n        String,\n        codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n      )\n    }\n    return res\n  }\n  \n  function asciiSlice (buf, start, end) {\n    var ret = ''\n    end = Math.min(buf.length, end)\n  \n    for (var i = start; i < end; ++i) {\n      ret += String.fromCharCode(buf[i] & 0x7F)\n    }\n    return ret\n  }\n  \n  function latin1Slice (buf, start, end) {\n    var ret = ''\n    end = Math.min(buf.length, end)\n  \n    for (var i = start; i < end; ++i) {\n      ret += String.fromCharCode(buf[i])\n    }\n    return ret\n  }\n  \n  function hexSlice (buf, start, end) {\n    var len = buf.length\n  \n    if (!start || start < 0) start = 0\n    if (!end || end < 0 || end > len) end = len\n  \n    var out = ''\n    for (var i = start; i < end; ++i) {\n      out += toHex(buf[i])\n    }\n    return out\n  }\n  \n  function utf16leSlice (buf, start, end) {\n    var bytes = buf.slice(start, end)\n    var res = ''\n    for (var i = 0; i < bytes.length; i += 2) {\n      res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n    }\n    return res\n  }\n  \n  Buffer.prototype.slice = function slice (start, end) {\n    var len = this.length\n    start = ~~start\n    end = end === undefined ? len : ~~end\n  \n    if (start < 0) {\n      start += len\n      if (start < 0) start = 0\n    } else if (start > len) {\n      start = len\n    }\n  \n    if (end < 0) {\n      end += len\n      if (end < 0) end = 0\n    } else if (end > len) {\n      end = len\n    }\n  \n    if (end < start) end = start\n  \n    var newBuf\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      newBuf = this.subarray(start, end)\n      newBuf.__proto__ = Buffer.prototype\n    } else {\n      var sliceLen = end - start\n      newBuf = new Buffer(sliceLen, undefined)\n      for (var i = 0; i < sliceLen; ++i) {\n        newBuf[i] = this[i + start]\n      }\n    }\n  \n    return newBuf\n  }\n  \n  /*\n   * Need to make sure that buffer isn't trying to write out of bounds.\n   */\n  function checkOffset (offset, ext, length) {\n    if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n    if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n  }\n  \n  Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) checkOffset(offset, byteLength, this.length)\n  \n    var val = this[offset]\n    var mul = 1\n    var i = 0\n    while (++i < byteLength && (mul *= 0x100)) {\n      val += this[offset + i] * mul\n    }\n  \n    return val\n  }\n  \n  Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) {\n      checkOffset(offset, byteLength, this.length)\n    }\n  \n    var val = this[offset + --byteLength]\n    var mul = 1\n    while (byteLength > 0 && (mul *= 0x100)) {\n      val += this[offset + --byteLength] * mul\n    }\n  \n    return val\n  }\n  \n  Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 1, this.length)\n    return this[offset]\n  }\n  \n  Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    return this[offset] | (this[offset + 1] << 8)\n  }\n  \n  Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    return (this[offset] << 8) | this[offset + 1]\n  }\n  \n  Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n  \n    return ((this[offset]) |\n        (this[offset + 1] << 8) |\n        (this[offset + 2] << 16)) +\n        (this[offset + 3] * 0x1000000)\n  }\n  \n  Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n  \n    return (this[offset] * 0x1000000) +\n      ((this[offset + 1] << 16) |\n      (this[offset + 2] << 8) |\n      this[offset + 3])\n  }\n  \n  Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) checkOffset(offset, byteLength, this.length)\n  \n    var val = this[offset]\n    var mul = 1\n    var i = 0\n    while (++i < byteLength && (mul *= 0x100)) {\n      val += this[offset + i] * mul\n    }\n    mul *= 0x80\n  \n    if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n  \n    return val\n  }\n  \n  Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) checkOffset(offset, byteLength, this.length)\n  \n    var i = byteLength\n    var mul = 1\n    var val = this[offset + --i]\n    while (i > 0 && (mul *= 0x100)) {\n      val += this[offset + --i] * mul\n    }\n    mul *= 0x80\n  \n    if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n  \n    return val\n  }\n  \n  Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 1, this.length)\n    if (!(this[offset] & 0x80)) return (this[offset])\n    return ((0xff - this[offset] + 1) * -1)\n  }\n  \n  Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    var val = this[offset] | (this[offset + 1] << 8)\n    return (val & 0x8000) ? val | 0xFFFF0000 : val\n  }\n  \n  Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    var val = this[offset + 1] | (this[offset] << 8)\n    return (val & 0x8000) ? val | 0xFFFF0000 : val\n  }\n  \n  Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n  \n    return (this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16) |\n      (this[offset + 3] << 24)\n  }\n  \n  Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n  \n    return (this[offset] << 24) |\n      (this[offset + 1] << 16) |\n      (this[offset + 2] << 8) |\n      (this[offset + 3])\n  }\n  \n  Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n    return ieee754.read(this, offset, true, 23, 4)\n  }\n  \n  Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n    return ieee754.read(this, offset, false, 23, 4)\n  }\n  \n  Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 8, this.length)\n    return ieee754.read(this, offset, true, 52, 8)\n  }\n  \n  Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 8, this.length)\n    return ieee754.read(this, offset, false, 52, 8)\n  }\n  \n  function checkInt (buf, value, offset, ext, max, min) {\n    if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n    if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n    if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  }\n  \n  Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n    value = +value\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) {\n      var maxBytes = Math.pow(2, 8 * byteLength) - 1\n      checkInt(this, value, offset, byteLength, maxBytes, 0)\n    }\n  \n    var mul = 1\n    var i = 0\n    this[offset] = value & 0xFF\n    while (++i < byteLength && (mul *= 0x100)) {\n      this[offset + i] = (value / mul) & 0xFF\n    }\n  \n    return offset + byteLength\n  }\n  \n  Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n    value = +value\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) {\n      var maxBytes = Math.pow(2, 8 * byteLength) - 1\n      checkInt(this, value, offset, byteLength, maxBytes, 0)\n    }\n  \n    var i = byteLength - 1\n    var mul = 1\n    this[offset + i] = value & 0xFF\n    while (--i >= 0 && (mul *= 0x100)) {\n      this[offset + i] = (value / mul) & 0xFF\n    }\n  \n    return offset + byteLength\n  }\n  \n  Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n    if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n    this[offset] = (value & 0xff)\n    return offset + 1\n  }\n  \n  function objectWriteUInt16 (buf, value, offset, littleEndian) {\n    if (value < 0) value = 0xffff + value + 1\n    for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n      buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n        (littleEndian ? i : 1 - i) * 8\n    }\n  }\n  \n  Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      this[offset] = (value & 0xff)\n      this[offset + 1] = (value >>> 8)\n    } else {\n      objectWriteUInt16(this, value, offset, true)\n    }\n    return offset + 2\n  }\n  \n  Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      this[offset] = (value >>> 8)\n      this[offset + 1] = (value & 0xff)\n    } else {\n      objectWriteUInt16(this, value, offset, false)\n    }\n    return offset + 2\n  }\n  \n  function objectWriteUInt32 (buf, value, offset, littleEndian) {\n    if (value < 0) value = 0xffffffff + value + 1\n    for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n      buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n    }\n  }\n  \n  Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      this[offset + 3] = (value >>> 24)\n      this[offset + 2] = (value >>> 16)\n      this[offset + 1] = (value >>> 8)\n      this[offset] = (value & 0xff)\n    } else {\n      objectWriteUInt32(this, value, offset, true)\n    }\n    return offset + 4\n  }\n  \n  Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      this[offset] = (value >>> 24)\n      this[offset + 1] = (value >>> 16)\n      this[offset + 2] = (value >>> 8)\n      this[offset + 3] = (value & 0xff)\n    } else {\n      objectWriteUInt32(this, value, offset, false)\n    }\n    return offset + 4\n  }\n  \n  Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) {\n      var limit = Math.pow(2, 8 * byteLength - 1)\n  \n      checkInt(this, value, offset, byteLength, limit - 1, -limit)\n    }\n  \n    var i = 0\n    var mul = 1\n    var sub = 0\n    this[offset] = value & 0xFF\n    while (++i < byteLength && (mul *= 0x100)) {\n      if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n        sub = 1\n      }\n      this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n    }\n  \n    return offset + byteLength\n  }\n  \n  Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) {\n      var limit = Math.pow(2, 8 * byteLength - 1)\n  \n      checkInt(this, value, offset, byteLength, limit - 1, -limit)\n    }\n  \n    var i = byteLength - 1\n    var mul = 1\n    var sub = 0\n    this[offset + i] = value & 0xFF\n    while (--i >= 0 && (mul *= 0x100)) {\n      if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n        sub = 1\n      }\n      this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n    }\n  \n    return offset + byteLength\n  }\n  \n  Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n    if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n    if (value < 0) value = 0xff + value + 1\n    this[offset] = (value & 0xff)\n    return offset + 1\n  }\n  \n  Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      this[offset] = (value & 0xff)\n      this[offset + 1] = (value >>> 8)\n    } else {\n      objectWriteUInt16(this, value, offset, true)\n    }\n    return offset + 2\n  }\n  \n  Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      this[offset] = (value >>> 8)\n      this[offset + 1] = (value & 0xff)\n    } else {\n      objectWriteUInt16(this, value, offset, false)\n    }\n    return offset + 2\n  }\n  \n  Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      this[offset] = (value & 0xff)\n      this[offset + 1] = (value >>> 8)\n      this[offset + 2] = (value >>> 16)\n      this[offset + 3] = (value >>> 24)\n    } else {\n      objectWriteUInt32(this, value, offset, true)\n    }\n    return offset + 4\n  }\n  \n  Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n    if (value < 0) value = 0xffffffff + value + 1\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      this[offset] = (value >>> 24)\n      this[offset + 1] = (value >>> 16)\n      this[offset + 2] = (value >>> 8)\n      this[offset + 3] = (value & 0xff)\n    } else {\n      objectWriteUInt32(this, value, offset, false)\n    }\n    return offset + 4\n  }\n  \n  function checkIEEE754 (buf, value, offset, ext, max, min) {\n    if (offset + ext > buf.length) throw new RangeError('Index out of range')\n    if (offset < 0) throw new RangeError('Index out of range')\n  }\n  \n  function writeFloat (buf, value, offset, littleEndian, noAssert) {\n    if (!noAssert) {\n      checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n    }\n    ieee754.write(buf, value, offset, littleEndian, 23, 4)\n    return offset + 4\n  }\n  \n  Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n    return writeFloat(this, value, offset, true, noAssert)\n  }\n  \n  Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n    return writeFloat(this, value, offset, false, noAssert)\n  }\n  \n  function writeDouble (buf, value, offset, littleEndian, noAssert) {\n    if (!noAssert) {\n      checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n    }\n    ieee754.write(buf, value, offset, littleEndian, 52, 8)\n    return offset + 8\n  }\n  \n  Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n    return writeDouble(this, value, offset, true, noAssert)\n  }\n  \n  Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n    return writeDouble(this, value, offset, false, noAssert)\n  }\n  \n  // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n  Buffer.prototype.copy = function copy (target, targetStart, start, end) {\n    if (!start) start = 0\n    if (!end && end !== 0) end = this.length\n    if (targetStart >= target.length) targetStart = target.length\n    if (!targetStart) targetStart = 0\n    if (end > 0 && end < start) end = start\n  \n    // Copy 0 bytes; we're done\n    if (end === start) return 0\n    if (target.length === 0 || this.length === 0) return 0\n  \n    // Fatal error conditions\n    if (targetStart < 0) {\n      throw new RangeError('targetStart out of bounds')\n    }\n    if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n    if (end < 0) throw new RangeError('sourceEnd out of bounds')\n  \n    // Are we oob?\n    if (end > this.length) end = this.length\n    if (target.length - targetStart < end - start) {\n      end = target.length - targetStart + start\n    }\n  \n    var len = end - start\n    var i\n  \n    if (this === target && start < targetStart && targetStart < end) {\n      // descending copy from end\n      for (i = len - 1; i >= 0; --i) {\n        target[i + targetStart] = this[i + start]\n      }\n    } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n      // ascending copy from start\n      for (i = 0; i < len; ++i) {\n        target[i + targetStart] = this[i + start]\n      }\n    } else {\n      Uint8Array.prototype.set.call(\n        target,\n        this.subarray(start, start + len),\n        targetStart\n      )\n    }\n  \n    return len\n  }\n  \n  // Usage:\n  //    buffer.fill(number[, offset[, end]])\n  //    buffer.fill(buffer[, offset[, end]])\n  //    buffer.fill(string[, offset[, end]][, encoding])\n  Buffer.prototype.fill = function fill (val, start, end, encoding) {\n    // Handle string cases:\n    if (typeof val === 'string') {\n      if (typeof start === 'string') {\n        encoding = start\n        start = 0\n        end = this.length\n      } else if (typeof end === 'string') {\n        encoding = end\n        end = this.length\n      }\n      if (val.length === 1) {\n        var code = val.charCodeAt(0)\n        if (code < 256) {\n          val = code\n        }\n      }\n      if (encoding !== undefined && typeof encoding !== 'string') {\n        throw new TypeError('encoding must be a string')\n      }\n      if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n        throw new TypeError('Unknown encoding: ' + encoding)\n      }\n    } else if (typeof val === 'number') {\n      val = val & 255\n    }\n  \n    // Invalid ranges are not set to a default, so can range check early.\n    if (start < 0 || this.length < start || this.length < end) {\n      throw new RangeError('Out of range index')\n    }\n  \n    if (end <= start) {\n      return this\n    }\n  \n    start = start >>> 0\n    end = end === undefined ? this.length : end >>> 0\n  \n    if (!val) val = 0\n  \n    var i\n    if (typeof val === 'number') {\n      for (i = start; i < end; ++i) {\n        this[i] = val\n      }\n    } else {\n      var bytes = Buffer.isBuffer(val)\n        ? val\n        : utf8ToBytes(new Buffer(val, encoding).toString())\n      var len = bytes.length\n      for (i = 0; i < end - start; ++i) {\n        this[i + start] = bytes[i % len]\n      }\n    }\n  \n    return this\n  }\n  \n  // HELPER FUNCTIONS\n  // ================\n  \n  var INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n  \n  function base64clean (str) {\n    // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n    str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n    // Node converts strings with length < 2 to ''\n    if (str.length < 2) return ''\n    // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n    while (str.length % 4 !== 0) {\n      str = str + '='\n    }\n    return str\n  }\n  \n  function stringtrim (str) {\n    if (str.trim) return str.trim()\n    return str.replace(/^\\s+|\\s+$/g, '')\n  }\n  \n  function toHex (n) {\n    if (n < 16) return '0' + n.toString(16)\n    return n.toString(16)\n  }\n  \n  function utf8ToBytes (string, units) {\n    units = units || Infinity\n    var codePoint\n    var length = string.length\n    var leadSurrogate = null\n    var bytes = []\n  \n    for (var i = 0; i < length; ++i) {\n      codePoint = string.charCodeAt(i)\n  \n      // is surrogate component\n      if (codePoint > 0xD7FF && codePoint < 0xE000) {\n        // last char was a lead\n        if (!leadSurrogate) {\n          // no lead yet\n          if (codePoint > 0xDBFF) {\n            // unexpected trail\n            if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n            continue\n          } else if (i + 1 === length) {\n            // unpaired lead\n            if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n            continue\n          }\n  \n          // valid lead\n          leadSurrogate = codePoint\n  \n          continue\n        }\n  \n        // 2 leads in a row\n        if (codePoint < 0xDC00) {\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          leadSurrogate = codePoint\n          continue\n        }\n  \n        // valid surrogate pair\n        codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n      } else if (leadSurrogate) {\n        // valid bmp char, but last char was a lead\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n      }\n  \n      leadSurrogate = null\n  \n      // encode utf8\n      if (codePoint < 0x80) {\n        if ((units -= 1) < 0) break\n        bytes.push(codePoint)\n      } else if (codePoint < 0x800) {\n        if ((units -= 2) < 0) break\n        bytes.push(\n          codePoint >> 0x6 | 0xC0,\n          codePoint & 0x3F | 0x80\n        )\n      } else if (codePoint < 0x10000) {\n        if ((units -= 3) < 0) break\n        bytes.push(\n          codePoint >> 0xC | 0xE0,\n          codePoint >> 0x6 & 0x3F | 0x80,\n          codePoint & 0x3F | 0x80\n        )\n      } else if (codePoint < 0x110000) {\n        if ((units -= 4) < 0) break\n        bytes.push(\n          codePoint >> 0x12 | 0xF0,\n          codePoint >> 0xC & 0x3F | 0x80,\n          codePoint >> 0x6 & 0x3F | 0x80,\n          codePoint & 0x3F | 0x80\n        )\n      } else {\n        throw new Error('Invalid code point')\n      }\n    }\n  \n    return bytes\n  }\n  \n  function asciiToBytes (str) {\n    var byteArray = []\n    for (var i = 0; i < str.length; ++i) {\n      // Node's code seems to be doing this and not & 0x7F..\n      byteArray.push(str.charCodeAt(i) & 0xFF)\n    }\n    return byteArray\n  }\n  \n  function utf16leToBytes (str, units) {\n    var c, hi, lo\n    var byteArray = []\n    for (var i = 0; i < str.length; ++i) {\n      if ((units -= 2) < 0) break\n  \n      c = str.charCodeAt(i)\n      hi = c >> 8\n      lo = c % 256\n      byteArray.push(lo)\n      byteArray.push(hi)\n    }\n  \n    return byteArray\n  }\n  \n  function base64ToBytes (str) {\n    return base64.toByteArray(base64clean(str))\n  }\n  \n  function blitBuffer (src, dst, offset, length) {\n    for (var i = 0; i < length; ++i) {\n      if ((i + offset >= dst.length) || (i >= src.length)) break\n      dst[i + offset] = src[i]\n    }\n    return i\n  }\n  \n  function isnan (val) {\n    return val !== val // eslint-disable-line no-self-compare\n  }\n  \n  }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {},require(\"buffer\").Buffer)\n  },{\"base64-js\":78,\"buffer\":80,\"ieee754\":82,\"isarray\":83}],81:[function(require,module,exports){\n  // Copyright Joyent, Inc. and other Node contributors.\n  //\n  // Permission is hereby granted, free of charge, to any person obtaining a\n  // copy of this software and associated documentation files (the\n  // \"Software\"), to deal in the Software without restriction, including\n  // without limitation the rights to use, copy, modify, merge, publish,\n  // distribute, sublicense, and/or sell copies of the Software, and to permit\n  // persons to whom the Software is furnished to do so, subject to the\n  // following conditions:\n  //\n  // The above copyright notice and this permission notice shall be included\n  // in all copies or substantial portions of the Software.\n  //\n  // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n  // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n  // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n  // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n  // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n  // USE OR OTHER DEALINGS IN THE SOFTWARE.\n  \n  function EventEmitter() {\n    this._events = this._events || {};\n    this._maxListeners = this._maxListeners || undefined;\n  }\n  module.exports = EventEmitter;\n  \n  // Backwards-compat with node 0.10.x\n  EventEmitter.EventEmitter = EventEmitter;\n  \n  EventEmitter.prototype._events = undefined;\n  EventEmitter.prototype._maxListeners = undefined;\n  \n  // By default EventEmitters will print a warning if more than 10 listeners are\n  // added to it. This is a useful default which helps finding memory leaks.\n  EventEmitter.defaultMaxListeners = 10;\n  \n  // Obviously not all Emitters should be limited to 10. This function allows\n  // that to be increased. Set to zero for unlimited.\n  EventEmitter.prototype.setMaxListeners = function(n) {\n    if (!isNumber(n) || n < 0 || isNaN(n))\n      throw TypeError('n must be a positive number');\n    this._maxListeners = n;\n    return this;\n  };\n  \n  EventEmitter.prototype.emit = function(type) {\n    var er, handler, len, args, i, listeners;\n  \n    if (!this._events)\n      this._events = {};\n  \n    // If there is no 'error' event listener then throw.\n    if (type === 'error') {\n      if (!this._events.error ||\n          (isObject(this._events.error) && !this._events.error.length)) {\n        er = arguments[1];\n        if (er instanceof Error) {\n          throw er; // Unhandled 'error' event\n        } else {\n          // At least give some kind of context to the user\n          var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n          err.context = er;\n          throw err;\n        }\n      }\n    }\n  \n    handler = this._events[type];\n  \n    if (isUndefined(handler))\n      return false;\n  \n    if (isFunction(handler)) {\n      switch (arguments.length) {\n        // fast cases\n        case 1:\n          handler.call(this);\n          break;\n        case 2:\n          handler.call(this, arguments[1]);\n          break;\n        case 3:\n          handler.call(this, arguments[1], arguments[2]);\n          break;\n        // slower\n        default:\n          args = Array.prototype.slice.call(arguments, 1);\n          handler.apply(this, args);\n      }\n    } else if (isObject(handler)) {\n      args = Array.prototype.slice.call(arguments, 1);\n      listeners = handler.slice();\n      len = listeners.length;\n      for (i = 0; i < len; i++)\n        listeners[i].apply(this, args);\n    }\n  \n    return true;\n  };\n  \n  EventEmitter.prototype.addListener = function(type, listener) {\n    var m;\n  \n    if (!isFunction(listener))\n      throw TypeError('listener must be a function');\n  \n    if (!this._events)\n      this._events = {};\n  \n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (this._events.newListener)\n      this.emit('newListener', type,\n                isFunction(listener.listener) ?\n                listener.listener : listener);\n  \n    if (!this._events[type])\n      // Optimize the case of one listener. Don't need the extra array object.\n      this._events[type] = listener;\n    else if (isObject(this._events[type]))\n      // If we've already got an array, just append.\n      this._events[type].push(listener);\n    else\n      // Adding the second element, need to change to array.\n      this._events[type] = [this._events[type], listener];\n  \n    // Check for listener leak\n    if (isObject(this._events[type]) && !this._events[type].warned) {\n      if (!isUndefined(this._maxListeners)) {\n        m = this._maxListeners;\n      } else {\n        m = EventEmitter.defaultMaxListeners;\n      }\n  \n      if (m && m > 0 && this._events[type].length > m) {\n        this._events[type].warned = true;\n        console.error('(node) warning: possible EventEmitter memory ' +\n                      'leak detected. %d listeners added. ' +\n                      'Use emitter.setMaxListeners() to increase limit.',\n                      this._events[type].length);\n        if (typeof console.trace === 'function') {\n          // not supported in IE 10\n          console.trace();\n        }\n      }\n    }\n  \n    return this;\n  };\n  \n  EventEmitter.prototype.on = EventEmitter.prototype.addListener;\n  \n  EventEmitter.prototype.once = function(type, listener) {\n    if (!isFunction(listener))\n      throw TypeError('listener must be a function');\n  \n    var fired = false;\n  \n    function g() {\n      this.removeListener(type, g);\n  \n      if (!fired) {\n        fired = true;\n        listener.apply(this, arguments);\n      }\n    }\n  \n    g.listener = listener;\n    this.on(type, g);\n  \n    return this;\n  };\n  \n  // emits a 'removeListener' event iff the listener was removed\n  EventEmitter.prototype.removeListener = function(type, listener) {\n    var list, position, length, i;\n  \n    if (!isFunction(listener))\n      throw TypeError('listener must be a function');\n  \n    if (!this._events || !this._events[type])\n      return this;\n  \n    list = this._events[type];\n    length = list.length;\n    position = -1;\n  \n    if (list === listener ||\n        (isFunction(list.listener) && list.listener === listener)) {\n      delete this._events[type];\n      if (this._events.removeListener)\n        this.emit('removeListener', type, listener);\n  \n    } else if (isObject(list)) {\n      for (i = length; i-- > 0;) {\n        if (list[i] === listener ||\n            (list[i].listener && list[i].listener === listener)) {\n          position = i;\n          break;\n        }\n      }\n  \n      if (position < 0)\n        return this;\n  \n      if (list.length === 1) {\n        list.length = 0;\n        delete this._events[type];\n      } else {\n        list.splice(position, 1);\n      }\n  \n      if (this._events.removeListener)\n        this.emit('removeListener', type, listener);\n    }\n  \n    return this;\n  };\n  \n  EventEmitter.prototype.removeAllListeners = function(type) {\n    var key, listeners;\n  \n    if (!this._events)\n      return this;\n  \n    // not listening for removeListener, no need to emit\n    if (!this._events.removeListener) {\n      if (arguments.length === 0)\n        this._events = {};\n      else if (this._events[type])\n        delete this._events[type];\n      return this;\n    }\n  \n    // emit removeListener for all listeners on all events\n    if (arguments.length === 0) {\n      for (key in this._events) {\n        if (key === 'removeListener') continue;\n        this.removeAllListeners(key);\n      }\n      this.removeAllListeners('removeListener');\n      this._events = {};\n      return this;\n    }\n  \n    listeners = this._events[type];\n  \n    if (isFunction(listeners)) {\n      this.removeListener(type, listeners);\n    } else if (listeners) {\n      // LIFO order\n      while (listeners.length)\n        this.removeListener(type, listeners[listeners.length - 1]);\n    }\n    delete this._events[type];\n  \n    return this;\n  };\n  \n  EventEmitter.prototype.listeners = function(type) {\n    var ret;\n    if (!this._events || !this._events[type])\n      ret = [];\n    else if (isFunction(this._events[type]))\n      ret = [this._events[type]];\n    else\n      ret = this._events[type].slice();\n    return ret;\n  };\n  \n  EventEmitter.prototype.listenerCount = function(type) {\n    if (this._events) {\n      var evlistener = this._events[type];\n  \n      if (isFunction(evlistener))\n        return 1;\n      else if (evlistener)\n        return evlistener.length;\n    }\n    return 0;\n  };\n  \n  EventEmitter.listenerCount = function(emitter, type) {\n    return emitter.listenerCount(type);\n  };\n  \n  function isFunction(arg) {\n    return typeof arg === 'function';\n  }\n  \n  function isNumber(arg) {\n    return typeof arg === 'number';\n  }\n  \n  function isObject(arg) {\n    return typeof arg === 'object' && arg !== null;\n  }\n  \n  function isUndefined(arg) {\n    return arg === void 0;\n  }\n  \n  },{}],82:[function(require,module,exports){\n  exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n    var e, m\n    var eLen = (nBytes * 8) - mLen - 1\n    var eMax = (1 << eLen) - 1\n    var eBias = eMax >> 1\n    var nBits = -7\n    var i = isLE ? (nBytes - 1) : 0\n    var d = isLE ? -1 : 1\n    var s = buffer[offset + i]\n  \n    i += d\n  \n    e = s & ((1 << (-nBits)) - 1)\n    s >>= (-nBits)\n    nBits += eLen\n    for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n  \n    m = e & ((1 << (-nBits)) - 1)\n    e >>= (-nBits)\n    nBits += mLen\n    for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n  \n    if (e === 0) {\n      e = 1 - eBias\n    } else if (e === eMax) {\n      return m ? NaN : ((s ? -1 : 1) * Infinity)\n    } else {\n      m = m + Math.pow(2, mLen)\n      e = e - eBias\n    }\n    return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n  }\n  \n  exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n    var e, m, c\n    var eLen = (nBytes * 8) - mLen - 1\n    var eMax = (1 << eLen) - 1\n    var eBias = eMax >> 1\n    var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n    var i = isLE ? 0 : (nBytes - 1)\n    var d = isLE ? 1 : -1\n    var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n  \n    value = Math.abs(value)\n  \n    if (isNaN(value) || value === Infinity) {\n      m = isNaN(value) ? 1 : 0\n      e = eMax\n    } else {\n      e = Math.floor(Math.log(value) / Math.LN2)\n      if (value * (c = Math.pow(2, -e)) < 1) {\n        e--\n        c *= 2\n      }\n      if (e + eBias >= 1) {\n        value += rt / c\n      } else {\n        value += rt * Math.pow(2, 1 - eBias)\n      }\n      if (value * c >= 2) {\n        e++\n        c /= 2\n      }\n  \n      if (e + eBias >= eMax) {\n        m = 0\n        e = eMax\n      } else if (e + eBias >= 1) {\n        m = ((value * c) - 1) * Math.pow(2, mLen)\n        e = e + eBias\n      } else {\n        m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n        e = 0\n      }\n    }\n  \n    for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n  \n    e = (e << mLen) | m\n    eLen += mLen\n    for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n  \n    buffer[offset + i - d] |= s * 128\n  }\n  \n  },{}],83:[function(require,module,exports){\n  var toString = {}.toString;\n  \n  module.exports = Array.isArray || function (arr) {\n    return toString.call(arr) == '[object Array]';\n  };\n  \n  },{}],84:[function(require,module,exports){\n  (function(exports) {\n    \"use strict\";\n  \n    function isArray(obj) {\n      if (obj !== null) {\n        return Object.prototype.toString.call(obj) === \"[object Array]\";\n      } else {\n        return false;\n      }\n    }\n  \n    function isObject(obj) {\n      if (obj !== null) {\n        return Object.prototype.toString.call(obj) === \"[object Object]\";\n      } else {\n        return false;\n      }\n    }\n  \n    function strictDeepEqual(first, second) {\n      // Check the scalar case first.\n      if (first === second) {\n        return true;\n      }\n  \n      // Check if they are the same type.\n      var firstType = Object.prototype.toString.call(first);\n      if (firstType !== Object.prototype.toString.call(second)) {\n        return false;\n      }\n      // We know that first and second have the same type so we can just check the\n      // first type from now on.\n      if (isArray(first) === true) {\n        // Short circuit if they're not the same length;\n        if (first.length !== second.length) {\n          return false;\n        }\n        for (var i = 0; i < first.length; i++) {\n          if (strictDeepEqual(first[i], second[i]) === false) {\n            return false;\n          }\n        }\n        return true;\n      }\n      if (isObject(first) === true) {\n        // An object is equal if it has the same key/value pairs.\n        var keysSeen = {};\n        for (var key in first) {\n          if (hasOwnProperty.call(first, key)) {\n            if (strictDeepEqual(first[key], second[key]) === false) {\n              return false;\n            }\n            keysSeen[key] = true;\n          }\n        }\n        // Now check that there aren't any keys in second that weren't\n        // in first.\n        for (var key2 in second) {\n          if (hasOwnProperty.call(second, key2)) {\n            if (keysSeen[key2] !== true) {\n              return false;\n            }\n          }\n        }\n        return true;\n      }\n      return false;\n    }\n  \n    function isFalse(obj) {\n      // From the spec:\n      // A false value corresponds to the following values:\n      // Empty list\n      // Empty object\n      // Empty string\n      // False boolean\n      // null value\n  \n      // First check the scalar values.\n      if (obj === \"\" || obj === false || obj === null) {\n          return true;\n      } else if (isArray(obj) && obj.length === 0) {\n          // Check for an empty array.\n          return true;\n      } else if (isObject(obj)) {\n          // Check for an empty object.\n          for (var key in obj) {\n              // If there are any keys, then\n              // the object is not empty so the object\n              // is not false.\n              if (obj.hasOwnProperty(key)) {\n                return false;\n              }\n          }\n          return true;\n      } else {\n          return false;\n      }\n    }\n  \n    function objValues(obj) {\n      var keys = Object.keys(obj);\n      var values = [];\n      for (var i = 0; i < keys.length; i++) {\n        values.push(obj[keys[i]]);\n      }\n      return values;\n    }\n  \n    function merge(a, b) {\n        var merged = {};\n        for (var key in a) {\n            merged[key] = a[key];\n        }\n        for (var key2 in b) {\n            merged[key2] = b[key2];\n        }\n        return merged;\n    }\n  \n    var trimLeft;\n    if (typeof String.prototype.trimLeft === \"function\") {\n      trimLeft = function(str) {\n        return str.trimLeft();\n      };\n    } else {\n      trimLeft = function(str) {\n        return str.match(/^\\s*(.*)/)[1];\n      };\n    }\n  \n    // Type constants used to define functions.\n    var TYPE_NUMBER = 0;\n    var TYPE_ANY = 1;\n    var TYPE_STRING = 2;\n    var TYPE_ARRAY = 3;\n    var TYPE_OBJECT = 4;\n    var TYPE_BOOLEAN = 5;\n    var TYPE_EXPREF = 6;\n    var TYPE_NULL = 7;\n    var TYPE_ARRAY_NUMBER = 8;\n    var TYPE_ARRAY_STRING = 9;\n  \n    var TOK_EOF = \"EOF\";\n    var TOK_UNQUOTEDIDENTIFIER = \"UnquotedIdentifier\";\n    var TOK_QUOTEDIDENTIFIER = \"QuotedIdentifier\";\n    var TOK_RBRACKET = \"Rbracket\";\n    var TOK_RPAREN = \"Rparen\";\n    var TOK_COMMA = \"Comma\";\n    var TOK_COLON = \"Colon\";\n    var TOK_RBRACE = \"Rbrace\";\n    var TOK_NUMBER = \"Number\";\n    var TOK_CURRENT = \"Current\";\n    var TOK_EXPREF = \"Expref\";\n    var TOK_PIPE = \"Pipe\";\n    var TOK_OR = \"Or\";\n    var TOK_AND = \"And\";\n    var TOK_EQ = \"EQ\";\n    var TOK_GT = \"GT\";\n    var TOK_LT = \"LT\";\n    var TOK_GTE = \"GTE\";\n    var TOK_LTE = \"LTE\";\n    var TOK_NE = \"NE\";\n    var TOK_FLATTEN = \"Flatten\";\n    var TOK_STAR = \"Star\";\n    var TOK_FILTER = \"Filter\";\n    var TOK_DOT = \"Dot\";\n    var TOK_NOT = \"Not\";\n    var TOK_LBRACE = \"Lbrace\";\n    var TOK_LBRACKET = \"Lbracket\";\n    var TOK_LPAREN= \"Lparen\";\n    var TOK_LITERAL= \"Literal\";\n  \n    // The \"&\", \"[\", \"<\", \">\" tokens\n    // are not in basicToken because\n    // there are two token variants\n    // (\"&&\", \"[?\", \"<=\", \">=\").  This is specially handled\n    // below.\n  \n    var basicTokens = {\n      \".\": TOK_DOT,\n      \"*\": TOK_STAR,\n      \",\": TOK_COMMA,\n      \":\": TOK_COLON,\n      \"{\": TOK_LBRACE,\n      \"}\": TOK_RBRACE,\n      \"]\": TOK_RBRACKET,\n      \"(\": TOK_LPAREN,\n      \")\": TOK_RPAREN,\n      \"@\": TOK_CURRENT\n    };\n  \n    var operatorStartToken = {\n        \"<\": true,\n        \">\": true,\n        \"=\": true,\n        \"!\": true\n    };\n  \n    var skipChars = {\n        \" \": true,\n        \"\\t\": true,\n        \"\\n\": true\n    };\n  \n  \n    function isAlpha(ch) {\n        return (ch >= \"a\" && ch <= \"z\") ||\n               (ch >= \"A\" && ch <= \"Z\") ||\n               ch === \"_\";\n    }\n  \n    function isNum(ch) {\n        return (ch >= \"0\" && ch <= \"9\") ||\n               ch === \"-\";\n    }\n    function isAlphaNum(ch) {\n        return (ch >= \"a\" && ch <= \"z\") ||\n               (ch >= \"A\" && ch <= \"Z\") ||\n               (ch >= \"0\" && ch <= \"9\") ||\n               ch === \"_\";\n    }\n  \n    function Lexer() {\n    }\n    Lexer.prototype = {\n        tokenize: function(stream) {\n            var tokens = [];\n            this._current = 0;\n            var start;\n            var identifier;\n            var token;\n            while (this._current < stream.length) {\n                if (isAlpha(stream[this._current])) {\n                    start = this._current;\n                    identifier = this._consumeUnquotedIdentifier(stream);\n                    tokens.push({type: TOK_UNQUOTEDIDENTIFIER,\n                                 value: identifier,\n                                 start: start});\n                } else if (basicTokens[stream[this._current]] !== undefined) {\n                    tokens.push({type: basicTokens[stream[this._current]],\n                                value: stream[this._current],\n                                start: this._current});\n                    this._current++;\n                } else if (isNum(stream[this._current])) {\n                    token = this._consumeNumber(stream);\n                    tokens.push(token);\n                } else if (stream[this._current] === \"[\") {\n                    // No need to increment this._current.  This happens\n                    // in _consumeLBracket\n                    token = this._consumeLBracket(stream);\n                    tokens.push(token);\n                } else if (stream[this._current] === \"\\\"\") {\n                    start = this._current;\n                    identifier = this._consumeQuotedIdentifier(stream);\n                    tokens.push({type: TOK_QUOTEDIDENTIFIER,\n                                 value: identifier,\n                                 start: start});\n                } else if (stream[this._current] === \"'\") {\n                    start = this._current;\n                    identifier = this._consumeRawStringLiteral(stream);\n                    tokens.push({type: TOK_LITERAL,\n                                 value: identifier,\n                                 start: start});\n                } else if (stream[this._current] === \"`\") {\n                    start = this._current;\n                    var literal = this._consumeLiteral(stream);\n                    tokens.push({type: TOK_LITERAL,\n                                 value: literal,\n                                 start: start});\n                } else if (operatorStartToken[stream[this._current]] !== undefined) {\n                    tokens.push(this._consumeOperator(stream));\n                } else if (skipChars[stream[this._current]] !== undefined) {\n                    // Ignore whitespace.\n                    this._current++;\n                } else if (stream[this._current] === \"&\") {\n                    start = this._current;\n                    this._current++;\n                    if (stream[this._current] === \"&\") {\n                        this._current++;\n                        tokens.push({type: TOK_AND, value: \"&&\", start: start});\n                    } else {\n                        tokens.push({type: TOK_EXPREF, value: \"&\", start: start});\n                    }\n                } else if (stream[this._current] === \"|\") {\n                    start = this._current;\n                    this._current++;\n                    if (stream[this._current] === \"|\") {\n                        this._current++;\n                        tokens.push({type: TOK_OR, value: \"||\", start: start});\n                    } else {\n                        tokens.push({type: TOK_PIPE, value: \"|\", start: start});\n                    }\n                } else {\n                    var error = new Error(\"Unknown character:\" + stream[this._current]);\n                    error.name = \"LexerError\";\n                    throw error;\n                }\n            }\n            return tokens;\n        },\n  \n        _consumeUnquotedIdentifier: function(stream) {\n            var start = this._current;\n            this._current++;\n            while (this._current < stream.length && isAlphaNum(stream[this._current])) {\n                this._current++;\n            }\n            return stream.slice(start, this._current);\n        },\n  \n        _consumeQuotedIdentifier: function(stream) {\n            var start = this._current;\n            this._current++;\n            var maxLength = stream.length;\n            while (stream[this._current] !== \"\\\"\" && this._current < maxLength) {\n                // You can escape a double quote and you can escape an escape.\n                var current = this._current;\n                if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                                 stream[current + 1] === \"\\\"\")) {\n                    current += 2;\n                } else {\n                    current++;\n                }\n                this._current = current;\n            }\n            this._current++;\n            return JSON.parse(stream.slice(start, this._current));\n        },\n  \n        _consumeRawStringLiteral: function(stream) {\n            var start = this._current;\n            this._current++;\n            var maxLength = stream.length;\n            while (stream[this._current] !== \"'\" && this._current < maxLength) {\n                // You can escape a single quote and you can escape an escape.\n                var current = this._current;\n                if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                                 stream[current + 1] === \"'\")) {\n                    current += 2;\n                } else {\n                    current++;\n                }\n                this._current = current;\n            }\n            this._current++;\n            var literal = stream.slice(start + 1, this._current - 1);\n            return literal.replace(\"\\\\'\", \"'\");\n        },\n  \n        _consumeNumber: function(stream) {\n            var start = this._current;\n            this._current++;\n            var maxLength = stream.length;\n            while (isNum(stream[this._current]) && this._current < maxLength) {\n                this._current++;\n            }\n            var value = parseInt(stream.slice(start, this._current));\n            return {type: TOK_NUMBER, value: value, start: start};\n        },\n  \n        _consumeLBracket: function(stream) {\n            var start = this._current;\n            this._current++;\n            if (stream[this._current] === \"?\") {\n                this._current++;\n                return {type: TOK_FILTER, value: \"[?\", start: start};\n            } else if (stream[this._current] === \"]\") {\n                this._current++;\n                return {type: TOK_FLATTEN, value: \"[]\", start: start};\n            } else {\n                return {type: TOK_LBRACKET, value: \"[\", start: start};\n            }\n        },\n  \n        _consumeOperator: function(stream) {\n            var start = this._current;\n            var startingChar = stream[start];\n            this._current++;\n            if (startingChar === \"!\") {\n                if (stream[this._current] === \"=\") {\n                    this._current++;\n                    return {type: TOK_NE, value: \"!=\", start: start};\n                } else {\n                  return {type: TOK_NOT, value: \"!\", start: start};\n                }\n            } else if (startingChar === \"<\") {\n                if (stream[this._current] === \"=\") {\n                    this._current++;\n                    return {type: TOK_LTE, value: \"<=\", start: start};\n                } else {\n                    return {type: TOK_LT, value: \"<\", start: start};\n                }\n            } else if (startingChar === \">\") {\n                if (stream[this._current] === \"=\") {\n                    this._current++;\n                    return {type: TOK_GTE, value: \">=\", start: start};\n                } else {\n                    return {type: TOK_GT, value: \">\", start: start};\n                }\n            } else if (startingChar === \"=\") {\n                if (stream[this._current] === \"=\") {\n                    this._current++;\n                    return {type: TOK_EQ, value: \"==\", start: start};\n                }\n            }\n        },\n  \n        _consumeLiteral: function(stream) {\n            this._current++;\n            var start = this._current;\n            var maxLength = stream.length;\n            var literal;\n            while(stream[this._current] !== \"`\" && this._current < maxLength) {\n                // You can escape a literal char or you can escape the escape.\n                var current = this._current;\n                if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                                 stream[current + 1] === \"`\")) {\n                    current += 2;\n                } else {\n                    current++;\n                }\n                this._current = current;\n            }\n            var literalString = trimLeft(stream.slice(start, this._current));\n            literalString = literalString.replace(\"\\\\`\", \"`\");\n            if (this._looksLikeJSON(literalString)) {\n                literal = JSON.parse(literalString);\n            } else {\n                // Try to JSON parse it as \"<literal>\"\n                literal = JSON.parse(\"\\\"\" + literalString + \"\\\"\");\n            }\n            // +1 gets us to the ending \"`\", +1 to move on to the next char.\n            this._current++;\n            return literal;\n        },\n  \n        _looksLikeJSON: function(literalString) {\n            var startingChars = \"[{\\\"\";\n            var jsonLiterals = [\"true\", \"false\", \"null\"];\n            var numberLooking = \"-0123456789\";\n  \n            if (literalString === \"\") {\n                return false;\n            } else if (startingChars.indexOf(literalString[0]) >= 0) {\n                return true;\n            } else if (jsonLiterals.indexOf(literalString) >= 0) {\n                return true;\n            } else if (numberLooking.indexOf(literalString[0]) >= 0) {\n                try {\n                    JSON.parse(literalString);\n                    return true;\n                } catch (ex) {\n                    return false;\n                }\n            } else {\n                return false;\n            }\n        }\n    };\n  \n        var bindingPower = {};\n        bindingPower[TOK_EOF] = 0;\n        bindingPower[TOK_UNQUOTEDIDENTIFIER] = 0;\n        bindingPower[TOK_QUOTEDIDENTIFIER] = 0;\n        bindingPower[TOK_RBRACKET] = 0;\n        bindingPower[TOK_RPAREN] = 0;\n        bindingPower[TOK_COMMA] = 0;\n        bindingPower[TOK_RBRACE] = 0;\n        bindingPower[TOK_NUMBER] = 0;\n        bindingPower[TOK_CURRENT] = 0;\n        bindingPower[TOK_EXPREF] = 0;\n        bindingPower[TOK_PIPE] = 1;\n        bindingPower[TOK_OR] = 2;\n        bindingPower[TOK_AND] = 3;\n        bindingPower[TOK_EQ] = 5;\n        bindingPower[TOK_GT] = 5;\n        bindingPower[TOK_LT] = 5;\n        bindingPower[TOK_GTE] = 5;\n        bindingPower[TOK_LTE] = 5;\n        bindingPower[TOK_NE] = 5;\n        bindingPower[TOK_FLATTEN] = 9;\n        bindingPower[TOK_STAR] = 20;\n        bindingPower[TOK_FILTER] = 21;\n        bindingPower[TOK_DOT] = 40;\n        bindingPower[TOK_NOT] = 45;\n        bindingPower[TOK_LBRACE] = 50;\n        bindingPower[TOK_LBRACKET] = 55;\n        bindingPower[TOK_LPAREN] = 60;\n  \n    function Parser() {\n    }\n  \n    Parser.prototype = {\n        parse: function(expression) {\n            this._loadTokens(expression);\n            this.index = 0;\n            var ast = this.expression(0);\n            if (this._lookahead(0) !== TOK_EOF) {\n                var t = this._lookaheadToken(0);\n                var error = new Error(\n                    \"Unexpected token type: \" + t.type + \", value: \" + t.value);\n                error.name = \"ParserError\";\n                throw error;\n            }\n            return ast;\n        },\n  \n        _loadTokens: function(expression) {\n            var lexer = new Lexer();\n            var tokens = lexer.tokenize(expression);\n            tokens.push({type: TOK_EOF, value: \"\", start: expression.length});\n            this.tokens = tokens;\n        },\n  \n        expression: function(rbp) {\n            var leftToken = this._lookaheadToken(0);\n            this._advance();\n            var left = this.nud(leftToken);\n            var currentToken = this._lookahead(0);\n            while (rbp < bindingPower[currentToken]) {\n                this._advance();\n                left = this.led(currentToken, left);\n                currentToken = this._lookahead(0);\n            }\n            return left;\n        },\n  \n        _lookahead: function(number) {\n            return this.tokens[this.index + number].type;\n        },\n  \n        _lookaheadToken: function(number) {\n            return this.tokens[this.index + number];\n        },\n  \n        _advance: function() {\n            this.index++;\n        },\n  \n        nud: function(token) {\n          var left;\n          var right;\n          var expression;\n          switch (token.type) {\n            case TOK_LITERAL:\n              return {type: \"Literal\", value: token.value};\n            case TOK_UNQUOTEDIDENTIFIER:\n              return {type: \"Field\", name: token.value};\n            case TOK_QUOTEDIDENTIFIER:\n              var node = {type: \"Field\", name: token.value};\n              if (this._lookahead(0) === TOK_LPAREN) {\n                  throw new Error(\"Quoted identifier not allowed for function names.\");\n              } else {\n                  return node;\n              }\n              break;\n            case TOK_NOT:\n              right = this.expression(bindingPower.Not);\n              return {type: \"NotExpression\", children: [right]};\n            case TOK_STAR:\n              left = {type: \"Identity\"};\n              right = null;\n              if (this._lookahead(0) === TOK_RBRACKET) {\n                  // This can happen in a multiselect,\n                  // [a, b, *]\n                  right = {type: \"Identity\"};\n              } else {\n                  right = this._parseProjectionRHS(bindingPower.Star);\n              }\n              return {type: \"ValueProjection\", children: [left, right]};\n            case TOK_FILTER:\n              return this.led(token.type, {type: \"Identity\"});\n            case TOK_LBRACE:\n              return this._parseMultiselectHash();\n            case TOK_FLATTEN:\n              left = {type: TOK_FLATTEN, children: [{type: \"Identity\"}]};\n              right = this._parseProjectionRHS(bindingPower.Flatten);\n              return {type: \"Projection\", children: [left, right]};\n            case TOK_LBRACKET:\n              if (this._lookahead(0) === TOK_NUMBER || this._lookahead(0) === TOK_COLON) {\n                  right = this._parseIndexExpression();\n                  return this._projectIfSlice({type: \"Identity\"}, right);\n              } else if (this._lookahead(0) === TOK_STAR &&\n                         this._lookahead(1) === TOK_RBRACKET) {\n                  this._advance();\n                  this._advance();\n                  right = this._parseProjectionRHS(bindingPower.Star);\n                  return {type: \"Projection\",\n                          children: [{type: \"Identity\"}, right]};\n              } else {\n                  return this._parseMultiselectList();\n              }\n              break;\n            case TOK_CURRENT:\n              return {type: TOK_CURRENT};\n            case TOK_EXPREF:\n              expression = this.expression(bindingPower.Expref);\n              return {type: \"ExpressionReference\", children: [expression]};\n            case TOK_LPAREN:\n              var args = [];\n              while (this._lookahead(0) !== TOK_RPAREN) {\n                if (this._lookahead(0) === TOK_CURRENT) {\n                  expression = {type: TOK_CURRENT};\n                  this._advance();\n                } else {\n                  expression = this.expression(0);\n                }\n                args.push(expression);\n              }\n              this._match(TOK_RPAREN);\n              return args[0];\n            default:\n              this._errorToken(token);\n          }\n        },\n  \n        led: function(tokenName, left) {\n          var right;\n          switch(tokenName) {\n            case TOK_DOT:\n              var rbp = bindingPower.Dot;\n              if (this._lookahead(0) !== TOK_STAR) {\n                  right = this._parseDotRHS(rbp);\n                  return {type: \"Subexpression\", children: [left, right]};\n              } else {\n                  // Creating a projection.\n                  this._advance();\n                  right = this._parseProjectionRHS(rbp);\n                  return {type: \"ValueProjection\", children: [left, right]};\n              }\n              break;\n            case TOK_PIPE:\n              right = this.expression(bindingPower.Pipe);\n              return {type: TOK_PIPE, children: [left, right]};\n            case TOK_OR:\n              right = this.expression(bindingPower.Or);\n              return {type: \"OrExpression\", children: [left, right]};\n            case TOK_AND:\n              right = this.expression(bindingPower.And);\n              return {type: \"AndExpression\", children: [left, right]};\n            case TOK_LPAREN:\n              var name = left.name;\n              var args = [];\n              var expression, node;\n              while (this._lookahead(0) !== TOK_RPAREN) {\n                if (this._lookahead(0) === TOK_CURRENT) {\n                  expression = {type: TOK_CURRENT};\n                  this._advance();\n                } else {\n                  expression = this.expression(0);\n                }\n                if (this._lookahead(0) === TOK_COMMA) {\n                  this._match(TOK_COMMA);\n                }\n                args.push(expression);\n              }\n              this._match(TOK_RPAREN);\n              node = {type: \"Function\", name: name, children: args};\n              return node;\n            case TOK_FILTER:\n              var condition = this.expression(0);\n              this._match(TOK_RBRACKET);\n              if (this._lookahead(0) === TOK_FLATTEN) {\n                right = {type: \"Identity\"};\n              } else {\n                right = this._parseProjectionRHS(bindingPower.Filter);\n              }\n              return {type: \"FilterProjection\", children: [left, right, condition]};\n            case TOK_FLATTEN:\n              var leftNode = {type: TOK_FLATTEN, children: [left]};\n              var rightNode = this._parseProjectionRHS(bindingPower.Flatten);\n              return {type: \"Projection\", children: [leftNode, rightNode]};\n            case TOK_EQ:\n            case TOK_NE:\n            case TOK_GT:\n            case TOK_GTE:\n            case TOK_LT:\n            case TOK_LTE:\n              return this._parseComparator(left, tokenName);\n            case TOK_LBRACKET:\n              var token = this._lookaheadToken(0);\n              if (token.type === TOK_NUMBER || token.type === TOK_COLON) {\n                  right = this._parseIndexExpression();\n                  return this._projectIfSlice(left, right);\n              } else {\n                  this._match(TOK_STAR);\n                  this._match(TOK_RBRACKET);\n                  right = this._parseProjectionRHS(bindingPower.Star);\n                  return {type: \"Projection\", children: [left, right]};\n              }\n              break;\n            default:\n              this._errorToken(this._lookaheadToken(0));\n          }\n        },\n  \n        _match: function(tokenType) {\n            if (this._lookahead(0) === tokenType) {\n                this._advance();\n            } else {\n                var t = this._lookaheadToken(0);\n                var error = new Error(\"Expected \" + tokenType + \", got: \" + t.type);\n                error.name = \"ParserError\";\n                throw error;\n            }\n        },\n  \n        _errorToken: function(token) {\n            var error = new Error(\"Invalid token (\" +\n                                  token.type + \"): \\\"\" +\n                                  token.value + \"\\\"\");\n            error.name = \"ParserError\";\n            throw error;\n        },\n  \n  \n        _parseIndexExpression: function() {\n            if (this._lookahead(0) === TOK_COLON || this._lookahead(1) === TOK_COLON) {\n                return this._parseSliceExpression();\n            } else {\n                var node = {\n                    type: \"Index\",\n                    value: this._lookaheadToken(0).value};\n                this._advance();\n                this._match(TOK_RBRACKET);\n                return node;\n            }\n        },\n  \n        _projectIfSlice: function(left, right) {\n            var indexExpr = {type: \"IndexExpression\", children: [left, right]};\n            if (right.type === \"Slice\") {\n                return {\n                    type: \"Projection\",\n                    children: [indexExpr, this._parseProjectionRHS(bindingPower.Star)]\n                };\n            } else {\n                return indexExpr;\n            }\n        },\n  \n        _parseSliceExpression: function() {\n            // [start:end:step] where each part is optional, as well as the last\n            // colon.\n            var parts = [null, null, null];\n            var index = 0;\n            var currentToken = this._lookahead(0);\n            while (currentToken !== TOK_RBRACKET && index < 3) {\n                if (currentToken === TOK_COLON) {\n                    index++;\n                    this._advance();\n                } else if (currentToken === TOK_NUMBER) {\n                    parts[index] = this._lookaheadToken(0).value;\n                    this._advance();\n                } else {\n                    var t = this._lookahead(0);\n                    var error = new Error(\"Syntax error, unexpected token: \" +\n                                          t.value + \"(\" + t.type + \")\");\n                    error.name = \"Parsererror\";\n                    throw error;\n                }\n                currentToken = this._lookahead(0);\n            }\n            this._match(TOK_RBRACKET);\n            return {\n                type: \"Slice\",\n                children: parts\n            };\n        },\n  \n        _parseComparator: function(left, comparator) {\n          var right = this.expression(bindingPower[comparator]);\n          return {type: \"Comparator\", name: comparator, children: [left, right]};\n        },\n  \n        _parseDotRHS: function(rbp) {\n            var lookahead = this._lookahead(0);\n            var exprTokens = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER, TOK_STAR];\n            if (exprTokens.indexOf(lookahead) >= 0) {\n                return this.expression(rbp);\n            } else if (lookahead === TOK_LBRACKET) {\n                this._match(TOK_LBRACKET);\n                return this._parseMultiselectList();\n            } else if (lookahead === TOK_LBRACE) {\n                this._match(TOK_LBRACE);\n                return this._parseMultiselectHash();\n            }\n        },\n  \n        _parseProjectionRHS: function(rbp) {\n            var right;\n            if (bindingPower[this._lookahead(0)] < 10) {\n                right = {type: \"Identity\"};\n            } else if (this._lookahead(0) === TOK_LBRACKET) {\n                right = this.expression(rbp);\n            } else if (this._lookahead(0) === TOK_FILTER) {\n                right = this.expression(rbp);\n            } else if (this._lookahead(0) === TOK_DOT) {\n                this._match(TOK_DOT);\n                right = this._parseDotRHS(rbp);\n            } else {\n                var t = this._lookaheadToken(0);\n                var error = new Error(\"Sytanx error, unexpected token: \" +\n                                      t.value + \"(\" + t.type + \")\");\n                error.name = \"ParserError\";\n                throw error;\n            }\n            return right;\n        },\n  \n        _parseMultiselectList: function() {\n            var expressions = [];\n            while (this._lookahead(0) !== TOK_RBRACKET) {\n                var expression = this.expression(0);\n                expressions.push(expression);\n                if (this._lookahead(0) === TOK_COMMA) {\n                    this._match(TOK_COMMA);\n                    if (this._lookahead(0) === TOK_RBRACKET) {\n                      throw new Error(\"Unexpected token Rbracket\");\n                    }\n                }\n            }\n            this._match(TOK_RBRACKET);\n            return {type: \"MultiSelectList\", children: expressions};\n        },\n  \n        _parseMultiselectHash: function() {\n          var pairs = [];\n          var identifierTypes = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER];\n          var keyToken, keyName, value, node;\n          for (;;) {\n            keyToken = this._lookaheadToken(0);\n            if (identifierTypes.indexOf(keyToken.type) < 0) {\n              throw new Error(\"Expecting an identifier token, got: \" +\n                              keyToken.type);\n            }\n            keyName = keyToken.value;\n            this._advance();\n            this._match(TOK_COLON);\n            value = this.expression(0);\n            node = {type: \"KeyValuePair\", name: keyName, value: value};\n            pairs.push(node);\n            if (this._lookahead(0) === TOK_COMMA) {\n              this._match(TOK_COMMA);\n            } else if (this._lookahead(0) === TOK_RBRACE) {\n              this._match(TOK_RBRACE);\n              break;\n            }\n          }\n          return {type: \"MultiSelectHash\", children: pairs};\n        }\n    };\n  \n  \n    function TreeInterpreter(runtime) {\n      this.runtime = runtime;\n    }\n  \n    TreeInterpreter.prototype = {\n        search: function(node, value) {\n            return this.visit(node, value);\n        },\n  \n        visit: function(node, value) {\n            var matched, current, result, first, second, field, left, right, collected, i;\n            switch (node.type) {\n              case \"Field\":\n                if (value === null ) {\n                    return null;\n                } else if (isObject(value)) {\n                    field = value[node.name];\n                    if (field === undefined) {\n                        return null;\n                    } else {\n                        return field;\n                    }\n                } else {\n                  return null;\n                }\n                break;\n              case \"Subexpression\":\n                result = this.visit(node.children[0], value);\n                for (i = 1; i < node.children.length; i++) {\n                    result = this.visit(node.children[1], result);\n                    if (result === null) {\n                        return null;\n                    }\n                }\n                return result;\n              case \"IndexExpression\":\n                left = this.visit(node.children[0], value);\n                right = this.visit(node.children[1], left);\n                return right;\n              case \"Index\":\n                if (!isArray(value)) {\n                  return null;\n                }\n                var index = node.value;\n                if (index < 0) {\n                  index = value.length + index;\n                }\n                result = value[index];\n                if (result === undefined) {\n                  result = null;\n                }\n                return result;\n              case \"Slice\":\n                if (!isArray(value)) {\n                  return null;\n                }\n                var sliceParams = node.children.slice(0);\n                var computed = this.computeSliceParams(value.length, sliceParams);\n                var start = computed[0];\n                var stop = computed[1];\n                var step = computed[2];\n                result = [];\n                if (step > 0) {\n                    for (i = start; i < stop; i += step) {\n                        result.push(value[i]);\n                    }\n                } else {\n                    for (i = start; i > stop; i += step) {\n                        result.push(value[i]);\n                    }\n                }\n                return result;\n              case \"Projection\":\n                // Evaluate left child.\n                var base = this.visit(node.children[0], value);\n                if (!isArray(base)) {\n                  return null;\n                }\n                collected = [];\n                for (i = 0; i < base.length; i++) {\n                  current = this.visit(node.children[1], base[i]);\n                  if (current !== null) {\n                    collected.push(current);\n                  }\n                }\n                return collected;\n              case \"ValueProjection\":\n                // Evaluate left child.\n                base = this.visit(node.children[0], value);\n                if (!isObject(base)) {\n                  return null;\n                }\n                collected = [];\n                var values = objValues(base);\n                for (i = 0; i < values.length; i++) {\n                  current = this.visit(node.children[1], values[i]);\n                  if (current !== null) {\n                    collected.push(current);\n                  }\n                }\n                return collected;\n              case \"FilterProjection\":\n                base = this.visit(node.children[0], value);\n                if (!isArray(base)) {\n                  return null;\n                }\n                var filtered = [];\n                var finalResults = [];\n                for (i = 0; i < base.length; i++) {\n                  matched = this.visit(node.children[2], base[i]);\n                  if (!isFalse(matched)) {\n                    filtered.push(base[i]);\n                  }\n                }\n                for (var j = 0; j < filtered.length; j++) {\n                  current = this.visit(node.children[1], filtered[j]);\n                  if (current !== null) {\n                    finalResults.push(current);\n                  }\n                }\n                return finalResults;\n              case \"Comparator\":\n                first = this.visit(node.children[0], value);\n                second = this.visit(node.children[1], value);\n                switch(node.name) {\n                  case TOK_EQ:\n                    result = strictDeepEqual(first, second);\n                    break;\n                  case TOK_NE:\n                    result = !strictDeepEqual(first, second);\n                    break;\n                  case TOK_GT:\n                    result = first > second;\n                    break;\n                  case TOK_GTE:\n                    result = first >= second;\n                    break;\n                  case TOK_LT:\n                    result = first < second;\n                    break;\n                  case TOK_LTE:\n                    result = first <= second;\n                    break;\n                  default:\n                    throw new Error(\"Unknown comparator: \" + node.name);\n                }\n                return result;\n              case TOK_FLATTEN:\n                var original = this.visit(node.children[0], value);\n                if (!isArray(original)) {\n                  return null;\n                }\n                var merged = [];\n                for (i = 0; i < original.length; i++) {\n                  current = original[i];\n                  if (isArray(current)) {\n                    merged.push.apply(merged, current);\n                  } else {\n                    merged.push(current);\n                  }\n                }\n                return merged;\n              case \"Identity\":\n                return value;\n              case \"MultiSelectList\":\n                if (value === null) {\n                  return null;\n                }\n                collected = [];\n                for (i = 0; i < node.children.length; i++) {\n                    collected.push(this.visit(node.children[i], value));\n                }\n                return collected;\n              case \"MultiSelectHash\":\n                if (value === null) {\n                  return null;\n                }\n                collected = {};\n                var child;\n                for (i = 0; i < node.children.length; i++) {\n                  child = node.children[i];\n                  collected[child.name] = this.visit(child.value, value);\n                }\n                return collected;\n              case \"OrExpression\":\n                matched = this.visit(node.children[0], value);\n                if (isFalse(matched)) {\n                    matched = this.visit(node.children[1], value);\n                }\n                return matched;\n              case \"AndExpression\":\n                first = this.visit(node.children[0], value);\n  \n                if (isFalse(first) === true) {\n                  return first;\n                }\n                return this.visit(node.children[1], value);\n              case \"NotExpression\":\n                first = this.visit(node.children[0], value);\n                return isFalse(first);\n              case \"Literal\":\n                return node.value;\n              case TOK_PIPE:\n                left = this.visit(node.children[0], value);\n                return this.visit(node.children[1], left);\n              case TOK_CURRENT:\n                return value;\n              case \"Function\":\n                var resolvedArgs = [];\n                for (i = 0; i < node.children.length; i++) {\n                    resolvedArgs.push(this.visit(node.children[i], value));\n                }\n                return this.runtime.callFunction(node.name, resolvedArgs);\n              case \"ExpressionReference\":\n                var refNode = node.children[0];\n                // Tag the node with a specific attribute so the type\n                // checker verify the type.\n                refNode.jmespathType = TOK_EXPREF;\n                return refNode;\n              default:\n                throw new Error(\"Unknown node type: \" + node.type);\n            }\n        },\n  \n        computeSliceParams: function(arrayLength, sliceParams) {\n          var start = sliceParams[0];\n          var stop = sliceParams[1];\n          var step = sliceParams[2];\n          var computed = [null, null, null];\n          if (step === null) {\n            step = 1;\n          } else if (step === 0) {\n            var error = new Error(\"Invalid slice, step cannot be 0\");\n            error.name = \"RuntimeError\";\n            throw error;\n          }\n          var stepValueNegative = step < 0 ? true : false;\n  \n          if (start === null) {\n              start = stepValueNegative ? arrayLength - 1 : 0;\n          } else {\n              start = this.capSliceRange(arrayLength, start, step);\n          }\n  \n          if (stop === null) {\n              stop = stepValueNegative ? -1 : arrayLength;\n          } else {\n              stop = this.capSliceRange(arrayLength, stop, step);\n          }\n          computed[0] = start;\n          computed[1] = stop;\n          computed[2] = step;\n          return computed;\n        },\n  \n        capSliceRange: function(arrayLength, actualValue, step) {\n            if (actualValue < 0) {\n                actualValue += arrayLength;\n                if (actualValue < 0) {\n                    actualValue = step < 0 ? -1 : 0;\n                }\n            } else if (actualValue >= arrayLength) {\n                actualValue = step < 0 ? arrayLength - 1 : arrayLength;\n            }\n            return actualValue;\n        }\n  \n    };\n  \n    function Runtime(interpreter) {\n      this._interpreter = interpreter;\n      this.functionTable = {\n          // name: [function, <signature>]\n          // The <signature> can be:\n          //\n          // {\n          //   args: [[type1, type2], [type1, type2]],\n          //   variadic: true|false\n          // }\n          //\n          // Each arg in the arg list is a list of valid types\n          // (if the function is overloaded and supports multiple\n          // types.  If the type is \"any\" then no type checking\n          // occurs on the argument.  Variadic is optional\n          // and if not provided is assumed to be false.\n          abs: {_func: this._functionAbs, _signature: [{types: [TYPE_NUMBER]}]},\n          avg: {_func: this._functionAvg, _signature: [{types: [TYPE_ARRAY_NUMBER]}]},\n          ceil: {_func: this._functionCeil, _signature: [{types: [TYPE_NUMBER]}]},\n          contains: {\n              _func: this._functionContains,\n              _signature: [{types: [TYPE_STRING, TYPE_ARRAY]},\n                          {types: [TYPE_ANY]}]},\n          \"ends_with\": {\n              _func: this._functionEndsWith,\n              _signature: [{types: [TYPE_STRING]}, {types: [TYPE_STRING]}]},\n          floor: {_func: this._functionFloor, _signature: [{types: [TYPE_NUMBER]}]},\n          length: {\n              _func: this._functionLength,\n              _signature: [{types: [TYPE_STRING, TYPE_ARRAY, TYPE_OBJECT]}]},\n          map: {\n              _func: this._functionMap,\n              _signature: [{types: [TYPE_EXPREF]}, {types: [TYPE_ARRAY]}]},\n          max: {\n              _func: this._functionMax,\n              _signature: [{types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]}]},\n          \"merge\": {\n              _func: this._functionMerge,\n              _signature: [{types: [TYPE_OBJECT], variadic: true}]\n          },\n          \"max_by\": {\n            _func: this._functionMaxBy,\n            _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n          },\n          sum: {_func: this._functionSum, _signature: [{types: [TYPE_ARRAY_NUMBER]}]},\n          \"starts_with\": {\n              _func: this._functionStartsWith,\n              _signature: [{types: [TYPE_STRING]}, {types: [TYPE_STRING]}]},\n          min: {\n              _func: this._functionMin,\n              _signature: [{types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]}]},\n          \"min_by\": {\n            _func: this._functionMinBy,\n            _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n          },\n          type: {_func: this._functionType, _signature: [{types: [TYPE_ANY]}]},\n          keys: {_func: this._functionKeys, _signature: [{types: [TYPE_OBJECT]}]},\n          values: {_func: this._functionValues, _signature: [{types: [TYPE_OBJECT]}]},\n          sort: {_func: this._functionSort, _signature: [{types: [TYPE_ARRAY_STRING, TYPE_ARRAY_NUMBER]}]},\n          \"sort_by\": {\n            _func: this._functionSortBy,\n            _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n          },\n          join: {\n              _func: this._functionJoin,\n              _signature: [\n                  {types: [TYPE_STRING]},\n                  {types: [TYPE_ARRAY_STRING]}\n              ]\n          },\n          reverse: {\n              _func: this._functionReverse,\n              _signature: [{types: [TYPE_STRING, TYPE_ARRAY]}]},\n          \"to_array\": {_func: this._functionToArray, _signature: [{types: [TYPE_ANY]}]},\n          \"to_string\": {_func: this._functionToString, _signature: [{types: [TYPE_ANY]}]},\n          \"to_number\": {_func: this._functionToNumber, _signature: [{types: [TYPE_ANY]}]},\n          \"not_null\": {\n              _func: this._functionNotNull,\n              _signature: [{types: [TYPE_ANY], variadic: true}]\n          }\n      };\n    }\n  \n    Runtime.prototype = {\n      callFunction: function(name, resolvedArgs) {\n        var functionEntry = this.functionTable[name];\n        if (functionEntry === undefined) {\n            throw new Error(\"Unknown function: \" + name + \"()\");\n        }\n        this._validateArgs(name, resolvedArgs, functionEntry._signature);\n        return functionEntry._func.call(this, resolvedArgs);\n      },\n  \n      _validateArgs: function(name, args, signature) {\n          // Validating the args requires validating\n          // the correct arity and the correct type of each arg.\n          // If the last argument is declared as variadic, then we need\n          // a minimum number of args to be required.  Otherwise it has to\n          // be an exact amount.\n          var pluralized;\n          if (signature[signature.length - 1].variadic) {\n              if (args.length < signature.length) {\n                  pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n                  throw new Error(\"ArgumentError: \" + name + \"() \" +\n                                  \"takes at least\" + signature.length + pluralized +\n                                  \" but received \" + args.length);\n              }\n          } else if (args.length !== signature.length) {\n              pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n              throw new Error(\"ArgumentError: \" + name + \"() \" +\n                              \"takes \" + signature.length + pluralized +\n                              \" but received \" + args.length);\n          }\n          var currentSpec;\n          var actualType;\n          var typeMatched;\n          for (var i = 0; i < signature.length; i++) {\n              typeMatched = false;\n              currentSpec = signature[i].types;\n              actualType = this._getTypeName(args[i]);\n              for (var j = 0; j < currentSpec.length; j++) {\n                  if (this._typeMatches(actualType, currentSpec[j], args[i])) {\n                      typeMatched = true;\n                      break;\n                  }\n              }\n              if (!typeMatched) {\n                  throw new Error(\"TypeError: \" + name + \"() \" +\n                                  \"expected argument \" + (i + 1) +\n                                  \" to be type \" + currentSpec +\n                                  \" but received type \" + actualType +\n                                  \" instead.\");\n              }\n          }\n      },\n  \n      _typeMatches: function(actual, expected, argValue) {\n          if (expected === TYPE_ANY) {\n              return true;\n          }\n          if (expected === TYPE_ARRAY_STRING ||\n              expected === TYPE_ARRAY_NUMBER ||\n              expected === TYPE_ARRAY) {\n              // The expected type can either just be array,\n              // or it can require a specific subtype (array of numbers).\n              //\n              // The simplest case is if \"array\" with no subtype is specified.\n              if (expected === TYPE_ARRAY) {\n                  return actual === TYPE_ARRAY;\n              } else if (actual === TYPE_ARRAY) {\n                  // Otherwise we need to check subtypes.\n                  // I think this has potential to be improved.\n                  var subtype;\n                  if (expected === TYPE_ARRAY_NUMBER) {\n                    subtype = TYPE_NUMBER;\n                  } else if (expected === TYPE_ARRAY_STRING) {\n                    subtype = TYPE_STRING;\n                  }\n                  for (var i = 0; i < argValue.length; i++) {\n                      if (!this._typeMatches(\n                              this._getTypeName(argValue[i]), subtype,\n                                               argValue[i])) {\n                          return false;\n                      }\n                  }\n                  return true;\n              }\n          } else {\n              return actual === expected;\n          }\n      },\n      _getTypeName: function(obj) {\n          switch (Object.prototype.toString.call(obj)) {\n              case \"[object String]\":\n                return TYPE_STRING;\n              case \"[object Number]\":\n                return TYPE_NUMBER;\n              case \"[object Array]\":\n                return TYPE_ARRAY;\n              case \"[object Boolean]\":\n                return TYPE_BOOLEAN;\n              case \"[object Null]\":\n                return TYPE_NULL;\n              case \"[object Object]\":\n                // Check if it's an expref.  If it has, it's been\n                // tagged with a jmespathType attr of 'Expref';\n                if (obj.jmespathType === TOK_EXPREF) {\n                  return TYPE_EXPREF;\n                } else {\n                  return TYPE_OBJECT;\n                }\n          }\n      },\n  \n      _functionStartsWith: function(resolvedArgs) {\n          return resolvedArgs[0].lastIndexOf(resolvedArgs[1]) === 0;\n      },\n  \n      _functionEndsWith: function(resolvedArgs) {\n          var searchStr = resolvedArgs[0];\n          var suffix = resolvedArgs[1];\n          return searchStr.indexOf(suffix, searchStr.length - suffix.length) !== -1;\n      },\n  \n      _functionReverse: function(resolvedArgs) {\n          var typeName = this._getTypeName(resolvedArgs[0]);\n          if (typeName === TYPE_STRING) {\n            var originalStr = resolvedArgs[0];\n            var reversedStr = \"\";\n            for (var i = originalStr.length - 1; i >= 0; i--) {\n                reversedStr += originalStr[i];\n            }\n            return reversedStr;\n          } else {\n            var reversedArray = resolvedArgs[0].slice(0);\n            reversedArray.reverse();\n            return reversedArray;\n          }\n      },\n  \n      _functionAbs: function(resolvedArgs) {\n        return Math.abs(resolvedArgs[0]);\n      },\n  \n      _functionCeil: function(resolvedArgs) {\n          return Math.ceil(resolvedArgs[0]);\n      },\n  \n      _functionAvg: function(resolvedArgs) {\n          var sum = 0;\n          var inputArray = resolvedArgs[0];\n          for (var i = 0; i < inputArray.length; i++) {\n              sum += inputArray[i];\n          }\n          return sum / inputArray.length;\n      },\n  \n      _functionContains: function(resolvedArgs) {\n          return resolvedArgs[0].indexOf(resolvedArgs[1]) >= 0;\n      },\n  \n      _functionFloor: function(resolvedArgs) {\n          return Math.floor(resolvedArgs[0]);\n      },\n  \n      _functionLength: function(resolvedArgs) {\n         if (!isObject(resolvedArgs[0])) {\n           return resolvedArgs[0].length;\n         } else {\n           // As far as I can tell, there's no way to get the length\n           // of an object without O(n) iteration through the object.\n           return Object.keys(resolvedArgs[0]).length;\n         }\n      },\n  \n      _functionMap: function(resolvedArgs) {\n        var mapped = [];\n        var interpreter = this._interpreter;\n        var exprefNode = resolvedArgs[0];\n        var elements = resolvedArgs[1];\n        for (var i = 0; i < elements.length; i++) {\n            mapped.push(interpreter.visit(exprefNode, elements[i]));\n        }\n        return mapped;\n      },\n  \n      _functionMerge: function(resolvedArgs) {\n        var merged = {};\n        for (var i = 0; i < resolvedArgs.length; i++) {\n          var current = resolvedArgs[i];\n          for (var key in current) {\n            merged[key] = current[key];\n          }\n        }\n        return merged;\n      },\n  \n      _functionMax: function(resolvedArgs) {\n        if (resolvedArgs[0].length > 0) {\n          var typeName = this._getTypeName(resolvedArgs[0][0]);\n          if (typeName === TYPE_NUMBER) {\n            return Math.max.apply(Math, resolvedArgs[0]);\n          } else {\n            var elements = resolvedArgs[0];\n            var maxElement = elements[0];\n            for (var i = 1; i < elements.length; i++) {\n                if (maxElement.localeCompare(elements[i]) < 0) {\n                    maxElement = elements[i];\n                }\n            }\n            return maxElement;\n          }\n        } else {\n            return null;\n        }\n      },\n  \n      _functionMin: function(resolvedArgs) {\n        if (resolvedArgs[0].length > 0) {\n          var typeName = this._getTypeName(resolvedArgs[0][0]);\n          if (typeName === TYPE_NUMBER) {\n            return Math.min.apply(Math, resolvedArgs[0]);\n          } else {\n            var elements = resolvedArgs[0];\n            var minElement = elements[0];\n            for (var i = 1; i < elements.length; i++) {\n                if (elements[i].localeCompare(minElement) < 0) {\n                    minElement = elements[i];\n                }\n            }\n            return minElement;\n          }\n        } else {\n          return null;\n        }\n      },\n  \n      _functionSum: function(resolvedArgs) {\n        var sum = 0;\n        var listToSum = resolvedArgs[0];\n        for (var i = 0; i < listToSum.length; i++) {\n          sum += listToSum[i];\n        }\n        return sum;\n      },\n  \n      _functionType: function(resolvedArgs) {\n          switch (this._getTypeName(resolvedArgs[0])) {\n            case TYPE_NUMBER:\n              return \"number\";\n            case TYPE_STRING:\n              return \"string\";\n            case TYPE_ARRAY:\n              return \"array\";\n            case TYPE_OBJECT:\n              return \"object\";\n            case TYPE_BOOLEAN:\n              return \"boolean\";\n            case TYPE_EXPREF:\n              return \"expref\";\n            case TYPE_NULL:\n              return \"null\";\n          }\n      },\n  \n      _functionKeys: function(resolvedArgs) {\n          return Object.keys(resolvedArgs[0]);\n      },\n  \n      _functionValues: function(resolvedArgs) {\n          var obj = resolvedArgs[0];\n          var keys = Object.keys(obj);\n          var values = [];\n          for (var i = 0; i < keys.length; i++) {\n              values.push(obj[keys[i]]);\n          }\n          return values;\n      },\n  \n      _functionJoin: function(resolvedArgs) {\n          var joinChar = resolvedArgs[0];\n          var listJoin = resolvedArgs[1];\n          return listJoin.join(joinChar);\n      },\n  \n      _functionToArray: function(resolvedArgs) {\n          if (this._getTypeName(resolvedArgs[0]) === TYPE_ARRAY) {\n              return resolvedArgs[0];\n          } else {\n              return [resolvedArgs[0]];\n          }\n      },\n  \n      _functionToString: function(resolvedArgs) {\n          if (this._getTypeName(resolvedArgs[0]) === TYPE_STRING) {\n              return resolvedArgs[0];\n          } else {\n              return JSON.stringify(resolvedArgs[0]);\n          }\n      },\n  \n      _functionToNumber: function(resolvedArgs) {\n          var typeName = this._getTypeName(resolvedArgs[0]);\n          var convertedValue;\n          if (typeName === TYPE_NUMBER) {\n              return resolvedArgs[0];\n          } else if (typeName === TYPE_STRING) {\n              convertedValue = +resolvedArgs[0];\n              if (!isNaN(convertedValue)) {\n                  return convertedValue;\n              }\n          }\n          return null;\n      },\n  \n      _functionNotNull: function(resolvedArgs) {\n          for (var i = 0; i < resolvedArgs.length; i++) {\n              if (this._getTypeName(resolvedArgs[i]) !== TYPE_NULL) {\n                  return resolvedArgs[i];\n              }\n          }\n          return null;\n      },\n  \n      _functionSort: function(resolvedArgs) {\n          var sortedArray = resolvedArgs[0].slice(0);\n          sortedArray.sort();\n          return sortedArray;\n      },\n  \n      _functionSortBy: function(resolvedArgs) {\n          var sortedArray = resolvedArgs[0].slice(0);\n          if (sortedArray.length === 0) {\n              return sortedArray;\n          }\n          var interpreter = this._interpreter;\n          var exprefNode = resolvedArgs[1];\n          var requiredType = this._getTypeName(\n              interpreter.visit(exprefNode, sortedArray[0]));\n          if ([TYPE_NUMBER, TYPE_STRING].indexOf(requiredType) < 0) {\n              throw new Error(\"TypeError\");\n          }\n          var that = this;\n          // In order to get a stable sort out of an unstable\n          // sort algorithm, we decorate/sort/undecorate (DSU)\n          // by creating a new list of [index, element] pairs.\n          // In the cmp function, if the evaluated elements are\n          // equal, then the index will be used as the tiebreaker.\n          // After the decorated list has been sorted, it will be\n          // undecorated to extract the original elements.\n          var decorated = [];\n          for (var i = 0; i < sortedArray.length; i++) {\n            decorated.push([i, sortedArray[i]]);\n          }\n          decorated.sort(function(a, b) {\n            var exprA = interpreter.visit(exprefNode, a[1]);\n            var exprB = interpreter.visit(exprefNode, b[1]);\n            if (that._getTypeName(exprA) !== requiredType) {\n                throw new Error(\n                    \"TypeError: expected \" + requiredType + \", received \" +\n                    that._getTypeName(exprA));\n            } else if (that._getTypeName(exprB) !== requiredType) {\n                throw new Error(\n                    \"TypeError: expected \" + requiredType + \", received \" +\n                    that._getTypeName(exprB));\n            }\n            if (exprA > exprB) {\n              return 1;\n            } else if (exprA < exprB) {\n              return -1;\n            } else {\n              // If they're equal compare the items by their\n              // order to maintain relative order of equal keys\n              // (i.e. to get a stable sort).\n              return a[0] - b[0];\n            }\n          });\n          // Undecorate: extract out the original list elements.\n          for (var j = 0; j < decorated.length; j++) {\n            sortedArray[j] = decorated[j][1];\n          }\n          return sortedArray;\n      },\n  \n      _functionMaxBy: function(resolvedArgs) {\n        var exprefNode = resolvedArgs[1];\n        var resolvedArray = resolvedArgs[0];\n        var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n        var maxNumber = -Infinity;\n        var maxRecord;\n        var current;\n        for (var i = 0; i < resolvedArray.length; i++) {\n          current = keyFunction(resolvedArray[i]);\n          if (current > maxNumber) {\n            maxNumber = current;\n            maxRecord = resolvedArray[i];\n          }\n        }\n        return maxRecord;\n      },\n  \n      _functionMinBy: function(resolvedArgs) {\n        var exprefNode = resolvedArgs[1];\n        var resolvedArray = resolvedArgs[0];\n        var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n        var minNumber = Infinity;\n        var minRecord;\n        var current;\n        for (var i = 0; i < resolvedArray.length; i++) {\n          current = keyFunction(resolvedArray[i]);\n          if (current < minNumber) {\n            minNumber = current;\n            minRecord = resolvedArray[i];\n          }\n        }\n        return minRecord;\n      },\n  \n      createKeyFunction: function(exprefNode, allowedTypes) {\n        var that = this;\n        var interpreter = this._interpreter;\n        var keyFunc = function(x) {\n          var current = interpreter.visit(exprefNode, x);\n          if (allowedTypes.indexOf(that._getTypeName(current)) < 0) {\n            var msg = \"TypeError: expected one of \" + allowedTypes +\n                      \", received \" + that._getTypeName(current);\n            throw new Error(msg);\n          }\n          return current;\n        };\n        return keyFunc;\n      }\n  \n    };\n  \n    function compile(stream) {\n      var parser = new Parser();\n      var ast = parser.parse(stream);\n      return ast;\n    }\n  \n    function tokenize(stream) {\n        var lexer = new Lexer();\n        return lexer.tokenize(stream);\n    }\n  \n    function search(data, expression) {\n        var parser = new Parser();\n        // This needs to be improved.  Both the interpreter and runtime depend on\n        // each other.  The runtime needs the interpreter to support exprefs.\n        // There's likely a clean way to avoid the cyclic dependency.\n        var runtime = new Runtime();\n        var interpreter = new TreeInterpreter(runtime);\n        runtime._interpreter = interpreter;\n        var node = parser.parse(expression);\n        return interpreter.search(node, data);\n    }\n  \n    exports.tokenize = tokenize;\n    exports.compile = compile;\n    exports.search = search;\n    exports.strictDeepEqual = strictDeepEqual;\n  })(typeof exports === \"undefined\" ? this.jmespath = {} : exports);\n  \n  },{}],85:[function(require,module,exports){\n  // shim for using process in browser\n  var process = module.exports = {};\n  \n  // cached from whatever global is present so that test runners that stub it\n  // don't break things.  But we need to wrap it in a try catch in case it is\n  // wrapped in strict mode code which doesn't define any globals.  It's inside a\n  // function because try/catches deoptimize in certain engines.\n  \n  var cachedSetTimeout;\n  var cachedClearTimeout;\n  \n  function defaultSetTimout() {\n      throw new Error('setTimeout has not been defined');\n  }\n  function defaultClearTimeout () {\n      throw new Error('clearTimeout has not been defined');\n  }\n  (function () {\n      try {\n          if (typeof setTimeout === 'function') {\n              cachedSetTimeout = setTimeout;\n          } else {\n              cachedSetTimeout = defaultSetTimout;\n          }\n      } catch (e) {\n          cachedSetTimeout = defaultSetTimout;\n      }\n      try {\n          if (typeof clearTimeout === 'function') {\n              cachedClearTimeout = clearTimeout;\n          } else {\n              cachedClearTimeout = defaultClearTimeout;\n          }\n      } catch (e) {\n          cachedClearTimeout = defaultClearTimeout;\n      }\n  } ())\n  function runTimeout(fun) {\n      if (cachedSetTimeout === setTimeout) {\n          //normal enviroments in sane situations\n          return setTimeout(fun, 0);\n      }\n      // if setTimeout wasn't available but was latter defined\n      if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n          cachedSetTimeout = setTimeout;\n          return setTimeout(fun, 0);\n      }\n      try {\n          // when when somebody has screwed with setTimeout but no I.E. maddness\n          return cachedSetTimeout(fun, 0);\n      } catch(e){\n          try {\n              // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n              return cachedSetTimeout.call(null, fun, 0);\n          } catch(e){\n              // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n              return cachedSetTimeout.call(this, fun, 0);\n          }\n      }\n  \n  \n  }\n  function runClearTimeout(marker) {\n      if (cachedClearTimeout === clearTimeout) {\n          //normal enviroments in sane situations\n          return clearTimeout(marker);\n      }\n      // if clearTimeout wasn't available but was latter defined\n      if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n          cachedClearTimeout = clearTimeout;\n          return clearTimeout(marker);\n      }\n      try {\n          // when when somebody has screwed with setTimeout but no I.E. maddness\n          return cachedClearTimeout(marker);\n      } catch (e){\n          try {\n              // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n              return cachedClearTimeout.call(null, marker);\n          } catch (e){\n              // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n              // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n              return cachedClearTimeout.call(this, marker);\n          }\n      }\n  \n  \n  \n  }\n  var queue = [];\n  var draining = false;\n  var currentQueue;\n  var queueIndex = -1;\n  \n  function cleanUpNextTick() {\n      if (!draining || !currentQueue) {\n          return;\n      }\n      draining = false;\n      if (currentQueue.length) {\n          queue = currentQueue.concat(queue);\n      } else {\n          queueIndex = -1;\n      }\n      if (queue.length) {\n          drainQueue();\n      }\n  }\n  \n  function drainQueue() {\n      if (draining) {\n          return;\n      }\n      var timeout = runTimeout(cleanUpNextTick);\n      draining = true;\n  \n      var len = queue.length;\n      while(len) {\n          currentQueue = queue;\n          queue = [];\n          while (++queueIndex < len) {\n              if (currentQueue) {\n                  currentQueue[queueIndex].run();\n              }\n          }\n          queueIndex = -1;\n          len = queue.length;\n      }\n      currentQueue = null;\n      draining = false;\n      runClearTimeout(timeout);\n  }\n  \n  process.nextTick = function (fun) {\n      var args = new Array(arguments.length - 1);\n      if (arguments.length > 1) {\n          for (var i = 1; i < arguments.length; i++) {\n              args[i - 1] = arguments[i];\n          }\n      }\n      queue.push(new Item(fun, args));\n      if (queue.length === 1 && !draining) {\n          runTimeout(drainQueue);\n      }\n  };\n  \n  // v8 likes predictible objects\n  function Item(fun, array) {\n      this.fun = fun;\n      this.array = array;\n  }\n  Item.prototype.run = function () {\n      this.fun.apply(null, this.array);\n  };\n  process.title = 'browser';\n  process.browser = true;\n  process.env = {};\n  process.argv = [];\n  process.version = ''; // empty string to avoid regexp issues\n  process.versions = {};\n  \n  function noop() {}\n  \n  process.on = noop;\n  process.addListener = noop;\n  process.once = noop;\n  process.off = noop;\n  process.removeListener = noop;\n  process.removeAllListeners = noop;\n  process.emit = noop;\n  process.prependListener = noop;\n  process.prependOnceListener = noop;\n  \n  process.listeners = function (name) { return [] }\n  \n  process.binding = function (name) {\n      throw new Error('process.binding is not supported');\n  };\n  \n  process.cwd = function () { return '/' };\n  process.chdir = function (dir) {\n      throw new Error('process.chdir is not supported');\n  };\n  process.umask = function() { return 0; };\n  \n  },{}],86:[function(require,module,exports){\n  (function (global){\n  /*! https://mths.be/punycode v1.3.2 by @mathias */\n  ;(function(root) {\n  \n    /** Detect free variables */\n    var freeExports = typeof exports == 'object' && exports &&\n      !exports.nodeType && exports;\n    var freeModule = typeof module == 'object' && module &&\n      !module.nodeType && module;\n    var freeGlobal = typeof global == 'object' && global;\n    if (\n      freeGlobal.global === freeGlobal ||\n      freeGlobal.window === freeGlobal ||\n      freeGlobal.self === freeGlobal\n    ) {\n      root = freeGlobal;\n    }\n  \n    /**\n     * The `punycode` object.\n     * @name punycode\n     * @type Object\n     */\n    var punycode,\n  \n    /** Highest positive signed 32-bit float value */\n    maxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n  \n    /** Bootstring parameters */\n    base = 36,\n    tMin = 1,\n    tMax = 26,\n    skew = 38,\n    damp = 700,\n    initialBias = 72,\n    initialN = 128, // 0x80\n    delimiter = '-', // '\\x2D'\n  \n    /** Regular expressions */\n    regexPunycode = /^xn--/,\n    regexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n    regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n  \n    /** Error messages */\n    errors = {\n      'overflow': 'Overflow: input needs wider integers to process',\n      'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n      'invalid-input': 'Invalid input'\n    },\n  \n    /** Convenience shortcuts */\n    baseMinusTMin = base - tMin,\n    floor = Math.floor,\n    stringFromCharCode = String.fromCharCode,\n  \n    /** Temporary variable */\n    key;\n  \n    /*--------------------------------------------------------------------------*/\n  \n    /**\n     * A generic error utility function.\n     * @private\n     * @param {String} type The error type.\n     * @returns {Error} Throws a `RangeError` with the applicable error message.\n     */\n    function error(type) {\n      throw RangeError(errors[type]);\n    }\n  \n    /**\n     * A generic `Array#map` utility function.\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} callback The function that gets called for every array\n     * item.\n     * @returns {Array} A new array of values returned by the callback function.\n     */\n    function map(array, fn) {\n      var length = array.length;\n      var result = [];\n      while (length--) {\n        result[length] = fn(array[length]);\n      }\n      return result;\n    }\n  \n    /**\n     * A simple `Array#map`-like wrapper to work with domain name strings or email\n     * addresses.\n     * @private\n     * @param {String} domain The domain name or email address.\n     * @param {Function} callback The function that gets called for every\n     * character.\n     * @returns {Array} A new string of characters returned by the callback\n     * function.\n     */\n    function mapDomain(string, fn) {\n      var parts = string.split('@');\n      var result = '';\n      if (parts.length > 1) {\n        // In email addresses, only the domain name should be punycoded. Leave\n        // the local part (i.e. everything up to `@`) intact.\n        result = parts[0] + '@';\n        string = parts[1];\n      }\n      // Avoid `split(regex)` for IE8 compatibility. See #17.\n      string = string.replace(regexSeparators, '\\x2E');\n      var labels = string.split('.');\n      var encoded = map(labels, fn).join('.');\n      return result + encoded;\n    }\n  \n    /**\n     * Creates an array containing the numeric code points of each Unicode\n     * character in the string. While JavaScript uses UCS-2 internally,\n     * this function will convert a pair of surrogate halves (each of which\n     * UCS-2 exposes as separate characters) into a single code point,\n     * matching UTF-16.\n     * @see `punycode.ucs2.encode`\n     * @see <https://mathiasbynens.be/notes/javascript-encoding>\n     * @memberOf punycode.ucs2\n     * @name decode\n     * @param {String} string The Unicode input string (UCS-2).\n     * @returns {Array} The new array of code points.\n     */\n    function ucs2decode(string) {\n      var output = [],\n          counter = 0,\n          length = string.length,\n          value,\n          extra;\n      while (counter < length) {\n        value = string.charCodeAt(counter++);\n        if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n          // high surrogate, and there is a next character\n          extra = string.charCodeAt(counter++);\n          if ((extra & 0xFC00) == 0xDC00) { // low surrogate\n            output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n          } else {\n            // unmatched surrogate; only append this code unit, in case the next\n            // code unit is the high surrogate of a surrogate pair\n            output.push(value);\n            counter--;\n          }\n        } else {\n          output.push(value);\n        }\n      }\n      return output;\n    }\n  \n    /**\n     * Creates a string based on an array of numeric code points.\n     * @see `punycode.ucs2.decode`\n     * @memberOf punycode.ucs2\n     * @name encode\n     * @param {Array} codePoints The array of numeric code points.\n     * @returns {String} The new Unicode string (UCS-2).\n     */\n    function ucs2encode(array) {\n      return map(array, function(value) {\n        var output = '';\n        if (value > 0xFFFF) {\n          value -= 0x10000;\n          output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n          value = 0xDC00 | value & 0x3FF;\n        }\n        output += stringFromCharCode(value);\n        return output;\n      }).join('');\n    }\n  \n    /**\n     * Converts a basic code point into a digit/integer.\n     * @see `digitToBasic()`\n     * @private\n     * @param {Number} codePoint The basic numeric code point value.\n     * @returns {Number} The numeric value of a basic code point (for use in\n     * representing integers) in the range `0` to `base - 1`, or `base` if\n     * the code point does not represent a value.\n     */\n    function basicToDigit(codePoint) {\n      if (codePoint - 48 < 10) {\n        return codePoint - 22;\n      }\n      if (codePoint - 65 < 26) {\n        return codePoint - 65;\n      }\n      if (codePoint - 97 < 26) {\n        return codePoint - 97;\n      }\n      return base;\n    }\n  \n    /**\n     * Converts a digit/integer into a basic code point.\n     * @see `basicToDigit()`\n     * @private\n     * @param {Number} digit The numeric value of a basic code point.\n     * @returns {Number} The basic code point whose value (when used for\n     * representing integers) is `digit`, which needs to be in the range\n     * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n     * used; else, the lowercase form is used. The behavior is undefined\n     * if `flag` is non-zero and `digit` has no uppercase form.\n     */\n    function digitToBasic(digit, flag) {\n      //  0..25 map to ASCII a..z or A..Z\n      // 26..35 map to ASCII 0..9\n      return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n    }\n  \n    /**\n     * Bias adaptation function as per section 3.4 of RFC 3492.\n     * http://tools.ietf.org/html/rfc3492#section-3.4\n     * @private\n     */\n    function adapt(delta, numPoints, firstTime) {\n      var k = 0;\n      delta = firstTime ? floor(delta / damp) : delta >> 1;\n      delta += floor(delta / numPoints);\n      for (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n        delta = floor(delta / baseMinusTMin);\n      }\n      return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n    }\n  \n    /**\n     * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n     * symbols.\n     * @memberOf punycode\n     * @param {String} input The Punycode string of ASCII-only symbols.\n     * @returns {String} The resulting string of Unicode symbols.\n     */\n    function decode(input) {\n      // Don't use UCS-2\n      var output = [],\n          inputLength = input.length,\n          out,\n          i = 0,\n          n = initialN,\n          bias = initialBias,\n          basic,\n          j,\n          index,\n          oldi,\n          w,\n          k,\n          digit,\n          t,\n          /** Cached calculation results */\n          baseMinusT;\n  \n      // Handle the basic code points: let `basic` be the number of input code\n      // points before the last delimiter, or `0` if there is none, then copy\n      // the first basic code points to the output.\n  \n      basic = input.lastIndexOf(delimiter);\n      if (basic < 0) {\n        basic = 0;\n      }\n  \n      for (j = 0; j < basic; ++j) {\n        // if it's not a basic code point\n        if (input.charCodeAt(j) >= 0x80) {\n          error('not-basic');\n        }\n        output.push(input.charCodeAt(j));\n      }\n  \n      // Main decoding loop: start just after the last delimiter if any basic code\n      // points were copied; start at the beginning otherwise.\n  \n      for (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n  \n        // `index` is the index of the next character to be consumed.\n        // Decode a generalized variable-length integer into `delta`,\n        // which gets added to `i`. The overflow checking is easier\n        // if we increase `i` as we go, then subtract off its starting\n        // value at the end to obtain `delta`.\n        for (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n  \n          if (index >= inputLength) {\n            error('invalid-input');\n          }\n  \n          digit = basicToDigit(input.charCodeAt(index++));\n  \n          if (digit >= base || digit > floor((maxInt - i) / w)) {\n            error('overflow');\n          }\n  \n          i += digit * w;\n          t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n  \n          if (digit < t) {\n            break;\n          }\n  \n          baseMinusT = base - t;\n          if (w > floor(maxInt / baseMinusT)) {\n            error('overflow');\n          }\n  \n          w *= baseMinusT;\n  \n        }\n  \n        out = output.length + 1;\n        bias = adapt(i - oldi, out, oldi == 0);\n  \n        // `i` was supposed to wrap around from `out` to `0`,\n        // incrementing `n` each time, so we'll fix that now:\n        if (floor(i / out) > maxInt - n) {\n          error('overflow');\n        }\n  \n        n += floor(i / out);\n        i %= out;\n  \n        // Insert `n` at position `i` of the output\n        output.splice(i++, 0, n);\n  \n      }\n  \n      return ucs2encode(output);\n    }\n  \n    /**\n     * Converts a string of Unicode symbols (e.g. a domain name label) to a\n     * Punycode string of ASCII-only symbols.\n     * @memberOf punycode\n     * @param {String} input The string of Unicode symbols.\n     * @returns {String} The resulting Punycode string of ASCII-only symbols.\n     */\n    function encode(input) {\n      var n,\n          delta,\n          handledCPCount,\n          basicLength,\n          bias,\n          j,\n          m,\n          q,\n          k,\n          t,\n          currentValue,\n          output = [],\n          /** `inputLength` will hold the number of code points in `input`. */\n          inputLength,\n          /** Cached calculation results */\n          handledCPCountPlusOne,\n          baseMinusT,\n          qMinusT;\n  \n      // Convert the input in UCS-2 to Unicode\n      input = ucs2decode(input);\n  \n      // Cache the length\n      inputLength = input.length;\n  \n      // Initialize the state\n      n = initialN;\n      delta = 0;\n      bias = initialBias;\n  \n      // Handle the basic code points\n      for (j = 0; j < inputLength; ++j) {\n        currentValue = input[j];\n        if (currentValue < 0x80) {\n          output.push(stringFromCharCode(currentValue));\n        }\n      }\n  \n      handledCPCount = basicLength = output.length;\n  \n      // `handledCPCount` is the number of code points that have been handled;\n      // `basicLength` is the number of basic code points.\n  \n      // Finish the basic string - if it is not empty - with a delimiter\n      if (basicLength) {\n        output.push(delimiter);\n      }\n  \n      // Main encoding loop:\n      while (handledCPCount < inputLength) {\n  \n        // All non-basic code points < n have been handled already. Find the next\n        // larger one:\n        for (m = maxInt, j = 0; j < inputLength; ++j) {\n          currentValue = input[j];\n          if (currentValue >= n && currentValue < m) {\n            m = currentValue;\n          }\n        }\n  \n        // Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n        // but guard against overflow\n        handledCPCountPlusOne = handledCPCount + 1;\n        if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n          error('overflow');\n        }\n  \n        delta += (m - n) * handledCPCountPlusOne;\n        n = m;\n  \n        for (j = 0; j < inputLength; ++j) {\n          currentValue = input[j];\n  \n          if (currentValue < n && ++delta > maxInt) {\n            error('overflow');\n          }\n  \n          if (currentValue == n) {\n            // Represent delta as a generalized variable-length integer\n            for (q = delta, k = base; /* no condition */; k += base) {\n              t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n              if (q < t) {\n                break;\n              }\n              qMinusT = q - t;\n              baseMinusT = base - t;\n              output.push(\n                stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n              );\n              q = floor(qMinusT / baseMinusT);\n            }\n  \n            output.push(stringFromCharCode(digitToBasic(q, 0)));\n            bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n            delta = 0;\n            ++handledCPCount;\n          }\n        }\n  \n        ++delta;\n        ++n;\n  \n      }\n      return output.join('');\n    }\n  \n    /**\n     * Converts a Punycode string representing a domain name or an email address\n     * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n     * it doesn't matter if you call it on a string that has already been\n     * converted to Unicode.\n     * @memberOf punycode\n     * @param {String} input The Punycoded domain name or email address to\n     * convert to Unicode.\n     * @returns {String} The Unicode representation of the given Punycode\n     * string.\n     */\n    function toUnicode(input) {\n      return mapDomain(input, function(string) {\n        return regexPunycode.test(string)\n          ? decode(string.slice(4).toLowerCase())\n          : string;\n      });\n    }\n  \n    /**\n     * Converts a Unicode string representing a domain name or an email address to\n     * Punycode. Only the non-ASCII parts of the domain name will be converted,\n     * i.e. it doesn't matter if you call it with a domain that's already in\n     * ASCII.\n     * @memberOf punycode\n     * @param {String} input The domain name or email address to convert, as a\n     * Unicode string.\n     * @returns {String} The Punycode representation of the given domain name or\n     * email address.\n     */\n    function toASCII(input) {\n      return mapDomain(input, function(string) {\n        return regexNonASCII.test(string)\n          ? 'xn--' + encode(string)\n          : string;\n      });\n    }\n  \n    /*--------------------------------------------------------------------------*/\n  \n    /** Define the public API */\n    punycode = {\n      /**\n       * A string representing the current Punycode.js version number.\n       * @memberOf punycode\n       * @type String\n       */\n      'version': '1.3.2',\n      /**\n       * An object of methods to convert from JavaScript's internal character\n       * representation (UCS-2) to Unicode code points, and back.\n       * @see <https://mathiasbynens.be/notes/javascript-encoding>\n       * @memberOf punycode\n       * @type Object\n       */\n      'ucs2': {\n        'decode': ucs2decode,\n        'encode': ucs2encode\n      },\n      'decode': decode,\n      'encode': encode,\n      'toASCII': toASCII,\n      'toUnicode': toUnicode\n    };\n  \n    /** Expose `punycode` */\n    // Some AMD build optimizers, like r.js, check for specific condition patterns\n    // like the following:\n    if (\n      typeof define == 'function' &&\n      typeof define.amd == 'object' &&\n      define.amd\n    ) {\n      define('punycode', function() {\n        return punycode;\n      });\n    } else if (freeExports && freeModule) {\n      if (module.exports == freeExports) { // in Node.js or RingoJS v0.8.0+\n        freeModule.exports = punycode;\n      } else { // in Narwhal or RingoJS v0.7.0-\n        for (key in punycode) {\n          punycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n        }\n      }\n    } else { // in Rhino or a web browser\n      root.punycode = punycode;\n    }\n  \n  }(this));\n  \n  }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n  },{}],87:[function(require,module,exports){\n  // Copyright Joyent, Inc. and other Node contributors.\n  //\n  // Permission is hereby granted, free of charge, to any person obtaining a\n  // copy of this software and associated documentation files (the\n  // \"Software\"), to deal in the Software without restriction, including\n  // without limitation the rights to use, copy, modify, merge, publish,\n  // distribute, sublicense, and/or sell copies of the Software, and to permit\n  // persons to whom the Software is furnished to do so, subject to the\n  // following conditions:\n  //\n  // The above copyright notice and this permission notice shall be included\n  // in all copies or substantial portions of the Software.\n  //\n  // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n  // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n  // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n  // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n  // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n  // USE OR OTHER DEALINGS IN THE SOFTWARE.\n  \n  'use strict';\n  \n  // If obj.hasOwnProperty has been overridden, then calling\n  // obj.hasOwnProperty(prop) will break.\n  // See: https://github.com/joyent/node/issues/1707\n  function hasOwnProperty(obj, prop) {\n    return Object.prototype.hasOwnProperty.call(obj, prop);\n  }\n  \n  module.exports = function(qs, sep, eq, options) {\n    sep = sep || '&';\n    eq = eq || '=';\n    var obj = {};\n  \n    if (typeof qs !== 'string' || qs.length === 0) {\n      return obj;\n    }\n  \n    var regexp = /\\+/g;\n    qs = qs.split(sep);\n  \n    var maxKeys = 1000;\n    if (options && typeof options.maxKeys === 'number') {\n      maxKeys = options.maxKeys;\n    }\n  \n    var len = qs.length;\n    // maxKeys <= 0 means that we should not limit keys count\n    if (maxKeys > 0 && len > maxKeys) {\n      len = maxKeys;\n    }\n  \n    for (var i = 0; i < len; ++i) {\n      var x = qs[i].replace(regexp, '%20'),\n          idx = x.indexOf(eq),\n          kstr, vstr, k, v;\n  \n      if (idx >= 0) {\n        kstr = x.substr(0, idx);\n        vstr = x.substr(idx + 1);\n      } else {\n        kstr = x;\n        vstr = '';\n      }\n  \n      k = decodeURIComponent(kstr);\n      v = decodeURIComponent(vstr);\n  \n      if (!hasOwnProperty(obj, k)) {\n        obj[k] = v;\n      } else if (isArray(obj[k])) {\n        obj[k].push(v);\n      } else {\n        obj[k] = [obj[k], v];\n      }\n    }\n  \n    return obj;\n  };\n  \n  var isArray = Array.isArray || function (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n  };\n  \n  },{}],88:[function(require,module,exports){\n  // Copyright Joyent, Inc. and other Node contributors.\n  //\n  // Permission is hereby granted, free of charge, to any person obtaining a\n  // copy of this software and associated documentation files (the\n  // \"Software\"), to deal in the Software without restriction, including\n  // without limitation the rights to use, copy, modify, merge, publish,\n  // distribute, sublicense, and/or sell copies of the Software, and to permit\n  // persons to whom the Software is furnished to do so, subject to the\n  // following conditions:\n  //\n  // The above copyright notice and this permission notice shall be included\n  // in all copies or substantial portions of the Software.\n  //\n  // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n  // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n  // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n  // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n  // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n  // USE OR OTHER DEALINGS IN THE SOFTWARE.\n  \n  'use strict';\n  \n  var stringifyPrimitive = function(v) {\n    switch (typeof v) {\n      case 'string':\n        return v;\n  \n      case 'boolean':\n        return v ? 'true' : 'false';\n  \n      case 'number':\n        return isFinite(v) ? v : '';\n  \n      default:\n        return '';\n    }\n  };\n  \n  module.exports = function(obj, sep, eq, name) {\n    sep = sep || '&';\n    eq = eq || '=';\n    if (obj === null) {\n      obj = undefined;\n    }\n  \n    if (typeof obj === 'object') {\n      return map(objectKeys(obj), function(k) {\n        var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n        if (isArray(obj[k])) {\n          return map(obj[k], function(v) {\n            return ks + encodeURIComponent(stringifyPrimitive(v));\n          }).join(sep);\n        } else {\n          return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n        }\n      }).join(sep);\n  \n    }\n  \n    if (!name) return '';\n    return encodeURIComponent(stringifyPrimitive(name)) + eq +\n           encodeURIComponent(stringifyPrimitive(obj));\n  };\n  \n  var isArray = Array.isArray || function (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n  };\n  \n  function map (xs, f) {\n    if (xs.map) return xs.map(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n      res.push(f(xs[i], i));\n    }\n    return res;\n  }\n  \n  var objectKeys = Object.keys || function (obj) {\n    var res = [];\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n    }\n    return res;\n  };\n  \n  },{}],89:[function(require,module,exports){\n  'use strict';\n  \n  exports.decode = exports.parse = require('./decode');\n  exports.encode = exports.stringify = require('./encode');\n  \n  },{\"./decode\":87,\"./encode\":88}],90:[function(require,module,exports){\n  // Copyright Joyent, Inc. and other Node contributors.\n  //\n  // Permission is hereby granted, free of charge, to any person obtaining a\n  // copy of this software and associated documentation files (the\n  // \"Software\"), to deal in the Software without restriction, including\n  // without limitation the rights to use, copy, modify, merge, publish,\n  // distribute, sublicense, and/or sell copies of the Software, and to permit\n  // persons to whom the Software is furnished to do so, subject to the\n  // following conditions:\n  //\n  // The above copyright notice and this permission notice shall be included\n  // in all copies or substantial portions of the Software.\n  //\n  // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n  // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n  // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n  // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n  // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n  // USE OR OTHER DEALINGS IN THE SOFTWARE.\n  \n  'use strict';\n  \n  // If obj.hasOwnProperty has been overridden, then calling\n  // obj.hasOwnProperty(prop) will break.\n  // See: https://github.com/joyent/node/issues/1707\n  function hasOwnProperty(obj, prop) {\n    return Object.prototype.hasOwnProperty.call(obj, prop);\n  }\n  \n  module.exports = function(qs, sep, eq, options) {\n    sep = sep || '&';\n    eq = eq || '=';\n    var obj = {};\n  \n    if (typeof qs !== 'string' || qs.length === 0) {\n      return obj;\n    }\n  \n    var regexp = /\\+/g;\n    qs = qs.split(sep);\n  \n    var maxKeys = 1000;\n    if (options && typeof options.maxKeys === 'number') {\n      maxKeys = options.maxKeys;\n    }\n  \n    var len = qs.length;\n    // maxKeys <= 0 means that we should not limit keys count\n    if (maxKeys > 0 && len > maxKeys) {\n      len = maxKeys;\n    }\n  \n    for (var i = 0; i < len; ++i) {\n      var x = qs[i].replace(regexp, '%20'),\n          idx = x.indexOf(eq),\n          kstr, vstr, k, v;\n  \n      if (idx >= 0) {\n        kstr = x.substr(0, idx);\n        vstr = x.substr(idx + 1);\n      } else {\n        kstr = x;\n        vstr = '';\n      }\n  \n      k = decodeURIComponent(kstr);\n      v = decodeURIComponent(vstr);\n  \n      if (!hasOwnProperty(obj, k)) {\n        obj[k] = v;\n      } else if (Array.isArray(obj[k])) {\n        obj[k].push(v);\n      } else {\n        obj[k] = [obj[k], v];\n      }\n    }\n  \n    return obj;\n  };\n  \n  },{}],91:[function(require,module,exports){\n  // Copyright Joyent, Inc. and other Node contributors.\n  //\n  // Permission is hereby granted, free of charge, to any person obtaining a\n  // copy of this software and associated documentation files (the\n  // \"Software\"), to deal in the Software without restriction, including\n  // without limitation the rights to use, copy, modify, merge, publish,\n  // distribute, sublicense, and/or sell copies of the Software, and to permit\n  // persons to whom the Software is furnished to do so, subject to the\n  // following conditions:\n  //\n  // The above copyright notice and this permission notice shall be included\n  // in all copies or substantial portions of the Software.\n  //\n  // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n  // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n  // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n  // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n  // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n  // USE OR OTHER DEALINGS IN THE SOFTWARE.\n  \n  'use strict';\n  \n  var stringifyPrimitive = function(v) {\n    switch (typeof v) {\n      case 'string':\n        return v;\n  \n      case 'boolean':\n        return v ? 'true' : 'false';\n  \n      case 'number':\n        return isFinite(v) ? v : '';\n  \n      default:\n        return '';\n    }\n  };\n  \n  module.exports = function(obj, sep, eq, name) {\n    sep = sep || '&';\n    eq = eq || '=';\n    if (obj === null) {\n      obj = undefined;\n    }\n  \n    if (typeof obj === 'object') {\n      return Object.keys(obj).map(function(k) {\n        var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n        if (Array.isArray(obj[k])) {\n          return obj[k].map(function(v) {\n            return ks + encodeURIComponent(stringifyPrimitive(v));\n          }).join(sep);\n        } else {\n          return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n        }\n      }).join(sep);\n  \n    }\n  \n    if (!name) return '';\n    return encodeURIComponent(stringifyPrimitive(name)) + eq +\n           encodeURIComponent(stringifyPrimitive(obj));\n  };\n  \n  },{}],92:[function(require,module,exports){\n  arguments[4][89][0].apply(exports,arguments)\n  },{\"./decode\":90,\"./encode\":91,\"dup\":89}],93:[function(require,module,exports){\n  (function (setImmediate,clearImmediate){\n  var nextTick = require('process/browser.js').nextTick;\n  var apply = Function.prototype.apply;\n  var slice = Array.prototype.slice;\n  var immediateIds = {};\n  var nextImmediateId = 0;\n  \n  // DOM APIs, for completeness\n  \n  exports.setTimeout = function() {\n    return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n  };\n  exports.setInterval = function() {\n    return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n  };\n  exports.clearTimeout =\n  exports.clearInterval = function(timeout) { timeout.close(); };\n  \n  function Timeout(id, clearFn) {\n    this._id = id;\n    this._clearFn = clearFn;\n  }\n  Timeout.prototype.unref = Timeout.prototype.ref = function() {};\n  Timeout.prototype.close = function() {\n    this._clearFn.call(window, this._id);\n  };\n  \n  // Does not start the time, just sets up the members needed.\n  exports.enroll = function(item, msecs) {\n    clearTimeout(item._idleTimeoutId);\n    item._idleTimeout = msecs;\n  };\n  \n  exports.unenroll = function(item) {\n    clearTimeout(item._idleTimeoutId);\n    item._idleTimeout = -1;\n  };\n  \n  exports._unrefActive = exports.active = function(item) {\n    clearTimeout(item._idleTimeoutId);\n  \n    var msecs = item._idleTimeout;\n    if (msecs >= 0) {\n      item._idleTimeoutId = setTimeout(function onTimeout() {\n        if (item._onTimeout)\n          item._onTimeout();\n      }, msecs);\n    }\n  };\n  \n  // That's not how node.js implements it but the exposed api is the same.\n  exports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n    var id = nextImmediateId++;\n    var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n  \n    immediateIds[id] = true;\n  \n    nextTick(function onNextTick() {\n      if (immediateIds[id]) {\n        // fn.call() is faster so we optimize for the common use-case\n        // @see http://jsperf.com/call-apply-segu\n        if (args) {\n          fn.apply(null, args);\n        } else {\n          fn.call(null);\n        }\n        // Prevent ids from leaking\n        exports.clearImmediate(id);\n      }\n    });\n  \n    return id;\n  };\n  \n  exports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n    delete immediateIds[id];\n  };\n  }).call(this,require(\"timers\").setImmediate,require(\"timers\").clearImmediate)\n  },{\"process/browser.js\":85,\"timers\":93}],94:[function(require,module,exports){\n  // Copyright Joyent, Inc. and other Node contributors.\n  //\n  // Permission is hereby granted, free of charge, to any person obtaining a\n  // copy of this software and associated documentation files (the\n  // \"Software\"), to deal in the Software without restriction, including\n  // without limitation the rights to use, copy, modify, merge, publish,\n  // distribute, sublicense, and/or sell copies of the Software, and to permit\n  // persons to whom the Software is furnished to do so, subject to the\n  // following conditions:\n  //\n  // The above copyright notice and this permission notice shall be included\n  // in all copies or substantial portions of the Software.\n  //\n  // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n  // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n  // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n  // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n  // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n  // USE OR OTHER DEALINGS IN THE SOFTWARE.\n  \n  var punycode = require('punycode');\n  \n  exports.parse = urlParse;\n  exports.resolve = urlResolve;\n  exports.resolveObject = urlResolveObject;\n  exports.format = urlFormat;\n  \n  exports.Url = Url;\n  \n  function Url() {\n    this.protocol = null;\n    this.slashes = null;\n    this.auth = null;\n    this.host = null;\n    this.port = null;\n    this.hostname = null;\n    this.hash = null;\n    this.search = null;\n    this.query = null;\n    this.pathname = null;\n    this.path = null;\n    this.href = null;\n  }\n  \n  // Reference: RFC 3986, RFC 1808, RFC 2396\n  \n  // define these here so at least they only have to be\n  // compiled once on the first module load.\n  var protocolPattern = /^([a-z0-9.+-]+:)/i,\n      portPattern = /:[0-9]*$/,\n  \n      // RFC 2396: characters reserved for delimiting URLs.\n      // We actually just auto-escape these.\n      delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n  \n      // RFC 2396: characters not allowed for various reasons.\n      unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n  \n      // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n      autoEscape = ['\\''].concat(unwise),\n      // Characters that are never ever allowed in a hostname.\n      // Note that any invalid chars are also handled, but these\n      // are the ones that are *expected* to be seen, so we fast-path\n      // them.\n      nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n      hostEndingChars = ['/', '?', '#'],\n      hostnameMaxLen = 255,\n      hostnamePartPattern = /^[a-z0-9A-Z_-]{0,63}$/,\n      hostnamePartStart = /^([a-z0-9A-Z_-]{0,63})(.*)$/,\n      // protocols that can allow \"unsafe\" and \"unwise\" chars.\n      unsafeProtocol = {\n        'javascript': true,\n        'javascript:': true\n      },\n      // protocols that never have a hostname.\n      hostlessProtocol = {\n        'javascript': true,\n        'javascript:': true\n      },\n      // protocols that always contain a // bit.\n      slashedProtocol = {\n        'http': true,\n        'https': true,\n        'ftp': true,\n        'gopher': true,\n        'file': true,\n        'http:': true,\n        'https:': true,\n        'ftp:': true,\n        'gopher:': true,\n        'file:': true\n      },\n      querystring = require('querystring');\n  \n  function urlParse(url, parseQueryString, slashesDenoteHost) {\n    if (url && isObject(url) && url instanceof Url) return url;\n  \n    var u = new Url;\n    u.parse(url, parseQueryString, slashesDenoteHost);\n    return u;\n  }\n  \n  Url.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n    if (!isString(url)) {\n      throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n    }\n  \n    var rest = url;\n  \n    // trim before proceeding.\n    // This is to support parse stuff like \"  http://foo.com  \\n\"\n    rest = rest.trim();\n  \n    var proto = protocolPattern.exec(rest);\n    if (proto) {\n      proto = proto[0];\n      var lowerProto = proto.toLowerCase();\n      this.protocol = lowerProto;\n      rest = rest.substr(proto.length);\n    }\n  \n    // figure out if it's got a host\n    // user@server is *always* interpreted as a hostname, and url\n    // resolution will treat //foo/bar as host=foo,path=bar because that's\n    // how the browser resolves relative URLs.\n    if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n      var slashes = rest.substr(0, 2) === '//';\n      if (slashes && !(proto && hostlessProtocol[proto])) {\n        rest = rest.substr(2);\n        this.slashes = true;\n      }\n    }\n  \n    if (!hostlessProtocol[proto] &&\n        (slashes || (proto && !slashedProtocol[proto]))) {\n  \n      // there's a hostname.\n      // the first instance of /, ?, ;, or # ends the host.\n      //\n      // If there is an @ in the hostname, then non-host chars *are* allowed\n      // to the left of the last @ sign, unless some host-ending character\n      // comes *before* the @-sign.\n      // URLs are obnoxious.\n      //\n      // ex:\n      // http://a@b@c/ => user:a@b host:c\n      // http://a@b?@c => user:a host:c path:/?@c\n  \n      // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n      // Review our test case against browsers more comprehensively.\n  \n      // find the first instance of any hostEndingChars\n      var hostEnd = -1;\n      for (var i = 0; i < hostEndingChars.length; i++) {\n        var hec = rest.indexOf(hostEndingChars[i]);\n        if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n          hostEnd = hec;\n      }\n  \n      // at this point, either we have an explicit point where the\n      // auth portion cannot go past, or the last @ char is the decider.\n      var auth, atSign;\n      if (hostEnd === -1) {\n        // atSign can be anywhere.\n        atSign = rest.lastIndexOf('@');\n      } else {\n        // atSign must be in auth portion.\n        // http://a@b/c@d => host:b auth:a path:/c@d\n        atSign = rest.lastIndexOf('@', hostEnd);\n      }\n  \n      // Now we have a portion which is definitely the auth.\n      // Pull that off.\n      if (atSign !== -1) {\n        auth = rest.slice(0, atSign);\n        rest = rest.slice(atSign + 1);\n        this.auth = decodeURIComponent(auth);\n      }\n  \n      // the host is the remaining to the left of the first non-host char\n      hostEnd = -1;\n      for (var i = 0; i < nonHostChars.length; i++) {\n        var hec = rest.indexOf(nonHostChars[i]);\n        if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n          hostEnd = hec;\n      }\n      // if we still have not hit it, then the entire thing is a host.\n      if (hostEnd === -1)\n        hostEnd = rest.length;\n  \n      this.host = rest.slice(0, hostEnd);\n      rest = rest.slice(hostEnd);\n  \n      // pull out port.\n      this.parseHost();\n  \n      // we've indicated that there is a hostname,\n      // so even if it's empty, it has to be present.\n      this.hostname = this.hostname || '';\n  \n      // if hostname begins with [ and ends with ]\n      // assume that it's an IPv6 address.\n      var ipv6Hostname = this.hostname[0] === '[' &&\n          this.hostname[this.hostname.length - 1] === ']';\n  \n      // validate a little.\n      if (!ipv6Hostname) {\n        var hostparts = this.hostname.split(/\\./);\n        for (var i = 0, l = hostparts.length; i < l; i++) {\n          var part = hostparts[i];\n          if (!part) continue;\n          if (!part.match(hostnamePartPattern)) {\n            var newpart = '';\n            for (var j = 0, k = part.length; j < k; j++) {\n              if (part.charCodeAt(j) > 127) {\n                // we replace non-ASCII char with a temporary placeholder\n                // we need this to make sure size of hostname is not\n                // broken by replacing non-ASCII by nothing\n                newpart += 'x';\n              } else {\n                newpart += part[j];\n              }\n            }\n            // we test again with ASCII char only\n            if (!newpart.match(hostnamePartPattern)) {\n              var validParts = hostparts.slice(0, i);\n              var notHost = hostparts.slice(i + 1);\n              var bit = part.match(hostnamePartStart);\n              if (bit) {\n                validParts.push(bit[1]);\n                notHost.unshift(bit[2]);\n              }\n              if (notHost.length) {\n                rest = '/' + notHost.join('.') + rest;\n              }\n              this.hostname = validParts.join('.');\n              break;\n            }\n          }\n        }\n      }\n  \n      if (this.hostname.length > hostnameMaxLen) {\n        this.hostname = '';\n      } else {\n        // hostnames are always lower case.\n        this.hostname = this.hostname.toLowerCase();\n      }\n  \n      if (!ipv6Hostname) {\n        // IDNA Support: Returns a puny coded representation of \"domain\".\n        // It only converts the part of the domain name that\n        // has non ASCII characters. I.e. it dosent matter if\n        // you call it with a domain that already is in ASCII.\n        var domainArray = this.hostname.split('.');\n        var newOut = [];\n        for (var i = 0; i < domainArray.length; ++i) {\n          var s = domainArray[i];\n          newOut.push(s.match(/[^A-Za-z0-9_-]/) ?\n              'xn--' + punycode.encode(s) : s);\n        }\n        this.hostname = newOut.join('.');\n      }\n  \n      var p = this.port ? ':' + this.port : '';\n      var h = this.hostname || '';\n      this.host = h + p;\n      this.href += this.host;\n  \n      // strip [ and ] from the hostname\n      // the host field still retains them, though\n      if (ipv6Hostname) {\n        this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n        if (rest[0] !== '/') {\n          rest = '/' + rest;\n        }\n      }\n    }\n  \n    // now rest is set to the post-host stuff.\n    // chop off any delim chars.\n    if (!unsafeProtocol[lowerProto]) {\n  \n      // First, make 100% sure that any \"autoEscape\" chars get\n      // escaped, even if encodeURIComponent doesn't think they\n      // need to be.\n      for (var i = 0, l = autoEscape.length; i < l; i++) {\n        var ae = autoEscape[i];\n        var esc = encodeURIComponent(ae);\n        if (esc === ae) {\n          esc = escape(ae);\n        }\n        rest = rest.split(ae).join(esc);\n      }\n    }\n  \n  \n    // chop off from the tail first.\n    var hash = rest.indexOf('#');\n    if (hash !== -1) {\n      // got a fragment string.\n      this.hash = rest.substr(hash);\n      rest = rest.slice(0, hash);\n    }\n    var qm = rest.indexOf('?');\n    if (qm !== -1) {\n      this.search = rest.substr(qm);\n      this.query = rest.substr(qm + 1);\n      if (parseQueryString) {\n        this.query = querystring.parse(this.query);\n      }\n      rest = rest.slice(0, qm);\n    } else if (parseQueryString) {\n      // no query string, but parseQueryString still requested\n      this.search = '';\n      this.query = {};\n    }\n    if (rest) this.pathname = rest;\n    if (slashedProtocol[lowerProto] &&\n        this.hostname && !this.pathname) {\n      this.pathname = '/';\n    }\n  \n    //to support http.request\n    if (this.pathname || this.search) {\n      var p = this.pathname || '';\n      var s = this.search || '';\n      this.path = p + s;\n    }\n  \n    // finally, reconstruct the href based on what has been validated.\n    this.href = this.format();\n    return this;\n  };\n  \n  // format a parsed object into a url string\n  function urlFormat(obj) {\n    // ensure it's an object, and not a string url.\n    // If it's an obj, this is a no-op.\n    // this way, you can call url_format() on strings\n    // to clean up potentially wonky urls.\n    if (isString(obj)) obj = urlParse(obj);\n    if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n    return obj.format();\n  }\n  \n  Url.prototype.format = function() {\n    var auth = this.auth || '';\n    if (auth) {\n      auth = encodeURIComponent(auth);\n      auth = auth.replace(/%3A/i, ':');\n      auth += '@';\n    }\n  \n    var protocol = this.protocol || '',\n        pathname = this.pathname || '',\n        hash = this.hash || '',\n        host = false,\n        query = '';\n  \n    if (this.host) {\n      host = auth + this.host;\n    } else if (this.hostname) {\n      host = auth + (this.hostname.indexOf(':') === -1 ?\n          this.hostname :\n          '[' + this.hostname + ']');\n      if (this.port) {\n        host += ':' + this.port;\n      }\n    }\n  \n    if (this.query &&\n        isObject(this.query) &&\n        Object.keys(this.query).length) {\n      query = querystring.stringify(this.query);\n    }\n  \n    var search = this.search || (query && ('?' + query)) || '';\n  \n    if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n  \n    // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n    // unless they had them to begin with.\n    if (this.slashes ||\n        (!protocol || slashedProtocol[protocol]) && host !== false) {\n      host = '//' + (host || '');\n      if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n    } else if (!host) {\n      host = '';\n    }\n  \n    if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n    if (search && search.charAt(0) !== '?') search = '?' + search;\n  \n    pathname = pathname.replace(/[?#]/g, function(match) {\n      return encodeURIComponent(match);\n    });\n    search = search.replace('#', '%23');\n  \n    return protocol + host + pathname + search + hash;\n  };\n  \n  function urlResolve(source, relative) {\n    return urlParse(source, false, true).resolve(relative);\n  }\n  \n  Url.prototype.resolve = function(relative) {\n    return this.resolveObject(urlParse(relative, false, true)).format();\n  };\n  \n  function urlResolveObject(source, relative) {\n    if (!source) return relative;\n    return urlParse(source, false, true).resolveObject(relative);\n  }\n  \n  Url.prototype.resolveObject = function(relative) {\n    if (isString(relative)) {\n      var rel = new Url();\n      rel.parse(relative, false, true);\n      relative = rel;\n    }\n  \n    var result = new Url();\n    Object.keys(this).forEach(function(k) {\n      result[k] = this[k];\n    }, this);\n  \n    // hash is always overridden, no matter what.\n    // even href=\"\" will remove it.\n    result.hash = relative.hash;\n  \n    // if the relative url is empty, then there's nothing left to do here.\n    if (relative.href === '') {\n      result.href = result.format();\n      return result;\n    }\n  \n    // hrefs like //foo/bar always cut to the protocol.\n    if (relative.slashes && !relative.protocol) {\n      // take everything except the protocol from relative\n      Object.keys(relative).forEach(function(k) {\n        if (k !== 'protocol')\n          result[k] = relative[k];\n      });\n  \n      //urlParse appends trailing / to urls like http://www.example.com\n      if (slashedProtocol[result.protocol] &&\n          result.hostname && !result.pathname) {\n        result.path = result.pathname = '/';\n      }\n  \n      result.href = result.format();\n      return result;\n    }\n  \n    if (relative.protocol && relative.protocol !== result.protocol) {\n      // if it's a known url protocol, then changing\n      // the protocol does weird things\n      // first, if it's not file:, then we MUST have a host,\n      // and if there was a path\n      // to begin with, then we MUST have a path.\n      // if it is file:, then the host is dropped,\n      // because that's known to be hostless.\n      // anything else is assumed to be absolute.\n      if (!slashedProtocol[relative.protocol]) {\n        Object.keys(relative).forEach(function(k) {\n          result[k] = relative[k];\n        });\n        result.href = result.format();\n        return result;\n      }\n  \n      result.protocol = relative.protocol;\n      if (!relative.host && !hostlessProtocol[relative.protocol]) {\n        var relPath = (relative.pathname || '').split('/');\n        while (relPath.length && !(relative.host = relPath.shift()));\n        if (!relative.host) relative.host = '';\n        if (!relative.hostname) relative.hostname = '';\n        if (relPath[0] !== '') relPath.unshift('');\n        if (relPath.length < 2) relPath.unshift('');\n        result.pathname = relPath.join('/');\n      } else {\n        result.pathname = relative.pathname;\n      }\n      result.search = relative.search;\n      result.query = relative.query;\n      result.host = relative.host || '';\n      result.auth = relative.auth;\n      result.hostname = relative.hostname || relative.host;\n      result.port = relative.port;\n      // to support http.request\n      if (result.pathname || result.search) {\n        var p = result.pathname || '';\n        var s = result.search || '';\n        result.path = p + s;\n      }\n      result.slashes = result.slashes || relative.slashes;\n      result.href = result.format();\n      return result;\n    }\n  \n    var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n        isRelAbs = (\n            relative.host ||\n            relative.pathname && relative.pathname.charAt(0) === '/'\n        ),\n        mustEndAbs = (isRelAbs || isSourceAbs ||\n                      (result.host && relative.pathname)),\n        removeAllDots = mustEndAbs,\n        srcPath = result.pathname && result.pathname.split('/') || [],\n        relPath = relative.pathname && relative.pathname.split('/') || [],\n        psychotic = result.protocol && !slashedProtocol[result.protocol];\n  \n    // if the url is a non-slashed url, then relative\n    // links like ../.. should be able\n    // to crawl up to the hostname, as well.  This is strange.\n    // result.protocol has already been set by now.\n    // Later on, put the first path part into the host field.\n    if (psychotic) {\n      result.hostname = '';\n      result.port = null;\n      if (result.host) {\n        if (srcPath[0] === '') srcPath[0] = result.host;\n        else srcPath.unshift(result.host);\n      }\n      result.host = '';\n      if (relative.protocol) {\n        relative.hostname = null;\n        relative.port = null;\n        if (relative.host) {\n          if (relPath[0] === '') relPath[0] = relative.host;\n          else relPath.unshift(relative.host);\n        }\n        relative.host = null;\n      }\n      mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n    }\n  \n    if (isRelAbs) {\n      // it's absolute.\n      result.host = (relative.host || relative.host === '') ?\n                    relative.host : result.host;\n      result.hostname = (relative.hostname || relative.hostname === '') ?\n                        relative.hostname : result.hostname;\n      result.search = relative.search;\n      result.query = relative.query;\n      srcPath = relPath;\n      // fall through to the dot-handling below.\n    } else if (relPath.length) {\n      // it's relative\n      // throw away the existing file, and take the new path instead.\n      if (!srcPath) srcPath = [];\n      srcPath.pop();\n      srcPath = srcPath.concat(relPath);\n      result.search = relative.search;\n      result.query = relative.query;\n    } else if (!isNullOrUndefined(relative.search)) {\n      // just pull out the search.\n      // like href='?foo'.\n      // Put this after the other two cases because it simplifies the booleans\n      if (psychotic) {\n        result.hostname = result.host = srcPath.shift();\n        //occationaly the auth can get stuck only in host\n        //this especialy happens in cases like\n        //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n        var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                         result.host.split('@') : false;\n        if (authInHost) {\n          result.auth = authInHost.shift();\n          result.host = result.hostname = authInHost.shift();\n        }\n      }\n      result.search = relative.search;\n      result.query = relative.query;\n      //to support http.request\n      if (!isNull(result.pathname) || !isNull(result.search)) {\n        result.path = (result.pathname ? result.pathname : '') +\n                      (result.search ? result.search : '');\n      }\n      result.href = result.format();\n      return result;\n    }\n  \n    if (!srcPath.length) {\n      // no path at all.  easy.\n      // we've already handled the other stuff above.\n      result.pathname = null;\n      //to support http.request\n      if (result.search) {\n        result.path = '/' + result.search;\n      } else {\n        result.path = null;\n      }\n      result.href = result.format();\n      return result;\n    }\n  \n    // if a url ENDs in . or .., then it must get a trailing slash.\n    // however, if it ends in anything else non-slashy,\n    // then it must NOT get a trailing slash.\n    var last = srcPath.slice(-1)[0];\n    var hasTrailingSlash = (\n        (result.host || relative.host) && (last === '.' || last === '..') ||\n        last === '');\n  \n    // strip single dots, resolve double dots to parent dir\n    // if the path tries to go above the root, `up` ends up > 0\n    var up = 0;\n    for (var i = srcPath.length; i >= 0; i--) {\n      last = srcPath[i];\n      if (last == '.') {\n        srcPath.splice(i, 1);\n      } else if (last === '..') {\n        srcPath.splice(i, 1);\n        up++;\n      } else if (up) {\n        srcPath.splice(i, 1);\n        up--;\n      }\n    }\n  \n    // if the path is allowed to go above the root, restore leading ..s\n    if (!mustEndAbs && !removeAllDots) {\n      for (; up--; up) {\n        srcPath.unshift('..');\n      }\n    }\n  \n    if (mustEndAbs && srcPath[0] !== '' &&\n        (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n      srcPath.unshift('');\n    }\n  \n    if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n      srcPath.push('');\n    }\n  \n    var isAbsolute = srcPath[0] === '' ||\n        (srcPath[0] && srcPath[0].charAt(0) === '/');\n  \n    // put the host back\n    if (psychotic) {\n      result.hostname = result.host = isAbsolute ? '' :\n                                      srcPath.length ? srcPath.shift() : '';\n      //occationaly the auth can get stuck only in host\n      //this especialy happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n  \n    mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n  \n    if (mustEndAbs && !isAbsolute) {\n      srcPath.unshift('');\n    }\n  \n    if (!srcPath.length) {\n      result.pathname = null;\n      result.path = null;\n    } else {\n      result.pathname = srcPath.join('/');\n    }\n  \n    //to support request.http\n    if (!isNull(result.pathname) || !isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.auth = relative.auth || result.auth;\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  };\n  \n  Url.prototype.parseHost = function() {\n    var host = this.host;\n    var port = portPattern.exec(host);\n    if (port) {\n      port = port[0];\n      if (port !== ':') {\n        this.port = port.substr(1);\n      }\n      host = host.substr(0, host.length - port.length);\n    }\n    if (host) this.hostname = host;\n  };\n  \n  function isString(arg) {\n    return typeof arg === \"string\";\n  }\n  \n  function isObject(arg) {\n    return typeof arg === 'object' && arg !== null;\n  }\n  \n  function isNull(arg) {\n    return arg === null;\n  }\n  function isNullOrUndefined(arg) {\n    return  arg == null;\n  }\n  \n  },{\"punycode\":86,\"querystring\":89}],95:[function(require,module,exports){\n  if (typeof Object.create === 'function') {\n    // implementation from standard node.js 'util' module\n    module.exports = function inherits(ctor, superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n    };\n  } else {\n    // old school shim for old browsers\n    module.exports = function inherits(ctor, superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n  \n  },{}],96:[function(require,module,exports){\n  module.exports = function isBuffer(arg) {\n    return arg && typeof arg === 'object'\n      && typeof arg.copy === 'function'\n      && typeof arg.fill === 'function'\n      && typeof arg.readUInt8 === 'function';\n  }\n  },{}],97:[function(require,module,exports){\n  (function (process,global){\n  // Copyright Joyent, Inc. and other Node contributors.\n  //\n  // Permission is hereby granted, free of charge, to any person obtaining a\n  // copy of this software and associated documentation files (the\n  // \"Software\"), to deal in the Software without restriction, including\n  // without limitation the rights to use, copy, modify, merge, publish,\n  // distribute, sublicense, and/or sell copies of the Software, and to permit\n  // persons to whom the Software is furnished to do so, subject to the\n  // following conditions:\n  //\n  // The above copyright notice and this permission notice shall be included\n  // in all copies or substantial portions of the Software.\n  //\n  // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n  // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n  // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n  // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n  // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n  // USE OR OTHER DEALINGS IN THE SOFTWARE.\n  \n  var formatRegExp = /%[sdj%]/g;\n  exports.format = function(f) {\n    if (!isString(f)) {\n      var objects = [];\n      for (var i = 0; i < arguments.length; i++) {\n        objects.push(inspect(arguments[i]));\n      }\n      return objects.join(' ');\n    }\n  \n    var i = 1;\n    var args = arguments;\n    var len = args.length;\n    var str = String(f).replace(formatRegExp, function(x) {\n      if (x === '%%') return '%';\n      if (i >= len) return x;\n      switch (x) {\n        case '%s': return String(args[i++]);\n        case '%d': return Number(args[i++]);\n        case '%j':\n          try {\n            return JSON.stringify(args[i++]);\n          } catch (_) {\n            return '[Circular]';\n          }\n        default:\n          return x;\n      }\n    });\n    for (var x = args[i]; i < len; x = args[++i]) {\n      if (isNull(x) || !isObject(x)) {\n        str += ' ' + x;\n      } else {\n        str += ' ' + inspect(x);\n      }\n    }\n    return str;\n  };\n  \n  \n  // Mark that a method should not be used.\n  // Returns a modified function which warns once by default.\n  // If --no-deprecation is set, then it is a no-op.\n  exports.deprecate = function(fn, msg) {\n    // Allow for deprecating things in the process of starting up.\n    if (isUndefined(global.process)) {\n      return function() {\n        return exports.deprecate(fn, msg).apply(this, arguments);\n      };\n    }\n  \n    if (process.noDeprecation === true) {\n      return fn;\n    }\n  \n    var warned = false;\n    function deprecated() {\n      if (!warned) {\n        if (process.throwDeprecation) {\n          throw new Error(msg);\n        } else if (process.traceDeprecation) {\n          console.trace(msg);\n        } else {\n          console.error(msg);\n        }\n        warned = true;\n      }\n      return fn.apply(this, arguments);\n    }\n  \n    return deprecated;\n  };\n  \n  \n  var debugs = {};\n  var debugEnviron;\n  exports.debuglog = function(set) {\n    if (isUndefined(debugEnviron))\n      debugEnviron = process.env.NODE_DEBUG || '';\n    set = set.toUpperCase();\n    if (!debugs[set]) {\n      if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n        var pid = process.pid;\n        debugs[set] = function() {\n          var msg = exports.format.apply(exports, arguments);\n          console.error('%s %d: %s', set, pid, msg);\n        };\n      } else {\n        debugs[set] = function() {};\n      }\n    }\n    return debugs[set];\n  };\n  \n  \n  /**\n   * Echos the value of a value. Trys to print the value out\n   * in the best way possible given the different types.\n   *\n   * @param {Object} obj The object to print out.\n   * @param {Object} opts Optional options object that alters the output.\n   */\n  /* legacy: obj, showHidden, depth, colors*/\n  function inspect(obj, opts) {\n    // default options\n    var ctx = {\n      seen: [],\n      stylize: stylizeNoColor\n    };\n    // legacy...\n    if (arguments.length >= 3) ctx.depth = arguments[2];\n    if (arguments.length >= 4) ctx.colors = arguments[3];\n    if (isBoolean(opts)) {\n      // legacy...\n      ctx.showHidden = opts;\n    } else if (opts) {\n      // got an \"options\" object\n      exports._extend(ctx, opts);\n    }\n    // set default options\n    if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n    if (isUndefined(ctx.depth)) ctx.depth = 2;\n    if (isUndefined(ctx.colors)) ctx.colors = false;\n    if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n    if (ctx.colors) ctx.stylize = stylizeWithColor;\n    return formatValue(ctx, obj, ctx.depth);\n  }\n  exports.inspect = inspect;\n  \n  \n  // http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\n  inspect.colors = {\n    'bold' : [1, 22],\n    'italic' : [3, 23],\n    'underline' : [4, 24],\n    'inverse' : [7, 27],\n    'white' : [37, 39],\n    'grey' : [90, 39],\n    'black' : [30, 39],\n    'blue' : [34, 39],\n    'cyan' : [36, 39],\n    'green' : [32, 39],\n    'magenta' : [35, 39],\n    'red' : [31, 39],\n    'yellow' : [33, 39]\n  };\n  \n  // Don't use 'blue' not visible on cmd.exe\n  inspect.styles = {\n    'special': 'cyan',\n    'number': 'yellow',\n    'boolean': 'yellow',\n    'undefined': 'grey',\n    'null': 'bold',\n    'string': 'green',\n    'date': 'magenta',\n    // \"name\": intentionally not styling\n    'regexp': 'red'\n  };\n  \n  \n  function stylizeWithColor(str, styleType) {\n    var style = inspect.styles[styleType];\n  \n    if (style) {\n      return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n             '\\u001b[' + inspect.colors[style][1] + 'm';\n    } else {\n      return str;\n    }\n  }\n  \n  \n  function stylizeNoColor(str, styleType) {\n    return str;\n  }\n  \n  \n  function arrayToHash(array) {\n    var hash = {};\n  \n    array.forEach(function(val, idx) {\n      hash[val] = true;\n    });\n  \n    return hash;\n  }\n  \n  \n  function formatValue(ctx, value, recurseTimes) {\n    // Provide a hook for user-specified inspect functions.\n    // Check that value is an object with an inspect function on it\n    if (ctx.customInspect &&\n        value &&\n        isFunction(value.inspect) &&\n        // Filter out the util module, it's inspect function is special\n        value.inspect !== exports.inspect &&\n        // Also filter out any prototype objects using the circular check.\n        !(value.constructor && value.constructor.prototype === value)) {\n      var ret = value.inspect(recurseTimes, ctx);\n      if (!isString(ret)) {\n        ret = formatValue(ctx, ret, recurseTimes);\n      }\n      return ret;\n    }\n  \n    // Primitive types cannot have properties\n    var primitive = formatPrimitive(ctx, value);\n    if (primitive) {\n      return primitive;\n    }\n  \n    // Look up the keys of the object.\n    var keys = Object.keys(value);\n    var visibleKeys = arrayToHash(keys);\n  \n    if (ctx.showHidden) {\n      keys = Object.getOwnPropertyNames(value);\n    }\n  \n    // IE doesn't make error fields non-enumerable\n    // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n    if (isError(value)\n        && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n      return formatError(value);\n    }\n  \n    // Some type of object without properties can be shortcutted.\n    if (keys.length === 0) {\n      if (isFunction(value)) {\n        var name = value.name ? ': ' + value.name : '';\n        return ctx.stylize('[Function' + name + ']', 'special');\n      }\n      if (isRegExp(value)) {\n        return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n      }\n      if (isDate(value)) {\n        return ctx.stylize(Date.prototype.toString.call(value), 'date');\n      }\n      if (isError(value)) {\n        return formatError(value);\n      }\n    }\n  \n    var base = '', array = false, braces = ['{', '}'];\n  \n    // Make Array say that they are Array\n    if (isArray(value)) {\n      array = true;\n      braces = ['[', ']'];\n    }\n  \n    // Make functions say that they are functions\n    if (isFunction(value)) {\n      var n = value.name ? ': ' + value.name : '';\n      base = ' [Function' + n + ']';\n    }\n  \n    // Make RegExps say that they are RegExps\n    if (isRegExp(value)) {\n      base = ' ' + RegExp.prototype.toString.call(value);\n    }\n  \n    // Make dates with properties first say the date\n    if (isDate(value)) {\n      base = ' ' + Date.prototype.toUTCString.call(value);\n    }\n  \n    // Make error with message first say the error\n    if (isError(value)) {\n      base = ' ' + formatError(value);\n    }\n  \n    if (keys.length === 0 && (!array || value.length == 0)) {\n      return braces[0] + base + braces[1];\n    }\n  \n    if (recurseTimes < 0) {\n      if (isRegExp(value)) {\n        return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n      } else {\n        return ctx.stylize('[Object]', 'special');\n      }\n    }\n  \n    ctx.seen.push(value);\n  \n    var output;\n    if (array) {\n      output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n    } else {\n      output = keys.map(function(key) {\n        return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n      });\n    }\n  \n    ctx.seen.pop();\n  \n    return reduceToSingleString(output, base, braces);\n  }\n  \n  \n  function formatPrimitive(ctx, value) {\n    if (isUndefined(value))\n      return ctx.stylize('undefined', 'undefined');\n    if (isString(value)) {\n      var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                               .replace(/'/g, \"\\\\'\")\n                                               .replace(/\\\\\"/g, '\"') + '\\'';\n      return ctx.stylize(simple, 'string');\n    }\n    if (isNumber(value))\n      return ctx.stylize('' + value, 'number');\n    if (isBoolean(value))\n      return ctx.stylize('' + value, 'boolean');\n    // For some reason typeof null is \"object\", so special case here.\n    if (isNull(value))\n      return ctx.stylize('null', 'null');\n  }\n  \n  \n  function formatError(value) {\n    return '[' + Error.prototype.toString.call(value) + ']';\n  }\n  \n  \n  function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n    var output = [];\n    for (var i = 0, l = value.length; i < l; ++i) {\n      if (hasOwnProperty(value, String(i))) {\n        output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n            String(i), true));\n      } else {\n        output.push('');\n      }\n    }\n    keys.forEach(function(key) {\n      if (!key.match(/^\\d+$/)) {\n        output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n            key, true));\n      }\n    });\n    return output;\n  }\n  \n  \n  function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n    var name, str, desc;\n    desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n    if (desc.get) {\n      if (desc.set) {\n        str = ctx.stylize('[Getter/Setter]', 'special');\n      } else {\n        str = ctx.stylize('[Getter]', 'special');\n      }\n    } else {\n      if (desc.set) {\n        str = ctx.stylize('[Setter]', 'special');\n      }\n    }\n    if (!hasOwnProperty(visibleKeys, key)) {\n      name = '[' + key + ']';\n    }\n    if (!str) {\n      if (ctx.seen.indexOf(desc.value) < 0) {\n        if (isNull(recurseTimes)) {\n          str = formatValue(ctx, desc.value, null);\n        } else {\n          str = formatValue(ctx, desc.value, recurseTimes - 1);\n        }\n        if (str.indexOf('\\n') > -1) {\n          if (array) {\n            str = str.split('\\n').map(function(line) {\n              return '  ' + line;\n            }).join('\\n').substr(2);\n          } else {\n            str = '\\n' + str.split('\\n').map(function(line) {\n              return '   ' + line;\n            }).join('\\n');\n          }\n        }\n      } else {\n        str = ctx.stylize('[Circular]', 'special');\n      }\n    }\n    if (isUndefined(name)) {\n      if (array && key.match(/^\\d+$/)) {\n        return str;\n      }\n      name = JSON.stringify('' + key);\n      if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n        name = name.substr(1, name.length - 2);\n        name = ctx.stylize(name, 'name');\n      } else {\n        name = name.replace(/'/g, \"\\\\'\")\n                   .replace(/\\\\\"/g, '\"')\n                   .replace(/(^\"|\"$)/g, \"'\");\n        name = ctx.stylize(name, 'string');\n      }\n    }\n  \n    return name + ': ' + str;\n  }\n  \n  \n  function reduceToSingleString(output, base, braces) {\n    var numLinesEst = 0;\n    var length = output.reduce(function(prev, cur) {\n      numLinesEst++;\n      if (cur.indexOf('\\n') >= 0) numLinesEst++;\n      return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n    }, 0);\n  \n    if (length > 60) {\n      return braces[0] +\n             (base === '' ? '' : base + '\\n ') +\n             ' ' +\n             output.join(',\\n  ') +\n             ' ' +\n             braces[1];\n    }\n  \n    return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n  }\n  \n  \n  // NOTE: These type checking functions intentionally don't use `instanceof`\n  // because it is fragile and can be easily faked with `Object.create()`.\n  function isArray(ar) {\n    return Array.isArray(ar);\n  }\n  exports.isArray = isArray;\n  \n  function isBoolean(arg) {\n    return typeof arg === 'boolean';\n  }\n  exports.isBoolean = isBoolean;\n  \n  function isNull(arg) {\n    return arg === null;\n  }\n  exports.isNull = isNull;\n  \n  function isNullOrUndefined(arg) {\n    return arg == null;\n  }\n  exports.isNullOrUndefined = isNullOrUndefined;\n  \n  function isNumber(arg) {\n    return typeof arg === 'number';\n  }\n  exports.isNumber = isNumber;\n  \n  function isString(arg) {\n    return typeof arg === 'string';\n  }\n  exports.isString = isString;\n  \n  function isSymbol(arg) {\n    return typeof arg === 'symbol';\n  }\n  exports.isSymbol = isSymbol;\n  \n  function isUndefined(arg) {\n    return arg === void 0;\n  }\n  exports.isUndefined = isUndefined;\n  \n  function isRegExp(re) {\n    return isObject(re) && objectToString(re) === '[object RegExp]';\n  }\n  exports.isRegExp = isRegExp;\n  \n  function isObject(arg) {\n    return typeof arg === 'object' && arg !== null;\n  }\n  exports.isObject = isObject;\n  \n  function isDate(d) {\n    return isObject(d) && objectToString(d) === '[object Date]';\n  }\n  exports.isDate = isDate;\n  \n  function isError(e) {\n    return isObject(e) &&\n        (objectToString(e) === '[object Error]' || e instanceof Error);\n  }\n  exports.isError = isError;\n  \n  function isFunction(arg) {\n    return typeof arg === 'function';\n  }\n  exports.isFunction = isFunction;\n  \n  function isPrimitive(arg) {\n    return arg === null ||\n           typeof arg === 'boolean' ||\n           typeof arg === 'number' ||\n           typeof arg === 'string' ||\n           typeof arg === 'symbol' ||  // ES6 symbol\n           typeof arg === 'undefined';\n  }\n  exports.isPrimitive = isPrimitive;\n  \n  exports.isBuffer = require('./support/isBuffer');\n  \n  function objectToString(o) {\n    return Object.prototype.toString.call(o);\n  }\n  \n  \n  function pad(n) {\n    return n < 10 ? '0' + n.toString(10) : n.toString(10);\n  }\n  \n  \n  var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n                'Oct', 'Nov', 'Dec'];\n  \n  // 26 Feb 16:19:34\n  function timestamp() {\n    var d = new Date();\n    var time = [pad(d.getHours()),\n                pad(d.getMinutes()),\n                pad(d.getSeconds())].join(':');\n    return [d.getDate(), months[d.getMonth()], time].join(' ');\n  }\n  \n  \n  // log is just a thin wrapper to console.log that prepends a timestamp\n  exports.log = function() {\n    console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n  };\n  \n  \n  /**\n   * Inherit the prototype methods from one constructor into another.\n   *\n   * The Function.prototype.inherits from lang.js rewritten as a standalone\n   * function (not on Function.prototype). NOTE: If this file is to be loaded\n   * during bootstrapping this function needs to be rewritten using some native\n   * functions as prototype setup using normal JavaScript does not work as\n   * expected during bootstrapping (see mirror.js in r114903).\n   *\n   * @param {function} ctor Constructor function which needs to inherit the\n   *     prototype.\n   * @param {function} superCtor Constructor function to inherit prototype from.\n   */\n  exports.inherits = require('inherits');\n  \n  exports._extend = function(origin, add) {\n    // Don't do anything if add isn't an object\n    if (!add || !isObject(add)) return origin;\n  \n    var keys = Object.keys(add);\n    var i = keys.length;\n    while (i--) {\n      origin[keys[i]] = add[keys[i]];\n    }\n    return origin;\n  };\n  \n  function hasOwnProperty(obj, prop) {\n    return Object.prototype.hasOwnProperty.call(obj, prop);\n  }\n  \n  }).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n  },{\"./support/isBuffer\":96,\"_process\":85,\"inherits\":95}],98:[function(require,module,exports){\n  var v1 = require('./v1');\n  var v4 = require('./v4');\n  \n  var uuid = v4;\n  uuid.v1 = v1;\n  uuid.v4 = v4;\n  \n  module.exports = uuid;\n  \n  },{\"./v1\":101,\"./v4\":102}],99:[function(require,module,exports){\n  /**\n   * Convert array of 16 byte values to UUID string format of the form:\n   * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n   */\n  var byteToHex = [];\n  for (var i = 0; i < 256; ++i) {\n    byteToHex[i] = (i + 0x100).toString(16).substr(1);\n  }\n  \n  function bytesToUuid(buf, offset) {\n    var i = offset || 0;\n    var bth = byteToHex;\n    // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n    return ([bth[buf[i++]], bth[buf[i++]], \n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]]).join('');\n  }\n  \n  module.exports = bytesToUuid;\n  \n  },{}],100:[function(require,module,exports){\n  // Unique ID creation requires a high quality random # generator.  In the\n  // browser this is a little complicated due to unknown quality of Math.random()\n  // and inconsistent support for the `crypto` API.  We do the best we can via\n  // feature-detection\n  \n  // getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n  // implementation. Also, find the complete implementation of crypto on IE11.\n  var getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                        (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n  \n  if (getRandomValues) {\n    // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n    var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n  \n    module.exports = function whatwgRNG() {\n      getRandomValues(rnds8);\n      return rnds8;\n    };\n  } else {\n    // Math.random()-based (RNG)\n    //\n    // If all else fails, use Math.random().  It's fast, but is of unspecified\n    // quality.\n    var rnds = new Array(16);\n  \n    module.exports = function mathRNG() {\n      for (var i = 0, r; i < 16; i++) {\n        if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n        rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n      }\n  \n      return rnds;\n    };\n  }\n  \n  },{}],101:[function(require,module,exports){\n  var rng = require('./lib/rng');\n  var bytesToUuid = require('./lib/bytesToUuid');\n  \n  // **`v1()` - Generate time-based UUID**\n  //\n  // Inspired by https://github.com/LiosK/UUID.js\n  // and http://docs.python.org/library/uuid.html\n  \n  var _nodeId;\n  var _clockseq;\n  \n  // Previous uuid creation time\n  var _lastMSecs = 0;\n  var _lastNSecs = 0;\n  \n  // See https://github.com/broofa/node-uuid for API details\n  function v1(options, buf, offset) {\n    var i = buf && offset || 0;\n    var b = buf || [];\n  \n    options = options || {};\n    var node = options.node || _nodeId;\n    var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n  \n    // node and clockseq need to be initialized to random values if they're not\n    // specified.  We do this lazily to minimize issues related to insufficient\n    // system entropy.  See #189\n    if (node == null || clockseq == null) {\n      var seedBytes = rng();\n      if (node == null) {\n        // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n        node = _nodeId = [\n          seedBytes[0] | 0x01,\n          seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n        ];\n      }\n      if (clockseq == null) {\n        // Per 4.2.2, randomize (14 bit) clockseq\n        clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n      }\n    }\n  \n    // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n    // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n    // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n    // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n    var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n  \n    // Per 4.2.1.2, use count of uuid's generated during the current clock\n    // cycle to simulate higher resolution clock\n    var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n  \n    // Time since last uuid creation (in msecs)\n    var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n  \n    // Per 4.2.1.2, Bump clockseq on clock regression\n    if (dt < 0 && options.clockseq === undefined) {\n      clockseq = clockseq + 1 & 0x3fff;\n    }\n  \n    // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n    // time interval\n    if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n      nsecs = 0;\n    }\n  \n    // Per 4.2.1.2 Throw error if too many uuids are requested\n    if (nsecs >= 10000) {\n      throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n    }\n  \n    _lastMSecs = msecs;\n    _lastNSecs = nsecs;\n    _clockseq = clockseq;\n  \n    // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n    msecs += 12219292800000;\n  \n    // `time_low`\n    var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n    b[i++] = tl >>> 24 & 0xff;\n    b[i++] = tl >>> 16 & 0xff;\n    b[i++] = tl >>> 8 & 0xff;\n    b[i++] = tl & 0xff;\n  \n    // `time_mid`\n    var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n    b[i++] = tmh >>> 8 & 0xff;\n    b[i++] = tmh & 0xff;\n  \n    // `time_high_and_version`\n    b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n    b[i++] = tmh >>> 16 & 0xff;\n  \n    // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n    b[i++] = clockseq >>> 8 | 0x80;\n  \n    // `clock_seq_low`\n    b[i++] = clockseq & 0xff;\n  \n    // `node`\n    for (var n = 0; n < 6; ++n) {\n      b[i + n] = node[n];\n    }\n  \n    return buf ? buf : bytesToUuid(b);\n  }\n  \n  module.exports = v1;\n  \n  },{\"./lib/bytesToUuid\":99,\"./lib/rng\":100}],102:[function(require,module,exports){\n  var rng = require('./lib/rng');\n  var bytesToUuid = require('./lib/bytesToUuid');\n  \n  function v4(options, buf, offset) {\n    var i = buf && offset || 0;\n  \n    if (typeof(options) == 'string') {\n      buf = options === 'binary' ? new Array(16) : null;\n      options = null;\n    }\n    options = options || {};\n  \n    var rnds = options.random || (options.rng || rng)();\n  \n    // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n  \n    // Copy bytes to buffer, if provided\n    if (buf) {\n      for (var ii = 0; ii < 16; ++ii) {\n        buf[i + ii] = rnds[ii];\n      }\n    }\n  \n    return buf || bytesToUuid(rnds);\n  }\n  \n  module.exports = v4;\n  \n  },{\"./lib/bytesToUuid\":99,\"./lib/rng\":100}],103:[function(require,module,exports){\n  \"use strict\";\n  Object.defineProperty(exports, \"__esModule\", { value: true });\n  var LRU_1 = require(\"./utils/LRU\");\n  var CACHE_SIZE = 1000;\n  /**\n   * Inspired node-lru-cache[https://github.com/isaacs/node-lru-cache]\n   */\n  var EndpointCache = /** @class */ (function () {\n      function EndpointCache(maxSize) {\n          if (maxSize === void 0) { maxSize = CACHE_SIZE; }\n          this.maxSize = maxSize;\n          this.cache = new LRU_1.LRUCache(maxSize);\n      }\n      ;\n      Object.defineProperty(EndpointCache.prototype, \"size\", {\n          get: function () {\n              return this.cache.length;\n          },\n          enumerable: true,\n          configurable: true\n      });\n      EndpointCache.prototype.put = function (key, value) {\n        var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n          var endpointRecord = this.populateValue(value);\n          this.cache.put(keyString, endpointRecord);\n      };\n      EndpointCache.prototype.get = function (key) {\n        var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n          var now = Date.now();\n          var records = this.cache.get(keyString);\n          if (records) {\n              for (var i = 0; i < records.length; i++) {\n                  var record = records[i];\n                  if (record.Expire < now) {\n                      this.cache.remove(keyString);\n                      return undefined;\n                  }\n              }\n          }\n          return records;\n      };\n      EndpointCache.getKeyString = function (key) {\n          var identifiers = [];\n          var identifierNames = Object.keys(key).sort();\n          for (var i = 0; i < identifierNames.length; i++) {\n              var identifierName = identifierNames[i];\n              if (key[identifierName] === undefined)\n                  continue;\n              identifiers.push(key[identifierName]);\n          }\n          return identifiers.join(' ');\n      };\n      EndpointCache.prototype.populateValue = function (endpoints) {\n          var now = Date.now();\n          return endpoints.map(function (endpoint) { return ({\n              Address: endpoint.Address || '',\n              Expire: now + (endpoint.CachePeriodInMinutes || 1) * 60 * 1000\n          }); });\n      };\n      EndpointCache.prototype.empty = function () {\n          this.cache.empty();\n      };\n      EndpointCache.prototype.remove = function (key) {\n        var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n          this.cache.remove(keyString);\n      };\n      return EndpointCache;\n  }());\n  exports.EndpointCache = EndpointCache;\n  },{\"./utils/LRU\":104}],104:[function(require,module,exports){\n  \"use strict\";\n  Object.defineProperty(exports, \"__esModule\", { value: true });\n  var LinkedListNode = /** @class */ (function () {\n      function LinkedListNode(key, value) {\n          this.key = key;\n          this.value = value;\n      }\n      return LinkedListNode;\n  }());\n  var LRUCache = /** @class */ (function () {\n      function LRUCache(size) {\n          this.nodeMap = {};\n          this.size = 0;\n          if (typeof size !== 'number' || size < 1) {\n              throw new Error('Cache size can only be positive number');\n          }\n          this.sizeLimit = size;\n      }\n      Object.defineProperty(LRUCache.prototype, \"length\", {\n          get: function () {\n              return this.size;\n          },\n          enumerable: true,\n          configurable: true\n      });\n      LRUCache.prototype.prependToList = function (node) {\n          if (!this.headerNode) {\n              this.tailNode = node;\n          }\n          else {\n              this.headerNode.prev = node;\n              node.next = this.headerNode;\n          }\n          this.headerNode = node;\n          this.size++;\n      };\n      LRUCache.prototype.removeFromTail = function () {\n          if (!this.tailNode) {\n              return undefined;\n          }\n          var node = this.tailNode;\n          var prevNode = node.prev;\n          if (prevNode) {\n              prevNode.next = undefined;\n          }\n          node.prev = undefined;\n          this.tailNode = prevNode;\n          this.size--;\n          return node;\n      };\n      LRUCache.prototype.detachFromList = function (node) {\n          if (this.headerNode === node) {\n              this.headerNode = node.next;\n          }\n          if (this.tailNode === node) {\n              this.tailNode = node.prev;\n          }\n          if (node.prev) {\n              node.prev.next = node.next;\n          }\n          if (node.next) {\n              node.next.prev = node.prev;\n          }\n          node.next = undefined;\n          node.prev = undefined;\n          this.size--;\n      };\n      LRUCache.prototype.get = function (key) {\n          if (this.nodeMap[key]) {\n              var node = this.nodeMap[key];\n              this.detachFromList(node);\n              this.prependToList(node);\n              return node.value;\n          }\n      };\n      LRUCache.prototype.remove = function (key) {\n          if (this.nodeMap[key]) {\n              var node = this.nodeMap[key];\n              this.detachFromList(node);\n              delete this.nodeMap[key];\n          }\n      };\n      LRUCache.prototype.put = function (key, value) {\n          if (this.nodeMap[key]) {\n              this.remove(key);\n          }\n          else if (this.size === this.sizeLimit) {\n              var tailNode = this.removeFromTail();\n              var key_1 = tailNode.key;\n              delete this.nodeMap[key_1];\n          }\n          var newNode = new LinkedListNode(key, value);\n          this.nodeMap[key] = newNode;\n          this.prependToList(newNode);\n      };\n      LRUCache.prototype.empty = function () {\n          var keys = Object.keys(this.nodeMap);\n          for (var i = 0; i < keys.length; i++) {\n              var key = keys[i];\n              var node = this.nodeMap[key];\n              this.detachFromList(node);\n              delete this.nodeMap[key];\n          }\n      };\n      return LRUCache;\n  }());\n  exports.LRUCache = LRUCache;\n  },{}],105:[function(require,module,exports){\n  // AWS SDK for JavaScript v2.553.0\n  // Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n  // License at https://sdk.amazonaws.com/js/BUNDLE_LICENSE.txt\n  require('./browser_loader');\n  \n  var AWS = require('./core');\n  \n  if (typeof window !== 'undefined') window.AWS = AWS;\n  if (typeof module !== 'undefined') {\n      /**\n       * @api private\n       */\n      module.exports = AWS;\n  }\n  if (typeof self !== 'undefined') self.AWS = AWS;\n  \n  /**\n   * @private\n   * DO NOT REMOVE\n   * browser builder will strip out this line if services are supplied on the command line.\n   */if (!Object.prototype.hasOwnProperty.call(AWS, 'Connect')) {\n    AWS.apiLoader.services['connect'] = {};\n    AWS.Connect = AWS.Service.defineService('connect', [ '2017-02-15' ]);\n  }\n  AWS.apiLoader.services['connect']['2017-02-15'] = require('../apis/connect-2017-02-15.min');\n  \n  if (!Object.prototype.hasOwnProperty.call(AWS, 'STS')) {\n    AWS.apiLoader.services['sts'] = {};\n    AWS.STS = AWS.Service.defineService('sts', [ '2011-06-15' ]);\n    require('./services/sts');\n  }\n  AWS.apiLoader.services['sts']['2011-06-15'] = require('../apis/sts-2011-06-15.min');\n  \n  \n  },{\"../apis/connect-2017-02-15.min\":3,\"../apis/sts-2011-06-15.min\":5,\"./browser_loader\":16,\"./core\":18,\"./services/sts\":61}]},{},[105]);\n  \n  \n/*! @license sprintf.js | Copyright (c) 2007-2013 Alexandru Marasteanu <hello at alexei dot ro> | 3 clause BSD license */\n\n(function() {\n   var ctx = this;\n\n\tvar sprintf = function() {\n\t\tif (!sprintf.cache.hasOwnProperty(arguments[0])) {\n\t\t\tsprintf.cache[arguments[0]] = sprintf.parse(arguments[0]);\n\t\t}\n\t\treturn sprintf.format.call(null, sprintf.cache[arguments[0]], arguments);\n\t};\n\n\tsprintf.format = function(parse_tree, argv) {\n\t\tvar cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;\n\t\tfor (i = 0; i < tree_length; i++) {\n\t\t\tnode_type = get_type(parse_tree[i]);\n\t\t\tif (node_type === 'string') {\n\t\t\t\toutput.push(parse_tree[i]);\n\t\t\t}\n\t\t\telse if (node_type === 'array') {\n\t\t\t\tmatch = parse_tree[i]; // convenience purposes only\n\t\t\t\tif (match[2]) { // keyword argument\n\t\t\t\t\targ = argv[cursor];\n\t\t\t\t\tfor (k = 0; k < match[2].length; k++) {\n\t\t\t\t\t\tif (!arg.hasOwnProperty(match[2][k])) {\n\t\t\t\t\t\t\tthrow(sprintf('[sprintf] property \"%s\" does not exist', match[2][k]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\targ = arg[match[2][k]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (match[1]) { // positional argument (explicit)\n\t\t\t\t\targ = argv[match[1]];\n\t\t\t\t}\n\t\t\t\telse { // positional argument (implicit)\n\t\t\t\t\targ = argv[cursor++];\n\t\t\t\t}\n\n\t\t\t\tif (/[^s]/.test(match[8]) && (get_type(arg) != 'number')) {\n\t\t\t\t\tthrow(sprintf('[sprintf] expecting number but found %s', get_type(arg)));\n\t\t\t\t}\n\t\t\t\tswitch (match[8]) {\n\t\t\t\t\tcase 'b': arg = arg.toString(2); break;\n\t\t\t\t\tcase 'c': arg = String.fromCharCode(arg); break;\n\t\t\t\t\tcase 'd': arg = parseInt(arg, 10); break;\n\t\t\t\t\tcase 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\n\t\t\t\t\tcase 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\n\t\t\t\t\tcase 'o': arg = arg.toString(8); break;\n\t\t\t\t\tcase 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;\n\t\t\t\t\tcase 'u': arg = arg >>> 0; break;\n\t\t\t\t\tcase 'x': arg = arg.toString(16); break;\n\t\t\t\t\tcase 'X': arg = arg.toString(16).toUpperCase(); break;\n\t\t\t\t}\n\t\t\t\targ = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);\n\t\t\t\tpad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\n\t\t\t\tpad_length = match[6] - String(arg).length;\n\t\t\t\tpad = match[6] ? str_repeat(pad_character, pad_length) : '';\n\t\t\t\toutput.push(match[5] ? arg + pad : pad + arg);\n\t\t\t}\n\t\t}\n\t\treturn output.join('');\n\t};\n\n\tsprintf.cache = {};\n\n\tsprintf.parse = function(fmt) {\n\t\tvar _fmt = fmt, match = [], parse_tree = [], arg_names = 0;\n\t\twhile (_fmt) {\n\t\t\tif ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\n\t\t\t\tparse_tree.push(match[0]);\n\t\t\t}\n\t\t\telse if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\n\t\t\t\tparse_tree.push('%');\n\t\t\t}\n\t\t\telse if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\n\t\t\t\tif (match[2]) {\n\t\t\t\t\targ_names |= 1;\n\t\t\t\t\tvar field_list = [], replacement_field = match[2], field_match = [];\n\t\t\t\t\tif ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n\t\t\t\t\t\tfield_list.push(field_match[1]);\n\t\t\t\t\t\twhile ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\n\t\t\t\t\t\t\tif ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n\t\t\t\t\t\t\t\tfield_list.push(field_match[1]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\n\t\t\t\t\t\t\t\tfield_list.push(field_match[1]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tthrow('[sprintf] huh?');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthrow('[sprintf] huh?');\n\t\t\t\t\t}\n\t\t\t\t\tmatch[2] = field_list;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\targ_names |= 2;\n\t\t\t\t}\n\t\t\t\tif (arg_names === 3) {\n\t\t\t\t\tthrow('[sprintf] mixing positional and named placeholders is not (yet) supported');\n\t\t\t\t}\n\t\t\t\tparse_tree.push(match);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthrow('[sprintf] huh?');\n\t\t\t}\n\t\t\t_fmt = _fmt.substring(match[0].length);\n\t\t}\n\t\treturn parse_tree;\n\t};\n\n\tvar vsprintf = function(fmt, argv, _argv) {\n\t\t_argv = argv.slice(0);\n\t\t_argv.splice(0, 0, fmt);\n\t\treturn sprintf.apply(null, _argv);\n\t};\n\n\t/**\n\t * helpers\n\t */\n\tfunction get_type(variable) {\n\t\treturn Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();\n\t}\n\n\tfunction str_repeat(input, multiplier) {\n\t\tfor (var output = []; multiplier > 0; output[--multiplier] = input) {/* do nothing */}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * export to either browser or node.js\n\t */\n\tctx.sprintf = sprintf;\n\tctx.vsprintf = vsprintf;\n})();\n\n\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n\n  // How frequently softphone logs should be collected and reported to shared worker.\n  var SOFTPHONE_LOG_REPORT_INTERVAL_MILLIS = 5000;\n\n  // How frequently logs should be collected and sent downstream\n  var LOGS_REPORT_INTERVAL_MILLIS = 5000;\n\n  // The default log roll interval (30min)\n  var DEFAULT_LOG_ROLL_INTERVAL = 1800000;\n\n  /**\n   * An enumeration of common logging levels.\n   */\n  var LogLevel = {\n    TEST: \"TEST\",\n    TRACE: \"TRACE\",\n    DEBUG: \"DEBUG\",\n    INFO: \"INFO\",\n    LOG: \"LOG\",\n    WARN: \"WARN\",\n    ERROR: \"ERROR\",\n    CRITICAL: \"CRITICAL\"\n  };\n\n  /**\n   * An enumeration of common logging components.\n   */\n  var LogComponent = {\n    CCP: \"ccp\",\n    SOFTPHONE: \"softphone\",\n    CHAT: \"chat\",\n    TASK: \"task\"\n  };\n\n  /**\n   * The numeric order of the logging levels above.\n   * They are spaced to allow the addition of other log\n   * levels at a later time.\n   */\n  var LogLevelOrder = {\n    TEST: 0,\n    TRACE: 10,\n    DEBUG: 20,\n    INFO: 30,\n    LOG: 40,\n    WARN: 50,\n    ERROR: 100,\n    CRITICAL: 200\n\n  };\n\n  /**\n   * A map from log level to console logger function.\n   */\n  var CONSOLE_LOGGER_MAP = {\n    TRACE: function (text) { console.info(text); },\n    DEBUG: function (text) { console.info(text); },\n    INFO: function (text) { console.info(text); },\n    LOG: function (text) { console.log(text); },\n    TEST: function (text) { console.log(text); },\n    WARN: function (text) { console.warn(text); },\n    ERROR: function (text) { console.error(text); },\n    CRITICAL: function (text) { console.error(text); }\n  };\n\n  /**\n  * Checks if it is a valid log component enum\n  */\n\n  var isValidLogComponent = function (component) {\n    return Object.values(LogComponent).indexOf(component) !== -1;\n  };\n\n  /**\n  * Extract the custom arguments as required by the logger\n  */\n  var extractLoggerArgs = function (loggerArgs) {\n    var args = Array.prototype.slice.call(loggerArgs, 0);\n    var firstArg = args.shift();\n    var format;\n    var component;\n\n    if (isValidLogComponent(firstArg)) {\n      component = firstArg;\n      format = args.shift();\n    } else {\n      //default to CCP component\n      format = firstArg;\n      component = LogComponent.CCP;\n    }\n\n    return {\n      format: format,\n      component: component,\n      args: args\n    };\n  };\n\n  /**\n   * A log entry.\n   *\n   * @param component The logging component.\n   * @param level The log level of this log entry.\n   * @param text The text contained in the log entry.\n   * @param loggerId The root logger id.\n   *\n   * Log entries are aware of their timestamp, order,\n   * and can contain objects and exception stack traces.\n   */\n  var LogEntry = function (component, level, text, loggerId) {\n    this.component = component;\n    this.level = level;\n    this.text = text;\n    this.time = new Date();\n    this.exception = null;\n    this.objects = [];\n    this.line = 0;\n    this.loggerId = loggerId;\n  };\n\n  LogEntry.fromObject = function (obj) {\n    var entry = new LogEntry(LogComponent.CCP, obj.level, obj.text, obj.loggerId);\n\n    // Required to check for Date objects sent across frame boundaries\n    if (Object.prototype.toString.call(obj.time) === '[object Date]') {\n      entry.time = new Date(obj.time.getTime());\n    } else if (typeof obj.time === 'number') {\n      entry.time = new Date(obj.time);\n    } else if (typeof obj.time === 'string') {\n      entry.time = Date.parse(obj.time);\n    } else {\n      entry.time = new Date();\n    }\n    entry.exception = obj.exception;\n    entry.objects = obj.objects;\n    return entry;\n  };\n\n  /**\n   * Private method to remove sensitive info from client log\n   */\n  var redactSensitiveInfo = function(data) {\n    var regex = /AuthToken.*\\=/g;\n    if(data && typeof data === 'object') {\n      Object.keys(data).forEach(function(key) {\n        if (typeof data[key] === 'object') {\n          redactSensitiveInfo(data[key])\n        }\n        \n        if(typeof data[key] === 'string' && (key === \"url\" || key === \"text\")) {\n          data[key] = data[key].replace(regex, \"[redacted]\");\n        }\n      }); \n    }\n    \n  }\n\n  /**\n   * Pulls the type, message, and stack trace\n   * out of the given exception for JSON serialization.\n   */\n  var LoggedException = function (e) {\n    this.type = (e instanceof Error) ? e.name : e.code || Object.prototype.toString.call(e);\n    this.message = e.message;\n    this.stack = e.stack ? e.stack.split('\\n') : [];\n  };\n\n  /**\n   * Minimally stringify this log entry for printing\n   * to the console.\n   */\n  LogEntry.prototype.toString = function () {\n    return connect.sprintf(\"[%s] [%s]: %s\",\n      this.getTime() && this.getTime().toISOString ? this.getTime().toISOString() : \"???\",\n      this.getLevel(),\n      this.getText());\n  };\n\n  /**\n   * Get the log entry timestamp.\n   */\n  LogEntry.prototype.getTime = function () {\n    return this.time;\n  };\n\n  /**\n   * Get the level of the log entry.\n   */\n  LogEntry.prototype.getLevel = function () {\n    return this.level;\n  };\n\n  /**\n   * Get the log entry text.\n   */\n  LogEntry.prototype.getText = function () {\n    return this.text;\n  };\n\n  /**\n   * Get the log entry component.\n   */\n  LogEntry.prototype.getComponent = function () {\n    return this.component;\n  };\n\n  /**\n   * Add an exception stack trace to this log entry.\n   * A log entry may contain only one exception stack trace.\n   */\n  LogEntry.prototype.withException = function (e) {\n    this.exception = new LoggedException(e);\n    return this;\n  };\n\n  /**\n   * Add an arbitrary object to the log entry.  A log entry\n   * may contain any number of objects.\n   */\n  LogEntry.prototype.withObject = function (obj) {\n    var copiedObj = connect.deepcopy(obj)\n    redactSensitiveInfo(copiedObj);\n    this.objects.push(copiedObj);\n    return this;\n  };\n\n  /**\n   * Indicate that this log entry should be sent to the server\n   * NOTE: This should be used for internal logs only\n   */\n  LogEntry.prototype.sendInternalLogToServer = function () {\n    connect.getLog()._serverBoundInternalLogs.push(this);\n    return this;\n  };\n\n  /**\n   * The logger instance.\n   */\n  var Logger = function () {\n    this._logs = [];\n    this._rolledLogs = [];\n    this._logsToPush = [];\n    this._serverBoundInternalLogs = [];\n    this._echoLevel = LogLevelOrder.INFO;\n    this._logLevel = LogLevelOrder.INFO;\n    this._lineCount = 0;\n    this._logRollInterval = 0;\n    this._logRollTimer = null;\n    this._loggerId = new Date().getTime() + \"-\" + Math.random().toString(36).slice(2);\n    this.setLogRollInterval(DEFAULT_LOG_ROLL_INTERVAL);\n  };\n\n  /**\n   * Sets the interval in milliseconds that the logs will be rotated.\n   * Logs are rotated out completely at the end of the second roll\n   * and will eventually be garbage collected.\n   */\n  Logger.prototype.setLogRollInterval = function (interval) {\n    var self = this;\n\n    if (!(this._logRollTimer) || interval !== this._logRollInterval) {\n      if (this._logRollTimer) {\n        global.clearInterval(this._logRollTimer);\n      }\n      this._logRollInterval = interval;\n      this._logRollTimer = global.setInterval(function () {\n        this._rolledLogs = this._logs;\n        this._logs = [];\n        self.info(\"Log roll interval occurred.\");\n      }, this._logRollInterval);\n    } else {\n      this.warn(\"Logger is already set to the given interval: %d\", this._logRollInterval);\n    }\n  };\n\n  /**\n   * Set the log level.  This is the minimum level at which logs will\n   * be kept for later archiving.\n   */\n  Logger.prototype.setLogLevel = function (level) {\n    if (level in LogLevelOrder) {\n      this._logLevel = LogLevelOrder[level];\n    } else {\n      throw new Error(\"Unknown logging level: \" + level);\n    }\n  };\n\n  /**\n   * Set the echo level.  This is the minimum level at which logs will\n   * be printed to the javascript console.\n   */\n  Logger.prototype.setEchoLevel = function (level) {\n    if (level in LogLevelOrder) {\n      this._echoLevel = LogLevelOrder[level];\n    } else {\n      throw new Error(\"Unknown logging level: \" + level);\n    }\n  };\n\n  /**\n   * Write a particular log entry.\n   *\n   * @param level The logging level of the entry.\n   * @param text The text contents of the entry.\n   *\n   * @returns The new log entry.\n   */\n  Logger.prototype.write = function (component, level, text) {\n    var logEntry = new LogEntry(component, level, text, this.getLoggerId());\n    redactSensitiveInfo(logEntry);\n    this.addLogEntry(logEntry);\n    return logEntry;\n  };\n\n  Logger.prototype.addLogEntry = function (logEntry) {\n    this._logs.push(logEntry);\n\n    //For now only send softphone logs only.\n    //TODO add CCP logs once we are sure that no sensitive data is being logged.\n    if (LogComponent.SOFTPHONE === logEntry.component) {\n      this._logsToPush.push(logEntry);\n    }\n\n    if (logEntry.level in LogLevelOrder &&\n      LogLevelOrder[logEntry.level] >= this._logLevel) {\n\n      if (LogLevelOrder[logEntry.level] >= this._echoLevel) {\n        CONSOLE_LOGGER_MAP[logEntry.getLevel()](logEntry.toString());\n      }\n\n      logEntry.line = this._lineCount++;\n    }\n  };\n\n  Logger.prototype.sendInternalLogEntryToServer = function (logEntry) {\n    this._serverBoundInternalLogs.push(logEntry);\n\n    if (logEntry.level in LogLevelOrder &&\n      LogLevelOrder[logEntry.level] >= this._logLevel) {\n\n      if (LogLevelOrder[logEntry.level] >= this._echoLevel) {\n        CONSOLE_LOGGER_MAP[logEntry.getLevel()](logEntry.toString());\n      }\n\n      logEntry.line = this._lineCount++;\n    }\n  };\n\n  /**\n   * Remove all objects from all log entries.\n   */\n  Logger.prototype.clearObjects = function () {\n    for (var x = 0; x < this._logs.length; x++) {\n      if (this._logs[x].objects) {\n        delete this._logs[x].objects;\n      }\n    }\n  };\n\n  /**\n   * Remove all exception stack traces from the log entries.\n   */\n  Logger.prototype.clearExceptions = function () {\n    for (var x = 0; x < this._logs.length; x++) {\n      if (this._logs[x].exception) {\n        delete this._logs[x].exception;\n      }\n    }\n  };\n\n  Logger.prototype.trace = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.TRACE, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n\n  Logger.prototype.debug = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.DEBUG, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n\n  Logger.prototype.info = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.INFO, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n\n  Logger.prototype.log = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.LOG, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n\n  Logger.prototype.test = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.TEST, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n\n  Logger.prototype.warn = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.WARN, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n\n  Logger.prototype.error = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.ERROR, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n\n  Logger.prototype.critical = function () {\n    var logArgs = extractLoggerArgs(arguments);\n    return this.write(logArgs.component, LogLevel.ERROR, connect.vsprintf(logArgs.format, logArgs.args));\n  };\n\n  /**\n   * Create a string representation of the logger contents.\n   */\n  Logger.prototype.toString = function () {\n    var lines = [];\n    for (var x = 0; x < this._logs.length; x++) {\n      lines.push(this._logs[x].toString());\n    }\n\n    return lines.join(\"\\n\");\n  };\n  \n  /**\n   * Download/Archive logs to a file, \n   * By default, it returns all logs.\n   * To filter logs by the minimum log level set by setLogLevel or the default set in _logLevel, \n   * pass in filterByLogLevel to true in options\n   * \n   * @param options download options [Object|String]. \n   * - of type Object: \n   *   { logName: 'my-log-name',\n   *     filterByLogLevel: false, //download all logs\n   *   }\n   * - of type String (for backward compatibility), the file's name\n   */\n  Logger.prototype.download = function(options) {\n    var logName = 'agent-log';\n    var filterByLogLevel = false;\n\n    if (typeof options === 'object') {\n      logName = options.logName || logName;\n      filterByLogLevel = options.filterByLogLevel || filterByLogLevel;\n    }\n    else if (typeof options === 'string') {\n      logName = options || logName;\n    }\n\n    var self = this;\n    var logs = this._rolledLogs.concat(this._logs);\n    if (filterByLogLevel) {\n      logs = logs.filter(function(entry) {\n        return LogLevelOrder[entry.level] >= self._logLevel;\n      });\n    }\n\n    var logBlob = new global.Blob([JSON.stringify(logs, undefined, 4)], ['text/plain']);\n    var downloadLink = document.createElement('a');\n    var logName = logName || 'agent-log';\n    downloadLink.href = global.URL.createObjectURL(logBlob);\n    downloadLink.download = logName + '.txt';\n    document.body.appendChild(downloadLink);\n    downloadLink.click();\n    document.body.removeChild(downloadLink);\n  };\n\n  Logger.prototype.scheduleUpstreamLogPush = function (conduit) {\n    if (!connect.upstreamLogPushScheduled) {\n      connect.upstreamLogPushScheduled = true;\n      /** Schedule pushing logs frequently to sharedworker upstream, sharedworker will report to LARS*/\n      global.setInterval(connect.hitch(this, this.reportMasterLogsUpStream, conduit), SOFTPHONE_LOG_REPORT_INTERVAL_MILLIS);\n    }\n  };\n\n  Logger.prototype.reportMasterLogsUpStream = function (conduit) {\n    var logsToPush = this._logsToPush.slice();\n    this._logsToPush = [];\n    connect.ifMaster(connect.MasterTopics.SEND_LOGS, function () {\n      if (logsToPush.length > 0) {\n        conduit.sendUpstream(connect.EventType.SEND_LOGS, logsToPush);\n      }\n    });\n  };\n\n  Logger.prototype.getLoggerId = function () {\n    return this._loggerId;\n  };\n\n  Logger.prototype.scheduleDownstreamClientSideLogsPush = function () {\n    global.setInterval(connect.hitch(this, this.pushClientSideLogsDownstream), LOGS_REPORT_INTERVAL_MILLIS);\n  }\n\n  Logger.prototype.pushClientSideLogsDownstream = function () {\n    var logs = [];\n\n    // We do not send a request if we have less than 50 records so that we minimize the number of\n    // requests per second. \n    // 500 is the max we accept on the server. \n    // We chose 500 because this is the limit imposed by Firehose for a put batch request\n    if (this._serverBoundInternalLogs.length < 50) {\n      return;\n    } else if (this._serverBoundInternalLogs.length > 500) {\n      logs = this._serverBoundInternalLogs.splice(0, 500);\n    } else {\n      logs = this._serverBoundInternalLogs;\n      this._serverBoundInternalLogs = [];\n    }\n\n    connect.publishClientSideLogs(logs);\n  }\n\n  var DownstreamConduitLogger = function (conduit) {\n    Logger.call(this);\n    this.conduit = conduit;\n    \n    global.setInterval(connect.hitch(this, this._pushLogsDownstream),\n      DownstreamConduitLogger.LOG_PUSH_INTERVAL);\n\n    // Disable log rolling, we will purge our own logs once they have\n    // been pushed downstream.\n    global.clearInterval(this._logRollTimer);\n    this._logRollTimer = null;\n  };\n  // How frequently logs should be collected and delivered downstream.\n  DownstreamConduitLogger.LOG_PUSH_INTERVAL = 1000;\n  DownstreamConduitLogger.prototype = Object.create(Logger.prototype);\n  DownstreamConduitLogger.prototype.constructor = DownstreamConduitLogger;\n\n  DownstreamConduitLogger.prototype.pushLogsDownstream = function (logs) {\n    var self = this;\n    logs.forEach(function (log) {\n      self.conduit.sendDownstream(connect.EventType.LOG, log);\n    });\n  };\n\n  DownstreamConduitLogger.prototype._pushLogsDownstream = function () {\n    var self = this;\n    \n    this._logs.forEach(function (log) {\n      self.conduit.sendDownstream(connect.EventType.LOG, log);\n    });\n    this._logs = [];\n\n    for (var i = 0; i < this._serverBoundInternalLogs.length; i++) {\n      this.conduit.sendDownstream(connect.EventType.SERVER_BOUND_INTERNAL_LOG, this._serverBoundInternalLogs[i]);\n    }\n\n    this._serverBoundInternalLogs = [];\n  };\n\n  /** Create the singleton logger instance. */\n  connect.rootLogger = new Logger();\n\n  /** Fetch the singleton logger instance. */\n  var getLog = function () {\n    return connect.rootLogger;\n  };\n\n  connect = connect || {};\n  connect.getLog = getLog;\n  connect.LogEntry = LogEntry;\n  connect.Logger = Logger;\n  connect.LogLevel = LogLevel;\n  connect.LogComponent = LogComponent;\n  connect.DownstreamConduitLogger = DownstreamConduitLogger;\n})();\n\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n\n  var userAgent = navigator.userAgent;\n  var ONE_DAY_MILLIS = 24 * 60 * 60 * 1000;\n  var DEFAULT_POPUP_HEIGHT = 578;\n  var DEFAULT_POPUP_WIDTH = 433;\n\n  /**\n   * Unpollute sprintf functions from the global namespace.\n   */\n  connect.sprintf = global.sprintf;\n  connect.vsprintf = global.vsprintf;\n  delete global.sprintf;\n  delete global.vsprintf;\n\n  connect.HTTP_STATUS_CODES = {\n    SUCCESS: 200,\n    TOO_MANY_REQUESTS: 429,\n    INTERNAL_SERVER_ERROR: 500\n  };\n\n  connect.TRANSPORT_TYPES = {\n    CHAT_TOKEN: \"chat_token\",\n    WEB_SOCKET: \"web_socket\"\n  };\n\n  /**\n   * Binds the given instance object as the context for\n   * the method provided.\n   *\n   * @param scope The instance object to be set as the scope\n   *    of the function.\n   * @param method The method to be encapsulated.\n   *\n   * All other arguments, if any, are bound to the method\n   * invocation inside the closure.\n   *\n   * @return A closure encapsulating the invocation of the\n   *    method provided in context of the given instance.\n   */\n  connect.hitch = function () {\n    var args = Array.prototype.slice.call(arguments);\n    var scope = args.shift();\n    var method = args.shift();\n\n    connect.assertNotNull(scope, 'scope');\n    connect.assertNotNull(method, 'method');\n    connect.assertTrue(connect.isFunction(method), 'method must be a function');\n\n    return function () {\n      var closureArgs = Array.prototype.slice.call(arguments);\n      return method.apply(scope, args.concat(closureArgs));\n    };\n  };\n\n  /**\n   * Determine if the given value is a callable function type.\n   * Borrowed from Underscore.js.\n   */\n  connect.isFunction = function (obj) {\n    return !!(obj && obj.constructor && obj.call && obj.apply);\n  };\n\n  /**\n   * Determine if the given value is an array.\n   */\n  connect.isArray = function (obj) {\n    return Object.prototype.toString.call(obj) === '[object Array]';\n  };\n\n  /**\n   * Get a list of keys from a Javascript object used\n   * as a hash map.\n   */\n  connect.keys = function (map) {\n    var keys = [];\n\n    connect.assertNotNull(map, 'map');\n\n    for (var k in map) {\n      keys.push(k);\n    }\n\n    return keys;\n  };\n\n  /**\n   * Get a list of values from a Javascript object used\n   * as a hash map.\n   */\n  connect.values = function (map) {\n    var values = [];\n\n    connect.assertNotNull(map, 'map');\n\n    for (var k in map) {\n      values.push(map[k]);\n    }\n\n    return values;\n  };\n\n  /**\n   * Get a list of key/value pairs from the given map.\n   */\n  connect.entries = function (map) {\n    var entries = [];\n\n    for (var k in map) {\n      entries.push({ key: k, value: map[k] });\n    }\n\n    return entries;\n  };\n\n  /**\n   * Merge two or more maps together into a new map,\n   * or simply copy a single map.\n   */\n  connect.merge = function () {\n    var argMaps = Array.prototype.slice.call(arguments, 0);\n    var resultMap = {};\n\n    argMaps.forEach(function (map) {\n      connect.entries(map).forEach(function (kv) {\n        resultMap[kv.key] = kv.value;\n      });\n    });\n\n    return resultMap;\n  };\n\n  connect.now = function () {\n    return new Date().getTime();\n  };\n\n  connect.find = function (array, predicate) {\n    for (var x = 0; x < array.length; x++) {\n      if (predicate(array[x])) {\n        return array[x];\n      }\n    }\n\n    return null;\n  };\n\n  connect.contains = function (obj, value) {\n    if (obj instanceof Array) {\n      return connect.find(obj, function (v) { return v === value; }) != null;\n\n    } else {\n      return (value in obj);\n    }\n  };\n\n  connect.containsValue = function (obj, value) {\n    if (obj instanceof Array) {\n      return connect.find(obj, function (v) { return v === value; }) != null;\n\n    } else {\n      return connect.find(connect.values(obj), function (v) { return v === value; }) != null;\n    }\n  };\n\n  /**\n   * Generate a random ID consisting of the current timestamp\n   * and a random base-36 number based on Math.random().\n   */\n  connect.randomId = function () {\n    return connect.sprintf(\"%s-%s\", connect.now(), Math.random().toString(36).slice(2));\n  };\n\n  /**\n   * Generate an enum from the given list of lower-case enum values,\n   * where the enum keys will be upper case.\n   *\n   * Conversion from pascal case based on code from here:\n   * http://stackoverflow.com/questions/30521224\n   */\n  connect.makeEnum = function (values) {\n    var enumObj = {};\n\n    values.forEach(function (value) {\n      var key = value.replace(/\\.?([a-z]+)_?/g, function (x, y) { return y.toUpperCase() + \"_\"; })\n        .replace(/_$/, \"\");\n\n      enumObj[key] = value;\n    });\n\n    return enumObj;\n  };\n\n  connect.makeNamespacedEnum = function (prefix, values) {\n    var enumObj = connect.makeEnum(values);\n    connect.keys(enumObj).forEach(function (key) {\n      enumObj[key] = connect.sprintf(\"%s::%s\", prefix, enumObj[key]);\n    });\n    return enumObj;\n  };\n\n  connect.makeGenericNamespacedEnum = function (prefix, values, delimiter) {\n    var enumObj = connect.makeEnum(values);\n    connect.keys(enumObj).forEach(function (key) {\n      enumObj[key] = connect.sprintf(\"%s\"+delimiter+\"%s\", prefix, enumObj[key]);\n    });\n    return enumObj;\n  };\n\n  /**\n  * Methods to determine browser type and versions, used for softphone initialization.\n  */\n  connect.isChromeBrowser = function () {\n    return userAgent.indexOf(\"Chrome\") !== -1;\n  };\n\n  connect.isFirefoxBrowser = function () {\n    return userAgent.indexOf(\"Firefox\") !== -1;\n  };\n\n  connect.isOperaBrowser = function () {\n    return userAgent.indexOf(\"Opera\") !== -1;\n  };\n\n  connect.getChromeBrowserVersion = function () {\n    var chromeVersion = userAgent.substring(userAgent.indexOf(\"Chrome\") + 7);\n    if (chromeVersion) {\n      return parseFloat(chromeVersion);\n    } else {\n      return -1;\n    }\n  };\n\n  connect.getFirefoxBrowserVersion = function () {\n    var firefoxVersion = userAgent.substring(userAgent.indexOf(\"Firefox\") + 8);\n    if (firefoxVersion) {\n      return parseFloat(firefoxVersion);\n    } else {\n      return -1;\n    }\n  };\n\n  connect.isValidLocale = function (locale) {\n    var languages = [\n      {\n        id: 'en_US',\n        label: 'English'\n      },\n      {\n        id: 'de_DE',\n        label: 'Deutsch'\n      },\n      {\n        id: 'es_ES',\n        label: 'Espaol'\n      },\n      {\n        id: 'fr_FR',\n        label: 'Franais'\n      },\n      {\n        id: 'ja_JP',\n        label: ''\n      },\n      {\n        id: 'it_IT',\n        label: 'Italiano'\n      },\n      {\n        id: 'ko_KR',\n        label: ''\n      },\n      {\n        id: 'pt_BR',\n        label: 'Portugus'\n      },\n      {\n        id: 'zh_CN',\n        label: '()'\n      },\n      {\n        id: 'zh_TW',\n        label: '()'\n      }\n    ];\n    return languages.map(function(language){ return language.id}).includes(locale);\n  }\n\n  connect.getOperaBrowserVersion = function () {\n    var versionOffset = userAgent.indexOf(\"Opera\");\n    var operaVersion = (userAgent.indexOf(\"Version\") !== -1) ? userAgent.substring(versionOffset + 8) : userAgent.substring(versionOffset + 6);\n    if (operaVersion) {\n      return parseFloat(operaVersion);\n    } else {\n      return -1;\n    }\n  };\n\n  /**\n   * Return a map of items in the given list indexed by\n   * keys determined by the closure provided.\n   *\n   * @param iterable A list-like object.\n   * @param closure A closure to determine the index for the\n   *    items in the iterable.\n   * @return A map from index to item for each item in the iterable.\n   */\n  connect.index = function (iterable, closure) {\n    var map = {};\n\n    iterable.forEach(function (item) {\n      map[closure(item)] = item;\n    });\n\n    return map;\n  };\n\n  /**\n   * Converts the given array into a map as a set,\n   * where elements in the array are mapped to 1.\n   */\n  connect.set = function (arrayIn) {\n    var setMap = {};\n\n    arrayIn.forEach(function (key) {\n      setMap[key] = 1;\n    });\n\n    return setMap;\n  };\n\n  /**\n   * Returns a map for each key in mapB which\n   * is NOT in mapA.\n   */\n  connect.relativeComplement = function (mapA, mapB) {\n    var compMap = {};\n\n    connect.keys(mapB).forEach(function (key) {\n      if (!(key in mapA)) {\n        compMap[key] = mapB[key];\n      }\n    });\n\n    return compMap;\n  };\n\n  /**\n   * Asserts that a premise is true.\n   */\n  connect.assertTrue = function (premise, message) {\n    if (!premise) {\n      throw new connect.ValueError(message);\n    }\n  };\n\n  /**\n   * Asserts that a value is not null or undefined.\n   */\n  connect.assertNotNull = function (value, name) {\n    connect.assertTrue(value != null && typeof value !== undefined,\n      connect.sprintf(\"%s must be provided\", name || 'A value'));\n    return value;\n  };\n\n  connect.deepcopy = function (src) {\n    return JSON.parse(JSON.stringify(src));\n  };\n\n  /**\n   * Get the current base url of the open page, e.g. if the page is\n   * https://example.com:9494/oranges, this will be \"https://example.com:9494\".\n   */\n  connect.getBaseUrl = function () {\n    var location = global.location;\n    return connect.sprintf(\"%s//%s:%s\", location.protocol, location.hostname, location.port);\n  };\n\n  connect.getUrlWithProtocol = function(url) {\n    var protocol = global.location.protocol;\n    if (url.substr(0, protocol.length) !== protocol) {\n      return connect.sprintf(\"%s//%s\", protocol, url);\n    }\n    return url;\n  }\n\n  /**\n   * Determine if the current window is in an iframe.\n   * Courtesy: http://stackoverflow.com/questions/326069/\n   */\n  connect.isFramed = function () {\n    try {\n      return window.self !== window.top;\n    } catch (e) {\n      return true;\n    }\n  };\n\n  connect.hasOtherConnectedCCPs = function () {\n    return connect.numberOfConnectedCCPs > 1;\n  }\n\n  connect.fetch = function (endpoint, options, milliInterval, maxRetry) {\n    maxRetry = maxRetry || 5;\n    milliInterval = milliInterval || 1000;\n    options = options || {};\n    return new Promise(function (resolve, reject) {\n      function fetchData(maxRetry) {\n        fetch(endpoint, options).then(function (res) {\n          if (res.status === connect.HTTP_STATUS_CODES.SUCCESS) {\n            resolve(res.json());\n          } else if (maxRetry !== 1 && (res.status >= connect.HTTP_STATUS_CODES.INTERNAL_SERVER_ERROR || res.status === connect.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)) {\n            setTimeout(function () {\n              fetchData(--maxRetry);\n            }, milliInterval);\n          } else {\n            reject(res);\n          }\n        }).catch(function (e) {\n          reject(e);\n        });\n      }\n      fetchData(maxRetry);\n    });\n  };\n\n  /**\n   * Calling a function with exponential backoff with full jitter retry strategy\n   * It will retry calling the function for maximum maxRetry times if it fails.\n   * Success callback will be called if the function succeeded.\n   * Failure callback will be called only if the last try failed.\n   */\n  connect.backoff = function (func, milliInterval, maxRetry, callbacks) {\n    connect.assertTrue(connect.isFunction(func), \"func must be a Function\");\n    var self = this;\n    var ratio = 2;\n\n    func({\n      success: function (data) {\n        if (callbacks && callbacks.success) {\n          callbacks.success(data);\n        }\n      },\n      failure: function (err, data) {\n        if (maxRetry > 0) {\n          var interval = milliInterval * 2 * Math.random();\n          global.setTimeout(function () {\n            self.backoff(func, interval * ratio, --maxRetry, callbacks);\n          }, interval);\n        } else {\n          if (callbacks && callbacks.failure) {\n            callbacks.failure(err, data);\n          }\n        }\n      }\n    });\n  };\n\n  connect.publishMetric = function (metricData) {\n    var bus = connect.core.getEventBus();\n    bus.trigger(connect.EventType.CLIENT_METRIC, metricData);\n  };\n\n  connect.publishSoftphoneStats = function(stats) {\n    var bus = connect.core.getEventBus();\n    bus.trigger(connect.EventType.SOFTPHONE_STATS, stats);\n  };\n\n  connect.publishSoftphoneReport = function(report) {\n    var bus = connect.core.getEventBus();\n    bus.trigger(connect.EventType.SOFTPHONE_REPORT, report);\n  };\n\n  connect.publishClientSideLogs = function(logs) {\n    var bus = connect.core.getEventBus();\n    bus.trigger(connect.EventType.CLIENT_SIDE_LOGS, logs);\n  };\n\n  /**\n   * A wrapper around Window.open() for managing single instance popups.\n   */\n  connect.PopupManager = function () { };\n\n  connect.PopupManager.prototype.open = function (url, name, options) {\n    var then = this._getLastOpenedTimestamp(name);\n    var now = new Date().getTime();\n    var win = null;\n    if (now - then > ONE_DAY_MILLIS) {\n      if (options) {\n        // default values are chosen to provide a minimum height without scrolling\n        // and a uniform margin based on the css of the ccp login page\n        var height = options.height || DEFAULT_POPUP_HEIGHT;\n        var width = options.width || DEFAULT_POPUP_WIDTH;\n        var top = options.top || 0;\n        var left = options.left || 0;\n        win = window.open('', name, \"width=\"+width+\", height=\"+height+\", top=\"+top+\", left=\"+left);\n        if (win.location !== url) {\n          win = window.open(url, name, \"width=\"+width+\", height=\"+height+\", top=\"+top+\", left=\"+left);\n        }\n      } else {\n        win = window.open('', name);\n        if (win.location !== url) {\n          win = window.open(url, name);\n        }\n      }\n      this._setLastOpenedTimestamp(name, now);\n    }\n    return win;\n  };\n\n  connect.PopupManager.prototype.clear = function (name) {\n    var key = this._getLocalStorageKey(name);\n    global.localStorage.removeItem(key);\n  };\n\n  connect.PopupManager.prototype._getLastOpenedTimestamp = function (name) {\n    var key = this._getLocalStorageKey(name);\n    var value = global.localStorage.getItem(key);\n\n    if (value) {\n      return parseInt(value, 10);\n\n    } else {\n      return 0;\n    }\n  };\n\n  connect.PopupManager.prototype._setLastOpenedTimestamp = function (name, ts) {\n    var key = this._getLocalStorageKey(name);\n    global.localStorage.setItem(key, '' + ts);\n  };\n\n  connect.PopupManager.prototype._getLocalStorageKey = function (name) {\n    return \"connectPopupManager::\" + name;\n  };\n\n  /**\n   * An enumeration of the HTML5 notification permission values.\n   */\n  var NotificationPermission = connect.makeEnum([\n    'granted',\n    'denied',\n    'default'\n  ]);\n\n  /**\n   * A simple engine for showing notification popups.\n   */\n  connect.NotificationManager = function () {\n    this.queue = [];\n    this.permission = NotificationPermission.DEFAULT;\n  };\n\n  connect.NotificationManager.prototype.requestPermission = function () {\n    var self = this;\n    if (!(\"Notification\" in global)) {\n      connect.getLog().warn(\"This browser doesn't support notifications.\").sendInternalLogToServer();\n      this.permission = NotificationPermission.DENIED;\n\n    } else if (global.Notification.permission === NotificationPermission.DENIED) {\n      connect.getLog().warn(\"The user has requested to not receive notifications.\").sendInternalLogToServer();\n      this.permission = NotificationPermission.DENIED;\n\n    } else if (this.permission !== NotificationPermission.GRANTED) {\n      global.Notification.requestPermission().then(function (permission) {\n        self.permission = permission;\n        if (permission === NotificationPermission.GRANTED) {\n          self._showQueued();\n\n        } else {\n          self.queue = [];\n        }\n      });\n    }\n  };\n\n  connect.NotificationManager.prototype.show = function (title, options) {\n    if (this.permission === NotificationPermission.GRANTED) {\n      return this._showImpl({ title: title, options: options });\n\n    } else if (this.permission === NotificationPermission.DENIED) {\n      connect.getLog().warn(\"Unable to show notification.\")\n        .sendInternalLogToServer()\n        .withObject({\n          title: title,\n          options: options\n        });\n\n    } else {\n      var params = { title: title, options: options };\n      connect.getLog().warn(\"Deferring notification until user decides to allow or deny.\")\n        .withObject(params)\n        .sendInternalLogToServer();\n      this.queue.push(params);\n    }\n  };\n\n  connect.NotificationManager.prototype._showQueued = function () {\n    var self = this;\n    var notifications = this.queue.map(function (params) {\n      return self._showImpl(params);\n    });\n    this.queue = [];\n    return notifications;\n  };\n\n  connect.NotificationManager.prototype._showImpl = function (params) {\n    var notification = new global.Notification(params.title, params.options);\n    if (params.options.clicked) {\n      notification.onclick = function () {\n        params.options.clicked.call(notification);\n      };\n    }\n    return notification;\n  };\n\n  connect.BaseError = function (format, args) {\n    global.Error.call(this, connect.vsprintf(format, args));\n  };\n  connect.BaseError.prototype = Object.create(Error.prototype);\n  connect.BaseError.prototype.constructor = connect.BaseError;\n\n  connect.ValueError = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    var format = args.shift();\n    connect.BaseError.call(this, format, args);\n  };\n  connect.ValueError.prototype = Object.create(connect.BaseError.prototype);\n  connect.ValueError.prototype.constructor = connect.ValueError;\n\n  connect.NotImplementedError = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    var format = args.shift();\n    connect.BaseError.call(this, format, args);\n  };\n  connect.NotImplementedError.prototype = Object.create(connect.BaseError.prototype);\n  connect.NotImplementedError.prototype.constructor = connect.NotImplementedError;\n\n  connect.StateError = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    var format = args.shift();\n    connect.BaseError.call(this, format, args);\n  };\n  connect.StateError.prototype = Object.create(connect.BaseError.prototype);\n  connect.StateError.prototype.constructor = connect.StateError;\n\n  connect.VoiceIdError = function(type, message, err){\n    var error = {};\n    error.type = type;\n    error.message = message;\n    error.stack = Error(message);\n    error.err = err;\n    return error;\n  }\n\n  // internal use only\n  connect.isCCP = function () {\n    var conduit = connect.core.getUpstream();\n    return conduit.name === 'ConnectSharedWorkerConduit';\n  }\n})();\n\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n\n  var ALL_EVENTS = '<<all>>';\n\n  /**---------------------------------------------------------------\n   * enum EventType\n   */\n  var EventType = connect.makeEnum([\n    'acknowledge',\n    'ack_timeout',\n    'init',\n    'api_request',\n    'api_response',\n    'auth_fail',\n    'access_denied',\n    'close',\n    'configure',\n    'log',\n    'master_request',\n    'master_response',\n    'synchronize',\n    'terminate',\n    'terminated',\n    'send_logs',\n    'reload_agent_configuration',\n    'broadcast',\n    'api_metric',\n    'client_metric',\n    'softphone_stats',\n    'softphone_report',\n    'client_side_logs',\n    'server_bound_internal_log',\n    'mute',\n    \"iframe_style\",\n    \"update_connected_ccps\"\n  ]);\n\n  /**---------------------------------------------------------------\n   * enum MasterTopics\n   */\n  var MasterTopics = connect.makeNamespacedEnum('connect', [\n    'loginPopup',\n    'sendLogs',\n    'softphone',\n    'ringtone',\n    'metrics'\n  ]);\n\n  /**---------------------------------------------------------------\n   * enum AgentEvents\n   */\n  var AgentEvents = connect.makeNamespacedEnum('agent', [\n    'init',\n    'update',\n    'refresh',\n    'routable',\n    'not_routable',\n    'pending',\n    'contact_pending',\n    'offline',\n    'error',\n    'softphone_error',\n    'websocket_connection_lost',\n    'websocket_connection_gained',\n    'state_change',\n    'acw',\n    'mute_toggle',\n    'local_media_stream_created'\n  ]);\n\n  /**---------------------------------------------------------------\n  * enum WebSocketEvents\n  */\n  var WebSocketEvents = connect.makeNamespacedEnum('webSocket', [\n    'init_failure',\n    'connection_open',\n    'connection_close',\n    'connection_error',\n    'connection_gain',\n    'connection_lost',\n    'subscription_update',\n    'subscription_failure',\n    'all_message',\n    'send',\n    'subscribe'\n  ]);\n\n  /**---------------------------------------------------------------\n    * enum ContactEvents\n    */\n  var ContactEvents = connect.makeNamespacedEnum('contact', [\n    'init',\n    'refresh',\n    'destroyed',\n    'incoming',\n    'pending',\n    'connecting',\n    'connected',\n    'missed',\n    'acw',\n    'view',\n    'ended',\n    'error',\n    'accepted'\n  ]);\n\n\n  /**---------------------------------------------------------------\n  * enum ConnectionEvents\n  */\n  var ConnectionEvents = connect.makeNamespacedEnum('connection', [\n    'session_init',\n    'ready_to_start_session'\n  ]);\n\n  /**---------------------------------------------------------------\n   * enum Configuration Events\n   */\n  var ConfigurationEvents = connect.makeNamespacedEnum('configuration', [\n    'configure',\n    'set_speaker_device',\n    'set_microphone_device',\n    'set_ringer_device',\n    'speaker_device_changed',\n    'microphone_device_changed',\n    'ringer_device_changed'\n  ]);\n\n  /**---------------------------------------------------------------\n   * class EventFactory\n   */\n  var EventFactory = function () { };\n  EventFactory.createRequest = function (type, method, params) {\n    return {\n      event: type,\n      requestId: connect.randomId(),\n      method: method,\n      params: params\n    };\n  };\n\n  EventFactory.createResponse = function (type, request, data, err) {\n    return {\n      event: type,\n      requestId: request.requestId,\n      data: data,\n      err: err || null\n    };\n  };\n\n  /**\n   * An object representing an event subscription in an EventBus.\n   */\n  var Subscription = function (subMap, eventName, f) {\n    this.subMap = subMap;\n    this.id = connect.randomId();\n    this.eventName = eventName;\n    this.f = f;\n  };\n\n  /**\n   * Unsubscribe the handler of this subscription from the EventBus\n   * from which it was created.\n   */\n  Subscription.prototype.unsubscribe = function () {\n    this.subMap.unsubscribe(this.eventName, this.id);\n  };\n\n  /**\n   * A map of event subscriptions, used by the EventBus.\n   */\n  var SubscriptionMap = function () {\n    this.subIdMap = {};\n    this.subEventNameMap = {};\n  };\n\n  /**\n   * Add a subscription for the named event.  Creates a new Subscription\n   * object and returns it.  This object can be used to unsubscribe.\n   */\n  SubscriptionMap.prototype.subscribe = function (eventName, f) {\n    var sub = new Subscription(this, eventName, f);\n\n    this.subIdMap[sub.id] = sub;\n    var subList = this.subEventNameMap[eventName] || [];\n    subList.push(sub);\n    this.subEventNameMap[eventName] = subList;\n    return sub;\n  };\n\n  /**\n   * Unsubscribe a subscription matching the given event name and id.\n   */\n  SubscriptionMap.prototype.unsubscribe = function (eventName, subId) {\n    if (connect.contains(this.subEventNameMap, eventName)) {\n      this.subEventNameMap[eventName] = this.subEventNameMap[eventName].filter(function (s) { return s.id !== subId; });\n\n      if (this.subEventNameMap[eventName].length < 1) {\n        delete this.subEventNameMap[eventName];\n      }\n    }\n\n    if (connect.contains(this.subIdMap, subId)) {\n      delete this.subIdMap[subId];\n    }\n  };\n\n  /**\n   * Get a list of all subscriptions in the subscription map.\n   */\n  SubscriptionMap.prototype.getAllSubscriptions = function () {\n    return connect.values(this.subEventNameMap).reduce(function (a, b) {\n      return a.concat(b);\n    }, []);\n  };\n\n  /**\n   * Get a list of subscriptions for the given event name, or an empty\n   * list if there are no subscriptions.\n   */\n  SubscriptionMap.prototype.getSubscriptions = function (eventName) {\n    return this.subEventNameMap[eventName] || [];\n  };\n\n  /**\n   * An object which maintains a map of subscriptions and serves as the\n   * mechanism for triggering events to be handled by subscribers.\n   */\n  var EventBus = function (paramsIn) {\n    var params = paramsIn || {};\n\n    this.subMap = new SubscriptionMap();\n    this.logEvents = params.logEvents || false;\n  };\n\n  /**\n   * Subscribe to the named event.  Returns a new Subscription object\n   * which can be used to unsubscribe.\n   */\n  EventBus.prototype.subscribe = function (eventName, f) {\n    connect.assertNotNull(eventName, 'eventName');\n    connect.assertNotNull(f, 'f');\n    connect.assertTrue(connect.isFunction(f), 'f must be a function');\n    return this.subMap.subscribe(eventName, f);\n  };\n\n  /**\n   * Subscribe a function to be called on all events.\n   */\n  EventBus.prototype.subscribeAll = function (f) {\n    connect.assertNotNull(f, 'f');\n    connect.assertTrue(connect.isFunction(f), 'f must be a function');\n    return this.subMap.subscribe(ALL_EVENTS, f);\n  };\n\n  /**\n   * Get a list of subscriptions for the given event name, or an empty\n   * list if there are no subscriptions.\n   */\n  EventBus.prototype.getSubscriptions = function (eventName) {\n    return this.subMap.getSubscriptions(eventName);\n  };\n\n  /**\n   * Trigger the given event with the given data.  All methods subscribed\n   * to this event will be called and are provided with the given arbitrary\n   * data object and the name of the event, in that order.\n   */\n  EventBus.prototype.trigger = function (eventName, data) {\n    connect.assertNotNull(eventName, 'eventName');\n    var self = this;\n    var allEventSubs = this.subMap.getSubscriptions(ALL_EVENTS);\n    var eventSubs = this.subMap.getSubscriptions(eventName);\n\n    if (this.logEvents &&\n        eventName !== connect.EventType.LOG &&\n        eventName !== connect.EventType.MASTER_RESPONSE &&\n        eventName !== connect.EventType.API_METRIC &&\n        eventName !== connect.EventType.SERVER_BOUND_INTERNAL_LOG\n    ) {\n      connect.getLog().trace(\"Publishing event: %s\", eventName).sendInternalLogToServer();\n    }\n\n    if (\n      eventName.startsWith(connect.ContactEvents.ACCEPTED) &&\n      data &&\n      data.contactId &&\n      !(data instanceof connect.Contact)\n    ) {\n      data = new connect.Contact(data.contactId);\n    }\n\n    allEventSubs.concat(eventSubs).forEach(function (sub) {\n      try {\n        sub.f(data || null, eventName, self);\n      } catch (e) {\n        connect.getLog().error(\"'%s' event handler failed.\", eventName).withException(e).sendInternalLogToServer();\n      }\n    });\n  };\n\n  /**\n   * Returns a closure which bridges an event from another EventBus to this bus.\n   *\n   * Usage:\n   * conduit.onUpstream(\"MyEvent\", bus.bridge());\n   */\n  EventBus.prototype.bridge = function () {\n    var self = this;\n    return function (data, event) {\n      self.trigger(event, data);\n    };\n  };\n\n  /**\n   * Unsubscribe all events in the event bus.\n   */\n  EventBus.prototype.unsubscribeAll = function () {\n    this.subMap.getAllSubscriptions().forEach(function (sub) {\n      sub.unsubscribe();\n    });\n  };\n\n  connect.EventBus = EventBus;\n  connect.EventFactory = EventFactory;\n  connect.EventType = EventType;\n  connect.AgentEvents = AgentEvents;\n  connect.ConfigurationEvents = ConfigurationEvents;\n  connect.ConnectionEvents = ConnectionEvents;\n  connect.ConnnectionEvents = ConnectionEvents; //deprecate on next major version release.\n  connect.ContactEvents = ContactEvents;\n  connect.WebSocketEvents = WebSocketEvents;\n  connect.MasterTopics = MasterTopics;\n})();\n\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n(function() {\n   var global = this;\n   connect = global.connect || {};\n   global.connect = connect;\n   global.lily = connect;\n\n   /**---------------------------------------------------------------\n    * class Stream\n    *\n    * Represents an object from which messages can be read and to which\n    * messages can be sent.\n    */\n   var Stream = function() {};\n\n   /**\n    * Send a message to the stream.  This method must be implemented by subclasses.\n    */\n   Stream.prototype.send = function(message) {\n      throw new connect.NotImplementedError();\n   };\n\n   /**\n    * Provide a method to be called when messages are received from this stream.\n    * This method must be implemented by subclasses.\n    */\n   Stream.prototype.onMessage = function(f) {\n      throw new connect.NotImplementedError();\n   };\n\n   /**---------------------------------------------------------------\n    * class NullStream extends Stream\n    *\n    * A null stream which provides no message sending or receiving facilities.\n    */\n   var NullStream = function() {\n      Stream.call(this);\n   };\n   NullStream.prototype = Object.create(Stream.prototype);\n   NullStream.prototype.constructor = NullStream;\n\n   NullStream.prototype.onMessage = function(f) {};\n   NullStream.prototype.send = function(message) {};\n\n   /**---------------------------------------------------------------\n    * class WindowStream extends Stream\n    *\n    * A stream for communicating with a window object.  The domain provided\n    * must match the allowed message domains of the downstream receiver\n    * or messages will be rejected, see https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage\n    * for more info.\n    */\n   var WindowStream = function(win, domain) {\n      Stream.call(this);\n      this.window = win;\n      this.domain = domain || '*';\n   };\n   WindowStream.prototype = Object.create(Stream.prototype);\n   WindowStream.prototype.constructor = WindowStream;\n\n   WindowStream.prototype.send = function(message) {\n      this.window.postMessage(message, this.domain);\n   };\n\n   WindowStream.prototype.onMessage = function(f) {\n      this.window.addEventListener(\"message\", f);\n   };\n\n   /**---------------------------------------------------------------\n    * class WindowIOStream extends Stream\n    *\n    * A stream used by IFrame/popup windows to communicate with their parents\n    * and vise versa.\n    *\n    * This object encapsulates the fact that incoming and outgoing messages\n    * arrive on different windows and allows this to be managed as a single\n    * Stream object.\n    */\n   var WindowIOStream = function(inputwin, outputwin, domain) {\n      Stream.call(this);\n      this.input = inputwin;\n      this.output = outputwin;\n      this.domain = domain || '*';\n   };\n   WindowIOStream.prototype = Object.create(Stream.prototype);\n   WindowIOStream.prototype.constructor = WindowIOStream;\n\n   WindowIOStream.prototype.send = function(message) {\n      this.output.postMessage(message, this.domain);\n   };\n\n   WindowIOStream.prototype.onMessage = function(f) {\n      this.input.addEventListener(\"message\", f);\n   };\n\n   /**---------------------------------------------------------------\n    * class PortStream extends Stream\n    *\n    * A stream wrapping an HTML5 Worker port.  This could be the port\n    * used to connect to a Worker or one of the multitude of ports\n    * made available to a SharedWorker for communication back to\n    * its connected clients.\n    */\n   var PortStream = function(port) {\n      Stream.call(this);\n      this.port = port;\n      this.id = connect.randomId();\n   };\n   PortStream.prototype = Object.create(Stream.prototype);\n   PortStream.prototype.constructor = PortStream;\n\n   PortStream.prototype.send = function(message) {\n      this.port.postMessage(message);\n   };\n\n   PortStream.prototype.onMessage = function(f) {\n      this.port.addEventListener(\"message\", f);\n   };\n\n   PortStream.prototype.getId = function() {\n      return this.id;\n   };\n\n   /**---------------------------------------------------------------\n    * class StreamMultiplexer extends Stream\n    *\n    * A wrapper for multiplexed downstream communication with\n    * multiple streams at once.  Mainly useful for the SharedWorker to\n    * broadcast events to many PortStream objects at once.\n    */\n   var StreamMultiplexer = function(streams) {\n      Stream.call(this);\n      this.streamMap = streams ?\n         connect.index(streams, function(s) { return s.getId(); }) : {};\n      this.messageListeners = [];\n   };\n   StreamMultiplexer.prototype = Object.create(Stream.prototype);\n   StreamMultiplexer.prototype.constructor = StreamMultiplexer;\n\n   /**\n    * Send a message to all ports in the multiplexer.\n    */\n   StreamMultiplexer.prototype.send = function(message) {\n      this.getStreams().forEach(function(stream) {\n         try {\n            stream.send(message);\n\n         } catch (e) {\n            // Couldn't send message to one of the downstreams for some reason...\n            // No reliable logging possible without further failures,\n            // no recovery, just eat it.\n         }\n      });\n   };\n\n   /**\n    * Register a method which will be called when a message is received from\n    * any of the downstreams.\n    */\n   StreamMultiplexer.prototype.onMessage = function(f) {\n      this.messageListeners.push(f);\n\n      // Update existing streams with the new listener.\n      this.getStreams().forEach(function(stream) {\n         stream.onMessage(f);\n      });\n   };\n\n   /**\n    * Add a stream to the multiplexer.\n    */\n   StreamMultiplexer.prototype.addStream = function(stream) {\n      var self = this;\n      this.streamMap[stream.getId()] = stream;\n\n      // Update stream with existing listeners.\n      this.messageListeners.forEach(function(messageListener) {\n         stream.onMessage(messageListener);\n      });\n   };\n\n   /**\n    * Remove the given downstream.  This is typically used in response\n    * to the SharedWorker's onclose event, indicating that a consumer\n    * tab has been closed.\n    */\n   StreamMultiplexer.prototype.removeStream = function(stream) {\n      delete this.streamMap[stream.getId()];\n   };\n\n   /**\n    * Get a list of streams in the multiplexer.\n    */\n   StreamMultiplexer.prototype.getStreams = function(stream) {\n      return connect.values(this.streamMap);\n   };\n\n   /**\n    * Get the stream matching the given port.\n    */\n   StreamMultiplexer.prototype.getStreamForPort = function(port) {\n      return connect.find(this.getStreams(), function(s) {\n         return s.port === port;\n      });\n   };\n\n   /**---------------------------------------------------------------\n    * class Conduit\n    *\n    * An object which bridges an upstream and a downstream, allowing messages\n    * to be passed to and from each and providing an event bus for event\n    * subscriptions to be made upstream and downstream.\n    */\n   var Conduit = function(name, upstream, downstream) {\n      this.name = name;\n      this.upstream = upstream || new NullStream();\n      this.downstream = downstream || new NullStream();\n      this.downstreamBus = new connect.EventBus();\n      this.upstreamBus = new connect.EventBus();\n\n      this.upstream.onMessage(connect.hitch(this, this._dispatchEvent, this.upstreamBus));\n      this.downstream.onMessage(connect.hitch(this, this._dispatchEvent, this.downstreamBus));\n   };\n\n   Conduit.prototype.onUpstream = function(eventName, f) {\n      connect.assertNotNull(eventName, 'eventName');\n      connect.assertNotNull(f, 'f');\n      connect.assertTrue(connect.isFunction(f), 'f must be a function');\n      return this.upstreamBus.subscribe(eventName, f);\n   };\n\n   Conduit.prototype.onAllUpstream = function(f) {\n      connect.assertNotNull(f, 'f');\n      connect.assertTrue(connect.isFunction(f), 'f must be a function');\n      return this.upstreamBus.subscribeAll(f);\n   };\n\n   Conduit.prototype.onDownstream = function(eventName, f) {\n      connect.assertNotNull(eventName, 'eventName');\n      connect.assertNotNull(f, 'f');\n      connect.assertTrue(connect.isFunction(f), 'f must be a function');\n      return this.downstreamBus.subscribe(eventName, f);\n   };\n\n   Conduit.prototype.onAllDownstream = function(f) {\n      connect.assertNotNull(f, 'f');\n      connect.assertTrue(connect.isFunction(f), 'f must be a function');\n      return this.downstreamBus.subscribeAll(f);\n   };\n\n   Conduit.prototype.sendUpstream = function(eventName, data) {\n      connect.assertNotNull(eventName, 'eventName');\n      this.upstream.send({event: eventName, data: data});\n   };\n\n   Conduit.prototype.sendDownstream = function(eventName, data) {\n      connect.assertNotNull(eventName, 'eventName');\n      this.downstream.send({event: eventName, data: data});\n   };\n\n   Conduit.prototype._dispatchEvent = function(bus, messageEvent) {\n      var message = messageEvent.data;\n      if (message.event) {\n         bus.trigger(message.event, message.data);\n      }\n   };\n\n   /**\n    * Returns a closure which passes events upstream.\n    *\n    * Usage:\n    * conduit.onDownstream(\"MyEvent\", conduit.passUpstream());\n    */\n   Conduit.prototype.passUpstream = function() {\n      var self = this;\n      return function(data, eventName) {\n         self.upstream.send({event: eventName, data: data});\n      };\n   };\n\n   /**\n    * Returns a closure which passes events downstream.\n    *\n    * Usage:\n    * conduit.onUpstream(\"MyEvent\", conduit.passDownstream());\n    */\n   Conduit.prototype.passDownstream = function() {\n      var self = this;\n      return function(data, eventName) {\n         self.downstream.send({event: eventName, data: data});\n      };\n   };\n\n   /**\n    * Shutdown the conduit's event busses and remove all subscriptions.\n    */\n   Conduit.prototype.shutdown = function() {\n      this.upstreamBus.unsubscribeAll();\n      this.downstreamBus.unsubscribeAll();\n   };\n\n   /**---------------------------------------------------------------\n    * class IFrameConduit extends Conduit\n    *\n    * Creates a conduit for the given IFrame element.\n    */\n   var IFrameConduit = function(name, window, iframe, domain) {\n      Conduit.call(this, name, new WindowIOStream(window, iframe.contentWindow, domain || '*'), null);\n   };\n   IFrameConduit.prototype = Object.create(Conduit.prototype);\n   IFrameConduit.prototype.constructor = IFrameConduit;\n\n   connect.Stream = Stream;\n   connect.NullStream = NullStream;\n   connect.WindowStream = WindowStream;\n   connect.WindowIOStream = WindowIOStream;\n   connect.PortStream = PortStream;\n   connect.StreamMultiplexer = StreamMultiplexer;\n   connect.Conduit = Conduit;\n   connect.IFrameConduit = IFrameConduit;\n})();\n\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n(function() {\n   var global = this;\n   connect = global.connect || {};\n   global.connect = connect;\n   global.lily = connect;\n\n   /**---------------------------------------------------------------\n    * enum ClientMethods\n    */\n   connect.ClientMethods = connect.makeEnum([\n         'getAgentSnapshot',\n         'putAgentState',\n         'getAgentStates',\n         'getDialableCountryCodes',\n         'getRoutingProfileQueues',\n         'getAgentPermissions',\n         'getAgentConfiguration',\n         'updateAgentConfiguration',\n         'acceptContact',\n         'createOutboundContact',\n         'createTaskContact',\n         'clearContact',\n         'completeContact',\n         'destroyContact',\n         'rejectContact',\n         'notifyContactIssue',\n         'updateContactAttributes',\n         'createAdditionalConnection',\n         'destroyConnection',\n         'holdConnection',\n         'resumeConnection',\n         'toggleActiveConnections',\n         'conferenceConnections',\n         'sendClientLogs',\n         'sendDigits',\n         'sendSoftphoneCallReport',\n         'sendSoftphoneCallMetrics',\n         'getEndpoints',\n         'getNewAuthToken',\n         'createTransport'\n   ]);\n\n   /**---------------------------------------------------------------\n    * enum AgentAppClientMethods\n    */\n   connect.AgentAppClientMethods = {\n      GET_SPEAKER_ID: \"AgentAppService.Lcms.getContact\",\n      ENROLL_SPEAKER_IN_VOICEID: \"AgentAppService.VoiceId.enrollBySession\",\n      EVALUATE_SPEAKER_WITH_VOICEID: \"AgentAppService.VoiceId.evaluateSession\",\n      GET_SPEAKER_STATUS: \"AgentAppService.VoiceId.describeSpeaker\",\n      OPT_OUT_VOICEID_SPEAKER: \"AgentAppService.VoiceId.optOutSpeaker\",\n      DESCRIBE_VOICEID_SESSION: \"AgentAppService.VoiceId.describeSession\",\n      UPDATE_VOICEID_SESSION: \"AgentAppService.VoiceId.updateSession\",\n      START_VOICEID_SESSION: \"AgentAppService.Nasa.startVoiceIdSession\",\n   };\n\n   /**---------------------------------------------------------------\n    * enum MasterMethods\n    */\n   connect.MasterMethods = connect.makeEnum([\n         'becomeMaster',\n         'checkMaster'\n   ]);\n\n   /**---------------------------------------------------------------\n    * abstract class ClientBase\n    */\n   var ClientBase = function() {};\n   ClientBase.EMPTY_CALLBACKS = {\n      success: function() { },\n      failure: function() { }\n   };\n\n   ClientBase.prototype.call = function(method, paramsIn, callbacksIn) {\n      connect.assertNotNull(method, 'method');\n      var params = paramsIn || {};\n      var callbacks = callbacksIn || ClientBase.EMPTY_CALLBACKS;\n      this._callImpl(method, params, callbacks);\n   };\n\n   ClientBase.prototype._callImpl = function(method, params, callbacks) {\n      throw new connect.NotImplementedError();\n   };\n\n   /**---------------------------------------------------------------\n    * class NullClient extends ClientBase\n    */\n   var NullClient = function() {\n      ClientBase.call(this);\n   };\n   NullClient.prototype = Object.create(ClientBase.prototype);\n   NullClient.prototype.constructor = NullClient;\n\n   NullClient.prototype._callImpl = function(method, params, callbacks) {\n      if (callbacks && callbacks.failure) {\n         var message = connect.sprintf('No such method exists on NULL client: %s', method);\n         callbacks.failure(new connect.ValueError(message), {message: message});\n      }\n   };\n\n   /**---------------------------------------------------------------\n    * abstract class UpstreamConduitClientBase extends ClientBase\n    */\n   var UpstreamConduitClientBase = function(conduit, requestEvent, responseEvent) {\n      ClientBase.call(this);\n      this.conduit = conduit;\n      this.requestEvent = requestEvent;\n      this.responseEvent = responseEvent;\n      this._requestIdCallbacksMap = {};\n\n      this.conduit.onUpstream(responseEvent, connect.hitch(this, this._handleResponse));\n   };\n\n   UpstreamConduitClientBase.prototype = Object.create(ClientBase.prototype);\n   UpstreamConduitClientBase.prototype.constructor = UpstreamConduitClientBase;\n\n   UpstreamConduitClientBase.prototype._callImpl = function(method, params, callbacks) {\n      var request = connect.EventFactory.createRequest(this.requestEvent, method, params);\n      this._requestIdCallbacksMap[request.requestId] = callbacks;\n      this.conduit.sendUpstream(request.event, request);\n   };\n\n   UpstreamConduitClientBase.prototype._getCallbacksForRequest = function(requestId) {\n      var callbacks = this._requestIdCallbacksMap[requestId] || null;\n\n      if (callbacks != null) {\n         delete this._requestIdCallbacksMap[requestId];\n      }\n\n      return callbacks;\n   };\n\n   UpstreamConduitClientBase.prototype._handleResponse = function(data) {\n      var callbacks = this._getCallbacksForRequest(data.requestId);\n      if (callbacks == null) {\n         return;\n      }\n\n      if (data.err && callbacks.failure) {\n         callbacks.failure(data.err, data.data);\n\n      } else if (callbacks.success) {\n         callbacks.success(data.data);\n      }\n   };\n\n   /**---------------------------------------------------------------\n    * class UpstreamConduitClient extends ClientBase\n    */\n   var UpstreamConduitClient = function(conduit) {\n      UpstreamConduitClientBase.call(this, conduit, connect.EventType.API_REQUEST, connect.EventType.API_RESPONSE);\n   };\n   UpstreamConduitClient.prototype = Object.create(UpstreamConduitClientBase.prototype);\n   UpstreamConduitClient.prototype.constructor = UpstreamConduitClient;\n\n   /**---------------------------------------------------------------\n    * class UpstreamConduitMasterClient extends ClientBase\n    */\n   var UpstreamConduitMasterClient = function(conduit) {\n      UpstreamConduitClientBase.call(this, conduit, connect.EventType.MASTER_REQUEST, connect.EventType.MASTER_RESPONSE);\n   };\n   UpstreamConduitMasterClient.prototype = Object.create(UpstreamConduitClientBase.prototype);\n   UpstreamConduitMasterClient.prototype.constructor = UpstreamConduitMasterClient;\n   \n   /**---------------------------------------------------------------\n   * class AgentAppClient extends ClientBase\n   */\n   var AgentAppClient = function(authCookieName, authToken, endpoint) {\n      connect.assertNotNull(authCookieName, 'authCookieName');\n      connect.assertNotNull(authToken, 'authToken');\n      connect.assertNotNull(endpoint, 'endpoint');\n      ClientBase.call(this);\n      this.endpointUrl = connect.getUrlWithProtocol(endpoint);\n      this.authToken = authToken;\n      this.authCookieName = authCookieName\n   };\n\n   AgentAppClient.prototype = Object.create(ClientBase.prototype);\n   AgentAppClient.prototype.constructor = AgentAppClient;\n\n   AgentAppClient.prototype._callImpl = function(method, params, callbacks) {\n      var self = this;\n      var bear = {};\n      bear[self.authCookieName] = self.authToken;\n      var options = {\n         method: 'post',\n         body: JSON.stringify(params || {}),\n         headers: {\n               'Accept': 'application/json',\n               'Content-Type': 'application/json',\n               'X-Amz-target': method,\n               'X-Amz-Bearer': JSON.stringify(bear)\n         }\n      };\n      connect.fetch(self.endpointUrl, options).then(function(res){\n         callbacks.success(res);\n      }).catch(function(err){\n         callbacks.failure(err);\n      })\n   };\n   /**---------------------------------------------------------------\n    * class AWSClient extends ClientBase\n    */\n   var AWSClient = function(authToken, region, endpointIn) {\n      connect.assertNotNull(authToken, 'authToken');\n      connect.assertNotNull(region, 'region');\n      ClientBase.call(this);\n      AWS.config.credentials = new AWS.Credentials({});\n      AWS.config.region = region;\n      this.authToken = authToken;\n      var baseUrl = connect.getBaseUrl();\n      var endpointUrl = endpointIn || ( \n         baseUrl.includes(\".awsapps.com\")\n            ? baseUrl + '/connect/api'\n            : baseUrl + '/api'\n      );\n      var endpoint = new AWS.Endpoint(endpointUrl);\n      this.client = new AWS.Connect({endpoint: endpoint});\n   };\n   AWSClient.prototype = Object.create(ClientBase.prototype);\n   AWSClient.prototype.constructor = AWSClient;\n\n   AWSClient.prototype._callImpl = function(method, params, callbacks) {\n      var self = this;\n      var log = connect.getLog();\n\n      if (! connect.contains(this.client, method)) {\n         var message = connect.sprintf('No such method exists on AWS client: %s', method);\n         callbacks.failure(new connect.ValueError(message), {message: message});\n\n      } else {\n         params = this._translateParams(method, params);\n\n         log.trace(\"AWSClient: --> Calling operation '%s'\", method).sendInternalLogToServer();\n\n         this.client[method](params)\n            .on('build', function(request) {\n               request.httpRequest.headers['X-Amz-Bearer'] = self.authToken;\n            })\n            .send(function(err, data) {\n               try {\n                  if (err) {\n                     if (err.code === connect.CTIExceptions.UNAUTHORIZED_EXCEPTION) {\n                        callbacks.authFailure();\n                     } else if (callbacks.accessDenied && (err.code === connect.CTIExceptions.ACCESS_DENIED_EXCEPTION || err.statusCode === 403)) {\n                        callbacks.accessDenied();\n                     } else {\n                        // Can't pass err directly to postMessage\n                        // postMessage() tries to clone the err object and failed.\n                        // Refer to https://github.com/goatslacker/alt-devtool/issues/5\n                        var error = {};\n                        error.type = err.code;\n                        error.message = err.message;\n                        error.stack = err.stack ? err.stack.split('\\n') : [];\n                        callbacks.failure(error, data);\n                     }\n\n                     log.trace(\"AWSClient: <-- Operation '%s' failed: %s\", method, JSON.stringify(err)).sendInternalLogToServer();\n\n                  } else {\n                     log.trace(\"AWSClient: <-- Operation '%s' succeeded.\", method).withObject(data).sendInternalLogToServer();\n                     callbacks.success(data);\n                  }\n               } catch (e) {\n                  connect.getLog().error(\"Failed to handle AWS API request for method %s\", method)\n                        .withException(e).sendInternalLogToServer();\n               }\n            });\n      }\n   };\n\n   AWSClient.prototype._requiresAuthenticationParam = function (method) {\n      return method !== connect.ClientMethods.COMPLETE_CONTACT &&\n         method !== connect.ClientMethods.CLEAR_CONTACT &&\n         method !== connect.ClientMethods.REJECT_CONTACT &&\n         method !== connect.ClientMethods.CREATE_TASK_CONTACT;\n   };\n\n   AWSClient.prototype._translateParams = function(method, params) {\n      switch (method) {\n         case connect.ClientMethods.UPDATE_AGENT_CONFIGURATION:\n            params.configuration = this._translateAgentConfiguration(params.configuration);\n            break;\n\n         case connect.ClientMethods.SEND_SOFTPHONE_CALL_METRICS:\n            params.softphoneStreamStatistics = this._translateSoftphoneStreamStatistics(\n                  params.softphoneStreamStatistics);\n            break;\n\n         case connect.ClientMethods.SEND_SOFTPHONE_CALL_REPORT:\n            params.report = this._translateSoftphoneCallReport(params.report);\n            break;\n\n         default:\n            break;\n      }\n\n      if (this._requiresAuthenticationParam(method)) {\n         params.authentication = {\n            authToken: this.authToken\n         };\n      }\n\n      return params;\n   };\n\n   AWSClient.prototype._translateAgentConfiguration = function(config) {\n      return {\n         name: config.name,\n         softphoneEnabled: config.softphoneEnabled,\n         softphoneAutoAccept: config.softphoneAutoAccept,\n         extension: config.extension,\n         routingProfile: this._translateRoutingProfile(config.routingProfile),\n         agentPreferences: config.agentPreferences\n      };\n   };\n\n   AWSClient.prototype._translateRoutingProfile = function(profile) {\n      return {\n         name: profile.name,\n         routingProfileARN: profile.routingProfileARN,\n         defaultOutboundQueue: this._translateQueue(profile.defaultOutboundQueue)\n      };\n   };\n\n   AWSClient.prototype._translateQueue = function(queue) {\n      return {\n         queueARN:   queue.queueARN,\n         name:       queue.name\n      };\n   };\n\n   AWSClient.prototype._translateSoftphoneStreamStatistics = function(stats) {\n      stats.forEach(function(stat) {\n         if ('packetsCount' in stat) {\n            stat.packetCount = stat.packetsCount;\n            delete stat.packetsCount;\n         }\n      });\n\n      return stats;\n   };\n\n   AWSClient.prototype._translateSoftphoneCallReport = function(report) {\n      if ('handshakingTimeMillis' in report) {\n         report.handshakeTimeMillis = report.handshakingTimeMillis;\n         delete report.handshakingTimeMillis;\n      }\n\n      if ('preTalkingTimeMillis' in report) {\n         report.preTalkTimeMillis = report.preTalkingTimeMillis;\n         delete report.preTalkingTimeMillis;\n      }\n\n      if ('handshakingFailure' in report) {\n         report.handshakeFailure = report.handshakingFailure;\n         delete report.handshakingFailure;\n      }\n\n      if ('talkingTimeMillis' in report) {\n         report.talkTimeMillis = report.talkingTimeMillis;\n         delete report.talkingTimeMillis;\n      }\n\n      report.softphoneStreamStatistics = this._translateSoftphoneStreamStatistics(\n            report.softphoneStreamStatistics);\n\n      return report;\n   };\n\n   connect.ClientBase = ClientBase;\n   connect.NullClient = NullClient;\n   connect.UpstreamConduitClient = UpstreamConduitClient;\n   connect.UpstreamConduitMasterClient = UpstreamConduitMasterClient;\n   connect.AWSClient = AWSClient;\n   connect.AgentAppClient = AgentAppClient;\n\n})();\n\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n(function() {\n   var global = this;\n   connect = global.connect || {};\n   global.connect = connect;\n   global.lily = connect;\n\n   /**-------------------------------------------------------------------------\n    * GraphLink <<abstract class>>\n    *\n    * Represents the association of one or more attributes to a state transition.\n    */\n   var GraphLink = function(fromState, toState) {\n      connect.assertNotNull(fromState, 'fromState');\n      connect.assertNotNull(toState, 'toState');\n      this.fromState = fromState;\n      this.toState = toState;\n   };\n\n   GraphLink.prototype.getAssociations = function(context) {\n      throw connect.NotImplementedError();\n   };\n\n   GraphLink.prototype.getFromState = function() {\n      return this.fromState;\n   };\n\n   GraphLink.prototype.getToState = function() {\n      return this.toState;\n   };\n\n   /**-------------------------------------------------------------------------\n    * DirectGraphLink <<concrete class>> extends GraphLink\n    *\n    * Represents the by-value representation of one or more attributes to a\n    * state transition.\n    */\n   var DirectGraphLink = function(fromState, toState, associations) {\n      connect.assertNotNull(fromState, 'fromState');\n      connect.assertNotNull(toState, 'toState');\n      connect.assertNotNull(associations, 'associations');\n      GraphLink.call(this, fromState, toState);\n      this.associations = associations;\n   };\n   DirectGraphLink.prototype = Object.create(GraphLink.prototype);\n   DirectGraphLink.prototype.constructor = DirectGraphLink;\n\n   DirectGraphLink.prototype.getAssociations = function(context) {\n      return this.associations;\n   };\n\n   /**\n    * FunctionalGraphLink <<concrete class>> extends GraphLink\n    *\n    * Represents a functional association of one or more attributes to a\n    * state transition.\n    */\n   var FunctionalGraphLink = function(fromState, toState, closure) {\n      connect.assertNotNull(fromState, 'fromState');\n      connect.assertNotNull(toState, 'toState');\n      connect.assertNotNull(closure, 'closure');\n      connect.assertTrue(connect.isFunction(closure), 'closure must be a function');\n      GraphLink.call(this, fromState, toState);\n      this.closure = closure;\n   };\n   FunctionalGraphLink.prototype = Object.create(GraphLink.prototype);\n   FunctionalGraphLink.prototype.constructor = FunctionalGraphLink;\n\n   FunctionalGraphLink.prototype.getAssociations = function(context) {\n      return this.closure(context, this.getFromState(), this.getToState());\n   };\n\n   /**-------------------------------------------------------------------------\n    * EventGraph <<class>>\n    *\n    * Builds a map of associations from one state to another in context of a\n    * particular object.  The associations can be direct (one or more values)\n    * or functional (a method returning one or more values), and are used to\n    * provide additional contextual event hooks for the UI to consume.\n    */\n   var EventGraph = function() {\n      this.fromMap = {};\n   };\n   EventGraph.ANY = \"<<any>>\";\n\n   EventGraph.prototype.assoc = function(fromStateObj, toStateObj, assocObj) {\n      var self = this;\n\n      if (! fromStateObj) {\n         throw new Error(\"fromStateObj is not defined.\");\n      }\n\n      if (! toStateObj) {\n         throw new Error(\"toStateObj is not defined.\");\n      }\n\n      if (! assocObj) {\n         throw new Error(\"assocObj is not defined.\");\n      }\n\n      if (fromStateObj instanceof Array) {\n         fromStateObj.forEach(function(fromState) {\n            self.assoc(fromState, toStateObj, assocObj);\n         });\n      } else if (toStateObj instanceof Array) {\n         toStateObj.forEach(function(toState) {\n            self.assoc(fromStateObj, toState, assocObj);\n         });\n      } else {\n         if (typeof assocObj === \"function\") {\n            this._addAssociation(new FunctionalGraphLink(fromStateObj, toStateObj, assocObj));\n         } else if (assocObj instanceof Array) {\n            this._addAssociation(new DirectGraphLink(fromStateObj, toStateObj, assocObj));\n         } else {\n            this._addAssociation(new DirectGraphLink(fromStateObj, toStateObj, [assocObj]));\n         }\n      }\n      return this;\n   };\n\n   EventGraph.prototype.getAssociations = function(context, fromState, toState) {\n      connect.assertNotNull(fromState, 'fromState');\n      connect.assertNotNull(toState, 'toState');\n      var associations = [];\n\n      var toMapFromAny = this.fromMap[EventGraph.ANY] || {};\n      var toMap = this.fromMap[fromState] || {};\n\n      associations = associations.concat(this._getAssociationsFromMap(\n               toMapFromAny, context, fromState, toState));\n      associations = associations.concat(this._getAssociationsFromMap(\n               toMap, context, fromState, toState));\n\n      return associations;\n   };\n\n   EventGraph.prototype._addAssociation = function(assoc) {\n      var toMap = this.fromMap[assoc.getFromState()];\n\n      if (! toMap) {\n         toMap = this.fromMap[assoc.getFromState()] = {};\n      }\n\n      var assocList = toMap[assoc.getToState()];\n\n      if (! assocList) {\n         assocList = toMap[assoc.getToState()] = [];\n      }\n\n      assocList.push(assoc);\n   };\n\n   EventGraph.prototype._getAssociationsFromMap = function(map, context, fromState, toState) {\n      var assocList = (map[EventGraph.ANY] || []).concat(map[toState] || []);\n      return assocList.reduce(function(prev, assoc) {\n         return prev.concat(assoc.getAssociations(context));\n      }, []);\n   };\n\n   connect.EventGraph = EventGraph;\n\n})();\n\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n\n  /*----------------------------------------------------------------\n   * enum AgentStateType\n   */\n  connect.AgentStateType = connect.makeEnum([\n    'init',\n    'routable',\n    'not_routable',\n    'offline'\n  ]);\n  connect.AgentStatusType = connect.AgentStateType;\n\n  /**\n   * enum AgentAvailStates\n   */\n  connect.AgentAvailStates = connect.makeEnum([\n    'Init',\n    'Busy',\n    'AfterCallWork',\n    'CallingCustomer',\n    'Dialing',\n    'Joining',\n    'PendingAvailable',\n    'PendingBusy'\n  ]);\n\n  /**\n   * enum AgentErrorStates\n   */\n  connect.AgentErrorStates = connect.makeEnum([\n    'Error',\n    'AgentHungUp',\n    'BadAddressAgent',\n    'BadAddressCustomer',\n    'Default',\n    'FailedConnectAgent',\n    'FailedConnectCustomer',\n    'InvalidLocale',\n    'LineEngagedAgent',\n    'LineEngagedCustomer',\n    'MissedCallAgent',\n    'MissedCallCustomer',\n    'MultipleCcpWindows',\n    'RealtimeCommunicationError'\n  ]);\n\n  /*----------------------------------------------------------------\n   * enum AddressType\n   */\n  connect.EndpointType = connect.makeEnum([\n    'phone_number',\n    'agent',\n    'queue'\n  ]);\n  connect.AddressType = connect.EndpointType;\n\n  /*----------------------------------------------------------------\n   * enum ConnectionType\n   */\n  connect.ConnectionType = connect.makeEnum([\n    'agent',\n    'inbound',\n    'outbound',\n    'monitoring'\n  ]);\n\n  /*----------------------------------------------------------------\n   * enum ConnectionStateType\n   */\n  connect.ConnectionStateType = connect.makeEnum([\n    'init',\n    'connecting',\n    'connected',\n    'hold',\n    'disconnected'\n  ]);\n  connect.ConnectionStatusType = connect.ConnectionStateType;\n\n  connect.CONNECTION_ACTIVE_STATES = connect.set([\n    connect.ConnectionStateType.CONNECTING,\n    connect.ConnectionStateType.CONNECTED,\n    connect.ConnectionStateType.HOLD\n  ]);\n\n  /*----------------------------------------------------------------\n   * enum ContactStateType\n   */\n  connect.ContactStateType = connect.makeEnum([\n    'init',\n    'incoming',\n    'pending',\n    'connecting',\n    'connected',\n    'missed',\n    'error',\n    'ended'\n  ]);\n  connect.ContactStatusType = connect.ContactStateType;\n\n  connect.CONTACT_ACTIVE_STATES = connect.makeEnum([\n    'incoming',\n    'pending',\n    'connecting',\n    'connected'\n  ]);\n\n  /*----------------------------------------------------------------\n   * enum ContactType\n   */\n  connect.ContactType = connect.makeEnum([\n    'voice',\n    'queue_callback',\n    'chat',\n    'task'\n  ]);\n\n  /*----------------------------------------------------------------\n   * enum ContactInitiationMethod\n   */\n  connect.ContactInitiationMethod = connect.makeEnum([\n    'inbound',\n    'outbound',\n    'transfer',\n    'queue_transfer',\n    'callback',\n    'api',\n    'disconnect'\n  ]);\n\n  /*----------------------------------------------------------------\n  * enum ChannelType\n  */\n  connect.ChannelType = connect.makeEnum([\n    'VOICE',\n    'CHAT',\n    'TASK'\n  ]);\n\n  /*----------------------------------------------------------------\n  * enum MediaType\n  */\n  connect.MediaType = connect.makeEnum([\n    'softphone',\n    'chat',\n    'task'\n  ]);\n\n  /*----------------------------------------------------------------\n   * enum SoftphoneCallType\n   */\n  connect.SoftphoneCallType = connect.makeEnum([\n    'audio_video',\n    'video_only',\n    'audio_only',\n    'none'\n  ]);\n\n  /*----------------------------------------------------------------\n   * enum for SoftphoneErrorTypes\n   */\n  connect.SoftphoneErrorTypes = connect.makeEnum([\n    'unsupported_browser',\n    'microphone_not_shared',\n    'signalling_handshake_failure',\n    'signalling_connection_failure',\n    'ice_collection_timeout',\n    'user_busy_error',\n    'webrtc_error',\n    'realtime_communication_error',\n    'other'\n  ]);\n\n  /*----------------------------------------------------------------\n   * enum for VoiceIdErrorTypes\n   */\n  connect.VoiceIdErrorTypes = connect.makeEnum([\n    'no_speaker_id_found',\n    'get_speaker_id_failed',\n    'get_speaker_status_failed',\n    'opt_out_speaker_failed',\n    'start_session_failed',\n    'evaluate_speaker_failed',\n    'describe_session_failed',\n    'enroll_speaker_failed',\n    'update_speaker_id_failed',\n    'not_supported_on_conference_calls',\n    'timeout'\n  ]);\n\n  /*----------------------------------------------------------------\n   * enum for CTI exceptions\n   */\n  connect.CTIExceptions = connect.makeEnum([\n    \"AccessDeniedException\",\n    \"InvalidStateException\",\n    \"BadEndpointException\",\n    \"InvalidAgentARNException\",\n    \"InvalidConfigurationException\",\n    \"InvalidContactTypeException\",\n    \"PaginationException\",\n    \"RefreshTokenExpiredException\",\n    \"SendDataFailedException\",\n    \"UnauthorizedException\",\n    \"QuotaExceededException\"\n  ]);\n  /*----------------------------------------------------------------\n   * enum for VoiceId streaming status\n   */\n  connect.VoiceIdStreamingStatus = connect.makeEnum([\n    \"ONGOING\",\n    \"ENDED\"\n  ]);\n\n  /*----------------------------------------------------------------\n   * enum for VoiceId authentication decision\n   */\n  connect.VoiceIdAuthenticationDecision = connect.makeEnum([\n    \"ACCEPT\",\n    \"REJECT\",\n    \"NOT_ENOUGH_SPEECH\",\n    \"SPEAKER_NOT_ENROLLED\",\n    \"SPEAKER_OPTED_OUT\",\n    \"SPEAKER_ID_NOT_PROVIDED\"\n  ]);\n\n  /*----------------------------------------------------------------\n   * enum for contact flow authentication decision \n   */\n  connect.ContactFlowAuthenticationDecision = connect.makeEnum([\n    \"Authenticated\",\n    \"NotAuthenticated\",\n    \"Inconclusive\",\n    \"NotEnrolled\",\n    \"OptedOut\",\n    \"Error\"\n  ]);\n\n  /*----------------------------------------------------------------\n   * enum for VoiceId EnrollmentRequestStatus status\n   */\n  connect.VoiceIdEnrollmentRequestStatus = connect.makeEnum([\n    \"NOT_ENOUGH_SPEECH\",\n    \"IN_PROGRESS\",\n    \"COMPLETED\",\n    \"FAILED\"\n  ]);\n\n  /*----------------------------------------------------------------\n   * class Agent\n   */\n  var Agent = function () {\n    if (!connect.agent.initialized) {\n      throw new connect.StateError(\"The agent is not yet initialized!\");\n    }\n  };\n\n  Agent.prototype._getData = function () {\n    return connect.core.getAgentDataProvider().getAgentData();\n  };\n\n  Agent.prototype._createContactAPI = function (contactData) {\n    return new connect.Contact(contactData.contactId);\n  };\n\n  Agent.prototype.onContactPending = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.CONTACT_PENDING, f);\n  };\n\n  Agent.prototype.onRefresh = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.REFRESH, f);\n  };\n\n  Agent.prototype.onRoutable = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.ROUTABLE, f);\n  };\n\n  Agent.prototype.onNotRoutable = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.NOT_ROUTABLE, f);\n  };\n\n  Agent.prototype.onOffline = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.OFFLINE, f);\n  };\n\n  Agent.prototype.onError = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.ERROR, f);\n  };\n\n  Agent.prototype.onSoftphoneError = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.SOFTPHONE_ERROR, f);\n  };\n\n  Agent.prototype.onWebSocketConnectionLost = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.WEBSOCKET_CONNECTION_LOST, f);\n  }\n\n  Agent.prototype.onWebSocketConnectionGained = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.WEBSOCKET_CONNECTION_GAINED, f);\n  }\n\n  Agent.prototype.onAfterCallWork = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.ACW, f);\n  };\n\n  Agent.prototype.onStateChange = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.AgentEvents.STATE_CHANGE, f);\n  };\n\n  Agent.prototype.onMuteToggle = function (f) {\n    connect.core.getUpstream().onUpstream(connect.AgentEvents.MUTE_TOGGLE, f);\n  };\n\n  Agent.prototype.onLocalMediaStreamCreated = function (f) {\n    connect.core.getUpstream().onUpstream(connect.AgentEvents.LOCAL_MEDIA_STREAM_CREATED, f);\n  };\n\n  Agent.prototype.onSpeakerDeviceChanged = function(f){\n    connect.core.getUpstream().onUpstream(connect.ConfigurationEvents.SPEAKER_DEVICE_CHANGED, f);\n  }\n\n  Agent.prototype.onMicrophoneDeviceChanged = function(f){\n    connect.core.getUpstream().onUpstream(connect.ConfigurationEvents.MICROPHONE_DEVICE_CHANGED, f);\n  }\n\n  Agent.prototype.onRingerDeviceChanged = function(f){\n    connect.core.getUpstream().onUpstream(connect.ConfigurationEvents.RINGER_DEVICE_CHANGED, f);\n  }\n\n  Agent.prototype.mute = function () {\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,\n      {\n        event: connect.EventType.MUTE,\n        data: { mute: true }\n      });\n  };\n\n  Agent.prototype.unmute = function () {\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,\n      {\n        event: connect.EventType.MUTE,\n        data: { mute: false }\n      });\n  };\n\n  Agent.prototype.setSpeakerDevice = function (deviceId) {\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.ConfigurationEvents.SET_SPEAKER_DEVICE,\n      data: { deviceId: deviceId }\n    });\n  };\n\n  Agent.prototype.setMicrophoneDevice = function (deviceId) {\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.ConfigurationEvents.SET_MICROPHONE_DEVICE,\n      data: { deviceId: deviceId }\n    });\n  };\n\n  Agent.prototype.setRingerDevice = function (deviceId) {\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.ConfigurationEvents.SET_RINGER_DEVICE,\n      data: { deviceId: deviceId }\n    });\n  };\n\n  Agent.prototype.getState = function () {\n    return this._getData().snapshot.state;\n  };\n\n  Agent.prototype.getAvailabilityState = function () {\n    return this._getData().snapshot.agentAvailabilityState;\n  };\n\n  Agent.prototype.getStatus = Agent.prototype.getState;\n\n  Agent.prototype.getStateDuration = function () {\n    return connect.now() - this._getData().snapshot.state.startTimestamp.getTime() + connect.core.getSkew();\n  };\n\n  Agent.prototype.getStatusDuration = Agent.prototype.getStateDuration;\n\n  Agent.prototype.getPermissions = function () {\n    return this.getConfiguration().permissions;\n  };\n\n  Agent.prototype.getContacts = function (contactTypeFilter) {\n    var self = this;\n    return this._getData().snapshot.contacts.map(function (contactData) {\n      return self._createContactAPI(contactData);\n    }).filter(function (contact) {\n      return (!contactTypeFilter) || contact.getType() === contactTypeFilter;\n    });\n  };\n\n  Agent.prototype.getConfiguration = function () {\n    return this._getData().configuration;\n  };\n\n  Agent.prototype.getAgentStates = function () {\n    return this.getConfiguration().agentStates;\n  };\n\n  Agent.prototype.getRoutingProfile = function () {\n    return this.getConfiguration().routingProfile;\n  };\n\n  Agent.prototype.getChannelConcurrency = function (channel) {\n    var channelConcurrencyMap = this.getRoutingProfile().channelConcurrencyMap;\n    if (!channelConcurrencyMap) {\n      channelConcurrencyMap = Object.keys(connect.ChannelType).reduce(function (acc, key) {\n        // Exclude TASK from default concurrency.\n        if (key !== 'TASK') {\n          acc[connect.ChannelType[key]] = 1;\n        }\n        return acc;\n      }, {});\n    }\n    return channel\n      ? (channelConcurrencyMap[channel] || 0)\n      : channelConcurrencyMap;\n  };\n\n  Agent.prototype.getName = function () {\n    return this.getConfiguration().name;\n  };\n\n  Agent.prototype.getExtension = function () {\n    return this.getConfiguration().extension;\n  };\n\n  Agent.prototype.getDialableCountries = function () {\n    return this.getConfiguration().dialableCountries;\n  };\n\n  Agent.prototype.isSoftphoneEnabled = function () {\n    return this.getConfiguration().softphoneEnabled;\n  };\n\n  Agent.prototype.setConfiguration = function (configuration, callbacks) {\n    var client = connect.core.getClient();\n    if (configuration && configuration.agentPreferences && !connect.isValidLocale(configuration.agentPreferences.locale)) {\n      if (callbacks && callbacks.failure) {\n        callbacks.failure(AgentErrorStates.INVALID_LOCALE);\n      }\n    } else {\n      client.call(connect.ClientMethods.UPDATE_AGENT_CONFIGURATION, {\n        configuration: connect.assertNotNull(configuration, 'configuration')\n      }, {\n          success: function (data) {\n            // We need to ask the shared worker to reload agent config\n            // once we change it so every tab has accurate config.\n            var conduit = connect.core.getUpstream();\n            conduit.sendUpstream(connect.EventType.RELOAD_AGENT_CONFIGURATION);\n\n            if (callbacks.success) {\n              callbacks.success(data);\n            }\n          },\n          failure: callbacks && callbacks.failure\n      });\n    }\n  };\n\n  Agent.prototype.setState = function (state, callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.PUT_AGENT_STATE, {\n      state: connect.assertNotNull(state, 'state')\n    }, callbacks);\n  };\n\n  Agent.prototype.setStatus = Agent.prototype.setState;\n\n  Agent.prototype.connect = function (endpointIn, params) {\n    var client = connect.core.getClient();\n    var endpoint = new connect.Endpoint(endpointIn);\n    // Have to remove the endpointId field or AWS JS SDK gets mad.\n    delete endpoint.endpointId;\n\n    client.call(connect.ClientMethods.CREATE_OUTBOUND_CONTACT, {\n      endpoint: connect.assertNotNull(endpoint, 'endpoint'),\n      queueARN: (params && (params.queueARN || params.queueId)) || this.getRoutingProfile().defaultOutboundQueue.queueARN\n    }, params && {\n        success: params.success,\n        failure: params.failure\n      });\n  };\n\n  Agent.prototype.getAllQueueARNs = function () {\n    return this.getConfiguration().routingProfile.queues.map(function (queue) {\n      return queue.queueARN;\n    });\n  };\n\n  Agent.prototype.getEndpoints = function (queueARNs, callbacks, pageInfoIn) {\n    var self = this;\n    var client = connect.core.getClient();\n    connect.assertNotNull(callbacks, \"callbacks\");\n    connect.assertNotNull(callbacks.success, \"callbacks.success\");\n    var pageInfo = pageInfoIn || { };\n\n    pageInfo.endpoints = pageInfo.endpoints || [];\n    pageInfo.maxResults = pageInfo.maxResults || connect.DEFAULT_BATCH_SIZE;\n\n    // Backwards compatibility allowing a single queueARN to be specified\n    // instead of an array.\n    if (!connect.isArray(queueARNs)) {\n      queueARNs = [queueARNs];\n    }\n\n    client.call(connect.ClientMethods.GET_ENDPOINTS, {\n      queueARNs: queueARNs,\n      nextToken: pageInfo.nextToken || null,\n      maxResults: pageInfo.maxResults\n    }, {\n        success: function (data) {\n          if (data.nextToken) {\n            self.getEndpoints(queueARNs, callbacks, {\n              nextToken: data.nextToken,\n              maxResults: pageInfo.maxResults,\n              endpoints: pageInfo.endpoints.concat(data.endpoints)\n            });\n          } else {\n            pageInfo.endpoints = pageInfo.endpoints.concat(data.endpoints);\n            var endpoints = pageInfo.endpoints.map(function (endpoint) {\n              return new connect.Endpoint(endpoint);\n            });\n\n            callbacks.success({\n              endpoints: endpoints,\n              addresses: endpoints\n            });\n          }\n        },\n        failure: callbacks.failure\n      });\n  };\n\n  Agent.prototype.getAddresses = Agent.prototype.getEndpoints;\n\n  Agent.prototype.toSnapshot = function () {\n    return new connect.AgentSnapshot(this._getData());\n  };\n\n  /*----------------------------------------------------------------\n   * class AgentSnapshot\n   */\n  var AgentSnapshot = function (agentData) {\n    connect.Agent.call(this);\n    this.agentData = agentData;\n  };\n  AgentSnapshot.prototype = Object.create(Agent.prototype);\n  AgentSnapshot.prototype.constructor = AgentSnapshot;\n\n  AgentSnapshot.prototype._getData = function () {\n    return this.agentData;\n  };\n\n  AgentSnapshot.prototype._createContactAPI = function (contactData) {\n    return new connect.ContactSnapshot(contactData);\n  };\n\n  /*----------------------------------------------------------------\n   * class Contact\n   */\n  var Contact = function (contactId) {\n    this.contactId = contactId;\n  };\n\n  Contact.prototype._getData = function () {\n    return connect.core.getAgentDataProvider().getContactData(this.getContactId());\n  };\n\n  Contact.prototype._createConnectionAPI = function (connectionData) {\n    if (this.getType() === connect.ContactType.CHAT) {\n      return new connect.ChatConnection(this.contactId, connectionData.connectionId);\n    } else if (this.getType() === connect.ContactType.TASK) {\n      return new connect.TaskConnection(this.contactId, connectionData.connectionId);\n    } else {\n      return new connect.VoiceConnection(this.contactId, connectionData.connectionId);\n    }\n  };\n\n  Contact.prototype.getEventName = function (eventName) {\n    return connect.core.getContactEventName(eventName, this.getContactId());\n  };\n\n  Contact.prototype.onRefresh = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.REFRESH), f);\n  };\n\n  Contact.prototype.onIncoming = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.INCOMING), f);\n  };\n\n  Contact.prototype.onConnecting = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.CONNECTING), f);\n  };\n\n  Contact.prototype.onPending = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.PENDING), f);\n  };\n\n  Contact.prototype.onAccepted = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.ACCEPTED), f);\n  };\n\n  Contact.prototype.onMissed = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.MISSED), f);\n  };\n\n  Contact.prototype.onEnded = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.ENDED), f);\n    bus.subscribe(this.getEventName(connect.ContactEvents.DESTROYED), f);\n  };\n\n  Contact.prototype.onDestroy = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.DESTROYED), f);\n  };\n\n  Contact.prototype.onACW = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.ACW), f);\n  };\n\n  Contact.prototype.onConnected = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.CONNECTED), f);\n  };\n\n  Contact.prototype.onError = function (f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(this.getEventName(connect.ContactEvents.ERROR), f);\n  }\n\n  Contact.prototype.getContactId = function () {\n    return this.contactId;\n  };\n\n  Contact.prototype.getOriginalContactId = function () {\n    return this._getData().initialContactId;\n  };\n  Contact.prototype.getInitialContactId = Contact.prototype.getOriginalContactId;\n\n  Contact.prototype.getType = function () {\n    return this._getData().type;\n  };\n\n  Contact.prototype.getContactDuration = function() {\n    return this._getData().contactDuration;\n  }\n\n  Contact.prototype.getState = function () {\n    return this._getData().state;\n  };\n\n  Contact.prototype.getStatus = Contact.prototype.getState;\n\n  Contact.prototype.getStateDuration = function () {\n    return connect.now() - this._getData().state.timestamp.getTime() + connect.core.getSkew();\n  };\n\n  Contact.prototype.getStatusDuration = Contact.prototype.getStateDuration;\n\n  Contact.prototype.getQueue = function () {\n    return this._getData().queue;\n  };\n\n  Contact.prototype.getQueueTimestamp = function () {\n    return this._getData().queueTimestamp;\n  };\n\n  Contact.prototype.getConnections = function () {\n    var self = this;\n    return this._getData().connections.map(function (connData) {\n      if (self.getType() === connect.ContactType.CHAT) {\n        return new connect.ChatConnection(self.contactId, connData.connectionId);\n      } else if (self.getType() === connect.ContactType.TASK) {\n        return new connect.TaskConnection(self.contactId, connData.connectionId);\n      } else {\n        return new connect.VoiceConnection(self.contactId, connData.connectionId);\n      }\n    });\n  };\n\n  Contact.prototype.getInitialConnection = function () {\n    return connect.find(this.getConnections(), function (conn) {\n      return conn.isInitialConnection();\n    }) || null;\n  };\n\n  Contact.prototype.getActiveInitialConnection = function () {\n    var initialConn = this.getInitialConnection();\n    if (initialConn != null && initialConn.isActive()) {\n      return initialConn;\n    } else {\n      return null;\n    }\n  };\n\n  Contact.prototype.getThirdPartyConnections = function () {\n    return this.getConnections().filter(function (conn) {\n      return !conn.isInitialConnection() && conn.getType() !== connect.ConnectionType.AGENT;\n    });\n  };\n\n  Contact.prototype.getSingleActiveThirdPartyConnection = function () {\n    return this.getThirdPartyConnections().filter(function (conn) {\n      return conn.isActive();\n    })[0] || null;\n  };\n\n  Contact.prototype.getAgentConnection = function () {\n    return connect.find(this.getConnections(), function (conn) {\n      var connType = conn.getType();\n      return connType === connect.ConnectionType.AGENT || connType === connect.ConnectionType.MONITORING;\n    });\n  };\n\n  Contact.prototype.getName = function () {\n    return this._getData().name;\n  };\n\n  Contact.prototype.getContactMetadata = function () {\n    return this._getData().contactMetadata;\n  }\n\n  Contact.prototype.getDescription = function () {\n    return this._getData().description;\n  };\n\n  Contact.prototype.getReferences = function () {\n    return this._getData().references;\n  };\n\n  Contact.prototype.getAttributes = function () {\n    return this._getData().attributes;\n  };\n\n  Contact.prototype.getContactFeatures = function () {\n    return this._getData().contactFeatures;\n  };\n\n  Contact.prototype.isSoftphoneCall = function () {\n    return connect.find(this.getConnections(), function (conn) {\n      return conn.getSoftphoneMediaInfo() != null;\n    }) != null;\n  };\n\n  Contact.prototype._isInbound = function () {\n    var initiationMethod = this._getData().initiationMethod;\n    return (initiationMethod === connect.ContactInitiationMethod.OUTBOUND) ? false : true;\n  }\n\n  Contact.prototype.isInbound = function () {\n    var conn = this.getInitialConnection();\n\n    // We will gradually change checking inbound by relying on contact initiationMethod\n    if (conn.getMediaType() === connect.MediaType.TASK) {\n      return this._isInbound();\n    }\n\n    return conn ? conn.getType() === connect.ConnectionType.INBOUND : false;\n  };\n\n  Contact.prototype.isConnected = function () {\n    return this.getStatus().type === connect.ContactStateType.CONNECTED;\n  };\n\n  Contact.prototype.accept = function (callbacks) {\n    var client = connect.core.getClient();\n    var self = this;\n    var contactId = this.getContactId();\n    client.call(connect.ClientMethods.ACCEPT_CONTACT, {\n      contactId: contactId\n    }, {\n        success: function (data) {\n          var conduit = connect.core.getUpstream();\n          conduit.sendUpstream(connect.EventType.BROADCAST, {\n            event: connect.ContactEvents.ACCEPTED,\n            data: new connect.Contact(contactId)\n          });\n          conduit.sendUpstream(connect.EventType.BROADCAST, {\n            event: connect.core.getContactEventName(connect.ContactEvents.ACCEPTED, self.getContactId()),\n            data: new connect.Contact(contactId)\n          });\n\n          // In Firefox, there's a browser restriction that an unfocused browser tab is not allowed to access the user's microphone.\n          // The problem is that the restriction could cause a webrtc session creation timeout error when you get an incoming call while you are not on the primary tab.\n          // It was hard to workaround the issue especially when you have multiple tabs open because you needed to find the right tab and accept the contact before the timeout.\n          // To avoid the error, when multiple tabs are open in Firefox, a webrtc session is not immediately created as an incoming softphone contact is detected.\n          // Instead, it waits until contact.accept() is called on a tab and lets the tab become the new primary tab and start the web rtc session there\n          // because the tab should be focused at the moment and have access to the user's microphone.\n          var contact = new connect.Contact(contactId);\n          if (connect.isFirefoxBrowser() && contact.isSoftphoneCall()) {\n            connect.core.triggerReadyToStartSessionEvent();\n          }\n\n          if (callbacks && callbacks.success) {\n            callbacks.success(data);\n          }\n        },\n        failure: callbacks ? callbacks.failure : null\n      });\n  };\n\n  Contact.prototype.destroy = function () {\n    connect.getLog().warn(\"contact.destroy() has been deprecated.\");\n  };\n\n  Contact.prototype.reject = function (callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.REJECT_CONTACT, {\n      contactId: this.getContactId()\n    }, callbacks);\n  };\n\n  Contact.prototype.complete = function (callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.COMPLETE_CONTACT, {\n      contactId: this.getContactId()\n    }, callbacks);\n  };\n\n  Contact.prototype.clear = function (callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.CLEAR_CONTACT, {\n      contactId: this.getContactId()\n    }, callbacks);\n  };\n\n  Contact.prototype.notifyIssue = function (issueCode, description, callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.NOTIFY_CONTACT_ISSUE, {\n      contactId: this.getContactId(),\n      issueCode: issueCode,\n      description: description\n    }, callbacks);\n  };\n\n  Contact.prototype.addConnection = function (endpointIn, callbacks) {\n    var client = connect.core.getClient();\n    var endpoint = new connect.Endpoint(endpointIn);\n    // Have to remove the endpointId field or AWS JS SDK gets mad.\n    delete endpoint.endpointId;\n\n    client.call(connect.ClientMethods.CREATE_ADDITIONAL_CONNECTION, {\n      contactId: this.getContactId(),\n      endpoint: endpoint\n    }, callbacks);\n  };\n\n  Contact.prototype.toggleActiveConnections = function (callbacks) {\n    var client = connect.core.getClient();\n    var connectionId = null;\n    var holdingConn = connect.find(this.getConnections(), function (conn) {\n      return conn.getStatus().type === connect.ConnectionStateType.HOLD;\n    });\n\n    if (holdingConn != null) {\n      connectionId = holdingConn.getConnectionId();\n\n    } else {\n      var activeConns = this.getConnections().filter(function (conn) {\n        return conn.isActive();\n      });\n      if (activeConns.length > 0) {\n        connectionId = activeConns[0].getConnectionId();\n      }\n    }\n\n    client.call(connect.ClientMethods.TOGGLE_ACTIVE_CONNECTIONS, {\n      contactId: this.getContactId(),\n      connectionId: connectionId\n    }, callbacks);\n  };\n\n  Contact.prototype.sendSoftphoneMetrics = function (softphoneStreamStatistics, callbacks) {\n    var client = connect.core.getClient();\n\n    client.call(connect.ClientMethods.SEND_SOFTPHONE_CALL_METRICS, {\n      contactId: this.getContactId(),\n      ccpVersion: global.ccpVersion,\n      softphoneStreamStatistics: softphoneStreamStatistics\n    }, callbacks);\n\n    connect.publishSoftphoneStats({\n      contactId: this.getContactId(),\n      ccpVersion: global.ccpVersion,\n      stats: softphoneStreamStatistics\n    });\n  };\n\n  Contact.prototype.sendSoftphoneReport = function (report, callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.SEND_SOFTPHONE_CALL_REPORT, {\n      contactId: this.getContactId(),\n      ccpVersion: global.ccpVersion,\n      report: report\n    }, callbacks);\n\n    connect.publishSoftphoneReport({\n      contactId: this.getContactId(),\n      ccpVersion: global.ccpVersion,\n      report: report\n    });\n  };\n\n  Contact.prototype.conferenceConnections = function (callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.CONFERENCE_CONNECTIONS, {\n      contactId: this.getContactId()\n    }, callbacks);\n  };\n\n  Contact.prototype.toSnapshot = function () {\n    return new connect.ContactSnapshot(this._getData());\n  };\n\n  /*----------------------------------------------------------------\n   * class ContactSnapshot\n   */\n  var ContactSnapshot = function (contactData) {\n    connect.Contact.call(this, contactData.contactId);\n    this.contactData = contactData;\n  };\n  ContactSnapshot.prototype = Object.create(Contact.prototype);\n  ContactSnapshot.prototype.constructor = ContactSnapshot;\n\n  ContactSnapshot.prototype._getData = function () {\n    return this.contactData;\n  };\n\n  ContactSnapshot.prototype._createConnectionAPI = function (connectionData) {\n    return new connect.ConnectionSnapshot(connectionData);\n  };\n\n  /*----------------------------------------------------------------\n   * class Connection\n   */\n  var Connection = function (contactId, connectionId) {\n    this.contactId = contactId;\n    this.connectionId = connectionId;\n    this._initMediaController();\n  };\n\n  Connection.prototype._getData = function () {\n    return connect.core.getAgentDataProvider().getConnectionData(\n      this.getContactId(), this.getConnectionId());\n  };\n\n  Connection.prototype.getContactId = function () {\n    return this.contactId;\n  };\n\n  Connection.prototype.getConnectionId = function () {\n    return this.connectionId;\n  };\n\n  Connection.prototype.getEndpoint = function () {\n    return new connect.Endpoint(this._getData().endpoint);\n  };\n\n  Connection.prototype.getAddress = Connection.prototype.getEndpoint;\n\n  Connection.prototype.getState = function () {\n    return this._getData().state;\n  };\n\n  Connection.prototype.getStatus = Connection.prototype.getState;\n\n  Connection.prototype.getStateDuration = function () {\n    return connect.now() - this._getData().state.timestamp.getTime() + connect.core.getSkew();\n  };\n\n  Connection.prototype.getStatusDuration = Connection.prototype.getStateDuration;\n\n  Connection.prototype.getType = function () {\n    return this._getData().type;\n  };\n\n  Connection.prototype.isInitialConnection = function () {\n    return this._getData().initial;\n  };\n\n  Connection.prototype.isActive = function () {\n    return connect.contains(connect.CONNECTION_ACTIVE_STATES, this.getStatus().type);\n  };\n\n  Connection.prototype.isConnected = function () {\n    return this.getStatus().type === connect.ConnectionStateType.CONNECTED;\n  };\n\n  Connection.prototype.isConnecting = function () {\n    return this.getStatus().type === connect.ConnectionStateType.CONNECTING;\n  };\n\n  Connection.prototype.isOnHold = function () {\n    return this.getStatus().type === connect.ConnectionStateType.HOLD;\n  };\n\n  Connection.prototype.getSoftphoneMediaInfo = function () {\n    return this._getData().softphoneMediaInfo;\n  };\n\n  /**\n   * Gets the currently monitored contact info, Returns null if does not exists.\n   * @return {{agentName:string, customerName:string, joinTime:Date}}\n   */\n  Connection.prototype.getMonitorInfo = function () {\n    return this._getData().monitoringInfo;\n  };\n\n  Connection.prototype.destroy = function (callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.DESTROY_CONNECTION, {\n      contactId: this.getContactId(),\n      connectionId: this.getConnectionId()\n    }, callbacks);\n  };\n\n  Connection.prototype.sendDigits = function (digits, callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.SEND_DIGITS, {\n      contactId: this.getContactId(),\n      connectionId: this.getConnectionId(),\n      digits: digits\n    }, callbacks);\n  };\n\n  Connection.prototype.hold = function (callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.HOLD_CONNECTION, {\n      contactId: this.getContactId(),\n      connectionId: this.getConnectionId()\n    }, callbacks);\n  };\n\n  Connection.prototype.resume = function (callbacks) {\n    var client = connect.core.getClient();\n    client.call(connect.ClientMethods.RESUME_CONNECTION, {\n      contactId: this.getContactId(),\n      connectionId: this.getConnectionId()\n    }, callbacks);\n  };\n\n  Connection.prototype.toSnapshot = function () {\n    return new connect.ConnectionSnapshot(this._getData());\n  };\n\n  Connection.prototype._initMediaController = function () {\n    if (this.getMediaInfo()) {\n      connect.core.mediaFactory.get(this).catch(function () { });\n    }\n  }\n\n  // Method for checking whether this connection is an agent-side connection \n  // (type AGENT or MONITORING)\n  Connection.prototype._isAgentConnectionType = function () {\n    var connectionType = this.getType();\n    return connectionType === connect.ConnectionType.AGENT \n      || connectionType === connect.ConnectionType.MONITORING;\n  }\n\n  /**\n   * Utility method for checking whether this connection is an agent-side connection \n   * (type AGENT or MONITORING)\n   * @return {boolean} True if this connection is an agent-side connection. False otherwise.\n   */\n  Connection.prototype._isAgentConnectionType = function () {\n    var connectionType = this.getType();\n    return connectionType === connect.ConnectionType.AGENT \n      || connectionType === connect.ConnectionType.MONITORING;\n  }\n\n  /*----------------------------------------------------------------\n  * Voice authenticator VoiceId\n  */\n \n  var VoiceId = function (contactId) {\n    this.contactId = contactId;\n  };\n\n  VoiceId.prototype.getSpeakerId = function () {\n    var self = this;\n    self.checkConferenceCall();\n    var client = connect.core.getClient();\n    return new Promise(function (resolve, reject) {\n      client.call(connect.AgentAppClientMethods.GET_SPEAKER_ID, {\n        \"contactId\": self.contactId,\n        \"instanceId\": connect.core.getAgentDataProvider().getInstanceId(),\n        \"awsAccountId\": connect.core.getAgentDataProvider().getAWSAccountId()\n        }, {\n          success: function (data) {\n            if(data.contactData.customerId) {\n              var obj = {\n                speakerId: data.contactData.customerId\n              }\n              resolve(obj);\n            } else {\n              var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.NO_SPEAKER_ID_FOUND, \"No speakerId assotiated with this call\", err);\n              reject(error);\n            }\n            \n          },\n          failure: function (err) {\n            connect.getLog().error(\"Get SpeakerId failed\")\n              .withObject({\n                err: err\n              });\n            var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.GET_SPEAKER_ID_FAILED, \"Get SpeakerId failed\", err);\n            reject(error);\n          }\n        });\n    });\n  };\n\n  VoiceId.prototype.getSpeakerStatus = function () {\n    var self = this;\n    self.checkConferenceCall();\n    var client = connect.core.getClient();\n    return new Promise(function (resolve, reject) {\n      self.getSpeakerId().then(function(data){\n        client.call(connect.AgentAppClientMethods.GET_SPEAKER_STATUS, {\n          \"SpeakerId\": connect.assertNotNull(data.speakerId, 'speakerId'),\n          \"DomainId\" : \"ConnectDefaultDomainId\"\n          }, {\n            success: function (data) {\n              resolve(data);\n            },\n            failure: function (err) {\n              connect.getLog().error(\"getSpeakerStatus failed\")\n                .withObject({\n                  err: err\n                });\n              var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.GET_SPEAKER_STATUS_FAILED, \"Get SpeakerStatus failed\", err);\n              reject(error);\n            }\n          });\n      }).catch(function(err){\n        reject(err);\n      });\n    });\n  };\n\n  VoiceId.prototype.optOutSpeaker = function () {\n    var self = this;\n    self.checkConferenceCall();\n    var client = connect.core.getClient();\n    return new Promise(function (resolve, reject) {\n      self.getSpeakerId().then(function(data){\n        client.call(connect.AgentAppClientMethods.OPT_OUT_VOICEID_SPEAKER, {\n          \"SpeakerId\": connect.assertNotNull(data.speakerId, 'speakerId'),\n          \"DomainId\" : \"ConnectDefaultDomainId\"\n          }, {\n            success: function (data) {\n              connect.getLog().info(\"optOutSpeaker succeeded\");\n              //TODO add more logic here for filtering out data once VoiceId API finalized\n              resolve(data);\n            },\n            failure: function (err) {\n              connect.getLog().error(\"optOutSpeaker failed\")\n                .withObject({\n                  err: err,\n                });\n              var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.OPT_OUT_SPEAKER_FAILED, \"optOutSpeaker failed.\", err);\n              reject(error);\n            }\n          });\n      }).catch(function(err){\n        reject(err);\n      });\n    });\n  };\n\n  VoiceId.prototype.startSession = function () {\n    var self = this;\n    self.checkConferenceCall();\n    var client = connect.core.getClient();\n    return new Promise(function (resolve, reject) {\n      client.call(connect.AgentAppClientMethods.START_VOICEID_SESSION, {\n        \"contactId\": self.contactId,\n        \"instanceId\": connect.core.getAgentDataProvider().getInstanceId(),\n        \"customerAccountId\": connect.core.getAgentDataProvider().getAWSAccountId(),\n        \"clientToken\": AWS.util.uuid.v4()\n        }, {\n          success: function (data) {\n            if(data.sessionId) {\n              resolve(data);\n            } else {\n              reject(Error(\"No contact id is returned from start session api.\"))\n            }\n          },\n          failure: function (err) {\n            connect.getLog().error(\"startVoiceIdSession failed\")\n              .withObject({\n                err: err\n              });\n            var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.START_SESSION_FAILED, \"startVoiceIdSession failed\", err);\n            reject(error);\n          }\n        });\n    });\n  };\n\n  VoiceId.prototype.evaluateSpeaker = function (startNew) {\n    var self = this;\n    self.checkConferenceCall();\n    var client = connect.core.getClient();\n    var contactData = connect.core.getAgentDataProvider().getContactData(this.contactId);\n    var maxPollTimes = 120; // Polling for maximum 2 mins.\n    var milliInterval = 1000;\n    return new Promise(function (resolve, reject) {\n      function evaluate() {\n        client.call(connect.AgentAppClientMethods.EVALUATE_SPEAKER_WITH_VOICEID, {\n          \"SessionNameOrId\": contactData.initialContactId || this.contactId\n        }, {\n          success: function (data) {\n            if(maxPollTimes-- !== 1) {\n              if(data.StreamingStatus === connect.VoiceIdStreamingStatus.ENDED && data.AuthenticationResult.Decision === connect.VoiceIdAuthenticationDecision.NOT_ENOUGH_SPEECH){\n                data.AuthenticationResult.Decision = connect.ContactFlowAuthenticationDecision.INCONCLUSIVE;\n                resolve(data);\n              }else if(data.AuthenticationResult.Decision !== connect.VoiceIdAuthenticationDecision.NOT_ENOUGH_SPEECH) {\n                switch (data.AuthenticationResult.Decision) {\n                  case connect.VoiceIdAuthenticationDecision.ACCEPT:\n                    data.AuthenticationResult.Decision = connect.ContactFlowAuthenticationDecision.AUTHENTICATED;\n                    break;\n                  case connect.VoiceIdAuthenticationDecision.REJECT:\n                    data.AuthenticationResult.Decision = connect.ContactFlowAuthenticationDecision.NOT_AUTHENTICATED;\n                    break;\n                  case connect.VoiceIdAuthenticationDecision.SPEAKER_OPTED_OUT:\n                    data.AuthenticationResult.Decision = connect.ContactFlowAuthenticationDecision.OPTED_OUT;\n                    break;\n                  case connect.VoiceIdAuthenticationDecision.SPEAKER_NOT_ENROLLED:\n                    data.AuthenticationResult.Decision = connect.ContactFlowAuthenticationDecision.NOT_ENROLLED;\n                    break;\n                  default:\n                    data.AuthenticationResult.Decision = connect.ContactFlowAuthenticationDecision.ERROR;\n                }\n                resolve(data);\n              } else {\n                setTimeout(evaluate, milliInterval);\n              }\n            } else {\n              connect.getLog().error(\"evaluateSpeaker timeout\");\n              var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.TIMEOUT, \"evaluateSpeaker timeout\");\n              reject(error);\n            }\n          },\n          failure: function (err) {\n            connect.getLog().error(\"evaluateSpeaker failed\")\n              .withObject({\n                err: err\n              });\n            var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.EVALUATE_SPEAKER_FAILED, \"evaluateSpeaker failed\", err);\n            reject(error);\n          }\n        })\n      }\n      if(!startNew){\n        evaluate();\n      } else {\n        self.startSession().then(function(data) {\n          evaluate();\n        }).catch(function(err){\n          reject(err)\n        });\n      }\n    });\n  };\n\n  VoiceId.prototype.describeSession = function () {\n    var self = this;\n    var client = connect.core.getClient();\n    var contactData = connect.core.getAgentDataProvider().getContactData(this.contactId);\n    return new Promise(function (resolve, reject) {\n      client.call(connect.AgentAppClientMethods.DESCRIBE_VOICEID_SESSION, {\n        \"SessionNameOrId\": contactData.initialContactId || this.contactId\n      }, {\n        success: function (data) {\n          resolve(data)\n        },\n        failure: function (err) {\n          connect.getLog().error(\"describeSession failed\")\n            .withObject({\n              err: err\n            });\n          var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.DESCRIBE_SESSION_FAILED, \"describeSession failed\", err);\n          reject(error);\n        }\n      })\n    });\n  };\n\n  VoiceId.prototype.checkEnrollmentStatus = function () {\n    var self = this;\n    var maxPollingTimes = 120; // It is polling for maximum 10 mins.\n    var milliInterval = 5000;\n\n    return new Promise(function (resolve, reject) {\n      function describe () {\n        if(maxPollingTimes-- !== 1) {\n          self.describeSession().then(function(data){\n            switch(data.Session.EnrollmentRequestDetails.Status) {\n              case connect.VoiceIdEnrollmentRequestStatus.COMPLETED:\n                resolve(data);\n                break;\n              case connect.VoiceIdEnrollmentRequestStatus.IN_PROGRESS:\n                setTimeout(describe, milliInterval);\n                break;\n              case connect.VoiceIdEnrollmentRequestStatus.NOT_ENOUGH_SPEECH:\n                if(data.Session.StreamingStatus !== connect.VoiceIdStreamingStatus.ENDED) {\n                  setTimeout(describe,milliInterval);\n                } else {\n                  self.startSession().then(function(data) {\n                    describe();\n                  }).catch(function(err, data){\n                    reject(err);\n                  });\n                }\n                break;\n              default:\n                reject(Error(data.Session.EnrollmentRequestDetails.Status));\n            }\n          });\n        } else {\n          connect.getLog().error(\"describeSession timeout\");\n          var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.TIMEOUT, \"describeSession timeout\");\n          reject(error);\n        }\n      }\n      describe();\n    });\n  };\n\n  VoiceId.prototype.enrollSpeaker = function () {\n    var self = this;\n    self.checkConferenceCall();\n    var client = connect.core.getClient();\n    var contactData = connect.core.getAgentDataProvider().getContactData(this.contactId);\n    return new Promise(function (resolve, reject) {\n      client.call(connect.AgentAppClientMethods.ENROLL_SPEAKER_IN_VOICEID, {\n        \"SessionNameOrId\": contactData.initialContactId || this.contactId\n        }, {\n          success: function (data) {\n            if(data.Status === connect.VoiceIdEnrollmentRequestStatus.COMPLETED) {\n              resolve(data);\n            } else {\n              self.checkEnrollmentStatus().then(function(data){\n                resolve(data);\n              }).catch(function(err){\n                reject(err);\n              })\n            }\n          },\n          failure: function (err) {\n            connect.getLog().error(\"enrollSpeaker failed\")\n              .withObject({\n                err: err\n              });\n            var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.ENROLL_SPEAKER_FAILED, \"enrollSpeaker failed\", err);\n            reject(error);\n          }\n        });\n    });\n  };\n\n  VoiceId.prototype.updateSpeakerId = function (speakerId) {\n    var self = this;\n    self.checkConferenceCall();\n    var client = connect.core.getClient();\n    var contactData = connect.core.getAgentDataProvider().getContactData(this.contactId);\n    return new Promise(function (resolve, reject) {\n      client.call(connect.AgentAppClientMethods.UPDATE_VOICEID_SESSION, {\n        \"SessionNameOrId\": contactData.initialContactId || this.contactId,\n        \"SpeakerId\": connect.assertNotNull(speakerId, 'speakerId')\n        }, {\n          success: function (data) {\n            resolve(data);\n          },\n          failure: function (err) {\n            connect.getLog().error(\"updateSpeakerId failed\")\n              .withObject({\n                err: err\n              });\n            var error = connect.VoiceIdError(connect.VoiceIdErrorTypes.UPDATE_SPEAKER_ID_FAILED, \"updateSpeakerId failed\", err);\n            reject(error);\n          }\n        });\n    });\n  };\n\n  VoiceId.prototype.checkConferenceCall = function(){\n    var self = this;\n    var isConferenceCall = connect.core.getAgentDataProvider().getContactData(self.contactId).connections.filter(function (conn) {\n      return connect.contains(connect.CONNECTION_ACTIVE_STATES, conn.state.type);\n    }).length > 2;\n    if(isConferenceCall){\n      throw new connect.NotImplementedError(\"VoiceId is not supported for conference calls\");\n    }\n  }\n  \n  /**\n   * @class VoiceConnection\n   * @param {number} contactId \n   * @param {number} connectionId \n   * @description - Provides voice media specific operations\n   */\n  var VoiceConnection = function (contactId, connectionId) {\n    this._speakerAuthenticator = new VoiceId(contactId);\n    Connection.call(this, contactId, connectionId);\n  };\n\n  VoiceConnection.prototype = Object.create(Connection.prototype);\n  VoiceConnection.prototype.constructor = VoiceConnection;\n\n  /**\n  * @deprecated\n  * Please use getMediaInfo \n  */\n  VoiceConnection.prototype.getSoftphoneMediaInfo = function () {\n    return this._getData().softphoneMediaInfo;\n  };\n\n  VoiceConnection.prototype.getMediaInfo = function () {\n    return this._getData().softphoneMediaInfo;\n  };\n\n  VoiceConnection.prototype.getMediaType = function () {\n    return connect.MediaType.SOFTPHONE;\n  };\n\n  VoiceConnection.prototype.getMediaController = function () {\n    return connect.core.mediaFactory.get(this);\n  }\n\n  VoiceConnection.prototype.getVoiceIdSpeakerId = function() {\n    return this._speakerAuthenticator.getSpeakerId();\n  }\n\n  VoiceConnection.prototype.getVoiceIdSpeakerStatus = function() {\n    return this._speakerAuthenticator.getSpeakerStatus();\n  }\n\n  VoiceConnection.prototype.optOutVoiceIdSpeaker = function() {\n    \n    return this._speakerAuthenticator.optOutSpeaker();\n  }\n\n  VoiceConnection.prototype.evaluateSpeakerWithVoiceId = function(startNew) {\n    return this._speakerAuthenticator.evaluateSpeaker(startNew);\n  }\n\n  VoiceConnection.prototype.enrollSpeakerInVoiceId = function() {\n    return this._speakerAuthenticator.enrollSpeaker();\n  }\n\n  VoiceConnection.prototype.updateVoiceIdSpeakerId = function(speakerId) {\n    return this._speakerAuthenticator.updateSpeakerId(speakerId);\n  }\n\n  /**\n   * @class ChatConnection\n   * @param {*} contactId \n   * @param {*} connectionId \n   * @description adds the chat media specific functionality\n   */\n  var ChatConnection = function (contactId, connectionId) {\n    Connection.call(this, contactId, connectionId);\n  };\n\n  ChatConnection.prototype = Object.create(Connection.prototype);\n  ChatConnection.prototype.constructor = ChatConnection;\n\n  ChatConnection.prototype.getMediaInfo = function () {\n    var data = this._getData().chatMediaInfo;\n    if (!data) {\n      return null;\n    } else {\n      var contactData = connect.core.getAgentDataProvider().getContactData(this.contactId);\n      var mediaObject = {\n        contactId: this.contactId,\n        initialContactId: contactData.initialContactId || this.contactId,\n        participantId: this.connectionId,\n        getConnectionToken: connect.hitch(this, this.getConnectionToken)\n      };\n      if (data.connectionData) {\n        try {\n          mediaObject.participantToken = JSON.parse(data.connectionData).ConnectionAuthenticationToken;\n        } catch (e) {\n          connect.getLog().error(connect.LogComponent.CHAT, \"Connection data is invalid\")\n            .withObject(data)\n            .withException(e)\n            .sendInternalLogToServer();\n          mediaObject.participantToken = null;\n        }\n      }\n      mediaObject.participantToken = mediaObject.participantToken || null;\n      /** Just to keep the data accessible */\n      mediaObject.originalInfo = this._getData().chatMediaInfo;\n      return mediaObject;\n    }\n  };\n\n  /**\n  * Provides the chat connectionToken through the create_transport API for a specific contact and participant Id. \n  * @returns a promise which, upon success, returns the response from the createTransport API.\n  * Usage:\n  * connection.getConnectionToken()\n  *  .then(response => {})\n  *  .catch(error => {})\n  */\n  ChatConnection.prototype.getConnectionToken = function () {\n    client = connect.core.getClient();\n    var contactData = connect.core.getAgentDataProvider().getContactData(this.contactId);\n    var transportDetails = {\n      transportType: connect.TRANSPORT_TYPES.CHAT_TOKEN,\n      participantId: this.connectionId,\n      contactId: contactData.initialContactId || this.contactId\n    };\n    return new Promise(function (resolve, reject) {\n      client.call(connect.ClientMethods.CREATE_TRANSPORT, transportDetails, {\n        success: function (data) {\n          connect.getLog().info(\"getConnectionToken succeeded\").sendInternalLogToServer();\n          resolve(data);\n        },\n        failure: function (err, data) {\n          connect.getLog().error(\"getConnectionToken failed\").sendInternalLogToServer()\n            .withObject({\n              err: err,\n              data: data\n            });\n          reject(Error(\"getConnectionToken failed\"));\n        }\n      });\n    });\n  };\n\n  ChatConnection.prototype.getMediaType = function () {\n    return connect.MediaType.CHAT;\n  };\n\n  ChatConnection.prototype.getMediaController = function () {\n    return connect.core.mediaFactory.get(this);\n  };\n\n  ChatConnection.prototype._initMediaController = function () {\n    // Note that a chat media controller only needs to be produced for agent type connections.\n    if (this._isAgentConnectionType()) {\n      connect.core.mediaFactory.get(this).catch(function () { });\n    }\n  }\n\n  /**\n   * @class TaskConnection\n   * @param {*} contactId \n   * @param {*} connectionId \n   * @description adds the task media specific functionality\n   */\n  var TaskConnection = function (contactId, connectionId) {\n    Connection.call(this, contactId, connectionId);\n  };\n  TaskConnection.prototype = Object.create(Connection.prototype);\n  TaskConnection.prototype.constructor = TaskConnection;\n\n  TaskConnection.prototype.getMediaType = function () {\n    return connect.MediaType.TASK;\n  }\n\n  TaskConnection.prototype.getMediaInfo = function () {\n      var contactData = connect.core.getAgentDataProvider().getContactData(this.contactId);\n      var mediaObject = {\n        contactId: this.contactId,\n        initialContactId: contactData.initialContactId || this.contactId,\n      };\n      return mediaObject;\n  };\n\n  TaskConnection.prototype.getMediaController = function () {\n    return connect.core.mediaFactory.get(this);\n  };\n\n  /*----------------------------------------------------------------\n   * class ConnectionSnapshot\n   */\n  var ConnectionSnapshot = function (connectionData) {\n    connect.Connection.call(this, connectionData.contactId, connectionData.connectionId);\n    this.connectionData = connectionData;\n  };\n  ConnectionSnapshot.prototype = Object.create(Connection.prototype);\n  ConnectionSnapshot.prototype.constructor = ConnectionSnapshot;\n\n  ConnectionSnapshot.prototype._getData = function () {\n    return this.connectionData;\n  };\n\n  ConnectionSnapshot.prototype._initMediaController = function () { };\n\n  var Endpoint = function (paramsIn) {\n    var params = paramsIn || {};\n    this.endpointARN = params.endpointId || params.endpointARN || null;\n    this.endpointId = this.endpointARN;\n    this.type = params.type || null;\n    this.name = params.name || null;\n    this.phoneNumber = params.phoneNumber || null;\n    this.agentLogin = params.agentLogin || null;\n    this.queue = params.queue || null;\n  };\n\n  /**\n   * Strip the SIP endpoint components from the phoneNumber field.\n   */\n  Endpoint.prototype.stripPhoneNumber = function () {\n    return this.phoneNumber ? this.phoneNumber.replace(/sip:([^@]*)@.*/, \"$1\") : \"\";\n  };\n\n  /**\n   * Create an Endpoint object from the given phone number and name.\n   */\n  Endpoint.byPhoneNumber = function (number, name) {\n    return new Endpoint({\n      type: connect.EndpointType.PHONE_NUMBER,\n      phoneNumber: number,\n      name: name || null\n    });\n  };\n\n  /*----------------------------------------------------------------\n   * class SoftphoneError\n   */\n  var SoftphoneError = function (errorType, errorMessage, endPointUrl) {\n    this.errorType = errorType;\n    this.errorMessage = errorMessage;\n    this.endPointUrl = endPointUrl;\n  };\n  SoftphoneError.prototype.getErrorType = function () {\n    return this.errorType;\n  };\n  SoftphoneError.prototype.getErrorMessage = function () {\n    return this.errorMessage;\n  };\n  SoftphoneError.prototype.getEndPointUrl = function () {\n    return this.endPointUrl;\n  };\n\n  /*----------------------------------------------------------------\n   * Root Subscription APIs.\n   */\n  connect.agent = function (f) {\n    var bus = connect.core.getEventBus();\n    var sub = bus.subscribe(connect.AgentEvents.INIT, f);\n    if (connect.agent.initialized) {\n      f(new connect.Agent());\n    }\n    return sub;\n  };\n  connect.agent.initialized = false;\n\n  connect.contact = function (f) {\n    var bus = connect.core.getEventBus();\n    return bus.subscribe(connect.ContactEvents.INIT, f);\n  };\n\n  connect.onWebsocketInitFailure = function (f) {\n    var bus = connect.core.getEventBus();\n    var sub = bus.subscribe(connect.WebSocketEvents.INIT_FAILURE, f);\n    if (connect.webSocketInitFailed) {\n      f();\n    }\n    return sub;\n  };\n\n  /**\n   * Starts the given function asynchronously only if the shared worker\n   * says we are the master for the given topic.  If there is no master for\n   * the given topic, we become the master and start the function.\n   *\n   * @param topic The master topic we are concerned about.\n   * @param f_true The callback to be invoked if we are the master.\n   * @param f_else [optional] A callback to be invoked if we are not the master.\n   */\n  connect.ifMaster = function (topic, f_true, f_else) {\n    connect.assertNotNull(topic, \"A topic must be provided.\");\n    connect.assertNotNull(f_true, \"A true callback must be provided.\");\n\n    if (!connect.core.masterClient) {\n      // We can't be the master because there is no master client!\n      connect.getLog().warn(\"We can't be the master for topic '%s' because there is no master client!\", topic).sendInternalLogToServer();\n      if (f_else) {\n        f_else();\n      }\n      return;\n    }\n\n    var masterClient = connect.core.getMasterClient();\n    masterClient.call(connect.MasterMethods.CHECK_MASTER, {\n      topic: topic\n    }, {\n        success: function (data) {\n          if (data.isMaster) {\n            f_true();\n\n          } else if (f_else) {\n            f_else();\n          }\n        }\n      });\n  };\n\n  /**\n   * Notify the shared worker and other CCP tabs that we are now the master for the given topic.\n   */\n  connect.becomeMaster = function (topic, successCallback, failureCallback) {\n    connect.assertNotNull(topic, \"A topic must be provided.\");\n\n    if (!connect.core.masterClient) {\n      // We can't be the master because there is no master client!\n      connect.getLog().warn(\"We can't be the master for topic '%s' because there is no master client!\", topic);\n      if (failureCallback) {\n        failureCallback();\n      }\n    } else {\n      var masterClient = connect.core.getMasterClient();\n      masterClient.call(connect.MasterMethods.BECOME_MASTER, {\n        topic: topic\n      }, {\n        success: function () {\n          if (successCallback) {\n            successCallback();\n          }\n        }\n      });\n    }\n  };\n\n  connect.Agent = Agent;\n  connect.AgentSnapshot = AgentSnapshot;\n  connect.Contact = Contact;\n  connect.ContactSnapshot = ContactSnapshot;\n  /** Default will get the Voice connection */\n  connect.Connection = VoiceConnection;\n  connect.BaseConnection = Connection;\n  connect.VoiceConnection = VoiceConnection;\n  connect.ChatConnection = ChatConnection;\n  connect.TaskConnection = TaskConnection;\n  connect.ConnectionSnapshot = ConnectionSnapshot;\n  connect.Endpoint = Endpoint;\n  connect.Address = Endpoint;\n  connect.SoftphoneError = SoftphoneError;\n\n})();\n\n\n!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&n&&\"string\"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p=\"\",t(t.s=2)}([function(e,n,t){\"use strict\";var o=t(1),r=\"NULL\",i=\"CLIENT_LOGGER\",c=\"DEBUG\",s=2e3,a=\"aws/subscribe\",u=\"aws/unsubscribe\",l=\"aws/heartbeat\",f=\"connected\",p=\"disconnected\";function d(e){return(d=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var b={assertTrue:function(e,n){if(!e)throw new Error(n)},assertNotNull:function(e,n){return b.assertTrue(null!==e&&void 0!==d(e),Object(o.sprintf)(\"%s must be provided\",n||\"A value\")),e},isNonEmptyString:function(e){return\"string\"==typeof e&&e.length>0},assertIsList:function(e,n){if(!Array.isArray(e))throw new Error(n+\" is not an array\")},isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},isObject:function(e){return!(\"object\"!==d(e)||null===e)},isString:function(e){return\"string\"==typeof e},isNumber:function(e){return\"number\"==typeof e}},g=new RegExp(\"^(wss://)\\\\w*\");b.validWSUrl=function(e){return g.test(e)},b.getSubscriptionResponse=function(e,n,t){return{topic:e,content:{status:n?\"success\":\"failure\",topics:t}}},b.assertIsObject=function(e,n){if(!b.isObject(e))throw new Error(n+\" is not an object!\")},b.addJitter=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n=Math.min(n,1);var t=Math.random()>.5?1:-1;return Math.floor(e+t*e*Math.random()*n)},b.isNetworkOnline=function(){return navigator.onLine},b.isNetworkFailure=function(e){return!(!e._debug||!e._debug.type)&&\"NetworkingError\"===e._debug.type};var m=b;function y(e){return(y=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function S(e,n){return!n||\"object\"!==y(n)&&\"function\"!=typeof n?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):n}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,n){return(h=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function v(e,n){if(!(e instanceof n))throw new TypeError(\"Cannot call a class as a function\")}function w(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e,n,t){return n&&w(e.prototype,n),t&&w(e,t),e}var T=function(){function e(){v(this,e)}return C(e,[{key:\"debug\",value:function(e){}},{key:\"info\",value:function(e){}},{key:\"warn\",value:function(e){}},{key:\"error\",value:function(e){}}]),e}(),O={DEBUG:10,INFO:20,WARN:30,ERROR:40},I=function(){function e(){v(this,e),this.updateLoggerConfig(),this.consoleLoggerWrapper=_()}return C(e,[{key:\"writeToClientLogger\",value:function(e,n){if(this.hasClientLogger())switch(e){case O.DEBUG:return this._clientLogger.debug(n);case O.INFO:return this._clientLogger.info(n);case O.WARN:return this._clientLogger.warn(n);case O.ERROR:return this._clientLogger.error(n)}}},{key:\"isLevelEnabled\",value:function(e){return e>=this._level}},{key:\"hasClientLogger\",value:function(){return null!==this._clientLogger}},{key:\"getLogger\",value:function(e){var n=e.prefix||\"\";return this._logsDestination===c?this.consoleLoggerWrapper:new N(n)}},{key:\"updateLoggerConfig\",value:function(e){var n=e||{};this._level=n.level||O.DEBUG,this._clientLogger=n.logger||null,this._logsDestination=r,n.debug&&(this._logsDestination=c),n.logger&&(this._logsDestination=i)}}]),e}(),W=function(){function e(){v(this,e)}return C(e,[{key:\"debug\",value:function(){}},{key:\"info\",value:function(){}},{key:\"warn\",value:function(){}},{key:\"error\",value:function(){}}]),e}(),N=function(e){function n(e){var t;return v(this,n),(t=S(this,k(n).call(this))).prefix=e||\"\",t}return function(e,n){if(\"function\"!=typeof n&&null!==n)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&h(e,n)}(n,W),C(n,[{key:\"debug\",value:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return this._log(O.DEBUG,n)}},{key:\"info\",value:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return this._log(O.INFO,n)}},{key:\"warn\",value:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return this._log(O.WARN,n)}},{key:\"error\",value:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return this._log(O.ERROR,n)}},{key:\"_shouldLog\",value:function(e){return E.hasClientLogger()&&E.isLevelEnabled(e)}},{key:\"_writeToClientLogger\",value:function(e,n){return E.writeToClientLogger(e,n)}},{key:\"_log\",value:function(e,n){if(this._shouldLog(e)){var t=this._convertToSingleStatement(n);return this._writeToClientLogger(e,t)}}},{key:\"_convertToSingleStatement\",value:function(e){var n=\"\";this.prefix&&(n+=this.prefix+\" \");for(var t=0;t<e.length;t++){var o=e[t];n+=this._convertToString(o)+\" \"}return n}},{key:\"_convertToString\",value:function(e){try{if(!e)return\"\";if(m.isString(e))return e;if(m.isObject(e)&&m.isFunction(e.toString)){var n=e.toString();if(\"[object Object]\"!==n)return n}return JSON.stringify(e)}catch(n){return console.error(\"Error while converting argument to string\",e,n),\"\"}}}]),n}(),_=function(){var e=new W;return e.debug=console.debug,e.info=console.info,e.warn=console.warn,e.error=console.error,e},E=new I;function L(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var F=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;!function(e,n){if(!(e instanceof n))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.numAttempts=0,this.executor=n,this.hasActiveReconnection=!1,this.defaultRetry=t}var n,t,o;return n=e,(t=[{key:\"retry\",value:function(){var e=this;this.hasActiveReconnection||(this.hasActiveReconnection=!0,setTimeout(function(){e._execute()},this._getDelay()))}},{key:\"_execute\",value:function(){this.hasActiveReconnection=!1,this.executor(),this.numAttempts++}},{key:\"connected\",value:function(){this.numAttempts=0}},{key:\"_getDelay\",value:function(){var e=Math.pow(2,this.numAttempts)*this.defaultRetry;return e<=3e4?e:3e4}}])&&L(n.prototype,t),o&&L(n,o),e}();t.d(n,\"a\",function(){return R});var x=function(){var e=E.getLogger({}),n=m.isNetworkOnline(),t={primary:null,secondary:null},o={reconnectWebSocket:!0,websocketInitFailed:!1,exponentialBackOffTime:1e3,exponentialTimeoutHandle:null,lifeTimeTimeoutHandle:null,webSocketInitCheckerTimeoutId:null,connState:null},r={connectWebSocketRetryCount:0,connectionAttemptStartTime:null,noOpenConnectionsTimestamp:null},i={pendingResponse:!1,intervalHandle:null},c={initFailure:new Set,getWebSocketTransport:null,subscriptionUpdate:new Set,subscriptionFailure:new Set,topic:new Map,allMessage:new Set,connectionGain:new Set,connectionLost:new Set,connectionOpen:new Set,connectionClose:new Set},s={connConfig:null,promiseHandle:null,promiseCompleted:!0},d={subscribed:new Set,pending:new Set,subscriptionHistory:new Set},b={responseCheckIntervalId:null,requestCompleted:!0,reSubscribeIntervalId:null,consecutiveFailedSubscribeAttempts:0,consecutiveNoResponseRequest:0},g=new F(function(){U()}),y=new Set([a,u,l]),S=setInterval(function(){if(n!==m.isNetworkOnline()){if(!(n=m.isNetworkOnline()))return void J(e.info(\"Network offline\"));var t=O();n&&(!t||w(t,WebSocket.CLOSING)||w(t,WebSocket.CLOSED))&&(J(e.info(\"Network online, connecting to WebSocket server\")),U())}},250),k=function(n,t){n.forEach(function(n){try{n(t)}catch(n){J(e.error(\"Error executing callback\",n))}})},h=function(e){if(null===e)return\"NULL\";switch(e.readyState){case WebSocket.CONNECTING:return\"CONNECTING\";case WebSocket.OPEN:return\"OPEN\";case WebSocket.CLOSING:return\"CLOSING\";case WebSocket.CLOSED:return\"CLOSED\";default:return\"UNDEFINED\"}},v=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\";J(e.debug(\"[\"+n+\"] Primary WebSocket: \"+h(t.primary)+\" | Secondary WebSocket: \"+h(t.secondary)))},w=function(e,n){return e&&e.readyState===n},C=function(e){return w(e,WebSocket.OPEN)},T=function(e){return null===e||void 0===e.readyState||w(e,WebSocket.CLOSED)},O=function(){return null!==t.secondary?t.secondary:t.primary},I=function(){return C(O())},W=function(){if(i.pendingResponse)return J(e.warn(\"Heartbeat response not received\")),clearInterval(i.intervalHandle),i.pendingResponse=!1,void U();I()?(J(e.debug(\"Sending heartbeat\")),O().send(G(l)),i.pendingResponse=!0):(J(e.warn(\"Failed to send heartbeat since WebSocket is not open\")),v(\"sendHeartBeat\"),U())},N=function(){o.exponentialBackOffTime=1e3,i.pendingResponse=!1,o.reconnectWebSocket=!0,clearTimeout(o.lifeTimeTimeoutHandle),clearInterval(i.intervalHandle),clearTimeout(o.exponentialTimeoutHandle),clearTimeout(o.webSocketInitCheckerTimeoutId)},_=function(){b.consecutiveFailedSubscribeAttempts=0,b.consecutiveNoResponseRequest=0,clearInterval(b.responseCheckIntervalId),clearInterval(b.reSubscribeIntervalId)},L=function(){r.connectWebSocketRetryCount=0,r.connectionAttemptStartTime=null,r.noOpenConnectionsTimestamp=null},x=function(){try{J(e.info(\"WebSocket connection established!\")),v(\"webSocketOnOpen\"),null!==o.connState&&o.connState!==p||k(c.connectionGain),o.connState=f;var n=Date.now();k(c.connectionOpen,{connectWebSocketRetryCount:r.connectWebSocketRetryCount,connectionAttemptStartTime:r.connectionAttemptStartTime,noOpenConnectionsTimestamp:r.noOpenConnectionsTimestamp,connectionEstablishedTime:n,timeToConnect:n-r.connectionAttemptStartTime,timeWithoutConnection:r.noOpenConnectionsTimestamp?n-r.noOpenConnectionsTimestamp:null}),L(),N(),O().openTimestamp=Date.now(),0===d.subscribed.size&&C(t.secondary)&&D(t.primary,\"[Primary WebSocket] Closing WebSocket\"),(d.subscribed.size>0||d.pending.size>0)&&(C(t.secondary)&&J(e.info(\"Subscribing secondary websocket to topics of primary websocket\")),d.subscribed.forEach(function(e){d.subscriptionHistory.add(e),d.pending.add(e)}),d.subscribed.clear(),A()),W(),i.intervalHandle=setInterval(W,1e4);var a=1e3*s.connConfig.webSocketTransport.transportLifeTimeInSeconds;J(e.debug(\"Scheduling WebSocket manager reconnection, after delay \"+a+\" ms\")),o.lifeTimeTimeoutHandle=setTimeout(function(){J(e.debug(\"Starting scheduled WebSocket manager reconnection\")),U()},a)}catch(n){J(e.error(\"Error after establishing WebSocket connection\",n))}},R=function(n){v(\"webSocketOnError\"),J(e.error(\"WebSocketManager Error, error_event: \",JSON.stringify(n))),U()},j=function(n){var o=JSON.parse(n.data);switch(o.topic){case a:if(J(e.debug(\"Subscription Message received from webSocket server\",n.data)),b.requestCompleted=!0,b.consecutiveNoResponseRequest=0,\"success\"===o.content.status)b.consecutiveFailedSubscribeAttempts=0,o.content.topics.forEach(function(e){d.subscriptionHistory.delete(e),d.pending.delete(e),d.subscribed.add(e)}),0===d.subscriptionHistory.size?C(t.secondary)&&(J(e.info(\"Successfully subscribed secondary websocket to all topics of primary websocket\")),D(t.primary,\"[Primary WebSocket] Closing WebSocket\")):A(),k(c.subscriptionUpdate,o);else{if(clearInterval(b.reSubscribeIntervalId),++b.consecutiveFailedSubscribeAttempts,5===b.consecutiveFailedSubscribeAttempts)return k(c.subscriptionFailure,o),void(b.consecutiveFailedSubscribeAttempts=0);b.reSubscribeIntervalId=setInterval(function(){A()},500)}break;case l:J(e.debug(\"Heartbeat response received\")),i.pendingResponse=!1;break;default:if(o.topic){if(J(e.debug(\"Message received for topic \"+o.topic)),C(t.primary)&&C(t.secondary)&&0===d.subscriptionHistory.size&&this===t.primary)return void J(e.warn(\"Ignoring Message for Topic \"+o.topic+\", to avoid duplicates\"));if(0===c.allMessage.size&&0===c.topic.size)return void J(e.warn(\"No registered callback listener for Topic\",o.topic));k(c.allMessage,o),c.topic.has(o.topic)&&k(c.topic.get(o.topic),o)}else o.message?J(e.warn(\"WebSocketManager Message Error\",o)):J(e.warn(\"Invalid incoming message\",o))}},A=function n(){if(b.consecutiveNoResponseRequest>3)return J(e.warn(\"Ignoring subscribePendingTopics since we have exhausted max subscription retries with no response\")),void k(c.subscriptionFailure,m.getSubscriptionResponse(a,!1,Array.from(d.pending)));I()?(clearInterval(b.responseCheckIntervalId),O().send(G(a,{topics:Array.from(d.pending)})),b.requestCompleted=!1,b.responseCheckIntervalId=setInterval(function(){b.requestCompleted||(++b.consecutiveNoResponseRequest,n())},1e3)):J(e.warn(\"Ignoring subscribePendingTopics call since Default WebSocket is not open\"))},D=function(n,t){w(n,WebSocket.CONNECTING)||w(n,WebSocket.OPEN)?n.close(1e3,t):J(e.warn(\"Ignoring WebSocket Close request, WebSocket State: \"+h(n)))},M=function(e){D(t.primary,\"[Primary] WebSocket \"+e),D(t.secondary,\"[Secondary] WebSocket \"+e)},P=function(){r.connectWebSocketRetryCount++;var n=m.addJitter(o.exponentialBackOffTime,.3);Date.now()+n<=s.connConfig.urlConnValidTime?(J(e.debug(\"Scheduling WebSocket reinitialization, after delay \"+n+\" ms\")),o.exponentialTimeoutHandle=setTimeout(function(){return q()},n),o.exponentialBackOffTime*=2):(J(e.warn(\"WebSocket URL cannot be used to establish connection\")),U())},H=function(n){N(),_(),J(e.error(\"WebSocket Initialization failed\")),o.websocketInitFailed=!0,M(\"Terminating WebSocket Manager\"),clearInterval(S),k(c.initFailure,{connectWebSocketRetryCount:r.connectWebSocketRetryCount,connectionAttemptStartTime:r.connectionAttemptStartTime,reason:n}),L()},G=function(e,n){return JSON.stringify({topic:e,content:n})},z=function(n){return!!(m.isObject(n)&&m.isObject(n.webSocketTransport)&&m.isNonEmptyString(n.webSocketTransport.url)&&m.validWSUrl(n.webSocketTransport.url)&&1e3*n.webSocketTransport.transportLifeTimeInSeconds>=3e5)||(J(e.error(\"Invalid WebSocket Connection Configuration\",n)),!1)},U=function(){if(m.isNetworkOnline())if(o.websocketInitFailed)J(e.debug(\"WebSocket Init had failed, ignoring this getWebSocketConnConfig request\"));else{if(s.promiseCompleted)return N(),J(e.info(\"Fetching new WebSocket connection configuration\")),r.connectionAttemptStartTime=r.connectionAttemptStartTime||Date.now(),s.promiseCompleted=!1,s.promiseHandle=c.getWebSocketTransport(),s.promiseHandle.then(function(n){return s.promiseCompleted=!0,J(e.debug(\"Successfully fetched webSocket connection configuration\",n)),z(n)?(s.connConfig=n,s.connConfig.urlConnValidTime=Date.now()+85e3,g.connected(),q()):(H(\"Invalid WebSocket connection configuration: \"+n),{webSocketConnectionFailed:!0})},function(n){return s.promiseCompleted=!0,J(e.error(\"Failed to fetch webSocket connection configuration\",n)),m.isNetworkFailure(n)&&(J(e.info(\"Retrying fetching new WebSocket connection configuration\")),g.retry()),{webSocketConnectionFailed:!0}});J(e.debug(\"There is an ongoing getWebSocketConnConfig request, this request will be ignored\"))}else J(e.info(\"Network offline, ignoring this getWebSocketConnConfig request\"))},q=function(){if(o.websocketInitFailed)return J(e.info(\"web-socket initializing had failed, aborting re-init\")),{webSocketConnectionFailed:!0};if(!m.isNetworkOnline())return J(e.warn(\"System is offline aborting web-socket init\")),{webSocketConnectionFailed:!0};J(e.info(\"Initializing Websocket Manager\")),v(\"initWebSocket\");try{if(z(s.connConfig)){var n=null;return C(t.primary)?(J(e.debug(\"Primary Socket connection is already open\")),w(t.secondary,WebSocket.CONNECTING)||(J(e.debug(\"Establishing a secondary web-socket connection\")),t.secondary=B()),n=t.secondary):(w(t.primary,WebSocket.CONNECTING)||(J(e.debug(\"Establishing a primary web-socket connection\")),t.primary=B()),n=t.primary),o.webSocketInitCheckerTimeoutId=setTimeout(function(){C(n)||P()},1e3),{webSocketConnectionFailed:!1}}}catch(n){return J(e.error(\"Error Initializing web-socket-manager\",n)),H(\"Failed to initialize new WebSocket: \"+n.message),{webSocketConnectionFailed:!0}}},B=function(){var n=new WebSocket(s.connConfig.webSocketTransport.url);return n.addEventListener(\"open\",x),n.addEventListener(\"message\",j),n.addEventListener(\"error\",R),n.addEventListener(\"close\",function(i){return function(n,i){J(e.info(\"Socket connection is closed\",n)),v(\"webSocketOnClose before-cleanup\"),k(c.connectionClose,{openTimestamp:i.openTimestamp,closeTimestamp:Date.now(),connectionDuration:Date.now()-i.openTimestamp,code:n.code,reason:n.reason}),T(t.primary)&&(t.primary=null),T(t.secondary)&&(t.secondary=null),o.reconnectWebSocket&&(C(t.primary)||C(t.secondary)?T(t.primary)&&C(t.secondary)&&(J(e.info(\"[Primary] WebSocket Cleanly Closed\")),t.primary=t.secondary,t.secondary=null):(J(e.warn(\"Neither primary websocket and nor secondary websocket have open connections, attempting to re-establish connection\")),o.connState===p?J(e.info(\"Ignoring connectionLost callback invocation\")):(k(c.connectionLost,{openTimestamp:i.openTimestamp,closeTimestamp:Date.now(),connectionDuration:Date.now()-i.openTimestamp,code:n.code,reason:n.reason}),r.noOpenConnectionsTimestamp=Date.now()),o.connState=p,U()),v(\"webSocketOnClose after-cleanup\"))}(i,n)}),n},J=function(e){return e&&\"function\"==typeof e.sendInternalLogToServer&&e.sendInternalLogToServer(),e};this.init=function(n){if(m.assertTrue(m.isFunction(n),\"transportHandle must be a function\"),null===c.getWebSocketTransport)return c.getWebSocketTransport=n,U();J(e.warn(\"Web Socket Manager was already initialized\"))},this.onInitFailure=function(e){return m.assertTrue(m.isFunction(e),\"cb must be a function\"),c.initFailure.add(e),o.websocketInitFailed&&e(),function(){return c.initFailure.delete(e)}},this.onConnectionOpen=function(e){return m.assertTrue(m.isFunction(e),\"cb must be a function\"),c.connectionOpen.add(e),function(){return c.connectionOpen.delete(e)}},this.onConnectionClose=function(e){return m.assertTrue(m.isFunction(e),\"cb must be a function\"),c.connectionClose.add(e),function(){return c.connectionClose.delete(e)}},this.onConnectionGain=function(e){return m.assertTrue(m.isFunction(e),\"cb must be a function\"),c.connectionGain.add(e),I()&&e(),function(){return c.connectionGain.delete(e)}},this.onConnectionLost=function(e){return m.assertTrue(m.isFunction(e),\"cb must be a function\"),c.connectionLost.add(e),o.connState===p&&e(),function(){return c.connectionLost.delete(e)}},this.onSubscriptionUpdate=function(e){return m.assertTrue(m.isFunction(e),\"cb must be a function\"),c.subscriptionUpdate.add(e),function(){return c.subscriptionUpdate.delete(e)}},this.onSubscriptionFailure=function(e){return m.assertTrue(m.isFunction(e),\"cb must be a function\"),c.subscriptionFailure.add(e),function(){return c.subscriptionFailure.delete(e)}},this.onMessage=function(e,n){return m.assertNotNull(e,\"topicName\"),m.assertTrue(m.isFunction(n),\"cb must be a function\"),c.topic.has(e)?c.topic.get(e).add(n):c.topic.set(e,new Set([n])),function(){return c.topic.get(e).delete(n)}},this.onAllMessage=function(e){return m.assertTrue(m.isFunction(e),\"cb must be a function\"),c.allMessage.add(e),function(){return c.allMessage.delete(e)}},this.subscribeTopics=function(e){m.assertNotNull(e,\"topics\"),m.assertIsList(e),e.forEach(function(e){d.subscribed.has(e)||d.pending.add(e)}),b.consecutiveNoResponseRequest=0,A()},this.sendMessage=function(n){if(m.assertIsObject(n,\"payload\"),void 0===n.topic||y.has(n.topic))J(e.warn(\"Cannot send message, Invalid topic\",n));else{try{n=JSON.stringify(n)}catch(t){return void J(e.warn(\"Error stringify message\",n))}I()?O().send(n):J(e.warn(\"Cannot send message, web socket connection is not open\"))}},this.closeWebSocket=function(){N(),_(),o.reconnectWebSocket=!1,clearInterval(S),M(\"User request to close WebSocket\")},this.terminateWebSocketManager=H},R={create:function(){return new x},setGlobalConfig:function(e){var n=e.loggerConfig;E.updateLoggerConfig(n)},LogLevel:O,Logger:T}},function(e,n,t){var o;!function(){\"use strict\";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\\x25]+/,modulo:/^\\x25{2}/,placeholder:/^\\x25(?:([1-9]\\d*)\\$|\\(([^)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\\d]*)/i,key_access:/^\\.([a-z_][a-z_\\d]*)/i,index_access:/^\\[(\\d+)\\]/,sign:/^[+-]/};function i(e){return function(e,n){var t,o,c,s,a,u,l,f,p,d=1,b=e.length,g=\"\";for(o=0;o<b;o++)if(\"string\"==typeof e[o])g+=e[o];else if(\"object\"==typeof e[o]){if((s=e[o]).keys)for(t=n[d],c=0;c<s.keys.length;c++){if(null==t)throw new Error(i('[sprintf] Cannot access property \"%s\" of undefined value \"%s\"',s.keys[c],s.keys[c-1]));t=t[s.keys[c]]}else t=s.param_no?n[s.param_no]:n[d++];if(r.not_type.test(s.type)&&r.not_primitive.test(s.type)&&t instanceof Function&&(t=t()),r.numeric_arg.test(s.type)&&\"number\"!=typeof t&&isNaN(t))throw new TypeError(i(\"[sprintf] expecting number but found %T\",t));switch(r.number.test(s.type)&&(f=t>=0),s.type){case\"b\":t=parseInt(t,10).toString(2);break;case\"c\":t=String.fromCharCode(parseInt(t,10));break;case\"d\":case\"i\":t=parseInt(t,10);break;case\"j\":t=JSON.stringify(t,null,s.width?parseInt(s.width):0);break;case\"e\":t=s.precision?parseFloat(t).toExponential(s.precision):parseFloat(t).toExponential();break;case\"f\":t=s.precision?parseFloat(t).toFixed(s.precision):parseFloat(t);break;case\"g\":t=s.precision?String(Number(t.toPrecision(s.precision))):parseFloat(t);break;case\"o\":t=(parseInt(t,10)>>>0).toString(8);break;case\"s\":t=String(t),t=s.precision?t.substring(0,s.precision):t;break;case\"t\":t=String(!!t),t=s.precision?t.substring(0,s.precision):t;break;case\"T\":t=Object.prototype.toString.call(t).slice(8,-1).toLowerCase(),t=s.precision?t.substring(0,s.precision):t;break;case\"u\":t=parseInt(t,10)>>>0;break;case\"v\":t=t.valueOf(),t=s.precision?t.substring(0,s.precision):t;break;case\"x\":t=(parseInt(t,10)>>>0).toString(16);break;case\"X\":t=(parseInt(t,10)>>>0).toString(16).toUpperCase()}r.json.test(s.type)?g+=t:(!r.number.test(s.type)||f&&!s.sign?p=\"\":(p=f?\"+\":\"-\",t=t.toString().replace(r.sign,\"\")),u=s.pad_char?\"0\"===s.pad_char?\"0\":s.pad_char.charAt(1):\" \",l=s.width-(p+t).length,a=s.width&&l>0?u.repeat(l):\"\",g+=s.align?p+t+a:\"0\"===u?p+a+t:a+p+t)}return g}(function(e){if(s[e])return s[e];var n,t=e,o=[],i=0;for(;t;){if(null!==(n=r.text.exec(t)))o.push(n[0]);else if(null!==(n=r.modulo.exec(t)))o.push(\"%\");else{if(null===(n=r.placeholder.exec(t)))throw new SyntaxError(\"[sprintf] unexpected placeholder\");if(n[2]){i|=1;var c=[],a=n[2],u=[];if(null===(u=r.key.exec(a)))throw new SyntaxError(\"[sprintf] failed to parse named argument key\");for(c.push(u[1]);\"\"!==(a=a.substring(u[0].length));)if(null!==(u=r.key_access.exec(a)))c.push(u[1]);else{if(null===(u=r.index_access.exec(a)))throw new SyntaxError(\"[sprintf] failed to parse named argument key\");c.push(u[1])}n[2]=c}else i|=2;if(3===i)throw new Error(\"[sprintf] mixing positional and named placeholders is not (yet) supported\");o.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}t=t.substring(n[0].length)}return s[e]=o}(e),arguments)}function c(e,n){return i.apply(null,[e].concat(n||[]))}var s=Object.create(null);n.sprintf=i,n.vsprintf=c,\"undefined\"!=typeof window&&(window.sprintf=i,window.vsprintf=c,void 0===(o=function(){return{sprintf:i,vsprintf:c}}.call(n,t,n,e))||(e.exports=o))}()},function(e,n,t){\"use strict\";t.r(n),function(e){t.d(n,\"WebSocketManager\",function(){return r});var o=t(0);e.connect=e.connect||{},connect.WebSocketManager=o.a;var r=o.a}.call(this,t(3))},function(e,n){var t;t=function(){return this}();try{t=t||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(t=window)}e.exports=t}]);\n//# sourceMappingURL=amazon-connect-websocket-manager.js.map\n\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n\n  connect.core = {};\n  connect.core.initialized = false;\n  connect.version = \"1.6.6\";\n  connect.DEFAULT_BATCH_SIZE = 500;\n \n  var CCP_SYN_TIMEOUT = 1000; // 1 sec\n  var CCP_ACK_TIMEOUT = 3000; // 3 sec\n  var CCP_LOAD_TIMEOUT = 3000; // 3 sec\n  var CCP_IFRAME_REFRESH_INTERVAL = 5000; // 5 sec\n \n  var LEGACY_LOGIN_URL_PATTERN = \"https://{alias}.awsapps.com/auth/?client_id={client_id}&redirect_uri={redirect}\";\n  var CLIENT_ID_MAP = {\n    \"us-east-1\": \"06919f4fd8ed324e\"\n  };\n \n  var AUTHORIZE_ENDPOINT = \"/auth/authorize\";\n  var LEGACY_AUTHORIZE_ENDPOINT = \"/connect/auth/authorize\";\n  var AUTHORIZE_RETRY_INTERVAL = 2000;\n  var AUTHORIZE_MAX_RETRY = 5;\n \n  var LEGACY_WHITELISTED_ORIGINS_ENDPOINT = \"/connect/whitelisted-origins\";\n  var WHITELISTED_ORIGINS_ENDPOINT = \"/whitelisted-origins\";\n  var WHITELISTED_ORIGINS_RETRY_INTERVAL = 2000;\n  var WHITELISTED_ORIGINS_MAX_RETRY = 5;\n\n  connect.numberOfConnectedCCPs = 0;\n\n  /**\n   * @deprecated\n   * This function was only meant for internal use. \n   * The name is misleading for what it should do.\n   * Internally we have replaced its usage with `getLoginUrl`.\n   */\n  var createLoginUrl = function (params) {\n    var redirect = \"https://lily.us-east-1.amazonaws.com/taw/auth/code\";\n    connect.assertNotNull(redirect);\n \n    if (params.loginUrl) {\n      return params.loginUrl\n    } else if (params.alias) {\n      log.warn(\"The `alias` param is deprecated and should not be expected to function properly. Please use `ccpUrl` or `loginUrl`. See https://github.com/amazon-connect/amazon-connect-streams/blob/master/README.md#connectcoreinitccp for valid parameters.\");\n      return LEGACY_LOGIN_URL_PATTERN\n        .replace(\"{alias}\", params.alias)\n        .replace(\"{client_id}\", CLIENT_ID_MAP[\"us-east-1\"])\n        .replace(\"{redirect}\", global.encodeURIComponent(\n          redirect));\n    } else {\n      return params.ccpUrl;\n    }\n  };\n\n  /**\n   * Replaces `createLoginUrl`, as that function's name was misleading.\n   * The `params.alias` parameter is deprecated. Please refrain from using it.\n   */\n  var getLoginUrl = function (params) {\n    var redirect = \"https://lily.us-east-1.amazonaws.com/taw/auth/code\";\n    connect.assertNotNull(redirect);\n    if (params.loginUrl) {\n      return params.loginUrl\n    } else if (params.alias) {\n      log.warn(\"The `alias` param is deprecated and should not be expected to function properly. Please use `ccpUrl` or `loginUrl`. See https://github.com/amazon-connect/amazon-connect-streams/blob/master/README.md#connectcoreinitccp for valid parameters.\");\n      return LEGACY_LOGIN_URL_PATTERN\n        .replace(\"{alias}\", params.alias)\n        .replace(\"{client_id}\", CLIENT_ID_MAP[\"us-east-1\"])\n        .replace(\"{redirect}\", global.encodeURIComponent(\n          redirect));\n    } else {\n      return params.ccpUrl;\n    }\n  };\n \n  /**-------------------------------------------------------------------------\n  * Returns scheme://host:port for a given url\n  */\n  function sanitizeDomain(url) {\n    var domain = url.match(/^(?:https?:\\/\\/)?(?:[^@\\n]+@)?(?:www\\.)?([^:\\/\\n?]+)/ig);\n    return domain.length ? domain[0] : \"\";\n  }\n \n  /**-------------------------------------------------------------------------\n    * Print a warning message if the Connect core is not initialized.\n    */\n  connect.core.checkNotInitialized = function () {\n    if (connect.core.initialized) {\n      var log = connect.getLog();\n      log.warn(\"Connect core already initialized, only needs to be initialized once.\").sendInternalLogToServer();\n    }\n  };\n \n  /**-------------------------------------------------------------------------\n   * Basic Connect client initialization.\n   * Should be used only by the API Shared Worker.\n   */\n  connect.core.init = function (params) {\n    connect.core.eventBus = new connect.EventBus();\n    connect.core.agentDataProvider = new AgentDataProvider(connect.core.getEventBus());\n    connect.core.initClient(params);\n    connect.core.initAgentAppClient(params);\n    connect.core.initialized = true;\n  };\n \n  /**-------------------------------------------------------------------------\n   * Initialized AWS client\n   * Should be used by Shared Worker to update AWS client with new credentials\n   * after refreshed authentication.\n   */\n  connect.core.initClient = function (params) {\n    connect.assertNotNull(params, 'params');\n    \n    var authToken = connect.assertNotNull(params.authToken, 'params.authToken');\n    var region = connect.assertNotNull(params.region, 'params.region');\n    var endpoint = params.endpoint || null;\n \n    connect.core.client = new connect.AWSClient(authToken, region, endpoint);\n  };\n\n  /**-------------------------------------------------------------------------\n   * Initialized AgentApp client\n   * Should be used by Shared Worker to update AgentApp client with new credentials\n   * after refreshed authentication.\n   */\n  connect.core.initAgentAppClient = function (params) {\n    connect.assertNotNull(params, 'params');    \n    var authToken = connect.assertNotNull(params.authToken, 'params.authToken');\n    var authCookieName = connect.assertNotNull(params.authCookieName, 'params.authCookieName');\n    var endpoint = connect.assertNotNull(params.agentAppEndpoint, 'params.agentAppEndpoint');\n    \n    connect.core.agentAppClient = new connect.AgentAppClient(authCookieName, authToken, endpoint);\n  };\n \n  /**-------------------------------------------------------------------------\n   * Uninitialize Connect.\n   */\n  connect.core.terminate = function () {\n    connect.core.client = new connect.NullClient();\n    connect.core.agentAppClient = new connect.NullClient();\n    connect.core.masterClient = new connect.NullClient();\n    var bus = connect.core.getEventBus();\n    if (bus) bus.unsubscribeAll();\n    connect.core.bus = new connect.EventBus();\n    connect.core.agentDataProvider = null;\n    connect.core.softphoneManager = null;\n    connect.core.upstream = null;\n    connect.core.keepaliveManager = null;\n    connect.agent.initialized = false;\n    connect.core.initialized = false;\n  };\n \n  /**-------------------------------------------------------------------------\n   * Setup the SoftphoneManager to be initialized when the agent\n   * is determined to have softphone enabled.\n   */\n  connect.core.softphoneUserMediaStream = null;\n \n  connect.core.getSoftphoneUserMediaStream = function () {\n    return connect.core.softphoneUserMediaStream;\n  };\n \n  connect.core.setSoftphoneUserMediaStream = function (stream) {\n    connect.core.softphoneUserMediaStream = stream;\n  };\n \n  connect.core.initRingtoneEngines = function (params) {\n    connect.assertNotNull(params, \"params\");\n \n    var setupRingtoneEngines = function (ringtoneSettings) {\n      connect.assertNotNull(ringtoneSettings, \"ringtoneSettings\");\n      connect.assertNotNull(ringtoneSettings.voice, \"ringtoneSettings.voice\");\n      connect.assertTrue(ringtoneSettings.voice.ringtoneUrl || ringtoneSettings.voice.disabled, \"ringtoneSettings.voice.ringtoneUrl must be provided or ringtoneSettings.voice.disabled must be true\");\n      connect.assertNotNull(ringtoneSettings.queue_callback, \"ringtoneSettings.queue_callback\");\n      connect.assertTrue(ringtoneSettings.queue_callback.ringtoneUrl || ringtoneSettings.queue_callback.disabled, \"ringtoneSettings.voice.ringtoneUrl must be provided or ringtoneSettings.queue_callback.disabled must be true\");\n \n      connect.core.ringtoneEngines = {};\n \n      connect.agent(function (agent) {\n        agent.onRefresh(function () {\n          connect.ifMaster(connect.MasterTopics.RINGTONE, function () {\n            if (!ringtoneSettings.voice.disabled && !connect.core.ringtoneEngines.voice) {\n              connect.core.ringtoneEngines.voice =\n                new connect.VoiceRingtoneEngine(ringtoneSettings.voice);\n              connect.getLog().info(\"VoiceRingtoneEngine initialized.\").sendInternalLogToServer();\n            }\n \n            if (!ringtoneSettings.chat.disabled && !connect.core.ringtoneEngines.chat) {\n              connect.core.ringtoneEngines.chat =\n                new connect.ChatRingtoneEngine(ringtoneSettings.chat);\n              connect.getLog().info(\"ChatRingtoneEngine initialized.\").sendInternalLogToServer();\n            }\n \n            if (!ringtoneSettings.task.disabled && !connect.core.ringtoneEngines.task) {\n              connect.core.ringtoneEngines.task =\n                new connect.TaskRingtoneEngine(ringtoneSettings.task);\n                connect.getLog().info(\"TaskRingtoneEngine initialized.\").sendInternalLogToServer();\n            }\n \n            if (!ringtoneSettings.queue_callback.disabled && !connect.core.ringtoneEngines.queue_callback) {\n              connect.core.ringtoneEngines.queue_callback =\n                new connect.QueueCallbackRingtoneEngine(ringtoneSettings.queue_callback);\n              connect.getLog().info(\"QueueCallbackRingtoneEngine initialized.\").sendInternalLogToServer();\n            }\n          });\n        });\n      });\n\n      handleRingerDeviceChange();\n    };\n \n    var mergeParams = function (params, otherParams) {\n      // For backwards compatibility: support pulling disabled flag and ringtoneUrl\n      // from softphone config if it exists from downstream into the ringtone config.\n      params.ringtone = params.ringtone || {};\n      params.ringtone.voice = params.ringtone.voice || {};\n      params.ringtone.queue_callback = params.ringtone.queue_callback || {};\n      params.ringtone.chat = params.ringtone.chat || { disabled: true };\n      params.ringtone.task = params.ringtone.task || { disabled: true };\n \n      if (otherParams.softphone) {\n        if (otherParams.softphone.disableRingtone) {\n          params.ringtone.voice.disabled = true;\n          params.ringtone.queue_callback.disabled = true;\n        }\n \n        if (otherParams.softphone.ringtoneUrl) {\n          params.ringtone.voice.ringtoneUrl = otherParams.softphone.ringtoneUrl;\n          params.ringtone.queue_callback.ringtoneUrl = otherParams.softphone.ringtoneUrl;\n        }\n      }\n \n      if (otherParams.chat) {\n        if (otherParams.chat.disableRingtone) {\n          params.ringtone.chat.disabled = true;\n        }\n \n        if (otherParams.chat.ringtoneUrl) {\n          params.ringtone.chat.ringtoneUrl = otherParams.chat.ringtoneUrl;\n        }\n      }\n \n      // Merge in ringtone settings from downstream.\n      if (otherParams.ringtone) {\n        params.ringtone.voice = connect.merge(params.ringtone.voice,\n          otherParams.ringtone.voice || {});\n        params.ringtone.queue_callback = connect.merge(params.ringtone.queue_callback,\n          otherParams.ringtone.voice || {});\n        params.ringtone.chat = connect.merge(params.ringtone.chat,\n          otherParams.ringtone.chat || {});\n      }\n    };\n \n    // Merge params from params.softphone and params.chat into params.ringtone\n    // for embedded and non-embedded use cases so that defaults are picked up.\n    mergeParams(params, params);\n \n    if (connect.isFramed()) {\n      // If the CCP is in a frame, wait for configuration from downstream.\n      var bus = connect.core.getEventBus();\n      bus.subscribe(connect.EventType.CONFIGURE, function (data) {\n        this.unsubscribe();\n        // Merge all params from data into params for any overridden\n        // values in either legacy \"softphone\" or \"ringtone\" settings.\n        mergeParams(params, data);\n        setupRingtoneEngines(params.ringtone);\n      });\n \n    } else {\n      setupRingtoneEngines(params.ringtone);\n    }\n  };\n\n  var handleRingerDeviceChange = function() {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.ConfigurationEvents.SET_RINGER_DEVICE, setRingerDevice);\n  }\n\n  var setRingerDevice = function (data){\n    if(connect.keys(connect.core.ringtoneEngines).length === 0 || !data || !data.deviceId){\n      return;\n    }\n    var deviceId = data.deviceId;\n    for (var ringtoneType in connect.core.ringtoneEngines) {\n      connect.core.ringtoneEngines[ringtoneType].setOutputDevice(deviceId);\n    }\n\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.ConfigurationEvents.RINGER_DEVICE_CHANGED,\n      data: { deviceId: deviceId }\n    });\n  }\n\n  connect.core.initSoftphoneManager = function (paramsIn) {\n    var params = paramsIn || {};\n \n    var competeForMasterOnAgentUpdate = function (softphoneParamsIn) {\n      var softphoneParams = connect.merge(params.softphone || {}, softphoneParamsIn);\n \n      connect.agent(function (agent) {\n        if (!agent.getChannelConcurrency(connect.ChannelType.VOICE)) {\n          return;\n        }\n        agent.onRefresh(function () {\n          var sub = this;\n \n          connect.ifMaster(connect.MasterTopics.SOFTPHONE, function () {\n            if (!connect.core.softphoneManager && agent.isSoftphoneEnabled()) {\n              // Become master to send logs, since we need logs from softphone tab.\n              connect.becomeMaster(connect.MasterTopics.SEND_LOGS);\n              connect.core.softphoneManager = new connect.SoftphoneManager(softphoneParams);\n              sub.unsubscribe();\n            }\n          });\n        });\n      });\n    };\n\n    /**\n     * If the window is framed, we need to wait for a CONFIGURE message from\n     * downstream before we try to initialize, unless params.allowFramedSoftphone is true.\n     */\n    if (connect.isFramed() && !params.allowFramedSoftphone) {\n      var bus = connect.core.getEventBus();\n      bus.subscribe(connect.EventType.CONFIGURE, function (data) {\n        if (data.softphone && data.softphone.allowFramedSoftphone) {\n          this.unsubscribe();\n          competeForMasterOnAgentUpdate(data.softphone);\n        }\n        setupEventListenersForMultiTabUseInFirefox(data.softphone);\n      });\n    } else {\n      competeForMasterOnAgentUpdate(params);\n      setupEventListenersForMultiTabUseInFirefox(params);\n    }\n \n    connect.agent(function (agent) {\n      // Sync mute across all tabs \n      if (agent.isSoftphoneEnabled() && agent.getChannelConcurrency(connect.ChannelType.VOICE)) {\n        connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,\n          {\n            event: connect.EventType.MUTE\n          });\n      }\n    });\n\n    function setupEventListenersForMultiTabUseInFirefox(softphoneParamsIn) {\n      var softphoneParams = connect.merge(params.softphone || {}, softphoneParamsIn);\n\n      // keep the softphone params for external use\n      connect.core.softphoneParams = softphoneParams;\n\n      if (connect.isFirefoxBrowser()) {\n        // In Firefox, when a tab takes over another tab's softphone primary,\n        // the previous primary tab should delete sofphone manager and stop microphone\n        connect.core.getUpstream().onUpstream(connect.EventType.MASTER_RESPONSE, function (res) {\n          if (res.data && res.data.topic === connect.MasterTopics.SOFTPHONE && res.data.takeOver && (res.data.masterId !== connect.core.portStreamId)) {\n            if (connect.core.softphoneManager) {\n              connect.core.softphoneManager.onInitContactSub.unsubscribe();\n              delete connect.core.softphoneManager;\n            }\n            var userMediaStream = connect.core.getSoftphoneUserMediaStream();\n            if (userMediaStream) {\n              userMediaStream.getTracks().forEach(function(track) { track.stop(); });\n              connect.core.setSoftphoneUserMediaStream(null);\n            }\n          }\n        });\n\n        // In Firefox, when multiple tabs are open,\n        // webrtc session is not started until READY_TO_START_SESSION event is triggered\n        connect.core.getEventBus().subscribe(connect.ConnectionEvents.READY_TO_START_SESSION, function () {\n          connect.ifMaster(connect.MasterTopics.SOFTPHONE, function () {\n            if (connect.core.softphoneManager) {\n              connect.core.softphoneManager.startSession();\n            }\n          }, function () {\n            connect.becomeMaster(connect.MasterTopics.SOFTPHONE, function () {\n              connect.agent(function (agent) {\n                if (!connect.core.softphoneManager && agent.isSoftphoneEnabled()) {\n                  connect.becomeMaster(connect.MasterTopics.SEND_LOGS);\n                  connect.core.softphoneManager = new connect.SoftphoneManager(softphoneParams);\n                  connect.core.softphoneManager.startSession();\n                }\n              });\n            });\n          });\n        });\n\n        // handling outbound-call and auto-accept cases for pending session\n        connect.contact(function (c) {\n          connect.agent(function (agent) {\n            c.onRefresh(function (contact) {\n              if (\n                connect.hasOtherConnectedCCPs() &&\n                document.visibilityState === 'visible' &&\n                (contact.getStatus().type === connect.ContactStatusType.CONNECTING || contact.getStatus().type === connect.ContactStatusType.INCOMING)\n              ) {\n                var isOutBoundCall = contact.isSoftphoneCall() && !contact.isInbound();\n                var isAutoAcceptEnabled = contact.isSoftphoneCall() && agent.getConfiguration().softphoneAutoAccept;\n                var isQueuedCallback = contact.getType() === connect.ContactType.QUEUE_CALLBACK;\n                if (isOutBoundCall || isAutoAcceptEnabled || isQueuedCallback) {\n                  connect.core.triggerReadyToStartSessionEvent();\n                }\n              }\n            });\n          });\n        });\n      }\n    }\n  };\n\n  // trigger READY_TO_START_SESSION event in a context with Softphone Manager\n  // internal use only\n  connect.core.triggerReadyToStartSessionEvent = function () {\n    var allowFramedSoftphone = connect.core.softphoneParams && connect.core.softphoneParams.allowFramedSoftphone;\n    if (connect.isCCP()) {\n      if (allowFramedSoftphone) {\n        // the event is triggered in this iframed CCP context\n        connect.core.getEventBus().trigger(connect.ConnectionEvents.READY_TO_START_SESSION);\n      } else {\n        if (connect.isFramed()) {\n          // if this is an iframed CCP, the event is send to downstream (CRM)\n          connect.core.getUpstream().sendDownstream(connect.ConnectionEvents.READY_TO_START_SESSION);\n        } else {\n          // if this is a standalone CCP, trigger this event in this CCP context\n          connect.core.getEventBus().trigger(connect.ConnectionEvents.READY_TO_START_SESSION);\n        }\n      }\n    } else {\n      if (allowFramedSoftphone) {\n        // the event is send to the upstream (iframed CCP)\n        connect.core.getUpstream().sendUpstream(connect.ConnectionEvents.READY_TO_START_SESSION);\n      } else {\n        // the event is triggered in this CRM context\n        connect.core.getEventBus().trigger(connect.ConnectionEvents.READY_TO_START_SESSION);\n      }\n    }\n  };\n\n  connect.core.initPageOptions = function (params) {\n    connect.assertNotNull(params, \"params\");\n\n    if (connect.isFramed()) {\n      // If the CCP is in a frame, wait for configuration from downstream.\n      var bus = connect.core.getEventBus();\n      bus.subscribe(connect.EventType.CONFIGURE, function (data) {\n        connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,\n          {\n            event: connect.ConfigurationEvents.CONFIGURE,\n            data: data\n          });\n      });\n\n    }\n  };\n\n  //Internal use only.\n  connect.core.authorize = function (endpoint) {\n    var options = {\n      credentials: 'include'\n    };\n\n    var authorizeEndpoint = endpoint;\n    if (!authorizeEndpoint) {\n      authorizeEndpoint = connect.core.isLegacyDomain()\n        ? LEGACY_AUTHORIZE_ENDPOINT\n        : AUTHORIZE_ENDPOINT;\n    }\n    return connect.fetch(authorizeEndpoint, options, AUTHORIZE_RETRY_INTERVAL, AUTHORIZE_MAX_RETRY);\n  };\n \n  /**\n   * @deprecated\n   * This used to be used internally, but is no longer needed.\n   */\n  connect.core.verifyDomainAccess = function (authToken, endpoint) {\n    connect.getLog().warn(\"This API will be deprecated in the next major version release\");\n    if (!connect.isFramed()) {\n      return Promise.resolve();\n    }\n    var options = {\n      headers: {\n        'X-Amz-Bearer': authToken\n      }\n    };\n    var whitelistedOriginsEndpoint = null;\n    if (endpoint){\n      whitelistedOriginsEndpoint = endpoint;\n    }\n    else {\n      whitelistedOriginsEndpoint = connect.core.isLegacyDomain() \n        ? LEGACY_WHITELISTED_ORIGINS_ENDPOINT\n        : WHITELISTED_ORIGINS_ENDPOINT;\n    }\n    \n    return connect.fetch(whitelistedOriginsEndpoint, options, WHITELISTED_ORIGINS_RETRY_INTERVAL, WHITELISTED_ORIGINS_MAX_RETRY).then(function (response) {\n      var topDomain = sanitizeDomain(window.document.referrer);\n      var isAllowed = response.whitelistedOrigins.some(function (origin) {\n        return topDomain === sanitizeDomain(origin);\n      });\n      return isAllowed ? Promise.resolve() : Promise.reject();\n    });\n  };\n\n  /**-------------------------------------------------------------------------\n   * Returns true if this window's href is on the legacy connect domain. \n   * Only useful for internal use. \n   */\n  connect.core.isLegacyDomain = function(url) {\n    url = url || window.location.href;\n    return url.includes('.awsapps.com');\n  }\n\n \n  /**-------------------------------------------------------------------------\n   * Initializes Connect by creating or connecting to the API Shared Worker.\n   * Used only by the CCP\n   */\n  connect.core.initSharedWorker = function (params) {\n    connect.core.checkNotInitialized();\n    if (connect.core.initialized) {\n      return;\n    }\n    connect.assertNotNull(params, 'params');\n \n    var sharedWorkerUrl = connect.assertNotNull(params.sharedWorkerUrl, 'params.sharedWorkerUrl');\n    var authToken = connect.assertNotNull(params.authToken, 'params.authToken');\n    var refreshToken = connect.assertNotNull(params.refreshToken, 'params.refreshToken');\n    var authTokenExpiration = connect.assertNotNull(params.authTokenExpiration, 'params.authTokenExpiration');\n    var region = connect.assertNotNull(params.region, 'params.region');\n    var endpoint = params.endpoint || null;\n    var authorizeEndpoint = params.authorizeEndpoint;\n    if (!authorizeEndpoint) {\n      authorizeEndpoint = connect.core.isLegacyDomain()\n        ? LEGACY_AUTHORIZE_ENDPOINT\n        : AUTHORIZE_ENDPOINT;\n    }\n    var agentAppEndpoint = params.agentAppEndpoint || null;\n    var authCookieName = params.authCookieName || null;\n \n    try {\n      // Initialize the event bus and agent data providers.\n      connect.core.eventBus = new connect.EventBus({ logEvents: true });\n      connect.core.agentDataProvider = new AgentDataProvider(connect.core.getEventBus());\n      connect.core.mediaFactory = new connect.MediaFactory(params);\n      \n      // Create the shared worker and upstream conduit.\n      var worker = new SharedWorker(sharedWorkerUrl, \"ConnectSharedWorker\");\n      var conduit = new connect.Conduit(\"ConnectSharedWorkerConduit\",\n        new connect.PortStream(worker.port),\n        new connect.WindowIOStream(window, parent));\n \n      // Set the global upstream conduit for external use.\n      connect.core.upstream = conduit;\n      connect.core.webSocketProvider = new WebSocketProvider();\n \n      // Close our port to the shared worker before the window closes.\n      global.onunload = function () {\n        conduit.sendUpstream(connect.EventType.CLOSE);\n        worker.port.close();\n      };\n \n      connect.getLog().scheduleUpstreamLogPush(conduit);\n      connect.getLog().scheduleDownstreamClientSideLogsPush();\n      // Bridge all upstream messages into the event bus.\n      conduit.onAllUpstream(connect.core.getEventBus().bridge());\n      // Pass all upstream messages (from shared worker) downstream (to CCP consumer).\n      conduit.onAllUpstream(conduit.passDownstream());\n\n      if (connect.isFramed()) {\n        // Bridge all downstream messages into the event bus.\n        conduit.onAllDownstream(connect.core.getEventBus().bridge());\n        // Pass all downstream messages (from CCP consumer) upstream (to shared worker).\n        conduit.onAllDownstream(conduit.passUpstream());\n      }\n      // Send configuration up to the shared worker.\n      conduit.sendUpstream(connect.EventType.CONFIGURE, {\n        authToken: authToken,\n        authTokenExpiration: authTokenExpiration,\n        endpoint: endpoint,\n        refreshToken: refreshToken,\n        region: region,\n        authorizeEndpoint: authorizeEndpoint,\n        agentAppEndpoint: agentAppEndpoint,\n        authCookieName: authCookieName\n      });\n \n      conduit.onUpstream(connect.EventType.ACKNOWLEDGE, function (data) {\n        connect.getLog().info(\"Acknowledged by the ConnectSharedWorker!\").sendInternalLogToServer();\n        connect.core.initialized = true;\n        connect.core.portStreamId = data.id;\n        this.unsubscribe();\n      });\n      // Add all upstream log entries to our own logger.\n      conduit.onUpstream(connect.EventType.LOG, function (logEntry) {\n        if (logEntry.loggerId !== connect.getLog().getLoggerId()) {\n          connect.getLog().addLogEntry(connect.LogEntry.fromObject(logEntry));\n        }\n      });\n      conduit.onUpstream(connect.EventType.SERVER_BOUND_INTERNAL_LOG, function (logEntry) {\n        if (logEntry.loggerId !== connect.getLog().getLoggerId()) {\n          connect.getLog().sendInternalLogEntryToServer(connect.LogEntry.fromObject(logEntry));\n        }\n      });\n      // Reload the page if the shared worker detects an API auth failure.\n      conduit.onUpstream(connect.EventType.AUTH_FAIL, function (logEntry) {\n        location.reload();\n      });\n\n      conduit.onUpstream(connect.EventType.UPDATE_CONNECTED_CCPS, function (data) {\n        connect.getLog().info(\"Number of connected CCPs updated: \" + data.length);\n        connect.numberOfConnectedCCPs = data.length;\n      });\n\n      connect.core.client = new connect.UpstreamConduitClient(conduit);\n      connect.core.masterClient = new connect.UpstreamConduitMasterClient(conduit);\n \n      // Pass the TERMINATE request upstream to the shared worker.\n      connect.core.getEventBus().subscribe(connect.EventType.TERMINATE,\n        conduit.passUpstream());\n \n      // Refresh the page when we receive the TERMINATED response from the\n      // shared worker.\n      connect.core.getEventBus().subscribe(connect.EventType.TERMINATED, function () {\n        window.location.reload(true);\n      });\n \n      worker.port.start();\n \n      // Attempt to get permission to show notifications.\n      var nm = connect.core.getNotificationManager();\n      nm.requestPermission();\n \n    } catch (e) {\n      connect.getLog().error(\"Failed to initialize the API shared worker, we're dead!\")\n        .withException(e).sendInternalLogToServer();\n    }\n  };\n \n  /**-------------------------------------------------------------------------\n   * Initializes Connect by creating or connecting to the API Shared Worker.\n   * Initializes Connect by loading the CCP in an iframe and connecting to it.\n   */\n  connect.core.initCCP = function (containerDiv, paramsIn) {\n    connect.core.checkNotInitialized();\n    if (connect.core.initialized) {\n      return;\n    }\n \n    // For backwards compatibility, when instead of taking a params object\n    // as input we only accepted ccpUrl.\n    var params = {};\n    if (typeof (paramsIn) === 'string') {\n      params.ccpUrl = paramsIn;\n    } else {\n      params = paramsIn;\n    }\n \n    connect.assertNotNull(containerDiv, 'containerDiv');\n    connect.assertNotNull(params.ccpUrl, 'params.ccpUrl');\n \n    // Create the CCP iframe and append it to the container div.\n    var iframe = document.createElement('iframe');\n    iframe.src = params.ccpUrl;\n    iframe.allow = \"microphone; autoplay\";\n    iframe.style = \"width: 100%; height: 100%\";\n    containerDiv.appendChild(iframe);\n\n    // Initialize the event bus and agent data providers.\n    // NOTE: Setting logEvents here to FALSE in order to avoid duplicating\n    // events which are logged in CCP.\n    connect.core.eventBus = new connect.EventBus({ logEvents: false });\n    connect.core.agentDataProvider = new AgentDataProvider(connect.core.getEventBus());\n    connect.core.mediaFactory = new connect.MediaFactory(params);\n \n    // Build the upstream conduit communicating with the CCP iframe.\n    var conduit = new connect.IFrameConduit(params.ccpUrl, window, iframe);\n \n    // Let CCP know if iframe is visible\n    iframe.onload = setTimeout(function() {\n      var style = window.getComputedStyle(iframe, null);\n      var data = {\n        display: style.display,\n        offsetWidth: iframe.offsetWidth,\n        offsetHeight: iframe.offsetHeight,\n        clientRectsLength: iframe.getClientRects().length\n      };\n      conduit.sendUpstream(connect.EventType.IFRAME_STYLE, data);\n    }, 10000);\n \n    // Set the global upstream conduit for external use.\n    connect.core.upstream = conduit;\n \n    // Init webSocketProvider\n    connect.core.webSocketProvider = new WebSocketProvider();\n \n    conduit.onAllUpstream(connect.core.getEventBus().bridge());\n \n    // Initialize the keepalive manager.\n    connect.core.keepaliveManager = new KeepaliveManager(conduit,\n      connect.core.getEventBus(),\n      params.ccpSynTimeout || CCP_SYN_TIMEOUT,\n      params.ccpAckTimeout || CCP_ACK_TIMEOUT)\n      ;\n    connect.core.iframeRefreshInterval = null;\n \n    // Allow 10 sec (default) before receiving the first ACK from the CCP.\n    connect.core.ccpLoadTimeoutInstance = global.setTimeout(function () {\n      connect.core.ccpLoadTimeoutInstance = null;\n      connect.core.getEventBus().trigger(connect.EventType.ACK_TIMEOUT);\n    }, params.ccpLoadTimeout || CCP_LOAD_TIMEOUT);\n \n    // Once we receive the first ACK, setup our upstream API client and establish\n    // the SYN/ACK refresh flow.\n    conduit.onUpstream(connect.EventType.ACKNOWLEDGE, function (data) {\n      connect.getLog().info(\"Acknowledged by the CCP!\").sendInternalLogToServer();\n      connect.core.client = new connect.UpstreamConduitClient(conduit);\n      connect.core.masterClient = new connect.UpstreamConduitMasterClient(conduit);\n      connect.core.portStreamId = data.id;\n\n      if (params.softphone || params.chat || params.pageOptions) {\n        // Send configuration up to the CCP.\n        //set it to false if secondary\n        conduit.sendUpstream(connect.EventType.CONFIGURE, {\n          softphone: params.softphone,\n          chat: params.chat,\n          pageOptions: params.pageOptions\n        });\n      }\n \n      if (connect.core.ccpLoadTimeoutInstance) {\n        global.clearTimeout(connect.core.ccpLoadTimeoutInstance);\n        connect.core.ccpLoadTimeoutInstance = null;\n      }\n \n      connect.core.keepaliveManager.start();\n      this.unsubscribe();\n\n      connect.core.initialized = true;\n      connect.core.getEventBus().trigger(connect.EventType.INIT);\n    });\n \n    // Add any logs from the upstream to our own logger.\n    conduit.onUpstream(connect.EventType.LOG, function (logEntry) {\n      if (logEntry.loggerId !== connect.getLog().getLoggerId()) {\n        connect.getLog().addLogEntry(connect.LogEntry.fromObject(logEntry));\n      }\n    });\n    conduit.onUpstream(connect.EventType.SERVER_BOUND_INTERNAL_LOG, function (logEntry) {\n      if (logEntry.loggerId !== connect.getLog().getLoggerId()) {\n        connect.getLog().sendInternalLogEntryToServer(connect.LogEntry.fromObject(logEntry));\n      }\n    });\n \n    // Pop a login page when we encounter an ACK timeout.\n    connect.core.getEventBus().subscribe(connect.EventType.ACK_TIMEOUT, function () {\n      // loginPopup is true by default, only false if explicitly set to false.\n      if (params.loginPopup !== false) {\n        try {\n          var loginUrl = getLoginUrl(params);\n          connect.getLog().warn(\"ACK_TIMEOUT occurred, attempting to pop the login page if not already open.\").sendInternalLogToServer();\n          // clear out last opened timestamp for SAML authentication when there is ACK_TIMEOUT\n          if (params.loginUrl) {\n             connect.core.getPopupManager().clear(connect.MasterTopics.LOGIN_POPUP);\n          }\n          connect.core.loginWindow = connect.core.getPopupManager().open(loginUrl, connect.MasterTopics.LOGIN_POPUP, params.loginOptions);\n\n        } catch (e) {\n          connect.getLog().error(\"ACK_TIMEOUT occurred but we are unable to open the login popup.\").withException(e).sendInternalLogToServer();\n        }\n      }\n \n      if (connect.core.iframeRefreshInterval == null) {\n        connect.core.iframeRefreshInterval = window.setInterval(function () {\n          iframe.src = params.ccpUrl;\n        }, CCP_IFRAME_REFRESH_INTERVAL);\n \n        conduit.onUpstream(connect.EventType.ACKNOWLEDGE, function () {\n          this.unsubscribe();\n          global.clearInterval(connect.core.iframeRefreshInterval);\n          connect.core.iframeRefreshInterval = null;\n          connect.core.getPopupManager().clear(connect.MasterTopics.LOGIN_POPUP);\n        if ((params.loginPopupAutoClose || (params.loginOptions && params.loginOptions.autoClose)) && \n              connect.core.loginWindow) {\n            connect.core.loginWindow.close();\n            connect.core.loginWindow = null;\n          }\n        });\n      }\n    });\n \n    if (params.onViewContact) {\n      connect.core.onViewContact(params.onViewContact);\n    }\n\n    conduit.onUpstream(connect.EventType.UPDATE_CONNECTED_CCPS, function (data) {\n      connect.numberOfConnectedCCPs = data.length;\n    });\n\n    // keep the softphone params for external use\n    connect.core.softphoneParams = params.softphone;\n  };\n \n  /**-----------------------------------------------------------------------*/\n  var KeepaliveManager = function (conduit, eventBus, synTimeout, ackTimeout) {\n    this.conduit = conduit;\n    this.eventBus = eventBus;\n    this.synTimeout = synTimeout;\n    this.ackTimeout = ackTimeout;\n    this.ackTimer = null;\n    this.synTimer = null;\n    this.ackSub = null;\n  };\n \n  KeepaliveManager.prototype.start = function () {\n    var self = this;\n \n    this.conduit.sendUpstream(connect.EventType.SYNCHRONIZE);\n    this.ackSub = this.conduit.onUpstream(connect.EventType.ACKNOWLEDGE, function () {\n      this.unsubscribe();\n      global.clearTimeout(self.ackTimer);\n      self.deferStart();\n    });\n    this.ackTimer = global.setTimeout(function () {\n      self.ackSub.unsubscribe();\n      self.eventBus.trigger(connect.EventType.ACK_TIMEOUT);\n      self.deferStart();\n    }, this.ackTimeout);\n  };\n \n  KeepaliveManager.prototype.deferStart = function () {\n    if (this.synTimer == null) {\n      this.synTimer = global.setTimeout(connect.hitch(this, this.start), this.synTimeout);\n    }\n  };\n \n  /**-----------------------------------------------------------------------*/\n \n  var WebSocketProvider = function () {\n \n    var callbacks = {\n      initFailure: new Set(),\n      subscriptionUpdate: new Set(),\n      subscriptionFailure: new Set(),\n      topic: new Map(),\n      allMessage: new Set(),\n      connectionGain: new Set(),\n      connectionLost: new Set(),\n      connectionOpen: new Set(),\n      connectionClose: new Set()\n    };\n \n    var invokeCallbacks = function (callbacks, response) {\n      callbacks.forEach(function (callback) {\n        callback(response);\n      });\n    };\n \n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.INIT_FAILURE, function () {\n      invokeCallbacks(callbacks.initFailure);\n    });\n\n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.CONNECTION_OPEN, function (response) {\n      invokeCallbacks(callbacks.connectionOpen, response);\n    });\n\n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.CONNECTION_CLOSE, function (response) {\n      invokeCallbacks(callbacks.connectionClose, response);\n    });\n\n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.CONNECTION_GAIN, function () {\n      invokeCallbacks(callbacks.connectionGain);\n    });\n\n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.CONNECTION_LOST, function (response) {\n      invokeCallbacks(callbacks.connectionLost, response);\n    });\n \n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.SUBSCRIPTION_UPDATE, function (response) {\n      invokeCallbacks(callbacks.subscriptionUpdate, response);\n    });\n \n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.SUBSCRIPTION_FAILURE, function (response) {\n      invokeCallbacks(callbacks.subscriptionFailure, response);\n    });\n \n    connect.core.getUpstream().onUpstream(connect.WebSocketEvents.ALL_MESSAGE, function (response) {\n      invokeCallbacks(callbacks.allMessage, response);\n      if (callbacks.topic.has(response.topic)) {\n        invokeCallbacks(callbacks.topic.get(response.topic), response);\n      }\n    });\n \n    this.sendMessage = function (webSocketPayload) {\n      connect.core.getUpstream().sendUpstream(connect.WebSocketEvents.SEND, webSocketPayload);\n    };\n \n    this.onInitFailure = function (cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.initFailure.add(cb);\n      return function () {\n        return callbacks.initFailure.delete(cb);\n      };\n    };\n\n    this.onConnectionOpen = function(cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.connectionOpen.add(cb);\n      return function () {\n        return callbacks.connectionOpen.delete(cb);\n      };\n    };\n\n    this.onConnectionClose = function(cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.connectionClose.add(cb);\n      return function () {\n        return callbacks.connectionClose.delete(cb);\n      };\n    };\n\n    this.onConnectionGain = function (cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.connectionGain.add(cb);\n      return function () {\n        return callbacks.connectionGain.delete(cb);\n      };\n    };\n \n    this.onConnectionLost = function (cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.connectionLost.add(cb);\n      return function () {\n        return callbacks.connectionLost.delete(cb);\n      };\n    };\n \n    this.onSubscriptionUpdate = function (cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.subscriptionUpdate.add(cb);\n      return function () {\n        return callbacks.subscriptionUpdate.delete(cb);\n      };\n    };\n \n    this.onSubscriptionFailure = function (cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.subscriptionFailure.add(cb);\n      return function () {\n        return callbacks.subscriptionFailure.delete(cb);\n      };\n    };\n \n    this.subscribeTopics = function (topics) {\n      connect.assertNotNull(topics, 'topics');\n      connect.assertTrue(connect.isArray(topics), 'topics must be a array');\n      connect.core.getUpstream().sendUpstream(connect.WebSocketEvents.SUBSCRIBE, topics);\n    };\n \n    this.onMessage = function (topicName, cb) {\n      connect.assertNotNull(topicName, 'topicName');\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      if (callbacks.topic.has(topicName)) {\n        callbacks.topic.get(topicName).add(cb);\n      } else {\n        callbacks.topic.set(topicName, new Set([cb]));\n      }\n      return function () {\n        return callbacks.topic.get(topicName).delete(cb);\n      };\n    };\n \n    this.onAllMessage = function (cb) {\n      connect.assertTrue(connect.isFunction(cb), 'method must be a function');\n      callbacks.allMessage.add(cb);\n      return function () {\n        return callbacks.allMessage.delete(cb);\n      };\n    };\n \n  };\n \n  /**-----------------------------------------------------------------------*/\n  var AgentDataProvider = function (bus) {\n    var agentData = null;\n    this.bus = bus;\n    this.bus.subscribe(connect.AgentEvents.UPDATE, connect.hitch(this, this.updateAgentData));\n  };\n \n  AgentDataProvider.prototype.updateAgentData = function (agentData) {\n    var oldAgentData = this.agentData;\n    this.agentData = agentData;\n \n    if (oldAgentData == null) {\n      connect.agent.initialized = true;\n      this.bus.trigger(connect.AgentEvents.INIT, new connect.Agent());\n    }\n \n    this.bus.trigger(connect.AgentEvents.REFRESH, new connect.Agent());\n \n    this._fireAgentUpdateEvents(oldAgentData);\n  };\n \n  AgentDataProvider.prototype.getAgentData = function () {\n    if (this.agentData == null) {\n      throw new connect.StateError('No agent data is available yet!');\n    }\n \n    return this.agentData;\n  };\n \n  AgentDataProvider.prototype.getContactData = function (contactId) {\n    var agentData = this.getAgentData();\n    var contactData = connect.find(agentData.snapshot.contacts, function (ctdata) {\n      return ctdata.contactId === contactId;\n    });\n \n    if (contactData == null) {\n      throw new connect.StateError('Contact %s no longer exists.', contactId);\n    }\n \n    return contactData;\n  };\n \n  AgentDataProvider.prototype.getConnectionData = function (contactId, connectionId) {\n    var contactData = this.getContactData(contactId);\n    var connectionData = connect.find(contactData.connections, function (cdata) {\n      return cdata.connectionId === connectionId;\n    });\n \n    if (connectionData == null) {\n      throw new connect.StateError('Connection %s for contact %s no longer exists.', connectionId, contactId);\n    }\n \n    return connectionData;\n  };\n\n  AgentDataProvider.prototype.getInstanceId = function(){\n    return this.getAgentData().configuration.routingProfile.routingProfileId.match(/instance\\/([0-9a-fA-F|-]+)\\//)[1];\n  }\n\n  AgentDataProvider.prototype.getAWSAccountId = function(){\n    return this.getAgentData().configuration.routingProfile.routingProfileId.match(/:([0-9]+):instance/)[1];\n  }\n \n  AgentDataProvider.prototype._diffContacts = function (oldAgentData) {\n    var diff = {\n      added: {},\n      removed: {},\n      common: {},\n      oldMap: connect.index(oldAgentData == null ? [] : oldAgentData.snapshot.contacts, function (contact) { return contact.contactId; }),\n      newMap: connect.index(this.agentData.snapshot.contacts, function (contact) { return contact.contactId; })\n    };\n \n    connect.keys(diff.oldMap).forEach(function (contactId) {\n      if (connect.contains(diff.newMap, contactId)) {\n        diff.common[contactId] = diff.newMap[contactId];\n      } else {\n        diff.removed[contactId] = diff.oldMap[contactId];\n      }\n    });\n \n    connect.keys(diff.newMap).forEach(function (contactId) {\n      if (!connect.contains(diff.oldMap, contactId)) {\n        diff.added[contactId] = diff.newMap[contactId];\n      }\n    });\n \n    return diff;\n  };\n \n  AgentDataProvider.prototype._fireAgentUpdateEvents = function (oldAgentData) {\n    var self = this;\n    var diff = null;\n    var oldAgentState = oldAgentData == null ? connect.AgentAvailStates.INIT : oldAgentData.snapshot.state.name;\n    var newAgentState = this.agentData.snapshot.state.name;\n    var oldRoutingState = oldAgentData == null ? connect.AgentStateType.INIT : oldAgentData.snapshot.state.type;\n    var newRoutingState = this.agentData.snapshot.state.type;\n \n    if (oldRoutingState !== newRoutingState) {\n      connect.core.getAgentRoutingEventGraph().getAssociations(this, oldRoutingState, newRoutingState).forEach(function (event) {\n        self.bus.trigger(event, new connect.Agent());\n      });\n    }\n \n    if (oldAgentState !== newAgentState) {\n      this.bus.trigger(connect.AgentEvents.STATE_CHANGE, {\n        agent: new connect.Agent(),\n        oldState: oldAgentState,\n        newState: newAgentState\n \n      });\n      connect.core.getAgentStateEventGraph().getAssociations(this, oldAgentState, newAgentState).forEach(function (event) {\n        self.bus.trigger(event, new connect.Agent());\n      });\n    }\n \n    if (oldAgentData !== null) {\n      diff = this._diffContacts(oldAgentData);\n \n    } else {\n      diff = {\n        added: connect.index(this.agentData.snapshot.contacts, function (contact) { return contact.contactId; }),\n        removed: {},\n        common: {},\n        oldMap: {},\n        newMap: connect.index(this.agentData.snapshot.contacts, function (contact) { return contact.contactId; })\n      };\n    }\n \n    connect.values(diff.added).forEach(function (contactData) {\n      self.bus.trigger(connect.ContactEvents.INIT, new connect.Contact(contactData.contactId));\n      self._fireContactUpdateEvents(contactData.contactId, connect.ContactStateType.INIT, contactData.state.type);\n    });\n \n    connect.values(diff.removed).forEach(function (contactData) {\n      self.bus.trigger(connect.ContactEvents.DESTROYED, new connect.ContactSnapshot(contactData));\n      self.bus.trigger(connect.core.getContactEventName(connect.ContactEvents.DESTROYED, contactData.contactId), new connect.ContactSnapshot(contactData));\n      self._unsubAllContactEventsForContact(contactData.contactId);\n    });\n \n    connect.keys(diff.common).forEach(function (contactId) {\n      self._fireContactUpdateEvents(contactId, diff.oldMap[contactId].state.type, diff.newMap[contactId].state.type);\n    });\n  };\n \n  AgentDataProvider.prototype._fireContactUpdateEvents = function (contactId, oldContactState, newContactState) {\n    var self = this;\n    if (oldContactState !== newContactState) {\n      connect.core.getContactEventGraph().getAssociations(this, oldContactState, newContactState).forEach(function (event) {\n        self.bus.trigger(event, new connect.Contact(contactId));\n        self.bus.trigger(connect.core.getContactEventName(event, contactId), new connect.Contact(contactId));\n      });\n    }\n\n    self.bus.trigger(connect.ContactEvents.REFRESH, new connect.Contact(contactId));\n    self.bus.trigger(connect.core.getContactEventName(connect.ContactEvents.REFRESH, contactId), new connect.Contact(contactId));\n  };\n \n  AgentDataProvider.prototype._unsubAllContactEventsForContact = function (contactId) {\n    var self = this;\n    connect.values(connect.ContactEvents).forEach(function (eventName) {\n      self.bus.getSubscriptions(connect.core.getContactEventName(eventName, contactId))\n        .map(function (sub) { sub.unsubscribe(); });\n    });\n  };\n \n  /** ----- minimal view layer event handling **/\n \n  connect.core.onViewContact = function (f) {\n    connect.core.getUpstream().onUpstream(connect.ContactEvents.VIEW, f);\n  };\n \n  /**\n   * Used of agent interface control. \n   * connect.core.viewContact(\"contactId\") ->  this is curently programmed to get the contact into view.\n   */\n  connect.core.viewContact = function (contactId) {\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.ContactEvents.VIEW,\n      data: {\n        contactId: contactId\n      }\n    });\n  };\n \n  /** ------------------------------------------------- */\n \n  /**\n  * This will be helpful for the custom and embedded CCPs \n  * to handle the access denied use case. \n  */\n  connect.core.onAccessDenied = function (f) {\n    connect.core.getUpstream().onUpstream(connect.EventType.ACCESS_DENIED, f);\n  };\n \n  /**\n  * This will be helpful for SAML use cases to handle the custom logins. \n  */\n  connect.core.onAuthFail = function (f) {\n    connect.core.getUpstream().onUpstream(connect.EventType.AUTH_FAIL, f);\n  };\n \n  /** ------------------------------------------------- */\n \n  /**\n   * Used for handling the rtc session stats.\n   * Usage\n   * connect.core.onSoftphoneSessionInit(function({ connectionId }) {\n   *     var softphoneManager = connect.core.getSoftphoneManager();\n   *     if(softphoneManager){\n   *        // access session\n   *        var session = softphoneManager.getSession(connectionId); \n   *      }\n   * });\n   */\n \n  connect.core.onSoftphoneSessionInit = function (f) {\n    connect.core.getUpstream().onUpstream(connect.ConnectionEvents.SESSION_INIT, f);\n  };\n \n  /**-----------------------------------------------------------------------*/\n  connect.core.onConfigure = function(f) {\n    connect.core.getUpstream().onUpstream(connect.ConfigurationEvents.CONFIGURE, f);\n  }\n\n   /**-----------------------------------------------------------------------*/\n   connect.core.onInitialized = function(f) {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.EventType.INIT, f);\n  }\n\n  /**-----------------------------------------------------------------------*/\n  connect.core.getContactEventName = function (eventName, contactId) {\n    connect.assertNotNull(eventName, 'eventName');\n    connect.assertNotNull(contactId, 'contactId');\n    if (!connect.contains(connect.values(connect.ContactEvents), eventName)) {\n      throw new connect.ValueError('%s is not a valid contact event.', eventName);\n    }\n    return connect.sprintf('%s::%s', eventName, contactId);\n  };\n \n  /**-----------------------------------------------------------------------*/\n  connect.core.getEventBus = function () {\n    return connect.core.eventBus;\n  };\n \n  /**-----------------------------------------------------------------------*/\n  connect.core.getWebSocketManager = function () {\n    return connect.core.webSocketProvider;\n  };\n \n  /**-----------------------------------------------------------------------*/\n  connect.core.getAgentDataProvider = function () {\n    return connect.core.agentDataProvider;\n  };\n \n  /**-----------------------------------------------------------------------*/\n  connect.core.getLocalTimestamp = function () {\n    return connect.core.getAgentDataProvider().getAgentData().snapshot.localTimestamp;\n  };\n \n  /**-----------------------------------------------------------------------*/\n  connect.core.getSkew = function () {\n    return connect.core.getAgentDataProvider().getAgentData().snapshot.skew;\n  };\n \n  /**-----------------------------------------------------------------------*/\n  connect.core.getAgentRoutingEventGraph = function () {\n    return connect.core.agentRoutingEventGraph;\n  };\n  connect.core.agentRoutingEventGraph = new connect.EventGraph()\n    .assoc(connect.EventGraph.ANY, connect.AgentStateType.ROUTABLE,\n      connect.AgentEvents.ROUTABLE)\n    .assoc(connect.EventGraph.ANY, connect.AgentStateType.NOT_ROUTABLE,\n      connect.AgentEvents.NOT_ROUTABLE)\n    .assoc(connect.EventGraph.ANY, connect.AgentStateType.OFFLINE,\n      connect.AgentEvents.OFFLINE);\n \n  /**-----------------------------------------------------------------------*/\n  connect.core.getAgentStateEventGraph = function () {\n    return connect.core.agentStateEventGraph;\n  };\n  connect.core.agentStateEventGraph = new connect.EventGraph()\n    .assoc(connect.EventGraph.ANY,\n      connect.values(connect.AgentErrorStates),\n      connect.AgentEvents.ERROR)\n    .assoc(connect.EventGraph.ANY, connect.AgentAvailStates.AFTER_CALL_WORK,\n      connect.AgentEvents.ACW);\n \n  /**-----------------------------------------------------------------------*/\n  connect.core.getContactEventGraph = function () {\n    return connect.core.contactEventGraph;\n  };\n \n  connect.core.contactEventGraph = new connect.EventGraph()\n    .assoc(connect.EventGraph.ANY,\n      connect.ContactStateType.INCOMING,\n      connect.ContactEvents.INCOMING)\n    .assoc(connect.EventGraph.ANY,\n      connect.ContactStateType.PENDING,\n      connect.ContactEvents.PENDING)\n    .assoc(connect.EventGraph.ANY,\n      connect.ContactStateType.CONNECTING,\n      connect.ContactEvents.CONNECTING)\n    .assoc(connect.EventGraph.ANY,\n      connect.ContactStateType.CONNECTED,\n      connect.ContactEvents.CONNECTED)\n    .assoc(connect.ContactStateType.CONNECTING,\n      connect.ContactStateType.ERROR,\n      connect.ContactEvents.MISSED)\n    .assoc(connect.ContactStateType.INCOMING,\n      connect.ContactStateType.ERROR,\n      connect.ContactEvents.MISSED)\n    .assoc(connect.EventGraph.ANY,\n      connect.ContactStateType.ENDED,\n      connect.ContactEvents.ACW)\n    .assoc(connect.values(connect.CONTACT_ACTIVE_STATES),\n      connect.values(connect.relativeComplement(connect.CONTACT_ACTIVE_STATES, connect.ContactStateType)),\n      connect.ContactEvents.ENDED)\n    .assoc(connect.EventGraph.ANY,\n      connect.values(connect.AgentErrorStates),\n      connect.ContactEvents.ERROR)\n    .assoc(connect.ContactStateType.CONNECTING,\n      connect.ContactStateType.MISSED,\n      connect.ContactEvents.MISSED);\n\n  /**-----------------------------------------------------------------------*/\n  connect.core.getClient = function () {\n    if (!connect.core.client) {\n      throw new connect.StateError('The connect core has not been initialized!');\n    }\n    return connect.core.client;\n  };\n  connect.core.client = null;\n\n  /**-----------------------------------------------------------------------*/\n  connect.core.getAgentAppClient = function () {\n    if (!connect.core.agentAppClient) {\n      throw new connect.StateError('The connect AgentApp Client has not been initialized!');\n    }\n    return connect.core.agentAppClient;\n  };\n  connect.core.agentAppClient = null;\n \n  /**-----------------------------------------------------------------------*/\n  connect.core.getMasterClient = function () {\n    if (!connect.core.masterClient) {\n      throw new connect.StateError('The connect master client has not been initialized!');\n    }\n    return connect.core.masterClient;\n  };\n  connect.core.masterClient = null;\n \n  /**-----------------------------------------------------------------------*/\n  connect.core.getSoftphoneManager = function () {\n    return connect.core.softphoneManager;\n  };\n  connect.core.softphoneManager = null;\n \n  /**-----------------------------------------------------------------------*/\n  connect.core.getNotificationManager = function () {\n    if (!connect.core.notificationManager) {\n      connect.core.notificationManager = new connect.NotificationManager();\n    }\n    return connect.core.notificationManager;\n  };\n  connect.core.notificationManager = null;\n \n  /**-----------------------------------------------------------------------*/\n  connect.core.getPopupManager = function () {\n    return connect.core.popupManager;\n  };\n  connect.core.popupManager = new connect.PopupManager();\n \n  /**-----------------------------------------------------------------------*/\n  connect.core.getUpstream = function () {\n    if (!connect.core.upstream) {\n      throw new connect.StateError('There is no upstream conduit!');\n    }\n    return connect.core.upstream;\n  };\n  connect.core.upstream = null;\n \n  /**-----------------------------------------------------------------------*/\n  connect.core.AgentDataProvider = AgentDataProvider;\n \n})();\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n(function () {\n  var global = this;\n  var connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n\n  var RingtoneEngineBase = function (ringtoneConfig) {\n    var self = this;\n    this._prevContactId = null;\n\n    connect.assertNotNull(ringtoneConfig, \"ringtoneConfig\");\n    if (!ringtoneConfig.ringtoneUrl) {\n      throw new Error(\"ringtoneUrl is required!\");\n    }\n\n    if (global.Audio && typeof global.Promise !== \"undefined\") {\n      this._playableAudioPromise = new Promise(function (resolve, reject) {\n        self._audio = new Audio(ringtoneConfig.ringtoneUrl);\n        self._audio.loop = true;\n        self._audio.addEventListener(\"canplay\", function () {\n          self._audioPlayable = true;\n          resolve(self._audio);\n        });\n      });\n\n    } else {\n      this._audio = null;\n      connect.getLog().error(\"Unable to provide a ringtone.\").sendInternalLogToServer();\n    }\n\n    self._driveRingtone();\n  };\n\n  RingtoneEngineBase.prototype._driveRingtone = function () {\n    throw new Error(\"Not implemented.\");\n  };\n\n  RingtoneEngineBase.prototype._startRingtone = function (contact) {\n    if (this._audio) {\n      this._audio.play()\n        .catch(function(e) {\n          this._publishTelemetryEvent(\"Ringtone Playback Failure\", contact);\n        });\n      this._publishTelemetryEvent(\"Ringtone Start\", contact);\n    }\n  };\n\n  RingtoneEngineBase.prototype._stopRingtone = function (contact) {\n    if (this._audio) {\n      this._audio.pause();\n      this._audio.currentTime = 0;\n      this._publishTelemetryEvent(\"Ringtone Stop\", contact);\n    }\n  };\n\n  /**\n   * Stop ringtone.\n   */\n  RingtoneEngineBase.prototype.stopRingtone = function () {\n    this._stopRingtone();\n  };\n\n  RingtoneEngineBase.prototype._ringtoneSetup = function (contact) {\n    var self = this;\n    connect.ifMaster(connect.MasterTopics.RINGTONE, function () {\n      self._startRingtone(contact);\n      self._prevContactId = contact.getContactId();\n\n      contact.onConnected(lily.hitch(self, self._stopRingtone));\n      contact.onAccepted(lily.hitch(self, self._stopRingtone));\n      contact.onEnded(lily.hitch(self, self._stopRingtone));\n      // Just to make sure to stop the ringtone in case of the failures of specific callbacks(onAccepted,onConnected);\n      contact.onRefresh(function (contact) {\n        if (contact.getStatus().type !== connect.ContactStatusType.CONNECTING &&\n          contact.getStatus().type !== connect.ContactStatusType.INCOMING) {\n          self._stopRingtone();\n        }\n      });\n    });\n  };\n\n  RingtoneEngineBase.prototype._publishTelemetryEvent = function (eventName, contact) {\n    if (contact && contact.getContactId()) {\n      connect.publishMetric({\n        name: eventName,\n        contactId: contact.getContactId()\n      });\n    }\n  };\n\n  /**\n   * Change the audio device used to play ringtone.\n   * If audio element is not fully initialized, the API will wait _audioPlayablePromise for 3 seconds and fail on timeout.\n   * This API is supported only by browsers that implemented ES6 Promise and http://www.w3.org/TR/audio-output/\n   * Return a Promise that indicates the result of changing output device.\n   */\n  RingtoneEngineBase.prototype.setOutputDevice = function (deviceId) {\n    if (this._playableAudioPromise) {\n      var playableAudioWithTimeout = Promise.race([\n        this._playableAudioPromise,\n        new Promise(function (resolve, reject) {\n          global.setTimeout(function () { reject(\"Timed out waiting for playable audio\"); }, 3000/*ms*/);\n        })\n      ]);\n      return playableAudioWithTimeout.then(function (audio) {\n        if (audio.setSinkId) {\n          return Promise.resolve(audio.setSinkId(deviceId));\n        } else {\n          return Promise.reject(\"Not supported\");\n        }\n      });\n    }\n\n    if (global.Promise) {\n      return Promise.reject(\"Not eligible ringtone owner\");\n    }\n  };\n\n  var VoiceRingtoneEngine = function (ringtoneConfig) {\n    RingtoneEngineBase.call(this, ringtoneConfig);\n  };\n  VoiceRingtoneEngine.prototype = Object.create(RingtoneEngineBase.prototype);\n  VoiceRingtoneEngine.prototype.constructor = VoiceRingtoneEngine;\n\n  VoiceRingtoneEngine.prototype._driveRingtone = function () {\n    var self = this;\n\n    var onContactConnect = function (contact) {\n      if (contact.getType() === lily.ContactType.VOICE &&\n        contact.isSoftphoneCall() && contact.isInbound()) {\n        self._ringtoneSetup(contact);\n        self._publishTelemetryEvent(\"Ringtone Connecting\", contact);\n      }\n    };\n\n    connect.contact(function (contact) {\n      contact.onConnecting(onContactConnect);\n    });\n\n    new connect.Agent().getContacts().forEach(function (contact) {\n      if (contact.getStatus().type === connect.ContactStatusType.CONNECTING) {\n        onContactConnect(contact);\n      }\n    });\n  };\n\n\n  var ChatRingtoneEngine = function (ringtoneConfig) {\n    RingtoneEngineBase.call(this, ringtoneConfig);\n  };\n  ChatRingtoneEngine.prototype = Object.create(RingtoneEngineBase.prototype);\n  ChatRingtoneEngine.prototype.constructor = ChatRingtoneEngine;\n\n  ChatRingtoneEngine.prototype._driveRingtone = function () {\n    var self = this;\n\n    var onContactConnect = function (contact) {\n      if (contact.getType() === lily.ContactType.CHAT && contact.isInbound()) {\n        self._ringtoneSetup(contact);\n        self._publishTelemetryEvent(\"Chat Ringtone Connecting\", contact);\n      }\n    };\n\n    connect.contact(function (contact) {\n      contact.onConnecting(onContactConnect);\n    });\n  };\n\n  var TaskRingtoneEngine = function (ringtoneConfig) {\n    RingtoneEngineBase.call(this, ringtoneConfig);\n  };\n  TaskRingtoneEngine.prototype = Object.create(RingtoneEngineBase.prototype);\n  TaskRingtoneEngine.prototype.constructor = TaskRingtoneEngine;\n\n  TaskRingtoneEngine.prototype._driveRingtone = function () {\n    var self = this;\n\n    var onContactConnect = function (contact) {\n      if (contact.getType() === lily.ContactType.TASK && contact.isInbound()) {\n        self._ringtoneSetup(contact);\n        self._publishTelemetryEvent(\"Task Ringtone Connecting\", contact);\n      }\n    };\n\n    connect.contact(function (contact) {\n      contact.onConnecting(onContactConnect);\n    });\n  };\n\n\n  var QueueCallbackRingtoneEngine = function (ringtoneConfig) {\n    RingtoneEngineBase.call(this, ringtoneConfig);\n  };\n  QueueCallbackRingtoneEngine.prototype = Object.create(RingtoneEngineBase.prototype);\n  QueueCallbackRingtoneEngine.prototype.constructor = QueueCallbackRingtoneEngine;\n\n  QueueCallbackRingtoneEngine.prototype._driveRingtone = function () {\n    var self = this;\n\n    connect.contact(function (contact) {\n      contact.onIncoming(function () {\n        if (contact.getType() === lily.ContactType.QUEUE_CALLBACK) {\n          self._ringtoneSetup(contact);\n          self._publishTelemetryEvent(\"Callback Ringtone Connecting\", contact);\n        }\n      });\n    });\n  };\n\n  /* export connect.RingtoneEngine */\n  connect.VoiceRingtoneEngine = VoiceRingtoneEngine;\n  connect.ChatRingtoneEngine = ChatRingtoneEngine;\n  connect.TaskRingtoneEngine = TaskRingtoneEngine;\n  connect.QueueCallbackRingtoneEngine = QueueCallbackRingtoneEngine;\n})();\n\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n  global.ccpVersion = \"V2\";\n\n  var RTPJobIntervalMs = 1000;\n  var statsReportingJobIntervalMs = 30000;\n  var streamBufferSize = 500;\n  var CallTypeMap = {};\n  CallTypeMap[connect.SoftphoneCallType.AUDIO_ONLY] = 'Audio';\n  CallTypeMap[connect.SoftphoneCallType.VIDEO_ONLY] = 'Video';\n  CallTypeMap[connect.SoftphoneCallType.AUDIO_VIDEO] = 'AudioVideo';\n  CallTypeMap[connect.SoftphoneCallType.NONE] = 'None';\n  var AUDIO_INPUT = 'audio_input';\n  var AUDIO_OUTPUT = 'audio_output';\n\n  var MediaTypeMap = {};\n  MediaTypeMap[connect.ContactType.VOICE] = \"Voice\";\n  var UNKNOWN_MEDIA_TYPE = \"Unknown\";\n\n  var timeSeriesStreamStatsBuffer = [];\n  var aggregatedUserAudioStats = {};\n  var aggregatedRemoteAudioStats = {};\n  var rtpStatsJob = null;\n  var reportStatsJob = null;\n  //Logger specific to softphone.\n  var logger = null;\n  var SoftphoneErrorTypes = connect.SoftphoneErrorTypes;\n  var HANG_UP_MULTIPLE_SESSIONS_EVENT = \"MultiSessionHangUp\";\n  var MULTIPLE_SESSIONS_EVENT = \"MultiSessions\";\n\n  var localMediaStream = {};\n\n  var softphoneClientId = connect.randomId();\n\n  var requestIceAccess = function (transport) {\n    return new Promise(function (resolve, reject) {\n      connect.core.getClient().call(connect.ClientMethods.CREATE_TRANSPORT, transport, {\n        success: function (data) {\n          resolve(data.softphoneTransport.softphoneMediaConnections);\n        },\n        failure: function (reason) {\n          if (reason.message && reason.message.includes(\"SoftphoneConnectionLimitBreachedException\")) {\n            publishError(\"multiple_softphone_active_sessions\", \"Number of active sessions are more then allowed limit.\", \"\");\n          }\n          reject(Error(\"requestIceAccess failed\"));\n        },\n        authFailure: function () {\n          reject(Error(\"Authentication failed while requestIceAccess\"));\n        },\n        accessDenied: function () {\n          reject(Error(\"Access Denied while requestIceAccess\"));\n        }\n      });\n    });\n  };\n\n  var SoftphoneManager = function (softphoneParams) {\n    var self = this;\n    logger = new SoftphoneLogger(connect.getLog());\n    var rtcPeerConnectionFactory;\n    if (connect.RtcPeerConnectionFactory) {\n      rtcPeerConnectionFactory = new connect.RtcPeerConnectionFactory(logger,\n        connect.core.getWebSocketManager(),\n        softphoneClientId,\n        connect.hitch(self, requestIceAccess, {\n          transportType: \"softphone\",\n          softphoneClientId: softphoneClientId\n        }),\n        connect.hitch(self, publishError));\n    }\n    if (!isBrowserSoftPhoneSupported()) {\n      publishError(SoftphoneErrorTypes.UNSUPPORTED_BROWSER,\n        \"Connect does not support this browser. Some functionality may not work. \",\n        \"\");\n    }\n    var gumPromise = fetchUserMedia({\n      success: function (stream) {\n        if (connect.isFirefoxBrowser()) {\n          connect.core.setSoftphoneUserMediaStream(stream);\n        }\n      },\n      failure: function (err) {\n        publishError(err, \"Your microphone is not enabled in your browser. \", \"\");\n      }\n    });\n    handleSoftPhoneMuteToggle();\n    handleSpeakerDeviceChange();\n    handleMicrophoneDeviceChange();\n\n    this.ringtoneEngine = null;\n    var rtcSessions = {};\n    // Tracks the agent connection ID, so that if the same contact gets re-routed to the same agent, it'll still set up softphone\n    var callsDetected = {};\n    this.onInitContactSub = {};\n    this.onInitContactSub.unsubscribe = function() {};\n\n    // variables for firefox multitab\n    var isSessionPending = false;\n    var pendingContact = null;\n    var pendingAgentConnectionId = null;\n    var postponeStartingSession = function (contact, agentConnectionId) {\n      isSessionPending = true;\n      pendingContact = contact;\n      pendingAgentConnectionId = agentConnectionId;\n    }\n    var cancelPendingSession = function () {\n      isSessionPending = false;\n      pendingContact = null;\n      pendingAgentConnectionId = null;\n    }\n\n    // helper method to provide access to rtc sessions\n    this.getSession = function (connectionId) {\n      return rtcSessions[connectionId];\n    }\n\n    this.replaceLocalMediaTrack = function(connectionId, track) {\n      var stream = localMediaStream[connectionId].stream;\n      if(stream){\n        var oldTrack = stream.getAudioTracks()[0];\n        oldTrack.enabled = false;\n        stream.removeTrack(oldTrack);\n        stream.addTrack(track);\n      }\n    };\n\n    var isContactTerminated = function (contact) {\n      return contact.getStatus().type === connect.ContactStatusType.ENDED ||\n        contact.getStatus().type === connect.ContactStatusType.ERROR ||\n        contact.getStatus().type === connect.ContactStatusType.MISSED;\n    };\n\n    var destroySession = function (agentConnectionId) {\n      if (rtcSessions.hasOwnProperty(agentConnectionId)) {\n        var session = rtcSessions[agentConnectionId];\n        // Currently the assumption is it will throw an exception only and if only it already has been hung up.\n        // TODO: Update once the hangup API does not throw exceptions\n        new Promise(function (resolve, reject) {\n          delete rtcSessions[agentConnectionId];\n          delete callsDetected[agentConnectionId];\n          session.hangup();\n        }).catch(function (err) {\n          lily.getLog().warn(\"Clean up the session locally \" + agentConnectionId, err.message).sendInternalLogToServer();\n        });\n      }\n    };\n\n    // When multiple RTC sessions detected, ignore the new call and hang up the previous sessions.\n    // TODO: Update when connect-rtc exposes an API to detect session status.\n    var sanityCheckActiveSessions = function (rtcSessions) {\n      if (Object.keys(rtcSessions).length > 0) {\n        // Error! our state doesn't match, tear it all down.\n        for (var connectionId in rtcSessions) {\n          if (rtcSessions.hasOwnProperty(connectionId)) {\n            // Log an error for the session we are about to end.\n            publishMultipleSessionsEvent(HANG_UP_MULTIPLE_SESSIONS_EVENT, rtcSessions[connectionId].callId, connectionId);\n            destroySession(connectionId);\n          }\n        }\n        throw new Error(\"duplicate session detected, refusing to setup new connection\");\n      }\n    };\n\n    this.startSession = function (_contact, _agentConnectionId) {\n      var contact = isSessionPending ? pendingContact : _contact;\n      var agentConnectionId = isSessionPending ? pendingAgentConnectionId : _agentConnectionId;\n      if (!contact || !agentConnectionId) {\n        return;\n      }\n      cancelPendingSession();\n      \n      // Set to true, this will block subsequent invokes from entering.\n      callsDetected[agentConnectionId] = true;\n      logger.info(\"Softphone call detected:\", \"contactId \" + contact.getContactId(), \"agent connectionId \" + agentConnectionId).sendInternalLogToServer();\n\n      // Ensure our session state matches our contact state to prevent issues should we lose track of a contact.\n      sanityCheckActiveSessions(rtcSessions);\n\n      if (contact.getStatus().type === connect.ContactStatusType.CONNECTING) {\n        publishTelemetryEvent(\"Softphone Connecting\", contact.getContactId());\n      }\n\n      initializeParams();\n      var softphoneInfo = contact.getAgentConnection().getSoftphoneMediaInfo();\n      var callConfig = parseCallConfig(softphoneInfo.callConfigJson);\n      var webSocketProvider;\n      if (callConfig.useWebSocketProvider) {\n        webSocketProvider = connect.core.getWebSocketManager();\n      }\n      var session = new connect.RTCSession(\n        callConfig.signalingEndpoint,\n        callConfig.iceServers,\n        softphoneInfo.callContextToken,\n        logger,\n        contact.getContactId(),\n        agentConnectionId,\n        webSocketProvider);\n\n      rtcSessions[agentConnectionId] = session;\n\n      if (connect.core.getSoftphoneUserMediaStream()) {\n        session.mediaStream = connect.core.getSoftphoneUserMediaStream();\n      }\n\n      // Custom Event to indicate the session init operations\n      connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n        event: connect.ConnectionEvents.SESSION_INIT,\n        data: {\n          connectionId: agentConnectionId\n        }\n      });\n\n      session.onSessionFailed = function (rtcSession, reason) {\n        delete rtcSessions[agentConnectionId];\n        delete callsDetected[agentConnectionId];\n        publishSoftphoneFailureLogs(rtcSession, reason);\n        publishSessionFailureTelemetryEvent(contact.getContactId(), reason);\n        stopJobsAndReport(contact, rtcSession.sessionReport);\n      };\n      session.onSessionConnected = function (rtcSession) {\n        publishTelemetryEvent(\"Softphone Session Connected\", contact.getContactId());\n        // Become master to send logs, since we need logs from softphone tab.\n        connect.becomeMaster(connect.MasterTopics.SEND_LOGS);\n        //start stats collection and reporting jobs\n        startStatsCollectionJob(rtcSession);\n        startStatsReportingJob(contact);\n        fireContactAcceptedEvent(contact);\n      };\n\n      session.onSessionCompleted = function (rtcSession) {\n        publishTelemetryEvent(\"Softphone Session Completed\", contact.getContactId());\n\n        delete rtcSessions[agentConnectionId];\n        delete callsDetected[agentConnectionId];\n        // Stop all jobs and perform one last job.\n        stopJobsAndReport(contact, rtcSession.sessionReport);\n\n        // Cleanup the cached streams\n        deleteLocalMediaStream(agentConnectionId);\n      };\n\n      session.onLocalStreamAdded = function (rtcSession, stream) {\n        // Cache the streams for mute/unmute\n        localMediaStream[agentConnectionId] = {\n          stream: stream\n        };\n        connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n          event: connect.AgentEvents.LOCAL_MEDIA_STREAM_CREATED,\n          data: {\n            connectionId: agentConnectionId\n          }\n        });\n      };\n\n      session.remoteAudioElement = document.getElementById('remote-audio');\n      if (rtcPeerConnectionFactory) {\n        session.connect(rtcPeerConnectionFactory.get(callConfig.iceServers));\n      } else {\n        session.connect();\n      }\n    }\n\n    var onRefreshContact = function (contact, agentConnectionId) {\n      if (rtcSessions[agentConnectionId] && isContactTerminated(contact)) {\n        destroySession(agentConnectionId);\n        cancelPendingSession();\n      }\n      if (contact.isSoftphoneCall() && !callsDetected[agentConnectionId] && (\n        contact.getStatus().type === connect.ContactStatusType.CONNECTING ||\n        contact.getStatus().type === connect.ContactStatusType.INCOMING)) {\n          if (connect.isFirefoxBrowser() && connect.hasOtherConnectedCCPs()) {\n            postponeStartingSession(contact, agentConnectionId);\n          } else {\n            self.startSession(contact, agentConnectionId);\n          }\n      }\n    };\n\n    var onInitContact = function (contact) {\n      var agentConnectionId = contact.getAgentConnection().connectionId;\n      logger.info(\"Contact detected:\", \"contactId \" + contact.getContactId(), \"agent connectionId \" + agentConnectionId).sendInternalLogToServer();\n\n      if (!callsDetected[agentConnectionId]) {\n        contact.onRefresh(function () {\n          onRefreshContact(contact, agentConnectionId);\n        });\n      }\n    };\n\n    self.onInitContactSub = connect.contact(onInitContact);\n\n    // Contact already in connecting state scenario - In this case contact INIT is missed hence the OnRefresh callback is missed. \n    new connect.Agent().getContacts().forEach(function (contact) {\n      var agentConnectionId = contact.getAgentConnection().connectionId;\n      logger.info(\"Contact exist in the snapshot. Reinitiate the Contact and RTC session creation for contactId\" + contact.getContactId(), \"agent connectionId \" + agentConnectionId)\n        .sendInternalLogToServer();\n      onInitContact(contact);\n      onRefreshContact(contact, agentConnectionId);\n    });\n  };\n\n  var fireContactAcceptedEvent = function (contact) {\n    var conduit = connect.core.getUpstream();\n    var agentConnection = contact.getAgentConnection();\n    if (!agentConnection) {\n      logger.info(\"Not able to retrieve the auto-accept setting from null AgentConnection, ignoring event publish..\").sendInternalLogToServer();\n      return;\n    }\n    var softphoneMediaInfo = agentConnection.getSoftphoneMediaInfo();\n    if (!softphoneMediaInfo) {\n      logger.info(\"Not able to retrieve the auto-accept setting from null SoftphoneMediaInfo, ignoring event publish..\").sendInternalLogToServer();\n      return;\n    }\n    if (softphoneMediaInfo.autoAccept === true) {\n      logger.info(\"Auto-accept is enabled, sending out Accepted event to stop ringtone..\").sendInternalLogToServer();\n      conduit.sendUpstream(connect.EventType.BROADCAST, {\n        event: connect.ContactEvents.ACCEPTED,\n        data: new connect.Contact(contact.contactId)\n      });\n      conduit.sendUpstream(connect.EventType.BROADCAST, {\n        event: connect.core.getContactEventName(connect.ContactEvents.ACCEPTED, contact.contactId),\n        data: new connect.Contact(contact.contactId)\n      });\n    } else {\n      logger.info(\"Auto-accept is disabled, ringtone will be stopped by user action.\").sendInternalLogToServer();\n    }\n  };\n\n  // Bind events for mute\n  var handleSoftPhoneMuteToggle = function () {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.EventType.MUTE, muteToggle);\n  };\n\n  var handleSpeakerDeviceChange = function() {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.ConfigurationEvents.SET_SPEAKER_DEVICE, setSpeakerDevice);\n  }\n\n  var handleMicrophoneDeviceChange = function () {\n    var bus = connect.core.getEventBus();\n    bus.subscribe(connect.ConfigurationEvents.SET_MICROPHONE_DEVICE, setMicrophoneDevice);\n  }\n\n  // Make sure once we disconnected we get the mute state back to normal\n  var deleteLocalMediaStream = function (connectionId) {\n    delete localMediaStream[connectionId];\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.AgentEvents.MUTE_TOGGLE,\n      data: { muted: false }\n    });\n  };\n\n  // Check for the local streams if exists  -  revert it\n  // And inform other clients about the change \n  var muteToggle = function (data) {\n    var status;\n    if (connect.keys(localMediaStream).length === 0) {\n      return;\n    }\n\n    if (data && data.mute !== undefined) {\n      status = data.mute;\n    }\n\n    for (var connectionId in localMediaStream) {\n      if (localMediaStream.hasOwnProperty(connectionId)) {\n        var localMedia = localMediaStream[connectionId].stream;\n        if (localMedia) {\n          var audioTracks = localMedia.getAudioTracks()[0];\n          if (status !== undefined) {\n            audioTracks.enabled = !status;\n            localMediaStream[connectionId].muted = status;\n\n            if (status) {\n              logger.info(\"Agent has muted the contact, connectionId -  \" + connectionId).sendInternalLogToServer();\n            } else {\n              logger.info(\"Agent has unmuted the contact, connectionId - \" + connectionId).sendInternalLogToServer();\n            }\n\n          } else {\n            status = localMediaStream[connectionId].muted || false;\n          }\n        }\n      }\n    }\n\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.AgentEvents.MUTE_TOGGLE,\n      data: { muted: status }\n    });\n  };\n\n  var setSpeakerDevice = function (data) {\n    if (connect.keys(localMediaStream).length === 0 || !data || !data.deviceId) {\n      return;\n    }\n    var deviceId = data.deviceId;\n    var remoteAudioElement = document.getElementById('remote-audio');\n    try {\n      logger.info(\"Trying to set speaker to device \" + deviceId);\n      if (remoteAudioElement && typeof remoteAudioElement.setSinkId === 'function') {\n        remoteAudioElement.setSinkId(deviceId);\n      }\n    } catch (e) {\n      logger.error(\"Failed to set speaker to device \" + deviceId);\n    }\n\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.ConfigurationEvents.SPEAKER_DEVICE_CHANGED,\n      data: { deviceId: deviceId }\n    });\n  }\n\n  var setMicrophoneDevice = function (data) {\n    if (connect.keys(localMediaStream).length === 0  || !data || !data.deviceId) {\n      return;\n    }\n    var deviceId = data.deviceId;\n    var softphoneManager = connect.core.getSoftphoneManager();\n    try {\n      navigator.mediaDevices.getUserMedia({ audio: { deviceId: { exact: deviceId } } })\n        .then(function (newMicrophoneStream) {\n          var newMicrophoneTrack = newMicrophoneStream.getAudioTracks()[0];\n          for (var connectionId in localMediaStream) {\n            if (localMediaStream.hasOwnProperty(connectionId)) {\n              var localMedia = localMediaStream[connectionId].stream;\n              var session = softphoneManager.getSession(connectionId);\n              //Replace the audio track in the RtcPeerConnection\n              session._pc.getSenders()[0].replaceTrack(newMicrophoneTrack).then(function () {\n                //Replace the audio track in the local media stream (for mute / unmute)\n                softphoneManager.replaceLocalMediaTrack(connectionId, newMicrophoneTrack);\n              });\n            }\n          }\n        });\n    } catch(e) {\n      logger.error(\"Failed to set microphone device \" + deviceId);\n    }\n\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.ConfigurationEvents.MICROPHONE_DEVICE_CHANGED,\n      data: { deviceId: deviceId }\n    });\n  }\n\n  var publishSoftphoneFailureLogs = function (rtcSession, reason) {\n    if (reason === connect.RTCErrors.ICE_COLLECTION_TIMEOUT) {\n      var endPointUrl = \"\\n\";\n      for (var i = 0; i < rtcSession._iceServers.length; i++) {\n        for (var j = 0; j < rtcSession._iceServers[i].urls.length; j++) {\n          endPointUrl = endPointUrl + rtcSession._iceServers[i].urls[j] + \"\\n\";\n        }\n      }\n      publishError(SoftphoneErrorTypes.ICE_COLLECTION_TIMEOUT, \"Ice collection timedout. \", endPointUrl);\n    } else if (reason === connect.RTCErrors.USER_BUSY) {\n      publishError(SoftphoneErrorTypes.USER_BUSY_ERROR,\n        \"Softphone call UserBusy error. \",\n        \"\");\n    } else if (reason === connect.RTCErrors.SIGNALLING_HANDSHAKE_FAILURE) {\n      publishError(SoftphoneErrorTypes.SIGNALLING_HANDSHAKE_FAILURE,\n        \"Handshaking with Signalling Server \" + rtcSession._signalingUri + \" failed. \",\n        rtcSession._signalingUri);\n    } else if (reason === connect.RTCErrors.GUM_TIMEOUT_FAILURE || reason === connect.RTCErrors.GUM_OTHER_FAILURE) {\n      publishError(SoftphoneErrorTypes.MICROPHONE_NOT_SHARED,\n        \"Your microphone is not enabled in your browser. \",\n        \"\");\n    } else if (reason === connect.RTCErrors.SIGNALLING_CONNECTION_FAILURE) {\n      publishError(SoftphoneErrorTypes.SIGNALLING_CONNECTION_FAILURE,\n        \"URL \" + rtcSession._signalingUri + \" cannot be reached. \",\n        rtcSession._signalingUri);\n    } else if (reason === connect.RTCErrors.CALL_NOT_FOUND) {\n      // No need to publish any softphone error for this case. CCP UX will handle this case.\n      logger.error(\"Softphone call failed due to CallNotFoundException.\").sendInternalLogToServer();\n    } else {\n      publishError(SoftphoneErrorTypes.WEBRTC_ERROR,\n        \"webrtc system error. \",\n        \"\");\n    }\n  };\n\n  /** Parse the JSON encoded web call config into the data it represents. */\n  var parseCallConfig = function (serializedConfig) {\n    // Our underscore is too old for unescape\n    // https://issues.amazon.com/issues/CSWF-1467\n    var decodedJSON = serializedConfig.replace(/&quot;/g, '\"');\n    return JSON.parse(decodedJSON);\n  };\n\n  var fetchUserMedia = function (callbacksIn) {\n    var callbacks = callbacksIn || {};\n    callbacks.success = callbacks.success || function () { };\n    callbacks.failure = callbacks.failure || function () { };\n\n    var CONSTRAINT = {\n      audio: true\n    };\n\n    var promise = null;\n\n    if (typeof Promise !== \"function\") {\n      callbacks.failure(SoftphoneErrorTypes.UNSUPPORTED_BROWSER);\n      return;\n    }\n\n    if (typeof navigator.mediaDevices === \"object\" && typeof navigator.mediaDevices.getUserMedia === \"function\") {\n      promise = navigator.mediaDevices.getUserMedia(CONSTRAINT);\n\n    } else if (typeof navigator.webkitGetUserMedia === \"function\") {\n      promise = new Promise(function (resolve, reject) {\n        navigator.webkitGetUserMedia(CONSTRAINT, resolve, reject);\n      });\n\n    } else {\n      callbacks.failure(SoftphoneErrorTypes.UNSUPPORTED_BROWSER);\n      return;\n    }\n\n    promise.then(function (stream) {\n      var audioTracks = stream.getAudioTracks();\n      if (audioTracks && audioTracks.length > 0) {\n        callbacks.success(stream);\n      } else {\n        callbacks.failure(SoftphoneErrorTypes.MICROPHONE_NOT_SHARED);\n      }\n    }, function (err) {\n      callbacks.failure(SoftphoneErrorTypes.MICROPHONE_NOT_SHARED);\n    });\n    return promise;\n  };\n\n  var publishError = function (errorType, message, endPointUrl) {\n    logger.error(\"Softphone error occurred : \", errorType,\n      message || \"\").sendInternalLogToServer();\n\n    connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST, {\n      event: connect.AgentEvents.SOFTPHONE_ERROR,\n      data: new connect.SoftphoneError(errorType, message, endPointUrl)\n    });\n  };\n\n  var publishSessionFailureTelemetryEvent = function (contactId, reason) {\n    publishTelemetryEvent(\"Softphone Session Failed\", contactId, {\n      failedReason: reason\n    });\n  };\n\n  var publishTelemetryEvent = function (eventName, contactId, data) {\n    if (contactId) {\n      connect.publishMetric({\n        name: eventName,\n        contactId: contactId,\n        data: data\n      });\n    }\n  };\n\n  // Publish the contact and agent information in a multiple sessions scenarios\n  var publishMultipleSessionsEvent = function (eventName, contactId, agentConnectionId) {\n    publishTelemetryEvent(eventName, contactId, [{\n      name: \"AgentConnectionId\",\n      value: agentConnectionId\n    }]);\n    logger.info(\"Publish multiple session error metrics\", eventName, \"contactId \" + contactId, \"agent connectionId \" + agentConnectionId)\n      .sendInternalLogToServer();\n  };\n\n  var isBrowserSoftPhoneSupported = function () {\n    // In Opera, the true version is after \"Opera\" or after \"Version\"\n    if (connect.isOperaBrowser() && connect.getOperaBrowserVersion() > 17) {\n      return true;\n    }\n    // In Chrome, the true version is after \"Chrome\"\n    else if (connect.isChromeBrowser() && connect.getChromeBrowserVersion() > 22) {\n      return true;\n    }\n    // In Firefox, the true version is after \"Firefox\"\n    else if (connect.isFirefoxBrowser() && connect.getFirefoxBrowserVersion() > 21) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  var sendSoftphoneMetrics = function (contact) {\n    var streamStats = timeSeriesStreamStatsBuffer.slice();\n    timeSeriesStreamStatsBuffer = [];\n    if (streamStats.length > 0) {\n      contact.sendSoftphoneMetrics(streamStats, {\n        success: function () {\n          logger.info(\"sendSoftphoneMetrics success\" + JSON.stringify(streamStats))\n            .sendInternalLogToServer();\n        },\n        failure: function (data) {\n          logger.error(\"sendSoftphoneMetrics failed.\")\n            .withObject(data)\n            .sendInternalLogToServer();\n        }\n      });\n    }\n  };\n\n  var sendSoftphoneReport = function (contact, report, userAudioStats, remoteAudioStats) {\n    report.streamStats = [addStreamTypeToStats(userAudioStats, AUDIO_INPUT),\n    addStreamTypeToStats(remoteAudioStats, AUDIO_OUTPUT)];\n    var callReport = {\n      callStartTime: report.sessionStartTime,\n      callEndTime: report.sessionEndTime,\n      gumTimeMillis: report.gumTimeMillis,\n      initializationTimeMillis: report.initializationTimeMillis,\n      iceCollectionTimeMillis: report.iceCollectionTimeMillis,\n      signallingConnectTimeMillis: report.signallingConnectTimeMillis,\n      handshakingTimeMillis: report.handshakingTimeMillis,\n      preTalkingTimeMillis: report.preTalkingTimeMillis,\n      talkingTimeMillis: report.talkingTimeMillis,\n      cleanupTimeMillis: report.cleanupTimeMillis,\n      iceCollectionFailure: report.iceCollectionFailure,\n      signallingConnectionFailure: report.signallingConnectionFailure,\n      handshakingFailure: report.handshakingFailure,\n      gumOtherFailure: report.gumOtherFailure,\n      gumTimeoutFailure: report.gumTimeoutFailure,\n      createOfferFailure: report.createOfferFailure,\n      setLocalDescriptionFailure: report.setLocalDescriptionFailure,\n      userBusyFailure: report.userBusyFailure,\n      invalidRemoteSDPFailure: report.invalidRemoteSDPFailure,\n      noRemoteIceCandidateFailure: report.noRemoteIceCandidateFailure,\n      setRemoteDescriptionFailure: report.setRemoteDescriptionFailure,\n      softphoneStreamStatistics: report.streamStats\n    };\n    contact.sendSoftphoneReport(callReport, {\n      success: function () {\n        logger.info(\"sendSoftphoneReport success\" + JSON.stringify(callReport))\n          .sendInternalLogToServer();\n      },\n      failure: function (data) {\n        logger.error(\"sendSoftphoneReport failed.\")\n          .withObject(data)\n          .sendInternalLogToServer();\n      }\n    });\n  };\n\n  var startStatsCollectionJob = function (rtcSession) {\n    rtpStatsJob = window.setInterval(function () {\n      rtcSession.getUserAudioStats().then(function (stats) {\n        var previousUserStats = aggregatedUserAudioStats;\n        aggregatedUserAudioStats = stats;\n        timeSeriesStreamStatsBuffer.push(getTimeSeriesStats(aggregatedUserAudioStats, previousUserStats, AUDIO_INPUT));\n      }, function (error) {\n        logger.debug(\"Failed to get user audio stats.\", error).sendInternalLogToServer();\n      });\n      rtcSession.getRemoteAudioStats().then(function (stats) {\n        var previousRemoteStats = aggregatedRemoteAudioStats;\n        aggregatedRemoteAudioStats = stats;\n        timeSeriesStreamStatsBuffer.push(getTimeSeriesStats(aggregatedRemoteAudioStats, previousRemoteStats, AUDIO_OUTPUT));\n      }, function (error) {\n        logger.debug(\"Failed to get remote audio stats.\", error).sendInternalLogToServer();\n      });\n    }, 1000);\n  };\n\n  var startStatsReportingJob = function (contact) {\n    reportStatsJob = window.setInterval(function () {\n      sendSoftphoneMetrics(contact);\n    }, statsReportingJobIntervalMs);\n  };\n\n  var initializeParams = function () {\n    aggregatedUserAudioStats = null;\n    aggregatedRemoteAudioStats = null;\n    timeSeriesStreamStatsBuffer = [];\n    rtpStatsJob = null;\n    reportStatsJob = null;\n  };\n\n  var getTimeSeriesStats = function (currentStats, previousStats, streamType) {\n    if (previousStats && currentStats) {\n      var packetsLost = currentStats.packetsLost > previousStats.packetsLost ? currentStats.packetsLost - previousStats.packetsLost : 0;\n      var packetsCount = currentStats.packetsCount > previousStats.packetsCount ? currentStats.packetsCount - previousStats.packetsCount : 0;\n      return new RTPStreamStats(currentStats.timestamp,\n        packetsLost,\n        packetsCount,\n        streamType,\n        currentStats.audioLevel,\n        currentStats.jbMilliseconds,\n        currentStats.rttMilliseconds);\n    } else {\n      return new RTPStreamStats(currentStats.timestamp,\n        currentStats.packetsLost,\n        currentStats.packetsCount,\n        streamType,\n        currentStats.audioLevel,\n        currentStats.jbMilliseconds,\n        currentStats.rttMilliseconds);\n    }\n  };\n\n  var stopJob = function (task) {\n    if (task !== null) {\n      window.clearInterval(task);\n    }\n    return null;\n  };\n\n  var stopJobsAndReport = function (contact, sessionReport) {\n    rtpStatsJob = stopJob(rtpStatsJob);\n    reportStatsJob = stopJob(reportStatsJob);\n    sendSoftphoneReport(contact, sessionReport, addStreamTypeToStats(aggregatedUserAudioStats, AUDIO_INPUT), addStreamTypeToStats(aggregatedRemoteAudioStats, AUDIO_OUTPUT));\n    sendSoftphoneMetrics(contact);\n  };\n\n  /**\n  *   Adding streamtype parameter on top of RTCJS RTStats object.\n  */\n  var RTPStreamStats = function (timestamp, packetsLost, packetsCount, streamType, audioLevel, jitterBufferMillis, roundTripTimeMillis) {\n    this.softphoneStreamType = streamType;\n    this.timestamp = timestamp;\n    this.packetsLost = packetsLost;\n    this.packetsCount = packetsCount;\n    this.audioLevel = audioLevel;\n    this.jitterBufferMillis = jitterBufferMillis;\n    this.roundTripTimeMillis = roundTripTimeMillis;\n  };\n\n  var addStreamTypeToStats = function (stats, streamType) {\n    stats = stats || {};\n    return new RTPStreamStats(stats.timestamp, stats.packetsLost, stats.packetsCount, streamType, stats.audioLevel);\n  };\n\n  var SoftphoneLogger = function (logger) {\n    this._originalLogger = logger;\n    var self = this;\n    this._tee = function (level, method) {\n      return function () {\n        // call the original logger object to output to browser\n        //Connect logger follows %s format to print objects to console.\n        var args = Array.prototype.slice.call(arguments[0]);\n        var format = \"\";\n        args.forEach(function () {\n          format = format + \" %s\";\n        });\n        return method.apply(self._originalLogger, [connect.LogComponent.SOFTPHONE, format].concat(args));\n      };\n    };\n  };\n\n  SoftphoneLogger.prototype.debug = function () {\n    return this._tee(1, this._originalLogger.debug)(arguments);\n  };\n  SoftphoneLogger.prototype.info = function () {\n    return this._tee(2, this._originalLogger.info)(arguments);\n  };\n  SoftphoneLogger.prototype.log = function () {\n    return this._tee(3, this._originalLogger.log)(arguments);\n  };\n  SoftphoneLogger.prototype.warn = function () {\n    return this._tee(4, this._originalLogger.warn)(arguments);\n  };\n  SoftphoneLogger.prototype.error = function () {\n    return this._tee(5, this._originalLogger.error)(arguments);\n  };\n\n  connect.SoftphoneManager = SoftphoneManager;\n})();\n\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n\n  connect.worker = {};\n\n  var GET_AGENT_TIMEOUT_MS = 30000;\n  var GET_AGENT_RECOVERY_TIMEOUT_MS = 5000;\n  var GET_AGENT_SUCCESS_TIMEOUT_MS = 100;\n  var LOG_BUFFER_CAP_SIZE = 400;\n\n  var CHECK_AUTH_TOKEN_INTERVAL_MS = 300000; // 5 minuts\n  var REFRESH_AUTH_TOKEN_INTERVAL_MS = 10000; // 10 seconds\n  var REFRESH_AUTH_TOKEN_MAX_TRY = 4;\n\n  var GET_AGENT_CONFIGURATION_INTERVAL_MS = 30000;\n\n  /**-----------------------------------------------------------------------*/\n  var MasterTopicCoordinator = function () {\n    this.topicMasterMap = {};\n  };\n\n  MasterTopicCoordinator.prototype.getMaster = function (topic) {\n    connect.assertNotNull(topic, 'topic');\n    return this.topicMasterMap[topic] || null;\n  };\n\n  MasterTopicCoordinator.prototype.setMaster = function (topic, id) {\n    connect.assertNotNull(topic, 'topic');\n    connect.assertNotNull(id, 'id');\n    this.topicMasterMap[topic] = id;\n  };\n\n  MasterTopicCoordinator.prototype.removeMaster = function (id) {\n    connect.assertNotNull(id, 'id');\n    var self = this;\n\n    connect.entries(this.topicMasterMap).filter(function (entry) {\n      return entry.value === id;\n    }).forEach(function (entry) {\n      delete self.topicMasterMap[entry.key];\n    });\n  };\n\n  /**---------------------------------------------------------------\n   * class WorkerClient extends ClientBase\n   */\n  var WorkerClient = function (conduit) {\n    connect.ClientBase.call(this);\n    this.conduit = conduit;\n  };\n  WorkerClient.prototype = Object.create(connect.ClientBase.prototype);\n  WorkerClient.prototype.constructor = WorkerClient;\n\n  WorkerClient.prototype._callImpl = function (method, params, callbacks) {\n    var self = this;\n    var request_start = new Date().getTime();\n    if(connect.containsValue(connect.AgentAppClientMethods, method)) {\n      connect.core.getAgentAppClient()._callImpl(method, params, {\n        success: function (data) {\n          self._recordAPILatency(method, request_start);\n          callbacks.success(data);\n        },\n        failure: function (error, data) {\n          self._recordAPILatency(method, request_start, error);\n          callbacks.failure(error, data);\n        }\n      })\n    } else {\n      connect.core.getClient()._callImpl(method, params, {\n        success: function (data) {\n          self._recordAPILatency(method, request_start);\n          callbacks.success(data);\n        },\n        failure: function (error, data) {\n          self._recordAPILatency(method, request_start, error);\n          callbacks.failure(error, data);\n        },\n        authFailure: function () {\n          self._recordAPILatency(method, request_start);\n          callbacks.authFailure();\n        },\n        accessDenied: function () {\n          callbacks.accessDenied && callbacks.accessDenied();\n        }\n      });\n    }\n    \n  };\n\n  WorkerClient.prototype._recordAPILatency = function (method, request_start, err) {\n    var request_end = new Date().getTime();\n    var request_time = request_end - request_start;\n    this._sendAPIMetrics(method, request_time, err);\n  };\n\n  WorkerClient.prototype._sendAPIMetrics = function (method, time, err) {\n    this.conduit.sendDownstream(connect.EventType.API_METRIC, {\n      name: method,\n      time: time,\n      dimensions: [\n        {\n          name: \"Category\",\n          value: \"API\"\n        }\n      ],\n      error: err\n    });\n  };\n\n  /**-------------------------------------------------------------------------\n   * The object responsible for polling and passing data downstream to all\n   * consumer ports.\n   */\n  var ClientEngine = function () {\n    var self = this;\n\n    this.multiplexer = new connect.StreamMultiplexer();\n    this.conduit = new connect.Conduit(\"AmazonConnectSharedWorker\", null, this.multiplexer);\n    this.client = new WorkerClient(this.conduit);\n    this.timeout = null;\n    this.agent = null;\n    this.nextToken = null;\n    this.initData = {};\n    this.portConduitMap = {};\n    this.masterCoord = new MasterTopicCoordinator();\n    this.logsBuffer = [];\n    this.suppress = false;\n    this.forceOffline = false;\n\n    var webSocketManager = null;\n\n    connect.rootLogger = new connect.DownstreamConduitLogger(this.conduit);\n\n    this.conduit.onDownstream(connect.EventType.SEND_LOGS, function (logsToUpload) {\n      // Add softphone logs downstream\n      connect.getLog().pushLogsDownstream(logsToUpload);\n\n      self.logsBuffer = self.logsBuffer.concat(logsToUpload);\n      //only call API to send logs if buffer reached cap\n      if (self.logsBuffer.length > LOG_BUFFER_CAP_SIZE) {\n        self.handleSendLogsRequest(self.logsBuffer);\n      }\n    });\n\n    this.conduit.onDownstream(connect.EventType.CONFIGURE, function (data) {\n      if (data.authToken && data.authToken !== self.initData.authToken) {\n        self.initData = data;\n        connect.core.init(data);\n        // init only once.\n        if (!webSocketManager) {\n\n          connect.getLog().info(\"Creating a new Websocket connection for CCP\")\n            .sendInternalLogToServer();\n\n          connect.WebSocketManager.setGlobalConfig({\n            loggerConfig: { logger: connect.getLog() }\n          });\n\n          webSocketManager = connect.WebSocketManager.create();\n\n          webSocketManager.onInitFailure(function () {\n            self.conduit.sendDownstream(connect.WebSocketEvents.INIT_FAILURE);\n          });\n\n          webSocketManager.onConnectionOpen(function (response) {\n            self.conduit.sendDownstream(connect.WebSocketEvents.CONNECTION_OPEN, response);\n          });\n\n          webSocketManager.onConnectionClose(function (response) {\n            self.conduit.sendDownstream(connect.WebSocketEvents.CONNECTION_CLOSE, response);\n          });\n\n          webSocketManager.onConnectionGain(function () {\n            self.conduit.sendDownstream(connect.AgentEvents.WEBSOCKET_CONNECTION_GAINED);\n            self.conduit.sendDownstream(connect.WebSocketEvents.CONNECTION_GAIN);\n          });\n\n          webSocketManager.onConnectionLost(function (response) {\n            self.conduit.sendDownstream(connect.AgentEvents.WEBSOCKET_CONNECTION_LOST, response);\n            self.conduit.sendDownstream(connect.WebSocketEvents.CONNECTION_LOST, response);\n          });\n\n          webSocketManager.onSubscriptionUpdate(function (response) {\n            self.conduit.sendDownstream(connect.WebSocketEvents.SUBSCRIPTION_UPDATE, response);\n          });\n\n          webSocketManager.onSubscriptionFailure(function (response) {\n            self.conduit.sendDownstream(connect.WebSocketEvents.SUBSCRIPTION_FAILURE, response);\n          });\n\n          webSocketManager.onAllMessage(function (response) {\n            self.conduit.sendDownstream(connect.WebSocketEvents.ALL_MESSAGE, response);\n          });\n\n          self.conduit.onDownstream(connect.WebSocketEvents.SEND, function (message) {\n            webSocketManager.sendMessage(message);\n          });\n\n          self.conduit.onDownstream(connect.WebSocketEvents.SUBSCRIBE, function (topics) {\n            webSocketManager.subscribeTopics(topics);\n          });\n\n          webSocketManager.init(connect.hitch(self, self.getWebSocketUrl)).then(function(response) {\n            if (response && !response.webSocketConnectionFailed) {\n              // Start polling for agent data.\n              connect.getLog().info(\"Kicking off agent polling\")\n                .sendInternalLogToServer();\n              self.pollForAgent();\n\n              connect.getLog().info(\"Kicking off config polling\")\n                .sendInternalLogToServer();\n              self.pollForAgentConfiguration({ repeatForever: true });\n\n              connect.getLog().info(\"Kicking off auth token polling\")\n                .sendInternalLogToServer();\n              global.setInterval(connect.hitch(self, self.checkAuthToken), CHECK_AUTH_TOKEN_INTERVAL_MS);\n            } else {\n              if (!connect.webSocketInitFailed) {\n                self.conduit.sendDownstream(connect.WebSocketEvents.INIT_FAILURE);\n                connect.webSocketInitFailed = true;\n              }\n            }\n          });\n        } else {\n          connect.getLog().info(\"Not Initializing a new WebsocketManager instance, since one already exists\")\n            .sendInternalLogToServer();\n        }\n      }\n    });\n    this.conduit.onDownstream(connect.EventType.TERMINATE, function () {\n      //upload pending logs before terminating.\n      self.handleSendLogsRequest(self.logsBuffer);\n      connect.core.terminate();\n      self.conduit.sendDownstream(connect.EventType.TERMINATED);\n    });\n    this.conduit.onDownstream(connect.EventType.SYNCHRONIZE, function () {\n      self.conduit.sendDownstream(connect.EventType.ACKNOWLEDGE);\n    });\n    this.conduit.onDownstream(connect.EventType.BROADCAST, function (data) {\n      self.conduit.sendDownstream(data.event, data.data);\n    });\n\n    /**\n     * Called when a consumer port connects to this SharedWorker.\n     * Let's add them to our multiplexer.\n     */\n    global.onconnect = function (event) {\n      var port = event.ports[0];\n      var stream = new connect.PortStream(port);\n      self.multiplexer.addStream(stream);\n      port.start();\n\n      var portConduit = new connect.Conduit(stream.getId(), null, stream);\n      portConduit.sendDownstream(connect.EventType.ACKNOWLEDGE, { id: stream.getId() });\n\n      self.portConduitMap[stream.getId()] = portConduit;\n      self.conduit.sendDownstream(connect.EventType.UPDATE_CONNECTED_CCPS, { length: Object.keys(self.portConduitMap).length });\n\n      if (self.agent !== null) {\n        self.updateAgent();\n      }\n\n      portConduit.onDownstream(connect.EventType.API_REQUEST,\n        connect.hitch(self, self.handleAPIRequest, portConduit));\n      portConduit.onDownstream(connect.EventType.MASTER_REQUEST,\n        connect.hitch(self, self.handleMasterRequest, portConduit, stream.getId()));\n      portConduit.onDownstream(connect.EventType.RELOAD_AGENT_CONFIGURATION,\n        connect.hitch(self, self.pollForAgentConfiguration));\n      portConduit.onDownstream(connect.EventType.CLOSE, function () {\n        self.multiplexer.removeStream(stream);\n        delete self.portConduitMap[stream.getId()];\n        self.masterCoord.removeMaster(stream.getId());\n        self.conduit.sendDownstream(connect.EventType.UPDATE_CONNECTED_CCPS, { length: Object.keys(self.portConduitMap).length });\n      });\n    };\n  };\n\n  ClientEngine.prototype.pollForAgent = function () {\n    var self = this;\n    var onAuthFail = connect.hitch(self, self.handleAuthFail);\n\n    this.client.call(connect.ClientMethods.GET_AGENT_SNAPSHOT, {\n      nextToken: self.nextToken,\n      timeout: GET_AGENT_TIMEOUT_MS\n    }, {\n        success: function (data) {\n          try {\n            self.agent = self.agent || {};\n            self.agent.snapshot = data.snapshot;\n            self.agent.snapshot.localTimestamp = connect.now();\n            self.agent.snapshot.skew = self.agent.snapshot.snapshotTimestamp - self.agent.snapshot.localTimestamp;\n            self.nextToken = data.nextToken;\n            connect.getLog().trace(\"GET_AGENT_SNAPSHOT succeeded.\")\n              .withObject(data)\n              .sendInternalLogToServer();\n            self.updateAgent();\n          } catch (e) {\n            connect.getLog().error(\"Long poll failed to update agent.\")\n              .withObject(data)\n              .withException(e)\n              .sendInternalLogToServer();\n          } finally {\n            global.setTimeout(connect.hitch(self, self.pollForAgent), GET_AGENT_SUCCESS_TIMEOUT_MS);\n          }\n        },\n        failure: function (err, data) {\n          try {\n            connect.getLog().error(\"Failed to get agent data.\")\n              .sendInternalLogToServer()\n              .withObject({\n                err: err,\n                data: data\n              });\n\n          } finally {\n            global.setTimeout(connect.hitch(self, self.pollForAgent), GET_AGENT_RECOVERY_TIMEOUT_MS);\n          }\n        },\n        authFailure: function () {\n          onAuthFail();\n        },\n        accessDenied: connect.hitch(self, self.handleAccessDenied)\n\n      });\n\n  };\n\n  ClientEngine.prototype.pollForAgentConfiguration = function (paramsIn) {\n    var self = this;\n    var params = paramsIn || {};\n    var onAuthFail = connect.hitch(self, self.handleAuthFail);\n\n    this.client.call(connect.ClientMethods.GET_AGENT_CONFIGURATION, {}, {\n      success: function (data) {\n        var configuration = data.configuration;\n        self.pollForAgentPermissions(configuration);\n        self.pollForAgentStates(configuration);\n        self.pollForDialableCountryCodes(configuration);\n        self.pollForRoutingProfileQueues(configuration);\n        if (params.repeatForever) {\n          global.setTimeout(connect.hitch(self, self.pollForAgentConfiguration, params),\n            GET_AGENT_CONFIGURATION_INTERVAL_MS);\n        }\n      },\n      failure: function (err, data) {\n        try {\n          connect.getLog().error(\"Failed to fetch agent configuration data.\")\n            .sendInternalLogToServer()\n            .withObject({\n              err: err,\n              data: data\n            });\n        } finally {\n          if (params.repeatForever) {\n            global.setTimeout(connect.hitch(self, self.pollForAgentConfiguration),\n              GET_AGENT_CONFIGURATION_INTERVAL_MS, params);\n          }\n        }\n      },\n      authFailure: function () {\n        onAuthFail();\n      },\n      accessDenied: connect.hitch(self, self.handleAccessDenied)\n    });\n  };\n\n  ClientEngine.prototype.pollForAgentStates = function (configuration, paramsIn) {\n    var self = this;\n    var params = paramsIn || {};\n    params.maxResults = params.maxResults || connect.DEFAULT_BATCH_SIZE;\n\n    this.client.call(connect.ClientMethods.GET_AGENT_STATES, {\n      nextToken: params.nextToken || null,\n      maxResults: params.maxResults\n\n    }, {\n        success: function (data) {\n          if (data.nextToken) {\n            self.pollForAgentStates(configuration, {\n              states: (params.states || []).concat(data.states),\n              nextToken: data.nextToken,\n              maxResults: params.maxResults\n            });\n\n          } else {\n            configuration.agentStates = (params.states || []).concat(data.states);\n            self.updateAgentConfiguration(configuration);\n          }\n        },\n        failure: function (err, data) {\n          connect.getLog().error(\"Failed to fetch agent states list.\")\n            .sendInternalLogToServer()\n            .withObject({\n              err: err,\n              data: data\n            });\n        },\n        authFailure: connect.hitch(self, self.handleAuthFail),\n        accessDenied: connect.hitch(self, self.handleAccessDenied)\n      });\n  };\n\n  ClientEngine.prototype.pollForAgentPermissions = function (configuration, paramsIn) {\n    var self = this;\n    var params = paramsIn || {};\n    params.maxResults = params.maxResults || connect.DEFAULT_BATCH_SIZE;\n\n    this.client.call(connect.ClientMethods.GET_AGENT_PERMISSIONS, {\n      nextToken: params.nextToken || null,\n      maxResults: params.maxResults\n\n    }, {\n        success: function (data) {\n          if (data.nextToken) {\n            self.pollForAgentPermissions(configuration, {\n              permissions: (params.permissions || []).concat(data.permissions),\n              nextToken: data.nextToken,\n              maxResults: params.maxResults\n            });\n\n          } else {\n            configuration.permissions = (params.permissions || []).concat(data.permissions);\n            self.updateAgentConfiguration(configuration);\n          }\n        },\n        failure: function (err, data) {\n          connect.getLog().error(\"Failed to fetch agent permissions list.\")\n            .sendInternalLogToServer()\n            .withObject({\n              err: err,\n              data: data\n            });\n        },\n        authFailure: connect.hitch(self, self.handleAuthFail),\n        accessDenied: connect.hitch(self, self.handleAccessDenied)\n      });\n  };\n\n  ClientEngine.prototype.pollForDialableCountryCodes = function (configuration, paramsIn) {\n    var self = this;\n    var params = paramsIn || {};\n    params.maxResults = params.maxResults || connect.DEFAULT_BATCH_SIZE;\n\n    this.client.call(connect.ClientMethods.GET_DIALABLE_COUNTRY_CODES, {\n      nextToken: params.nextToken || null,\n      maxResults: params.maxResults\n    }, {\n        success: function (data) {\n          if (data.nextToken) {\n            self.pollForDialableCountryCodes(configuration, {\n              countryCodes: (params.countryCodes || []).concat(data.countryCodes),\n              nextToken: data.nextToken,\n              maxResults: params.maxResults\n            });\n\n          } else {\n            configuration.dialableCountries = (params.countryCodes || []).concat(data.countryCodes);\n            self.updateAgentConfiguration(configuration);\n          }\n        },\n        failure: function (err, data) {\n          connect.getLog().error(\"Failed to fetch dialable country codes list.\")\n            .sendInternalLogToServer()\n            .withObject({\n              err: err,\n              data: data\n            });\n        },\n        authFailure: connect.hitch(self, self.handleAuthFail),\n        accessDenied: connect.hitch(self, self.handleAccessDenied)\n      });\n  };\n\n  ClientEngine.prototype.pollForRoutingProfileQueues = function (configuration, paramsIn) {\n    var self = this;\n    var params = paramsIn || {};\n    params.maxResults = params.maxResults || connect.DEFAULT_BATCH_SIZE;\n\n    this.client.call(connect.ClientMethods.GET_ROUTING_PROFILE_QUEUES, {\n      routingProfileARN: configuration.routingProfile.routingProfileARN,\n      nextToken: params.nextToken || null,\n      maxResults: params.maxResults\n    }, {\n        success: function (data) {\n          if (data.nextToken) {\n            self.pollForRoutingProfileQueues(configuration, {\n              countryCodes: (params.queues || []).concat(data.queues),\n              nextToken: data.nextToken,\n              maxResults: params.maxResults\n            });\n\n          } else {\n            configuration.routingProfile.queues = (params.queues || []).concat(data.queues);\n            self.updateAgentConfiguration(configuration);\n          }\n        },\n        failure: function (err, data) {\n          connect.getLog().error(\"Failed to fetch routing profile queues list.\")\n            .sendInternalLogToServer()\n            .withObject({\n              err: err,\n              data: data\n            });\n        },\n        authFailure: connect.hitch(self, self.handleAuthFail),\n        accessDenied: connect.hitch(self, self.handleAccessDenied)\n      });\n  };\n\n  ClientEngine.prototype.handleAPIRequest = function (portConduit, request) {\n    var self = this;\n\n    this.client.call(request.method, request.params, {\n      success: function (data) {\n        var response = connect.EventFactory.createResponse(connect.EventType.API_RESPONSE, request, data);\n        portConduit.sendDownstream(response.event, response);\n      },\n      failure: function (err, data) {\n        var response = connect.EventFactory.createResponse(connect.EventType.API_RESPONSE, request, data, JSON.stringify(err));\n        portConduit.sendDownstream(response.event, response);\n        connect.getLog().error(\"'%s' API request failed\", request.method)\n          .withObject({ request: self.filterAuthToken(request), response: response })\n          .withException(err)\n          .sendInternalLogToServer();\n      },\n      authFailure: connect.hitch(self, self.handleAuthFail)\n    });\n  };\n\n  /**\n   * Handle incoming master query or modification requests from connected tab ports.\n   */\n  ClientEngine.prototype.handleMasterRequest = function (portConduit, portId, request) {\n    var multiplexerConduit = this.conduit;\n    var response = null;\n\n    switch (request.method) {\n      case connect.MasterMethods.BECOME_MASTER:\n        var masterId = this.masterCoord.getMaster(request.params.topic);\n        var takeOver = Boolean(masterId) && masterId !== portId;\n        this.masterCoord.setMaster(request.params.topic, portId);\n        response = connect.EventFactory.createResponse(connect.EventType.MASTER_RESPONSE, request, {\n          masterId: portId,\n          takeOver: takeOver,\n          topic: request.params.topic\n        });\n        if (takeOver) {\n          multiplexerConduit.sendDownstream(response.event, response);\n        }\n        break;\n\n      case connect.MasterMethods.CHECK_MASTER:\n        var masterId = this.masterCoord.getMaster(request.params.topic);\n        if (!masterId) {\n          this.masterCoord.setMaster(request.params.topic, portId);\n          masterId = portId;\n        }\n        response = connect.EventFactory.createResponse(connect.EventType.MASTER_RESPONSE, request, {\n          masterId: masterId,\n          isMaster: portId === masterId,\n          topic: request.params.topic\n        });\n        break;\n\n      default:\n        throw new Error(\"Unknown master method: \" + request.method);\n    }\n\n    portConduit.sendDownstream(response.event, response);\n  };\n\n  ClientEngine.prototype.updateAgentConfiguration = function (configuration) {\n    if (configuration.permissions &&\n      configuration.dialableCountries &&\n      configuration.agentStates &&\n      configuration.routingProfile.queues) {\n\n      this.agent = this.agent || {};\n      this.agent.configuration = configuration;\n      this.updateAgent();\n\n    } else {\n      connect.getLog().trace(\"Waiting to update agent configuration until all config data has been fetched.\")\n        .sendInternalLogToServer();\n    }\n  };\n\n  ClientEngine.prototype.updateAgent = function () {\n    if (!this.agent) {\n      connect.getLog().trace(\"Waiting to update agent until the agent has been fully constructed.\")\n        .sendInternalLogToServer();\n\n    } else if (!this.agent.snapshot) {\n      connect.getLog().trace(\"Waiting to update agent until the agent snapshot is available.\")\n        .sendInternalLogToServer();\n\n    } else if (!this.agent.configuration) {\n      connect.getLog().trace(\"Waiting to update agent until the agent configuration is available.\")\n        .sendInternalLogToServer();\n\n    } else {\n      // Alias some of the properties for backwards compatibility.\n      this.agent.snapshot.status = this.agent.state;\n\n      // Sort the contacts on the timestamp\n      if (this.agent.snapshot.contacts && this.agent.snapshot.contacts.length > 1) {\n        this.agent.snapshot.contacts.sort(function (contactA, contactB) {\n          return contactA.state.timestamp.getTime() - contactB.state.timestamp.getTime();\n        });\n      }\n\n      this.agent.snapshot.contacts.forEach(function (contact) {\n        contact.status = contact.state;\n\n        contact.connections.forEach(function (connection) {\n          connection.address = connection.endpoint;\n        });\n      });\n\n      this.agent.configuration.routingProfile.defaultOutboundQueue.queueId =\n        this.agent.configuration.routingProfile.defaultOutboundQueue.queueARN;\n      this.agent.configuration.routingProfile.queues.forEach(function (queue) {\n        queue.queueId = queue.queueARN;\n      });\n      this.agent.snapshot.contacts.forEach(function (contact) {\n        //contact.queue is null when monitoring\n        if (contact.queue !== undefined) {\n          contact.queue.queueId = contact.queue.queueARN;\n        }\n      });\n      this.agent.configuration.routingProfile.routingProfileId =\n        this.agent.configuration.routingProfile.routingProfileARN;\n      \n      this.conduit.sendDownstream(connect.AgentEvents.UPDATE, this.agent);\n    }\n  };\n\n/**\n * Provides a websocket url through the create_transport API.\n * @returns a promise which, upon success, returns the response from the createTransport API.\n */\n  ClientEngine.prototype.getWebSocketUrl = function () {\n    var self = this;\n    var client = connect.core.getClient();\n    var onAuthFail = connect.hitch(self, self.handleAuthFail);\n    var onAccessDenied = connect.hitch(self, self.handleAccessDenied);\n    return new Promise(function (resolve, reject) {\n      client.call(connect.ClientMethods.CREATE_TRANSPORT, { transportType: connect.TRANSPORT_TYPES.WEB_SOCKET }, {\n        success: function (data) {\n          connect.getLog().info(\"getWebSocketUrl succeeded\").sendInternalLogToServer();\n          resolve(data);\n        },\n        failure: function (err, data) {\n          connect.getLog().error(\"getWebSocketUrl failed\")\n            .sendInternalLogToServer()\n            .withObject({\n              err: err,\n              data: data\n            });\n          reject(Error(\"getWebSocketUrl failed\"));\n        },\n        authFailure: function () {\n          connect.getLog().error(\"getWebSocketUrl Auth Failure\").sendInternalLogToServer();\n          reject(Error(\"Authentication failed while getting getWebSocketUrl\"));\n          onAuthFail();\n        },\n        accessDenied: function () {\n          connect.getLog().error(\"getWebSocketUrl Access Denied Failure\").sendInternalLogToServer();\n          reject(Error(\"Access Denied Failure while getting getWebSocketUrl\"));\n          onAccessDenied();\n        }\n      });\n    });\n  };\n\n\n  /**\n    * Send a message downstream to all consumers when we detect that authentication\n    * against one of our APIs has failed.\n    */\n  ClientEngine.prototype.handleSendLogsRequest = function () {\n    var self = this;\n    var logEvents = [];\n    var logsToSend = self.logsBuffer.slice();\n    self.logsBuffer = [];\n    logsToSend.forEach(function (log) {\n      logEvents.push({\n        timestamp: log.time,\n        component: log.component,\n        message: log.text\n      });\n    });\n    this.client.call(connect.ClientMethods.SEND_CLIENT_LOGS, { logEvents: logEvents }, {\n      success: function (data) {\n        connect.getLog().info(\"SendLogs request succeeded.\").sendInternalLogToServer();\n      },\n      failure: function (err, data) {\n        connect.getLog().error(\"SendLogs request failed.\")\n          .withObject(data).withException(err)\n          .sendInternalLogToServer();\n      },\n      authFailure: connect.hitch(self, self.handleAuthFail)\n    });\n  };\n\n  ClientEngine.prototype.handleAuthFail = function () {\n    var self = this;\n    self.conduit.sendDownstream(connect.EventType.AUTH_FAIL);\n  };\n\n  ClientEngine.prototype.handleAccessDenied = function () {\n    var self = this;\n    self.conduit.sendDownstream(connect.EventType.ACCESS_DENIED);\n  };\n\n  ClientEngine.prototype.checkAuthToken = function () {\n    var self = this;\n    var expirationDate = new Date(self.initData.authTokenExpiration);\n    var currentTimeStamp = new Date().getTime();\n    var thirtyMins = 30 * 60 * 1000;\n\n    // refresh token 30 minutes before expiration\n    if (expirationDate.getTime() < (currentTimeStamp + thirtyMins)) {\n      connect.getLog().info(\"Auth token expires at \" + expirationDate + \" Start refreshing token with retry.\")\n        .sendInternalLogToServer();\n      connect.backoff(connect.hitch(self, self.authorize), REFRESH_AUTH_TOKEN_INTERVAL_MS, REFRESH_AUTH_TOKEN_MAX_TRY);\n    }\n  };\n\n\n  ClientEngine.prototype.authorize = function (callbacks) {\n    var self = this;\n    connect.core.authorize(this.initData.authorizeEndpoint).then(function (response) {\n      var expiration = new Date(response.expiration);\n      connect.getLog().info(\"Authorization succeeded and the token expires at %s\", expiration)\n        .sendInternalLogToServer();\n      self.initData.authToken = response.accessToken;\n      self.initData.authTokenExpiration = expiration;\n      connect.core.initClient(self.initData);\n      connect.core.initAgentAppClient(self.initData);\n      callbacks.success();\n    }).catch(function (response) {\n      connect.getLog().error(\"Authorization failed with code %s\", response.status)\n        .sendInternalLogToServer();\n      if (response.status === 401) {\n        self.handleAuthFail();\n      } else {\n        callbacks.failure();\n      }\n    });\n  };\n\n  /**\n   * Filter the 'authentication' field of the request params from the given API_REQUEST event.\n   */\n  ClientEngine.prototype.filterAuthToken = function (request) {\n    var new_request = {};\n\n    for (var keyA in request) {\n      if (keyA === 'params') {\n        var new_params = {};\n        for (var keyB in request.params) {\n          if (keyB !== 'authentication') {\n            new_params[keyB] = request.params[keyB];\n          }\n        }\n\n        new_request.params = new_params;\n      } else {\n        new_request[keyA] = request[keyA];\n      }\n    }\n\n    return new_request;\n  };\n\n  /**-----------------------------------------------------------------------*/\n  connect.worker.main = function () {\n    connect.worker.clientEngine = new ClientEngine();\n  };\n\n})();\n\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\"). You may not use\n * this file except in compliance with the License. A copy of the License is\n * located at\n *\n *    http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express\n * or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n\n  connect.ChatMediaController = function (mediaInfo, metadata) {\n    var logger = connect.getLog();\n    var logComponent = connect.LogComponent.CHAT;\n\n    var createMediaInstance = function () {\n      publishTelemetryEvent(\"Chat media controller init\", mediaInfo.contactId);\n      logger.info(logComponent, \"Chat media controller init\")\n        .withObject(mediaInfo).sendInternalLogToServer();\n\n      connect.ChatSession.setGlobalConfig({\n        loggerConfig: {\n          logger: logger\n        },\n        region: metadata.region\n      });\n\n      /** Could be also CUSTOMER -  For now we are creating only Agent connection media object */\n      var controller = connect.ChatSession.create({\n        chatDetails: mediaInfo,\n        type: \"AGENT\",\n        websocketManager: connect.core.getWebSocketManager()\n      });\n      \n      trackChatConnectionStatus(controller);\n      return controller\n        .connect()\n        .then(function (data) {\n          logger.info(logComponent, \"Chat Session Successfully established for contactId %s\", mediaInfo.contactId)\n            .sendInternalLogToServer();\n          publishTelemetryEvent(\"Chat Session Successfully established\", mediaInfo.contactId);\n          return controller;\n        })\n        .catch(function (error) {\n          logger.error(logComponent, \"Chat Session establishement failed for contact %s\", mediaInfo.contactId)\n            .withException(error).sendInternalLogToServer();\n          publishTelemetryEvent(\"Chat Session establishement failed\", mediaInfo.contactId, error);\n          throw error;\n        });\n    };\n\n    var publishTelemetryEvent = function (eventName, data) {\n      connect.publishMetric({\n        name: eventName,\n        contactId: mediaInfo.contactId,\n        data: data || mediaInfo\n      });\n    };\n\n    var trackChatConnectionStatus = function (controller) {\n      controller.onConnectionBroken(function (data) {\n        logger.error(logComponent, \"Chat Session connection broken\")\n          .withException(data).sendInternalLogToServer();\n        publishTelemetryEvent(\"Chat Session connection broken\", data);\n      });\n\n      controller.onConnectionEstablished(function (data) {\n        logger.info(logComponent, \"Chat Session connection established\")\n          .withObject(data).sendInternalLogToServer();\n        publishTelemetryEvent(\"Chat Session connection established\", data);\n      });\n    }\n\n    return {\n      get: function () {\n        return createMediaInstance();\n      }\n    }\n  }\n})();\n\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\"). You may not use\n * this file except in compliance with the License. A copy of the License is\n * located at\n *\n *    http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express\n * or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n\n  connect.MediaFactory = function (params) {\n    /** controller holder */\n    var mediaControllers = {};\n    var toBeDestroyed = new Set();\n\n    var logger = connect.getLog();\n    var logComponent = connect.LogComponent.CHAT;\n\n    var metadata = connect.merge({}, params) || {};\n    metadata.region =  metadata.region || \"us-west-2\"; // Default it to us-west-2\n\n    var getMediaController = function (connectionObj) {\n      var connectionId = connectionObj.getConnectionId();\n      var mediaInfo = connectionObj.getMediaInfo();\n      /** if we do not have the media info then just reject the request */\n      if (!mediaInfo) {\n        logger.error(logComponent, \"Media info does not exists for a media type %s\")\n          .withObject(connectionObj).sendInternalLogToServer();\n        return Promise.reject(\"Media info does not exists for this connection\");\n      }\n\n      if (!mediaControllers[connectionId]) {\n        logger.info(logComponent, \"media controller of type %s init\", connectionObj.getMediaType())\n          .withObject(connectionObj).sendInternalLogToServer();\n        switch (connectionObj.getMediaType()) {\n          case connect.MediaType.CHAT:\n            return mediaControllers[connectionId] = new connect.ChatMediaController(connectionObj.getMediaInfo(), metadata).get();\n          case connect.MediaType.SOFTPHONE:\n            return mediaControllers[connectionId] = new connect.SoftphoneMediaController(connectionObj.getMediaInfo()).get();\n          case connect.MediaType.TASK:\n            return mediaControllers[connectionId] = new connect.TaskMediaController(connectionObj.getMediaInfo()).get();\n          default:\n            logger.error(logComponent, \"Unrecognized media type %s \", connectionObj.getMediaType())\n              .sendInternalLogToServer();\n            return Promise.reject();\n        }\n      } else {\n        return mediaControllers[connectionId];\n      }\n    };\n\n    /** Check all the active states for the connection */\n    var ifConnectionActive = function (connectionObj) {\n      return connectionObj.isActive();\n    };\n\n    var get = function (connectionObj) {\n      if (ifConnectionActive(connectionObj)) {\n        return getMediaController(connectionObj);\n      } else {\n        destroy(connectionObj.getConnectionId());\n        return Promise.reject(\"Media Controller is no longer available for this connection\");\n      }\n    };\n\n    var destroy = function (connectionId) {\n      if (mediaControllers[connectionId] && !toBeDestroyed.has(connectionId)) {\n        logger.info(\n          logComponent,\n          \"Destroying mediaController for %s\",\n          connectionId\n        );\n        toBeDestroyed.add(connectionId);\n        mediaControllers[connectionId]\n          .then(function() {\n            if (typeof controller.cleanUp === \"function\") controller.cleanUp();\n            delete mediaControllers[connectionId];\n            toBeDestroyed.delete(connectionId);\n          })\n          .catch(function() {\n            delete mediaControllers[connectionId];\n            toBeDestroyed.delete(connectionId);\n          });\n      }\n    };\n\n    return {\n      get: get,\n      destroy: destroy\n    };\n  }\n})();\n\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\"). You may not use\n * this file except in compliance with the License. A copy of the License is\n * located at\n *\n *    http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express\n * or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n\n  // TODO move softphone implementations here - Wil do this for GA\n  connect.SoftphoneMediaController = function (mediaInfo) {\n    return {\n      get: function () {\n        return Promise.resolve(mediaInfo)\n      }\n    }\n  }\n})();\n\n/*\n * Copyright 2014-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\"). You may not use\n * this file except in compliance with the License. A copy of the License is\n * located at\n *\n *    http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express\n * or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n\n  connect.TaskMediaController = function (mediaInfo) {\n    var logger = connect.getLog();\n    var logComponent = connect.LogComponent.TASK;\n\n    var createMediaInstance = function () {\n      publishTelemetryEvent(\"Task media controller init\", mediaInfo.contactId);\n      logger\n        .info(logComponent, \"Task media controller init\")\n        .withObject(mediaInfo);\n\n      var controller = connect.TaskSession.create({\n        contactId: mediaInfo.contactId,\n        initialContactId: mediaInfo.initialContactId,\n        websocketManager: connect.core.getWebSocketManager(),\n      });\n\n      trackTaskConnectionStatus(controller);\n\n      return controller\n        .connect()\n        .then(function () {\n          logger.info(\n            logComponent,\n            \"Task Session Successfully established for contactId %s\",\n            mediaInfo.contactId\n          );\n          publishTelemetryEvent(\n            \"Task Session Successfully established\",\n            mediaInfo.contactId\n          );\n          return controller;\n        })\n        .catch(function (error) {\n          logger\n            .error(\n              logComponent,\n              \"Task Session establishement failed for contact %s\",\n              mediaInfo.contactId\n            )\n            .withException(error);\n          publishTelemetryEvent(\n            \"Chat Session establishement failed\",\n            mediaInfo.contactId,\n            error\n          );\n          throw error;\n        });\n    };\n\n    var publishTelemetryEvent = function (eventName, data) {\n      connect.publishMetric({\n        name: eventName,\n        contactId: mediaInfo.contactId,\n        data: data || mediaInfo,\n      });\n    };\n\n    var trackTaskConnectionStatus = function (controller) {\n      controller.onConnectionBroken(function (data) {\n        logger\n          .error(logComponent, \"Task Session connection broken\")\n          .withException(data);\n        publishTelemetryEvent(\"Task Session connection broken\", data);\n      });\n\n      controller.onConnectionEstablished(function (data) {\n        logger\n          .info(logComponent, \"Task Session connection established\")\n          .withObject(data);\n        publishTelemetryEvent(\"Task Session connection established\", data);\n      });\n    };\n\n    return {\n      get: function () {\n        return createMediaInstance();\n      },\n    };\n  };\n})();\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n  global.lily = connect;\n\n  connect.agentApp = {};\n\n  var IFRAME_REFRESH_INTERVAL = 5000;\n  var APP = {\n    CCP: 'ccp',\n  };\n\n  connect.agentApp.initCCP = connect.core.initCCP;\n  connect.agentApp.isInitialized = function (instanceAlias) {};\n\n  connect.agentApp.initAppCommunication = function (iframeId, endpoint) {\n    var iframe = document.getElementById(iframeId);\n    var iframeConduit = new connect.IFrameConduit(endpoint, window, iframe);\n    var BROADCAST_TYPE = [connect.AgentEvents.UPDATE, connect.ContactEvents.VIEW, connect.EventType.ACKNOWLEDGE, connect.EventType.TERMINATED];\n    iframe.addEventListener('load', function (e) {\n      BROADCAST_TYPE.forEach(function (type) {\n        connect.core.getUpstream().onUpstream(type, function (data) {\n          iframeConduit.sendUpstream(type, data);\n        });\n      });\n    });\n\n    var iframeRefreshInterval = window.setInterval(function () {\n      iframe.src += '';\n    }, IFRAME_REFRESH_INTERVAL);\n\n    connect.core.getUpstream().onUpstream(connect.EventType.ACKNOWLEDGE, function () {\n      global.clearInterval(iframeRefreshInterval);\n    });\n  };\n\n  var getConnectUrl = function (ccpUrl) {\n    var pos = ccpUrl.indexOf('ccp-v2');\n    return ccpUrl.slice(0, pos - 1);\n  };\n\n  var signOutThroughCCP = function (ccpUrl) {\n    var logoutUrl = getConnectUrl(ccpUrl) + '/logout';\n    return connect.fetch(logoutUrl, {\n      credentials: 'include',\n    }).then(function () {\n      var eventBus = connect.core.getEventBus();\n      eventBus.trigger(connect.EventType.TERMINATE);\n      return true;\n    }).catch(function (e) {\n      connect\n        .getLog()\n        .error('An error occured on logout.' + e)\n        .withException(e);\n      window.location.href = logoutUrl;\n      return false;\n    });\n  };\n\n  var signInThroughinitCCP = function (ccpUrl, container, config) {\n    var defaultParams = {\n      ccpUrl: ccpUrl,\n      ccpLoadTimeout: 10000,\n      loginPopup: true,\n      loginUrl: getConnectUrl(ccpUrl) + '/login',\n      softphone: {\n        allowFramedSoftphone: true,\n        disableRingtone: false,\n      }\n    };\n    var ccpParams = connect.merge(defaultParams, config.ccpParams);\n    connect.core.initCCP(container, ccpParams);\n  };\n\n  connect.agentApp.initApp = function (name, containerId, appUrl, config) {\n    config = config ? config : {};\n    var endpoint = appUrl.endsWith('/') ? appUrl : appUrl + '/';\n    var registerConfig = { endpoint: endpoint, style: config.style };\n    connect.agentApp.AppRegistry.register(name, registerConfig, document.getElementById(containerId));\n    connect.agentApp.AppRegistry.start(name, function (moduleData) {\n      var endpoint = moduleData.endpoint;\n      var containerDOM = moduleData.containerDOM;\n      return {\n        init: function () {\n          if (name === APP.CCP) return signInThroughinitCCP(endpoint, containerDOM, config);\n          return connect.agentApp.initAppCommunication(name, endpoint);\n        },\n        destroy: function () {\n          if (name === APP.CCP) return signOutThroughCCP(endpoint);\n          return null;\n        }\n      };\n    });\n  };\n\n  connect.agentApp.stopApp = function (name) {\n    return connect.agentApp.AppRegistry.stop(name);\n  };\n})();\n\n(function () {\n  var global = this;\n  connect = global.connect || {};\n  global.connect = connect;\n\n  var APP = {\n    CCP: 'ccp',\n  };\n\n  function AppRegistry() {\n    var moduleData = {};\n    var makeAppIframe = function (appName, endpoint, style) {\n      var iframe = document.createElement('iframe');\n      iframe.src = endpoint;\n      iframe.style = style || 'width: 100%; height:100%;';\n      iframe.id = appName;\n      iframe['aria-label'] = appName;\n      iframe.setAttribute(\n        \"sandbox\",\n        \"allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts\"\n      );\n      // TODO: Update sandbox option for 3P widget\n\n      return iframe;\n    };\n\n    return {\n      register: function (appName, config, containerDOM) {\n        moduleData[appName] = {\n          containerDOM: containerDOM,\n          endpoint: config.endpoint,\n          style: config.style,\n          instance: undefined,\n        };\n      },\n      start: function (appName, creator) {\n        if (!moduleData[appName]) return;\n        var containerDOM = moduleData[appName].containerDOM;\n        var endpoint = moduleData[appName].endpoint;\n        var style = moduleData[appName].style;\n        if (appName !== APP.CCP) {\n          var app = makeAppIframe(appName, endpoint, style);\n          containerDOM.appendChild(app);\n        }\n\n        moduleData[appName].instance = creator(moduleData[appName]);\n        return moduleData[appName].instance.init();\n      },\n      stop: function (appName) {\n        if (!moduleData[appName]) return;\n\n        var data = moduleData[appName];\n        var app = data.containerDOM.querySelector('iframe');\n        data.containerDOM.removeChild(app);\n\n        var result;\n        if (data.instance) {\n          result = data.instance.destroy();\n          delete data.instance;\n        }\n\n        return result;\n      }\n    };\n  }\n\n  global.connect.agentApp.AppRegistry = AppRegistry();\n})();\n"]},"metadata":{},"sourceType":"script"}